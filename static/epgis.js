(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
      typeof define === 'function' && define.amd ? define(factory) :
      (global = global || self, global.epgis = factory());
  }(this, function () {
    'use strict';
  
    /* eslint-disable */
  
    var shared, worker, epgis;
    // define gets called three times: one for each chunk. we rely on the order
    // they're imported to know which is which
    function define(_, chunk) {
      if (!shared) {
        shared = chunk;
      } else if (!worker) {
        worker = chunk;
      } else {
        var workerBundleString = 'var sharedChunk = {}; (' + shared + ')(sharedChunk); (' + worker + ')(sharedChunk);'
  
        var sharedChunk = {};
        shared(sharedChunk);
        epgis = chunk(sharedChunk);
        epgis.workerUrl = window.URL.createObjectURL(new Blob([workerBundleString], {
          type: 'text/javascript'
        }));
      }
    }
  
  
    define(["exports"], function (t) {
      "use strict";
  
      function e(t, e) {
        return t(e = {
          exports: {}
        }, e.exports), e.exports
      }
      var r, n, i = self.performance && self.performance.now ? self.performance.now.bind(self.performance) : Date.now.bind(Date),
        a = self.requestAnimationFrame || self.mozRequestAnimationFrame || self.webkitRequestAnimationFrame || self.msRequestAnimationFrame,
        o = self.cancelAnimationFrame || self.mozCancelAnimationFrame || self.webkitCancelAnimationFrame || self.msCancelAnimationFrame,
        s = {
          now: i,
          frame: function (t) {
            var e = a(t);
            return {
              cancel: function () {
                return o(e)
              }
            }
          },
          getImageData: function (t) {
            var e = self.document.createElement("canvas"),
              r = e.getContext("2d");
            if (!r) throw new Error("failed to create canvas 2d context");
            return e.width = t.width, e.height = t.height, r.drawImage(t, 0, 0, t.width, t.height), r.getImageData(0, 0, t.width, t.height)
          },
          resolveURL: function (t) {
            return r || (r = self.document.createElement("a")), r.href = t, r.href
          },
          hardwareConcurrency: self.navigator.hardwareConcurrency || 4,
          get devicePixelRatio() {
            return self.devicePixelRatio
          },
          get prefersReducedMotion() {
            return !!self.matchMedia && (null == n && (n = self.matchMedia("(prefers-reduced-motion: reduce)")), n.matches)
          }
        },
        u = l;
  
      function l(t, e, r, n) {
        this.cx = 3 * t, this.bx = 3 * (r - t) - this.cx, this.ax = 1 - this.cx - this.bx, this.cy = 3 * e, this.by = 3 * (n - e) - this.cy, this.ay = 1 - this.cy - this.by, this.p1x = t, this.p1y = n, this.p2x = r, this.p2y = n;
      }
      l.prototype.sampleCurveX = function (t) {
        return ((this.ax * t + this.bx) * t + this.cx) * t
      }, l.prototype.sampleCurveY = function (t) {
        return ((this.ay * t + this.by) * t + this.cy) * t
      }, l.prototype.sampleCurveDerivativeX = function (t) {
        return (3 * this.ax * t + 2 * this.bx) * t + this.cx
      }, l.prototype.solveCurveX = function (t, e) {
        var r, n, i, a, o;
        for (void 0 === e && (e = 1e-6), i = t, o = 0; o < 8; o++) {
          if (a = this.sampleCurveX(i) - t, Math.abs(a) < e) return i;
          var s = this.sampleCurveDerivativeX(i);
          if (Math.abs(s) < 1e-6) break;
          i -= a / s;
        }
        if ((i = t) < (r = 0)) return r;
        if (i > (n = 1)) return n;
        for (; r < n;) {
          if (a = this.sampleCurveX(i), Math.abs(a - t) < e) return i;
          t > a ? r = i : n = i, i = .5 * (n - r) + r;
        }
        return i
      }, l.prototype.solve = function (t, e) {
        return this.sampleCurveY(this.solveCurveX(t, e))
      };
      var p = c;
  
      function c(t, e) {
        this.x = t, this.y = e;
      }
  
      function h(t, e) {
        if (Array.isArray(t)) {
          if (!Array.isArray(e) || t.length !== e.length) return !1;
          for (var r = 0; r < t.length; r++)
            if (!h(t[r], e[r])) return !1;
          return !0
        }
        if ("object" == typeof t && null !== t && null !== e) {
          if ("object" != typeof e) return !1;
          if (Object.keys(t).length !== Object.keys(e).length) return !1;
          for (var n in t)
            if (!h(t[n], e[n])) return !1;
          return !0
        }
        return t === e
      }
  
      function f(t, e, r, n) {
        var i = new u(t, e, r, n);
        return function (t) {
          return i.solve(t)
        }
      }
      c.prototype = {
        clone: function () {
          return new c(this.x, this.y)
        },
        add: function (t) {
          return this.clone()._add(t)
        },
        sub: function (t) {
          return this.clone()._sub(t)
        },
        multByPoint: function (t) {
          return this.clone()._multByPoint(t)
        },
        divByPoint: function (t) {
          return this.clone()._divByPoint(t)
        },
        mult: function (t) {
          return this.clone()._mult(t)
        },
        div: function (t) {
          return this.clone()._div(t)
        },
        rotate: function (t) {
          return this.clone()._rotate(t)
        },
        rotateAround: function (t, e) {
          return this.clone()._rotateAround(t, e)
        },
        matMult: function (t) {
          return this.clone()._matMult(t)
        },
        unit: function () {
          return this.clone()._unit()
        },
        perp: function () {
          return this.clone()._perp()
        },
        round: function () {
          return this.clone()._round()
        },
        mag: function () {
          return Math.sqrt(this.x * this.x + this.y * this.y)
        },
        equals: function (t) {
          return this.x === t.x && this.y === t.y
        },
        dist: function (t) {
          return Math.sqrt(this.distSqr(t))
        },
        distSqr: function (t) {
          var e = t.x - this.x,
            r = t.y - this.y;
          return e * e + r * r
        },
        angle: function () {
          return Math.atan2(this.y, this.x)
        },
        angleTo: function (t) {
          return Math.atan2(this.y - t.y, this.x - t.x)
        },
        angleWith: function (t) {
          return this.angleWithSep(t.x, t.y)
        },
        angleWithSep: function (t, e) {
          return Math.atan2(this.x * e - this.y * t, this.x * t + this.y * e)
        },
        _matMult: function (t) {
          var e = t[0] * this.x + t[1] * this.y,
            r = t[2] * this.x + t[3] * this.y;
          return this.x = e, this.y = r, this
        },
        _add: function (t) {
          return this.x += t.x, this.y += t.y, this
        },
        _sub: function (t) {
          return this.x -= t.x, this.y -= t.y, this
        },
        _mult: function (t) {
          return this.x *= t, this.y *= t, this
        },
        _div: function (t) {
          return this.x /= t, this.y /= t, this
        },
        _multByPoint: function (t) {
          return this.x *= t.x, this.y *= t.y, this
        },
        _divByPoint: function (t) {
          return this.x /= t.x, this.y /= t.y, this
        },
        _unit: function () {
          return this._div(this.mag()), this
        },
        _perp: function () {
          var t = this.y;
          return this.y = this.x, this.x = -t, this
        },
        _rotate: function (t) {
          var e = Math.cos(t),
            r = Math.sin(t),
            n = e * this.x - r * this.y,
            i = r * this.x + e * this.y;
          return this.x = n, this.y = i, this
        },
        _rotateAround: function (t, e) {
          var r = Math.cos(t),
            n = Math.sin(t),
            i = e.x + r * (this.x - e.x) - n * (this.y - e.y),
            a = e.y + n * (this.x - e.x) + r * (this.y - e.y);
          return this.x = i, this.y = a, this
        },
        _round: function () {
          return this.x = Math.round(this.x), this.y = Math.round(this.y), this
        }
      }, c.convert = function (t) {
        return t instanceof c ? t : Array.isArray(t) ? new c(t[0], t[1]) : t
      };
      var y = f(.25, .1, .25, 1);
  
      function d(t, e, r) {
        return Math.min(r, Math.max(e, t))
      }
  
      function m(t, e, r) {
        var n = r - e,
          i = ((t - e) % n + n) % n + e;
        return i === e ? r : i
      }
  
      function v(t) {
        for (var e = [], r = arguments.length - 1; r-- > 0;) e[r] = arguments[r + 1];
        for (var n = 0, i = e; n < i.length; n += 1) {
          var a = i[n];
          for (var o in a) t[o] = a[o];
        }
        return t
      }
      var g = 1;
  
      function x() {
        return g++
      }
  
      function b() {
        return function t(e) {
          return e ? (e ^ 16 * Math.random() >> e / 4).toString(16) : ([1e7] + -[1e3] + -4e3 + -8e3 + -1e11).replace(/[018]/g, t)
        }()
      }
  
      function w(t) {
        return !!t && /^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)
      }
  
      function A(t, e) {
        t.forEach(function (t) {
          e[t] && (e[t] = e[t].bind(e));
        });
      }
  
      function k(t, e) {
        return -1 !== t.indexOf(e, t.length - e.length)
      }
  
      function S(t, e, r) {
        var n = {};
        for (var i in t) n[i] = e.call(r || this, t[i], i, t);
        return n
      }
  
      function z(t, e, r) {
        var n = {};
        for (var i in t) e.call(r || this, t[i], i, t) && (n[i] = t[i]);
        return n
      }
  
      function I(t) {
        return Array.isArray(t) ? t.map(I) : "object" == typeof t && t ? S(t, I) : t
      }
      var C = {};
  
      function B(t) {
        C[t] || ("undefined" != typeof console && console.warn(t), C[t] = !0);
      }
  
      function P(t, e, r) {
        return (r.y - t.y) * (e.x - t.x) > (e.y - t.y) * (r.x - t.x)
      }
  
      function E(t) {
        for (var e = 0, r = 0, n = t.length, i = n - 1, a = void 0, o = void 0; r < n; i = r++) a = t[r], e += ((o = t[i]).x - a.x) * (a.y + o.y);
        return e
      }
  
      function M(t) {
        var e = {};
        if (t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g, function (t, r, n, i) {
            var a = n || i;
            return e[r] = !a || a.toLowerCase(), ""
          }), e["max-age"]) {
          var r = parseInt(e["max-age"], 10);
          isNaN(r) ? delete e["max-age"] : e["max-age"] = r;
        }
        return e
      }
  
      function T(t) {
        try {
          var e = self[t];
          return e.setItem("_epgis_test_", 1), e.removeItem("_epgis_test_"), !0
        } catch (t) {
          return !1
        }
      }
      var V, F, O = {
          API_URL: "",
          get EVENTS_URL() {},
          FEEDBACK_URL: "https://apps.epgis.com/feedback",
          REQUIRE_ACCESS_TOKEN: !0,
          ACCESS_TOKEN: null,
          MAX_PARALLEL_IMAGE_REQUESTS: 1600,
          PROJECT_TYPE: "EPSG:3857",
          VERSION: "1.4.2.1"
        },
        L = {
          supported: !1,
          testSupport: function (t) {
            if (D || !F) return;
            j ? U(t) : V = t;
          }
        },
        D = !1,
        j = !1;
  
      function U(t) {
        var e = t.createTexture();
        t.bindTexture(t.TEXTURE_2D, e);
        try {
          if (t.texImage2D(t.TEXTURE_2D, 0, t.RGBA, t.RGBA, t.UNSIGNED_BYTE, F), t.isContextLost()) return;
          L.supported = !0;
        } catch (t) {}
        t.deleteTexture(e), D = !0;
      }
      self.document && ((F = self.document.createElement("img")).onload = function () {
        V && U(V), V = null, j = !0;
      }, F.onerror = function () {
        D = !0, V = null;
      }, F.src = "data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");
      var R = "01";
      var q = function (t, e) {
        this._transformRequestFn = t, this._customAccessToken = e, this._createSkuToken();
      };
  
      function N(t) {
        return 0 === t.indexOf("aegis:")
      }
      q.prototype._createSkuToken = function () {
        var t = function () {
          for (var t = "", e = 0; e < 10; e++) t += "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ" [Math.floor(62 * Math.random())];
          return {
            token: ["1", R, t].join(""),
            tokenExpiresAt: Date.now() + 432e5
          }
        }();
        this._skuToken = t.token, this._skuTokenExpiresAt = t.tokenExpiresAt;
      }, q.prototype._isSkuTokenExpired = function () {
        return Date.now() > this._skuTokenExpiresAt
      }, q.prototype.transformRequest = function (t, e) {
        return this._transformRequestFn && this._transformRequestFn(t, e) || {
          url: t
        }
      }, q.prototype.normalizeStyleURL = function (t, e) {
        if (!N(t)) return t;
        var r = Z(t);
        return r.path = "/styles/v1" + r.path, this._makeAPIURL(r, e)
      }, q.prototype.normalizeGlyphsURL = function (t, e) {
        if (!N(t)) return t;
        var r = Z(t);
        return r.path = "/fonts/v1" + r.path, this._makeAPIURL(r, e)
      }, q.prototype.normalizeSourceURL = function (t, e) {
        if (!N(t)) return t;
        var r = Z(t);
        return r.path = "/v1/" + r.authority + ".json", this._makeAPIURL(r, e)
      }, q.prototype.normalizeSpriteURL = function (t, e, r, n) {
        var i = Z(t);
        return N(t) ? (i.path = "/styles/v1" + i.path + "/sprite" + e + r, this._makeAPIURL(i, n)) : (i.path += "" + e + r, X(i))
      }, q.prototype.normalizeTileURL = function (t, e, r) {
        if (!e || !N(e)) return t;
        var n = Z(t),
          i = s.devicePixelRatio >= 2 || 512 === r ? "@2x" : "";
        return n.path = n.path.replace(/(\.(png|jpg)\d*)(?=$)/, i + "$1"), n.path = "" + n.path, n.params.push("access_token=" + O.ACCESS_TOKEN), X(n)
      }, q.prototype.canonicalizeTileURL = function (t) {
        var e = Z(t);
        if (!e.path.match(/(^\/v4\/)/) || !e.path.match(/\.[\w]+$/)) return t;
        var r = "epgis://tiles/";
        r += e.path.replace("/v4/", "");
        var n = e.params.filter(function (t) {
          return !t.match(/^access_token=/)
        });
        return n.length && (r += "?" + n.join("&")), r
      }, q.prototype.canonicalizeTileset = function (t, e) {
        if (!N(e)) return t.tiles || [];
        for (var r = [], n = 0, i = t.tiles; n < i.length; n += 1) {
          var a = i[n],
            o = this.canonicalizeTileURL(a);
          r.push(o);
        }
        return r
      }, q.prototype._makeAPIURL = function (t, e) {
        var r = Z(O.API_URL ? O.API_URL : this._detectPath());
        if (t.protocol = r.protocol, t.authority = r.authority, "/" !== r.path && (t.path = "" + r.path + t.path), !O.REQUIRE_ACCESS_TOKEN) return X(t);
        if (!(e = e || O.ACCESS_TOKEN)) throw new Error("请参考. See https://maps.epgis.com/products/docs/#/guide/quick-quickstart 进行登陆后获取资源");
        return t.params = t.params.filter(function (t) {
          return -1 === t.indexOf("access_token")
        }), t.params.push("access_token=" + e), X(t)
      }, q.prototype._detectPath = function () {
        var t = document.createElement("div");
        t.className = "epgis-other", document.head.appendChild(t);
        var e = this._getStyle(t, "background-image") || this._getStyle(t, "backgroundImage");
        return document.head.removeChild(t), 0 === e.indexOf("url") ? e.replace(/^url\([\"\']?/, "").replace(/sg-icon\.png[\"\']?\)$/, "").split("/").splice(0, 3).join("/") : ""
      }, q.prototype._getStyle = function (t, e) {
        var r = t.style[e] || t.currentStyle && t.currentStyle[e];
        if ((!r || "auto" === r) && document.defaultView) {
          var n = document.defaultView.getComputedStyle(t, null);
          r = n ? n[e] : null;
        }
        return "auto" === r ? null : r
      };
      var K = /^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/;
  
      function Z(t) {
        var e = t.match(K);
        if (!e) throw new Error("Unable to parse URL object");
        return {
          protocol: e[1],
          authority: e[2],
          path: e[3] || "/",
          params: e[4] ? e[4].split("&") : []
        }
      }
  
      function X(t) {
        var e = t.params.length ? "?" + t.params.join("&") : "";
        return t.protocol + "://" + t.authority + t.path + e
      }
  
      function G(t) {
        if (!t) return null;
        var e, r = t.split(".");
        if (!r || 3 !== r.length) return null;
        try {
          return JSON.parse((e = r[1], decodeURIComponent(self.atob(e).split("").map(function (t) {
            return "%" + ("00" + t.charCodeAt(0).toString(16)).slice(-2)
          }).join(""))))
        } catch (t) {
          return null
        }
      }
      var H = function (t) {
        this.type = t, this.anonId = null, this.eventData = {}, this.queue = [], this.pendingRequest = null;
      };
      H.prototype.getStorageKey = function (t) {
        var e, r = G(O.ACCESS_TOKEN),
          n = "";
        return r && r.u ? (e = r.u, n = self.btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g, function (t, e) {
          return String.fromCharCode(Number("0x" + e))
        }))) : n = O.ACCESS_TOKEN || "", t ? "epgis.eventData." + t + ":" + n : "epgis.eventData:" + n
      }, H.prototype.fetchEventData = function () {
        var t = T("localStorage"),
          e = this.getStorageKey(),
          r = this.getStorageKey("uuid");
        if (t) try {
          var n = self.localStorage.getItem(e);
          n && (this.eventData = JSON.parse(n));
          var i = self.localStorage.getItem(r);
          i && (this.anonId = i);
        } catch (t) {
          B("Unable to read from LocalStorage");
        }
      }, H.prototype.saveEventData = function () {
        var t = T("localStorage"),
          e = this.getStorageKey(),
          r = this.getStorageKey("uuid");
        if (t) try {
          self.localStorage.setItem(r, this.anonId), Object.keys(this.eventData).length >= 1 && self.localStorage.setItem(e, JSON.stringify(this.eventData));
        } catch (t) {
          B("Unable to write to LocalStorage");
        }
      }, H.prototype.processRequests = function (t) {}, H.prototype.postEvent = function (t, e, r, n) {}, H.prototype.queueRequest = function (t, e) {
        this.queue.push(t), this.processRequests(e);
      };
      var J, Y = function (t) {
          function e() {
            t.call(this, "map.load"), this.success = {}, this.skuToken = "";
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.postMapLoadEvent = function (t, e, r, n) {
            this.skuToken = r, (O.EVENTS_URL && n || O.ACCESS_TOKEN && Array.isArray(t) && t.some(function (t) {
              return N(t) || !0
            })) && this.queueRequest({
              id: e,
              timestamp: Date.now()
            }, n);
          }, e.prototype.processRequests = function (t) {
            var e = this;
            if (!this.pendingRequest && 0 !== this.queue.length) {
              var r = this.queue.shift(),
                n = r.id,
                i = r.timestamp;
              n && this.success[n] || (this.anonId || this.fetchEventData(), w(this.anonId) || (this.anonId = b()), this.postEvent(i, {
                skuToken: this.skuToken
              }, function (t) {
                t || n && (e.success[n] = !0);
              }, t));
            }
          }, e
        }(H),
        $ = new(function (t) {
          function e(e) {
            t.call(this, "appUserTurnstile"), this._customAccessToken = e;
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.postTurnstileEvent = function (t, e) {
            O.EVENTS_URL && O.ACCESS_TOKEN && Array.isArray(t) && t.some(function (t) {
              return N(t) || !0
            }) && this.queueRequest(Date.now(), e);
          }, e.prototype.processRequests = function (t) {
            var e = this;
            if (!this.pendingRequest && 0 !== this.queue.length) {
              this.anonId && this.eventData.lastSuccess && this.eventData.tokenU || this.fetchEventData();
              var r = G(O.ACCESS_TOKEN),
                n = r ? r.u : O.ACCESS_TOKEN,
                i = n !== this.eventData.tokenU;
              w(this.anonId) || (this.anonId = b(), i = !0);
              var a = this.queue.shift();
              if (this.eventData.lastSuccess) {
                var o = new Date(this.eventData.lastSuccess),
                  s = new Date(a),
                  u = (a - this.eventData.lastSuccess) / 864e5;
                i = i || u >= 1 || u < -1 || o.getDate() !== s.getDate();
              } else i = !0;
              if (!i) return this.processRequests();
              this.postEvent(a, {
                "enabled.telemetry": !1
              }, function (t) {
                t || (e.eventData.lastSuccess = a, e.eventData.tokenU = n);
              }, t);
            }
          }, e
        }(H)),
        W = $.postTurnstileEvent.bind($),
        Q = new Y,
        tt = Q.postMapLoadEvent.bind(Q),
        et = "epgis-tiles",
        rt = 500,
        nt = 50,
        it = 42e4;
  
      function at(t, e, r) {
        if (self.caches) {
          var n = {
            status: e.status,
            statusText: e.statusText,
            headers: new self.Headers
          };
          e.headers.forEach(function (t, e) {
            return n.headers.set(e, t)
          });
          var i = M(e.headers.get("Cache-Control") || "");
          if (!i["no-store"]) i["max-age"] && n.headers.set("Expires", new Date(r + 1e3 * i["max-age"]).toUTCString()), new Date(n.headers.get("Expires")).getTime() - r < it || function (t, e) {
            if (void 0 === J) try {
              new Response(new ReadableStream), J = !0;
            } catch (t) {
              J = !1;
            }
            J ? e(t.body) : t.blob().then(e);
          }(e, function (e) {
            var r = new self.Response(e, n);
            self.caches.open(et).then(function (e) {
              return e.put(ot(t.url), r)
            });
          });
        }
      }
  
      function ot(t) {
        var e = t.indexOf("?");
        return e < 0 ? t : t.slice(0, e)
      }
  
      function st(t, e) {
        if (!self.caches) return e(null);
        var r = ot(t.url);
        self.caches.open(et).catch(e).then(function (t) {
          t.match(r).catch(e).then(function (n) {
            var i = function (t) {
              if (!t) return !1;
              var e = new Date(t.headers.get("Expires")),
                r = M(t.headers.get("Cache-Control") || "");
              return e > Date.now() && !r["no-cache"]
            }(n);
            t.delete(r), i && t.put(r, n.clone()), e(null, n, i);
          });
        });
      }
      var ut = 1 / 0;
      var lt = Object.prototype.hasOwnProperty,
        pt = Array.isArray,
        ct = function () {
          for (var t = [], e = 0; e < 256; ++e) t.push("%" + ((e < 16 ? "0" : "") + e.toString(16)).toUpperCase());
          return t
        }(),
        ht = function (t, e) {
          for (var r = e && e.plainObjects ? Object.create(null) : {}, n = 0; n < t.length; ++n) void 0 !== t[n] && (r[n] = t[n]);
          return r
        },
        ft = {
          arrayToObject: ht,
          assign: function (t, e) {
            return Object.keys(e).reduce(function (t, r) {
              return t[r] = e[r], t
            }, t)
          },
          combine: function (t, e) {
            return [].concat(t, e)
          },
          compact: function (t) {
            for (var e = [{
                obj: {
                  o: t
                },
                prop: "o"
              }], r = [], n = 0; n < e.length; ++n)
              for (var i = e[n], a = i.obj[i.prop], o = Object.keys(a), s = 0; s < o.length; ++s) {
                var u = o[s],
                  l = a[u];
                "object" == typeof l && null !== l && -1 === r.indexOf(l) && (e.push({
                  obj: a,
                  prop: u
                }), r.push(l));
              }
            return function (t) {
              for (; t.length > 1;) {
                var e = t.pop(),
                  r = e.obj[e.prop];
                if (pt(r)) {
                  for (var n = [], i = 0; i < r.length; ++i) void 0 !== r[i] && n.push(r[i]);
                  e.obj[e.prop] = n;
                }
              }
            }(e), t
          },
          decode: function (t, e, r) {
            var n = t.replace(/\+/g, " ");
            if ("iso-8859-1" === r) return n.replace(/%[0-9a-f]{2}/gi, unescape);
            try {
              return decodeURIComponent(n)
            } catch (t) {
              return n
            }
          },
          encode: function (t, e, r) {
            if (0 === t.length) return t;
            var n = t;
            if ("symbol" == typeof t ? n = Symbol.prototype.toString.call(t) : "string" != typeof t && (n = String(t)), "iso-8859-1" === r) return escape(n).replace(/%u[0-9a-f]{4}/gi, function (t) {
              return "%26%23" + parseInt(t.slice(2), 16) + "%3B"
            });
            for (var i = "", a = 0; a < n.length; ++a) {
              var o = n.charCodeAt(a);
              45 === o || 46 === o || 95 === o || 126 === o || o >= 48 && o <= 57 || o >= 65 && o <= 90 || o >= 97 && o <= 122 ? i += n.charAt(a) : o < 128 ? i += ct[o] : o < 2048 ? i += ct[192 | o >> 6] + ct[128 | 63 & o] : o < 55296 || o >= 57344 ? i += ct[224 | o >> 12] + ct[128 | o >> 6 & 63] + ct[128 | 63 & o] : (a += 1, o = 65536 + ((1023 & o) << 10 | 1023 & n.charCodeAt(a)), i += ct[240 | o >> 18] + ct[128 | o >> 12 & 63] + ct[128 | o >> 6 & 63] + ct[128 | 63 & o]);
            }
            return i
          },
          isBuffer: function (t) {
            return !(!t || "object" != typeof t) && !!(t.constructor && t.constructor.isBuffer && t.constructor.isBuffer(t))
          },
          isRegExp: function (t) {
            return "[object RegExp]" === Object.prototype.toString.call(t)
          },
          merge: function t(e, r, n) {
            if (!r) return e;
            if ("object" != typeof r) {
              if (pt(e)) e.push(r);
              else {
                if (!e || "object" != typeof e) return [e, r];
                (n && (n.plainObjects || n.allowPrototypes) || !lt.call(Object.prototype, r)) && (e[r] = !0);
              }
              return e
            }
            if (!e || "object" != typeof e) return [e].concat(r);
            var i = e;
            return pt(e) && !pt(r) && (i = ht(e, n)), pt(e) && pt(r) ? (r.forEach(function (r, i) {
              if (lt.call(e, i)) {
                var a = e[i];
                a && "object" == typeof a && r && "object" == typeof r ? e[i] = t(a, r, n) : e.push(r);
              } else e[i] = r;
            }), e) : Object.keys(r).reduce(function (e, i) {
              var a = r[i];
              return lt.call(e, i) ? e[i] = t(e[i], a, n) : e[i] = a, e
            }, i)
          }
        },
        yt = String.prototype.replace,
        dt = /%20/g,
        mt = {
          RFC1738: "RFC1738",
          RFC3986: "RFC3986"
        },
        vt = ft.assign({
          default: mt.RFC3986,
          formatters: {
            RFC1738: function (t) {
              return yt.call(t, dt, "+")
            },
            RFC3986: function (t) {
              return String(t)
            }
          }
        }, mt),
        gt = (Object.prototype.hasOwnProperty, Array.isArray, Array.prototype.push, Date.prototype.toISOString),
        xt = vt.default,
        bt = (vt.formatters[xt], Object.prototype.hasOwnProperty),
        _t = Array.isArray,
        wt = {
          allowDots: !1,
          allowPrototypes: !1,
          arrayLimit: 20,
          charset: "utf-8",
          charsetSentinel: !1,
          comma: !1,
          decoder: ft.decode,
          delimiter: "&",
          depth: 5,
          ignoreQueryPrefix: !1,
          interpretNumericEntities: !1,
          parameterLimit: 1e3,
          parseArrays: !0,
          plainObjects: !1,
          strictNullHandling: !1
        },
        At = function (t) {
          return t.replace(/&#(\d+);/g, function (t, e) {
            return String.fromCharCode(parseInt(e, 10))
          })
        },
        kt = function (t, e, r) {
          if (t) {
            var n = r.allowDots ? t.replace(/\.([^.[]+)/g, "[$1]") : t,
              i = /(\[[^[\]]*])/g,
              a = r.depth > 0 && /(\[[^[\]]*])/.exec(n),
              o = a ? n.slice(0, a.index) : n,
              s = [];
            if (o) {
              if (!r.plainObjects && bt.call(Object.prototype, o) && !r.allowPrototypes) return;
              s.push(o);
            }
            for (var u = 0; r.depth > 0 && null !== (a = i.exec(n)) && u < r.depth;) {
              if (u += 1, !r.plainObjects && bt.call(Object.prototype, a[1].slice(1, -1)) && !r.allowPrototypes) return;
              s.push(a[1]);
            }
            return a && s.push("[" + n.slice(a.index) + "]"),
              function (t, e, r) {
                for (var n = e, i = t.length - 1; i >= 0; --i) {
                  var a, o = t[i];
                  if ("[]" === o && r.parseArrays) a = [].concat(n);
                  else {
                    a = r.plainObjects ? Object.create(null) : {};
                    var s = "[" === o.charAt(0) && "]" === o.charAt(o.length - 1) ? o.slice(1, -1) : o,
                      u = parseInt(s, 10);
                    r.parseArrays || "" !== s ? !isNaN(u) && o !== s && String(u) === s && u >= 0 && r.parseArrays && u <= r.arrayLimit ? (a = [])[u] = n : a[s] = n : a = {
                      0: n
                    };
                  }
                  n = a;
                }
                return n
              }(s, e, r)
          }
        },
        St = function (t, e) {
          var r = function (t) {
            if (!t) return wt;
            if (null !== t.decoder && void 0 !== t.decoder && "function" != typeof t.decoder) throw new TypeError("Decoder has to be a function.");
            if (void 0 !== t.charset && "utf-8" !== t.charset && "iso-8859-1" !== t.charset) throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");
            var e = void 0 === t.charset ? wt.charset : t.charset;
            return {
              allowDots: void 0 === t.allowDots ? wt.allowDots : !!t.allowDots,
              allowPrototypes: "boolean" == typeof t.allowPrototypes ? t.allowPrototypes : wt.allowPrototypes,
              arrayLimit: "number" == typeof t.arrayLimit ? t.arrayLimit : wt.arrayLimit,
              charset: e,
              charsetSentinel: "boolean" == typeof t.charsetSentinel ? t.charsetSentinel : wt.charsetSentinel,
              comma: "boolean" == typeof t.comma ? t.comma : wt.comma,
              decoder: "function" == typeof t.decoder ? t.decoder : wt.decoder,
              delimiter: "string" == typeof t.delimiter || ft.isRegExp(t.delimiter) ? t.delimiter : wt.delimiter,
              depth: "number" == typeof t.depth || !1 === t.depth ? +t.depth : wt.depth,
              ignoreQueryPrefix: !0 === t.ignoreQueryPrefix,
              interpretNumericEntities: "boolean" == typeof t.interpretNumericEntities ? t.interpretNumericEntities : wt.interpretNumericEntities,
              parameterLimit: "number" == typeof t.parameterLimit ? t.parameterLimit : wt.parameterLimit,
              parseArrays: !1 !== t.parseArrays,
              plainObjects: "boolean" == typeof t.plainObjects ? t.plainObjects : wt.plainObjects,
              strictNullHandling: "boolean" == typeof t.strictNullHandling ? t.strictNullHandling : wt.strictNullHandling
            }
          }(e);
          if ("" === t || null == t) return r.plainObjects ? Object.create(null) : {};
          for (var n = "string" == typeof t ? function (t, e) {
              var r, n = {},
                i = e.ignoreQueryPrefix ? t.replace(/^\?/, "") : t,
                a = e.parameterLimit === 1 / 0 ? void 0 : e.parameterLimit,
                o = i.split(e.delimiter, a),
                s = -1,
                u = e.charset;
              if (e.charsetSentinel)
                for (r = 0; r < o.length; ++r) 0 === o[r].indexOf("utf8=") && ("utf8=%E2%9C%93" === o[r] ? u = "utf-8" : "utf8=%26%2310003%3B" === o[r] && (u = "iso-8859-1"), s = r, r = o.length);
              for (r = 0; r < o.length; ++r)
                if (r !== s) {
                  var l, p, c = o[r],
                    h = c.indexOf("]="),
                    f = -1 === h ? c.indexOf("=") : h + 1; - 1 === f ? (l = e.decoder(c, wt.decoder, u, "key"), p = e.strictNullHandling ? null : "") : (l = e.decoder(c.slice(0, f), wt.decoder, u, "key"), p = e.decoder(c.slice(f + 1), wt.decoder, u, "value")), p && e.interpretNumericEntities && "iso-8859-1" === u && (p = At(p)), p && "string" == typeof p && e.comma && p.indexOf(",") > -1 && (p = p.split(",")), c.indexOf("[]=") > -1 && (p = _t(p) ? [p] : p), bt.call(n, l) ? n[l] = ft.combine(n[l], p) : n[l] = p;
                } return n
            }(t, r) : t, i = r.plainObjects ? Object.create(null) : {}, a = Object.keys(n), o = 0; o < a.length; ++o) {
            var s = a[o],
              u = kt(s, n[s], r);
            i = ft.merge(i, u, r);
          }
          return ft.compact(i)
        },
        zt = function (t) {
          var e = t.url,
            r = t.params;
          if (!r || 0 === Object.keys(r).length) return e;
          var n = -1 !== e.indexOf("?");
          return e + (n ? "&" : "?") + function (t) {
            return Object.entries(t).map(function (t) {
              return t[0] + "=" + t[1]
            }).join("&")
          }(r)
        },
        It = {
          Unknown: "Unknown",
          Style: "Style",
          Source: "Source",
          Tile: "Tile",
          Glyphs: "Glyphs",
          SpriteImage: "SpriteImage",
          SpriteJSON: "SpriteJSON",
          Image: "Image"
        };
      "function" == typeof Object.freeze && Object.freeze(It);
      var Ct = function (t) {
        function e(e, r, n) {
          401 === r && (e += ": you may have provided an invalid epgis access token. "), t.call(this, e), this.status = r, this.url = n, this.name = this.constructor.name, this.message = e;
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.toString = function () {
          return this.name + ": " + this.message + " (" + this.status + "): " + this.url
        }, e
      }(Error);
  
      function Bt() {
        return "undefined" != typeof WorkerGlobalScope && "undefined" != typeof self && self instanceof WorkerGlobalScope
      }
      var Pt = Bt() ? function () {
        return self.worker && self.worker.referrer
      } : function () {
        return ("blob:" === self.location.protocol ? self.parent : self).location.href
      };
      var Et = function (t, e) {
          var r, n = function (t) {
              var e = {};
              if (-1 !== t.indexOf("?")) {
                var r = t.split("?");
                e.url = r[0], e.params = St(r[1]);
              } else e.url = t, e.params = {};
              return e
            }(t.url),
            i = n.params.access_token;
          if (i && (delete n.params.access_token, t.headers || (t.headers = {}), t.headers.Authorization = i), t.url = zt(n), r = t.url, !(/^file:/.test(r) || /^file:/.test(Pt()) && !/^\w+:/.test(r))) {
            if (self.fetch && self.Request && self.AbortController && self.Request.prototype.hasOwnProperty("signal")) return function (t, e) {
              var r = new self.AbortController,
                n = new self.Request(t.url, {
                  method: t.method || "GET",
                  body: t.body,
                  credentials: t.credentials,
                  headers: t.headers,
                  referrer: Pt(),
                  signal: r.signal
                }),
                i = !1,
                a = !1,
                o = n.url.indexOf("sku=") > 0 && !0;
              "json" === t.type && n.headers.set("Accept", "application/json");
              var s = function (r, i, s) {
                  if (!a) {
                    if (r && "SecurityError" !== r.message && B(r), i && s) return u(i);
                    var l = Date.now();
                    self.fetch(n).then(function (r) {
                      if (r.ok) {
                        var n = o ? r.clone() : null;
                        return u(r, n, l)
                      }
                      return e(new Ct(r.statusText, r.status, t.url))
                    }).catch(function (t) {
                      20 !== t.code && e(new Error(t.message));
                    });
                  }
                },
                u = function (r, o, s) {
                  ("arrayBuffer" === t.type ? r.arrayBuffer() : "json" === t.type ? r.json() : r.text()).then(function (t) {
                    a || (o && s && at(n, o, s), i = !0, e(null, t, r.headers.get("Cache-Control"), r.headers.get("Expires")));
                  }).catch(function (t) {
                    return e(new Error(t.message))
                  });
                };
              return o ? st(n, s) : s(null, null), {
                cancel: function () {
                  a = !0, i || r.abort();
                }
              }
            }(t, e);
            if (Bt() && self.worker && self.worker.actor) return self.worker.actor.send("getResource", t, e)
          }
          return function (t, e) {
            var r = new self.XMLHttpRequest;
            for (var n in r.open(t.method || "GET", t.url, !0), "arrayBuffer" === t.type && (r.responseType = "arraybuffer"), t.headers) r.setRequestHeader(n, t.headers[n]);
            return "json" === t.type && (r.responseType = "text", r.setRequestHeader("Accept", "application/json")), r.withCredentials = "include" === t.credentials, r.onerror = function () {
              e(new Error(r.statusText));
            }, r.onload = function () {
              if ((r.status >= 200 && r.status < 300 || 0 === r.status) && null !== r.response) {
                var n = r.response;
                if ("json" === t.type) try {
                  n = JSON.parse(r.response);
                } catch (t) {
                  return e(t)
                }
                e(null, n, r.getResponseHeader("Cache-Control"), r.getResponseHeader("Expires"));
              } else e(new Ct(r.statusText, r.status, t.url));
            }, r.send(t.body), {
              cancel: function () {
                return r.abort()
              }
            }
          }(t, e)
        },
        Mt = function (t, e) {
          var r = t.tilesecurity,
            n = t.zxy;
          return delete t.zxy, delete t.tilesecurity, Et(v(t, {
            type: "arrayBuffer"
          }), function (t, i, a, o) {
            !t && i && r && (i = function (t, e) {
              var r, n, i, a = t.z % 8,
                o = t.x % 8,
                s = t.y % 8,
                u = e,
                l = u.byteLength - a - o - s,
                p = Math.floor(l / 3),
                c = Math.floor(l / 3),
                h = l - p - c;
              s <= o && o <= a && s <= a ? (i = new Uint8Array(u.slice(s, h + s)), n = new Uint8Array(u.slice(h + o + s, h + c + o + s)), r = new Uint8Array(u.slice(h + c + o + s + a, l + a + o + s))) : s <= o && a <= o && s <= a ? (i = new Uint8Array(u.slice(s, h + s)), r = new Uint8Array(u.slice(h + a + s, h + p + a + s)), n = new Uint8Array(u.slice(h + p + a + s + o, l + a + o + s))) : o <= s && s <= a && o <= a ? (n = new Uint8Array(u.slice(o, c + o)), i = new Uint8Array(u.slice(c + o + s, h + c + o + s)), r = new Uint8Array(u.slice(h + c + a + s + o, l + a + o + s))) : o <= a && a <= s && o <= s ? (n = new Uint8Array(u.slice(o, c + o)), r = new Uint8Array(u.slice(c + o + a, c + p + o + a)), i = new Uint8Array(u.slice(c + p + a + s + o, l + a + o + s))) : a <= s && s <= o && a <= o ? (r = new Uint8Array(u.slice(a, p + a)), i = new Uint8Array(u.slice(p + a + s, h + p + a + s)), n = new Uint8Array(u.slice(h + p + a + s + o, l + a + o + s))) : a <= o && o <= s && a <= s && (r = new Uint8Array(u.slice(a, p + a)), n = new Uint8Array(u.slice(p + a + o, p + c + a + o)), i = new Uint8Array(u.slice(p + c + a + s + o, l + a + o + s)));
              var f = new Uint8Array(l);
              return f.set(r, 0), f.set(n, p), f.set(i, c + p), [].slice.call(f)
            }(n, i)), e(t, i, a, o);
          })
        };
      var Tt, Vt;
      Tt = [], Vt = 0;
      var Ft = function (t, e) {
        if (Vt >= O.MAX_PARALLEL_IMAGE_REQUESTS) {
          var r = {
            requestParameters: t,
            callback: e,
            cancelled: !1,
            cancel: function () {
              this.cancelled = !0;
            }
          };
          return Tt.push(r), r
        }
        Vt++;
        var n = !1,
          i = function () {
            if (!n)
              for (n = !0, Vt--; Tt.length && Vt < O.MAX_PARALLEL_IMAGE_REQUESTS;) {
                var t = Tt.shift(),
                  e = t.requestParameters,
                  r = t.callback;
                t.cancelled || (t.cancel = Ft(e, r).cancel);
              }
          },
          a = Mt(t, function (t, r, n, a) {
            if (i(), t) e(t);
            else if (r) {
              var o = new self.Image,
                s = self.URL || self.webkitURL;
              o.onload = function () {
                e(null, o), s.revokeObjectURL(o.src);
              }, o.onerror = function () {
                return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))
              };
              var u = new self.Blob([new Uint8Array(r)], {
                type: "image/png"
              });
              o.cacheControl = n, o.expires = a, o.src = u.size ? s.createObjectURL(u) : "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";
            }
          });
        return {
          cancel: function () {
            a.cancel(), i();
          }
        }
      };
  
      function Ot(t, e, r) {
        r[t] && -1 !== r[t].indexOf(e) || (r[t] = r[t] || [], r[t].push(e));
      }
  
      function Lt(t, e, r) {
        if (r && r[t]) {
          var n = r[t].indexOf(e); - 1 !== n && r[t].splice(n, 1);
        }
      }
      var Dt = function (t, e) {
          void 0 === e && (e = {}), v(this, e), this.type = t;
        },
        jt = function (t) {
          function e(e, r) {
            void 0 === r && (r = {}), t.call(this, "error", v({
              error: e
            }, r));
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e
        }(Dt),
        Ut = function () {};
      Ut.prototype.on = function (t, e) {
        return this._listeners = this._listeners || {}, Ot(t, e, this._listeners), this
      }, Ut.prototype.off = function (t, e) {
        return Lt(t, e, this._listeners), Lt(t, e, this._oneTimeListeners), this
      }, Ut.prototype.once = function (t, e) {
        return this._oneTimeListeners = this._oneTimeListeners || {}, Ot(t, e, this._oneTimeListeners), this
      }, Ut.prototype.fire = function (t, e) {
        "string" == typeof t && (t = new Dt(t, e || {}));
        var r = t.type;
        if (this.listens(r)) {
          t.target = this;
          for (var n = 0, i = this._listeners && this._listeners[r] ? this._listeners[r].slice() : []; n < i.length; n += 1) {
            i[n].call(this, t);
          }
          for (var a = 0, o = this._oneTimeListeners && this._oneTimeListeners[r] ? this._oneTimeListeners[r].slice() : []; a < o.length; a += 1) {
            var s = o[a];
            Lt(r, s, this._oneTimeListeners), s.call(this, t);
          }
          var u = this._eventedParent;
          u && (v(t, "function" == typeof this._eventedParentData ? this._eventedParentData() : this._eventedParentData), u.fire(t));
        } else t instanceof jt && console.error(t.error);
        return this
      }, Ut.prototype.listens = function (t) {
        return this._listeners && this._listeners[t] && this._listeners[t].length > 0 || this._oneTimeListeners && this._oneTimeListeners[t] && this._oneTimeListeners[t].length > 0 || this._eventedParent && this._eventedParent.listens(t)
      }, Ut.prototype.setEventedParent = function (t, e) {
        return this._eventedParent = t, this._eventedParentData = e, this
      };
      var Rt = {
          $version: 8,
          $root: {
            version: {
              required: !0,
              type: "enum",
              values: [8]
            },
            name: {
              type: "string"
            },
            metadata: {
              type: "*"
            },
            center: {
              type: "array",
              value: "number"
            },
            zoom: {
              type: "number"
            },
            bearing: {
              type: "number",
              default: 0,
              period: 360,
              units: "degrees"
            },
            pitch: {
              type: "number",
              default: 0,
              units: "degrees"
            },
            light: {
              type: "light"
            },
            sources: {
              required: !0,
              type: "sources"
            },
            sprite: {
              type: "string"
            },
            glyphs: {
              type: "string"
            },
            transition: {
              type: "transition"
            },
            layers: {
              required: !0,
              type: "array",
              value: "layer"
            }
          },
          sources: {
            "*": {
              type: "source"
            }
          },
          source: ["source_vector", "source_raster", "source_raster_dem", "source_geojson", "source_video", "source_image"],
          source_vector: {
            type: {
              required: !0,
              type: "enum",
              values: {
                vector: {}
              }
            },
            url: {
              type: "string"
            },
            tiles: {
              type: "array",
              value: "string"
            },
            bounds: {
              type: "array",
              value: "number",
              length: 4,
              default: [-180, -85.051129, 180, 85.051129]
            },
            scheme: {
              type: "enum",
              values: {
                xyz: {},
                tms: {}
              },
              default: "xyz"
            },
            minzoom: {
              type: "number",
              default: 0
            },
            maxzoom: {
              type: "number",
              default: 22
            },
            attribution: {
              type: "string"
            },
            "*": {
              type: "*"
            }
          },
          source_raster: {
            type: {
              required: !0,
              type: "enum",
              values: {
                raster: {}
              }
            },
            url: {
              type: "string"
            },
            tiles: {
              type: "array",
              value: "string"
            },
            bounds: {
              type: "array",
              value: "number",
              length: 4,
              default: [-180, -85.051129, 180, 85.051129]
            },
            minzoom: {
              type: "number",
              default: 0
            },
            maxzoom: {
              type: "number",
              default: 22
            },
            tileSize: {
              type: "number",
              default: 512,
              units: "pixels"
            },
            scheme: {
              type: "enum",
              values: {
                xyz: {},
                tms: {}
              },
              default: "xyz"
            },
            attribution: {
              type: "string"
            },
            "*": {
              type: "*"
            }
          },
          source_raster_dem: {
            type: {
              required: !0,
              type: "enum",
              values: {
                "raster-dem": {}
              }
            },
            url: {
              type: "string"
            },
            tiles: {
              type: "array",
              value: "string"
            },
            bounds: {
              type: "array",
              value: "number",
              length: 4,
              default: [-180, -85.051129, 180, 85.051129]
            },
            minzoom: {
              type: "number",
              default: 0
            },
            maxzoom: {
              type: "number",
              default: 22
            },
            tileSize: {
              type: "number",
              default: 512,
              units: "pixels"
            },
            attribution: {
              type: "string"
            },
            encoding: {
              type: "enum",
              values: {
                terrarium: {},
                epgis: {}
              },
              default: "epgis"
            },
            "*": {
              type: "*"
            }
          },
          source_geojson: {
            type: {
              required: !0,
              type: "enum",
              values: {
                geojson: {}
              }
            },
            data: {
              type: "*"
            },
            maxzoom: {
              type: "number",
              default: 18
            },
            attribution: {
              type: "string"
            },
            buffer: {
              type: "number",
              default: 128,
              maximum: 512,
              minimum: 0
            },
            tolerance: {
              type: "number",
              default: .375
            },
            cluster: {
              type: "boolean",
              default: !1
            },
            clusterRadius: {
              type: "number",
              default: 50,
              minimum: 0
            },
            clusterMaxZoom: {
              type: "number"
            },
            clusterProperties: {
              type: "*"
            },
            lineMetrics: {
              type: "boolean",
              default: !1
            },
            generateId: {
              type: "boolean",
              default: !1
            }
          },
          source_video: {
            type: {
              required: !0,
              type: "enum",
              values: {
                video: {}
              }
            },
            urls: {
              required: !0,
              type: "array",
              value: "string"
            },
            coordinates: {
              required: !0,
              type: "array",
              length: 4,
              value: {
                type: "array",
                length: 2,
                value: "number"
              }
            }
          },
          source_image: {
            type: {
              required: !0,
              type: "enum",
              values: {
                image: {}
              }
            },
            url: {
              required: !0,
              type: "string"
            },
            coordinates: {
              required: !0,
              type: "array",
              length: 4,
              value: {
                type: "array",
                length: 2,
                value: "number"
              }
            }
          },
          layer: {
            id: {
              type: "string",
              required: !0
            },
            type: {
              type: "enum",
              values: {
                fill: {},
                line: {},
                symbol: {},
                circle: {},
                heatmap: {},
                "fill-extrusion": {},
                raster: {},
                hillshade: {},
                background: {}
              },
              required: !0
            },
            metadata: {
              type: "*"
            },
            source: {
              type: "string"
            },
            "source-layer": {
              type: "string"
            },
            minzoom: {
              type: "number",
              minimum: 0,
              maximum: 24
            },
            maxzoom: {
              type: "number",
              minimum: 0,
              maximum: 24
            },
            filter: {
              type: "filter"
            },
            layout: {
              type: "layout"
            },
            paint: {
              type: "paint"
            }
          },
          layout: ["layout_fill", "layout_line", "layout_circle", "layout_heatmap", "layout_fill-extrusion", "layout_symbol", "layout_raster", "layout_hillshade", "layout_background"],
          layout_background: {
            visibility: {
              type: "enum",
              values: {
                visible: {},
                none: {}
              },
              default: "visible",
              "property-type": "constant"
            }
          },
          layout_fill: {
            "fill-sort-key": {
              type: "number",
              expression: {
                interpolated: !1,
                parameters: ["zoom", "feature"]
              },
              "property-type": "data-driven"
            },
            visibility: {
              type: "enum",
              values: {
                visible: {},
                none: {}
              },
              default: "visible",
              "property-type": "constant"
            }
          },
          layout_circle: {
            "circle-sort-key": {
              type: "number",
              expression: {
                interpolated: !1,
                parameters: ["zoom", "feature"]
              },
              "property-type": "data-driven"
            },
            visibility: {
              type: "enum",
              values: {
                visible: {},
                none: {}
              },
              default: "visible",
              "property-type": "constant"
            }
          },
          layout_heatmap: {
            visibility: {
              type: "enum",
              values: {
                visible: {},
                none: {}
              },
              default: "visible",
              "property-type": "constant"
            }
          },
          "layout_fill-extrusion": {
            visibility: {
              type: "enum",
              values: {
                visible: {},
                none: {}
              },
              default: "visible",
              "property-type": "constant"
            }
          },
          layout_line: {
            "line-cap": {
              type: "enum",
              values: {
                butt: {},
                round: {},
                square: {}
              },
              default: "butt",
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "line-join": {
              type: "enum",
              values: {
                bevel: {},
                round: {},
                miter: {}
              },
              default: "miter",
              expression: {
                interpolated: !1,
                parameters: ["zoom", "feature"]
              },
              "property-type": "data-driven"
            },
            "line-miter-limit": {
              type: "number",
              default: 2,
              requires: [{
                "line-join": "miter"
              }],
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "line-round-limit": {
              type: "number",
              default: 1.05,
              requires: [{
                "line-join": "round"
              }],
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "line-sort-key": {
              type: "number",
              expression: {
                interpolated: !1,
                parameters: ["zoom", "feature"]
              },
              "property-type": "data-driven"
            },
            visibility: {
              type: "enum",
              values: {
                visible: {},
                none: {}
              },
              default: "visible",
              "property-type": "constant"
            }
          },
          layout_symbol: {
            "symbol-placement": {
              type: "enum",
              values: {
                point: {},
                line: {},
                "line-center": {}
              },
              default: "point",
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "symbol-spacing": {
              type: "number",
              default: 250,
              minimum: 1,
              units: "pixels",
              requires: [{
                "symbol-placement": "line"
              }],
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "symbol-avoid-edges": {
              type: "boolean",
              default: !1,
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "symbol-sort-key": {
              type: "number",
              expression: {
                interpolated: !1,
                parameters: ["zoom", "feature"]
              },
              "property-type": "data-driven"
            },
            "symbol-z-order": {
              type: "enum",
              values: {
                auto: {},
                "viewport-y": {},
                source: {}
              },
              default: "auto",
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "icon-allow-overlap": {
              type: "boolean",
              default: !1,
              requires: ["icon-image"],
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "icon-ignore-placement": {
              type: "boolean",
              default: !1,
              requires: ["icon-image"],
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "icon-optional": {
              type: "boolean",
              default: !1,
              requires: ["icon-image", "text-field"],
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "icon-rotation-alignment": {
              type: "enum",
              values: {
                map: {},
                viewport: {},
                auto: {}
              },
              default: "auto",
              requires: ["icon-image"],
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "icon-size": {
              type: "number",
              default: 1,
              minimum: 0,
              units: "factor of the original icon size",
              requires: ["icon-image"],
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature"]
              },
              "property-type": "data-driven"
            },
            "icon-text-fit": {
              type: "enum",
              values: {
                none: {},
                width: {},
                height: {},
                both: {}
              },
              default: "none",
              requires: ["icon-image", "text-field"],
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "icon-text-fit-padding": {
              type: "array",
              value: "number",
              length: 4,
              default: [0, 0, 0, 0],
              units: "pixels",
              requires: ["icon-image", "text-field", {
                "icon-text-fit": ["both", "width", "height"]
              }],
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "icon-image": {
              type: "string",
              tokens: !0,
              expression: {
                interpolated: !1,
                parameters: ["zoom", "feature"]
              },
              "property-type": "data-driven"
            },
            "icon-rotate": {
              type: "number",
              default: 0,
              period: 360,
              units: "degrees",
              requires: ["icon-image"],
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature"]
              },
              "property-type": "data-driven"
            },
            "icon-padding": {
              type: "number",
              default: 2,
              minimum: 0,
              units: "pixels",
              requires: ["icon-image"],
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "icon-keep-upright": {
              type: "boolean",
              default: !1,
              requires: ["icon-image", {
                "icon-rotation-alignment": "map"
              }, {
                "symbol-placement": ["line", "line-center"]
              }],
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "icon-offset": {
              type: "array",
              value: "number",
              length: 2,
              default: [0, 0],
              requires: ["icon-image"],
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature"]
              },
              "property-type": "data-driven"
            },
            "icon-anchor": {
              type: "enum",
              values: {
                center: {},
                left: {},
                right: {},
                top: {},
                bottom: {},
                "top-left": {},
                "top-right": {},
                "bottom-left": {},
                "bottom-right": {}
              },
              default: "center",
              requires: ["icon-image"],
              expression: {
                interpolated: !1,
                parameters: ["zoom", "feature"]
              },
              "property-type": "data-driven"
            },
            "icon-pitch-alignment": {
              type: "enum",
              values: {
                map: {},
                viewport: {},
                auto: {}
              },
              default: "auto",
              requires: ["icon-image"],
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "text-pitch-alignment": {
              type: "enum",
              values: {
                map: {},
                viewport: {},
                auto: {}
              },
              default: "auto",
              requires: ["text-field"],
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "text-rotation-alignment": {
              type: "enum",
              values: {
                map: {},
                viewport: {},
                auto: {}
              },
              default: "auto",
              requires: ["text-field"],
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "text-field": {
              type: "formatted",
              default: "",
              tokens: !0,
              expression: {
                interpolated: !1,
                parameters: ["zoom", "feature"]
              },
              "property-type": "data-driven"
            },
            "text-font": {
              type: "array",
              value: "string",
              default: ["Open Sans Regular", "Arial Unicode MS Regular"],
              requires: ["text-field"],
              expression: {
                interpolated: !1,
                parameters: ["zoom", "feature"]
              },
              "property-type": "data-driven"
            },
            "text-size": {
              type: "number",
              default: 16,
              minimum: 0,
              units: "pixels",
              requires: ["text-field"],
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature"]
              },
              "property-type": "data-driven"
            },
            "text-max-width": {
              type: "number",
              default: 10,
              minimum: 0,
              units: "ems",
              requires: ["text-field"],
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature"]
              },
              "property-type": "data-driven"
            },
            "text-line-height": {
              type: "number",
              default: 1.2,
              units: "ems",
              requires: ["text-field"],
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "text-letter-spacing": {
              type: "number",
              default: 0,
              units: "ems",
              requires: ["text-field"],
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature"]
              },
              "property-type": "data-driven"
            },
            "text-justify": {
              type: "enum",
              values: {
                auto: {},
                left: {},
                center: {},
                right: {}
              },
              default: "center",
              requires: ["text-field"],
              expression: {
                interpolated: !1,
                parameters: ["zoom", "feature"]
              },
              "property-type": "data-driven"
            },
            "text-radial-offset": {
              type: "number",
              units: "ems",
              default: 0,
              requires: ["text-field"],
              "property-type": "data-driven",
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature"]
              }
            },
            "text-variable-anchor": {
              type: "array",
              value: "enum",
              values: {
                center: {},
                left: {},
                right: {},
                top: {},
                bottom: {},
                "top-left": {},
                "top-right": {},
                "bottom-left": {},
                "bottom-right": {}
              },
              requires: ["text-field", {
                "symbol-placement": ["point"]
              }],
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "text-anchor": {
              type: "enum",
              values: {
                center: {},
                left: {},
                right: {},
                top: {},
                bottom: {},
                "top-left": {},
                "top-right": {},
                "bottom-left": {},
                "bottom-right": {}
              },
              default: "center",
              requires: ["text-field", {
                "!": "text-variable-anchor"
              }],
              expression: {
                interpolated: !1,
                parameters: ["zoom", "feature"]
              },
              "property-type": "data-driven"
            },
            "text-max-angle": {
              type: "number",
              default: 45,
              units: "degrees",
              requires: ["text-field", {
                "symbol-placement": ["line", "line-center"]
              }],
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "text-writing-mode": {
              type: "array",
              value: "enum",
              values: {
                horizontal: {},
                vertical: {}
              },
              requires: ["text-field", {
                "symbol-placement": ["point"]
              }],
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "text-rotate": {
              type: "number",
              default: 0,
              period: 360,
              units: "degrees",
              requires: ["text-field"],
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature"]
              },
              "property-type": "data-driven"
            },
            "text-padding": {
              type: "number",
              default: 2,
              minimum: 0,
              units: "pixels",
              requires: ["text-field"],
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "text-keep-upright": {
              type: "boolean",
              default: !0,
              requires: ["text-field", {
                "text-rotation-alignment": "map"
              }, {
                "symbol-placement": ["line", "line-center"]
              }],
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "text-transform": {
              type: "enum",
              values: {
                none: {},
                uppercase: {},
                lowercase: {}
              },
              default: "none",
              requires: ["text-field"],
              expression: {
                interpolated: !1,
                parameters: ["zoom", "feature"]
              },
              "property-type": "data-driven"
            },
            "text-offset": {
              type: "array",
              value: "number",
              units: "ems",
              length: 2,
              default: [0, 0],
              requires: ["text-field", {
                "!": "text-radial-offset"
              }, {
                "!": "text-variable-anchor"
              }],
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature"]
              },
              "property-type": "data-driven"
            },
            "text-allow-overlap": {
              type: "boolean",
              default: !1,
              requires: ["text-field"],
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "text-ignore-placement": {
              type: "boolean",
              default: !1,
              requires: ["text-field"],
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "text-optional": {
              type: "boolean",
              default: !1,
              requires: ["text-field", "icon-image"],
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            visibility: {
              type: "enum",
              values: {
                visible: {},
                none: {}
              },
              default: "visible",
              "property-type": "constant"
            }
          },
          layout_raster: {
            visibility: {
              type: "enum",
              values: {
                visible: {},
                none: {}
              },
              default: "visible",
              "property-type": "constant"
            }
          },
          layout_hillshade: {
            visibility: {
              type: "enum",
              values: {
                visible: {},
                none: {}
              },
              default: "visible",
              "property-type": "constant"
            }
          },
          filter: {
            type: "array",
            value: "*"
          },
          filter_operator: {
            type: "enum",
            values: {
              "==": {},
              "!=": {},
              ">": {},
              ">=": {},
              "<": {},
              "<=": {},
              in: {},
              "!in": {},
              all: {},
              any: {},
              none: {},
              has: {},
              "!has": {}
            }
          },
          geometry_type: {
            type: "enum",
            values: {
              Point: {},
              LineString: {},
              Polygon: {}
            }
          },
          function: {
            expression: {
              type: "expression"
            },
            stops: {
              type: "array",
              value: "function_stop"
            },
            base: {
              type: "number",
              default: 1,
              minimum: 0
            },
            property: {
              type: "string",
              default: "$zoom"
            },
            type: {
              type: "enum",
              values: {
                identity: {},
                exponential: {},
                interval: {},
                categorical: {}
              },
              default: "exponential"
            },
            colorSpace: {
              type: "enum",
              values: {
                rgb: {},
                lab: {},
                hcl: {}
              },
              default: "rgb"
            },
            default: {
              type: "*",
              required: !1
            }
          },
          function_stop: {
            type: "array",
            minimum: 0,
            maximum: 22,
            value: ["number", "color"],
            length: 2
          },
          expression: {
            type: "array",
            value: "*",
            minimum: 1
          },
          expression_name: {
            type: "enum",
            values: {
              let: {
                group: "Variable binding"
              },
              var: {
                group: "Variable binding"
              },
              literal: {
                group: "Types"
              },
              array: {
                group: "Types"
              },
              at: {
                group: "Lookup"
              },
              case: {
                group: "Decision"
              },
              match: {
                group: "Decision"
              },
              coalesce: {
                group: "Decision"
              },
              step: {
                group: "Ramps, scales, curves"
              },
              interpolate: {
                group: "Ramps, scales, curves"
              },
              "interpolate-hcl": {
                group: "Ramps, scales, curves"
              },
              "interpolate-lab": {
                group: "Ramps, scales, curves"
              },
              ln2: {
                group: "Math"
              },
              pi: {
                group: "Math"
              },
              e: {
                group: "Math"
              },
              typeof: {
                group: "Types"
              },
              string: {
                group: "Types"
              },
              number: {
                group: "Types"
              },
              boolean: {
                group: "Types"
              },
              object: {
                group: "Types"
              },
              collator: {
                group: "Types"
              },
              format: {
                group: "Types"
              },
              "number-format": {
                group: "Types"
              },
              "to-string": {
                group: "Types"
              },
              "to-number": {
                group: "Types"
              },
              "to-boolean": {
                group: "Types"
              },
              "to-rgba": {
                group: "Color"
              },
              "to-color": {
                group: "Types"
              },
              rgb: {
                group: "Color"
              },
              rgba: {
                group: "Color"
              },
              get: {
                group: "Lookup"
              },
              has: {
                group: "Lookup"
              },
              length: {
                group: "Lookup"
              },
              properties: {
                group: "Feature data"
              },
              "feature-state": {
                group: "Feature data"
              },
              "geometry-type": {
                group: "Feature data"
              },
              id: {
                group: "Feature data"
              },
              zoom: {
                group: "Zoom"
              },
              "heatmap-density": {
                group: "Heatmap"
              },
              "line-progress": {
                group: "Feature data"
              },
              accumulated: {
                group: "Feature data"
              },
              "+": {
                group: "Math"
              },
              "*": {
                group: "Math"
              },
              "-": {
                group: "Math"
              },
              "/": {
                group: "Math"
              },
              "%": {
                group: "Math"
              },
              "^": {
                group: "Math"
              },
              sqrt: {
                group: "Math"
              },
              log10: {
                group: "Math"
              },
              ln: {
                group: "Math"
              },
              log2: {
                group: "Math"
              },
              sin: {
                group: "Math"
              },
              cos: {
                group: "Math"
              },
              tan: {
                group: "Math"
              },
              asin: {
                group: "Math"
              },
              acos: {
                group: "Math"
              },
              atan: {
                group: "Math"
              },
              min: {
                group: "Math"
              },
              max: {
                group: "Math"
              },
              round: {
                group: "Math"
              },
              abs: {
                group: "Math"
              },
              ceil: {
                group: "Math"
              },
              floor: {
                group: "Math"
              },
              "==": {
                group: "Decision"
              },
              "!=": {
                group: "Decision"
              },
              ">": {
                group: "Decision"
              },
              "<": {
                group: "Decision"
              },
              ">=": {
                group: "Decision"
              },
              "<=": {
                group: "Decision"
              },
              all: {
                group: "Decision"
              },
              any: {
                group: "Decision"
              },
              "!": {
                group: "Decision"
              },
              "is-supported-script": {
                group: "String"
              },
              upcase: {
                group: "String"
              },
              downcase: {
                group: "String"
              },
              concat: {
                group: "String"
              },
              "resolved-locale": {
                group: "String"
              }
            }
          },
          light: {
            anchor: {
              type: "enum",
              default: "viewport",
              values: {
                map: {},
                viewport: {}
              },
              "property-type": "data-constant",
              transition: !1,
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              }
            },
            position: {
              type: "array",
              default: [1.15, 210, 30],
              length: 3,
              value: "number",
              "property-type": "data-constant",
              transition: !0,
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              }
            },
            color: {
              type: "color",
              "property-type": "data-constant",
              default: "#ffffff",
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              transition: !0
            },
            intensity: {
              type: "number",
              "property-type": "data-constant",
              default: .5,
              minimum: 0,
              maximum: 1,
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              transition: !0
            }
          },
          paint: ["paint_fill", "paint_line", "paint_circle", "paint_heatmap", "paint_fill-extrusion", "paint_symbol", "paint_raster", "paint_hillshade", "paint_background"],
          paint_fill: {
            "fill-antialias": {
              type: "boolean",
              default: !0,
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "fill-opacity": {
              type: "number",
              default: 1,
              minimum: 0,
              maximum: 1,
              transition: !0,
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature", "feature-state"]
              },
              "property-type": "data-driven"
            },
            "fill-color": {
              type: "color",
              default: "#000000",
              transition: !0,
              requires: [{
                "!": "fill-pattern"
              }],
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature", "feature-state"]
              },
              "property-type": "data-driven"
            },
            "fill-outline-color": {
              type: "color",
              transition: !0,
              requires: [{
                "!": "fill-pattern"
              }, {
                "fill-antialias": !0
              }],
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature", "feature-state"]
              },
              "property-type": "data-driven"
            },
            "fill-translate": {
              type: "array",
              value: "number",
              length: 2,
              default: [0, 0],
              transition: !0,
              units: "pixels",
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "fill-translate-anchor": {
              type: "enum",
              values: {
                map: {},
                viewport: {}
              },
              default: "map",
              requires: ["fill-translate"],
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "fill-pattern": {
              type: "string",
              transition: !0,
              expression: {
                interpolated: !1,
                parameters: ["zoom", "feature"]
              },
              "property-type": "cross-faded-data-driven"
            }
          },
          "paint_fill-extrusion": {
            "fill-extrusion-opacity": {
              type: "number",
              default: 1,
              minimum: 0,
              maximum: 1,
              transition: !0,
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "fill-extrusion-color": {
              type: "color",
              default: "#000000",
              transition: !0,
              requires: [{
                "!": "fill-extrusion-pattern"
              }],
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature", "feature-state"]
              },
              "property-type": "data-driven"
            },
            "fill-extrusion-translate": {
              type: "array",
              value: "number",
              length: 2,
              default: [0, 0],
              transition: !0,
              units: "pixels",
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "fill-extrusion-translate-anchor": {
              type: "enum",
              values: {
                map: {},
                viewport: {}
              },
              default: "map",
              requires: ["fill-extrusion-translate"],
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "fill-extrusion-pattern": {
              type: "string",
              transition: !0,
              expression: {
                interpolated: !1,
                parameters: ["zoom", "feature"]
              },
              "property-type": "cross-faded-data-driven"
            },
            "fill-extrusion-height": {
              type: "number",
              default: 0,
              minimum: 0,
              units: "meters",
              transition: !0,
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature", "feature-state"]
              },
              "property-type": "data-driven"
            },
            "fill-extrusion-base": {
              type: "number",
              default: 0,
              minimum: 0,
              units: "meters",
              transition: !0,
              requires: ["fill-extrusion-height"],
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature", "feature-state"]
              },
              "property-type": "data-driven"
            },
            "fill-extrusion-vertical-gradient": {
              type: "boolean",
              default: !0,
              transition: !1,
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            }
          },
          paint_line: {
            "line-opacity": {
              type: "number",
              default: 1,
              minimum: 0,
              maximum: 1,
              transition: !0,
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature", "feature-state"]
              },
              "property-type": "data-driven"
            },
            "line-color": {
              type: "color",
              default: "#000000",
              transition: !0,
              requires: [{
                "!": "line-pattern"
              }],
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature", "feature-state"]
              },
              "property-type": "data-driven"
            },
            "line-translate": {
              type: "array",
              value: "number",
              length: 2,
              default: [0, 0],
              transition: !0,
              units: "pixels",
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "line-translate-anchor": {
              type: "enum",
              values: {
                map: {},
                viewport: {}
              },
              default: "map",
              requires: ["line-translate"],
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "line-width": {
              type: "number",
              default: 1,
              minimum: 0,
              transition: !0,
              units: "pixels",
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature", "feature-state"]
              },
              "property-type": "data-driven"
            },
            "line-gap-width": {
              type: "number",
              default: 0,
              minimum: 0,
              transition: !0,
              units: "pixels",
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature", "feature-state"]
              },
              "property-type": "data-driven"
            },
            "line-offset": {
              type: "number",
              default: 0,
              transition: !0,
              units: "pixels",
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature", "feature-state"]
              },
              "property-type": "data-driven"
            },
            "line-blur": {
              type: "number",
              default: 0,
              minimum: 0,
              transition: !0,
              units: "pixels",
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature", "feature-state"]
              },
              "property-type": "data-driven"
            },
            "line-dasharray": {
              type: "array",
              value: "number",
              minimum: 0,
              transition: !0,
              units: "line widths",
              requires: [{
                "!": "line-pattern"
              }],
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "cross-faded"
            },
            "line-pattern": {
              type: "string",
              transition: !0,
              expression: {
                interpolated: !1,
                parameters: ["zoom", "feature"]
              },
              "property-type": "cross-faded-data-driven"
            },
            "line-gradient": {
              type: "color",
              transition: !1,
              requires: [{
                "!": "line-dasharray"
              }, {
                "!": "line-pattern"
              }, {
                source: "geojson",
                has: {
                  lineMetrics: !0
                }
              }],
              expression: {
                interpolated: !0,
                parameters: ["line-progress"]
              },
              "property-type": "color-ramp"
            }
          },
          paint_circle: {
            "circle-radius": {
              type: "number",
              default: 5,
              minimum: 0,
              transition: !0,
              units: "pixels",
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature", "feature-state"]
              },
              "property-type": "data-driven"
            },
            "circle-color": {
              type: "color",
              default: "#000000",
              transition: !0,
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature", "feature-state"]
              },
              "property-type": "data-driven"
            },
            "circle-blur": {
              type: "number",
              default: 0,
              transition: !0,
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature", "feature-state"]
              },
              "property-type": "data-driven"
            },
            "circle-opacity": {
              type: "number",
              default: 1,
              minimum: 0,
              maximum: 1,
              transition: !0,
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature", "feature-state"]
              },
              "property-type": "data-driven"
            },
            "circle-translate": {
              type: "array",
              value: "number",
              length: 2,
              default: [0, 0],
              transition: !0,
              units: "pixels",
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "circle-translate-anchor": {
              type: "enum",
              values: {
                map: {},
                viewport: {}
              },
              default: "map",
              requires: ["circle-translate"],
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "circle-pitch-scale": {
              type: "enum",
              values: {
                map: {},
                viewport: {}
              },
              default: "map",
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "circle-pitch-alignment": {
              type: "enum",
              values: {
                map: {},
                viewport: {}
              },
              default: "viewport",
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "circle-stroke-width": {
              type: "number",
              default: 0,
              minimum: 0,
              transition: !0,
              units: "pixels",
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature", "feature-state"]
              },
              "property-type": "data-driven"
            },
            "circle-stroke-color": {
              type: "color",
              default: "#000000",
              transition: !0,
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature", "feature-state"]
              },
              "property-type": "data-driven"
            },
            "circle-stroke-opacity": {
              type: "number",
              default: 1,
              minimum: 0,
              maximum: 1,
              transition: !0,
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature", "feature-state"]
              },
              "property-type": "data-driven"
            }
          },
          paint_heatmap: {
            "heatmap-radius": {
              type: "number",
              default: 30,
              minimum: 1,
              transition: !0,
              units: "pixels",
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature", "feature-state"]
              },
              "property-type": "data-driven"
            },
            "heatmap-weight": {
              type: "number",
              default: 1,
              minimum: 0,
              transition: !1,
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature", "feature-state"]
              },
              "property-type": "data-driven"
            },
            "heatmap-intensity": {
              type: "number",
              default: 1,
              minimum: 0,
              transition: !0,
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "heatmap-color": {
              type: "color",
              default: ["interpolate", ["linear"],
                ["heatmap-density"], 0, "rgba(0, 0, 255, 0)", .1, "royalblue", .3, "cyan", .5, "lime", .7, "yellow", 1, "red"
              ],
              transition: !1,
              expression: {
                interpolated: !0,
                parameters: ["heatmap-density"]
              },
              "property-type": "color-ramp"
            },
            "heatmap-opacity": {
              type: "number",
              default: 1,
              minimum: 0,
              maximum: 1,
              transition: !0,
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            }
          },
          paint_symbol: {
            "icon-opacity": {
              type: "number",
              default: 1,
              minimum: 0,
              maximum: 1,
              transition: !0,
              requires: ["icon-image"],
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature", "feature-state"]
              },
              "property-type": "data-driven"
            },
            "icon-color": {
              type: "color",
              default: "#000000",
              transition: !0,
              requires: ["icon-image"],
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature", "feature-state"]
              },
              "property-type": "data-driven"
            },
            "icon-halo-color": {
              type: "color",
              default: "rgba(0, 0, 0, 0)",
              transition: !0,
              requires: ["icon-image"],
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature", "feature-state"]
              },
              "property-type": "data-driven"
            },
            "icon-halo-width": {
              type: "number",
              default: 0,
              minimum: 0,
              transition: !0,
              units: "pixels",
              requires: ["icon-image"],
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature", "feature-state"]
              },
              "property-type": "data-driven"
            },
            "icon-halo-blur": {
              type: "number",
              default: 0,
              minimum: 0,
              transition: !0,
              units: "pixels",
              requires: ["icon-image"],
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature", "feature-state"]
              },
              "property-type": "data-driven"
            },
            "icon-translate": {
              type: "array",
              value: "number",
              length: 2,
              default: [0, 0],
              transition: !0,
              units: "pixels",
              requires: ["icon-image"],
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "icon-translate-anchor": {
              type: "enum",
              values: {
                map: {},
                viewport: {}
              },
              default: "map",
              requires: ["icon-image", "icon-translate"],
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "text-opacity": {
              type: "number",
              default: 1,
              minimum: 0,
              maximum: 1,
              transition: !0,
              requires: ["text-field"],
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature", "feature-state"]
              },
              "property-type": "data-driven"
            },
            "text-color": {
              type: "color",
              default: "#000000",
              transition: !0,
              overridable: !0,
              requires: ["text-field"],
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature", "feature-state"]
              },
              "property-type": "data-driven"
            },
            "text-halo-color": {
              type: "color",
              default: "rgba(0, 0, 0, 0)",
              transition: !0,
              requires: ["text-field"],
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature", "feature-state"]
              },
              "property-type": "data-driven"
            },
            "text-halo-width": {
              type: "number",
              default: 0,
              minimum: 0,
              transition: !0,
              units: "pixels",
              requires: ["text-field"],
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature", "feature-state"]
              },
              "property-type": "data-driven"
            },
            "text-halo-blur": {
              type: "number",
              default: 0,
              minimum: 0,
              transition: !0,
              units: "pixels",
              requires: ["text-field"],
              expression: {
                interpolated: !0,
                parameters: ["zoom", "feature", "feature-state"]
              },
              "property-type": "data-driven"
            },
            "text-translate": {
              type: "array",
              value: "number",
              length: 2,
              default: [0, 0],
              transition: !0,
              units: "pixels",
              requires: ["text-field"],
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "text-translate-anchor": {
              type: "enum",
              values: {
                map: {},
                viewport: {}
              },
              default: "map",
              requires: ["text-field", "text-translate"],
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            }
          },
          paint_raster: {
            "raster-opacity": {
              type: "number",
              default: 1,
              minimum: 0,
              maximum: 1,
              transition: !0,
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "raster-hue-rotate": {
              type: "number",
              default: 0,
              period: 360,
              transition: !0,
              units: "degrees",
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "raster-brightness-min": {
              type: "number",
              default: 0,
              minimum: 0,
              maximum: 1,
              transition: !0,
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "raster-brightness-max": {
              type: "number",
              default: 1,
              minimum: 0,
              maximum: 1,
              transition: !0,
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "raster-saturation": {
              type: "number",
              default: 0,
              minimum: -1,
              maximum: 1,
              transition: !0,
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "raster-contrast": {
              type: "number",
              default: 0,
              minimum: -1,
              maximum: 1,
              transition: !0,
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "raster-resampling": {
              type: "enum",
              values: {
                linear: {},
                nearest: {}
              },
              default: "linear",
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "raster-fade-duration": {
              type: "number",
              default: 300,
              minimum: 0,
              transition: !1,
              units: "milliseconds",
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            }
          },
          paint_hillshade: {
            "hillshade-illumination-direction": {
              type: "number",
              default: 335,
              minimum: 0,
              maximum: 359,
              transition: !1,
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "hillshade-illumination-anchor": {
              type: "enum",
              values: {
                map: {},
                viewport: {}
              },
              default: "viewport",
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "hillshade-exaggeration": {
              type: "number",
              default: .5,
              minimum: 0,
              maximum: 1,
              transition: !0,
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "hillshade-shadow-color": {
              type: "color",
              default: "#000000",
              transition: !0,
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "hillshade-highlight-color": {
              type: "color",
              default: "#FFFFFF",
              transition: !0,
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "hillshade-accent-color": {
              type: "color",
              default: "#000000",
              transition: !0,
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            }
          },
          paint_background: {
            "background-color": {
              type: "color",
              default: "#000000",
              transition: !0,
              requires: [{
                "!": "background-pattern"
              }],
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            },
            "background-pattern": {
              type: "string",
              transition: !0,
              expression: {
                interpolated: !1,
                parameters: ["zoom"]
              },
              "property-type": "cross-faded"
            },
            "background-opacity": {
              type: "number",
              default: 1,
              minimum: 0,
              maximum: 1,
              transition: !0,
              expression: {
                interpolated: !0,
                parameters: ["zoom"]
              },
              "property-type": "data-constant"
            }
          },
          transition: {
            duration: {
              type: "number",
              default: 300,
              minimum: 0,
              units: "milliseconds"
            },
            delay: {
              type: "number",
              default: 0,
              minimum: 0,
              units: "milliseconds"
            }
          },
          "property-type": {
            "data-driven": {
              type: "property-type"
            },
            "cross-faded": {
              type: "property-type"
            },
            "cross-faded-data-driven": {
              type: "property-type"
            },
            "color-ramp": {
              type: "property-type"
            },
            "data-constant": {
              type: "property-type"
            },
            constant: {
              type: "property-type"
            }
          }
        },
        qt = function (t, e, r, n) {
          this.message = (t ? t + ": " : "") + r, n && (this.identifier = n), null != e && e.__line__ && (this.line = e.__line__);
        };
  
      function Nt(t) {
        var e = t.key,
          r = t.value;
        return r ? [new qt(e, r, "constants have been deprecated as of v8")] : []
      }
  
      function Kt(t) {
        for (var e = [], r = arguments.length - 1; r-- > 0;) e[r] = arguments[r + 1];
        for (var n = 0, i = e; n < i.length; n += 1) {
          var a = i[n];
          for (var o in a) t[o] = a[o];
        }
        return t
      }
  
      function Zt(t) {
        return t instanceof Number || t instanceof String || t instanceof Boolean
      }
  
      function Xt(t) {
        return Zt(t) ? t.valueOf() : t
      }
  
      function Gt(t) {
        if (Array.isArray(t)) return t.map(Gt);
        if (t instanceof Object && !Zt(t)) {
          var e = {};
          for (var r in t) e[r] = Gt(t[r]);
          return e
        }
        return Xt(t)
      }
      var Ht = function (t) {
          function e(e, r) {
            t.call(this, r), this.message = r, this.key = e;
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e
        }(Error),
        Jt = function (t, e) {
          void 0 === e && (e = []), this.parent = t, this.bindings = {};
          for (var r = 0, n = e; r < n.length; r += 1) {
            var i = n[r],
              a = i[0],
              o = i[1];
            this.bindings[a] = o;
          }
        };
      Jt.prototype.concat = function (t) {
        return new Jt(this, t)
      }, Jt.prototype.get = function (t) {
        if (this.bindings[t]) return this.bindings[t];
        if (this.parent) return this.parent.get(t);
        throw new Error(t + " not found in scope.")
      }, Jt.prototype.has = function (t) {
        return !!this.bindings[t] || !!this.parent && this.parent.has(t)
      };
      var Yt = {
          kind: "null"
        },
        $t = {
          kind: "number"
        },
        Wt = {
          kind: "string"
        },
        Qt = {
          kind: "boolean"
        },
        te = {
          kind: "color"
        },
        ee = {
          kind: "object"
        },
        re = {
          kind: "value"
        },
        ne = {
          kind: "collator"
        },
        ie = {
          kind: "formatted"
        };
  
      function ae(t, e) {
        return {
          kind: "array",
          itemType: t,
          N: e
        }
      }
  
      function oe(t) {
        if ("array" === t.kind) {
          var e = oe(t.itemType);
          return "number" == typeof t.N ? "array<" + e + ", " + t.N + ">" : "value" === t.itemType.kind ? "array" : "array<" + e + ">"
        }
        return t.kind
      }
      var se = [Yt, $t, Wt, Qt, te, ie, ee, ae(re)];
  
      function ue(t, e) {
        if ("error" === e.kind) return null;
        if ("array" === t.kind) {
          if ("array" === e.kind && (0 === e.N && "value" === e.itemType.kind || !ue(t.itemType, e.itemType)) && ("number" != typeof t.N || t.N === e.N)) return null
        } else {
          if (t.kind === e.kind) return null;
          if ("value" === t.kind)
            for (var r = 0, n = se; r < n.length; r += 1) {
              if (!ue(n[r], e)) return null
            }
        }
        return "Expected " + oe(t) + " but found " + oe(e) + " instead."
      }
      var le = e(function (t, e) {
          var r = {
            transparent: [0, 0, 0, 0],
            aliceblue: [240, 248, 255, 1],
            antiquewhite: [250, 235, 215, 1],
            aqua: [0, 255, 255, 1],
            aquamarine: [127, 255, 212, 1],
            azure: [240, 255, 255, 1],
            beige: [245, 245, 220, 1],
            bisque: [255, 228, 196, 1],
            black: [0, 0, 0, 1],
            blanchedalmond: [255, 235, 205, 1],
            blue: [0, 0, 255, 1],
            blueviolet: [138, 43, 226, 1],
            brown: [165, 42, 42, 1],
            burlywood: [222, 184, 135, 1],
            cadetblue: [95, 158, 160, 1],
            chartreuse: [127, 255, 0, 1],
            chocolate: [210, 105, 30, 1],
            coral: [255, 127, 80, 1],
            cornflowerblue: [100, 149, 237, 1],
            cornsilk: [255, 248, 220, 1],
            crimson: [220, 20, 60, 1],
            cyan: [0, 255, 255, 1],
            darkblue: [0, 0, 139, 1],
            darkcyan: [0, 139, 139, 1],
            darkgoldenrod: [184, 134, 11, 1],
            darkgray: [169, 169, 169, 1],
            darkgreen: [0, 100, 0, 1],
            darkgrey: [169, 169, 169, 1],
            darkkhaki: [189, 183, 107, 1],
            darkmagenta: [139, 0, 139, 1],
            darkolivegreen: [85, 107, 47, 1],
            darkorange: [255, 140, 0, 1],
            darkorchid: [153, 50, 204, 1],
            darkred: [139, 0, 0, 1],
            darksalmon: [233, 150, 122, 1],
            darkseagreen: [143, 188, 143, 1],
            darkslateblue: [72, 61, 139, 1],
            darkslategray: [47, 79, 79, 1],
            darkslategrey: [47, 79, 79, 1],
            darkturquoise: [0, 206, 209, 1],
            darkviolet: [148, 0, 211, 1],
            deeppink: [255, 20, 147, 1],
            deepskyblue: [0, 191, 255, 1],
            dimgray: [105, 105, 105, 1],
            dimgrey: [105, 105, 105, 1],
            dodgerblue: [30, 144, 255, 1],
            firebrick: [178, 34, 34, 1],
            floralwhite: [255, 250, 240, 1],
            forestgreen: [34, 139, 34, 1],
            fuchsia: [255, 0, 255, 1],
            gainsboro: [220, 220, 220, 1],
            ghostwhite: [248, 248, 255, 1],
            gold: [255, 215, 0, 1],
            goldenrod: [218, 165, 32, 1],
            gray: [128, 128, 128, 1],
            green: [0, 128, 0, 1],
            greenyellow: [173, 255, 47, 1],
            grey: [128, 128, 128, 1],
            honeydew: [240, 255, 240, 1],
            hotpink: [255, 105, 180, 1],
            indianred: [205, 92, 92, 1],
            indigo: [75, 0, 130, 1],
            ivory: [255, 255, 240, 1],
            khaki: [240, 230, 140, 1],
            lavender: [230, 230, 250, 1],
            lavenderblush: [255, 240, 245, 1],
            lawngreen: [124, 252, 0, 1],
            lemonchiffon: [255, 250, 205, 1],
            lightblue: [173, 216, 230, 1],
            lightcoral: [240, 128, 128, 1],
            lightcyan: [224, 255, 255, 1],
            lightgoldenrodyellow: [250, 250, 210, 1],
            lightgray: [211, 211, 211, 1],
            lightgreen: [144, 238, 144, 1],
            lightgrey: [211, 211, 211, 1],
            lightpink: [255, 182, 193, 1],
            lightsalmon: [255, 160, 122, 1],
            lightseagreen: [32, 178, 170, 1],
            lightskyblue: [135, 206, 250, 1],
            lightslategray: [119, 136, 153, 1],
            lightslategrey: [119, 136, 153, 1],
            lightsteelblue: [176, 196, 222, 1],
            lightyellow: [255, 255, 224, 1],
            lime: [0, 255, 0, 1],
            limegreen: [50, 205, 50, 1],
            linen: [250, 240, 230, 1],
            magenta: [255, 0, 255, 1],
            maroon: [128, 0, 0, 1],
            mediumaquamarine: [102, 205, 170, 1],
            mediumblue: [0, 0, 205, 1],
            mediumorchid: [186, 85, 211, 1],
            mediumpurple: [147, 112, 219, 1],
            mediumseagreen: [60, 179, 113, 1],
            mediumslateblue: [123, 104, 238, 1],
            mediumspringgreen: [0, 250, 154, 1],
            mediumturquoise: [72, 209, 204, 1],
            mediumvioletred: [199, 21, 133, 1],
            midnightblue: [25, 25, 112, 1],
            mintcream: [245, 255, 250, 1],
            mistyrose: [255, 228, 225, 1],
            moccasin: [255, 228, 181, 1],
            navajowhite: [255, 222, 173, 1],
            navy: [0, 0, 128, 1],
            oldlace: [253, 245, 230, 1],
            olive: [128, 128, 0, 1],
            olivedrab: [107, 142, 35, 1],
            orange: [255, 165, 0, 1],
            orangered: [255, 69, 0, 1],
            orchid: [218, 112, 214, 1],
            palegoldenrod: [238, 232, 170, 1],
            palegreen: [152, 251, 152, 1],
            paleturquoise: [175, 238, 238, 1],
            palevioletred: [219, 112, 147, 1],
            papayawhip: [255, 239, 213, 1],
            peachpuff: [255, 218, 185, 1],
            peru: [205, 133, 63, 1],
            pink: [255, 192, 203, 1],
            plum: [221, 160, 221, 1],
            powderblue: [176, 224, 230, 1],
            purple: [128, 0, 128, 1],
            rebeccapurple: [102, 51, 153, 1],
            red: [255, 0, 0, 1],
            rosybrown: [188, 143, 143, 1],
            royalblue: [65, 105, 225, 1],
            saddlebrown: [139, 69, 19, 1],
            salmon: [250, 128, 114, 1],
            sandybrown: [244, 164, 96, 1],
            seagreen: [46, 139, 87, 1],
            seashell: [255, 245, 238, 1],
            sienna: [160, 82, 45, 1],
            silver: [192, 192, 192, 1],
            skyblue: [135, 206, 235, 1],
            slateblue: [106, 90, 205, 1],
            slategray: [112, 128, 144, 1],
            slategrey: [112, 128, 144, 1],
            snow: [255, 250, 250, 1],
            springgreen: [0, 255, 127, 1],
            steelblue: [70, 130, 180, 1],
            tan: [210, 180, 140, 1],
            teal: [0, 128, 128, 1],
            thistle: [216, 191, 216, 1],
            tomato: [255, 99, 71, 1],
            turquoise: [64, 224, 208, 1],
            violet: [238, 130, 238, 1],
            wheat: [245, 222, 179, 1],
            white: [255, 255, 255, 1],
            whitesmoke: [245, 245, 245, 1],
            yellow: [255, 255, 0, 1],
            yellowgreen: [154, 205, 50, 1]
          };
  
          function n(t) {
            return (t = Math.round(t)) < 0 ? 0 : t > 255 ? 255 : t
          }
  
          function i(t) {
            return t < 0 ? 0 : t > 1 ? 1 : t
          }
  
          function a(t) {
            return "%" === t[t.length - 1] ? n(parseFloat(t) / 100 * 255) : n(parseInt(t))
          }
  
          function o(t) {
            return "%" === t[t.length - 1] ? i(parseFloat(t) / 100) : i(parseFloat(t))
          }
  
          function s(t, e, r) {
            return r < 0 ? r += 1 : r > 1 && (r -= 1), 6 * r < 1 ? t + (e - t) * r * 6 : 2 * r < 1 ? e : 3 * r < 2 ? t + (e - t) * (2 / 3 - r) * 6 : t
          }
          try {
            e.parseCSSColor = function (t) {
              var e, i = t.replace(/ /g, "").toLowerCase();
              if (i in r) return r[i].slice();
              if ("#" === i[0]) return 4 === i.length ? (e = parseInt(i.substr(1), 16)) >= 0 && e <= 4095 ? [(3840 & e) >> 4 | (3840 & e) >> 8, 240 & e | (240 & e) >> 4, 15 & e | (15 & e) << 4, 1] : null : 7 === i.length && (e = parseInt(i.substr(1), 16)) >= 0 && e <= 16777215 ? [(16711680 & e) >> 16, (65280 & e) >> 8, 255 & e, 1] : null;
              var u = i.indexOf("("),
                l = i.indexOf(")");
              if (-1 !== u && l + 1 === i.length) {
                var p = i.substr(0, u),
                  c = i.substr(u + 1, l - (u + 1)).split(","),
                  h = 1;
                switch (p) {
                  case "rgba":
                    if (4 !== c.length) return null;
                    h = o(c.pop());
                  case "rgb":
                    return 3 !== c.length ? null : [a(c[0]), a(c[1]), a(c[2]), h];
                  case "hsla":
                    if (4 !== c.length) return null;
                    h = o(c.pop());
                  case "hsl":
                    if (3 !== c.length) return null;
                    var f = (parseFloat(c[0]) % 360 + 360) % 360 / 360,
                      y = o(c[1]),
                      d = o(c[2]),
                      m = d <= .5 ? d * (y + 1) : d + y - d * y,
                      v = 2 * d - m;
                    return [n(255 * s(v, m, f + 1 / 3)), n(255 * s(v, m, f)), n(255 * s(v, m, f - 1 / 3)), h];
                  default:
                    return null
                }
              }
              return null
            };
          } catch (t) {}
        }).parseCSSColor,
        pe = function (t, e, r, n) {
          void 0 === n && (n = 1), this.r = t, this.g = e, this.b = r, this.a = n;
        };
      pe.parse = function (t) {
        if (t) {
          if (t instanceof pe) return t;
          if ("string" == typeof t) {
            var e = le(t);
            if (e) return new pe(e[0] / 255 * e[3], e[1] / 255 * e[3], e[2] / 255 * e[3], e[3])
          }
        }
      }, pe.prototype.toString = function () {
        var t = this.toArray(),
          e = t[0],
          r = t[1],
          n = t[2],
          i = t[3];
        return "rgba(" + Math.round(e) + "," + Math.round(r) + "," + Math.round(n) + "," + i + ")"
      }, pe.prototype.toArray = function () {
        var t = this.r,
          e = this.g,
          r = this.b,
          n = this.a;
        return 0 === n ? [0, 0, 0, 0] : [255 * t / n, 255 * e / n, 255 * r / n, n]
      }, pe.black = new pe(0, 0, 0, 1), pe.white = new pe(1, 1, 1, 1), pe.transparent = new pe(0, 0, 0, 0), pe.red = new pe(1, 0, 0, 1);
      var ce = function (t, e, r) {
        this.sensitivity = t ? e ? "variant" : "case" : e ? "accent" : "base", this.locale = r, this.collator = new Intl.Collator(this.locale ? this.locale : [], {
          sensitivity: this.sensitivity,
          usage: "search"
        });
      };
      ce.prototype.compare = function (t, e) {
        return this.collator.compare(t, e)
      }, ce.prototype.resolvedLocale = function () {
        return new Intl.Collator(this.locale ? this.locale : []).resolvedOptions().locale
      };
      var he = function (t, e, r, n) {
          this.text = t, this.scale = e, this.fontStack = r, this.textColor = n;
        },
        fe = function (t) {
          this.sections = t;
        };
  
      function ye(t, e, r, n) {
        return "number" == typeof t && t >= 0 && t <= 255 && "number" == typeof e && e >= 0 && e <= 255 && "number" == typeof r && r >= 0 && r <= 255 ? void 0 === n || "number" == typeof n && n >= 0 && n <= 1 ? null : "Invalid rgba value [" + [t, e, r, n].join(", ") + "]: 'a' must be between 0 and 1." : "Invalid rgba value [" + ("number" == typeof n ? [t, e, r, n] : [t, e, r]).join(", ") + "]: 'r', 'g', and 'b' must be between 0 and 255."
      }
  
      function de(t) {
        if (null === t) return Yt;
        if ("string" == typeof t) return Wt;
        if ("boolean" == typeof t) return Qt;
        if ("number" == typeof t) return $t;
        if (t instanceof pe) return te;
        if (t instanceof ce) return ne;
        if (t instanceof fe) return ie;
        if (Array.isArray(t)) {
          for (var e, r = t.length, n = 0, i = t; n < i.length; n += 1) {
            var a = de(i[n]);
            if (e) {
              if (e === a) continue;
              e = re;
              break
            }
            e = a;
          }
          return ae(e || re, r)
        }
        return ee
      }
  
      function me(t) {
        var e = typeof t;
        return null === t ? "" : "string" === e || "number" === e || "boolean" === e ? String(t) : t instanceof pe || t instanceof fe ? t.toString() : JSON.stringify(t)
      }
      fe.fromString = function (t) {
        return new fe([new he(t, null, null, null)])
      }, fe.prototype.toString = function () {
        return this.sections.map(function (t) {
          return t.text
        }).join("")
      }, fe.prototype.serialize = function () {
        for (var t = ["format"], e = 0, r = this.sections; e < r.length; e += 1) {
          var n = r[e];
          t.push(n.text);
          var i = {};
          n.fontStack && (i["text-font"] = ["literal", n.fontStack.split(",")]), n.scale && (i["font-scale"] = n.scale), n.textColor && (i["text-color"] = ["rgba"].concat(n.textColor.toArray())), t.push(i);
        }
        return t
      };
      var ve = function (t, e) {
        this.type = t, this.value = e;
      };
      ve.parse = function (t, e) {
        if (2 !== t.length) return e.error("'literal' expression requires exactly one argument, but found " + (t.length - 1) + " instead.");
        if (! function t(e) {
            if (null === e) return !0;
            if ("string" == typeof e) return !0;
            if ("boolean" == typeof e) return !0;
            if ("number" == typeof e) return !0;
            if (e instanceof pe) return !0;
            if (e instanceof ce) return !0;
            if (e instanceof fe) return !0;
            if (Array.isArray(e)) {
              for (var r = 0, n = e; r < n.length; r += 1)
                if (!t(n[r])) return !1;
              return !0
            }
            if ("object" == typeof e) {
              for (var i in e)
                if (!t(e[i])) return !1;
              return !0
            }
            return !1
          }(t[1])) return e.error("invalid value");
        var r = t[1],
          n = de(r),
          i = e.expectedType;
        return "array" !== n.kind || 0 !== n.N || !i || "array" !== i.kind || "number" == typeof i.N && 0 !== i.N || (n = i), new ve(n, r)
      }, ve.prototype.evaluate = function () {
        return this.value
      }, ve.prototype.eachChild = function () {}, ve.prototype.possibleOutputs = function () {
        return [this.value]
      }, ve.prototype.serialize = function () {
        return "array" === this.type.kind || "object" === this.type.kind ? ["literal", this.value] : this.value instanceof pe ? ["rgba"].concat(this.value.toArray()) : this.value instanceof fe ? this.value.serialize() : this.value
      };
      var ge = function (t) {
        this.name = "ExpressionEvaluationError", this.message = t;
      };
      ge.prototype.toJSON = function () {
        return this.message
      };
      var xe = {
          string: Wt,
          number: $t,
          boolean: Qt,
          object: ee
        },
        be = function (t, e) {
          this.type = t, this.args = e;
        };
      be.parse = function (t, e) {
        if (t.length < 2) return e.error("Expected at least one argument.");
        var r, n = 1,
          i = t[0];
        if ("array" === i) {
          var a, o;
          if (t.length > 2) {
            var s = t[1];
            if ("string" != typeof s || !(s in xe) || "object" === s) return e.error('The item type argument of "array" must be one of string, number, boolean', 1);
            a = xe[s], n++;
          } else a = re;
          if (t.length > 3) {
            if (null !== t[2] && ("number" != typeof t[2] || t[2] < 0 || t[2] !== Math.floor(t[2]))) return e.error('The length argument to "array" must be a positive integer literal', 2);
            o = t[2], n++;
          }
          r = ae(a, o);
        } else r = xe[i];
        for (var u = []; n < t.length; n++) {
          var l = e.parse(t[n], n, re);
          if (!l) return null;
          u.push(l);
        }
        return new be(r, u)
      }, be.prototype.evaluate = function (t) {
        for (var e = 0; e < this.args.length; e++) {
          var r = this.args[e].evaluate(t);
          if (!ue(this.type, de(r))) return r;
          if (e === this.args.length - 1) throw new ge("Expected value to be of type " + oe(this.type) + ", but found " + oe(de(r)) + " instead.")
        }
        return null
      }, be.prototype.eachChild = function (t) {
        this.args.forEach(t);
      }, be.prototype.possibleOutputs = function () {
        var t;
        return (t = []).concat.apply(t, this.args.map(function (t) {
          return t.possibleOutputs()
        }))
      }, be.prototype.serialize = function () {
        var t = this.type,
          e = [t.kind];
        if ("array" === t.kind) {
          var r = t.itemType;
          if ("string" === r.kind || "number" === r.kind || "boolean" === r.kind) {
            e.push(r.kind);
            var n = t.N;
            ("number" == typeof n || this.args.length > 1) && e.push(n);
          }
        }
        return e.concat(this.args.map(function (t) {
          return t.serialize()
        }))
      };
      var _e = function (t) {
        this.type = ie, this.sections = t;
      };
      _e.parse = function (t, e) {
        if (t.length < 3) return e.error("Expected at least two arguments.");
        if ((t.length - 1) % 2 != 0) return e.error("Expected an even number of arguments.");
        for (var r = [], n = 1; n < t.length - 1; n += 2) {
          var i = e.parse(t[n], 1, re);
          if (!i) return null;
          var a = i.type.kind;
          if ("string" !== a && "value" !== a && "null" !== a) return e.error("Formatted text type must be 'string', 'value', or 'null'.");
          var o = t[n + 1];
          if ("object" != typeof o || Array.isArray(o)) return e.error("Format options argument must be an object.");
          var s = null;
          if (o["font-scale"] && !(s = e.parse(o["font-scale"], 1, $t))) return null;
          var u = null;
          if (o["text-font"] && !(u = e.parse(o["text-font"], 1, ae(Wt)))) return null;
          var l = null;
          if (o["text-color"] && !(l = e.parse(o["text-color"], 1, te))) return null;
          r.push({
            text: i,
            scale: s,
            font: u,
            textColor: l
          });
        }
        return new _e(r)
      }, _e.prototype.evaluate = function (t) {
        return new fe(this.sections.map(function (e) {
          return new he(me(e.text.evaluate(t)), e.scale ? e.scale.evaluate(t) : null, e.font ? e.font.evaluate(t).join(",") : null, e.textColor ? e.textColor.evaluate(t) : null)
        }))
      }, _e.prototype.eachChild = function (t) {
        for (var e = 0, r = this.sections; e < r.length; e += 1) {
          var n = r[e];
          t(n.text), n.scale && t(n.scale), n.font && t(n.font), n.textColor && t(n.textColor);
        }
      }, _e.prototype.possibleOutputs = function () {
        return [void 0]
      }, _e.prototype.serialize = function () {
        for (var t = ["format"], e = 0, r = this.sections; e < r.length; e += 1) {
          var n = r[e];
          t.push(n.text.serialize());
          var i = {};
          n.scale && (i["font-scale"] = n.scale.serialize()), n.font && (i["text-font"] = n.font.serialize()), n.textColor && (i["text-color"] = n.textColor.serialize()), t.push(i);
        }
        return t
      };
      var we = {
          "to-boolean": Qt,
          "to-color": te,
          "to-number": $t,
          "to-string": Wt
        },
        Ae = function (t, e) {
          this.type = t, this.args = e;
        };
      Ae.parse = function (t, e) {
        if (t.length < 2) return e.error("Expected at least one argument.");
        var r = t[0];
        if (("to-boolean" === r || "to-string" === r) && 2 !== t.length) return e.error("Expected one argument.");
        for (var n = we[r], i = [], a = 1; a < t.length; a++) {
          var o = e.parse(t[a], a, re);
          if (!o) return null;
          i.push(o);
        }
        return new Ae(n, i)
      }, Ae.prototype.evaluate = function (t) {
        if ("boolean" === this.type.kind) return Boolean(this.args[0].evaluate(t));
        if ("color" === this.type.kind) {
          for (var e, r, n = 0, i = this.args; n < i.length; n += 1) {
            if (r = null, (e = i[n].evaluate(t)) instanceof pe) return e;
            if ("string" == typeof e) {
              var a = t.parseColor(e);
              if (a) return a
            } else if (Array.isArray(e) && !(r = e.length < 3 || e.length > 4 ? "Invalid rbga value " + JSON.stringify(e) + ": expected an array containing either three or four numeric values." : ye(e[0], e[1], e[2], e[3]))) return new pe(e[0] / 255, e[1] / 255, e[2] / 255, e[3])
          }
          throw new ge(r || "Could not parse color from value '" + ("string" == typeof e ? e : String(JSON.stringify(e))) + "'")
        }
        if ("number" === this.type.kind) {
          for (var o = null, s = 0, u = this.args; s < u.length; s += 1) {
            if (null === (o = u[s].evaluate(t))) return 0;
            var l = Number(o);
            if (!isNaN(l)) return l
          }
          throw new ge("Could not convert " + JSON.stringify(o) + " to number.")
        }
        return "formatted" === this.type.kind ? fe.fromString(me(this.args[0].evaluate(t))) : me(this.args[0].evaluate(t))
      }, Ae.prototype.eachChild = function (t) {
        this.args.forEach(t);
      }, Ae.prototype.possibleOutputs = function () {
        var t;
        return (t = []).concat.apply(t, this.args.map(function (t) {
          return t.possibleOutputs()
        }))
      }, Ae.prototype.serialize = function () {
        if ("formatted" === this.type.kind) return new _e([{
          text: this.args[0],
          scale: null,
          font: null,
          textColor: null
        }]).serialize();
        var t = ["to-" + this.type.kind];
        return this.eachChild(function (e) {
          t.push(e.serialize());
        }), t
      };
      var ke = ["Unknown", "Point", "LineString", "Polygon"],
        Se = function () {
          this.globals = null, this.feature = null, this.featureState = null, this.formattedSection = null, this._parseColorCache = {};
        };
      Se.prototype.id = function () {
        return this.feature && "id" in this.feature ? this.feature.id : null
      }, Se.prototype.geometryType = function () {
        return this.feature ? "number" == typeof this.feature.type ? ke[this.feature.type] : this.feature.type : null
      }, Se.prototype.properties = function () {
        return this.feature && this.feature.properties || {}
      }, Se.prototype.parseColor = function (t) {
        var e = this._parseColorCache[t];
        return e || (e = this._parseColorCache[t] = pe.parse(t)), e
      };
      var ze = function (t, e, r, n) {
        this.name = t, this.type = e, this._evaluate = r, this.args = n;
      };
      ze.prototype.evaluate = function (t) {
        return this._evaluate(t, this.args)
      }, ze.prototype.eachChild = function (t) {
        this.args.forEach(t);
      }, ze.prototype.possibleOutputs = function () {
        return [void 0]
      }, ze.prototype.serialize = function () {
        return [this.name].concat(this.args.map(function (t) {
          return t.serialize()
        }))
      }, ze.parse = function (t, e) {
        var r, n = t[0],
          i = ze.definitions[n];
        if (!i) return e.error('Unknown expression "' + n + '". If you wanted a literal array, use ["literal", [...]].', 0);
        for (var a = Array.isArray(i) ? i[0] : i.type, o = Array.isArray(i) ? [
            [i[1], i[2]]
          ] : i.overloads, s = o.filter(function (e) {
            var r = e[0];
            return !Array.isArray(r) || r.length === t.length - 1
          }), u = null, l = 0, p = s; l < p.length; l += 1) {
          var c = p[l],
            h = c[0],
            f = c[1];
          u = new Me(e.registry, e.path, null, e.scope);
          for (var y = [], d = !1, m = 1; m < t.length; m++) {
            var v = t[m],
              g = Array.isArray(h) ? h[m - 1] : h.type,
              x = u.parse(v, 1 + y.length, g);
            if (!x) {
              d = !0;
              break
            }
            y.push(x);
          }
          if (!d)
            if (Array.isArray(h) && h.length !== y.length) u.error("Expected " + h.length + " arguments, but found " + y.length + " instead.");
            else {
              for (var b = 0; b < y.length; b++) {
                var _ = Array.isArray(h) ? h[b] : h.type,
                  w = y[b];
                u.concat(b + 1).checkSubtype(_, w.type);
              }
              if (0 === u.errors.length) return new ze(n, a, f, y)
            }
        }
        if (1 === s.length)(r = e.errors).push.apply(r, u.errors);
        else {
          for (var A = (s.length ? s : o).map(function (t) {
              var e, r = t[0];
              return e = r, Array.isArray(e) ? "(" + e.map(oe).join(", ") + ")" : "(" + oe(e.type) + "...)"
            }).join(" | "), k = [], S = 1; S < t.length; S++) {
            var z = e.parse(t[S], 1 + k.length);
            if (!z) return null;
            k.push(oe(z.type));
          }
          e.error("Expected arguments of type " + A + ", but found (" + k.join(", ") + ") instead.");
        }
        return null
      }, ze.register = function (t, e) {
        for (var r in ze.definitions = e, e) t[r] = ze;
      };
      var Ie = function (t, e, r) {
        this.type = ne, this.locale = r, this.caseSensitive = t, this.diacriticSensitive = e;
      };
  
      function Ce(t) {
        if (t instanceof ze) {
          if ("get" === t.name && 1 === t.args.length) return !1;
          if ("feature-state" === t.name) return !1;
          if ("has" === t.name && 1 === t.args.length) return !1;
          if ("properties" === t.name || "geometry-type" === t.name || "id" === t.name) return !1;
          if (/^filter-/.test(t.name)) return !1
        }
        var e = !0;
        return t.eachChild(function (t) {
          e && !Ce(t) && (e = !1);
        }), e
      }
  
      function Be(t) {
        if (t instanceof ze && "feature-state" === t.name) return !1;
        var e = !0;
        return t.eachChild(function (t) {
          e && !Be(t) && (e = !1);
        }), e
      }
  
      function Pe(t, e) {
        if (t instanceof ze && e.indexOf(t.name) >= 0) return !1;
        var r = !0;
        return t.eachChild(function (t) {
          r && !Pe(t, e) && (r = !1);
        }), r
      }
      Ie.parse = function (t, e) {
        if (2 !== t.length) return e.error("Expected one argument.");
        var r = t[1];
        if ("object" != typeof r || Array.isArray(r)) return e.error("Collator options argument must be an object.");
        var n = e.parse(void 0 !== r["case-sensitive"] && r["case-sensitive"], 1, Qt);
        if (!n) return null;
        var i = e.parse(void 0 !== r["diacritic-sensitive"] && r["diacritic-sensitive"], 1, Qt);
        if (!i) return null;
        var a = null;
        return r.locale && !(a = e.parse(r.locale, 1, Wt)) ? null : new Ie(n, i, a)
      }, Ie.prototype.evaluate = function (t) {
        return new ce(this.caseSensitive.evaluate(t), this.diacriticSensitive.evaluate(t), this.locale ? this.locale.evaluate(t) : null)
      }, Ie.prototype.eachChild = function (t) {
        t(this.caseSensitive), t(this.diacriticSensitive), this.locale && t(this.locale);
      }, Ie.prototype.possibleOutputs = function () {
        return [void 0]
      }, Ie.prototype.serialize = function () {
        var t = {};
        return t["case-sensitive"] = this.caseSensitive.serialize(), t["diacritic-sensitive"] = this.diacriticSensitive.serialize(), this.locale && (t.locale = this.locale.serialize()), ["collator", t]
      };
      var Ee = function (t, e) {
        this.type = e.type, this.name = t, this.boundExpression = e;
      };
      Ee.parse = function (t, e) {
        if (2 !== t.length || "string" != typeof t[1]) return e.error("'var' expression requires exactly one string literal argument.");
        var r = t[1];
        return e.scope.has(r) ? new Ee(r, e.scope.get(r)) : e.error('Unknown variable "' + r + '". Make sure "' + r + '" has been bound in an enclosing "let" expression before using it.', 1)
      }, Ee.prototype.evaluate = function (t) {
        return this.boundExpression.evaluate(t)
      }, Ee.prototype.eachChild = function () {}, Ee.prototype.possibleOutputs = function () {
        return [void 0]
      }, Ee.prototype.serialize = function () {
        return ["var", this.name]
      };
      var Me = function (t, e, r, n, i) {
        void 0 === e && (e = []), void 0 === n && (n = new Jt), void 0 === i && (i = []), this.registry = t, this.path = e, this.key = e.map(function (t) {
          return "[" + t + "]"
        }).join(""), this.scope = n, this.errors = i, this.expectedType = r;
      };
  
      function Te(t, e) {
        for (var r, n, i = t.length - 1, a = 0, o = i, s = 0; a <= o;)
          if (r = t[s = Math.floor((a + o) / 2)], n = t[s + 1], r <= e) {
            if (s === i || e < n) return s;
            a = s + 1;
          } else {
            if (!(r > e)) throw new ge("Input is not a number.");
            o = s - 1;
          } return 0
      }
      Me.prototype.parse = function (t, e, r, n, i) {
        return void 0 === i && (i = {}), e ? this.concat(e, r, n)._parse(t, i) : this._parse(t, i)
      }, Me.prototype._parse = function (t, e) {
        function r(t, e, r) {
          return "assert" === r ? new be(e, [t]) : "coerce" === r ? new Ae(e, [t]) : t
        }
        if (null !== t && "string" != typeof t && "boolean" != typeof t && "number" != typeof t || (t = ["literal", t]), Array.isArray(t)) {
          if (0 === t.length) return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');
          var n = t[0];
          if ("string" != typeof n) return this.error("Expression name must be a string, but found " + typeof n + ' instead. If you wanted a literal array, use ["literal", [...]].', 0), null;
          var i = this.registry[n];
          if (i) {
            var a = i.parse(t, this);
            if (!a) return null;
            if (this.expectedType) {
              var o = this.expectedType,
                s = a.type;
              if ("string" !== o.kind && "number" !== o.kind && "boolean" !== o.kind && "object" !== o.kind && "array" !== o.kind || "value" !== s.kind)
                if ("color" !== o.kind && "formatted" !== o.kind || "value" !== s.kind && "string" !== s.kind) {
                  if (this.checkSubtype(o, s)) return null
                } else a = r(a, o, e.typeAnnotation || "coerce");
              else a = r(a, o, e.typeAnnotation || "assert");
            }
            if (!(a instanceof ve) && function t(e) {
                if (e instanceof Ee) return t(e.boundExpression);
                if (e instanceof ze && "error" === e.name) return !1;
                if (e instanceof Ie) return !1;
                var r = e instanceof Ae || e instanceof be;
                var n = !0;
                e.eachChild(function (e) {
                  n = r ? n && t(e) : n && e instanceof ve;
                });
                if (!n) return !1;
                return Ce(e) && Pe(e, ["zoom", "heatmap-density", "line-progress", "accumulated", "is-supported-script"])
              }(a)) {
              var u = new Se;
              try {
                a = new ve(a.type, a.evaluate(u));
              } catch (t) {
                return this.error(t.message), null
              }
            }
            return a
          }
          return this.error('Unknown expression "' + n + '". If you wanted a literal array, use ["literal", [...]].', 0)
        }
        return void 0 === t ? this.error("'undefined' value invalid. Use null instead.") : "object" == typeof t ? this.error('Bare objects invalid. Use ["literal", {...}] instead.') : this.error("Expected an array, but found " + typeof t + " instead.")
      }, Me.prototype.concat = function (t, e, r) {
        var n = "number" == typeof t ? this.path.concat(t) : this.path,
          i = r ? this.scope.concat(r) : this.scope;
        return new Me(this.registry, n, e || null, i, this.errors)
      }, Me.prototype.error = function (t) {
        for (var e = [], r = arguments.length - 1; r-- > 0;) e[r] = arguments[r + 1];
        var n = "" + this.key + e.map(function (t) {
          return "[" + t + "]"
        }).join("");
        this.errors.push(new Ht(n, t));
      }, Me.prototype.checkSubtype = function (t, e) {
        var r = ue(t, e);
        return r && this.error(r), r
      };
      var Ve = function (t, e, r) {
        this.type = t, this.input = e, this.labels = [], this.outputs = [];
        for (var n = 0, i = r; n < i.length; n += 1) {
          var a = i[n],
            o = a[0],
            s = a[1];
          this.labels.push(o), this.outputs.push(s);
        }
      };
  
      function Fe(t, e, r) {
        return t * (1 - r) + e * r
      }
      Ve.parse = function (t, e) {
        if (t.length - 1 < 4) return e.error("Expected at least 4 arguments, but found only " + (t.length - 1) + ".");
        if ((t.length - 1) % 2 != 0) return e.error("Expected an even number of arguments.");
        var r = e.parse(t[1], 1, $t);
        if (!r) return null;
        var n = [],
          i = null;
        e.expectedType && "value" !== e.expectedType.kind && (i = e.expectedType);
        for (var a = 1; a < t.length; a += 2) {
          var o = 1 === a ? -1 / 0 : t[a],
            s = t[a + 1],
            u = a,
            l = a + 1;
          if ("number" != typeof o) return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.', u);
          if (n.length && n[n.length - 1][0] >= o) return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.', u);
          var p = e.parse(s, l, i);
          if (!p) return null;
          i = i || p.type, n.push([o, p]);
        }
        return new Ve(i, r, n)
      }, Ve.prototype.evaluate = function (t) {
        var e = this.labels,
          r = this.outputs;
        if (1 === e.length) return r[0].evaluate(t);
        var n = this.input.evaluate(t);
        if (n <= e[0]) return r[0].evaluate(t);
        var i = e.length;
        return n >= e[i - 1] ? r[i - 1].evaluate(t) : r[Te(e, n)].evaluate(t)
      }, Ve.prototype.eachChild = function (t) {
        t(this.input);
        for (var e = 0, r = this.outputs; e < r.length; e += 1) {
          t(r[e]);
        }
      }, Ve.prototype.possibleOutputs = function () {
        var t;
        return (t = []).concat.apply(t, this.outputs.map(function (t) {
          return t.possibleOutputs()
        }))
      }, Ve.prototype.serialize = function () {
        for (var t = ["step", this.input.serialize()], e = 0; e < this.labels.length; e++) e > 0 && t.push(this.labels[e]), t.push(this.outputs[e].serialize());
        return t
      };
      var Oe = Object.freeze({
          number: Fe,
          color: function (t, e, r) {
            return new pe(Fe(t.r, e.r, r), Fe(t.g, e.g, r), Fe(t.b, e.b, r), Fe(t.a, e.a, r))
          },
          array: function (t, e, r) {
            return t.map(function (t, n) {
              return Fe(t, e[n], r)
            })
          }
        }),
        Le = .95047,
        De = 1,
        je = 1.08883,
        Ue = 4 / 29,
        Re = 6 / 29,
        qe = 3 * Re * Re,
        Ne = Re * Re * Re,
        Ke = Math.PI / 180,
        Ze = 180 / Math.PI;
  
      function Xe(t) {
        return t > Ne ? Math.pow(t, 1 / 3) : t / qe + Ue
      }
  
      function Ge(t) {
        return t > Re ? t * t * t : qe * (t - Ue)
      }
  
      function He(t) {
        return 255 * (t <= .0031308 ? 12.92 * t : 1.055 * Math.pow(t, 1 / 2.4) - .055)
      }
  
      function Je(t) {
        return (t /= 255) <= .04045 ? t / 12.92 : Math.pow((t + .055) / 1.055, 2.4)
      }
  
      function Ye(t) {
        var e = Je(t.r),
          r = Je(t.g),
          n = Je(t.b),
          i = Xe((.4124564 * e + .3575761 * r + .1804375 * n) / Le),
          a = Xe((.2126729 * e + .7151522 * r + .072175 * n) / De);
        return {
          l: 116 * a - 16,
          a: 500 * (i - a),
          b: 200 * (a - Xe((.0193339 * e + .119192 * r + .9503041 * n) / je)),
          alpha: t.a
        }
      }
  
      function $e(t) {
        var e = (t.l + 16) / 116,
          r = isNaN(t.a) ? e : e + t.a / 500,
          n = isNaN(t.b) ? e : e - t.b / 200;
        return e = De * Ge(e), r = Le * Ge(r), n = je * Ge(n), new pe(He(3.2404542 * r - 1.5371385 * e - .4985314 * n), He(-.969266 * r + 1.8760108 * e + .041556 * n), He(.0556434 * r - .2040259 * e + 1.0572252 * n), t.alpha)
      }
  
      function We(t, e, r) {
        var n = e - t;
        return t + r * (n > 180 || n < -180 ? n - 360 * Math.round(n / 360) : n)
      }
      var Qe = {
          forward: Ye,
          reverse: $e,
          interpolate: function (t, e, r) {
            return {
              l: Fe(t.l, e.l, r),
              a: Fe(t.a, e.a, r),
              b: Fe(t.b, e.b, r),
              alpha: Fe(t.alpha, e.alpha, r)
            }
          }
        },
        tr = {
          forward: function (t) {
            var e = Ye(t),
              r = e.l,
              n = e.a,
              i = e.b,
              a = Math.atan2(i, n) * Ze;
            return {
              h: a < 0 ? a + 360 : a,
              c: Math.sqrt(n * n + i * i),
              l: r,
              alpha: t.a
            }
          },
          reverse: function (t) {
            var e = t.h * Ke,
              r = t.c;
            return $e({
              l: t.l,
              a: Math.cos(e) * r,
              b: Math.sin(e) * r,
              alpha: t.alpha
            })
          },
          interpolate: function (t, e, r) {
            return {
              h: We(t.h, e.h, r),
              c: Fe(t.c, e.c, r),
              l: Fe(t.l, e.l, r),
              alpha: Fe(t.alpha, e.alpha, r)
            }
          }
        },
        er = Object.freeze({
          lab: Qe,
          hcl: tr
        }),
        rr = function (t, e, r, n, i) {
          this.type = t, this.operator = e, this.interpolation = r, this.input = n, this.labels = [], this.outputs = [];
          for (var a = 0, o = i; a < o.length; a += 1) {
            var s = o[a],
              u = s[0],
              l = s[1];
            this.labels.push(u), this.outputs.push(l);
          }
        };
  
      function nr(t, e, r, n) {
        var i = n - r,
          a = t - r;
        return 0 === i ? 0 : 1 === e ? a / i : (Math.pow(e, a) - 1) / (Math.pow(e, i) - 1)
      }
      rr.interpolationFactor = function (t, e, r, n) {
        var i = 0;
        if ("exponential" === t.name) i = nr(e, t.base, r, n);
        else if ("linear" === t.name) i = nr(e, 1, r, n);
        else if ("cubic-bezier" === t.name) {
          var a = t.controlPoints;
          i = new u(a[0], a[1], a[2], a[3]).solve(nr(e, 1, r, n));
        }
        return i
      }, rr.parse = function (t, e) {
        var r = t[0],
          n = t[1],
          i = t[2],
          a = t.slice(3);
        if (!Array.isArray(n) || 0 === n.length) return e.error("Expected an interpolation type expression.", 1);
        if ("linear" === n[0]) n = {
          name: "linear"
        };
        else if ("exponential" === n[0]) {
          var o = n[1];
          if ("number" != typeof o) return e.error("Exponential interpolation requires a numeric base.", 1, 1);
          n = {
            name: "exponential",
            base: o
          };
        } else {
          if ("cubic-bezier" !== n[0]) return e.error("Unknown interpolation type " + String(n[0]), 1, 0);
          var s = n.slice(1);
          if (4 !== s.length || s.some(function (t) {
              return "number" != typeof t || t < 0 || t > 1
            })) return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.", 1);
          n = {
            name: "cubic-bezier",
            controlPoints: s
          };
        }
        if (t.length - 1 < 4) return e.error("Expected at least 4 arguments, but found only " + (t.length - 1) + ".");
        if ((t.length - 1) % 2 != 0) return e.error("Expected an even number of arguments.");
        if (!(i = e.parse(i, 2, $t))) return null;
        var u = [],
          l = null;
        "interpolate-hcl" === r || "interpolate-lab" === r ? l = te : e.expectedType && "value" !== e.expectedType.kind && (l = e.expectedType);
        for (var p = 0; p < a.length; p += 2) {
          var c = a[p],
            h = a[p + 1],
            f = p + 3,
            y = p + 4;
          if ("number" != typeof c) return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.', f);
          if (u.length && u[u.length - 1][0] >= c) return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.', f);
          var d = e.parse(h, y, l);
          if (!d) return null;
          l = l || d.type, u.push([c, d]);
        }
        return "number" === l.kind || "color" === l.kind || "array" === l.kind && "number" === l.itemType.kind && "number" == typeof l.N ? new rr(l, r, n, i, u) : e.error("Type " + oe(l) + " is not interpolatable.")
      }, rr.prototype.evaluate = function (t) {
        var e = this.labels,
          r = this.outputs;
        if (1 === e.length) return r[0].evaluate(t);
        var n = this.input.evaluate(t);
        if (n <= e[0]) return r[0].evaluate(t);
        var i = e.length;
        if (n >= e[i - 1]) return r[i - 1].evaluate(t);
        var a = Te(e, n),
          o = e[a],
          s = e[a + 1],
          u = rr.interpolationFactor(this.interpolation, n, o, s),
          l = r[a].evaluate(t),
          p = r[a + 1].evaluate(t);
        return "interpolate" === this.operator ? Oe[this.type.kind.toLowerCase()](l, p, u) : "interpolate-hcl" === this.operator ? tr.reverse(tr.interpolate(tr.forward(l), tr.forward(p), u)) : Qe.reverse(Qe.interpolate(Qe.forward(l), Qe.forward(p), u))
      }, rr.prototype.eachChild = function (t) {
        t(this.input);
        for (var e = 0, r = this.outputs; e < r.length; e += 1) {
          t(r[e]);
        }
      }, rr.prototype.possibleOutputs = function () {
        var t;
        return (t = []).concat.apply(t, this.outputs.map(function (t) {
          return t.possibleOutputs()
        }))
      }, rr.prototype.serialize = function () {
        var t;
        t = "linear" === this.interpolation.name ? ["linear"] : "exponential" === this.interpolation.name ? 1 === this.interpolation.base ? ["linear"] : ["exponential", this.interpolation.base] : ["cubic-bezier"].concat(this.interpolation.controlPoints);
        for (var e = [this.operator, t, this.input.serialize()], r = 0; r < this.labels.length; r++) e.push(this.labels[r], this.outputs[r].serialize());
        return e
      };
      var ir = function (t, e) {
        this.type = t, this.args = e;
      };
      ir.parse = function (t, e) {
        if (t.length < 2) return e.error("Expectected at least one argument.");
        var r = null,
          n = e.expectedType;
        n && "value" !== n.kind && (r = n);
        for (var i = [], a = 0, o = t.slice(1); a < o.length; a += 1) {
          var s = o[a],
            u = e.parse(s, 1 + i.length, r, void 0, {
              typeAnnotation: "omit"
            });
          if (!u) return null;
          r = r || u.type, i.push(u);
        }
        var l = n && i.some(function (t) {
          return ue(n, t.type)
        });
        return new ir(l ? re : r, i)
      }, ir.prototype.evaluate = function (t) {
        for (var e = null, r = 0, n = this.args; r < n.length; r += 1) {
          if (null !== (e = n[r].evaluate(t))) break
        }
        return e
      }, ir.prototype.eachChild = function (t) {
        this.args.forEach(t);
      }, ir.prototype.possibleOutputs = function () {
        var t;
        return (t = []).concat.apply(t, this.args.map(function (t) {
          return t.possibleOutputs()
        }))
      }, ir.prototype.serialize = function () {
        var t = ["coalesce"];
        return this.eachChild(function (e) {
          t.push(e.serialize());
        }), t
      };
      var ar = function (t, e) {
        this.type = e.type, this.bindings = [].concat(t), this.result = e;
      };
      ar.prototype.evaluate = function (t) {
        return this.result.evaluate(t)
      }, ar.prototype.eachChild = function (t) {
        for (var e = 0, r = this.bindings; e < r.length; e += 1) {
          t(r[e][1]);
        }
        t(this.result);
      }, ar.parse = function (t, e) {
        if (t.length < 4) return e.error("Expected at least 3 arguments, but found " + (t.length - 1) + " instead.");
        for (var r = [], n = 1; n < t.length - 1; n += 2) {
          var i = t[n];
          if ("string" != typeof i) return e.error("Expected string, but found " + typeof i + " instead.", n);
          if (/[^a-zA-Z0-9_]/.test(i)) return e.error("Variable names must contain only alphanumeric characters or '_'.", n);
          var a = e.parse(t[n + 1], n + 1);
          if (!a) return null;
          r.push([i, a]);
        }
        var o = e.parse(t[t.length - 1], t.length - 1, e.expectedType, r);
        return o ? new ar(r, o) : null
      }, ar.prototype.possibleOutputs = function () {
        return this.result.possibleOutputs()
      }, ar.prototype.serialize = function () {
        for (var t = ["let"], e = 0, r = this.bindings; e < r.length; e += 1) {
          var n = r[e],
            i = n[0],
            a = n[1];
          t.push(i, a.serialize());
        }
        return t.push(this.result.serialize()), t
      };
      var or = function (t, e, r) {
        this.type = t, this.index = e, this.input = r;
      };
      or.parse = function (t, e) {
        if (3 !== t.length) return e.error("Expected 2 arguments, but found " + (t.length - 1) + " instead.");
        var r = e.parse(t[1], 1, $t),
          n = e.parse(t[2], 2, ae(e.expectedType || re));
        if (!r || !n) return null;
        var i = n.type;
        return new or(i.itemType, r, n)
      }, or.prototype.evaluate = function (t) {
        var e = this.index.evaluate(t),
          r = this.input.evaluate(t);
        if (e < 0) throw new ge("Array index out of bounds: " + e + " < 0.");
        if (e >= r.length) throw new ge("Array index out of bounds: " + e + " > " + (r.length - 1) + ".");
        if (e !== Math.floor(e)) throw new ge("Array index must be an integer, but found " + e + " instead.");
        return r[e]
      }, or.prototype.eachChild = function (t) {
        t(this.index), t(this.input);
      }, or.prototype.possibleOutputs = function () {
        return [void 0]
      }, or.prototype.serialize = function () {
        return ["at", this.index.serialize(), this.input.serialize()]
      };
      var sr = function (t, e, r, n, i, a) {
        this.inputType = t, this.type = e, this.input = r, this.cases = n, this.outputs = i, this.otherwise = a;
      };
      sr.parse = function (t, e) {
        if (t.length < 5) return e.error("Expected at least 4 arguments, but found only " + (t.length - 1) + ".");
        if (t.length % 2 != 1) return e.error("Expected an even number of arguments.");
        var r, n;
        e.expectedType && "value" !== e.expectedType.kind && (n = e.expectedType);
        for (var i = {}, a = [], o = 2; o < t.length - 1; o += 2) {
          var s = t[o],
            u = t[o + 1];
          Array.isArray(s) || (s = [s]);
          var l = e.concat(o);
          if (0 === s.length) return l.error("Expected at least one branch label.");
          for (var p = 0, c = s; p < c.length; p += 1) {
            var h = c[p];
            if ("number" != typeof h && "string" != typeof h) return l.error("Branch labels must be numbers or strings.");
            if ("number" == typeof h && Math.abs(h) > Number.MAX_SAFE_INTEGER) return l.error("Branch labels must be integers no larger than " + Number.MAX_SAFE_INTEGER + ".");
            if ("number" == typeof h && Math.floor(h) !== h) return l.error("Numeric branch labels must be integer values.");
            if (r) {
              if (l.checkSubtype(r, de(h))) return null
            } else r = de(h);
            if (void 0 !== i[String(h)]) return l.error("Branch labels must be unique.");
            i[String(h)] = a.length;
          }
          var f = e.parse(u, o, n);
          if (!f) return null;
          n = n || f.type, a.push(f);
        }
        var y = e.parse(t[1], 1, re);
        if (!y) return null;
        var d = e.parse(t[t.length - 1], t.length - 1, n);
        return d ? "value" !== y.type.kind && e.concat(1).checkSubtype(r, y.type) ? null : new sr(r, n, y, i, a, d) : null
      }, sr.prototype.evaluate = function (t) {
        var e = this.input.evaluate(t);
        return (de(e) === this.inputType && this.outputs[this.cases[e]] || this.otherwise).evaluate(t)
      }, sr.prototype.eachChild = function (t) {
        t(this.input), this.outputs.forEach(t), t(this.otherwise);
      }, sr.prototype.possibleOutputs = function () {
        var t;
        return (t = []).concat.apply(t, this.outputs.map(function (t) {
          return t.possibleOutputs()
        })).concat(this.otherwise.possibleOutputs())
      }, sr.prototype.serialize = function () {
        for (var t = this, e = ["match", this.input.serialize()], r = [], n = {}, i = 0, a = Object.keys(this.cases).sort(); i < a.length; i += 1) {
          var o = a[i];
          void 0 === (c = n[this.cases[o]]) ? (n[this.cases[o]] = r.length, r.push([this.cases[o],
            [o]
          ])) : r[c][1].push(o);
        }
        for (var s = function (e) {
            return "number" === t.inputType.kind ? Number(e) : e
          }, u = 0, l = r; u < l.length; u += 1) {
          var p = l[u],
            c = p[0],
            h = p[1];
          1 === h.length ? e.push(s(h[0])) : e.push(h.map(s)), e.push(this.outputs[outputIndex$1].serialize());
        }
        return e.push(this.otherwise.serialize()), e
      };
      var ur = function (t, e, r) {
        this.type = t, this.branches = e, this.otherwise = r;
      };
  
      function lr(t, e) {
        return "==" === t || "!=" === t ? "boolean" === e.kind || "string" === e.kind || "number" === e.kind || "null" === e.kind || "value" === e.kind : "string" === e.kind || "number" === e.kind || "value" === e.kind
      }
  
      function pr(t, e, r, n) {
        return 0 === n.compare(e, r)
      }
  
      function cr(t, e, r) {
        var n = "==" !== t && "!=" !== t;
        return function () {
          function i(t, e, r) {
            this.type = Qt, this.lhs = t, this.rhs = e, this.collator = r, this.hasUntypedArgument = "value" === t.type.kind || "value" === e.type.kind;
          }
          return i.parse = function (t, e) {
            if (3 !== t.length && 4 !== t.length) return e.error("Expected two or three arguments.");
            var r = t[0],
              a = e.parse(t[1], 1, re);
            if (!a) return null;
            if (!lr(r, a.type)) return e.concat(1).error('"' + r + "\" comparisons are not supported for type '" + oe(a.type) + "'.");
            var o = e.parse(t[2], 2, re);
            if (!o) return null;
            if (!lr(r, o.type)) return e.concat(2).error('"' + r + "\" comparisons are not supported for type '" + oe(o.type) + "'.");
            if (a.type.kind !== o.type.kind && "value" !== a.type.kind && "value" !== o.type.kind) return e.error("Cannot compare types '" + oe(a.type) + "' and '" + oe(o.type) + "'.");
            n && ("value" === a.type.kind && "value" !== o.type.kind ? a = new be(o.type, [a]) : "value" !== a.type.kind && "value" === o.type.kind && (o = new be(a.type, [o])));
            var s = null;
            if (4 === t.length) {
              if ("string" !== a.type.kind && "string" !== o.type.kind && "value" !== a.type.kind && "value" !== o.type.kind) return e.error("Cannot use collator to compare non-string types.");
              if (!(s = e.parse(t[3], 3, ne))) return null
            }
            return new i(a, o, s)
          }, i.prototype.evaluate = function (i) {
            var a = this.lhs.evaluate(i),
              o = this.rhs.evaluate(i);
            if (n && this.hasUntypedArgument) {
              var s = de(a),
                u = de(o);
              if (s.kind !== u.kind || "string" !== s.kind && "number" !== s.kind) throw new ge('Expected arguments for "' + t + '" to be (string, string) or (number, number), but found (' + s.kind + ", " + u.kind + ") instead.")
            }
            if (this.collator && !n && this.hasUntypedArgument) {
              var l = de(a),
                p = de(o);
              if ("string" !== l.kind || "string" !== p.kind) return e(i, a, o)
            }
            return this.collator ? r(i, a, o, this.collator.evaluate(i)) : e(i, a, o)
          }, i.prototype.eachChild = function (t) {
            t(this.lhs), t(this.rhs), this.collator && t(this.collator);
          }, i.prototype.possibleOutputs = function () {
            return [!0, !1]
          }, i.prototype.serialize = function () {
            var e = [t];
            return this.eachChild(function (t) {
              e.push(t.serialize());
            }), e
          }, i
        }()
      }
      ur.parse = function (t, e) {
        if (t.length < 4) return e.error("Expected at least 3 arguments, but found only " + (t.length - 1) + ".");
        if (t.length % 2 != 0) return e.error("Expected an odd number of arguments.");
        var r;
        e.expectedType && "value" !== e.expectedType.kind && (r = e.expectedType);
        for (var n = [], i = 1; i < t.length - 1; i += 2) {
          var a = e.parse(t[i], i, Qt);
          if (!a) return null;
          var o = e.parse(t[i + 1], i + 1, r);
          if (!o) return null;
          n.push([a, o]), r = r || o.type;
        }
        var s = e.parse(t[t.length - 1], t.length - 1, r);
        return s ? new ur(r, n, s) : null
      }, ur.prototype.evaluate = function (t) {
        for (var e = 0, r = this.branches; e < r.length; e += 1) {
          var n = r[e],
            i = n[0],
            a = n[1];
          if (i.evaluate(t)) return a.evaluate(t)
        }
        return this.otherwise.evaluate(t)
      }, ur.prototype.eachChild = function (t) {
        for (var e = 0, r = this.branches; e < r.length; e += 1) {
          var n = r[e],
            i = n[0],
            a = n[1];
          t(i), t(a);
        }
        t(this.otherwise);
      }, ur.prototype.possibleOutputs = function () {
        var t;
        return (t = []).concat.apply(t, this.branches.map(function (t) {
          t[0];
          return t[1].possibleOutputs()
        })).concat(this.otherwise.possibleOutputs())
      }, ur.prototype.serialize = function () {
        var t = ["case"];
        return this.eachChild(function (e) {
          t.push(e.serialize());
        }), t
      };
      var hr = cr("==", function (t, e, r) {
          return e === r
        }, pr),
        fr = cr("!=", function (t, e, r) {
          return e !== r
        }, function (t, e, r, n) {
          return !pr(0, e, r, n)
        }),
        yr = cr("<", function (t, e, r) {
          return e < r
        }, function (t, e, r, n) {
          return n.compare(e, r) < 0
        }),
        dr = cr(">", function (t, e, r) {
          return e > r
        }, function (t, e, r, n) {
          return n.compare(e, r) > 0
        }),
        mr = cr("<=", function (t, e, r) {
          return e <= r
        }, function (t, e, r, n) {
          return n.compare(e, r) <= 0
        }),
        vr = cr(">=", function (t, e, r) {
          return e >= r
        }, function (t, e, r, n) {
          return n.compare(e, r) >= 0
        }),
        gr = function (t, e, r, n, i) {
          this.type = Wt, this.number = t, this.locale = e, this.currency = r, this.minFractionDigits = n, this.maxFractionDigits = i;
        };
      gr.parse = function (t, e) {
        if (3 !== t.length) return e.error("Expected two arguments.");
        var r = e.parse(t[1], 1, $t);
        if (!r) return null;
        var n = t[2];
        if ("object" != typeof n || Array.isArray(n)) return e.error("NumberFormat options argument must be an object.");
        var i = null;
        if (n.locale && !(i = e.parse(n.locale, 1, Wt))) return null;
        var a = null;
        if (n.currency && !(a = e.parse(n.currency, 1, Wt))) return null;
        var o = null;
        if (n["min-fraction-digits"] && !(o = e.parse(n["min-fraction-digits"], 1, $t))) return null;
        var s = null;
        return n["max-fraction-digits"] && !(s = e.parse(n["max-fraction-digits"], 1, $t)) ? null : new gr(r, i, a, o, s)
      }, gr.prototype.evaluate = function (t) {
        return new Intl.NumberFormat(this.locale ? this.locale.evaluate(t) : [], {
          style: this.currency ? "currency" : "decimal",
          currency: this.currency ? this.currency.evaluate(t) : void 0,
          minimumFractionDigits: this.minFractionDigits ? this.minFractionDigits.evaluate(t) : void 0,
          maximumFractionDigits: this.maxFractionDigits ? this.maxFractionDigits.evaluate(t) : void 0
        }).format(this.number.evaluate(t))
      }, gr.prototype.eachChild = function (t) {
        t(this.number), this.locale && t(this.locale), this.currency && t(this.currency), this.minFractionDigits && t(this.minFractionDigits), this.maxFractionDigits && t(this.maxFractionDigits);
      }, gr.prototype.possibleOutputs = function () {
        return [void 0]
      }, gr.prototype.serialize = function () {
        var t = {};
        return this.locale && (t.locale = this.locale.serialize()), this.currency && (t.currency = this.currency.serialize()), this.minFractionDigits && (t["min-fraction-digits"] = this.minFractionDigits.serialize()), this.maxFractionDigits && (t["max-fraction-digits"] = this.maxFractionDigits.serialize()), ["number-format", this.number.serialize(), t]
      };
      var xr = function (t) {
        this.type = $t, this.input = t;
      };
      xr.parse = function (t, e) {
        if (2 !== t.length) return e.error("Expected 1 argument, but found " + (t.length - 1) + " instead.");
        var r = e.parse(t[1], 1);
        return r ? "array" !== r.type.kind && "string" !== r.type.kind && "value" !== r.type.kind ? e.error("Expected argument of type string or array, but found " + oe(r.type) + " instead.") : new xr(r) : null
      }, xr.prototype.evaluate = function (t) {
        var e = this.input.evaluate(t);
        if ("string" == typeof e) return e.length;
        if (Array.isArray(e)) return e.length;
        throw new ge("Expected value to be of type string or array, but found " + oe(de(e)) + " instead.")
      }, xr.prototype.eachChild = function (t) {
        t(this.input);
      }, xr.prototype.possibleOutputs = function () {
        return [void 0]
      }, xr.prototype.serialize = function () {
        var t = ["length"];
        return this.eachChild(function (e) {
          t.push(e.serialize());
        }), t
      };
      var br = {
        "==": hr,
        "!=": fr,
        ">": dr,
        "<": yr,
        ">=": vr,
        "<=": mr,
        array: be,
        at: or,
        boolean: be,
        case: ur,
        coalesce: ir,
        collator: Ie,
        format: _e,
        interpolate: rr,
        "interpolate-hcl": rr,
        "interpolate-lab": rr,
        length: xr,
        let: ar,
        literal: ve,
        match: sr,
        number: be,
        "number-format": gr,
        object: be,
        step: Ve,
        string: be,
        "to-boolean": Ae,
        "to-color": Ae,
        "to-number": Ae,
        "to-string": Ae,
        var: Ee
      };
  
      function _r(t, e) {
        var r = e[0],
          n = e[1],
          i = e[2],
          a = e[3];
        r = r.evaluate(t), n = n.evaluate(t), i = i.evaluate(t);
        var o = a ? a.evaluate(t) : 1,
          s = ye(r, n, i, o);
        if (s) throw new ge(s);
        return new pe(r / 255 * o, n / 255 * o, i / 255 * o, o)
      }
  
      function wr(t, e) {
        return t in e
      }
  
      function Ar(t, e) {
        var r = e[t];
        return void 0 === r ? null : r
      }
  
      function kr(t) {
        return {
          type: t
        }
      }
  
      function Sr(t) {
        return {
          result: "success",
          value: t
        }
      }
  
      function zr(t) {
        return {
          result: "error",
          value: t
        }
      }
  
      function Ir(t) {
        return "data-driven" === t["property-type"] || "cross-faded-data-driven" === t["property-type"]
      }
  
      function Cr(t) {
        return !!t.expression && t.expression.parameters.indexOf("zoom") > -1
      }
  
      function Br(t) {
        return !!t.expression && t.expression.interpolated
      }
  
      function Pr(t) {
        return t instanceof Number ? "number" : t instanceof String ? "string" : t instanceof Boolean ? "boolean" : Array.isArray(t) ? "array" : null === t ? "null" : typeof t
      }
  
      function Er(t) {
        return "object" == typeof t && null !== t && !Array.isArray(t)
      }
  
      function Mr(t) {
        return t
      }
  
      function Tr(t, e, r) {
        return void 0 !== t ? t : void 0 !== e ? e : void 0 !== r ? r : void 0
      }
  
      function Vr(t, e, r, n, i) {
        return Tr(typeof r === i ? n[r] : void 0, t.default, e.default)
      }
  
      function Fr(t, e, r) {
        if ("number" !== Pr(r)) return Tr(t.default, e.default);
        var n = t.stops.length;
        if (1 === n) return t.stops[0][1];
        if (r <= t.stops[0][0]) return t.stops[0][1];
        if (r >= t.stops[n - 1][0]) return t.stops[n - 1][1];
        var i = Te(t.stops.map(function (t) {
          return t[0]
        }), r);
        return t.stops[i][1]
      }
  
      function Or(t, e, r) {
        var n = void 0 !== t.base ? t.base : 1;
        if ("number" !== Pr(r)) return Tr(t.default, e.default);
        var i = t.stops.length;
        if (1 === i) return t.stops[0][1];
        if (r <= t.stops[0][0]) return t.stops[0][1];
        if (r >= t.stops[i - 1][0]) return t.stops[i - 1][1];
        var a = Te(t.stops.map(function (t) {
            return t[0]
          }), r),
          o = function (t, e, r, n) {
            var i = n - r,
              a = t - r;
            return 0 === i ? 0 : 1 === e ? a / i : (Math.pow(e, a) - 1) / (Math.pow(e, i) - 1)
          }(r, n, t.stops[a][0], t.stops[a + 1][0]),
          s = t.stops[a][1],
          u = t.stops[a + 1][1],
          l = Oe[e.type] || Mr;
        if (t.colorSpace && "rgb" !== t.colorSpace) {
          var p = er[t.colorSpace];
          l = function (t, e) {
            return p.reverse(p.interpolate(p.forward(t), p.forward(e), o))
          };
        }
        return "function" == typeof s.evaluate ? {
          evaluate: function () {
            for (var t = [], e = arguments.length; e--;) t[e] = arguments[e];
            var r = s.evaluate.apply(void 0, t),
              n = u.evaluate.apply(void 0, t);
            if (void 0 !== r && void 0 !== n) return l(r, n, o)
          }
        } : l(s, u, o)
      }
  
      function Lr(t, e, r) {
        return "color" === e.type ? r = pe.parse(r) : "formatted" === e.type ? r = fe.fromString(r.toString()) : Pr(r) === e.type || "enum" === e.type && e.values[r] || (r = void 0), Tr(r, t.default, e.default)
      }
      ze.register(br, {
        error: [{
            kind: "error"
          },
          [Wt],
          function (t, e) {
            var r = e[0];
            throw new ge(r.evaluate(t))
          }
        ],
        typeof: [Wt, [re], function (t, e) {
          return oe(de(e[0].evaluate(t)))
        }],
        "to-rgba": [ae($t, 4), [te], function (t, e) {
          return e[0].evaluate(t).toArray()
        }],
        rgb: [te, [$t, $t, $t], _r],
        rgba: [te, [$t, $t, $t, $t], _r],
        has: {
          type: Qt,
          overloads: [
            [
              [Wt],
              function (t, e) {
                return wr(e[0].evaluate(t), t.properties())
              }
            ],
            [
              [Wt, ee],
              function (t, e) {
                var r = e[0],
                  n = e[1];
                return wr(r.evaluate(t), n.evaluate(t))
              }
            ]
          ]
        },
        get: {
          type: re,
          overloads: [
            [
              [Wt],
              function (t, e) {
                return Ar(e[0].evaluate(t), t.properties())
              }
            ],
            [
              [Wt, ee],
              function (t, e) {
                var r = e[0],
                  n = e[1];
                return Ar(r.evaluate(t), n.evaluate(t))
              }
            ]
          ]
        },
        "feature-state": [re, [Wt], function (t, e) {
          return Ar(e[0].evaluate(t), t.featureState || {})
        }],
        properties: [ee, [], function (t) {
          return t.properties()
        }],
        "geometry-type": [Wt, [], function (t) {
          return t.geometryType()
        }],
        id: [re, [], function (t) {
          return t.id()
        }],
        zoom: [$t, [], function (t) {
          return t.globals.zoom
        }],
        "heatmap-density": [$t, [], function (t) {
          return t.globals.heatmapDensity || 0
        }],
        "line-progress": [$t, [], function (t) {
          return t.globals.lineProgress || 0
        }],
        accumulated: [re, [], function (t) {
          return void 0 === t.globals.accumulated ? null : t.globals.accumulated
        }],
        "+": [$t, kr($t), function (t, e) {
          for (var r = 0, n = 0, i = e; n < i.length; n += 1) {
            r += i[n].evaluate(t);
          }
          return r
        }],
        "*": [$t, kr($t), function (t, e) {
          for (var r = 1, n = 0, i = e; n < i.length; n += 1) {
            r *= i[n].evaluate(t);
          }
          return r
        }],
        "-": {
          type: $t,
          overloads: [
            [
              [$t, $t],
              function (t, e) {
                var r = e[0],
                  n = e[1];
                return r.evaluate(t) - n.evaluate(t)
              }
            ],
            [
              [$t],
              function (t, e) {
                return -e[0].evaluate(t)
              }
            ]
          ]
        },
        "/": [$t, [$t, $t], function (t, e) {
          var r = e[0],
            n = e[1];
          return r.evaluate(t) / n.evaluate(t)
        }],
        "%": [$t, [$t, $t], function (t, e) {
          var r = e[0],
            n = e[1];
          return r.evaluate(t) % n.evaluate(t)
        }],
        ln2: [$t, [], function () {
          return Math.LN2
        }],
        pi: [$t, [], function () {
          return Math.PI
        }],
        e: [$t, [], function () {
          return Math.E
        }],
        "^": [$t, [$t, $t], function (t, e) {
          var r = e[0],
            n = e[1];
          return Math.pow(r.evaluate(t), n.evaluate(t))
        }],
        sqrt: [$t, [$t], function (t, e) {
          var r = e[0];
          return Math.sqrt(r.evaluate(t))
        }],
        log10: [$t, [$t], function (t, e) {
          var r = e[0];
          return Math.log(r.evaluate(t)) / Math.LN10
        }],
        ln: [$t, [$t], function (t, e) {
          var r = e[0];
          return Math.log(r.evaluate(t))
        }],
        log2: [$t, [$t], function (t, e) {
          var r = e[0];
          return Math.log(r.evaluate(t)) / Math.LN2
        }],
        sin: [$t, [$t], function (t, e) {
          var r = e[0];
          return Math.sin(r.evaluate(t))
        }],
        cos: [$t, [$t], function (t, e) {
          var r = e[0];
          return Math.cos(r.evaluate(t))
        }],
        tan: [$t, [$t], function (t, e) {
          var r = e[0];
          return Math.tan(r.evaluate(t))
        }],
        asin: [$t, [$t], function (t, e) {
          var r = e[0];
          return Math.asin(r.evaluate(t))
        }],
        acos: [$t, [$t], function (t, e) {
          var r = e[0];
          return Math.acos(r.evaluate(t))
        }],
        atan: [$t, [$t], function (t, e) {
          var r = e[0];
          return Math.atan(r.evaluate(t))
        }],
        min: [$t, kr($t), function (t, e) {
          return Math.min.apply(Math, e.map(function (e) {
            return e.evaluate(t)
          }))
        }],
        max: [$t, kr($t), function (t, e) {
          return Math.max.apply(Math, e.map(function (e) {
            return e.evaluate(t)
          }))
        }],
        abs: [$t, [$t], function (t, e) {
          var r = e[0];
          return Math.abs(r.evaluate(t))
        }],
        round: [$t, [$t], function (t, e) {
          var r = e[0].evaluate(t);
          return r < 0 ? -Math.round(-r) : Math.round(r)
        }],
        floor: [$t, [$t], function (t, e) {
          var r = e[0];
          return Math.floor(r.evaluate(t))
        }],
        ceil: [$t, [$t], function (t, e) {
          var r = e[0];
          return Math.ceil(r.evaluate(t))
        }],
        "filter-==": [Qt, [Wt, re], function (t, e) {
          var r = e[0],
            n = e[1];
          return t.properties()[r.value] === n.value
        }],
        "filter-id-==": [Qt, [re], function (t, e) {
          var r = e[0];
          return t.id() === r.value
        }],
        "filter-type-==": [Qt, [Wt], function (t, e) {
          var r = e[0];
          return t.geometryType() === r.value
        }],
        "filter-<": [Qt, [Wt, re], function (t, e) {
          var r = e[0],
            n = e[1],
            i = t.properties()[r.value],
            a = n.value;
          return typeof i == typeof a && i < a
        }],
        "filter-id-<": [Qt, [re], function (t, e) {
          var r = e[0],
            n = t.id(),
            i = r.value;
          return typeof n == typeof i && n < i
        }],
        "filter->": [Qt, [Wt, re], function (t, e) {
          var r = e[0],
            n = e[1],
            i = t.properties()[r.value],
            a = n.value;
          return typeof i == typeof a && i > a
        }],
        "filter-id->": [Qt, [re], function (t, e) {
          var r = e[0],
            n = t.id(),
            i = r.value;
          return typeof n == typeof i && n > i
        }],
        "filter-<=": [Qt, [Wt, re], function (t, e) {
          var r = e[0],
            n = e[1],
            i = t.properties()[r.value],
            a = n.value;
          return typeof i == typeof a && i <= a
        }],
        "filter-id-<=": [Qt, [re], function (t, e) {
          var r = e[0],
            n = t.id(),
            i = r.value;
          return typeof n == typeof i && n <= i
        }],
        "filter->=": [Qt, [Wt, re], function (t, e) {
          var r = e[0],
            n = e[1],
            i = t.properties()[r.value],
            a = n.value;
          return typeof i == typeof a && i >= a
        }],
        "filter-id->=": [Qt, [re], function (t, e) {
          var r = e[0],
            n = t.id(),
            i = r.value;
          return typeof n == typeof i && n >= i
        }],
        "filter-has": [Qt, [re], function (t, e) {
          return e[0].value in t.properties()
        }],
        "filter-has-id": [Qt, [], function (t) {
          return null !== t.id()
        }],
        "filter-type-in": [Qt, [ae(Wt)], function (t, e) {
          return e[0].value.indexOf(t.geometryType()) >= 0
        }],
        "filter-id-in": [Qt, [ae(re)], function (t, e) {
          return e[0].value.indexOf(t.id()) >= 0
        }],
        "filter-in-small": [Qt, [Wt, ae(re)], function (t, e) {
          var r = e[0];
          return e[1].value.indexOf(t.properties()[r.value]) >= 0
        }],
        "filter-in-large": [Qt, [Wt, ae(re)], function (t, e) {
          var r = e[0],
            n = e[1];
          return function (t, e, r, n) {
            for (; r <= n;) {
              var i = r + n >> 1;
              if (e[i] === t) return !0;
              e[i] > t ? n = i - 1 : r = i + 1;
            }
            return !1
          }(t.properties()[r.value], n.value, 0, n.value.length - 1)
        }],
        all: {
          type: Qt,
          overloads: [
            [
              [Qt, Qt],
              function (t, e) {
                var r = e[0],
                  n = e[1];
                return r.evaluate(t) && n.evaluate(t)
              }
            ],
            [kr(Qt), function (t, e) {
              for (var r = 0, n = e; r < n.length; r += 1) {
                if (!n[r].evaluate(t)) return !1
              }
              return !0
            }]
          ]
        },
        any: {
          type: Qt,
          overloads: [
            [
              [Qt, Qt],
              function (t, e) {
                var r = e[0],
                  n = e[1];
                return r.evaluate(t) || n.evaluate(t)
              }
            ],
            [kr(Qt), function (t, e) {
              for (var r = 0, n = e; r < n.length; r += 1) {
                if (n[r].evaluate(t)) return !0
              }
              return !1
            }]
          ]
        },
        "!": [Qt, [Qt], function (t, e) {
          return !e[0].evaluate(t)
        }],
        "is-supported-script": [Qt, [Wt], function (t, e) {
          var r = e[0],
            n = t.globals && t.globals.isSupportedScript;
          return !n || n(r.evaluate(t))
        }],
        upcase: [Wt, [Wt], function (t, e) {
          return e[0].evaluate(t).toUpperCase()
        }],
        downcase: [Wt, [Wt], function (t, e) {
          return e[0].evaluate(t).toLowerCase()
        }],
        concat: [Wt, kr(re), function (t, e) {
          return e.map(function (e) {
            return me(e.evaluate(t))
          }).join("")
        }],
        "resolved-locale": [Wt, [ne], function (t, e) {
          return e[0].evaluate(t).resolvedLocale()
        }]
      });
      var Dr = function (t, e) {
        this.expression = t, this._warningHistory = {}, this._evaluator = new Se, this._defaultValue = e ? function (t) {
          return "color" === t.type && Er(t.default) ? new pe(0, 0, 0, 0) : "color" === t.type ? pe.parse(t.default) || null : void 0 === t.default ? null : t.default
        }(e) : null, this._enumValues = e && "enum" === e.type ? e.values : null;
      };
  
      function jr(t) {
        return Array.isArray(t) && t.length > 0 && "string" == typeof t[0] && t[0] in br
      }
  
      function Ur(t, e) {
        var r = new Me(br, [], e ? function (t) {
            var e = {
              color: te,
              string: Wt,
              number: $t,
              enum: Wt,
              boolean: Qt,
              formatted: ie
            };
            if ("array" === t.type) return ae(e[t.value] || re, t.length);
            return e[t.type]
          }(e) : void 0),
          n = r.parse(t, void 0, void 0, void 0, e && "string" === e.type ? {
            typeAnnotation: "coerce"
          } : void 0);
        return n ? Sr(new Dr(n, e)) : zr(r.errors)
      }
      Dr.prototype.evaluateWithoutErrorHandling = function (t, e, r, n) {
        return this._evaluator.globals = t, this._evaluator.feature = e, this._evaluator.featureState = r, this._evaluator.formattedSection = n, this.expression.evaluate(this._evaluator)
      }, Dr.prototype.evaluate = function (t, e, r, n) {
        this._evaluator.globals = t, this._evaluator.feature = e || null, this._evaluator.featureState = r || null, this._evaluator.formattedSection = n || null;
        try {
          var i = this.expression.evaluate(this._evaluator);
          if (null == i) return this._defaultValue;
          if (this._enumValues && !(i in this._enumValues)) throw new ge("Expected value to be one of " + Object.keys(this._enumValues).map(function (t) {
            return JSON.stringify(t)
          }).join(", ") + ", but found " + JSON.stringify(i) + " instead.");
          return i
        } catch (t) {
          return this._warningHistory[t.message] || (this._warningHistory[t.message] = !0, "undefined" != typeof console && console.warn(t.message)), this._defaultValue
        }
      };
      var Rr = function (t, e) {
        this.kind = t, this._styleExpression = e, this.isStateDependent = "constant" !== t && !Be(e.expression);
      };
      Rr.prototype.evaluateWithoutErrorHandling = function (t, e, r, n) {
        return this._styleExpression.evaluateWithoutErrorHandling(t, e, r, n)
      }, Rr.prototype.evaluate = function (t, e, r, n) {
        return this._styleExpression.evaluate(t, e, r, n)
      };
      var qr = function (t, e, r, n) {
        this.kind = t, this.zoomStops = r, this._styleExpression = e, this.isStateDependent = "camera" !== t && !Be(e.expression), this.interpolationType = n;
      };
  
      function Nr(t, e) {
        if ("error" === (t = Ur(t, e)).result) return t;
        var r = t.value.expression,
          n = Ce(r);
        if (!n && !Ir(e)) return zr([new Ht("", "data expressions not supported")]);
        var i = Pe(r, ["zoom"]);
        if (!i && !Cr(e)) return zr([new Ht("", "zoom expressions not supported")]);
        var a = function t(e) {
          var r = null;
          if (e instanceof ar) r = t(e.result);
          else if (e instanceof ir)
            for (var n = 0, i = e.args; n < i.length; n += 1) {
              var a = i[n];
              if (r = t(a)) break
            } else(e instanceof Ve || e instanceof rr) && e.input instanceof ze && "zoom" === e.input.name && (r = e);
          if (r instanceof Ht) return r;
          e.eachChild(function (e) {
            var n = t(e);
            n instanceof Ht ? r = n : !r && n ? r = new Ht("", '"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.') : r && n && r !== n && (r = new Ht("", 'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'));
          });
          return r
        }(r);
        if (!a && !i) return zr([new Ht("", '"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);
        if (a instanceof Ht) return zr([a]);
        if (a instanceof rr && !Br(e)) return zr([new Ht("", '"interpolate" expressions cannot be used with this property')]);
        if (!a) return Sr(new Rr(n ? "constant" : "source", t.value));
        var o = a instanceof rr ? a.interpolation : void 0;
        return Sr(new qr(n ? "camera" : "composite", t.value, a.labels, o))
      }
      qr.prototype.evaluateWithoutErrorHandling = function (t, e, r, n) {
        return this._styleExpression.evaluateWithoutErrorHandling(t, e, r, n)
      }, qr.prototype.evaluate = function (t, e, r, n) {
        return this._styleExpression.evaluate(t, e, r, n)
      }, qr.prototype.interpolationFactor = function (t, e, r) {
        return this.interpolationType ? rr.interpolationFactor(this.interpolationType, t, e, r) : 0
      };
      var Kr = function (t, e) {
        this._parameters = t, this._specification = e, Kt(this, function t(e, r) {
          var n, i, a, o = "color" === r.type,
            s = e.stops && "object" == typeof e.stops[0][0],
            u = s || void 0 !== e.property,
            l = s || !u,
            p = e.type || (Br(r) ? "exponential" : "interval");
          if (o && ((e = Kt({}, e)).stops && (e.stops = e.stops.map(function (t) {
              return [t[0], pe.parse(t[1])]
            })), e.default ? e.default = pe.parse(e.default) : e.default = pe.parse(r.default)), e.colorSpace && "rgb" !== e.colorSpace && !er[e.colorSpace]) throw new Error("Unknown color space: " + e.colorSpace);
          if ("exponential" === p) n = Or;
          else if ("interval" === p) n = Fr;
          else if ("categorical" === p) {
            n = Vr, i = Object.create(null);
            for (var c = 0, h = e.stops; c < h.length; c += 1) {
              var f = h[c];
              i[f[0]] = f[1];
            }
            a = typeof e.stops[0][0];
          } else {
            if ("identity" !== p) throw new Error('Unknown function type "' + p + '"');
            n = Lr;
          }
          if (s) {
            for (var y = {}, d = [], m = 0; m < e.stops.length; m++) {
              var v = e.stops[m],
                g = v[0].zoom;
              void 0 === y[g] && (y[g] = {
                zoom: g,
                type: e.type,
                property: e.property,
                default: e.default,
                stops: []
              }, d.push(g)), y[g].stops.push([v[0].value, v[1]]);
            }
            for (var x = [], b = 0, _ = d; b < _.length; b += 1) {
              var w = _[b];
              x.push([y[w].zoom, t(y[w], r)]);
            }
            var A = {
              name: "linear"
            };
            return {
              kind: "composite",
              interpolationType: A,
              interpolationFactor: rr.interpolationFactor.bind(void 0, A),
              zoomStops: x.map(function (t) {
                return t[0]
              }),
              evaluate: function (t, n) {
                var i = t.zoom;
                return Or({
                  stops: x,
                  base: e.base
                }, r, i).evaluate(i, n)
              }
            }
          }
          if (l) {
            var k = "exponential" === p ? {
              name: "exponential",
              base: void 0 !== e.base ? e.base : 1
            } : null;
            return {
              kind: "camera",
              interpolationType: k,
              interpolationFactor: rr.interpolationFactor.bind(void 0, k),
              zoomStops: e.stops.map(function (t) {
                return t[0]
              }),
              evaluate: function (t) {
                var o = t.zoom;
                return n(e, r, o, i, a)
              }
            }
          }
          return {
            kind: "source",
            evaluate: function (t, o) {
              var s = o && o.properties ? o.properties[e.property] : void 0;
              return void 0 === s ? Tr(e.default, r.default) : n(e, r, s, i, a)
            }
          }
        }(this._parameters, this._specification));
      };
  
      function Zr(t) {
        var e = t.key,
          r = t.value,
          n = t.valueSpec || {},
          i = t.objectElementValidators || {},
          a = t.style,
          o = t.styleSpec,
          s = [],
          u = Pr(r);
        if ("object" !== u) return [new qt(e, r, "object expected, " + u + " found")];
        for (var l in r) {
          var p = l.split(".")[0],
            c = n[p] || n["*"],
            h = void 0;
          if (i[p]) h = i[p];
          else if (n[p]) h = mn;
          else if (i["*"]) h = i["*"];
          else {
            if (!n["*"]) {
              s.push(new qt(e, r[l], 'unknown property "' + l + '"'));
              continue
            }
            h = mn;
          }
          s = s.concat(h({
            key: (e ? e + "." : e) + l,
            value: r[l],
            valueSpec: c,
            style: a,
            styleSpec: o,
            object: r,
            objectKey: l
          }, r));
        }
        for (var f in n) i[f] || n[f].required && void 0 === n[f].default && void 0 === r[f] && s.push(new qt(e, r, 'missing required property "' + f + '"'));
        return s
      }
  
      function Xr(t) {
        var e = t.value,
          r = t.valueSpec,
          n = t.style,
          i = t.styleSpec,
          a = t.key,
          o = t.arrayElementValidator || mn;
        if ("array" !== Pr(e)) return [new qt(a, e, "array expected, " + Pr(e) + " found")];
        if (r.length && e.length !== r.length) return [new qt(a, e, "array length " + r.length + " expected, length " + e.length + " found")];
        if (r["min-length"] && e.length < r["min-length"]) return [new qt(a, e, "array length at least " + r["min-length"] + " expected, length " + e.length + " found")];
        var s = {
          type: r.value,
          values: r.values
        };
        i.$version < 7 && (s.function = r.function), "object" === Pr(r.value) && (s = r.value);
        for (var u = [], l = 0; l < e.length; l++) u = u.concat(o({
          array: e,
          arrayIndex: l,
          value: e[l],
          valueSpec: s,
          style: n,
          styleSpec: i,
          key: a + "[" + l + "]"
        }));
        return u
      }
  
      function Gr(t) {
        var e = t.key,
          r = t.value,
          n = t.valueSpec,
          i = Pr(r);
        return "number" !== i ? [new qt(e, r, "number expected, " + i + " found")] : "minimum" in n && r < n.minimum ? [new qt(e, r, r + " is less than the minimum value " + n.minimum)] : "maximum" in n && r > n.maximum ? [new qt(e, r, r + " is greater than the maximum value " + n.maximum)] : []
      }
  
      function Hr(t) {
        var e, r, n, i = t.valueSpec,
          a = Xt(t.value.type),
          o = {},
          s = "categorical" !== a && void 0 === t.value.property,
          u = !s,
          l = "array" === Pr(t.value.stops) && "array" === Pr(t.value.stops[0]) && "object" === Pr(t.value.stops[0][0]),
          p = Zr({
            key: t.key,
            value: t.value,
            valueSpec: t.styleSpec.function,
            style: t.style,
            styleSpec: t.styleSpec,
            objectElementValidators: {
              stops: function (t) {
                if ("identity" === a) return [new qt(t.key, t.value, 'identity function may not have a "stops" property')];
                var e = [],
                  r = t.value;
                e = e.concat(Xr({
                  key: t.key,
                  value: r,
                  valueSpec: t.valueSpec,
                  style: t.style,
                  styleSpec: t.styleSpec,
                  arrayElementValidator: c
                })), "array" === Pr(r) && 0 === r.length && e.push(new qt(t.key, r, "array must have at least one stop"));
                return e
              },
              default: function (t) {
                return mn({
                  key: t.key,
                  value: t.value,
                  valueSpec: i,
                  style: t.style,
                  styleSpec: t.styleSpec
                })
              }
            }
          });
        return "identity" === a && s && p.push(new qt(t.key, t.value, 'missing required property "property"')), "identity" === a || t.value.stops || p.push(new qt(t.key, t.value, 'missing required property "stops"')), "exponential" === a && t.valueSpec.expression && !Br(t.valueSpec) && p.push(new qt(t.key, t.value, "exponential functions not supported")), t.styleSpec.$version >= 8 && (u && !Ir(t.valueSpec) ? p.push(new qt(t.key, t.value, "property functions not supported")) : s && !Cr(t.valueSpec) && p.push(new qt(t.key, t.value, "zoom functions not supported"))), "categorical" !== a && !l || void 0 !== t.value.property || p.push(new qt(t.key, t.value, '"property" property is required')), p;
  
        function c(t) {
          var e = [],
            a = t.value,
            s = t.key;
          if ("array" !== Pr(a)) return [new qt(s, a, "array expected, " + Pr(a) + " found")];
          if (2 !== a.length) return [new qt(s, a, "array length 2 expected, length " + a.length + " found")];
          if (l) {
            if ("object" !== Pr(a[0])) return [new qt(s, a, "object expected, " + Pr(a[0]) + " found")];
            if (void 0 === a[0].zoom) return [new qt(s, a, "object stop key must have zoom")];
            if (void 0 === a[0].value) return [new qt(s, a, "object stop key must have value")];
            if (n && n > Xt(a[0].zoom)) return [new qt(s, a[0].zoom, "stop zoom values must appear in ascending order")];
            Xt(a[0].zoom) !== n && (n = Xt(a[0].zoom), r = void 0, o = {}), e = e.concat(Zr({
              key: s + "[0]",
              value: a[0],
              valueSpec: {
                zoom: {}
              },
              style: t.style,
              styleSpec: t.styleSpec,
              objectElementValidators: {
                zoom: Gr,
                value: h
              }
            }));
          } else e = e.concat(h({
            key: s + "[0]",
            value: a[0],
            valueSpec: {},
            style: t.style,
            styleSpec: t.styleSpec
          }, a));
          return jr(Gt(a[1])) ? e.concat([new qt(s + "[1]", a[1], "expressions are not allowed in function stops.")]) : e.concat(mn({
            key: s + "[1]",
            value: a[1],
            valueSpec: i,
            style: t.style,
            styleSpec: t.styleSpec
          }))
        }
  
        function h(t, n) {
          var s = Pr(t.value),
            u = Xt(t.value),
            l = null !== t.value ? t.value : n;
          if (e) {
            if (s !== e) return [new qt(t.key, l, s + " stop domain type must match previous stop domain type " + e)]
          } else e = s;
          if ("number" !== s && "string" !== s && "boolean" !== s) return [new qt(t.key, l, "stop domain value must be a number, string, or boolean")];
          if ("number" !== s && "categorical" !== a) {
            var p = "number expected, " + s + " found";
            return Ir(i) && void 0 === a && (p += '\nIf you intended to use a categorical function, specify `"type": "categorical"`.'), [new qt(t.key, l, p)]
          }
          return "categorical" !== a || "number" !== s || isFinite(u) && Math.floor(u) === u ? "categorical" !== a && "number" === s && void 0 !== r && u < r ? [new qt(t.key, l, "stop domain values must appear in ascending order")] : (r = u, "categorical" === a && u in o ? [new qt(t.key, l, "stop domain values must be unique")] : (o[u] = !0, [])) : [new qt(t.key, l, "integer expected, found " + u)]
        }
      }
  
      function Jr(t) {
        var e = ("property" === t.expressionContext ? Nr : Ur)(Gt(t.value), t.valueSpec);
        if ("error" === e.result) return e.value.map(function (e) {
          return new qt("" + t.key + e.key, t.value, e.message)
        });
        var r = e.value.expression || e.value._styleExpression.expression;
        if ("property" === t.expressionContext && "text-font" === t.propertyKey && -1 !== r.possibleOutputs().indexOf(void 0)) return [new qt(t.key, t.value, 'Invalid data expression for "' + t.propertyKey + '". Output values must be contained as literals within the expression.')];
        if ("property" === t.expressionContext && "layout" === t.propertyType && !Be(r)) return [new qt(t.key, t.value, '"feature-state" data expressions are not supported with layout properties.')];
        if ("filter" === t.expressionContext && !Be(r)) return [new qt(t.key, t.value, '"feature-state" data expressions are not supported with filters.')];
        if (t.expressionContext && 0 === t.expressionContext.indexOf("cluster")) {
          if (!Pe(r, ["zoom", "feature-state"])) return [new qt(t.key, t.value, '"zoom" and "feature-state" expressions are not supported with cluster properties.')];
          if ("cluster-initial" === t.expressionContext && !Ce(r)) return [new qt(t.key, t.value, "Feature data expressions are not supported with initial expression part of cluster properties.")]
        }
        return []
      }
  
      function Yr(t) {
        var e = t.key,
          r = t.value,
          n = t.valueSpec,
          i = [];
        return Array.isArray(n.values) ? -1 === n.values.indexOf(Xt(r)) && i.push(new qt(e, r, "expected one of [" + n.values.join(", ") + "], " + JSON.stringify(r) + " found")) : -1 === Object.keys(n.values).indexOf(Xt(r)) && i.push(new qt(e, r, "expected one of [" + Object.keys(n.values).join(", ") + "], " + JSON.stringify(r) + " found")), i
      }
  
      function $r(t) {
        if (!0 === t || !1 === t) return !0;
        if (!Array.isArray(t) || 0 === t.length) return !1;
        switch (t[0]) {
          case "has":
            return t.length >= 2 && "$id" !== t[1] && "$type" !== t[1];
          case "in":
          case "!in":
          case "!has":
          case "none":
            return !1;
          case "==":
          case "!=":
          case ">":
          case ">=":
          case "<":
          case "<=":
            return 3 !== t.length || Array.isArray(t[1]) || Array.isArray(t[2]);
          case "any":
          case "all":
            for (var e = 0, r = t.slice(1); e < r.length; e += 1) {
              var n = r[e];
              if (!$r(n) && "boolean" != typeof n) return !1
            }
            return !0;
          default:
            return !0
        }
      }
      Kr.deserialize = function (t) {
        return new Kr(t._parameters, t._specification)
      }, Kr.serialize = function (t) {
        return {
          _parameters: t._parameters,
          _specification: t._specification
        }
      };
      var Wr = {
        type: "boolean",
        default: !1,
        transition: !1,
        "property-type": "data-driven",
        expression: {
          interpolated: !1,
          parameters: ["zoom", "feature"]
        }
      };
  
      function Qr(t) {
        if (null == t) return function () {
          return !0
        };
        $r(t) || (t = en(t));
        var e = Ur(t, Wr);
        if ("error" === e.result) throw new Error(e.value.map(function (t) {
          return t.key + ": " + t.message
        }).join(", "));
        return function (t, r) {
          return e.value.evaluate(t, r)
        }
      }
  
      function tn(t, e) {
        return t < e ? -1 : t > e ? 1 : 0
      }
  
      function en(t) {
        if (!t) return !0;
        var e, r = t[0];
        return t.length <= 1 ? "any" !== r : "==" === r ? rn(t[1], t[2], "==") : "!=" === r ? on(rn(t[1], t[2], "==")) : "<" === r || ">" === r || "<=" === r || ">=" === r ? rn(t[1], t[2], r) : "any" === r ? (e = t.slice(1), ["any"].concat(e.map(en))) : "all" === r ? ["all"].concat(t.slice(1).map(en)) : "none" === r ? ["all"].concat(t.slice(1).map(en).map(on)) : "in" === r ? nn(t[1], t.slice(2)) : "!in" === r ? on(nn(t[1], t.slice(2))) : "has" === r ? an(t[1]) : "!has" !== r || on(an(t[1]))
      }
  
      function rn(t, e, r) {
        switch (t) {
          case "$type":
            return ["filter-type-" + r, e];
          case "$id":
            return ["filter-id-" + r, e];
          default:
            return ["filter-" + r, t, e]
        }
      }
  
      function nn(t, e) {
        if (0 === e.length) return !1;
        switch (t) {
          case "$type":
            return ["filter-type-in", ["literal", e]];
          case "$id":
            return ["filter-id-in", ["literal", e]];
          default:
            return e.length > 200 && !e.some(function (t) {
              return typeof t != typeof e[0]
            }) ? ["filter-in-large", t, ["literal", e.sort(tn)]] : ["filter-in-small", t, ["literal", e]]
        }
      }
  
      function an(t) {
        switch (t) {
          case "$type":
            return !0;
          case "$id":
            return ["filter-has-id"];
          default:
            return ["filter-has", t]
        }
      }
  
      function on(t) {
        return ["!", t]
      }
  
      function sn(t) {
        return $r(Gt(t.value)) ? Jr(Kt({}, t, {
          expressionContext: "filter",
          valueSpec: {
            value: "boolean"
          }
        })) : function t(e) {
          var r = e.value;
          var n = e.key;
          if ("array" !== Pr(r)) return [new qt(n, r, "array expected, " + Pr(r) + " found")];
          var i = e.styleSpec;
          var a;
          var o = [];
          if (r.length < 1) return [new qt(n, r, "filter array must have at least 1 element")];
          o = o.concat(Yr({
            key: n + "[0]",
            value: r[0],
            valueSpec: i.filter_operator,
            style: e.style,
            styleSpec: e.styleSpec
          }));
          switch (Xt(r[0])) {
            case "<":
            case "<=":
            case ">":
            case ">=":
              r.length >= 2 && "$type" === Xt(r[1]) && o.push(new qt(n, r, '"$type" cannot be use with operator "' + r[0] + '"'));
            case "==":
            case "!=":
              3 !== r.length && o.push(new qt(n, r, 'filter array for operator "' + r[0] + '" must have 3 elements'));
            case "in":
            case "!in":
              r.length >= 2 && "string" !== (a = Pr(r[1])) && o.push(new qt(n + "[1]", r[1], "string expected, " + a + " found"));
              for (var s = 2; s < r.length; s++) a = Pr(r[s]), "$type" === Xt(r[1]) ? o = o.concat(Yr({
                key: n + "[" + s + "]",
                value: r[s],
                valueSpec: i.geometry_type,
                style: e.style,
                styleSpec: e.styleSpec
              })) : "string" !== a && "number" !== a && "boolean" !== a && o.push(new qt(n + "[" + s + "]", r[s], "string, number, or boolean expected, " + a + " found"));
              break;
            case "any":
            case "all":
            case "none":
              for (var u = 1; u < r.length; u++) o = o.concat(t({
                key: n + "[" + u + "]",
                value: r[u],
                style: e.style,
                styleSpec: e.styleSpec
              }));
              break;
            case "has":
            case "!has":
              a = Pr(r[1]), 2 !== r.length ? o.push(new qt(n, r, 'filter array for "' + r[0] + '" operator must have 2 elements')) : "string" !== a && o.push(new qt(n + "[1]", r[1], "string expected, " + a + " found"));
          }
          return o
        }(t)
      }
  
      function un(t, e) {
        var r = t.key,
          n = t.style,
          i = t.styleSpec,
          a = t.value,
          o = t.objectKey,
          s = i[e + "_" + t.layerType];
        if (!s) return [];
        var u = o.match(/^(.*)-transition$/);
        if ("paint" === e && u && s[u[1]] && s[u[1]].transition) return mn({
          key: r,
          value: a,
          valueSpec: i.transition,
          style: n,
          styleSpec: i
        });
        var l, p = t.valueSpec || s[o];
        if (!p) return [new qt(r, a, 'unknown property "' + o + '"')];
        if ("string" === Pr(a) && Ir(p) && !p.tokens && (l = /^{([^}]+)}$/.exec(a))) return [new qt(r, a, '"' + o + '" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": ' + JSON.stringify(l[1]) + " }`.")];
        var c = [];
        return "symbol" === t.layerType && ("text-field" === o && n && !n.glyphs && c.push(new qt(r, a, 'use of "text-field" requires a style "glyphs" property')), "text-font" === o && Er(Gt(a)) && "identity" === Xt(a.type) && c.push(new qt(r, a, '"text-font" does not support identity functions'))), c.concat(mn({
          key: t.key,
          value: a,
          valueSpec: p,
          style: n,
          styleSpec: i,
          expressionContext: "property",
          propertyType: e,
          propertyKey: o
        }))
      }
  
      function ln(t) {
        return un(t, "paint")
      }
  
      function pn(t) {
        return un(t, "layout")
      }
  
      function cn(t) {
        var e = [],
          r = t.value,
          n = t.key,
          i = t.style,
          a = t.styleSpec;
        r.type || r.ref || e.push(new qt(n, r, 'either "type" or "ref" is required'));
        var o, s = Xt(r.type),
          u = Xt(r.ref);
        if (r.id)
          for (var l = Xt(r.id), p = 0; p < t.arrayIndex; p++) {
            var c = i.layers[p];
            Xt(c.id) === l && e.push(new qt(n, r.id, 'duplicate layer id "' + r.id + '", previously used at line ' + c.id.__line__));
          }
        if ("ref" in r)["type", "source", "source-layer", "filter", "layout"].forEach(function (t) {
          t in r && e.push(new qt(n, r[t], '"' + t + '" is prohibited for ref layers'));
        }), i.layers.forEach(function (t) {
          Xt(t.id) === u && (o = t);
        }), o ? o.ref ? e.push(new qt(n, r.ref, "ref cannot reference another ref layer")) : s = Xt(o.type) : e.push(new qt(n, r.ref, 'ref layer "' + u + '" not found'));
        else if ("background" !== s)
          if (r.source) {
            var h = i.sources && i.sources[r.source],
              f = h && Xt(h.type);
            h ? "vector" === f && "raster" === s ? e.push(new qt(n, r.source, 'layer "' + r.id + '" requires a raster source')) : "raster" === f && "raster" !== s ? e.push(new qt(n, r.source, 'layer "' + r.id + '" requires a vector source')) : "vector" !== f || r["source-layer"] ? "raster-dem" === f && "hillshade" !== s ? e.push(new qt(n, r.source, "raster-dem source can only be used with layer type 'hillshade'.")) : "line" !== s || !r.paint || !r.paint["line-gradient"] || "geojson" === f && h.lineMetrics || e.push(new qt(n, r, 'layer "' + r.id + '" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')) : e.push(new qt(n, r, 'layer "' + r.id + '" must specify a "source-layer"')) : e.push(new qt(n, r.source, 'source "' + r.source + '" not found'));
          } else e.push(new qt(n, r, 'missing required property "source"'));
        return e = e.concat(Zr({
          key: n,
          value: r,
          valueSpec: a.layer,
          style: t.style,
          styleSpec: t.styleSpec,
          objectElementValidators: {
            "*": function () {
              return []
            },
            type: function () {
              return mn({
                key: n + ".type",
                value: r.type,
                valueSpec: a.layer.type,
                style: t.style,
                styleSpec: t.styleSpec,
                object: r,
                objectKey: "type"
              })
            },
            filter: sn,
            layout: function (t) {
              return Zr({
                layer: r,
                key: t.key,
                value: t.value,
                style: t.style,
                styleSpec: t.styleSpec,
                objectElementValidators: {
                  "*": function (t) {
                    return pn(Kt({
                      layerType: s
                    }, t))
                  }
                }
              })
            },
            paint: function (t) {
              return Zr({
                layer: r,
                key: t.key,
                value: t.value,
                style: t.style,
                styleSpec: t.styleSpec,
                objectElementValidators: {
                  "*": function (t) {
                    return ln(Kt({
                      layerType: s
                    }, t))
                  }
                }
              })
            }
          }
        }))
      }
  
      function hn(t) {
        var e = t.value,
          r = t.key,
          n = t.styleSpec,
          i = t.style;
        if (!e.type) return [new qt(r, e, '"type" is required')];
        var a, o = Xt(e.type);
        switch (o) {
          case "vector":
          case "raster":
          case "raster-dem":
            return a = Zr({
              key: r,
              value: e,
              valueSpec: n["source_" + o.replace("-", "_")],
              style: t.style,
              styleSpec: n
            });
          case "geojson":
            if (a = Zr({
                key: r,
                value: e,
                valueSpec: n.source_geojson,
                style: i,
                styleSpec: n
              }), e.cluster)
              for (var s in e.clusterProperties) {
                var u = e.clusterProperties[s],
                  l = u[0],
                  p = u[1],
                  c = "string" == typeof l ? [l, ["accumulated"],
                    ["get", s]
                  ] : l;
                a.push.apply(a, Jr({
                  key: r + "." + s + ".map",
                  value: p,
                  expressionContext: "cluster-map"
                })), a.push.apply(a, Jr({
                  key: r + "." + s + ".reduce",
                  value: c,
                  expressionContext: "cluster-reduce"
                }));
              }
            return a;
          case "video":
            return Zr({
              key: r,
              value: e,
              valueSpec: n.source_video,
              style: i,
              styleSpec: n
            });
          case "image":
            return Zr({
              key: r,
              value: e,
              valueSpec: n.source_image,
              style: i,
              styleSpec: n
            });
          case "canvas":
            return [new qt(r, null, "Please use runtime APIs to add canvas sources, rather than including them in stylesheets.", "source.canvas")];
          default:
            return Yr({
              key: r + ".type",
              value: e.type,
              valueSpec: {
                values: ["vector", "raster", "raster-dem", "geojson", "video", "image"]
              },
              style: i,
              styleSpec: n
            })
        }
      }
  
      function fn(t) {
        var e = t.value,
          r = t.styleSpec,
          n = r.light,
          i = t.style,
          a = [],
          o = Pr(e);
        if (void 0 === e) return a;
        if ("object" !== o) return a = a.concat([new qt("light", e, "object expected, " + o + " found")]);
        for (var s in e) {
          var u = s.match(/^(.*)-transition$/);
          a = u && n[u[1]] && n[u[1]].transition ? a.concat(mn({
            key: s,
            value: e[s],
            valueSpec: r.transition,
            style: i,
            styleSpec: r
          })) : n[s] ? a.concat(mn({
            key: s,
            value: e[s],
            valueSpec: n[s],
            style: i,
            styleSpec: r
          })) : a.concat([new qt(s, e[s], 'unknown property "' + s + '"')]);
        }
        return a
      }
  
      function yn(t) {
        var e = t.value,
          r = t.key,
          n = Pr(e);
        return "string" !== n ? [new qt(r, e, "string expected, " + n + " found")] : []
      }
      var dn = {
        "*": function () {
          return []
        },
        array: Xr,
        boolean: function (t) {
          var e = t.value,
            r = t.key,
            n = Pr(e);
          return "boolean" !== n ? [new qt(r, e, "boolean expected, " + n + " found")] : []
        },
        number: Gr,
        color: function (t) {
          var e = t.key,
            r = t.value,
            n = Pr(r);
          return "string" !== n ? [new qt(e, r, "color expected, " + n + " found")] : null === le(r) ? [new qt(e, r, 'color expected, "' + r + '" found')] : []
        },
        constants: Nt,
        enum: Yr,
        filter: sn,
        function: Hr,
        layer: cn,
        object: Zr,
        source: hn,
        light: fn,
        string: yn,
        formatted: function (t) {
          return 0 === yn(t).length ? [] : Jr(t)
        }
      };
  
      function mn(t) {
        var e = t.value,
          r = t.valueSpec,
          n = t.styleSpec;
        return r.expression && Er(Xt(e)) ? Hr(t) : r.expression && jr(Gt(e)) ? Jr(t) : r.type && dn[r.type] ? dn[r.type](t) : Zr(Kt({}, t, {
          valueSpec: r.type ? n[r.type] : r
        }))
      }
  
      function vn(t) {
        var e = t.value,
          r = t.key,
          n = yn(t);
        return n.length ? n : (-1 === e.indexOf("{fontstack}") && n.push(new qt(r, e, '"glyphs" url must include a "{fontstack}" token')), -1 === e.indexOf("{range}") && n.push(new qt(r, e, '"glyphs" url must include a "{range}" token')), n)
      }
  
      function gn(t, e) {
        e = e || Rt;
        var r = [];
        return r = r.concat(mn({
          key: "",
          value: t,
          valueSpec: e.$root,
          styleSpec: e,
          style: t,
          objectElementValidators: {
            glyphs: vn,
            "*": function () {
              return []
            }
          }
        })), t.constants && (r = r.concat(Nt({
          key: "constants",
          value: t.constants,
          style: t,
          styleSpec: e
        }))), xn(r)
      }
  
      function xn(t) {
        return [].concat(t).sort(function (t, e) {
          return t.line - e.line
        })
      }
  
      function bn(t) {
        return function () {
          for (var e = [], r = arguments.length; r--;) e[r] = arguments[r];
          return xn(t.apply(this, e))
        }
      }
      gn.source = bn(hn), gn.light = bn(fn), gn.layer = bn(cn), gn.filter = bn(sn), gn.paintProperty = bn(ln), gn.layoutProperty = bn(pn);
      var _n = gn,
        wn = _n.light,
        An = _n.paintProperty,
        kn = _n.layoutProperty;
  
      function Sn(t, e) {
        var r = !1;
        if (e && e.length)
          for (var n = 0, i = e; n < i.length; n += 1) {
            var a = i[n];
            t.fire(new jt(new Error(a.message))), r = !0;
          }
        return r
      }
      var zn = Cn,
        In = 3;
  
      function Cn(t, e, r) {
        var n = this.cells = [];
        if (t instanceof ArrayBuffer) {
          this.arrayBuffer = t;
          var i = new Int32Array(this.arrayBuffer);
          t = i[0], e = i[1], r = i[2], this.d = e + 2 * r;
          for (var a = 0; a < this.d * this.d; a++) {
            var o = i[In + a],
              s = i[In + a + 1];
            n.push(o === s ? null : i.subarray(o, s));
          }
          var u = i[In + n.length],
            l = i[In + n.length + 1];
          this.keys = i.subarray(u, l), this.bboxes = i.subarray(l), this.insert = this._insertReadonly;
        } else {
          this.d = e + 2 * r;
          for (var p = 0; p < this.d * this.d; p++) n.push([]);
          this.keys = [], this.bboxes = [];
        }
        this.n = e, this.extent = t, this.padding = r, this.scale = e / t, this.uid = 0;
        var c = r / e * t;
        this.min = -c, this.max = t + c;
      }
      Cn.prototype.insert = function (t, e, r, n, i) {
        this._forEachCell(e, r, n, i, this._insertCell, this.uid++), this.keys.push(t), this.bboxes.push(e), this.bboxes.push(r), this.bboxes.push(n), this.bboxes.push(i);
      }, Cn.prototype._insertReadonly = function () {
        throw "Cannot insert into a GridIndex created from an ArrayBuffer."
      }, Cn.prototype._insertCell = function (t, e, r, n, i, a) {
        this.cells[i].push(a);
      }, Cn.prototype.query = function (t, e, r, n, i) {
        var a = this.min,
          o = this.max;
        if (t <= a && e <= a && o <= r && o <= n && !i) return Array.prototype.slice.call(this.keys);
        var s = [];
        return this._forEachCell(t, e, r, n, this._queryCell, s, {}, i), s
      }, Cn.prototype._queryCell = function (t, e, r, n, i, a, o, s) {
        var u = this.cells[i];
        if (null !== u)
          for (var l = this.keys, p = this.bboxes, c = 0; c < u.length; c++) {
            var h = u[c];
            if (void 0 === o[h]) {
              var f = 4 * h;
              (s ? s(p[f + 0], p[f + 1], p[f + 2], p[f + 3]) : t <= p[f + 2] && e <= p[f + 3] && r >= p[f + 0] && n >= p[f + 1]) ? (o[h] = !0, a.push(l[h])) : o[h] = !1;
            }
          }
      }, Cn.prototype._forEachCell = function (t, e, r, n, i, a, o, s) {
        for (var u = this._convertToCellCoord(t), l = this._convertToCellCoord(e), p = this._convertToCellCoord(r), c = this._convertToCellCoord(n), h = u; h <= p; h++)
          for (var f = l; f <= c; f++) {
            var y = this.d * f + h;
            if ((!s || s(this._convertFromCellCoord(h), this._convertFromCellCoord(f), this._convertFromCellCoord(h + 1), this._convertFromCellCoord(f + 1))) && i.call(this, t, e, r, n, y, a, o, s)) return
          }
      }, Cn.prototype._convertFromCellCoord = function (t) {
        return (t - this.padding) / this.scale
      }, Cn.prototype._convertToCellCoord = function (t) {
        return Math.max(0, Math.min(this.d - 1, Math.floor(t * this.scale) + this.padding))
      }, Cn.prototype.toArrayBuffer = function () {
        if (this.arrayBuffer) return this.arrayBuffer;
        for (var t = this.cells, e = In + this.cells.length + 1 + 1, r = 0, n = 0; n < this.cells.length; n++) r += this.cells[n].length;
        var i = new Int32Array(e + r + this.keys.length + this.bboxes.length);
        i[0] = this.extent, i[1] = this.n, i[2] = this.padding;
        for (var a = e, o = 0; o < t.length; o++) {
          var s = t[o];
          i[In + o] = a, i.set(s, a), a += s.length;
        }
        return i[In + t.length] = a, i.set(this.keys, a), a += this.keys.length, i[In + t.length + 1] = a, i.set(this.bboxes, a), a += this.bboxes.length, i.buffer
      };
      var Bn = self.ImageData,
        Pn = {};
  
      function En(t, e, r) {
        void 0 === r && (r = {}), Object.defineProperty(e, "_classRegistryKey", {
          value: t,
          writeable: !1
        }), Pn[t] = {
          klass: e,
          omit: r.omit || [],
          shallow: r.shallow || []
        };
      }
      for (var Mn in En("Object", Object), zn.serialize = function (t, e) {
          var r = t.toArrayBuffer();
          return e && e.push(r), {
            buffer: r
          }
        }, zn.deserialize = function (t) {
          return new zn(t.buffer)
        }, En("Grid", zn), En("Color", pe), En("Error", Error), En("StylePropertyFunction", Kr), En("StyleExpression", Dr, {
          omit: ["_evaluator"]
        }), En("ZoomDependentExpression", qr), En("ZoomConstantExpression", Rr), En("CompoundExpression", ze, {
          omit: ["_evaluate"]
        }), br) br[Mn]._classRegistryKey || En("Expression_" + Mn, br[Mn]);
  
      function Tn(t, e) {
        if (null == t || "boolean" == typeof t || "number" == typeof t || "string" == typeof t || t instanceof Boolean || t instanceof Number || t instanceof String || t instanceof Date || t instanceof RegExp) return t;
        if (t instanceof ArrayBuffer) return e && e.push(t), t;
        if (ArrayBuffer.isView(t)) {
          var r = t;
          return e && e.push(r.buffer), r
        }
        if (t instanceof Bn) return e && e.push(t.data.buffer), t;
        if (Array.isArray(t)) {
          for (var n = [], i = 0, a = t; i < a.length; i += 1) {
            var o = a[i];
            n.push(Tn(o, e));
          }
          return n
        }
        if ("object" == typeof t) {
          var s = t.constructor,
            u = s._classRegistryKey;
          if (!u) throw new Error("can't serialize object of unregistered class");
          var l = s.serialize ? s.serialize(t, e) : {};
          if (!s.serialize) {
            for (var p in t)
              if (t.hasOwnProperty(p) && !(Pn[u].omit.indexOf(p) >= 0)) {
                var c = t[p];
                l[p] = Pn[u].shallow.indexOf(p) >= 0 ? c : Tn(c, e);
              } t instanceof Error && (l.message = t.message);
          }
          if (l.$name) throw new Error("$name property is reserved for worker serialization logic.");
          return "Object" !== u && (l.$name = u), l
        }
        throw new Error("can't serialize object of type " + typeof t)
      }
  
      function Vn(t) {
        if (null == t || "boolean" == typeof t || "number" == typeof t || "string" == typeof t || t instanceof Boolean || t instanceof Number || t instanceof String || t instanceof Date || t instanceof RegExp || t instanceof ArrayBuffer || ArrayBuffer.isView(t) || t instanceof Bn) return t;
        if (Array.isArray(t)) return t.map(Vn);
        if ("object" == typeof t) {
          var e = t.$name || "Object",
            r = Pn[e].klass;
          if (!r) throw new Error("can't deserialize unregistered class " + e);
          if (r.deserialize) return r.deserialize(t);
          for (var n = Object.create(r.prototype), i = 0, a = Object.keys(t); i < a.length; i += 1) {
            var o = a[i];
            if ("$name" !== o) {
              var s = t[o];
              n[o] = Pn[e].shallow.indexOf(o) >= 0 ? s : Vn(s);
            }
          }
          return n
        }
        throw new Error("can't deserialize object of type " + typeof t)
      }
      var Fn = function () {
        this.first = !0;
      };
      Fn.prototype.update = function (t, e) {
        var r = Math.floor(t);
        return this.first ? (this.first = !1, this.lastIntegerZoom = r, this.lastIntegerZoomTime = 0, this.lastZoom = t, this.lastFloorZoom = r, !0) : (this.lastFloorZoom > r ? (this.lastIntegerZoom = r + 1, this.lastIntegerZoomTime = e) : this.lastFloorZoom < r && (this.lastIntegerZoom = r, this.lastIntegerZoomTime = e), t !== this.lastZoom && (this.lastZoom = t, this.lastFloorZoom = r, !0))
      };
      var On = {
        "Latin-1 Supplement": function (t) {
          return t >= 128 && t <= 255
        },
        Arabic: function (t) {
          return t >= 1536 && t <= 1791
        },
        "Arabic Supplement": function (t) {
          return t >= 1872 && t <= 1919
        },
        "Arabic Extended-A": function (t) {
          return t >= 2208 && t <= 2303
        },
        "Hangul Jamo": function (t) {
          return t >= 4352 && t <= 4607
        },
        "Unified Canadian Aboriginal Syllabics": function (t) {
          return t >= 5120 && t <= 5759
        },
        Khmer: function (t) {
          return t >= 6016 && t <= 6143
        },
        "Unified Canadian Aboriginal Syllabics Extended": function (t) {
          return t >= 6320 && t <= 6399
        },
        "General Punctuation": function (t) {
          return t >= 8192 && t <= 8303
        },
        "Letterlike Symbols": function (t) {
          return t >= 8448 && t <= 8527
        },
        "Number Forms": function (t) {
          return t >= 8528 && t <= 8591
        },
        "Miscellaneous Technical": function (t) {
          return t >= 8960 && t <= 9215
        },
        "Control Pictures": function (t) {
          return t >= 9216 && t <= 9279
        },
        "Optical Character Recognition": function (t) {
          return t >= 9280 && t <= 9311
        },
        "Enclosed Alphanumerics": function (t) {
          return t >= 9312 && t <= 9471
        },
        "Geometric Shapes": function (t) {
          return t >= 9632 && t <= 9727
        },
        "Miscellaneous Symbols": function (t) {
          return t >= 9728 && t <= 9983
        },
        "Miscellaneous Symbols and Arrows": function (t) {
          return t >= 11008 && t <= 11263
        },
        "CJK Radicals Supplement": function (t) {
          return t >= 11904 && t <= 12031
        },
        "Kangxi Radicals": function (t) {
          return t >= 12032 && t <= 12255
        },
        "Ideographic Description Characters": function (t) {
          return t >= 12272 && t <= 12287
        },
        "CJK Symbols and Punctuation": function (t) {
          return t >= 12288 && t <= 12351
        },
        Hiragana: function (t) {
          return t >= 12352 && t <= 12447
        },
        Katakana: function (t) {
          return t >= 12448 && t <= 12543
        },
        Bopomofo: function (t) {
          return t >= 12544 && t <= 12591
        },
        "Hangul Compatibility Jamo": function (t) {
          return t >= 12592 && t <= 12687
        },
        Kanbun: function (t) {
          return t >= 12688 && t <= 12703
        },
        "Bopomofo Extended": function (t) {
          return t >= 12704 && t <= 12735
        },
        "CJK Strokes": function (t) {
          return t >= 12736 && t <= 12783
        },
        "Katakana Phonetic Extensions": function (t) {
          return t >= 12784 && t <= 12799
        },
        "Enclosed CJK Letters and Months": function (t) {
          return t >= 12800 && t <= 13055
        },
        "CJK Compatibility": function (t) {
          return t >= 13056 && t <= 13311
        },
        "CJK Unified Ideographs Extension A": function (t) {
          return t >= 13312 && t <= 19903
        },
        "Yijing Hexagram Symbols": function (t) {
          return t >= 19904 && t <= 19967
        },
        "CJK Unified Ideographs": function (t) {
          return t >= 19968 && t <= 40959
        },
        "Yi Syllables": function (t) {
          return t >= 40960 && t <= 42127
        },
        "Yi Radicals": function (t) {
          return t >= 42128 && t <= 42191
        },
        "Hangul Jamo Extended-A": function (t) {
          return t >= 43360 && t <= 43391
        },
        "Hangul Syllables": function (t) {
          return t >= 44032 && t <= 55215
        },
        "Hangul Jamo Extended-B": function (t) {
          return t >= 55216 && t <= 55295
        },
        "Private Use Area": function (t) {
          return t >= 57344 && t <= 63743
        },
        "CJK Compatibility Ideographs": function (t) {
          return t >= 63744 && t <= 64255
        },
        "Arabic Presentation Forms-A": function (t) {
          return t >= 64336 && t <= 65023
        },
        "Vertical Forms": function (t) {
          return t >= 65040 && t <= 65055
        },
        "CJK Compatibility Forms": function (t) {
          return t >= 65072 && t <= 65103
        },
        "Small Form Variants": function (t) {
          return t >= 65104 && t <= 65135
        },
        "Arabic Presentation Forms-B": function (t) {
          return t >= 65136 && t <= 65279
        },
        "Halfwidth and Fullwidth Forms": function (t) {
          return t >= 65280 && t <= 65519
        }
      };
  
      function Ln(t) {
        for (var e = 0, r = t; e < r.length; e += 1) {
          if (jn(r[e].charCodeAt(0))) return !0
        }
        return !1
      }
  
      function Dn(t) {
        return !On.Arabic(t) && (!On["Arabic Supplement"](t) && (!On["Arabic Extended-A"](t) && (!On["Arabic Presentation Forms-A"](t) && !On["Arabic Presentation Forms-B"](t))))
      }
  
      function jn(t) {
        return 746 === t || 747 === t || !(t < 4352) && (!!On["Bopomofo Extended"](t) || (!!On.Bopomofo(t) || (!(!On["CJK Compatibility Forms"](t) || t >= 65097 && t <= 65103) || (!!On["CJK Compatibility Ideographs"](t) || (!!On["CJK Compatibility"](t) || (!!On["CJK Radicals Supplement"](t) || (!!On["CJK Strokes"](t) || (!(!On["CJK Symbols and Punctuation"](t) || t >= 12296 && t <= 12305 || t >= 12308 && t <= 12319 || 12336 === t) || (!!On["CJK Unified Ideographs Extension A"](t) || (!!On["CJK Unified Ideographs"](t) || (!!On["Enclosed CJK Letters and Months"](t) || (!!On["Hangul Compatibility Jamo"](t) || (!!On["Hangul Jamo Extended-A"](t) || (!!On["Hangul Jamo Extended-B"](t) || (!!On["Hangul Jamo"](t) || (!!On["Hangul Syllables"](t) || (!!On.Hiragana(t) || (!!On["Ideographic Description Characters"](t) || (!!On.Kanbun(t) || (!!On["Kangxi Radicals"](t) || (!!On["Katakana Phonetic Extensions"](t) || (!(!On.Katakana(t) || 12540 === t) || (!(!On["Halfwidth and Fullwidth Forms"](t) || 65288 === t || 65289 === t || 65293 === t || t >= 65306 && t <= 65310 || 65339 === t || 65341 === t || 65343 === t || t >= 65371 && t <= 65503 || 65507 === t || t >= 65512 && t <= 65519) || (!(!On["Small Form Variants"](t) || t >= 65112 && t <= 65118 || t >= 65123 && t <= 65126) || (!!On["Unified Canadian Aboriginal Syllabics"](t) || (!!On["Unified Canadian Aboriginal Syllabics Extended"](t) || (!!On["Vertical Forms"](t) || (!!On["Yijing Hexagram Symbols"](t) || (!!On["Yi Syllables"](t) || !!On["Yi Radicals"](t))))))))))))))))))))))))))))))
      }
  
      function Un(t) {
        return !(jn(t) || function (t) {
          return !(!On["Latin-1 Supplement"](t) || 167 !== t && 169 !== t && 174 !== t && 177 !== t && 188 !== t && 189 !== t && 190 !== t && 215 !== t && 247 !== t) || (!(!On["General Punctuation"](t) || 8214 !== t && 8224 !== t && 8225 !== t && 8240 !== t && 8241 !== t && 8251 !== t && 8252 !== t && 8258 !== t && 8263 !== t && 8264 !== t && 8265 !== t && 8273 !== t) || (!!On["Letterlike Symbols"](t) || (!!On["Number Forms"](t) || (!(!On["Miscellaneous Technical"](t) || !(t >= 8960 && t <= 8967 || t >= 8972 && t <= 8991 || t >= 8996 && t <= 9e3 || 9003 === t || t >= 9085 && t <= 9114 || t >= 9150 && t <= 9165 || 9167 === t || t >= 9169 && t <= 9179 || t >= 9186 && t <= 9215)) || (!(!On["Control Pictures"](t) || 9251 === t) || (!!On["Optical Character Recognition"](t) || (!!On["Enclosed Alphanumerics"](t) || (!!On["Geometric Shapes"](t) || (!(!On["Miscellaneous Symbols"](t) || t >= 9754 && t <= 9759) || (!(!On["Miscellaneous Symbols and Arrows"](t) || !(t >= 11026 && t <= 11055 || t >= 11088 && t <= 11097 || t >= 11192 && t <= 11243)) || (!!On["CJK Symbols and Punctuation"](t) || (!!On.Katakana(t) || (!!On["Private Use Area"](t) || (!!On["CJK Compatibility Forms"](t) || (!!On["Small Form Variants"](t) || (!!On["Halfwidth and Fullwidth Forms"](t) || (8734 === t || 8756 === t || 8757 === t || t >= 9984 && t <= 10087 || t >= 10102 && t <= 10131 || 65532 === t || 65533 === t)))))))))))))))))
        }(t))
      }
  
      function Rn(t, e) {
        return !(!e && (t >= 1424 && t <= 2303 || On["Arabic Presentation Forms-A"](t) || On["Arabic Presentation Forms-B"](t))) && !(t >= 2304 && t <= 3583 || t >= 3840 && t <= 4255 || On.Khmer(t))
      }
      var qn, Nn = !1,
        Kn = null,
        Zn = !1,
        Xn = new Ut,
        Gn = {
          applyArabicShaping: null,
          processBidirectionalText: null,
          processStyledBidirectionalText: null,
          isLoaded: function () {
            return Zn || null != Gn.applyArabicShaping
          }
        },
        Hn = function (t, e) {
          this.zoom = t, e ? (this.now = e.now, this.fadeDuration = e.fadeDuration, this.zoomHistory = e.zoomHistory, this.transition = e.transition) : (this.now = 0, this.fadeDuration = 0, this.zoomHistory = new Fn, this.transition = {});
        };
      Hn.prototype.isSupportedScript = function (t) {
        return function (t, e) {
          for (var r = 0, n = t; r < n.length; r += 1) {
            if (!Rn(n[r].charCodeAt(0), e)) return !1
          }
          return !0
        }(t, Gn.isLoaded())
      }, Hn.prototype.crossFadingFactor = function () {
        return 0 === this.fadeDuration ? 1 : Math.min((this.now - this.zoomHistory.lastIntegerZoomTime) / this.fadeDuration, 1)
      }, Hn.prototype.getCrossfadeParameters = function () {
        var t = this.zoom,
          e = t - Math.floor(t),
          r = this.crossFadingFactor();
        return t > this.zoomHistory.lastIntegerZoom ? {
          fromScale: 2,
          toScale: 1,
          t: e + (1 - e) * r
        } : {
          fromScale: .5,
          toScale: 1,
          t: 1 - (1 - r) * e
        }
      };
      var Jn = function (t, e) {
        this.property = t, this.value = e, this.expression = function (t, e) {
          if (Er(t)) return new Kr(t, e);
          if (jr(t)) {
            var r = Nr(t, e);
            if ("error" === r.result) throw new Error(r.value.map(function (t) {
              return t.key + ": " + t.message
            }).join(", "));
            return r.value
          }
          var n = t;
          return "string" == typeof t && "color" === e.type && (n = pe.parse(t)), {
            kind: "constant",
            evaluate: function () {
              return n
            }
          }
        }(void 0 === e ? t.specification.default : e, t.specification);
      };
      Jn.prototype.isDataDriven = function () {
        return "source" === this.expression.kind || "composite" === this.expression.kind
      }, Jn.prototype.possiblyEvaluate = function (t) {
        return this.property.possiblyEvaluate(this, t)
      };
      var Yn = function (t) {
        this.property = t, this.value = new Jn(t, void 0);
      };
      Yn.prototype.transitioned = function (t, e) {
        return new Wn(this.property, this.value, e, v({}, t.transition, this.transition), t.now)
      }, Yn.prototype.untransitioned = function () {
        return new Wn(this.property, this.value, null, {}, 0)
      };
      var $n = function (t) {
        this._properties = t, this._values = Object.create(t.defaultTransitionablePropertyValues);
      };
      $n.prototype.getValue = function (t) {
        return I(this._values[t].value.value)
      }, $n.prototype.setValue = function (t, e) {
        this._values.hasOwnProperty(t) || (this._values[t] = new Yn(this._values[t].property)), this._values[t].value = new Jn(this._values[t].property, null === e ? void 0 : I(e));
      }, $n.prototype.getTransition = function (t) {
        return I(this._values[t].transition)
      }, $n.prototype.setTransition = function (t, e) {
        this._values.hasOwnProperty(t) || (this._values[t] = new Yn(this._values[t].property)), this._values[t].transition = I(e) || void 0;
      }, $n.prototype.serialize = function () {
        for (var t = {}, e = 0, r = Object.keys(this._values); e < r.length; e += 1) {
          var n = r[e],
            i = this.getValue(n);
          void 0 !== i && (t[n] = i);
          var a = this.getTransition(n);
          void 0 !== a && (t[n + "-transition"] = a);
        }
        return t
      }, $n.prototype.transitioned = function (t, e) {
        for (var r = new Qn(this._properties), n = 0, i = Object.keys(this._values); n < i.length; n += 1) {
          var a = i[n];
          r._values[a] = this._values[a].transitioned(t, e._values[a]);
        }
        return r
      }, $n.prototype.untransitioned = function () {
        for (var t = new Qn(this._properties), e = 0, r = Object.keys(this._values); e < r.length; e += 1) {
          var n = r[e];
          t._values[n] = this._values[n].untransitioned();
        }
        return t
      };
      var Wn = function (t, e, r, n, i) {
        this.property = t, this.value = e, this.begin = i + n.delay || 0, this.end = this.begin + n.duration || 0, t.specification.transition && (n.delay || n.duration) && (this.prior = r);
      };
      Wn.prototype.possiblyEvaluate = function (t) {
        var e = t.now || 0,
          r = this.value.possiblyEvaluate(t),
          n = this.prior;
        if (n) {
          if (e > this.end) return this.prior = null, r;
          if (this.value.isDataDriven()) return this.prior = null, r;
          if (e < this.begin) return n.possiblyEvaluate(t);
          var i = (e - this.begin) / (this.end - this.begin);
          return this.property.interpolate(n.possiblyEvaluate(t), r, function (t) {
            if (t <= 0) return 0;
            if (t >= 1) return 1;
            var e = t * t,
              r = e * t;
            return 4 * (t < .5 ? r : 3 * (t - e) + r - .75)
          }(i))
        }
        return r
      };
      var Qn = function (t) {
        this._properties = t, this._values = Object.create(t.defaultTransitioningPropertyValues);
      };
      Qn.prototype.possiblyEvaluate = function (t) {
        for (var e = new ri(this._properties), r = 0, n = Object.keys(this._values); r < n.length; r += 1) {
          var i = n[r];
          e._values[i] = this._values[i].possiblyEvaluate(t);
        }
        return e
      }, Qn.prototype.hasTransition = function () {
        for (var t = 0, e = Object.keys(this._values); t < e.length; t += 1) {
          var r = e[t];
          if (this._values[r].prior) return !0
        }
        return !1
      };
      var ti = function (t) {
        this._properties = t, this._values = Object.create(t.defaultPropertyValues);
      };
      ti.prototype.getValue = function (t) {
        return I(this._values[t].value)
      }, ti.prototype.setValue = function (t, e) {
        this._values[t] = new Jn(this._values[t].property, null === e ? void 0 : I(e));
      }, ti.prototype.serialize = function () {
        for (var t = {}, e = 0, r = Object.keys(this._values); e < r.length; e += 1) {
          var n = r[e],
            i = this.getValue(n);
          void 0 !== i && (t[n] = i);
        }
        return t
      }, ti.prototype.possiblyEvaluate = function (t) {
        for (var e = new ri(this._properties), r = 0, n = Object.keys(this._values); r < n.length; r += 1) {
          var i = n[r];
          e._values[i] = this._values[i].possiblyEvaluate(t);
        }
        return e
      };
      var ei = function (t, e, r) {
        this.property = t, this.value = e, this.parameters = r;
      };
      ei.prototype.isConstant = function () {
        return "constant" === this.value.kind
      }, ei.prototype.constantOr = function (t) {
        return "constant" === this.value.kind ? this.value.value : t
      }, ei.prototype.evaluate = function (t, e) {
        return this.property.evaluate(this.value, this.parameters, t, e)
      };
      var ri = function (t) {
        this._properties = t, this._values = Object.create(t.defaultPossiblyEvaluatedValues);
      };
      ri.prototype.get = function (t) {
        return this._values[t]
      };
      var ni = function (t) {
        this.specification = t;
      };
      ni.prototype.possiblyEvaluate = function (t, e) {
        return t.expression.evaluate(e)
      }, ni.prototype.interpolate = function (t, e, r) {
        var n = Oe[this.specification.type];
        return n ? n(t, e, r) : t
      };
      var ii = function (t, e) {
        this.specification = t, this.overrides = e;
      };
      ii.prototype.possiblyEvaluate = function (t, e) {
        return "constant" === t.expression.kind || "camera" === t.expression.kind ? new ei(this, {
          kind: "constant",
          value: t.expression.evaluate(e)
        }, e) : new ei(this, t.expression, e)
      }, ii.prototype.interpolate = function (t, e, r) {
        if ("constant" !== t.value.kind || "constant" !== e.value.kind) return t;
        if (void 0 === t.value.value || void 0 === e.value.value) return new ei(this, {
          kind: "constant",
          value: void 0
        }, t.parameters);
        var n = Oe[this.specification.type];
        return n ? new ei(this, {
          kind: "constant",
          value: n(t.value.value, e.value.value, r)
        }, t.parameters) : t
      }, ii.prototype.evaluate = function (t, e, r, n) {
        return "constant" === t.kind ? t.value : t.evaluate(e, r, n)
      };
      var ai = function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.possiblyEvaluate = function (t, e) {
            if (void 0 === t.value) return new ei(this, {
              kind: "constant",
              value: void 0
            }, e);
            if ("constant" === t.expression.kind) {
              var r = t.expression.evaluate(e),
                n = this._calculate(r, r, r, e);
              return new ei(this, {
                kind: "constant",
                value: n
              }, e)
            }
            if ("camera" === t.expression.kind) {
              var i = this._calculate(t.expression.evaluate({
                zoom: e.zoom - 1
              }), t.expression.evaluate({
                zoom: e.zoom
              }), t.expression.evaluate({
                zoom: e.zoom + 1
              }), e);
              return new ei(this, {
                kind: "constant",
                value: i
              }, e)
            }
            return new ei(this, t.expression, e)
          }, e.prototype.evaluate = function (t, e, r, n) {
            if ("source" === t.kind) {
              var i = t.evaluate(e, r, n);
              return this._calculate(i, i, i, e)
            }
            return "composite" === t.kind ? this._calculate(t.evaluate({
              zoom: Math.floor(e.zoom) - 1
            }, r, n), t.evaluate({
              zoom: Math.floor(e.zoom)
            }, r, n), t.evaluate({
              zoom: Math.floor(e.zoom) + 1
            }, r, n), e) : t.value
          }, e.prototype._calculate = function (t, e, r, n) {
            return n.zoom > n.zoomHistory.lastIntegerZoom ? {
              from: t,
              to: e
            } : {
              from: r,
              to: e
            }
          }, e.prototype.interpolate = function (t) {
            return t
          }, e
        }(ii),
        oi = function (t) {
          this.specification = t;
        };
      oi.prototype.possiblyEvaluate = function (t, e) {
        if (void 0 !== t.value) {
          if ("constant" === t.expression.kind) {
            var r = t.expression.evaluate(e);
            return this._calculate(r, r, r, e)
          }
          return this._calculate(t.expression.evaluate(new Hn(Math.floor(e.zoom - 1), e)), t.expression.evaluate(new Hn(Math.floor(e.zoom), e)), t.expression.evaluate(new Hn(Math.floor(e.zoom + 1), e)), e)
        }
      }, oi.prototype._calculate = function (t, e, r, n) {
        return n.zoom > n.zoomHistory.lastIntegerZoom ? {
          from: t,
          to: e
        } : {
          from: r,
          to: e
        }
      }, oi.prototype.interpolate = function (t) {
        return t
      };
      var si = function (t) {
        this.specification = t;
      };
      si.prototype.possiblyEvaluate = function (t, e) {
        return !!t.expression.evaluate(e)
      }, si.prototype.interpolate = function () {
        return !1
      };
      var ui = function (t) {
        for (var e in this.properties = t, this.defaultPropertyValues = {}, this.defaultTransitionablePropertyValues = {}, this.defaultTransitioningPropertyValues = {}, this.defaultPossiblyEvaluatedValues = {}, this.overridableProperties = [], t) {
          var r = t[e];
          r.specification.overridable && this.overridableProperties.push(e);
          var n = this.defaultPropertyValues[e] = new Jn(r, void 0),
            i = this.defaultTransitionablePropertyValues[e] = new Yn(r);
          this.defaultTransitioningPropertyValues[e] = i.untransitioned(), this.defaultPossiblyEvaluatedValues[e] = n.possiblyEvaluate({});
        }
      };
      En("DataDrivenProperty", ii), En("DataConstantProperty", ni), En("CrossFadedDataDrivenProperty", ai), En("CrossFadedProperty", oi), En("ColorRampProperty", si);
      var li = function (t) {
          function e(e, r) {
            if (t.call(this), this.id = e.id, this.type = e.type, this._featureFilter = function () {
                return !0
              }, "custom" !== e.type && (e = e, this.metadata = e.metadata, this.minzoom = e.minzoom, this.maxzoom = e.maxzoom, "background" !== e.type && (this.source = e.source, this.sourceLayer = e["source-layer"], this.filter = e.filter), r.layout && (this._unevaluatedLayout = new ti(r.layout)), r.paint)) {
              for (var n in this._transitionablePaint = new $n(r.paint), e.paint) this.setPaintProperty(n, e.paint[n], {
                validate: !1
              });
              for (var i in e.layout) this.setLayoutProperty(i, e.layout[i], {
                validate: !1
              });
              this._transitioningPaint = this._transitionablePaint.untransitioned();
            }
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getCrossfadeParameters = function () {
            return this._crossfadeParameters
          }, e.prototype.getLayoutProperty = function (t) {
            return "visibility" === t ? this.visibility : this._unevaluatedLayout.getValue(t)
          }, e.prototype.setLayoutProperty = function (t, e, r) {
            if (void 0 === r && (r = {}), null != e) {
              var n = "layers." + this.id + ".layout." + t;
              if (this._validate(kn, n, t, e, r)) return
            }
            "visibility" !== t ? this._unevaluatedLayout.setValue(t, e) : this.visibility = e;
          }, e.prototype.getPaintProperty = function (t) {
            return k(t, "-transition") ? this._transitionablePaint.getTransition(t.slice(0, -"-transition".length)) : this._transitionablePaint.getValue(t)
          }, e.prototype.setPaintProperty = function (t, e, r) {
            if (void 0 === r && (r = {}), null != e) {
              var n = "layers." + this.id + ".paint." + t;
              if (this._validate(An, n, t, e, r)) return !1
            }
            if (k(t, "-transition")) return this._transitionablePaint.setTransition(t.slice(0, -"-transition".length), e || void 0), !1;
            var i = this._transitionablePaint._values[t],
              a = "cross-faded-data-driven" === i.property.specification["property-type"],
              o = i.value.isDataDriven(),
              s = i.value;
            this._transitionablePaint.setValue(t, e), this._handleSpecialPaintPropertyUpdate(t);
            var u = this._transitionablePaint._values[t].value;
            return u.isDataDriven() || o || a || this._handleOverridablePaintPropertyUpdate(t, s, u)
          }, e.prototype._handleSpecialPaintPropertyUpdate = function (t) {}, e.prototype._handleOverridablePaintPropertyUpdate = function (t, e, r) {
            return !1
          }, e.prototype.isHidden = function (t) {
            return !!(this.minzoom && t < this.minzoom) || (!!(this.maxzoom && t >= this.maxzoom) || "none" === this.visibility)
          }, e.prototype.updateTransitions = function (t) {
            this._transitioningPaint = this._transitionablePaint.transitioned(t, this._transitioningPaint);
          }, e.prototype.hasTransition = function () {
            return this._transitioningPaint.hasTransition()
          }, e.prototype.recalculate = function (t) {
            t.getCrossfadeParameters && (this._crossfadeParameters = t.getCrossfadeParameters()), this._unevaluatedLayout && (this.layout = this._unevaluatedLayout.possiblyEvaluate(t)), this.paint = this._transitioningPaint.possiblyEvaluate(t);
          }, e.prototype.serialize = function () {
            var t = {
              id: this.id,
              type: this.type,
              source: this.source,
              "source-layer": this.sourceLayer,
              metadata: this.metadata,
              minzoom: this.minzoom,
              maxzoom: this.maxzoom,
              filter: this.filter,
              layout: this._unevaluatedLayout && this._unevaluatedLayout.serialize(),
              paint: this._transitionablePaint && this._transitionablePaint.serialize()
            };
            return this.visibility && (t.layout = t.layout || {}, t.layout.visibility = this.visibility), z(t, function (t, e) {
              return !(void 0 === t || "layout" === e && !Object.keys(t).length || "paint" === e && !Object.keys(t).length)
            })
          }, e.prototype._validate = function (t, e, r, n, i) {
            return void 0 === i && (i = {}), (!i || !1 !== i.validate) && Sn(this, t.call(_n, {
              key: e,
              layerType: this.type,
              objectKey: r,
              value: n,
              styleSpec: Rt,
              style: {
                glyphs: !0,
                sprite: !0
              }
            }))
          }, e.prototype.is3D = function () {
            return !1
          }, e.prototype.isTileClipped = function () {
            return !1
          }, e.prototype.hasOffscreenPass = function () {
            return !1
          }, e.prototype.resize = function () {}, e.prototype.isStateDependent = function () {
            for (var t in this.paint._values) {
              var e = this.paint.get(t);
              if (e instanceof ei && Ir(e.property.specification) && (("source" === e.value.kind || "composite" === e.value.kind) && e.value.isStateDependent)) return !0
            }
            return !1
          }, e
        }(Ut),
        pi = {
          Int8: Int8Array,
          Uint8: Uint8Array,
          Int16: Int16Array,
          Uint16: Uint16Array,
          Int32: Int32Array,
          Uint32: Uint32Array,
          Float32: Float32Array
        },
        ci = function (t, e) {
          this._structArray = t, this._pos1 = e * this.size, this._pos2 = this._pos1 / 2, this._pos4 = this._pos1 / 4, this._pos8 = this._pos1 / 8;
        },
        hi = function () {
          this.isTransferred = !1, this.capacity = -1, this.resize(0);
        };
  
      function fi(t, e) {
        void 0 === e && (e = 1);
        var r = 0,
          n = 0;
        return {
          members: t.map(function (t) {
            var i, a = (i = t.type, pi[i].BYTES_PER_ELEMENT),
              o = r = yi(r, Math.max(e, a)),
              s = t.components || 1;
            return n = Math.max(n, a), r += a * s, {
              name: t.name,
              type: t.type,
              components: s,
              offset: o
            }
          }),
          size: yi(r, Math.max(n, e)),
          alignment: e
        }
      }
  
      function yi(t, e) {
        return Math.ceil(t / e) * e
      }
      hi.serialize = function (t, e) {
        return t._trim(), e && (t.isTransferred = !0, e.push(t.arrayBuffer)), {
          length: t.length,
          arrayBuffer: t.arrayBuffer
        }
      }, hi.deserialize = function (t) {
        var e = Object.create(this.prototype);
        return e.arrayBuffer = t.arrayBuffer, e.length = t.length, e.capacity = t.arrayBuffer.byteLength / e.bytesPerElement, e._refreshViews(), e
      }, hi.prototype._trim = function () {
        this.length !== this.capacity && (this.capacity = this.length, this.arrayBuffer = this.arrayBuffer.slice(0, this.length * this.bytesPerElement), this._refreshViews());
      }, hi.prototype.clear = function () {
        this.length = 0;
      }, hi.prototype.resize = function (t) {
        this.reserve(t), this.length = t;
      }, hi.prototype.reserve = function (t) {
        if (t > this.capacity) {
          this.capacity = Math.max(t, Math.floor(5 * this.capacity), 128), this.arrayBuffer = new ArrayBuffer(this.capacity * this.bytesPerElement);
          var e = this.uint8;
          this._refreshViews(), e && this.uint8.set(e);
        }
      }, hi.prototype._refreshViews = function () {
        throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")
      };
      var di = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype._refreshViews = function () {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
        }, e.prototype.emplaceBack = function (t, e) {
          var r = this.length;
          return this.resize(r + 1), this.emplace(r, t, e)
        }, e.prototype.emplace = function (t, e, r) {
          var n = 2 * t;
          return this.int16[n + 0] = e, this.int16[n + 1] = r, t
        }, e
      }(hi);
      di.prototype.bytesPerElement = 4, En("StructArrayLayout2i4", di);
      var mi = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype._refreshViews = function () {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
        }, e.prototype.emplaceBack = function (t, e, r, n) {
          var i = this.length;
          return this.resize(i + 1), this.emplace(i, t, e, r, n)
        }, e.prototype.emplace = function (t, e, r, n, i) {
          var a = 4 * t;
          return this.int16[a + 0] = e, this.int16[a + 1] = r, this.int16[a + 2] = n, this.int16[a + 3] = i, t
        }, e
      }(hi);
      mi.prototype.bytesPerElement = 8, En("StructArrayLayout4i8", mi);
      var vi = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype._refreshViews = function () {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
        }, e.prototype.emplaceBack = function (t, e, r, n, i, a) {
          var o = this.length;
          return this.resize(o + 1), this.emplace(o, t, e, r, n, i, a)
        }, e.prototype.emplace = function (t, e, r, n, i, a, o) {
          var s = 6 * t;
          return this.int16[s + 0] = e, this.int16[s + 1] = r, this.int16[s + 2] = n, this.int16[s + 3] = i, this.int16[s + 4] = a, this.int16[s + 5] = o, t
        }, e
      }(hi);
      vi.prototype.bytesPerElement = 12, En("StructArrayLayout2i4i12", vi);
      var gi = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype._refreshViews = function () {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
        }, e.prototype.emplaceBack = function (t, e, r, n, i, a) {
          var o = this.length;
          return this.resize(o + 1), this.emplace(o, t, e, r, n, i, a)
        }, e.prototype.emplace = function (t, e, r, n, i, a, o) {
          var s = 4 * t,
            u = 8 * t;
          return this.int16[s + 0] = e, this.int16[s + 1] = r, this.uint8[u + 4] = n, this.uint8[u + 5] = i, this.uint8[u + 6] = a, this.uint8[u + 7] = o, t
        }, e
      }(hi);
      gi.prototype.bytesPerElement = 8, En("StructArrayLayout2i4ub8", gi);
      var xi = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype._refreshViews = function () {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
        }, e.prototype.emplaceBack = function (t, e, r, n, i, a, o, s) {
          var u = this.length;
          return this.resize(u + 1), this.emplace(u, t, e, r, n, i, a, o, s)
        }, e.prototype.emplace = function (t, e, r, n, i, a, o, s, u) {
          var l = 8 * t;
          return this.uint16[l + 0] = e, this.uint16[l + 1] = r, this.uint16[l + 2] = n, this.uint16[l + 3] = i, this.uint16[l + 4] = a, this.uint16[l + 5] = o, this.uint16[l + 6] = s, this.uint16[l + 7] = u, t
        }, e
      }(hi);
      xi.prototype.bytesPerElement = 16, En("StructArrayLayout8ui16", xi);
      var bi = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype._refreshViews = function () {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
        }, e.prototype.emplaceBack = function (t, e, r, n, i, a, o, s) {
          var u = this.length;
          return this.resize(u + 1), this.emplace(u, t, e, r, n, i, a, o, s)
        }, e.prototype.emplace = function (t, e, r, n, i, a, o, s, u) {
          var l = 8 * t;
          return this.int16[l + 0] = e, this.int16[l + 1] = r, this.int16[l + 2] = n, this.int16[l + 3] = i, this.uint16[l + 4] = a, this.uint16[l + 5] = o, this.uint16[l + 6] = s, this.uint16[l + 7] = u, t
        }, e
      }(hi);
      bi.prototype.bytesPerElement = 16, En("StructArrayLayout4i4ui16", bi);
      var _i = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype._refreshViews = function () {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
        }, e.prototype.emplaceBack = function (t, e, r) {
          var n = this.length;
          return this.resize(n + 1), this.emplace(n, t, e, r)
        }, e.prototype.emplace = function (t, e, r, n) {
          var i = 3 * t;
          return this.float32[i + 0] = e, this.float32[i + 1] = r, this.float32[i + 2] = n, t
        }, e
      }(hi);
      _i.prototype.bytesPerElement = 12, En("StructArrayLayout3f12", _i);
      var wi = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype._refreshViews = function () {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer);
        }, e.prototype.emplaceBack = function (t) {
          var e = this.length;
          return this.resize(e + 1), this.emplace(e, t)
        }, e.prototype.emplace = function (t, e) {
          var r = 1 * t;
          return this.uint32[r + 0] = e, t
        }, e
      }(hi);
      wi.prototype.bytesPerElement = 4, En("StructArrayLayout1ul4", wi);
      var Ai = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype._refreshViews = function () {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
        }, e.prototype.emplaceBack = function (t, e, r, n, i, a, o, s, u, l, p) {
          var c = this.length;
          return this.resize(c + 1), this.emplace(c, t, e, r, n, i, a, o, s, u, l, p)
        }, e.prototype.emplace = function (t, e, r, n, i, a, o, s, u, l, p, c) {
          var h = 12 * t,
            f = 6 * t;
          return this.int16[h + 0] = e, this.int16[h + 1] = r, this.int16[h + 2] = n, this.int16[h + 3] = i, this.int16[h + 4] = a, this.int16[h + 5] = o, this.uint32[f + 3] = s, this.uint16[h + 8] = u, this.uint16[h + 9] = l, this.int16[h + 10] = p, this.int16[h + 11] = c, t
        }, e
      }(hi);
      Ai.prototype.bytesPerElement = 24, En("StructArrayLayout6i1ul2ui2i24", Ai);
      var ki = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype._refreshViews = function () {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
        }, e.prototype.emplaceBack = function (t, e, r, n, i, a) {
          var o = this.length;
          return this.resize(o + 1), this.emplace(o, t, e, r, n, i, a)
        }, e.prototype.emplace = function (t, e, r, n, i, a, o) {
          var s = 6 * t;
          return this.int16[s + 0] = e, this.int16[s + 1] = r, this.int16[s + 2] = n, this.int16[s + 3] = i, this.int16[s + 4] = a, this.int16[s + 5] = o, t
        }, e
      }(hi);
      ki.prototype.bytesPerElement = 12, En("StructArrayLayout2i2i2i12", ki);
      var Si = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype._refreshViews = function () {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
        }, e.prototype.emplaceBack = function (t, e, r, n) {
          var i = this.length;
          return this.resize(i + 1), this.emplace(i, t, e, r, n)
        }, e.prototype.emplace = function (t, e, r, n, i) {
          var a = 12 * t,
            o = 3 * t;
          return this.uint8[a + 0] = e, this.uint8[a + 1] = r, this.float32[o + 1] = n, this.float32[o + 2] = i, t
        }, e
      }(hi);
      Si.prototype.bytesPerElement = 12, En("StructArrayLayout2ub2f12", Si);
      var zi = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype._refreshViews = function () {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
        }, e.prototype.emplaceBack = function (t, e, r, n, i, a, o, s, u, l, p, c, h, f, y, d) {
          var m = this.length;
          return this.resize(m + 1), this.emplace(m, t, e, r, n, i, a, o, s, u, l, p, c, h, f, y, d)
        }, e.prototype.emplace = function (t, e, r, n, i, a, o, s, u, l, p, c, h, f, y, d, m) {
          var v = 22 * t,
            g = 11 * t,
            x = 44 * t;
          return this.int16[v + 0] = e, this.int16[v + 1] = r, this.uint16[v + 2] = n, this.uint16[v + 3] = i, this.uint32[g + 2] = a, this.uint32[g + 3] = o, this.uint32[g + 4] = s, this.uint16[v + 10] = u, this.uint16[v + 11] = l, this.uint16[v + 12] = p, this.float32[g + 7] = c, this.float32[g + 8] = h, this.uint8[x + 36] = f, this.uint8[x + 37] = y, this.uint8[x + 38] = d, this.uint32[g + 10] = m, t
        }, e
      }(hi);
      zi.prototype.bytesPerElement = 44, En("StructArrayLayout2i2ui3ul3ui2f3ub1ul44", zi);
      var Ii = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype._refreshViews = function () {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
        }, e.prototype.emplaceBack = function (t, e, r, n, i, a, o, s, u, l, p, c, h, f, y, d, m, v, g, x) {
          var b = this.length;
          return this.resize(b + 1), this.emplace(b, t, e, r, n, i, a, o, s, u, l, p, c, h, f, y, d, m, v, g, x)
        }, e.prototype.emplace = function (t, e, r, n, i, a, o, s, u, l, p, c, h, f, y, d, m, v, g, x, b) {
          var _ = 24 * t,
            w = 12 * t;
          return this.int16[_ + 0] = e, this.int16[_ + 1] = r, this.int16[_ + 2] = n, this.int16[_ + 3] = i, this.int16[_ + 4] = a, this.int16[_ + 5] = o, this.uint16[_ + 6] = s, this.uint16[_ + 7] = u, this.uint16[_ + 8] = l, this.uint16[_ + 9] = p, this.uint16[_ + 10] = c, this.uint16[_ + 11] = h, this.uint16[_ + 12] = f, this.uint16[_ + 13] = y, this.uint16[_ + 14] = d, this.uint16[_ + 15] = m, this.uint16[_ + 16] = v, this.uint32[w + 9] = g, this.float32[w + 10] = x, this.float32[w + 11] = b, t
        }, e
      }(hi);
      Ii.prototype.bytesPerElement = 48, En("StructArrayLayout6i11ui1ul2f48", Ii);
      var Ci = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype._refreshViews = function () {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
        }, e.prototype.emplaceBack = function (t) {
          var e = this.length;
          return this.resize(e + 1), this.emplace(e, t)
        }, e.prototype.emplace = function (t, e) {
          var r = 1 * t;
          return this.float32[r + 0] = e, t
        }, e
      }(hi);
      Ci.prototype.bytesPerElement = 4, En("StructArrayLayout1f4", Ci);
      var Bi = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype._refreshViews = function () {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);
        }, e.prototype.emplaceBack = function (t, e, r) {
          var n = this.length;
          return this.resize(n + 1), this.emplace(n, t, e, r)
        }, e.prototype.emplace = function (t, e, r, n) {
          var i = 3 * t;
          return this.int16[i + 0] = e, this.int16[i + 1] = r, this.int16[i + 2] = n, t
        }, e
      }(hi);
      Bi.prototype.bytesPerElement = 6, En("StructArrayLayout3i6", Bi);
      var Pi = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype._refreshViews = function () {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
        }, e.prototype.emplaceBack = function (t, e, r) {
          var n = this.length;
          return this.resize(n + 1), this.emplace(n, t, e, r)
        }, e.prototype.emplace = function (t, e, r, n) {
          var i = 2 * t,
            a = 4 * t;
          return this.uint32[i + 0] = e, this.uint16[a + 2] = r, this.uint16[a + 3] = n, t
        }, e
      }(hi);
      Pi.prototype.bytesPerElement = 8, En("StructArrayLayout1ul2ui8", Pi);
      var Ei = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype._refreshViews = function () {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
        }, e.prototype.emplaceBack = function (t, e, r) {
          var n = this.length;
          return this.resize(n + 1), this.emplace(n, t, e, r)
        }, e.prototype.emplace = function (t, e, r, n) {
          var i = 3 * t;
          return this.uint16[i + 0] = e, this.uint16[i + 1] = r, this.uint16[i + 2] = n, t
        }, e
      }(hi);
      Ei.prototype.bytesPerElement = 6, En("StructArrayLayout3ui6", Ei);
      var Mi = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype._refreshViews = function () {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
        }, e.prototype.emplaceBack = function (t, e) {
          var r = this.length;
          return this.resize(r + 1), this.emplace(r, t, e)
        }, e.prototype.emplace = function (t, e, r) {
          var n = 2 * t;
          return this.uint16[n + 0] = e, this.uint16[n + 1] = r, t
        }, e
      }(hi);
      Mi.prototype.bytesPerElement = 4, En("StructArrayLayout2ui4", Mi);
      var Ti = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype._refreshViews = function () {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);
        }, e.prototype.emplaceBack = function (t) {
          var e = this.length;
          return this.resize(e + 1), this.emplace(e, t)
        }, e.prototype.emplace = function (t, e) {
          var r = 1 * t;
          return this.uint16[r + 0] = e, t
        }, e
      }(hi);
      Ti.prototype.bytesPerElement = 2, En("StructArrayLayout1ui2", Ti);
      var Vi = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype._refreshViews = function () {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
        }, e.prototype.emplaceBack = function (t, e) {
          var r = this.length;
          return this.resize(r + 1), this.emplace(r, t, e)
        }, e.prototype.emplace = function (t, e, r) {
          var n = 2 * t;
          return this.float32[n + 0] = e, this.float32[n + 1] = r, t
        }, e
      }(hi);
      Vi.prototype.bytesPerElement = 8, En("StructArrayLayout2f8", Vi);
      var Fi = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype._refreshViews = function () {
          this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);
        }, e.prototype.emplaceBack = function (t, e, r, n) {
          var i = this.length;
          return this.resize(i + 1), this.emplace(i, t, e, r, n)
        }, e.prototype.emplace = function (t, e, r, n, i) {
          var a = 4 * t;
          return this.float32[a + 0] = e, this.float32[a + 1] = r, this.float32[a + 2] = n, this.float32[a + 3] = i, t
        }, e
      }(hi);
      Fi.prototype.bytesPerElement = 16, En("StructArrayLayout4f16", Fi);
      var Oi = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e;
        var r = {
          anchorPointX: {
            configurable: !0
          },
          anchorPointY: {
            configurable: !0
          },
          x1: {
            configurable: !0
          },
          y1: {
            configurable: !0
          },
          x2: {
            configurable: !0
          },
          y2: {
            configurable: !0
          },
          featureIndex: {
            configurable: !0
          },
          sourceLayerIndex: {
            configurable: !0
          },
          bucketIndex: {
            configurable: !0
          },
          radius: {
            configurable: !0
          },
          signedDistanceFromAnchor: {
            configurable: !0
          },
          anchorPoint: {
            configurable: !0
          }
        };
        return r.anchorPointX.get = function () {
          return this._structArray.int16[this._pos2 + 0]
        }, r.anchorPointX.set = function (t) {
          this._structArray.int16[this._pos2 + 0] = t;
        }, r.anchorPointY.get = function () {
          return this._structArray.int16[this._pos2 + 1]
        }, r.anchorPointY.set = function (t) {
          this._structArray.int16[this._pos2 + 1] = t;
        }, r.x1.get = function () {
          return this._structArray.int16[this._pos2 + 2]
        }, r.x1.set = function (t) {
          this._structArray.int16[this._pos2 + 2] = t;
        }, r.y1.get = function () {
          return this._structArray.int16[this._pos2 + 3]
        }, r.y1.set = function (t) {
          this._structArray.int16[this._pos2 + 3] = t;
        }, r.x2.get = function () {
          return this._structArray.int16[this._pos2 + 4]
        }, r.x2.set = function (t) {
          this._structArray.int16[this._pos2 + 4] = t;
        }, r.y2.get = function () {
          return this._structArray.int16[this._pos2 + 5]
        }, r.y2.set = function (t) {
          this._structArray.int16[this._pos2 + 5] = t;
        }, r.featureIndex.get = function () {
          return this._structArray.uint32[this._pos4 + 3]
        }, r.featureIndex.set = function (t) {
          this._structArray.uint32[this._pos4 + 3] = t;
        }, r.sourceLayerIndex.get = function () {
          return this._structArray.uint16[this._pos2 + 8]
        }, r.sourceLayerIndex.set = function (t) {
          this._structArray.uint16[this._pos2 + 8] = t;
        }, r.bucketIndex.get = function () {
          return this._structArray.uint16[this._pos2 + 9]
        }, r.bucketIndex.set = function (t) {
          this._structArray.uint16[this._pos2 + 9] = t;
        }, r.radius.get = function () {
          return this._structArray.int16[this._pos2 + 10]
        }, r.radius.set = function (t) {
          this._structArray.int16[this._pos2 + 10] = t;
        }, r.signedDistanceFromAnchor.get = function () {
          return this._structArray.int16[this._pos2 + 11]
        }, r.signedDistanceFromAnchor.set = function (t) {
          this._structArray.int16[this._pos2 + 11] = t;
        }, r.anchorPoint.get = function () {
          return new p(this.anchorPointX, this.anchorPointY)
        }, Object.defineProperties(e.prototype, r), e
      }(ci);
      Oi.prototype.size = 24;
      var Li = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.get = function (t) {
          return new Oi(this, t)
        }, e
      }(Ai);
      En("CollisionBoxArray", Li);
      var Di = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e;
        var r = {
          anchorX: {
            configurable: !0
          },
          anchorY: {
            configurable: !0
          },
          glyphStartIndex: {
            configurable: !0
          },
          numGlyphs: {
            configurable: !0
          },
          vertexStartIndex: {
            configurable: !0
          },
          lineStartIndex: {
            configurable: !0
          },
          lineLength: {
            configurable: !0
          },
          segment: {
            configurable: !0
          },
          lowerSize: {
            configurable: !0
          },
          upperSize: {
            configurable: !0
          },
          lineOffsetX: {
            configurable: !0
          },
          lineOffsetY: {
            configurable: !0
          },
          writingMode: {
            configurable: !0
          },
          placedOrientation: {
            configurable: !0
          },
          hidden: {
            configurable: !0
          },
          crossTileID: {
            configurable: !0
          }
        };
        return r.anchorX.get = function () {
          return this._structArray.int16[this._pos2 + 0]
        }, r.anchorX.set = function (t) {
          this._structArray.int16[this._pos2 + 0] = t;
        }, r.anchorY.get = function () {
          return this._structArray.int16[this._pos2 + 1]
        }, r.anchorY.set = function (t) {
          this._structArray.int16[this._pos2 + 1] = t;
        }, r.glyphStartIndex.get = function () {
          return this._structArray.uint16[this._pos2 + 2]
        }, r.glyphStartIndex.set = function (t) {
          this._structArray.uint16[this._pos2 + 2] = t;
        }, r.numGlyphs.get = function () {
          return this._structArray.uint16[this._pos2 + 3]
        }, r.numGlyphs.set = function (t) {
          this._structArray.uint16[this._pos2 + 3] = t;
        }, r.vertexStartIndex.get = function () {
          return this._structArray.uint32[this._pos4 + 2]
        }, r.vertexStartIndex.set = function (t) {
          this._structArray.uint32[this._pos4 + 2] = t;
        }, r.lineStartIndex.get = function () {
          return this._structArray.uint32[this._pos4 + 3]
        }, r.lineStartIndex.set = function (t) {
          this._structArray.uint32[this._pos4 + 3] = t;
        }, r.lineLength.get = function () {
          return this._structArray.uint32[this._pos4 + 4]
        }, r.lineLength.set = function (t) {
          this._structArray.uint32[this._pos4 + 4] = t;
        }, r.segment.get = function () {
          return this._structArray.uint16[this._pos2 + 10]
        }, r.segment.set = function (t) {
          this._structArray.uint16[this._pos2 + 10] = t;
        }, r.lowerSize.get = function () {
          return this._structArray.uint16[this._pos2 + 11]
        }, r.lowerSize.set = function (t) {
          this._structArray.uint16[this._pos2 + 11] = t;
        }, r.upperSize.get = function () {
          return this._structArray.uint16[this._pos2 + 12]
        }, r.upperSize.set = function (t) {
          this._structArray.uint16[this._pos2 + 12] = t;
        }, r.lineOffsetX.get = function () {
          return this._structArray.float32[this._pos4 + 7]
        }, r.lineOffsetX.set = function (t) {
          this._structArray.float32[this._pos4 + 7] = t;
        }, r.lineOffsetY.get = function () {
          return this._structArray.float32[this._pos4 + 8]
        }, r.lineOffsetY.set = function (t) {
          this._structArray.float32[this._pos4 + 8] = t;
        }, r.writingMode.get = function () {
          return this._structArray.uint8[this._pos1 + 36]
        }, r.writingMode.set = function (t) {
          this._structArray.uint8[this._pos1 + 36] = t;
        }, r.placedOrientation.get = function () {
          return this._structArray.uint8[this._pos1 + 37]
        }, r.placedOrientation.set = function (t) {
          this._structArray.uint8[this._pos1 + 37] = t;
        }, r.hidden.get = function () {
          return this._structArray.uint8[this._pos1 + 38]
        }, r.hidden.set = function (t) {
          this._structArray.uint8[this._pos1 + 38] = t;
        }, r.crossTileID.get = function () {
          return this._structArray.uint32[this._pos4 + 10]
        }, r.crossTileID.set = function (t) {
          this._structArray.uint32[this._pos4 + 10] = t;
        }, Object.defineProperties(e.prototype, r), e
      }(ci);
      Di.prototype.size = 44;
      var ji = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.get = function (t) {
          return new Di(this, t)
        }, e
      }(zi);
      En("PlacedSymbolArray", ji);
      var Ui = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e;
        var r = {
          anchorX: {
            configurable: !0
          },
          anchorY: {
            configurable: !0
          },
          rightJustifiedTextSymbolIndex: {
            configurable: !0
          },
          centerJustifiedTextSymbolIndex: {
            configurable: !0
          },
          leftJustifiedTextSymbolIndex: {
            configurable: !0
          },
          verticalPlacedTextSymbolIndex: {
            configurable: !0
          },
          key: {
            configurable: !0
          },
          textBoxStartIndex: {
            configurable: !0
          },
          textBoxEndIndex: {
            configurable: !0
          },
          verticalTextBoxStartIndex: {
            configurable: !0
          },
          verticalTextBoxEndIndex: {
            configurable: !0
          },
          iconBoxStartIndex: {
            configurable: !0
          },
          iconBoxEndIndex: {
            configurable: !0
          },
          featureIndex: {
            configurable: !0
          },
          numHorizontalGlyphVertices: {
            configurable: !0
          },
          numVerticalGlyphVertices: {
            configurable: !0
          },
          numIconVertices: {
            configurable: !0
          },
          crossTileID: {
            configurable: !0
          },
          textBoxScale: {
            configurable: !0
          },
          radialTextOffset: {
            configurable: !0
          }
        };
        return r.anchorX.get = function () {
          return this._structArray.int16[this._pos2 + 0]
        }, r.anchorX.set = function (t) {
          this._structArray.int16[this._pos2 + 0] = t;
        }, r.anchorY.get = function () {
          return this._structArray.int16[this._pos2 + 1]
        }, r.anchorY.set = function (t) {
          this._structArray.int16[this._pos2 + 1] = t;
        }, r.rightJustifiedTextSymbolIndex.get = function () {
          return this._structArray.int16[this._pos2 + 2]
        }, r.rightJustifiedTextSymbolIndex.set = function (t) {
          this._structArray.int16[this._pos2 + 2] = t;
        }, r.centerJustifiedTextSymbolIndex.get = function () {
          return this._structArray.int16[this._pos2 + 3]
        }, r.centerJustifiedTextSymbolIndex.set = function (t) {
          this._structArray.int16[this._pos2 + 3] = t;
        }, r.leftJustifiedTextSymbolIndex.get = function () {
          return this._structArray.int16[this._pos2 + 4]
        }, r.leftJustifiedTextSymbolIndex.set = function (t) {
          this._structArray.int16[this._pos2 + 4] = t;
        }, r.verticalPlacedTextSymbolIndex.get = function () {
          return this._structArray.int16[this._pos2 + 5]
        }, r.verticalPlacedTextSymbolIndex.set = function (t) {
          this._structArray.int16[this._pos2 + 5] = t;
        }, r.key.get = function () {
          return this._structArray.uint16[this._pos2 + 6]
        }, r.key.set = function (t) {
          this._structArray.uint16[this._pos2 + 6] = t;
        }, r.textBoxStartIndex.get = function () {
          return this._structArray.uint16[this._pos2 + 7]
        }, r.textBoxStartIndex.set = function (t) {
          this._structArray.uint16[this._pos2 + 7] = t;
        }, r.textBoxEndIndex.get = function () {
          return this._structArray.uint16[this._pos2 + 8]
        }, r.textBoxEndIndex.set = function (t) {
          this._structArray.uint16[this._pos2 + 8] = t;
        }, r.verticalTextBoxStartIndex.get = function () {
          return this._structArray.uint16[this._pos2 + 9]
        }, r.verticalTextBoxStartIndex.set = function (t) {
          this._structArray.uint16[this._pos2 + 9] = t;
        }, r.verticalTextBoxEndIndex.get = function () {
          return this._structArray.uint16[this._pos2 + 10]
        }, r.verticalTextBoxEndIndex.set = function (t) {
          this._structArray.uint16[this._pos2 + 10] = t;
        }, r.iconBoxStartIndex.get = function () {
          return this._structArray.uint16[this._pos2 + 11]
        }, r.iconBoxStartIndex.set = function (t) {
          this._structArray.uint16[this._pos2 + 11] = t;
        }, r.iconBoxEndIndex.get = function () {
          return this._structArray.uint16[this._pos2 + 12]
        }, r.iconBoxEndIndex.set = function (t) {
          this._structArray.uint16[this._pos2 + 12] = t;
        }, r.featureIndex.get = function () {
          return this._structArray.uint16[this._pos2 + 13]
        }, r.featureIndex.set = function (t) {
          this._structArray.uint16[this._pos2 + 13] = t;
        }, r.numHorizontalGlyphVertices.get = function () {
          return this._structArray.uint16[this._pos2 + 14]
        }, r.numHorizontalGlyphVertices.set = function (t) {
          this._structArray.uint16[this._pos2 + 14] = t;
        }, r.numVerticalGlyphVertices.get = function () {
          return this._structArray.uint16[this._pos2 + 15]
        }, r.numVerticalGlyphVertices.set = function (t) {
          this._structArray.uint16[this._pos2 + 15] = t;
        }, r.numIconVertices.get = function () {
          return this._structArray.uint16[this._pos2 + 16]
        }, r.numIconVertices.set = function (t) {
          this._structArray.uint16[this._pos2 + 16] = t;
        }, r.crossTileID.get = function () {
          return this._structArray.uint32[this._pos4 + 9]
        }, r.crossTileID.set = function (t) {
          this._structArray.uint32[this._pos4 + 9] = t;
        }, r.textBoxScale.get = function () {
          return this._structArray.float32[this._pos4 + 10]
        }, r.textBoxScale.set = function (t) {
          this._structArray.float32[this._pos4 + 10] = t;
        }, r.radialTextOffset.get = function () {
          return this._structArray.float32[this._pos4 + 11]
        }, r.radialTextOffset.set = function (t) {
          this._structArray.float32[this._pos4 + 11] = t;
        }, Object.defineProperties(e.prototype, r), e
      }(ci);
      Ui.prototype.size = 48;
      var Ri = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.get = function (t) {
          return new Ui(this, t)
        }, e
      }(Ii);
      En("SymbolInstanceArray", Ri);
      var qi = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e;
        var r = {
          offsetX: {
            configurable: !0
          }
        };
        return r.offsetX.get = function () {
          return this._structArray.float32[this._pos4 + 0]
        }, r.offsetX.set = function (t) {
          this._structArray.float32[this._pos4 + 0] = t;
        }, Object.defineProperties(e.prototype, r), e
      }(ci);
      qi.prototype.size = 4;
      var Ni = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getoffsetX = function (t) {
          return this.float32[1 * t + 0]
        }, e.prototype.get = function (t) {
          return new qi(this, t)
        }, e
      }(Ci);
      En("GlyphOffsetArray", Ni);
      var Ki = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e;
        var r = {
          x: {
            configurable: !0
          },
          y: {
            configurable: !0
          },
          tileUnitDistanceFromAnchor: {
            configurable: !0
          }
        };
        return r.x.get = function () {
          return this._structArray.int16[this._pos2 + 0]
        }, r.x.set = function (t) {
          this._structArray.int16[this._pos2 + 0] = t;
        }, r.y.get = function () {
          return this._structArray.int16[this._pos2 + 1]
        }, r.y.set = function (t) {
          this._structArray.int16[this._pos2 + 1] = t;
        }, r.tileUnitDistanceFromAnchor.get = function () {
          return this._structArray.int16[this._pos2 + 2]
        }, r.tileUnitDistanceFromAnchor.set = function (t) {
          this._structArray.int16[this._pos2 + 2] = t;
        }, Object.defineProperties(e.prototype, r), e
      }(ci);
      Ki.prototype.size = 6;
      var Zi = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getx = function (t) {
          return this.int16[3 * t + 0]
        }, e.prototype.gety = function (t) {
          return this.int16[3 * t + 1]
        }, e.prototype.gettileUnitDistanceFromAnchor = function (t) {
          return this.int16[3 * t + 2]
        }, e.prototype.get = function (t) {
          return new Ki(this, t)
        }, e
      }(Bi);
      En("SymbolLineVertexArray", Zi);
      var Xi = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e;
        var r = {
          featureIndex: {
            configurable: !0
          },
          sourceLayerIndex: {
            configurable: !0
          },
          bucketIndex: {
            configurable: !0
          }
        };
        return r.featureIndex.get = function () {
          return this._structArray.uint32[this._pos4 + 0]
        }, r.featureIndex.set = function (t) {
          this._structArray.uint32[this._pos4 + 0] = t;
        }, r.sourceLayerIndex.get = function () {
          return this._structArray.uint16[this._pos2 + 2]
        }, r.sourceLayerIndex.set = function (t) {
          this._structArray.uint16[this._pos2 + 2] = t;
        }, r.bucketIndex.get = function () {
          return this._structArray.uint16[this._pos2 + 3]
        }, r.bucketIndex.set = function (t) {
          this._structArray.uint16[this._pos2 + 3] = t;
        }, Object.defineProperties(e.prototype, r), e
      }(ci);
      Xi.prototype.size = 8;
      var Gi = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.get = function (t) {
          return new Xi(this, t)
        }, e
      }(Pi);
      En("FeatureIndexArray", Gi);
      var Hi = fi([{
          name: "a_pos",
          components: 2,
          type: "Int16"
        }], 4).members,
        Ji = function (t) {
          void 0 === t && (t = []), this.segments = t;
        };
  
      function Yi(t, e) {
        return 256 * (t = d(Math.floor(t), 0, 255)) + (e = d(Math.floor(e), 0, 255))
      }
      Ji.prototype.prepareSegment = function (t, e, r, n) {
        var i = this.segments[this.segments.length - 1];
        return t > Ji.MAX_VERTEX_ARRAY_LENGTH && B("Max vertices per segment is " + Ji.MAX_VERTEX_ARRAY_LENGTH + ": bucket requested " + t), (!i || i.vertexLength + t > Ji.MAX_VERTEX_ARRAY_LENGTH || i.sortKey !== n) && (i = {
          vertexOffset: e.length,
          primitiveOffset: r.length,
          vertexLength: 0,
          primitiveLength: 0
        }, void 0 !== n && (i.sortKey = n), this.segments.push(i)), i
      }, Ji.prototype.get = function () {
        return this.segments
      }, Ji.prototype.destroy = function () {
        for (var t = 0, e = this.segments; t < e.length; t += 1) {
          var r = e[t];
          for (var n in r.vaos) r.vaos[n].destroy();
        }
      }, Ji.simpleSegment = function (t, e, r, n) {
        return new Ji([{
          vertexOffset: t,
          primitiveOffset: e,
          vertexLength: r,
          primitiveLength: n,
          vaos: {},
          sortKey: 0
        }])
      }, Ji.MAX_VERTEX_ARRAY_LENGTH = Math.pow(2, 16) - 1, En("SegmentVector", Ji);
      var $i = function () {
        this.ids = [], this.positions = [], this.indexed = !1;
      };
  
      function Wi(t, e, r) {
        var n = t[e];
        t[e] = t[r], t[r] = n;
      }
      $i.prototype.add = function (t, e, r, n) {
        this.ids.push(t), this.positions.push(e, r, n);
      }, $i.prototype.getPositions = function (t) {
        for (var e = 0, r = this.ids.length - 1; e < r;) {
          var n = e + r >> 1;
          this.ids[n] >= t ? r = n : e = n + 1;
        }
        for (var i = []; this.ids[e] === t;) {
          var a = this.positions[3 * e],
            o = this.positions[3 * e + 1],
            s = this.positions[3 * e + 2];
          i.push({
            index: a,
            start: o,
            end: s
          }), e++;
        }
        return i
      }, $i.serialize = function (t, e) {
        var r = new Float64Array(t.ids),
          n = new Uint32Array(t.positions);
        return function t(e, r, n, i) {
          if (n >= i) return;
          var a = e[n + i >> 1];
          var o = n - 1;
          var s = i + 1;
          for (;;) {
            do {
              o++;
            } while (e[o] < a);
            do {
              s--;
            } while (e[s] > a);
            if (o >= s) break;
            Wi(e, o, s), Wi(r, 3 * o, 3 * s), Wi(r, 3 * o + 1, 3 * s + 1), Wi(r, 3 * o + 2, 3 * s + 2);
          }
          t(e, r, n, s);
          t(e, r, s + 1, i);
        }(r, n, 0, r.length - 1), e.push(r.buffer, n.buffer), {
          ids: r,
          positions: n
        }
      }, $i.deserialize = function (t) {
        var e = new $i;
        return e.ids = t.ids, e.positions = t.positions, e.indexed = !0, e
      }, En("FeaturePositionMap", $i);
      var Qi = function (t, e) {
          this.gl = t.gl, this.location = e;
        },
        ta = function (t) {
          function e(e, r) {
            t.call(this, e, r), this.current = 0;
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.set = function (t) {
            this.current !== t && (this.current = t, this.gl.uniform1i(this.location, t));
          }, e
        }(Qi),
        ea = function (t) {
          function e(e, r) {
            t.call(this, e, r), this.current = 0;
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.set = function (t) {
            this.current !== t && (this.current = t, this.gl.uniform1f(this.location, t));
          }, e
        }(Qi),
        ra = function (t) {
          function e(e, r) {
            t.call(this, e, r), this.current = [0, 0];
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.set = function (t) {
            t[0] === this.current[0] && t[1] === this.current[1] || (this.current = t, this.gl.uniform2f(this.location, t[0], t[1]));
          }, e
        }(Qi),
        na = function (t) {
          function e(e, r) {
            t.call(this, e, r), this.current = [0, 0, 0];
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.set = function (t) {
            t[0] === this.current[0] && t[1] === this.current[1] && t[2] === this.current[2] || (this.current = t, this.gl.uniform3f(this.location, t[0], t[1], t[2]));
          }, e
        }(Qi),
        ia = function (t) {
          function e(e, r) {
            t.call(this, e, r), this.current = [0, 0, 0, 0];
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.set = function (t) {
            t[0] === this.current[0] && t[1] === this.current[1] && t[2] === this.current[2] && t[3] === this.current[3] || (this.current = t, this.gl.uniform4f(this.location, t[0], t[1], t[2], t[3]));
          }, e
        }(Qi),
        aa = function (t) {
          function e(e, r) {
            t.call(this, e, r), this.current = pe.transparent;
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.set = function (t) {
            t.r === this.current.r && t.g === this.current.g && t.b === this.current.b && t.a === this.current.a || (this.current = t, this.gl.uniform4f(this.location, t.r, t.g, t.b, t.a));
          }, e
        }(Qi),
        oa = new Float32Array(16),
        sa = function (t) {
          function e(e, r) {
            t.call(this, e, r), this.current = oa;
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.set = function (t) {
            if (t[12] !== this.current[12] || t[0] !== this.current[0]) return this.current = t, void this.gl.uniformMatrix4fv(this.location, !1, t);
            for (var e = 1; e < 16; e++)
              if (t[e] !== this.current[e]) {
                this.current = t, this.gl.uniformMatrix4fv(this.location, !1, t);
                break
              }
          }, e
        }(Qi);
  
      function ua(t) {
        return [Yi(255 * t.r, 255 * t.g), Yi(255 * t.b, 255 * t.a)]
      }
      var la = function (t, e, r) {
        this.value = t, this.names = e, this.uniformNames = this.names.map(function (t) {
          return "u_" + t
        }), this.type = r, this.maxValue = -1 / 0;
      };
      la.prototype.defines = function () {
        return this.names.map(function (t) {
          return "#define HAS_UNIFORM_u_" + t
        })
      }, la.prototype.setConstantPatternPositions = function () {}, la.prototype.populatePaintArray = function () {}, la.prototype.updatePaintArray = function () {}, la.prototype.upload = function () {}, la.prototype.destroy = function () {}, la.prototype.setUniforms = function (t, e, r, n) {
        e.set(n.constantOr(this.value));
      }, la.prototype.getBinding = function (t, e) {
        return "color" === this.type ? new aa(t, e) : new ea(t, e)
      }, la.serialize = function (t) {
        var e = t.value,
          r = t.names,
          n = t.type;
        return {
          value: Tn(e),
          names: r,
          type: n
        }
      }, la.deserialize = function (t) {
        var e = t.value,
          r = t.names,
          n = t.type;
        return new la(Vn(e), r, n)
      };
      var pa = function (t, e, r) {
        this.value = t, this.names = e, this.uniformNames = this.names.map(function (t) {
          return "u_" + t
        }), this.type = r, this.maxValue = -1 / 0, this.patternPositions = {
          patternTo: null,
          patternFrom: null
        };
      };
      pa.prototype.defines = function () {
        return this.names.map(function (t) {
          return "#define HAS_UNIFORM_u_" + t
        })
      }, pa.prototype.populatePaintArray = function () {}, pa.prototype.updatePaintArray = function () {}, pa.prototype.upload = function () {}, pa.prototype.destroy = function () {}, pa.prototype.setConstantPatternPositions = function (t, e) {
        this.patternPositions.patternTo = t.tlbr, this.patternPositions.patternFrom = e.tlbr;
      }, pa.prototype.setUniforms = function (t, e, r, n, i) {
        var a = this.patternPositions;
        "u_pattern_to" === i && a.patternTo && e.set(a.patternTo), "u_pattern_from" === i && a.patternFrom && e.set(a.patternFrom);
      }, pa.prototype.getBinding = function (t, e) {
        return new ia(t, e)
      };
      var ca = function (t, e, r, n) {
        this.expression = t, this.names = e, this.type = r, this.uniformNames = this.names.map(function (t) {
          return "a_" + t
        }), this.maxValue = -1 / 0, this.paintVertexAttributes = e.map(function (t) {
          return {
            name: "a_" + t,
            type: "Float32",
            components: "color" === r ? 2 : 1,
            offset: 0
          }
        }), this.paintVertexArray = new n;
      };
      ca.prototype.defines = function () {
        return []
      }, ca.prototype.setConstantPatternPositions = function () {}, ca.prototype.populatePaintArray = function (t, e, r, n) {
        var i = this.paintVertexArray,
          a = i.length;
        i.reserve(t);
        var o = this.expression.evaluate(new Hn(0), e, {}, n);
        if ("color" === this.type)
          for (var s = ua(o), u = a; u < t; u++) i.emplaceBack(s[0], s[1]);
        else {
          for (var l = a; l < t; l++) i.emplaceBack(o);
          this.maxValue = Math.max(this.maxValue, o);
        }
      }, ca.prototype.updatePaintArray = function (t, e, r, n) {
        var i = this.paintVertexArray,
          a = this.expression.evaluate({
            zoom: 0
          }, r, n);
        if ("color" === this.type)
          for (var o = ua(a), s = t; s < e; s++) i.emplace(s, o[0], o[1]);
        else {
          for (var u = t; u < e; u++) i.emplace(u, a);
          this.maxValue = Math.max(this.maxValue, a);
        }
      }, ca.prototype.upload = function (t) {
        this.paintVertexArray && this.paintVertexArray.arrayBuffer && (this.paintVertexBuffer && this.paintVertexBuffer.buffer ? this.paintVertexBuffer.updateData(this.paintVertexArray) : this.paintVertexBuffer = t.createVertexBuffer(this.paintVertexArray, this.paintVertexAttributes, this.expression.isStateDependent));
      }, ca.prototype.destroy = function () {
        this.paintVertexBuffer && this.paintVertexBuffer.destroy();
      }, ca.prototype.setUniforms = function (t, e) {
        e.set(0);
      }, ca.prototype.getBinding = function (t, e) {
        return new ea(t, e)
      };
      var ha = function (t, e, r, n, i, a) {
        this.expression = t, this.names = e, this.uniformNames = this.names.map(function (t) {
          return "u_" + t + "_t"
        }), this.type = r, this.useIntegerZoom = n, this.zoom = i, this.maxValue = -1 / 0;
        var o = a;
        this.paintVertexAttributes = e.map(function (t) {
          return {
            name: "a_" + t,
            type: "Float32",
            components: "color" === r ? 4 : 2,
            offset: 0
          }
        }), this.paintVertexArray = new o;
      };
      ha.prototype.defines = function () {
        return []
      }, ha.prototype.setConstantPatternPositions = function () {}, ha.prototype.populatePaintArray = function (t, e, r, n) {
        var i = this.paintVertexArray,
          a = i.length;
        i.reserve(t);
        var o = this.expression.evaluate(new Hn(this.zoom), e, {}, n),
          s = this.expression.evaluate(new Hn(this.zoom + 1), e, {}, n);
        if ("color" === this.type)
          for (var u = ua(o), l = ua(s), p = a; p < t; p++) i.emplaceBack(u[0], u[1], l[0], l[1]);
        else {
          for (var c = a; c < t; c++) i.emplaceBack(o, s);
          this.maxValue = Math.max(this.maxValue, o, s);
        }
      }, ha.prototype.updatePaintArray = function (t, e, r, n) {
        var i = this.paintVertexArray,
          a = this.expression.evaluate({
            zoom: this.zoom
          }, r, n),
          o = this.expression.evaluate({
            zoom: this.zoom + 1
          }, r, n);
        if ("color" === this.type)
          for (var s = ua(a), u = ua(o), l = t; l < e; l++) i.emplace(l, s[0], s[1], u[0], u[1]);
        else {
          for (var p = t; p < e; p++) i.emplace(p, a, o);
          this.maxValue = Math.max(this.maxValue, a, o);
        }
      }, ha.prototype.upload = function (t) {
        this.paintVertexArray && this.paintVertexArray.arrayBuffer && (this.paintVertexBuffer && this.paintVertexBuffer.buffer ? this.paintVertexBuffer.updateData(this.paintVertexArray) : this.paintVertexBuffer = t.createVertexBuffer(this.paintVertexArray, this.paintVertexAttributes, this.expression.isStateDependent));
      }, ha.prototype.destroy = function () {
        this.paintVertexBuffer && this.paintVertexBuffer.destroy();
      }, ha.prototype.interpolationFactor = function (t) {
        return this.useIntegerZoom ? this.expression.interpolationFactor(Math.floor(t), this.zoom, this.zoom + 1) : this.expression.interpolationFactor(t, this.zoom, this.zoom + 1)
      }, ha.prototype.setUniforms = function (t, e, r) {
        e.set(this.interpolationFactor(r.zoom));
      }, ha.prototype.getBinding = function (t, e) {
        return new ea(t, e)
      };
      var fa = function (t, e, r, n, i, a, o) {
        this.expression = t, this.names = e, this.type = r, this.uniformNames = this.names.map(function (t) {
          return "u_" + t + "_t"
        }), this.useIntegerZoom = n, this.zoom = i, this.maxValue = -1 / 0, this.layerId = o, this.paintVertexAttributes = e.map(function (t) {
          return {
            name: "a_" + t,
            type: "Uint16",
            components: 4,
            offset: 0
          }
        }), this.zoomInPaintVertexArray = new a, this.zoomOutPaintVertexArray = new a;
      };
      fa.prototype.defines = function () {
        return []
      }, fa.prototype.setConstantPatternPositions = function () {}, fa.prototype.populatePaintArray = function (t, e, r) {
        var n = this.zoomInPaintVertexArray,
          i = this.zoomOutPaintVertexArray,
          a = this.layerId,
          o = n.length;
        if (n.reserve(t), i.reserve(t), r && e.patterns && e.patterns[a]) {
          var s = e.patterns[a],
            u = s.min,
            l = s.mid,
            p = s.max,
            c = r[u],
            h = r[l],
            f = r[p];
          if (!c || !h || !f) return;
          for (var y = o; y < t; y++) n.emplaceBack(h.tl[0], h.tl[1], h.br[0], h.br[1], c.tl[0], c.tl[1], c.br[0], c.br[1]), i.emplaceBack(h.tl[0], h.tl[1], h.br[0], h.br[1], f.tl[0], f.tl[1], f.br[0], f.br[1]);
        }
      }, fa.prototype.updatePaintArray = function (t, e, r, n, i) {
        var a = this.zoomInPaintVertexArray,
          o = this.zoomOutPaintVertexArray,
          s = this.layerId;
        if (i && r.patterns && r.patterns[s]) {
          var u = r.patterns[s],
            l = u.min,
            p = u.mid,
            c = u.max,
            h = i[l],
            f = i[p],
            y = i[c];
          if (!h || !f || !y) return;
          for (var d = t; d < e; d++) a.emplace(d, f.tl[0], f.tl[1], f.br[0], f.br[1], h.tl[0], h.tl[1], h.br[0], h.br[1]), o.emplace(d, f.tl[0], f.tl[1], f.br[0], f.br[1], y.tl[0], y.tl[1], y.br[0], y.br[1]);
        }
      }, fa.prototype.upload = function (t) {
        this.zoomInPaintVertexArray && this.zoomInPaintVertexArray.arrayBuffer && this.zoomOutPaintVertexArray && this.zoomOutPaintVertexArray.arrayBuffer && (this.zoomInPaintVertexBuffer = t.createVertexBuffer(this.zoomInPaintVertexArray, this.paintVertexAttributes, this.expression.isStateDependent), this.zoomOutPaintVertexBuffer = t.createVertexBuffer(this.zoomOutPaintVertexArray, this.paintVertexAttributes, this.expression.isStateDependent));
      }, fa.prototype.destroy = function () {
        this.zoomOutPaintVertexBuffer && this.zoomOutPaintVertexBuffer.destroy(), this.zoomInPaintVertexBuffer && this.zoomInPaintVertexBuffer.destroy();
      }, fa.prototype.setUniforms = function (t, e) {
        e.set(0);
      }, fa.prototype.getBinding = function (t, e) {
        return new ea(t, e)
      };
      var ya = function () {
        this.binders = {}, this.cacheKey = "", this._buffers = [], this._featureMap = new $i, this._bufferOffset = 0;
      };
      ya.createDynamic = function (t, e, r) {
        var n = new ya,
          i = [];
        for (var a in t.paint._values)
          if (r(a)) {
            var o = t.paint.get(a);
            if (o instanceof ei && Ir(o.property.specification)) {
              var s = ma(a, t.type),
                u = o.property.specification.type,
                l = o.property.useIntegerZoom;
              if ("cross-faded" === o.property.specification["property-type"] || "cross-faded-data-driven" === o.property.specification["property-type"])
                if ("constant" === o.value.kind) n.binders[a] = new pa(o.value.value, s, u), i.push("/u_" + a);
                else {
                  var p = va(a, u, "source");
                  n.binders[a] = new fa(o.value, s, u, l, e, p, t.id), i.push("/a_" + a);
                }
              else if ("constant" === o.value.kind) n.binders[a] = new la(o.value.value, s, u), i.push("/u_" + a);
              else if ("source" === o.value.kind) {
                var c = va(a, u, "source");
                n.binders[a] = new ca(o.value, s, u, c), i.push("/a_" + a);
              } else {
                var h = va(a, u, "composite");
                n.binders[a] = new ha(o.value, s, u, l, e, h), i.push("/z_" + a);
              }
            }
          } return n.cacheKey = i.sort().join(""), n
      }, ya.prototype.populatePaintArrays = function (t, e, r, n, i) {
        for (var a in this.binders) {
          this.binders[a].populatePaintArray(t, e, n, i);
        }
        void 0 !== e.id && this._featureMap.add(+e.id, r, this._bufferOffset, t), this._bufferOffset = t;
      }, ya.prototype.setConstantPatternPositions = function (t, e) {
        for (var r in this.binders) {
          this.binders[r].setConstantPatternPositions(t, e);
        }
      }, ya.prototype.updatePaintArrays = function (t, e, r, n) {
        var i = !1;
        for (var a in t)
          for (var o = 0, s = this._featureMap.getPositions(+a); o < s.length; o += 1) {
            var u = s[o],
              l = e.feature(u.index);
            for (var p in this.binders) {
              var c = this.binders[p];
              if (!(c instanceof la || c instanceof pa) && !0 === c.expression.isStateDependent) {
                var h = r.paint.get(p);
                c.expression = h.value, c.updatePaintArray(u.start, u.end, l, t[a], n), i = !0;
              }
            }
          }
        return i
      }, ya.prototype.defines = function () {
        var t = [];
        for (var e in this.binders) t.push.apply(t, this.binders[e].defines());
        return t
      }, ya.prototype.getPaintVertexBuffers = function () {
        return this._buffers
      }, ya.prototype.getUniforms = function (t, e) {
        var r = [];
        for (var n in this.binders)
          for (var i = this.binders[n], a = 0, o = i.uniformNames; a < o.length; a += 1) {
            var s = o[a];
            if (e[s]) {
              var u = i.getBinding(t, e[s]);
              r.push({
                name: s,
                property: n,
                binding: u
              });
            }
          }
        return r
      }, ya.prototype.setUniforms = function (t, e, r, n) {
        for (var i = 0, a = e; i < a.length; i += 1) {
          var o = a[i],
            s = o.name,
            u = o.property,
            l = o.binding;
          this.binders[u].setUniforms(t, l, n, r.get(u), s);
        }
      }, ya.prototype.updatePatternPaintBuffers = function (t) {
        var e = [];
        for (var r in this.binders) {
          var n = this.binders[r];
          if (n instanceof fa) {
            var i = 2 === t.fromScale ? n.zoomInPaintVertexBuffer : n.zoomOutPaintVertexBuffer;
            i && e.push(i);
          } else(n instanceof ca || n instanceof ha) && n.paintVertexBuffer && e.push(n.paintVertexBuffer);
        }
        this._buffers = e;
      }, ya.prototype.upload = function (t) {
        for (var e in this.binders) this.binders[e].upload(t);
        var r = [];
        for (var n in this.binders) {
          var i = this.binders[n];
          (i instanceof ca || i instanceof ha) && i.paintVertexBuffer && r.push(i.paintVertexBuffer);
        }
        this._buffers = r;
      }, ya.prototype.destroy = function () {
        for (var t in this.binders) this.binders[t].destroy();
      };
      var da = function (t, e, r, n) {
        void 0 === n && (n = function () {
          return !0
        }), this.programConfigurations = {};
        for (var i = 0, a = e; i < a.length; i += 1) {
          var o = a[i];
          this.programConfigurations[o.id] = ya.createDynamic(o, r, n), this.programConfigurations[o.id].layoutAttributes = t;
        }
        this.needsUpload = !1;
      };
  
      function ma(t, e) {
        return {
          "text-opacity": ["opacity"],
          "icon-opacity": ["opacity"],
          "text-color": ["fill_color"],
          "icon-color": ["fill_color"],
          "text-halo-color": ["halo_color"],
          "icon-halo-color": ["halo_color"],
          "text-halo-blur": ["halo_blur"],
          "icon-halo-blur": ["halo_blur"],
          "text-halo-width": ["halo_width"],
          "icon-halo-width": ["halo_width"],
          "line-gap-width": ["gapwidth"],
          "line-pattern": ["pattern_to", "pattern_from"],
          "fill-pattern": ["pattern_to", "pattern_from"],
          "fill-extrusion-pattern": ["pattern_to", "pattern_from"]
        } [t] || [t.replace(e + "-", "").replace(/-/g, "_")]
      }
  
      function va(t, e, r) {
        var n = {
            color: {
              source: Vi,
              composite: Fi
            },
            number: {
              source: Ci,
              composite: Vi
            }
          },
          i = function (t) {
            return {
              "line-pattern": {
                source: xi,
                composite: xi
              },
              "fill-pattern": {
                source: xi,
                composite: xi
              },
              "fill-extrusion-pattern": {
                source: xi,
                composite: xi
              }
            } [t]
          }(t);
        return i && i[r] || n[e][r]
      }
      da.prototype.populatePaintArrays = function (t, e, r, n, i) {
        for (var a in this.programConfigurations) this.programConfigurations[a].populatePaintArrays(t, e, r, n, i);
        this.needsUpload = !0;
      }, da.prototype.updatePaintArrays = function (t, e, r, n) {
        for (var i = 0, a = r; i < a.length; i += 1) {
          var o = a[i];
          this.needsUpload = this.programConfigurations[o.id].updatePaintArrays(t, e, o, n) || this.needsUpload;
        }
      }, da.prototype.get = function (t) {
        return this.programConfigurations[t]
      }, da.prototype.upload = function (t) {
        if (this.needsUpload) {
          for (var e in this.programConfigurations) this.programConfigurations[e].upload(t);
          this.needsUpload = !1;
        }
      }, da.prototype.destroy = function () {
        for (var t in this.programConfigurations) this.programConfigurations[t].destroy();
      }, En("ConstantBinder", la), En("CrossFadedConstantBinder", pa), En("SourceExpressionBinder", ca), En("CrossFadedCompositeBinder", fa), En("CompositeExpressionBinder", ha), En("ProgramConfiguration", ya, {
        omit: ["_buffers"]
      }), En("ProgramConfigurationSet", da);
      var ga = 8192;
      var xa, ba = (xa = 15, {
        min: -1 * Math.pow(2, xa - 1),
        max: Math.pow(2, xa - 1) - 1
      });
  
      function _a(t) {
        for (var e = ga / t.extent, r = t.loadGeometry(), n = 0; n < r.length; n++)
          for (var i = r[n], a = 0; a < i.length; a++) {
            var o = i[a];
            o.x = Math.round(o.x * e), o.y = Math.round(o.y * e), (o.x < ba.min || o.x > ba.max || o.y < ba.min || o.y > ba.max) && (B("Geometry exceeds allowed extent, reduce your vector tile buffer size"), o.x = d(o.x, ba.min, ba.max), o.y = d(o.y, ba.min, ba.max));
          }
        return r
      }
  
      function wa(t, e, r, n, i) {
        t.emplaceBack(2 * e + (n + 1) / 2, 2 * r + (i + 1) / 2);
      }
      var Aa = function (t) {
        this.zoom = t.zoom, this.overscaling = t.overscaling, this.layers = t.layers, this.layerIds = this.layers.map(function (t) {
          return t.id
        }), this.index = t.index, this.hasPattern = !1, this.layoutVertexArray = new di, this.indexArray = new Ei, this.segments = new Ji, this.programConfigurations = new da(Hi, t.layers, t.zoom), this.stateDependentLayerIds = this.layers.filter(function (t) {
          return t.isStateDependent()
        }).map(function (t) {
          return t.id
        });
      };
  
      function ka(t, e) {
        for (var r = 0; r < t.length; r++)
          if (Ta(e, t[r])) return !0;
        for (var n = 0; n < e.length; n++)
          if (Ta(t, e[n])) return !0;
        return !!Ca(t, e)
      }
  
      function Sa(t, e, r) {
        return !!Ta(t, e) || !!Pa(e, t, r)
      }
  
      function za(t, e) {
        if (1 === t.length) return Ma(e, t[0]);
        for (var r = 0; r < e.length; r++)
          for (var n = e[r], i = 0; i < n.length; i++)
            if (Ta(t, n[i])) return !0;
        for (var a = 0; a < t.length; a++)
          if (Ma(e, t[a])) return !0;
        for (var o = 0; o < e.length; o++)
          if (Ca(t, e[o])) return !0;
        return !1
      }
  
      function Ia(t, e, r) {
        if (t.length > 1) {
          if (Ca(t, e)) return !0;
          for (var n = 0; n < e.length; n++)
            if (Pa(e[n], t, r)) return !0
        }
        for (var i = 0; i < t.length; i++)
          if (Pa(t[i], e, r)) return !0;
        return !1
      }
  
      function Ca(t, e) {
        if (0 === t.length || 0 === e.length) return !1;
        for (var r = 0; r < t.length - 1; r++)
          for (var n = t[r], i = t[r + 1], a = 0; a < e.length - 1; a++) {
            if (Ba(n, i, e[a], e[a + 1])) return !0
          }
        return !1
      }
  
      function Ba(t, e, r, n) {
        return P(t, r, n) !== P(e, r, n) && P(t, e, r) !== P(t, e, n)
      }
  
      function Pa(t, e, r) {
        var n = r * r;
        if (1 === e.length) return t.distSqr(e[0]) < n;
        for (var i = 1; i < e.length; i++) {
          if (Ea(t, e[i - 1], e[i]) < n) return !0
        }
        return !1
      }
  
      function Ea(t, e, r) {
        var n = e.distSqr(r);
        if (0 === n) return t.distSqr(e);
        var i = ((t.x - e.x) * (r.x - e.x) + (t.y - e.y) * (r.y - e.y)) / n;
        return i < 0 ? t.distSqr(e) : i > 1 ? t.distSqr(r) : t.distSqr(r.sub(e)._mult(i)._add(e))
      }
  
      function Ma(t, e) {
        for (var r, n, i, a = !1, o = 0; o < t.length; o++)
          for (var s = 0, u = (r = t[o]).length - 1; s < r.length; u = s++) n = r[s], i = r[u], n.y > e.y != i.y > e.y && e.x < (i.x - n.x) * (e.y - n.y) / (i.y - n.y) + n.x && (a = !a);
        return a
      }
  
      function Ta(t, e) {
        for (var r = !1, n = 0, i = t.length - 1; n < t.length; i = n++) {
          var a = t[n],
            o = t[i];
          a.y > e.y != o.y > e.y && e.x < (o.x - a.x) * (e.y - a.y) / (o.y - a.y) + a.x && (r = !r);
        }
        return r
      }
  
      function Va(t, e, r) {
        var n = r[0],
          i = r[2];
        if (t.x < n.x && e.x < n.x || t.x > i.x && e.x > i.x || t.y < n.y && e.y < n.y || t.y > i.y && e.y > i.y) return !1;
        var a = P(t, e, r[0]);
        return a !== P(t, e, r[1]) || a !== P(t, e, r[2]) || a !== P(t, e, r[3])
      }
  
      function Fa(t, e, r) {
        var n = e.paint.get(t).value;
        return "constant" === n.kind ? n.value : r.programConfigurations.get(e.id).binders[t].maxValue
      }
  
      function Oa(t) {
        return Math.sqrt(t[0] * t[0] + t[1] * t[1])
      }
  
      function La(t, e, r, n, i) {
        if (!e[0] && !e[1]) return t;
        var a = p.convert(e)._mult(i);
        "viewport" === r && a._rotate(-n);
        for (var o = [], s = 0; s < t.length; s++) {
          var u = t[s];
          o.push(u.sub(a));
        }
        return o
      }
      Aa.prototype.populate = function (t, e) {
        var r = this.layers[0],
          n = [],
          i = null;
        "circle" === r.type && (i = r.layout.get("circle-sort-key"));
        for (var a = 0, o = t; a < o.length; a += 1) {
          var s = o[a],
            u = s.feature,
            l = s.index,
            p = s.sourceLayerIndex;
          if (this.layers[0]._featureFilter(new Hn(this.zoom), u)) {
            var c = _a(u),
              h = i ? i.evaluate(u, {}) : void 0,
              f = {
                id: u.id,
                properties: u.properties,
                type: u.type,
                sourceLayerIndex: p,
                index: l,
                geometry: c,
                patterns: {},
                sortKey: h
              };
            n.push(f);
          }
        }
        i && n.sort(function (t, e) {
          return t.sortKey - e.sortKey
        });
        for (var y = 0, d = n; y < d.length; y += 1) {
          var m = d[y],
            v = m,
            g = v.geometry,
            x = v.index,
            b = v.sourceLayerIndex,
            _ = t[x].feature;
          this.addFeature(m, g, x), e.featureIndex.insert(_, g, x, b, this.index);
        }
      }, Aa.prototype.update = function (t, e, r) {
        this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t, e, this.stateDependentLayers, r);
      }, Aa.prototype.isEmpty = function () {
        return 0 === this.layoutVertexArray.length
      }, Aa.prototype.uploadPending = function () {
        return !this.uploaded || this.programConfigurations.needsUpload
      }, Aa.prototype.upload = function (t) {
        this.uploaded || (this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, Hi), this.indexBuffer = t.createIndexBuffer(this.indexArray)), this.programConfigurations.upload(t), this.uploaded = !0;
      }, Aa.prototype.destroy = function () {
        this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy());
      }, Aa.prototype.addFeature = function (t, e, r) {
        for (var n = 0, i = e; n < i.length; n += 1)
          for (var a = 0, o = i[n]; a < o.length; a += 1) {
            var s = o[a],
              u = s.x,
              l = s.y;
            if (!(u < 0 || u >= ga || l < 0 || l >= ga)) {
              var p = this.segments.prepareSegment(4, this.layoutVertexArray, this.indexArray, t.sortKey),
                c = p.vertexLength;
              wa(this.layoutVertexArray, u, l, -1, -1), wa(this.layoutVertexArray, u, l, 1, -1), wa(this.layoutVertexArray, u, l, 1, 1), wa(this.layoutVertexArray, u, l, -1, 1), this.indexArray.emplaceBack(c, c + 1, c + 2), this.indexArray.emplaceBack(c, c + 3, c + 2), p.vertexLength += 4, p.primitiveLength += 2;
            }
          }
        this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t, r, {});
      }, En("CircleBucket", Aa, {
        omit: ["layers"]
      });
      var Da = new ui({
          "circle-sort-key": new ii(Rt.layout_circle["circle-sort-key"])
        }),
        ja = {
          paint: new ui({
            "circle-radius": new ii(Rt.paint_circle["circle-radius"]),
            "circle-color": new ii(Rt.paint_circle["circle-color"]),
            "circle-blur": new ii(Rt.paint_circle["circle-blur"]),
            "circle-opacity": new ii(Rt.paint_circle["circle-opacity"]),
            "circle-translate": new ni(Rt.paint_circle["circle-translate"]),
            "circle-translate-anchor": new ni(Rt.paint_circle["circle-translate-anchor"]),
            "circle-pitch-scale": new ni(Rt.paint_circle["circle-pitch-scale"]),
            "circle-pitch-alignment": new ni(Rt.paint_circle["circle-pitch-alignment"]),
            "circle-stroke-width": new ii(Rt.paint_circle["circle-stroke-width"]),
            "circle-stroke-color": new ii(Rt.paint_circle["circle-stroke-color"]),
            "circle-stroke-opacity": new ii(Rt.paint_circle["circle-stroke-opacity"])
          }),
          layout: Da
        },
        Ua = "undefined" != typeof Float32Array ? Float32Array : Array;
      Math.PI;
      var Ra, qa;
      Ra = new Ua(3), Ua != Float32Array && (Ra[0] = 0, Ra[1] = 0, Ra[2] = 0), qa = Ra;
  
      function Na(t, e, r) {
        var n = e[0],
          i = e[1],
          a = e[2],
          o = e[3];
        return t[0] = r[0] * n + r[4] * i + r[8] * a + r[12] * o, t[1] = r[1] * n + r[5] * i + r[9] * a + r[13] * o, t[2] = r[2] * n + r[6] * i + r[10] * a + r[14] * o, t[3] = r[3] * n + r[7] * i + r[11] * a + r[15] * o, t
      }! function () {
        var t = function () {
          var t = new Ua(4);
          return Ua != Float32Array && (t[0] = 0, t[1] = 0, t[2] = 0, t[3] = 0), t
        }();
      }();
      var Ka = function (t) {
        function e(e) {
          t.call(this, e, ja);
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.createBucket = function (t) {
          return new Aa(t)
        }, e.prototype.queryRadius = function (t) {
          var e = t;
          return Fa("circle-radius", this, e) + Fa("circle-stroke-width", this, e) + Oa(this.paint.get("circle-translate"))
        }, e.prototype.queryIntersectsFeature = function (t, e, r, n, i, a, o, s) {
          for (var u = La(t, this.paint.get("circle-translate"), this.paint.get("circle-translate-anchor"), a.angle, o), l = this.paint.get("circle-radius").evaluate(e, r) + this.paint.get("circle-stroke-width").evaluate(e, r), p = "map" === this.paint.get("circle-pitch-alignment"), c = p ? u : function (t, e) {
              return t.map(function (t) {
                return Za(t, e)
              })
            }(u, s), h = p ? l * o : l, f = 0, y = n; f < y.length; f += 1)
            for (var d = 0, m = y[f]; d < m.length; d += 1) {
              var v = m[d],
                g = p ? v : Za(v, s),
                x = h,
                b = Na([], [v.x, v.y, 0, 1], s);
              if ("viewport" === this.paint.get("circle-pitch-scale") && "map" === this.paint.get("circle-pitch-alignment") ? x *= b[3] / a.cameraToCenterDistance : "map" === this.paint.get("circle-pitch-scale") && "viewport" === this.paint.get("circle-pitch-alignment") && (x *= a.cameraToCenterDistance / b[3]), Sa(c, g, x)) return !0
            }
          return !1
        }, e
      }(li);
  
      function Za(t, e) {
        var r = Na([], [t.x, t.y, 0, 1], e);
        return new p(r[0] / r[3], r[1] / r[3])
      }
      var Xa = function (t) {
        function e() {
          t.apply(this, arguments);
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e
      }(Aa);
  
      function Ga(t, e, r, n) {
        var i = e.width,
          a = e.height;
        if (n) {
          if (n instanceof Uint8ClampedArray) n = new Uint8Array(n.buffer);
          else if (n.length !== i * a * r) throw new RangeError("mismatched image size")
        } else n = new Uint8Array(i * a * r);
        return t.width = i, t.height = a, t.data = n, t
      }
  
      function Ha(t, e, r) {
        var n = e.width,
          i = e.height;
        if (n !== t.width || i !== t.height) {
          var a = Ga({}, {
            width: n,
            height: i
          }, r);
          Ja(t, a, {
            x: 0,
            y: 0
          }, {
            x: 0,
            y: 0
          }, {
            width: Math.min(t.width, n),
            height: Math.min(t.height, i)
          }, r), t.width = n, t.height = i, t.data = a.data;
        }
      }
  
      function Ja(t, e, r, n, i, a) {
        if (0 === i.width || 0 === i.height) return e;
        if (i.width > t.width || i.height > t.height || r.x > t.width - i.width || r.y > t.height - i.height) throw new RangeError("out of range source coordinates for image copy");
        if (i.width > e.width || i.height > e.height || n.x > e.width - i.width || n.y > e.height - i.height) throw new RangeError("out of range destination coordinates for image copy");
        for (var o = t.data, s = e.data, u = 0; u < i.height; u++)
          for (var l = ((r.y + u) * t.width + r.x) * a, p = ((n.y + u) * e.width + n.x) * a, c = 0; c < i.width * a; c++) s[p + c] = o[l + c];
        return e
      }
      En("HeatmapBucket", Xa, {
        omit: ["layers"]
      });
      var Ya = function (t, e) {
        Ga(this, t, 1, e);
      };
      Ya.prototype.resize = function (t) {
        Ha(this, t, 1);
      }, Ya.prototype.clone = function () {
        return new Ya({
          width: this.width,
          height: this.height
        }, new Uint8Array(this.data))
      }, Ya.copy = function (t, e, r, n, i) {
        Ja(t, e, r, n, i, 1);
      };
      var $a = function (t, e) {
        Ga(this, t, 4, e);
      };
      $a.prototype.resize = function (t) {
        Ha(this, t, 4);
      }, $a.prototype.replace = function (t, e) {
        e ? this.data.set(t) : t instanceof Uint8ClampedArray ? this.data = new Uint8Array(t.buffer) : this.data = t;
      }, $a.prototype.clone = function () {
        return new $a({
          width: this.width,
          height: this.height
        }, new Uint8Array(this.data))
      }, $a.copy = function (t, e, r, n, i) {
        Ja(t, e, r, n, i, 4);
      }, En("AlphaImage", Ya), En("RGBAImage", $a);
      var Wa = {
        paint: new ui({
          "heatmap-radius": new ii(Rt.paint_heatmap["heatmap-radius"]),
          "heatmap-weight": new ii(Rt.paint_heatmap["heatmap-weight"]),
          "heatmap-intensity": new ni(Rt.paint_heatmap["heatmap-intensity"]),
          "heatmap-color": new si(Rt.paint_heatmap["heatmap-color"]),
          "heatmap-opacity": new ni(Rt.paint_heatmap["heatmap-opacity"])
        })
      };
  
      function Qa(t, e) {
        for (var r = new Uint8Array(1024), n = {}, i = 0, a = 0; i < 256; i++, a += 4) {
          n[e] = i / 255;
          var o = t.evaluate(n);
          r[a + 0] = Math.floor(255 * o.r / o.a), r[a + 1] = Math.floor(255 * o.g / o.a), r[a + 2] = Math.floor(255 * o.b / o.a), r[a + 3] = Math.floor(255 * o.a);
        }
        return new $a({
          width: 256,
          height: 1
        }, r)
      }
      var to = function (t) {
          function e(e) {
            t.call(this, e, Wa), this._updateColorRamp();
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.createBucket = function (t) {
            return new Xa(t)
          }, e.prototype._handleSpecialPaintPropertyUpdate = function (t) {
            "heatmap-color" === t && this._updateColorRamp();
          }, e.prototype._updateColorRamp = function () {
            var t = this._transitionablePaint._values["heatmap-color"].value.expression;
            this.colorRamp = Qa(t, "heatmapDensity"), this.colorRampTexture = null;
          }, e.prototype.resize = function () {
            this.heatmapFbo && (this.heatmapFbo.destroy(), this.heatmapFbo = null);
          }, e.prototype.queryRadius = function () {
            return 0
          }, e.prototype.queryIntersectsFeature = function () {
            return !1
          }, e.prototype.hasOffscreenPass = function () {
            return 0 !== this.paint.get("heatmap-opacity") && "none" !== this.visibility
          }, e
        }(li),
        eo = {
          paint: new ui({
            "hillshade-illumination-direction": new ni(Rt.paint_hillshade["hillshade-illumination-direction"]),
            "hillshade-illumination-anchor": new ni(Rt.paint_hillshade["hillshade-illumination-anchor"]),
            "hillshade-exaggeration": new ni(Rt.paint_hillshade["hillshade-exaggeration"]),
            "hillshade-shadow-color": new ni(Rt.paint_hillshade["hillshade-shadow-color"]),
            "hillshade-highlight-color": new ni(Rt.paint_hillshade["hillshade-highlight-color"]),
            "hillshade-accent-color": new ni(Rt.paint_hillshade["hillshade-accent-color"])
          })
        },
        ro = function (t) {
          function e(e) {
            t.call(this, e, eo);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.hasOffscreenPass = function () {
            return 0 !== this.paint.get("hillshade-exaggeration") && "none" !== this.visibility
          }, e
        }(li),
        no = fi([{
          name: "a_pos",
          components: 2,
          type: "Int16"
        }], 4).members,
        io = oo,
        ao = oo;
  
      function oo(t, e, r) {
        r = r || 2;
        var n, i, a, o, s, u, l, p = e && e.length,
          c = p ? e[0] * r : t.length,
          h = so(t, 0, c, r, !0),
          f = [];
        if (!h || h.next === h.prev) return f;
        if (p && (h = function (t, e, r, n) {
            var i, a, o, s, u, l = [];
            for (i = 0, a = e.length; i < a; i++) o = e[i] * n, s = i < a - 1 ? e[i + 1] * n : t.length, (u = so(t, o, s, n, !1)) === u.next && (u.steiner = !0), l.push(go(u));
            for (l.sort(yo), i = 0; i < l.length; i++) mo(l[i], r), r = uo(r, r.next);
            return r
          }(t, e, h, r)), t.length > 80 * r) {
          n = a = t[0], i = o = t[1];
          for (var y = r; y < c; y += r)(s = t[y]) < n && (n = s), (u = t[y + 1]) < i && (i = u), s > a && (a = s), u > o && (o = u);
          l = 0 !== (l = Math.max(a - n, o - i)) ? 1 / l : 0;
        }
        return lo(h, f, r, n, i, l), f
      }
  
      function so(t, e, r, n, i) {
        var a, o;
        if (i === Bo(t, e, r, n) > 0)
          for (a = e; a < r; a += n) o = zo(a, t[a], t[a + 1], o);
        else
          for (a = r - n; a >= e; a -= n) o = zo(a, t[a], t[a + 1], o);
        return o && wo(o, o.next) && (Io(o), o = o.next), o
      }
  
      function uo(t, e) {
        if (!t) return t;
        e || (e = t);
        var r, n = t;
        do {
          if (r = !1, n.steiner || !wo(n, n.next) && 0 !== _o(n.prev, n, n.next)) n = n.next;
          else {
            if (Io(n), (n = e = n.prev) === n.next) break;
            r = !0;
          }
        } while (r || n !== e);
        return e
      }
  
      function lo(t, e, r, n, i, a, o) {
        if (t) {
          !o && a && function (t, e, r, n) {
            var i = t;
            do {
              null === i.z && (i.z = vo(i.x, i.y, e, r, n)), i.prevZ = i.prev, i.nextZ = i.next, i = i.next;
            } while (i !== t);
            i.prevZ.nextZ = null, i.prevZ = null,
              function (t) {
                var e, r, n, i, a, o, s, u, l = 1;
                do {
                  for (r = t, t = null, a = null, o = 0; r;) {
                    for (o++, n = r, s = 0, e = 0; e < l && (s++, n = n.nextZ); e++);
                    for (u = l; s > 0 || u > 0 && n;) 0 !== s && (0 === u || !n || r.z <= n.z) ? (i = r, r = r.nextZ, s--) : (i = n, n = n.nextZ, u--), a ? a.nextZ = i : t = i, i.prevZ = a, a = i;
                    r = n;
                  }
                  a.nextZ = null, l *= 2;
                } while (o > 1)
              }(i);
          }(t, n, i, a);
          for (var s, u, l = t; t.prev !== t.next;)
            if (s = t.prev, u = t.next, a ? co(t, n, i, a) : po(t)) e.push(s.i / r), e.push(t.i / r), e.push(u.i / r), Io(t), t = u.next, l = u.next;
            else if ((t = u) === l) {
            o ? 1 === o ? lo(t = ho(t, e, r), e, r, n, i, a, 2) : 2 === o && fo(t, e, r, n, i, a) : lo(uo(t), e, r, n, i, a, 1);
            break
          }
        }
      }
  
      function po(t) {
        var e = t.prev,
          r = t,
          n = t.next;
        if (_o(e, r, n) >= 0) return !1;
        for (var i = t.next.next; i !== t.prev;) {
          if (xo(e.x, e.y, r.x, r.y, n.x, n.y, i.x, i.y) && _o(i.prev, i, i.next) >= 0) return !1;
          i = i.next;
        }
        return !0
      }
  
      function co(t, e, r, n) {
        var i = t.prev,
          a = t,
          o = t.next;
        if (_o(i, a, o) >= 0) return !1;
        for (var s = i.x < a.x ? i.x < o.x ? i.x : o.x : a.x < o.x ? a.x : o.x, u = i.y < a.y ? i.y < o.y ? i.y : o.y : a.y < o.y ? a.y : o.y, l = i.x > a.x ? i.x > o.x ? i.x : o.x : a.x > o.x ? a.x : o.x, p = i.y > a.y ? i.y > o.y ? i.y : o.y : a.y > o.y ? a.y : o.y, c = vo(s, u, e, r, n), h = vo(l, p, e, r, n), f = t.prevZ, y = t.nextZ; f && f.z >= c && y && y.z <= h;) {
          if (f !== t.prev && f !== t.next && xo(i.x, i.y, a.x, a.y, o.x, o.y, f.x, f.y) && _o(f.prev, f, f.next) >= 0) return !1;
          if (f = f.prevZ, y !== t.prev && y !== t.next && xo(i.x, i.y, a.x, a.y, o.x, o.y, y.x, y.y) && _o(y.prev, y, y.next) >= 0) return !1;
          y = y.nextZ;
        }
        for (; f && f.z >= c;) {
          if (f !== t.prev && f !== t.next && xo(i.x, i.y, a.x, a.y, o.x, o.y, f.x, f.y) && _o(f.prev, f, f.next) >= 0) return !1;
          f = f.prevZ;
        }
        for (; y && y.z <= h;) {
          if (y !== t.prev && y !== t.next && xo(i.x, i.y, a.x, a.y, o.x, o.y, y.x, y.y) && _o(y.prev, y, y.next) >= 0) return !1;
          y = y.nextZ;
        }
        return !0
      }
  
      function ho(t, e, r) {
        var n = t;
        do {
          var i = n.prev,
            a = n.next.next;
          !wo(i, a) && Ao(i, n, n.next, a) && ko(i, a) && ko(a, i) && (e.push(i.i / r), e.push(n.i / r), e.push(a.i / r), Io(n), Io(n.next), n = t = a), n = n.next;
        } while (n !== t);
        return n
      }
  
      function fo(t, e, r, n, i, a) {
        var o = t;
        do {
          for (var s = o.next.next; s !== o.prev;) {
            if (o.i !== s.i && bo(o, s)) {
              var u = So(o, s);
              return o = uo(o, o.next), u = uo(u, u.next), lo(o, e, r, n, i, a), void lo(u, e, r, n, i, a)
            }
            s = s.next;
          }
          o = o.next;
        } while (o !== t)
      }
  
      function yo(t, e) {
        return t.x - e.x
      }
  
      function mo(t, e) {
        if (e = function (t, e) {
            var r, n = e,
              i = t.x,
              a = t.y,
              o = -1 / 0;
            do {
              if (a <= n.y && a >= n.next.y && n.next.y !== n.y) {
                var s = n.x + (a - n.y) * (n.next.x - n.x) / (n.next.y - n.y);
                if (s <= i && s > o) {
                  if (o = s, s === i) {
                    if (a === n.y) return n;
                    if (a === n.next.y) return n.next
                  }
                  r = n.x < n.next.x ? n : n.next;
                }
              }
              n = n.next;
            } while (n !== e);
            if (!r) return null;
            if (i === o) return r.prev;
            var u, l = r,
              p = r.x,
              c = r.y,
              h = 1 / 0;
            n = r.next;
            for (; n !== l;) i >= n.x && n.x >= p && i !== n.x && xo(a < c ? i : o, a, p, c, a < c ? o : i, a, n.x, n.y) && ((u = Math.abs(a - n.y) / (i - n.x)) < h || u === h && n.x > r.x) && ko(n, t) && (r = n, h = u), n = n.next;
            return r
          }(t, e)) {
          var r = So(e, t);
          uo(r, r.next);
        }
      }
  
      function vo(t, e, r, n, i) {
        return (t = 1431655765 & ((t = 858993459 & ((t = 252645135 & ((t = 16711935 & ((t = 32767 * (t - r) * i) | t << 8)) | t << 4)) | t << 2)) | t << 1)) | (e = 1431655765 & ((e = 858993459 & ((e = 252645135 & ((e = 16711935 & ((e = 32767 * (e - n) * i) | e << 8)) | e << 4)) | e << 2)) | e << 1)) << 1
      }
  
      function go(t) {
        var e = t,
          r = t;
        do {
          (e.x < r.x || e.x === r.x && e.y < r.y) && (r = e), e = e.next;
        } while (e !== t);
        return r
      }
  
      function xo(t, e, r, n, i, a, o, s) {
        return (i - o) * (e - s) - (t - o) * (a - s) >= 0 && (t - o) * (n - s) - (r - o) * (e - s) >= 0 && (r - o) * (a - s) - (i - o) * (n - s) >= 0
      }
  
      function bo(t, e) {
        return t.next.i !== e.i && t.prev.i !== e.i && ! function (t, e) {
          var r = t;
          do {
            if (r.i !== t.i && r.next.i !== t.i && r.i !== e.i && r.next.i !== e.i && Ao(r, r.next, t, e)) return !0;
            r = r.next;
          } while (r !== t);
          return !1
        }(t, e) && ko(t, e) && ko(e, t) && function (t, e) {
          var r = t,
            n = !1,
            i = (t.x + e.x) / 2,
            a = (t.y + e.y) / 2;
          do {
            r.y > a != r.next.y > a && r.next.y !== r.y && i < (r.next.x - r.x) * (a - r.y) / (r.next.y - r.y) + r.x && (n = !n), r = r.next;
          } while (r !== t);
          return n
        }(t, e)
      }
  
      function _o(t, e, r) {
        return (e.y - t.y) * (r.x - e.x) - (e.x - t.x) * (r.y - e.y)
      }
  
      function wo(t, e) {
        return t.x === e.x && t.y === e.y
      }
  
      function Ao(t, e, r, n) {
        return !!(wo(t, e) && wo(r, n) || wo(t, n) && wo(r, e)) || _o(t, e, r) > 0 != _o(t, e, n) > 0 && _o(r, n, t) > 0 != _o(r, n, e) > 0
      }
  
      function ko(t, e) {
        return _o(t.prev, t, t.next) < 0 ? _o(t, e, t.next) >= 0 && _o(t, t.prev, e) >= 0 : _o(t, e, t.prev) < 0 || _o(t, t.next, e) < 0
      }
  
      function So(t, e) {
        var r = new Co(t.i, t.x, t.y),
          n = new Co(e.i, e.x, e.y),
          i = t.next,
          a = e.prev;
        return t.next = e, e.prev = t, r.next = i, i.prev = r, n.next = r, r.prev = n, a.next = n, n.prev = a, n
      }
  
      function zo(t, e, r, n) {
        var i = new Co(t, e, r);
        return n ? (i.next = n.next, i.prev = n, n.next.prev = i, n.next = i) : (i.prev = i, i.next = i), i
      }
  
      function Io(t) {
        t.next.prev = t.prev, t.prev.next = t.next, t.prevZ && (t.prevZ.nextZ = t.nextZ), t.nextZ && (t.nextZ.prevZ = t.prevZ);
      }
  
      function Co(t, e, r) {
        this.i = t, this.x = e, this.y = r, this.prev = null, this.next = null, this.z = null, this.prevZ = null, this.nextZ = null, this.steiner = !1;
      }
  
      function Bo(t, e, r, n) {
        for (var i = 0, a = e, o = r - n; a < r; a += n) i += (t[o] - t[a]) * (t[a + 1] + t[o + 1]), o = a;
        return i
      }
  
      function Po(t, e, r, n, i) {
        ! function t(e, r, n, i, a) {
          for (; i > n;) {
            if (i - n > 600) {
              var o = i - n + 1,
                s = r - n + 1,
                u = Math.log(o),
                l = .5 * Math.exp(2 * u / 3),
                p = .5 * Math.sqrt(u * l * (o - l) / o) * (s - o / 2 < 0 ? -1 : 1),
                c = Math.max(n, Math.floor(r - s * l / o + p)),
                h = Math.min(i, Math.floor(r + (o - s) * l / o + p));
              t(e, r, c, h, a);
            }
            var f = e[r],
              y = n,
              d = i;
            for (Eo(e, n, r), a(e[i], f) > 0 && Eo(e, n, i); y < d;) {
              for (Eo(e, y, d), y++, d--; a(e[y], f) < 0;) y++;
              for (; a(e[d], f) > 0;) d--;
            }
            0 === a(e[n], f) ? Eo(e, n, d) : Eo(e, ++d, i), d <= r && (n = d + 1), r <= d && (i = d - 1);
          }
        }(t, e, r || 0, n || t.length - 1, i || Mo);
      }
  
      function Eo(t, e, r) {
        var n = t[e];
        t[e] = t[r], t[r] = n;
      }
  
      function Mo(t, e) {
        return t < e ? -1 : t > e ? 1 : 0
      }
  
      function To(t, e) {
        var r = t.length;
        if (r <= 1) return [t];
        for (var n, i, a = [], o = 0; o < r; o++) {
          var s = E(t[o]);
          0 !== s && (t[o].area = Math.abs(s), void 0 === i && (i = s < 0), i === s < 0 ? (n && a.push(n), n = [t[o]]) : n.push(t[o]));
        }
        if (n && a.push(n), e > 1)
          for (var u = 0; u < a.length; u++) a[u].length <= e || (Po(a[u], e, 1, a[u].length - 1, Vo), a[u] = a[u].slice(0, e));
        return a
      }
  
      function Vo(t, e) {
        return e.area - t.area
      }
  
      function Fo(t, e, r) {
        for (var n = r.patternDependencies, i = !1, a = 0, o = e; a < o.length; a += 1) {
          var s = o[a].paint.get(t + "-pattern");
          s.isConstant() || (i = !0);
          var u = s.constantOr(null);
          u && (i = !0, n[u.to] = !0, n[u.from] = !0);
        }
        return i
      }
  
      function Oo(t, e, r, n, i) {
        for (var a = i.patternDependencies, o = 0, s = e; o < s.length; o += 1) {
          var u = s[o],
            l = u.paint.get(t + "-pattern").value;
          if ("constant" !== l.kind) {
            var p = l.evaluate({
                zoom: n - 1
              }, r, {}),
              c = l.evaluate({
                zoom: n
              }, r, {}),
              h = l.evaluate({
                zoom: n + 1
              }, r, {});
            a[p] = !0, a[c] = !0, a[h] = !0, r.patterns[u.id] = {
              min: p,
              mid: c,
              max: h
            };
          }
        }
        return r
      }
      oo.deviation = function (t, e, r, n) {
        var i = e && e.length,
          a = i ? e[0] * r : t.length,
          o = Math.abs(Bo(t, 0, a, r));
        if (i)
          for (var s = 0, u = e.length; s < u; s++) {
            var l = e[s] * r,
              p = s < u - 1 ? e[s + 1] * r : t.length;
            o -= Math.abs(Bo(t, l, p, r));
          }
        var c = 0;
        for (s = 0; s < n.length; s += 3) {
          var h = n[s] * r,
            f = n[s + 1] * r,
            y = n[s + 2] * r;
          c += Math.abs((t[h] - t[y]) * (t[f + 1] - t[h + 1]) - (t[h] - t[f]) * (t[y + 1] - t[h + 1]));
        }
        return 0 === o && 0 === c ? 0 : Math.abs((c - o) / o)
      }, oo.flatten = function (t) {
        for (var e = t[0][0].length, r = {
            vertices: [],
            holes: [],
            dimensions: e
          }, n = 0, i = 0; i < t.length; i++) {
          for (var a = 0; a < t[i].length; a++)
            for (var o = 0; o < e; o++) r.vertices.push(t[i][a][o]);
          i > 0 && (n += t[i - 1].length, r.holes.push(n));
        }
        return r
      }, io.default = ao;
      var Lo = function (t) {
        this.zoom = t.zoom, this.overscaling = t.overscaling, this.layers = t.layers, this.layerIds = this.layers.map(function (t) {
          return t.id
        }), this.index = t.index, this.hasPattern = !1, this.patternFeatures = [], this.layoutVertexArray = new di, this.indexArray = new Ei, this.indexArray2 = new Mi, this.programConfigurations = new da(no, t.layers, t.zoom), this.segments = new Ji, this.segments2 = new Ji, this.stateDependentLayerIds = this.layers.filter(function (t) {
          return t.isStateDependent()
        }).map(function (t) {
          return t.id
        });
      };
      Lo.prototype.populate = function (t, e) {
        this.hasPattern = Fo("fill", this.layers, e);
        for (var r = this.layers[0].layout.get("fill-sort-key"), n = [], i = 0, a = t; i < a.length; i += 1) {
          var o = a[i],
            s = o.feature,
            u = o.index,
            l = o.sourceLayerIndex;
          if (this.layers[0]._featureFilter(new Hn(this.zoom), s)) {
            var p = _a(s),
              c = r ? r.evaluate(s, {}) : void 0,
              h = {
                id: s.id,
                properties: s.properties,
                type: s.type,
                sourceLayerIndex: l,
                index: u,
                geometry: p,
                patterns: {},
                sortKey: c
              };
            n.push(h);
          }
        }
        r && n.sort(function (t, e) {
          return t.sortKey - e.sortKey
        });
        for (var f = 0, y = n; f < y.length; f += 1) {
          var d = y[f],
            m = d,
            v = m.geometry,
            g = m.index,
            x = m.sourceLayerIndex;
          if (this.hasPattern) {
            var b = Oo("fill", this.layers, d, this.zoom, e);
            this.patternFeatures.push(b);
          } else this.addFeature(d, v, g, {});
          var _ = t[g].feature;
          e.featureIndex.insert(_, v, g, x, this.index);
        }
      }, Lo.prototype.update = function (t, e, r) {
        this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t, e, this.stateDependentLayers, r);
      }, Lo.prototype.addFeatures = function (t, e) {
        for (var r = 0, n = this.patternFeatures; r < n.length; r += 1) {
          var i = n[r];
          this.addFeature(i, i.geometry, i.index, e);
        }
      }, Lo.prototype.isEmpty = function () {
        return 0 === this.layoutVertexArray.length
      }, Lo.prototype.uploadPending = function () {
        return !this.uploaded || this.programConfigurations.needsUpload
      }, Lo.prototype.upload = function (t) {
        this.uploaded || (this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, no), this.indexBuffer = t.createIndexBuffer(this.indexArray), this.indexBuffer2 = t.createIndexBuffer(this.indexArray2)), this.programConfigurations.upload(t), this.uploaded = !0;
      }, Lo.prototype.destroy = function () {
        this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.indexBuffer2.destroy(), this.programConfigurations.destroy(), this.segments.destroy(), this.segments2.destroy());
      }, Lo.prototype.addFeature = function (t, e, r, n) {
        for (var i = 0, a = To(e, 500); i < a.length; i += 1) {
          for (var o = a[i], s = 0, u = 0, l = o; u < l.length; u += 1) {
            s += l[u].length;
          }
          for (var p = this.segments.prepareSegment(s, this.layoutVertexArray, this.indexArray), c = p.vertexLength, h = [], f = [], y = 0, d = o; y < d.length; y += 1) {
            var m = d[y];
            if (0 !== m.length) {
              m !== o[0] && f.push(h.length / 2);
              var v = this.segments2.prepareSegment(m.length, this.layoutVertexArray, this.indexArray2),
                g = v.vertexLength;
              this.layoutVertexArray.emplaceBack(m[0].x, m[0].y), this.indexArray2.emplaceBack(g + m.length - 1, g), h.push(m[0].x), h.push(m[0].y);
              for (var x = 1; x < m.length; x++) this.layoutVertexArray.emplaceBack(m[x].x, m[x].y), this.indexArray2.emplaceBack(g + x - 1, g + x), h.push(m[x].x), h.push(m[x].y);
              v.vertexLength += m.length, v.primitiveLength += m.length;
            }
          }
          for (var b = io(h, f), _ = 0; _ < b.length; _ += 3) this.indexArray.emplaceBack(c + b[_], c + b[_ + 1], c + b[_ + 2]);
          p.vertexLength += s, p.primitiveLength += b.length / 3;
        }
        this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t, r, n);
      }, En("FillBucket", Lo, {
        omit: ["layers", "patternFeatures"]
      });
      var Do = new ui({
          "fill-sort-key": new ii(Rt.layout_fill["fill-sort-key"])
        }),
        jo = {
          paint: new ui({
            "fill-antialias": new ni(Rt.paint_fill["fill-antialias"]),
            "fill-opacity": new ii(Rt.paint_fill["fill-opacity"]),
            "fill-color": new ii(Rt.paint_fill["fill-color"]),
            "fill-outline-color": new ii(Rt.paint_fill["fill-outline-color"]),
            "fill-translate": new ni(Rt.paint_fill["fill-translate"]),
            "fill-translate-anchor": new ni(Rt.paint_fill["fill-translate-anchor"]),
            "fill-pattern": new ai(Rt.paint_fill["fill-pattern"])
          }),
          layout: Do
        },
        Uo = function (t) {
          function e(e) {
            t.call(this, e, jo);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.recalculate = function (e) {
            t.prototype.recalculate.call(this, e);
            var r = this.paint._values["fill-outline-color"];
            "constant" === r.value.kind && void 0 === r.value.value && (this.paint._values["fill-outline-color"] = this.paint._values["fill-color"]);
          }, e.prototype.createBucket = function (t) {
            return new Lo(t)
          }, e.prototype.queryRadius = function () {
            return Oa(this.paint.get("fill-translate"))
          }, e.prototype.queryIntersectsFeature = function (t, e, r, n, i, a, o) {
            return za(La(t, this.paint.get("fill-translate"), this.paint.get("fill-translate-anchor"), a.angle, o), n)
          }, e.prototype.isTileClipped = function () {
            return !0
          }, e
        }(li),
        Ro = fi([{
          name: "a_pos",
          components: 2,
          type: "Int16"
        }, {
          name: "a_normal_ed",
          components: 4,
          type: "Int16"
        }], 4).members,
        qo = No;
  
      function No(t, e, r, n, i) {
        this.properties = {}, this.extent = r, this.type = 0, this._pbf = t, this._geometry = -1, this._keys = n, this._values = i, t.readFields(Ko, this, e);
      }
  
      function Ko(t, e, r) {
        1 == t ? e.id = r.readVarint() : 2 == t ? function (t, e) {
          var r = t.readVarint() + t.pos;
          for (; t.pos < r;) {
            var n = e._keys[t.readVarint()],
              i = e._values[t.readVarint()];
            e.properties[n] = i;
          }
        }(r, e) : 3 == t ? e.type = r.readVarint() : 4 == t && (e._geometry = r.pos);
      }
  
      function Zo(t) {
        for (var e, r, n = 0, i = 0, a = t.length, o = a - 1; i < a; o = i++) e = t[i], n += ((r = t[o]).x - e.x) * (e.y + r.y);
        return n
      }
      No.types = ["Unknown", "Point", "LineString", "Polygon"], No.prototype.loadGeometry = function () {
        var t = this._pbf;
        t.pos = this._geometry;
        for (var e, r = t.readVarint() + t.pos, n = 1, i = 0, a = 0, o = 0, s = []; t.pos < r;) {
          if (i <= 0) {
            var u = t.readVarint();
            n = 7 & u, i = u >> 3;
          }
          if (i--, 1 === n || 2 === n) a += t.readSVarint(), o += t.readSVarint(), 1 === n && (e && s.push(e), e = []), e.push(new p(a, o));
          else {
            if (7 !== n) throw new Error("unknown command " + n);
            e && e.push(e[0].clone());
          }
        }
        return e && s.push(e), s
      }, No.prototype.bbox = function () {
        var t = this._pbf;
        t.pos = this._geometry;
        for (var e = t.readVarint() + t.pos, r = 1, n = 0, i = 0, a = 0, o = 1 / 0, s = -1 / 0, u = 1 / 0, l = -1 / 0; t.pos < e;) {
          if (n <= 0) {
            var p = t.readVarint();
            r = 7 & p, n = p >> 3;
          }
          if (n--, 1 === r || 2 === r)(i += t.readSVarint()) < o && (o = i), i > s && (s = i), (a += t.readSVarint()) < u && (u = a), a > l && (l = a);
          else if (7 !== r) throw new Error("unknown command " + r)
        }
        return [o, u, s, l]
      }, No.prototype.toGeoJSON = function (t, e, r) {
        var n, i, a = this.extent * Math.pow(2, r),
          o = this.extent * t,
          s = this.extent * e,
          u = this.loadGeometry(),
          l = No.types[this.type];
  
        function p(t) {
          for (var e = 0; e < t.length; e++) {
            var r = t[e],
              n = 180 - 360 * (r.y + s) / a;
            t[e] = [360 * (r.x + o) / a - 180, 360 / Math.PI * Math.atan(Math.exp(n * Math.PI / 180)) - 90];
          }
        }
        switch (this.type) {
          case 1:
            var c = [];
            for (n = 0; n < u.length; n++) c[n] = u[n][0];
            p(u = c);
            break;
          case 2:
            for (n = 0; n < u.length; n++) p(u[n]);
            break;
          case 3:
            for (u = function (t) {
                var e = t.length;
                if (e <= 1) return [t];
                for (var r, n, i = [], a = 0; a < e; a++) {
                  var o = Zo(t[a]);
                  0 !== o && (void 0 === n && (n = o < 0), n === o < 0 ? (r && i.push(r), r = [t[a]]) : r.push(t[a]));
                }
                r && i.push(r);
                return i
              }(u), n = 0; n < u.length; n++)
              for (i = 0; i < u[n].length; i++) p(u[n][i]);
        }
        1 === u.length ? u = u[0] : l = "Multi" + l;
        var h = {
          type: "Feature",
          geometry: {
            type: l,
            coordinates: u
          },
          properties: this.properties
        };
        return "id" in this && (h.id = this.id), h
      };
      var Xo = Go;
  
      function Go(t, e) {
        this.version = 1, this.name = null, this.extent = 4096, this.length = 0, this._pbf = t, this._keys = [], this._values = [], this._features = [], t.readFields(Ho, this, e), this.length = this._features.length;
      }
  
      function Ho(t, e, r) {
        15 === t ? e.version = r.readVarint() : 1 === t ? e.name = r.readString() : 5 === t ? e.extent = r.readVarint() : 2 === t ? e._features.push(r.pos) : 3 === t ? e._keys.push(r.readString()) : 4 === t && e._values.push(function (t) {
          var e = null,
            r = t.readVarint() + t.pos;
          for (; t.pos < r;) {
            var n = t.readVarint() >> 3;
            e = 1 === n ? t.readString() : 2 === n ? t.readFloat() : 3 === n ? t.readDouble() : 4 === n ? t.readVarint64() : 5 === n ? t.readVarint() : 6 === n ? t.readSVarint() : 7 === n ? t.readBoolean() : null;
          }
          return e
        }(r));
      }
  
      function Jo(t, e, r) {
        if (3 === t) {
          var n = new Xo(r, r.readVarint() + r.pos);
          n.length && (e[n.name] = n);
        }
      }
      Go.prototype.feature = function (t) {
        if (t < 0 || t >= this._features.length) throw new Error("feature index out of bounds");
        this._pbf.pos = this._features[t];
        var e = this._pbf.readVarint() + this._pbf.pos;
        return new qo(this._pbf, e, this.extent, this._keys, this._values)
      };
      var Yo = {
          VectorTile: function (t, e) {
            this.layers = t.readFields(Jo, {}, e);
          },
          VectorTileFeature: qo,
          VectorTileLayer: Xo
        },
        $o = Yo.VectorTileFeature.types,
        Wo = Math.pow(2, 13);
  
      function Qo(t, e, r, n, i, a, o, s) {
        t.emplaceBack(e, r, 2 * Math.floor(n * Wo) + o, i * Wo * 2, a * Wo * 2, Math.round(s));
      }
      var ts = function (t) {
        this.zoom = t.zoom, this.overscaling = t.overscaling, this.layers = t.layers, this.layerIds = this.layers.map(function (t) {
          return t.id
        }), this.index = t.index, this.hasPattern = !1, this.layoutVertexArray = new vi, this.indexArray = new Ei, this.programConfigurations = new da(Ro, t.layers, t.zoom), this.segments = new Ji, this.stateDependentLayerIds = this.layers.filter(function (t) {
          return t.isStateDependent()
        }).map(function (t) {
          return t.id
        });
      };
  
      function es(t, e) {
        return t.x === e.x && (t.x < 0 || t.x > ga) || t.y === e.y && (t.y < 0 || t.y > ga)
      }
  
      function rs(t) {
        return t.every(function (t) {
          return t.x < 0
        }) || t.every(function (t) {
          return t.x > ga
        }) || t.every(function (t) {
          return t.y < 0
        }) || t.every(function (t) {
          return t.y > ga
        })
      }
      ts.prototype.populate = function (t, e) {
        this.features = [], this.hasPattern = Fo("fill-extrusion", this.layers, e);
        for (var r = 0, n = t; r < n.length; r += 1) {
          var i = n[r],
            a = i.feature,
            o = i.index,
            s = i.sourceLayerIndex;
          if (this.layers[0]._featureFilter(new Hn(this.zoom), a)) {
            var u = _a(a),
              l = {
                sourceLayerIndex: s,
                index: o,
                geometry: u,
                properties: a.properties,
                type: a.type,
                patterns: {}
              };
            void 0 !== a.id && (l.id = a.id), this.hasPattern ? this.features.push(Oo("fill-extrusion", this.layers, l, this.zoom, e)) : this.addFeature(l, u, o, {}), e.featureIndex.insert(a, u, o, s, this.index, !0);
          }
        }
      }, ts.prototype.addFeatures = function (t, e) {
        for (var r = 0, n = this.features; r < n.length; r += 1) {
          var i = n[r],
            a = i.geometry;
          this.addFeature(i, a, i.index, e);
        }
      }, ts.prototype.update = function (t, e, r) {
        this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t, e, this.stateDependentLayers, r);
      }, ts.prototype.isEmpty = function () {
        return 0 === this.layoutVertexArray.length
      }, ts.prototype.uploadPending = function () {
        return !this.uploaded || this.programConfigurations.needsUpload
      }, ts.prototype.upload = function (t) {
        this.uploaded || (this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, Ro), this.indexBuffer = t.createIndexBuffer(this.indexArray)), this.programConfigurations.upload(t), this.uploaded = !0;
      }, ts.prototype.destroy = function () {
        this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy());
      }, ts.prototype.addFeature = function (t, e, r, n) {
        for (var i = 0, a = To(e, 500); i < a.length; i += 1) {
          for (var o = a[i], s = 0, u = 0, l = o; u < l.length; u += 1) {
            s += l[u].length;
          }
          for (var p = this.segments.prepareSegment(4, this.layoutVertexArray, this.indexArray), c = 0, h = o; c < h.length; c += 1) {
            var f = h[c];
            if (0 !== f.length && !rs(f))
              for (var y = 0, d = 0; d < f.length; d++) {
                var m = f[d];
                if (d >= 1) {
                  var v = f[d - 1];
                  if (!es(m, v)) {
                    p.vertexLength + 4 > Ji.MAX_VERTEX_ARRAY_LENGTH && (p = this.segments.prepareSegment(4, this.layoutVertexArray, this.indexArray));
                    var g = m.sub(v)._perp()._unit(),
                      x = v.dist(m);
                    y + x > 32768 && (y = 0), Qo(this.layoutVertexArray, m.x, m.y, g.x, g.y, 0, 0, y), Qo(this.layoutVertexArray, m.x, m.y, g.x, g.y, 0, 1, y), y += x, Qo(this.layoutVertexArray, v.x, v.y, g.x, g.y, 0, 0, y), Qo(this.layoutVertexArray, v.x, v.y, g.x, g.y, 0, 1, y);
                    var b = p.vertexLength;
                    this.indexArray.emplaceBack(b, b + 2, b + 1), this.indexArray.emplaceBack(b + 1, b + 2, b + 3), p.vertexLength += 4, p.primitiveLength += 2;
                  }
                }
              }
          }
          if (p.vertexLength + s > Ji.MAX_VERTEX_ARRAY_LENGTH && (p = this.segments.prepareSegment(s, this.layoutVertexArray, this.indexArray)), "Polygon" === $o[t.type]) {
            for (var _ = [], w = [], A = p.vertexLength, k = 0, S = o; k < S.length; k += 1) {
              var z = S[k];
              if (0 !== z.length) {
                z !== o[0] && w.push(_.length / 2);
                for (var I = 0; I < z.length; I++) {
                  var C = z[I];
                  Qo(this.layoutVertexArray, C.x, C.y, 0, 0, 1, 1, 0), _.push(C.x), _.push(C.y);
                }
              }
            }
            for (var B = io(_, w), P = 0; P < B.length; P += 3) this.indexArray.emplaceBack(A + B[P], A + B[P + 2], A + B[P + 1]);
            p.primitiveLength += B.length / 3, p.vertexLength += s;
          }
        }
        this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t, r, n);
      }, En("FillExtrusionBucket", ts, {
        omit: ["layers", "features"]
      });
      var ns = {
          paint: new ui({
            "fill-extrusion-opacity": new ni(Rt["paint_fill-extrusion"]["fill-extrusion-opacity"]),
            "fill-extrusion-color": new ii(Rt["paint_fill-extrusion"]["fill-extrusion-color"]),
            "fill-extrusion-translate": new ni(Rt["paint_fill-extrusion"]["fill-extrusion-translate"]),
            "fill-extrusion-translate-anchor": new ni(Rt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),
            "fill-extrusion-pattern": new ai(Rt["paint_fill-extrusion"]["fill-extrusion-pattern"]),
            "fill-extrusion-height": new ii(Rt["paint_fill-extrusion"]["fill-extrusion-height"]),
            "fill-extrusion-base": new ii(Rt["paint_fill-extrusion"]["fill-extrusion-base"]),
            "fill-extrusion-vertical-gradient": new ni(Rt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])
          })
        },
        is = function (t) {
          function e(e) {
            t.call(this, e, ns);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.createBucket = function (t) {
            return new ts(t)
          }, e.prototype.queryRadius = function () {
            return Oa(this.paint.get("fill-extrusion-translate"))
          }, e.prototype.is3D = function () {
            return !0
          }, e.prototype.queryIntersectsFeature = function (t, e, r, n, i, a, o, s) {
            var u = La(t, this.paint.get("fill-extrusion-translate"), this.paint.get("fill-extrusion-translate-anchor"), a.angle, o),
              l = this.paint.get("fill-extrusion-height").evaluate(e, r),
              c = this.paint.get("fill-extrusion-base").evaluate(e, r),
              h = function (t, e, r, n) {
                for (var i = [], a = 0, o = t; a < o.length; a += 1) {
                  var s = o[a],
                    u = [s.x, s.y, n, 1];
                  Na(u, u, e), i.push(new p(u[0] / u[3], u[1] / u[3]));
                }
                return i
              }(u, s, 0, 0),
              f = function (t, e, r, n) {
                for (var i = [], a = [], o = n[8] * e, s = n[9] * e, u = n[10] * e, l = n[11] * e, c = n[8] * r, h = n[9] * r, f = n[10] * r, y = n[11] * r, d = 0, m = t; d < m.length; d += 1) {
                  for (var v = m[d], g = [], x = [], b = 0, _ = v; b < _.length; b += 1) {
                    var w = _[b],
                      A = w.x,
                      k = w.y,
                      S = n[0] * A + n[4] * k + n[12],
                      z = n[1] * A + n[5] * k + n[13],
                      I = n[2] * A + n[6] * k + n[14],
                      C = n[3] * A + n[7] * k + n[15],
                      B = I + u,
                      P = C + l,
                      E = S + c,
                      M = z + h,
                      T = I + f,
                      V = C + y,
                      F = new p((S + o) / P, (z + s) / P);
                    F.z = B / P, g.push(F);
                    var O = new p(E / V, M / V);
                    O.z = T / V, x.push(O);
                  }
                  i.push(g), a.push(x);
                }
                return [i, a]
              }(n, c, l, s);
            return function (t, e, r) {
              var n = 1 / 0;
              za(r, e) && (n = os(r, e[0]));
              for (var i = 0; i < e.length; i++)
                for (var a = e[i], o = t[i], s = 0; s < a.length - 1; s++) {
                  var u = a[s],
                    l = a[s + 1],
                    p = o[s],
                    c = o[s + 1],
                    h = [u, l, c, p, u];
                  ka(r, h) && (n = Math.min(n, os(r, h)));
                }
              return n !== 1 / 0 && n
            }(f[0], f[1], h)
          }, e
        }(li);
  
      function as(t, e) {
        return t.x * e.x + t.y * e.y
      }
  
      function os(t, e) {
        if (1 === t.length) {
          var r = e[0],
            n = e[1],
            i = e[3],
            a = t[0],
            o = n.sub(r),
            s = i.sub(r),
            u = a.sub(r),
            l = as(o, o),
            p = as(o, s),
            c = as(s, s),
            h = as(u, o),
            f = as(u, s),
            y = l * c - p * p,
            d = (c * h - p * f) / y,
            m = (l * f - p * h) / y,
            v = 1 - d - m;
          return r.z * v + n.z * d + i.z * m
        }
        for (var g = 1 / 0, x = 0, b = e; x < b.length; x += 1) {
          var _ = b[x];
          g = Math.min(g, _.z);
        }
        return g
      }
      var ss = fi([{
          name: "a_pos_normal",
          components: 2,
          type: "Int16"
        }, {
          name: "a_data",
          components: 4,
          type: "Uint8"
        }], 4).members,
        us = Yo.VectorTileFeature.types,
        ls = Math.cos(Math.PI / 180 * 37.5),
        ps = Math.pow(2, 14) / .5,
        cs = function (t) {
          this.zoom = t.zoom, this.overscaling = t.overscaling, this.layers = t.layers, this.layerIds = this.layers.map(function (t) {
            return t.id
          }), this.index = t.index, this.hasPattern = !1, this.patternFeatures = [], this.layoutVertexArray = new gi, this.indexArray = new Ei, this.programConfigurations = new da(ss, t.layers, t.zoom), this.segments = new Ji, this.stateDependentLayerIds = this.layers.filter(function (t) {
            return t.isStateDependent()
          }).map(function (t) {
            return t.id
          });
        };
      cs.prototype.populate = function (t, e) {
        this.hasPattern = Fo("line", this.layers, e);
        for (var r = this.layers[0].layout.get("line-sort-key"), n = [], i = 0, a = t; i < a.length; i += 1) {
          var o = a[i],
            s = o.feature,
            u = o.index,
            l = o.sourceLayerIndex;
          if (this.layers[0]._featureFilter(new Hn(this.zoom), s)) {
            var p = _a(s),
              c = r ? r.evaluate(s, {}) : void 0,
              h = {
                id: s.id,
                properties: s.properties,
                type: s.type,
                sourceLayerIndex: l,
                index: u,
                geometry: p,
                patterns: {},
                sortKey: c
              };
            n.push(h);
          }
        }
        r && n.sort(function (t, e) {
          return t.sortKey - e.sortKey
        });
        for (var f = 0, y = n; f < y.length; f += 1) {
          var d = y[f],
            m = d,
            v = m.geometry,
            g = m.index,
            x = m.sourceLayerIndex;
          if (this.hasPattern) {
            var b = Oo("line", this.layers, d, this.zoom, e);
            this.patternFeatures.push(b);
          } else this.addFeature(d, v, g, {});
          var _ = t[g].feature;
          e.featureIndex.insert(_, v, g, x, this.index);
        }
      }, cs.prototype.update = function (t, e, r) {
        this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t, e, this.stateDependentLayers, r);
      }, cs.prototype.addFeatures = function (t, e) {
        for (var r = 0, n = this.patternFeatures; r < n.length; r += 1) {
          var i = n[r];
          this.addFeature(i, i.geometry, i.index, e);
        }
      }, cs.prototype.isEmpty = function () {
        return 0 === this.layoutVertexArray.length
      }, cs.prototype.uploadPending = function () {
        return !this.uploaded || this.programConfigurations.needsUpload
      }, cs.prototype.upload = function (t) {
        this.uploaded || (this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, ss), this.indexBuffer = t.createIndexBuffer(this.indexArray)), this.programConfigurations.upload(t), this.uploaded = !0;
      }, cs.prototype.destroy = function () {
        this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy());
      }, cs.prototype.addFeature = function (t, e, r, n) {
        for (var i = this.layers[0].layout, a = i.get("line-join").evaluate(t, {}), o = i.get("line-cap"), s = i.get("line-miter-limit"), u = i.get("line-round-limit"), l = 0, p = e; l < p.length; l += 1) {
          var c = p[l];
          this.addLine(c, t, a, o, s, u, r, n);
        }
      }, cs.prototype.addLine = function (t, e, r, n, i, a, o, s) {
        if (this.distance = 0, this.scaledDistance = 0, this.totalDistance = 0, e.properties && e.properties.hasOwnProperty("epgis_clip_start") && e.properties.hasOwnProperty("epgis_clip_end")) {
          this.clipStart = +e.properties.epgis_clip_start, this.clipEnd = +e.properties.epgis_clip_end;
          for (var u = 0; u < t.length - 1; u++) this.totalDistance += t[u].dist(t[u + 1]);
        }
        for (var l = "Polygon" === us[e.type], p = t.length; p >= 2 && t[p - 1].equals(t[p - 2]);) p--;
        for (var c = 0; c < p - 1 && t[c].equals(t[c + 1]);) c++;
        if (!(p < (l ? 3 : 2))) {
          "bevel" === r && (i = 1.05);
          var h, f = ga / (512 * this.overscaling) * 15,
            y = this.segments.prepareSegment(10 * p, this.layoutVertexArray, this.indexArray),
            d = void 0,
            m = void 0,
            v = void 0,
            g = void 0;
          this.e1 = this.e2 = -1, l && (h = t[p - 2], g = t[c].sub(h)._unit()._perp());
          for (var x = c; x < p; x++)
            if (!(m = l && x === p - 1 ? t[c + 1] : t[x + 1]) || !t[x].equals(m)) {
              g && (v = g), h && (d = h), h = t[x], g = m ? m.sub(h)._unit()._perp() : v;
              var b = (v = v || g).add(g);
              0 === b.x && 0 === b.y || b._unit();
              var _ = v.x * g.x + v.y * g.y,
                w = b.x * g.x + b.y * g.y,
                A = 0 !== w ? 1 / w : 1 / 0,
                k = 2 * Math.sqrt(2 - 2 * w),
                S = w < ls && d && m,
                z = v.x * g.y - v.y * g.x > 0;
              if (S && x > c) {
                var I = h.dist(d);
                if (I > 2 * f) {
                  var C = h.sub(h.sub(d)._mult(f / I)._round());
                  this.updateDistance(d, C), this.addCurrentVertex(C, v, 0, 0, y), d = C;
                }
              }
              var B = d && m,
                P = B ? r : l ? "butt" : n;
              if (B && "round" === P && (A < a ? P = "miter" : A <= 2 && (P = "fakeround")), "miter" === P && A > i && (P = "bevel"), "bevel" === P && (A > 2 && (P = "flipbevel"), A < i && (P = "miter")), d && this.updateDistance(d, h), "miter" === P) b._mult(A), this.addCurrentVertex(h, b, 0, 0, y);
              else if ("flipbevel" === P) {
                if (A > 100) b = g.mult(-1);
                else {
                  var E = A * v.add(g).mag() / v.sub(g).mag();
                  b._perp()._mult(E * (z ? -1 : 1));
                }
                this.addCurrentVertex(h, b, 0, 0, y), this.addCurrentVertex(h, b.mult(-1), 0, 0, y);
              } else if ("bevel" === P || "fakeround" === P) {
                var M = -Math.sqrt(A * A - 1),
                  T = z ? M : 0,
                  V = z ? 0 : M;
                if (d && this.addCurrentVertex(h, v, T, V, y), "fakeround" === P)
                  for (var F = Math.round(180 * k / Math.PI / 20), O = 1; O < F; O++) {
                    var L = O / F;
                    if (.5 !== L) {
                      var D = L - .5;
                      L += L * D * (L - 1) * ((1.0904 + _ * (_ * (3.55645 - 1.43519 * _) - 3.2452)) * D * D + (.848013 + _ * (.215638 * _ - 1.06021)));
                    }
                    var j = g.sub(v)._mult(L)._add(v)._unit()._mult(z ? -1 : 1);
                    this.addHalfVertex(h, j.x, j.y, !1, z, 0, y);
                  }
                m && this.addCurrentVertex(h, g, -T, -V, y);
              } else if ("butt" === P) this.addCurrentVertex(h, b, 0, 0, y);
              else if ("square" === P) {
                var U = d ? 1 : -1;
                this.addCurrentVertex(h, b, U, U, y);
              } else "round" === P && (d && (this.addCurrentVertex(h, v, 0, 0, y), this.addCurrentVertex(h, v, 1, 1, y, !0)), m && (this.addCurrentVertex(h, g, -1, -1, y, !0), this.addCurrentVertex(h, g, 0, 0, y)));
              if (S && x < p - 1) {
                var R = h.dist(m);
                if (R > 2 * f) {
                  var q = h.add(m.sub(h)._mult(f / R)._round());
                  this.updateDistance(h, q), this.addCurrentVertex(q, g, 0, 0, y), h = q;
                }
              }
            } this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, e, o, s);
        }
      }, cs.prototype.addCurrentVertex = function (t, e, r, n, i, a) {
        void 0 === a && (a = !1);
        var o = e.x + e.y * r,
          s = e.y - e.x * r,
          u = -e.x + e.y * n,
          l = -e.y - e.x * n;
        this.addHalfVertex(t, o, s, a, !1, r, i), this.addHalfVertex(t, u, l, a, !0, -n, i), this.distance > ps / 2 && 0 === this.totalDistance && (this.distance = 0, this.addCurrentVertex(t, e, r, n, i, a));
      }, cs.prototype.addHalfVertex = function (t, e, r, n, i, a, o) {
        var s = t.x,
          u = t.y,
          l = .5 * this.scaledDistance;
        this.layoutVertexArray.emplaceBack((s << 1) + (n ? 1 : 0), (u << 1) + (i ? 1 : 0), Math.round(63 * e) + 128, Math.round(63 * r) + 128, 1 + (0 === a ? 0 : a < 0 ? -1 : 1) | (63 & l) << 2, l >> 6);
        var p = o.vertexLength++;
        this.e1 >= 0 && this.e2 >= 0 && (this.indexArray.emplaceBack(this.e1, this.e2, p), o.primitiveLength++), i ? this.e2 = p : this.e1 = p;
      }, cs.prototype.updateDistance = function (t, e) {
        this.distance += t.dist(e), this.scaledDistance = this.totalDistance > 0 ? (this.clipStart + (this.clipEnd - this.clipStart) * this.distance / this.totalDistance) * (ps - 1) : this.distance;
      }, En("LineBucket", cs, {
        omit: ["layers", "patternFeatures"]
      });
      var hs = new ui({
          "line-cap": new ni(Rt.layout_line["line-cap"]),
          "line-join": new ii(Rt.layout_line["line-join"]),
          "line-miter-limit": new ni(Rt.layout_line["line-miter-limit"]),
          "line-round-limit": new ni(Rt.layout_line["line-round-limit"]),
          "line-sort-key": new ii(Rt.layout_line["line-sort-key"])
        }),
        fs = {
          paint: new ui({
            "line-opacity": new ii(Rt.paint_line["line-opacity"]),
            "line-color": new ii(Rt.paint_line["line-color"]),
            "line-translate": new ni(Rt.paint_line["line-translate"]),
            "line-translate-anchor": new ni(Rt.paint_line["line-translate-anchor"]),
            "line-width": new ii(Rt.paint_line["line-width"]),
            "line-gap-width": new ii(Rt.paint_line["line-gap-width"]),
            "line-offset": new ii(Rt.paint_line["line-offset"]),
            "line-blur": new ii(Rt.paint_line["line-blur"]),
            "line-dasharray": new oi(Rt.paint_line["line-dasharray"]),
            "line-pattern": new ai(Rt.paint_line["line-pattern"]),
            "line-gradient": new si(Rt.paint_line["line-gradient"])
          }),
          layout: hs
        },
        ys = new(function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.possiblyEvaluate = function (e, r) {
            return r = new Hn(Math.floor(r.zoom), {
              now: r.now,
              fadeDuration: r.fadeDuration,
              zoomHistory: r.zoomHistory,
              transition: r.transition
            }), t.prototype.possiblyEvaluate.call(this, e, r)
          }, e.prototype.evaluate = function (e, r, n, i) {
            return r = v({}, r, {
              zoom: Math.floor(r.zoom)
            }), t.prototype.evaluate.call(this, e, r, n, i)
          }, e
        }(ii))(fs.paint.properties["line-width"].specification);
      ys.useIntegerZoom = !0;
      var ds = function (t) {
        function e(e) {
          t.call(this, e, fs);
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype._handleSpecialPaintPropertyUpdate = function (t) {
          "line-gradient" === t && this._updateGradient();
        }, e.prototype._updateGradient = function () {
          var t = this._transitionablePaint._values["line-gradient"].value.expression;
          this.gradient = Qa(t, "lineProgress"), this.gradientTexture = null;
        }, e.prototype.recalculate = function (e) {
          t.prototype.recalculate.call(this, e), this.paint._values["line-floorwidth"] = ys.possiblyEvaluate(this._transitioningPaint._values["line-width"].value, e);
        }, e.prototype.createBucket = function (t) {
          return new cs(t)
        }, e.prototype.queryRadius = function (t) {
          var e = t,
            r = ms(Fa("line-width", this, e), Fa("line-gap-width", this, e)),
            n = Fa("line-offset", this, e);
          return r / 2 + Math.abs(n) + Oa(this.paint.get("line-translate"))
        }, e.prototype.queryIntersectsFeature = function (t, e, r, n, i, a, o) {
          var s = La(t, this.paint.get("line-translate"), this.paint.get("line-translate-anchor"), a.angle, o),
            u = o / 2 * ms(this.paint.get("line-width").evaluate(e, r), this.paint.get("line-gap-width").evaluate(e, r)),
            l = this.paint.get("line-offset").evaluate(e, r);
          return l && (n = function (t, e) {
              for (var r = [], n = new p(0, 0), i = 0; i < t.length; i++) {
                for (var a = t[i], o = [], s = 0; s < a.length; s++) {
                  var u = a[s - 1],
                    l = a[s],
                    c = a[s + 1],
                    h = 0 === s ? n : l.sub(u)._unit()._perp(),
                    f = s === a.length - 1 ? n : c.sub(l)._unit()._perp(),
                    y = h._add(f)._unit(),
                    d = y.x * f.x + y.y * f.y;
                  y._mult(1 / d), o.push(y._mult(e)._add(l));
                }
                r.push(o);
              }
              return r
            }(n, l * o)),
            function (t, e, r) {
              for (var n = 0; n < e.length; n++) {
                var i = e[n];
                if (t.length >= 3)
                  for (var a = 0; a < i.length; a++)
                    if (Ta(t, i[a])) return !0;
                if (Ia(t, i, r)) return !0
              }
              return !1
            }(s, n, u)
        }, e.prototype.isTileClipped = function () {
          return !0
        }, e
      }(li);
  
      function ms(t, e) {
        return e > 0 ? e + 2 * t : t
      }
      var vs = fi([{
          name: "a_pos_offset",
          components: 4,
          type: "Int16"
        }, {
          name: "a_data",
          components: 4,
          type: "Uint16"
        }]),
        gs = fi([{
          name: "a_projected_pos",
          components: 3,
          type: "Float32"
        }], 4),
        xs = (fi([{
          name: "a_fade_opacity",
          components: 1,
          type: "Uint32"
        }], 4), fi([{
          name: "a_placed",
          components: 2,
          type: "Uint8"
        }, {
          name: "a_shift",
          components: 2,
          type: "Float32"
        }])),
        bs = (fi([{
          type: "Int16",
          name: "anchorPointX"
        }, {
          type: "Int16",
          name: "anchorPointY"
        }, {
          type: "Int16",
          name: "x1"
        }, {
          type: "Int16",
          name: "y1"
        }, {
          type: "Int16",
          name: "x2"
        }, {
          type: "Int16",
          name: "y2"
        }, {
          type: "Uint32",
          name: "featureIndex"
        }, {
          type: "Uint16",
          name: "sourceLayerIndex"
        }, {
          type: "Uint16",
          name: "bucketIndex"
        }, {
          type: "Int16",
          name: "radius"
        }, {
          type: "Int16",
          name: "signedDistanceFromAnchor"
        }]), fi([{
          name: "a_pos",
          components: 2,
          type: "Int16"
        }, {
          name: "a_anchor_pos",
          components: 2,
          type: "Int16"
        }, {
          name: "a_extrude",
          components: 2,
          type: "Int16"
        }], 4)),
        _s = fi([{
          name: "a_pos",
          components: 2,
          type: "Int16"
        }, {
          name: "a_anchor_pos",
          components: 2,
          type: "Int16"
        }, {
          name: "a_extrude",
          components: 2,
          type: "Int16"
        }], 4);
      fi([{
        type: "Int16",
        name: "anchorX"
      }, {
        type: "Int16",
        name: "anchorY"
      }, {
        type: "Uint16",
        name: "glyphStartIndex"
      }, {
        type: "Uint16",
        name: "numGlyphs"
      }, {
        type: "Uint32",
        name: "vertexStartIndex"
      }, {
        type: "Uint32",
        name: "lineStartIndex"
      }, {
        type: "Uint32",
        name: "lineLength"
      }, {
        type: "Uint16",
        name: "segment"
      }, {
        type: "Uint16",
        name: "lowerSize"
      }, {
        type: "Uint16",
        name: "upperSize"
      }, {
        type: "Float32",
        name: "lineOffsetX"
      }, {
        type: "Float32",
        name: "lineOffsetY"
      }, {
        type: "Uint8",
        name: "writingMode"
      }, {
        type: "Uint8",
        name: "placedOrientation"
      }, {
        type: "Uint8",
        name: "hidden"
      }, {
        type: "Uint32",
        name: "crossTileID"
      }]), fi([{
        type: "Int16",
        name: "anchorX"
      }, {
        type: "Int16",
        name: "anchorY"
      }, {
        type: "Int16",
        name: "rightJustifiedTextSymbolIndex"
      }, {
        type: "Int16",
        name: "centerJustifiedTextSymbolIndex"
      }, {
        type: "Int16",
        name: "leftJustifiedTextSymbolIndex"
      }, {
        type: "Int16",
        name: "verticalPlacedTextSymbolIndex"
      }, {
        type: "Uint16",
        name: "key"
      }, {
        type: "Uint16",
        name: "textBoxStartIndex"
      }, {
        type: "Uint16",
        name: "textBoxEndIndex"
      }, {
        type: "Uint16",
        name: "verticalTextBoxStartIndex"
      }, {
        type: "Uint16",
        name: "verticalTextBoxEndIndex"
      }, {
        type: "Uint16",
        name: "iconBoxStartIndex"
      }, {
        type: "Uint16",
        name: "iconBoxEndIndex"
      }, {
        type: "Uint16",
        name: "featureIndex"
      }, {
        type: "Uint16",
        name: "numHorizontalGlyphVertices"
      }, {
        type: "Uint16",
        name: "numVerticalGlyphVertices"
      }, {
        type: "Uint16",
        name: "numIconVertices"
      }, {
        type: "Uint32",
        name: "crossTileID"
      }, {
        type: "Float32",
        name: "textBoxScale"
      }, {
        type: "Float32",
        name: "radialTextOffset"
      }]), fi([{
        type: "Float32",
        name: "offsetX"
      }]), fi([{
        type: "Int16",
        name: "x"
      }, {
        type: "Int16",
        name: "y"
      }, {
        type: "Int16",
        name: "tileUnitDistanceFromAnchor"
      }]);
  
      function ws(t, e, r) {
        return t.sections.forEach(function (t) {
          t.text = function (t, e, r) {
            var n = e.layout.get("text-transform").evaluate(r, {});
            return "uppercase" === n ? t = t.toLocaleUpperCase() : "lowercase" === n && (t = t.toLocaleLowerCase()), Gn.applyArabicShaping && (t = Gn.applyArabicShaping(t)), t
          }(t.text, e, r);
        }), t
      }
      var As = {
        "!": "︕",
        "#": "＃",
        $: "＄",
        "%": "％",
        "&": "＆",
        "(": "︵",
        ")": "︶",
        "*": "＊",
        "+": "＋",
        ",": "︐",
        "-": "︲",
        ".": "・",
        "/": "／",
        ":": "︓",
        ";": "︔",
        "<": "︿",
        "=": "＝",
        ">": "﹀",
        "?": "︖",
        "@": "＠",
        "[": "﹇",
        "\\": "＼",
        "]": "﹈",
        "^": "＾",
        _: "︳",
        "`": "｀",
        "{": "︷",
        "|": "―",
        "}": "︸",
        "~": "～",
        "¢": "￠",
        "£": "￡",
        "¥": "￥",
        "¦": "￤",
        "¬": "￢",
        "¯": "￣",
        "–": "︲",
        "—": "︱",
        "‘": "﹃",
        "’": "﹄",
        "“": "﹁",
        "”": "﹂",
        "…": "︙",
        "‧": "・",
        "₩": "￦",
        "、": "︑",
        "。": "︒",
        "〈": "︿",
        "〉": "﹀",
        "《": "︽",
        "》": "︾",
        "「": "﹁",
        "」": "﹂",
        "『": "﹃",
        "』": "﹄",
        "【": "︻",
        "】": "︼",
        "〔": "︹",
        "〕": "︺",
        "〖": "︗",
        "〗": "︘",
        "！": "︕",
        "（": "︵",
        "）": "︶",
        "，": "︐",
        "－": "︲",
        "．": "・",
        "：": "︓",
        "；": "︔",
        "＜": "︿",
        "＞": "﹀",
        "？": "︖",
        "［": "﹇",
        "］": "﹈",
        "＿": "︳",
        "｛": "︷",
        "｜": "―",
        "｝": "︸",
        "｟": "︵",
        "｠": "︶",
        "｡": "︒",
        "｢": "﹁",
        "｣": "﹂"
      };
      var ks = 24,
        Ss = {
          horizontal: 1,
          vertical: 2,
          horizontalOnly: 3
        },
        zs = function () {
          this.text = "", this.sectionIndex = [], this.sections = [];
        };
  
      function Is(t, e, r, n, i, a, o, s, u, l, p) {
        var c, h = zs.fromFeature(t, r);
        l === Ss.vertical && h.verticalizePunctuation();
        var f = Gn.processBidirectionalText,
          y = Gn.processStyledBidirectionalText;
        if (f && 1 === h.sections.length) {
          c = [];
          for (var d = 0, m = f(h.toString(), Ts(h, s, n, e)); d < m.length; d += 1) {
            var v = m[d],
              g = new zs;
            g.text = v, g.sections = h.sections;
            for (var x = 0; x < v.length; x++) g.sectionIndex.push(0);
            c.push(g);
          }
        } else if (y) {
          c = [];
          for (var b = 0, _ = y(h.text, h.sectionIndex, Ts(h, s, n, e)); b < _.length; b += 1) {
            var w = _[b],
              A = new zs;
            A.text = w[0], A.sectionIndex = w[1], A.sections = h.sections, c.push(A);
          }
        } else c = function (t, e) {
          for (var r = [], n = t.text, i = 0, a = 0, o = e; a < o.length; a += 1) {
            var s = o[a];
            r.push(t.substring(i, s)), i = s;
          }
          return i < n.length && r.push(t.substring(i, n.length)), r
        }(h, Ts(h, s, n, e));
        var k = [],
          S = {
            positionedGlyphs: k,
            text: h.toString(),
            top: u[1],
            bottom: u[1],
            left: u[0],
            right: u[0],
            writingMode: l,
            lineCount: c.length,
            yOffset: -17
          };
        return function (t, e, r, n, i, a, o, s, u) {
          for (var l = 0, p = t.yOffset, c = 0, h = t.positionedGlyphs, f = "right" === a ? 1 : "left" === a ? 0 : .5, y = 0, d = r; y < d.length; y += 1) {
            var m = d[y];
            m.trim();
            var v = m.getMaxScale();
            if (m.length()) {
              for (var g = h.length, x = 0; x < m.length(); x++) {
                var b = m.getSection(x),
                  _ = m.getSectionIndex(x),
                  w = m.getCharCode(x),
                  A = 24 * (v - b.scale),
                  k = e[b.fontStack],
                  S = k && k[w];
                S && (o === Ss.horizontal || !u && !jn(w) || u && (Cs[w] || (I = w, On.Arabic(I) || On["Arabic Supplement"](I) || On["Arabic Extended-A"](I) || On["Arabic Presentation Forms-A"](I) || On["Arabic Presentation Forms-B"](I))) ? (h.push({
                  glyph: w,
                  x: l,
                  y: p + A,
                  vertical: !1,
                  scale: b.scale,
                  fontStack: b.fontStack,
                  sectionIndex: _
                }), l += S.metrics.advance * b.scale + s) : (h.push({
                  glyph: w,
                  x: l,
                  y: p + A,
                  vertical: !0,
                  scale: b.scale,
                  fontStack: b.fontStack,
                  sectionIndex: _
                }), l += ks * b.scale + s));
              }
              if (h.length !== g) {
                var z = l - s;
                c = Math.max(z, c), Fs(h, e, g, h.length - 1, f);
              }
              l = 0, p += n * v;
            } else p += n;
          }
          var I;
          var C = Vs(i),
            B = C.horizontalAlign,
            P = C.verticalAlign;
          ! function (t, e, r, n, i, a, o) {
            for (var s = (e - r) * i, u = (-n * o + .5) * a, l = 0; l < t.length; l++) t[l].x += s, t[l].y += u;
          }(h, f, B, P, c, n, r.length);
          var E = p - t.yOffset;
          t.top += -P * E, t.bottom = t.top + E, t.left += -B * c, t.right = t.left + c;
        }(S, e, c, i, a, o, l, s, p), !!k.length && S
      }
      zs.fromFeature = function (t, e) {
        for (var r = new zs, n = 0; n < t.sections.length; n++) {
          var i = t.sections[n];
          r.sections.push({
            scale: i.scale || 1,
            fontStack: i.fontStack || e
          }), r.text += i.text;
          for (var a = 0; a < i.text.length; a++) r.sectionIndex.push(n);
        }
        return r
      }, zs.prototype.length = function () {
        return this.text.length
      }, zs.prototype.getSection = function (t) {
        return this.sections[this.sectionIndex[t]]
      }, zs.prototype.getSectionIndex = function (t) {
        return this.sectionIndex[t]
      }, zs.prototype.getCharCode = function (t) {
        return this.text.charCodeAt(t)
      }, zs.prototype.verticalizePunctuation = function () {
        this.text = function (t) {
          for (var e = "", r = 0; r < t.length; r++) {
            var n = t.charCodeAt(r + 1) || null,
              i = t.charCodeAt(r - 1) || null;
            (!n || !Un(n) || As[t[r + 1]]) && (!i || !Un(i) || As[t[r - 1]]) && As[t[r]] ? e += As[t[r]] : e += t[r];
          }
          return e
        }(this.text);
      }, zs.prototype.trim = function () {
        for (var t = 0, e = 0; e < this.text.length && Cs[this.text.charCodeAt(e)]; e++) t++;
        for (var r = this.text.length, n = this.text.length - 1; n >= 0 && n >= t && Cs[this.text.charCodeAt(n)]; n--) r--;
        this.text = this.text.substring(t, r), this.sectionIndex = this.sectionIndex.slice(t, r);
      }, zs.prototype.substring = function (t, e) {
        var r = new zs;
        return r.text = this.text.substring(t, e), r.sectionIndex = this.sectionIndex.slice(t, e), r.sections = this.sections, r
      }, zs.prototype.toString = function () {
        return this.text
      }, zs.prototype.getMaxScale = function () {
        var t = this;
        return this.sectionIndex.reduce(function (e, r) {
          return Math.max(e, t.sections[r].scale)
        }, 0)
      };
      var Cs = {
          9: !0,
          10: !0,
          11: !0,
          12: !0,
          13: !0,
          32: !0
        },
        Bs = {};
  
      function Ps(t, e, r, n) {
        var i = Math.pow(t - e, 2);
        return n ? t < e ? i / 2 : 2 * i : i + Math.abs(r) * r
      }
  
      function Es(t, e, r) {
        var n = 0;
        return 10 === t && (n -= 1e4), r && (n += 150), 40 !== t && 65288 !== t || (n += 50), 41 !== e && 65289 !== e || (n += 50), n
      }
  
      function Ms(t, e, r, n, i, a) {
        for (var o = null, s = Ps(e, r, i, a), u = 0, l = n; u < l.length; u += 1) {
          var p = l[u],
            c = Ps(e - p.x, r, i, a) + p.badness;
          c <= s && (o = p, s = c);
        }
        return {
          index: t,
          x: e,
          priorBreak: o,
          badness: s
        }
      }
  
      function Ts(t, e, r, n) {
        if (!r) return [];
        if (!t) return [];
        for (var i, a = [], o = function (t, e, r, n) {
            for (var i = 0, a = 0; a < t.length(); a++) {
              var o = t.getSection(a),
                s = n[o.fontStack],
                u = s && s[t.getCharCode(a)];
              u && (i += u.metrics.advance * o.scale + e);
            }
            return i / Math.max(1, Math.ceil(i / r))
          }(t, e, r, n), s = t.text.indexOf("​") >= 0, u = 0, l = 0; l < t.length(); l++) {
          var p = t.getSection(l),
            c = t.getCharCode(l),
            h = n[p.fontStack],
            f = h && h[c];
          if (f && !Cs[c] && (u += f.metrics.advance * p.scale + e), l < t.length() - 1) {
            var y = !!(!((i = c) < 11904) && (On["Bopomofo Extended"](i) || On.Bopomofo(i) || On["CJK Compatibility Forms"](i) || On["CJK Compatibility Ideographs"](i) || On["CJK Compatibility"](i) || On["CJK Radicals Supplement"](i) || On["CJK Strokes"](i) || On["CJK Symbols and Punctuation"](i) || On["CJK Unified Ideographs Extension A"](i) || On["CJK Unified Ideographs"](i) || On["Enclosed CJK Letters and Months"](i) || On["Halfwidth and Fullwidth Forms"](i) || On.Hiragana(i) || On["Ideographic Description Characters"](i) || On["Kangxi Radicals"](i) || On["Katakana Phonetic Extensions"](i) || On.Katakana(i) || On["Vertical Forms"](i) || On["Yi Radicals"](i) || On["Yi Syllables"](i)));
            (Bs[c] || y) && a.push(Ms(l + 1, u, o, a, Es(c, t.getCharCode(l + 1), y && s), !1));
          }
        }
        return function t(e) {
          return e ? t(e.priorBreak).concat(e.index) : []
        }(Ms(t.length(), u, o, a, 0, !0))
      }
  
      function Vs(t) {
        var e = .5,
          r = .5;
        switch (t) {
          case "right":
          case "top-right":
          case "bottom-right":
            e = 1;
            break;
          case "left":
          case "top-left":
          case "bottom-left":
            e = 0;
        }
        switch (t) {
          case "bottom":
          case "bottom-right":
          case "bottom-left":
            r = 1;
            break;
          case "top":
          case "top-right":
          case "top-left":
            r = 0;
        }
        return {
          horizontalAlign: e,
          verticalAlign: r
        }
      }
  
      function Fs(t, e, r, n, i) {
        if (i) {
          var a = t[n],
            o = e[a.fontStack],
            s = o && o[a.glyph];
          if (s)
            for (var u = s.metrics.advance * a.scale, l = (t[n].x + u) * i, p = r; p <= n; p++) t[p].x -= l;
        }
      }
      Bs[10] = !0, Bs[32] = !0, Bs[38] = !0, Bs[40] = !0, Bs[41] = !0, Bs[43] = !0, Bs[45] = !0, Bs[47] = !0, Bs[173] = !0, Bs[183] = !0, Bs[8203] = !0, Bs[8208] = !0, Bs[8211] = !0, Bs[8231] = !0;
      var Os = function (t) {
        function e(e, r, n, i) {
          t.call(this, e, r), this.angle = n, void 0 !== i && (this.segment = i);
        }
        return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.clone = function () {
          return new e(this.x, this.y, this.angle, this.segment)
        }, e
      }(p);
      En("Anchor", Os);
      var Ls = 256;
  
      function Ds(t, e) {
        var r = e.expression;
        if ("constant" === r.kind) return {
          kind: "constant",
          layoutSize: r.evaluate(new Hn(t + 1))
        };
        if ("source" === r.kind) return {
          kind: "source"
        };
        for (var n = r.zoomStops, i = r.interpolationType, a = 0; a < n.length && n[a] <= t;) a++;
        for (var o = a = Math.max(0, a - 1); o < n.length && n[o] < t + 1;) o++;
        o = Math.min(n.length - 1, o);
        var s = n[a],
          u = n[o];
        return "composite" === r.kind ? {
          kind: "composite",
          minZoom: s,
          maxZoom: u,
          interpolationType: i
        } : {
          kind: "camera",
          minZoom: s,
          maxZoom: u,
          minSize: r.evaluate(new Hn(s)),
          maxSize: r.evaluate(new Hn(u)),
          interpolationType: i
        }
      }
  
      function js(t, e, r) {
        var n = e.uSize,
          i = e.uSizeT,
          a = r.lowerSize,
          o = r.upperSize;
        return "source" === t.kind ? a / Ls : "composite" === t.kind ? Fe(a / Ls, o / Ls, i) : n
      }
  
      function Us(t, e) {
        var r = 0,
          n = 0;
        if ("constant" === t.kind) n = t.layoutSize;
        else if ("source" !== t.kind) {
          var i = t.interpolationType,
            a = t.minZoom,
            o = t.maxZoom,
            s = i ? d(rr.interpolationFactor(i, e, a, o), 0, 1) : 0;
          "camera" === t.kind ? n = Fe(t.minSize, t.maxSize, s) : r = s;
        }
        return {
          uSizeT: r,
          uSize: n
        }
      }
      var Rs = Object.freeze({
          getSizeData: Ds,
          evaluateSizeForFeature: js,
          evaluateSizeForZoom: Us,
          SIZE_PACK_FACTOR: Ls
        }),
        qs = Yo.VectorTileFeature.types,
        Ns = [{
          name: "a_fade_opacity",
          components: 1,
          type: "Uint8",
          offset: 0
        }];
  
      function Ks(t, e, r, n, i, a, o, s) {
        t.emplaceBack(e, r, Math.round(32 * n), Math.round(32 * i), a, o, s ? s[0] : 0, s ? s[1] : 0);
      }
  
      function Zs(t, e, r) {
        t.emplaceBack(e.x, e.y, r), t.emplaceBack(e.x, e.y, r), t.emplaceBack(e.x, e.y, r), t.emplaceBack(e.x, e.y, r);
      }
      var Xs = function (t) {
        this.layoutVertexArray = new bi, this.indexArray = new Ei, this.programConfigurations = t, this.segments = new Ji, this.dynamicLayoutVertexArray = new _i, this.opacityVertexArray = new wi, this.placedSymbolArray = new ji;
      };
      Xs.prototype.upload = function (t, e, r, n) {
        r && (this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, vs.members), this.indexBuffer = t.createIndexBuffer(this.indexArray, e), this.dynamicLayoutVertexBuffer = t.createVertexBuffer(this.dynamicLayoutVertexArray, gs.members, !0), this.opacityVertexBuffer = t.createVertexBuffer(this.opacityVertexArray, Ns, !0), this.opacityVertexBuffer.itemSize = 1), (r || n) && this.programConfigurations.upload(t);
      }, Xs.prototype.destroy = function () {
        this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy(), this.dynamicLayoutVertexBuffer.destroy(), this.opacityVertexBuffer.destroy());
      }, En("SymbolBuffers", Xs);
      var Gs = function (t, e, r) {
        this.layoutVertexArray = new t, this.layoutAttributes = e, this.indexArray = new r, this.segments = new Ji, this.collisionVertexArray = new Si;
      };
      Gs.prototype.upload = function (t) {
        this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, this.layoutAttributes), this.indexBuffer = t.createIndexBuffer(this.indexArray), this.collisionVertexBuffer = t.createVertexBuffer(this.collisionVertexArray, xs.members, !0);
      }, Gs.prototype.destroy = function () {
        this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.segments.destroy(), this.collisionVertexBuffer.destroy());
      }, En("CollisionBuffers", Gs);
      var Hs = function (t) {
        this.collisionBoxArray = t.collisionBoxArray, this.zoom = t.zoom, this.overscaling = t.overscaling, this.layers = t.layers, this.layerIds = this.layers.map(function (t) {
          return t.id
        }), this.index = t.index, this.pixelRatio = t.pixelRatio, this.sourceLayerIndex = t.sourceLayerIndex, this.hasPattern = !1, this.hasPaintOverrides = !1;
        var e = this.layers[0]._unevaluatedLayout._values;
        this.textSizeData = Ds(this.zoom, e["text-size"]), this.iconSizeData = Ds(this.zoom, e["icon-size"]);
        var r = this.layers[0].layout,
          n = r.get("symbol-sort-key"),
          i = r.get("symbol-z-order");
        this.sortFeaturesByKey = "viewport-y" !== i && void 0 !== n.constantOr(1);
        var a = "viewport-y" === i || "auto" === i && !this.sortFeaturesByKey;
        this.sortFeaturesByY = a && (r.get("text-allow-overlap") || r.get("icon-allow-overlap") || r.get("text-ignore-placement") || r.get("icon-ignore-placement")), "point" === r.get("symbol-placement") && (this.writingModes = r.get("text-writing-mode").map(function (t) {
          return Ss[t]
        })), this.stateDependentLayerIds = this.layers.filter(function (t) {
          return t.isStateDependent()
        }).map(function (t) {
          return t.id
        }), this.sourceID = t.sourceID;
      };
      Hs.prototype.createArrays = function () {
        var t = this.layers[0].layout;
        this.hasPaintOverrides = Ws.hasPaintOverrides(t), this.text = new Xs(new da(vs.members, this.layers, this.zoom, function (t) {
          return /^text/.test(t)
        })), this.icon = new Xs(new da(vs.members, this.layers, this.zoom, function (t) {
          return /^icon/.test(t)
        })), this.collisionBox = new Gs(ki, bs.members, Mi), this.collisionCircle = new Gs(ki, _s.members, Ei), this.glyphOffsetArray = new Ni, this.lineVertexArray = new Zi, this.symbolInstances = new Ri;
      }, Hs.prototype.calculateGlyphDependencies = function (t, e, r, n, i) {
        for (var a = 0; a < t.length; a++)
          if (e[t.charCodeAt(a)] = !0, (r || n) && i) {
            var o = As[t.charAt(a)];
            o && (e[o.charCodeAt(0)] = !0);
          }
      }, Hs.prototype.populate = function (t, e) {
        var r = this.layers[0],
          n = r.layout,
          i = n.get("text-font"),
          a = n.get("text-field"),
          o = n.get("icon-image"),
          s = ("constant" !== a.value.kind || a.value.value.toString().length > 0) && ("constant" !== i.value.kind || i.value.value.length > 0),
          u = "constant" !== o.value.kind || o.value.value && o.value.value.length > 0,
          l = n.get("symbol-sort-key");
        if (this.features = [], s || u) {
          for (var p = e.iconDependencies, c = e.glyphDependencies, h = new Hn(this.zoom), f = 0, y = t; f < y.length; f += 1) {
            var d = y[f],
              m = d.feature,
              v = d.index,
              g = d.sourceLayerIndex;
            if (r._featureFilter(h, m)) {
              var x = void 0;
              if (s) {
                var b = r.getValueAndResolveTokens("text-field", m);
                x = ws(b instanceof fe ? b : fe.fromString(b), r, m);
              }
              var _ = void 0;
              if (u && (_ = r.getValueAndResolveTokens("icon-image", m)), x || _) {
                var w = this.sortFeaturesByKey ? l.evaluate(m, {}) : void 0,
                  A = {
                    text: x,
                    icon: _,
                    index: v,
                    sourceLayerIndex: g,
                    geometry: _a(m),
                    properties: m.properties,
                    type: qs[m.type],
                    sortKey: w
                  };
                if (void 0 !== m.id && (A.id = m.id), this.features.push(A), _ && (p[_] = !0), x) {
                  var k = i.evaluate(m, {}).join(","),
                    S = "map" === n.get("text-rotation-alignment") && "point" !== n.get("symbol-placement");
                  this.allowVerticalPlacement = this.writingModes && this.writingModes.indexOf(Ss.vertical) >= 0;
                  for (var z = 0, I = x.sections; z < I.length; z += 1) {
                    var C = I[z],
                      B = Ln(x.toString()),
                      P = C.fontStack || k,
                      E = c[P] = c[P] || {};
                    this.calculateGlyphDependencies(C.text, E, S, this.allowVerticalPlacement, B);
                  }
                }
              }
            }
          }
          "line" === n.get("symbol-placement") && (this.features = function (t) {
            var e = {},
              r = {},
              n = [],
              i = 0;
  
            function a(e) {
              n.push(t[e]), i++;
            }
  
            function o(t, e, i) {
              var a = r[t];
              return delete r[t], r[e] = a, n[a].geometry[0].pop(), n[a].geometry[0] = n[a].geometry[0].concat(i[0]), a
            }
  
            function s(t, r, i) {
              var a = e[r];
              return delete e[r], e[t] = a, n[a].geometry[0].shift(), n[a].geometry[0] = i[0].concat(n[a].geometry[0]), a
            }
  
            function u(t, e, r) {
              var n = r ? e[0][e[0].length - 1] : e[0][0];
              return t + ":" + n.x + ":" + n.y
            }
            for (var l = 0; l < t.length; l++) {
              var p = t[l],
                c = p.geometry,
                h = p.text ? p.text.toString() : null;
              if (h) {
                var f = u(h, c),
                  y = u(h, c, !0);
                if (f in r && y in e && r[f] !== e[y]) {
                  var d = s(f, y, c),
                    m = o(f, y, n[d].geometry);
                  delete e[f], delete r[y], r[u(h, n[m].geometry, !0)] = m, n[d].geometry = null;
                } else f in r ? o(f, y, c) : y in e ? s(f, y, c) : (a(l), e[f] = i - 1, r[y] = i - 1);
              } else a(l);
            }
            return n.filter(function (t) {
              return t.geometry
            })
          }(this.features)), this.sortFeaturesByKey && this.features.sort(function (t, e) {
            return t.sortKey - e.sortKey
          });
        }
      }, Hs.prototype.update = function (t, e, r) {
        this.stateDependentLayers.length && (this.text.programConfigurations.updatePaintArrays(t, e, this.layers, r), this.icon.programConfigurations.updatePaintArrays(t, e, this.layers, r));
      }, Hs.prototype.isEmpty = function () {
        return 0 === this.symbolInstances.length
      }, Hs.prototype.uploadPending = function () {
        return !this.uploaded || this.text.programConfigurations.needsUpload || this.icon.programConfigurations.needsUpload
      }, Hs.prototype.upload = function (t) {
        this.uploaded || (this.collisionBox.upload(t), this.collisionCircle.upload(t)), this.text.upload(t, this.sortFeaturesByY, !this.uploaded, this.text.programConfigurations.needsUpload), this.icon.upload(t, this.sortFeaturesByY, !this.uploaded, this.icon.programConfigurations.needsUpload), this.uploaded = !0;
      }, Hs.prototype.destroy = function () {
        this.text.destroy(), this.icon.destroy(), this.collisionBox.destroy(), this.collisionCircle.destroy();
      }, Hs.prototype.addToLineVertexArray = function (t, e) {
        var r = this.lineVertexArray.length;
        if (void 0 !== t.segment) {
          for (var n = t.dist(e[t.segment + 1]), i = t.dist(e[t.segment]), a = {}, o = t.segment + 1; o < e.length; o++) a[o] = {
            x: e[o].x,
            y: e[o].y,
            tileUnitDistanceFromAnchor: n
          }, o < e.length - 1 && (n += e[o + 1].dist(e[o]));
          for (var s = t.segment || 0; s >= 0; s--) a[s] = {
            x: e[s].x,
            y: e[s].y,
            tileUnitDistanceFromAnchor: i
          }, s > 0 && (i += e[s - 1].dist(e[s]));
          for (var u = 0; u < e.length; u++) {
            var l = a[u];
            this.lineVertexArray.emplaceBack(l.x, l.y, l.tileUnitDistanceFromAnchor);
          }
        }
        return {
          lineStartIndex: r,
          lineLength: this.lineVertexArray.length - r
        }
      }, Hs.prototype.addSymbols = function (t, e, r, n, i, a, o, s, u, l) {
        var p = this,
          c = t.indexArray,
          h = t.layoutVertexArray,
          f = t.dynamicLayoutVertexArray,
          y = t.segments.prepareSegment(4 * e.length, t.layoutVertexArray, t.indexArray, a.sortKey),
          d = this.glyphOffsetArray.length,
          m = y.vertexLength,
          v = this.allowVerticalPlacement && o === Ss.vertical ? Math.PI / 2 : 0,
          g = function (t) {
            var e = t.tl,
              n = t.tr,
              i = t.bl,
              a = t.br,
              o = t.tex,
              u = y.vertexLength,
              l = t.glyphOffset[1];
            Ks(h, s.x, s.y, e.x, l + e.y, o.x, o.y, r), Ks(h, s.x, s.y, n.x, l + n.y, o.x + o.w, o.y, r), Ks(h, s.x, s.y, i.x, l + i.y, o.x, o.y + o.h, r), Ks(h, s.x, s.y, a.x, l + a.y, o.x + o.w, o.y + o.h, r), Zs(f, s, v), c.emplaceBack(u, u + 1, u + 2), c.emplaceBack(u + 1, u + 2, u + 3), y.vertexLength += 4, y.primitiveLength += 2, p.glyphOffsetArray.emplaceBack(t.glyphOffset[0]);
          };
        if (a.text && a.text.sections) {
          var x = a.text.sections;
          if (this.hasPaintOverrides) {
            for (var b, _ = function (e, r) {
                void 0 === b || b === e && !r || t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length, a, a.index, {}, x[b]), b = e;
              }, w = 0, A = e; w < A.length; w += 1) {
              var k = A[w];
              _(k.sectionIndex, !1), g(k);
            }
            _(b, !0);
          } else {
            for (var S = 0, z = e; S < z.length; S += 1) {
              g(z[S]);
            }
            t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length, a, a.index, {}, x[0]);
          }
        } else {
          for (var I = 0, C = e; I < C.length; I += 1) {
            g(C[I]);
          }
          t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length, a, a.index, {});
        }
        t.placedSymbolArray.emplaceBack(s.x, s.y, d, this.glyphOffsetArray.length - d, m, u, l, s.segment, r ? r[0] : 0, r ? r[1] : 0, n[0], n[1], o, 0, !1, 0);
      }, Hs.prototype._addCollisionDebugVertex = function (t, e, r, n, i, a) {
        return e.emplaceBack(0, 0), t.emplaceBack(r.x, r.y, n, i, Math.round(a.x), Math.round(a.y))
      }, Hs.prototype.addCollisionDebugVertices = function (t, e, r, n, i, a, o, s) {
        var u = i.segments.prepareSegment(4, i.layoutVertexArray, i.indexArray),
          l = u.vertexLength,
          c = i.layoutVertexArray,
          h = i.collisionVertexArray,
          f = o.anchorX,
          y = o.anchorY;
        if (this._addCollisionDebugVertex(c, h, a, f, y, new p(t, e)), this._addCollisionDebugVertex(c, h, a, f, y, new p(r, e)), this._addCollisionDebugVertex(c, h, a, f, y, new p(r, n)), this._addCollisionDebugVertex(c, h, a, f, y, new p(t, n)), u.vertexLength += 4, s) {
          var d = i.indexArray;
          d.emplaceBack(l, l + 1, l + 2), d.emplaceBack(l, l + 2, l + 3), u.primitiveLength += 2;
        } else {
          var m = i.indexArray;
          m.emplaceBack(l, l + 1), m.emplaceBack(l + 1, l + 2), m.emplaceBack(l + 2, l + 3), m.emplaceBack(l + 3, l), u.primitiveLength += 4;
        }
      }, Hs.prototype.addDebugCollisionBoxes = function (t, e, r) {
        for (var n = t; n < e; n++) {
          var i = this.collisionBoxArray.get(n),
            a = i.x1,
            o = i.y1,
            s = i.x2,
            u = i.y2,
            l = i.radius > 0;
          this.addCollisionDebugVertices(a, o, s, u, l ? this.collisionCircle : this.collisionBox, i.anchorPoint, r, l);
        }
      }, Hs.prototype.generateCollisionDebugBuffers = function () {
        for (var t = 0; t < this.symbolInstances.length; t++) {
          var e = this.symbolInstances.get(t);
          this.addDebugCollisionBoxes(e.textBoxStartIndex, e.textBoxEndIndex, e), this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex, e.verticalTextBoxEndIndex, e), this.addDebugCollisionBoxes(e.iconBoxStartIndex, e.iconBoxEndIndex, e);
        }
      }, Hs.prototype._deserializeCollisionBoxesForSymbol = function (t, e, r, n, i, a, o) {
        for (var s = {}, u = e; u < r; u++) {
          var l = t.get(u);
          if (0 === l.radius) {
            s.textBox = {
              x1: l.x1,
              y1: l.y1,
              x2: l.x2,
              y2: l.y2,
              anchorPointX: l.anchorPointX,
              anchorPointY: l.anchorPointY
            }, s.textFeatureIndex = l.featureIndex;
            break
          }
          s.textCircles || (s.textCircles = [], s.textFeatureIndex = l.featureIndex);
          s.textCircles.push(l.anchorPointX, l.anchorPointY, l.radius, l.signedDistanceFromAnchor, 1);
        }
        for (var p = n; p < i; p++) {
          var c = t.get(p);
          if (0 === c.radius) {
            s.verticalTextBox = {
              x1: c.x1,
              y1: c.y1,
              x2: c.x2,
              y2: c.y2,
              anchorPointX: c.anchorPointX,
              anchorPointY: c.anchorPointY
            }, s.verticalTextFeatureIndex = c.featureIndex;
            break
          }
        }
        for (var h = a; h < o; h++) {
          var f = t.get(h);
          if (0 === f.radius) {
            s.iconBox = {
              x1: f.x1,
              y1: f.y1,
              x2: f.x2,
              y2: f.y2,
              anchorPointX: f.anchorPointX,
              anchorPointY: f.anchorPointY
            }, s.iconFeatureIndex = f.featureIndex;
            break
          }
        }
        return s
      }, Hs.prototype.deserializeCollisionBoxes = function (t) {
        this.collisionArrays = [];
        for (var e = 0; e < this.symbolInstances.length; e++) {
          var r = this.symbolInstances.get(e);
          this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t, r.textBoxStartIndex, r.textBoxEndIndex, r.verticalTextBoxStartIndex, r.verticalTextBoxEndIndex, r.iconBoxStartIndex, r.iconBoxEndIndex));
        }
      }, Hs.prototype.hasTextData = function () {
        return this.text.segments.get().length > 0
      }, Hs.prototype.hasIconData = function () {
        return this.icon.segments.get().length > 0
      }, Hs.prototype.hasCollisionBoxData = function () {
        return this.collisionBox.segments.get().length > 0
      }, Hs.prototype.hasCollisionCircleData = function () {
        return this.collisionCircle.segments.get().length > 0
      }, Hs.prototype.addIndicesForPlacedTextSymbol = function (t) {
        for (var e = this.text.placedSymbolArray.get(t), r = e.vertexStartIndex + 4 * e.numGlyphs, n = e.vertexStartIndex; n < r; n += 4) this.text.indexArray.emplaceBack(n, n + 1, n + 2), this.text.indexArray.emplaceBack(n + 1, n + 2, n + 3);
      }, Hs.prototype.getSortedSymbolIndexes = function (t) {
        if (this.sortedAngle === t && void 0 !== this.symbolInstanceIndexes) return this.symbolInstanceIndexes;
        for (var e = Math.sin(t), r = Math.cos(t), n = [], i = [], a = [], o = 0; o < this.symbolInstances.length; ++o) {
          a.push(o);
          var s = this.symbolInstances.get(o);
          n.push(0 | Math.round(e * s.anchorX + r * s.anchorY)), i.push(s.featureIndex);
        }
        return a.sort(function (t, e) {
          return n[t] - n[e] || i[e] - i[t]
        }), a
      }, Hs.prototype.sortFeatures = function (t) {
        var e = this;
        if (this.sortFeaturesByY && this.sortedAngle !== t && !(this.text.segments.get().length > 1 || this.icon.segments.get().length > 1)) {
          this.symbolInstanceIndexes = this.getSortedSymbolIndexes(t), this.sortedAngle = t, this.text.indexArray.clear(), this.icon.indexArray.clear(), this.featureSortOrder = [];
          for (var r = 0, n = this.symbolInstanceIndexes; r < n.length; r += 1) {
            var i = n[r],
              a = this.symbolInstances.get(i);
            this.featureSortOrder.push(a.featureIndex), [a.rightJustifiedTextSymbolIndex, a.centerJustifiedTextSymbolIndex, a.leftJustifiedTextSymbolIndex].forEach(function (t, r, n) {
              t >= 0 && n.indexOf(t) === r && e.addIndicesForPlacedTextSymbol(t);
            }), a.verticalPlacedTextSymbolIndex >= 0 && this.addIndicesForPlacedTextSymbol(a.verticalPlacedTextSymbolIndex);
            var o = this.icon.placedSymbolArray.get(i);
            if (o.numGlyphs) {
              var s = o.vertexStartIndex;
              this.icon.indexArray.emplaceBack(s, s + 1, s + 2), this.icon.indexArray.emplaceBack(s + 1, s + 2, s + 3);
            }
          }
          this.text.indexBuffer && this.text.indexBuffer.updateData(this.text.indexArray), this.icon.indexBuffer && this.icon.indexBuffer.updateData(this.icon.indexArray);
        }
      }, En("SymbolBucket", Hs, {
        omit: ["layers", "collisionBoxArray", "features", "compareText"]
      }), Hs.MAX_GLYPHS = 65535, Hs.addDynamicAttributes = Zs;
      var Js = new ui({
          "symbol-placement": new ni(Rt.layout_symbol["symbol-placement"]),
          "symbol-spacing": new ni(Rt.layout_symbol["symbol-spacing"]),
          "symbol-avoid-edges": new ni(Rt.layout_symbol["symbol-avoid-edges"]),
          "symbol-sort-key": new ii(Rt.layout_symbol["symbol-sort-key"]),
          "symbol-z-order": new ni(Rt.layout_symbol["symbol-z-order"]),
          "icon-allow-overlap": new ni(Rt.layout_symbol["icon-allow-overlap"]),
          "icon-ignore-placement": new ni(Rt.layout_symbol["icon-ignore-placement"]),
          "icon-optional": new ni(Rt.layout_symbol["icon-optional"]),
          "icon-rotation-alignment": new ni(Rt.layout_symbol["icon-rotation-alignment"]),
          "icon-size": new ii(Rt.layout_symbol["icon-size"]),
          "icon-text-fit": new ni(Rt.layout_symbol["icon-text-fit"]),
          "icon-text-fit-padding": new ni(Rt.layout_symbol["icon-text-fit-padding"]),
          "icon-image": new ii(Rt.layout_symbol["icon-image"]),
          "icon-rotate": new ii(Rt.layout_symbol["icon-rotate"]),
          "icon-padding": new ni(Rt.layout_symbol["icon-padding"]),
          "icon-keep-upright": new ni(Rt.layout_symbol["icon-keep-upright"]),
          "icon-offset": new ii(Rt.layout_symbol["icon-offset"]),
          "icon-anchor": new ii(Rt.layout_symbol["icon-anchor"]),
          "icon-pitch-alignment": new ni(Rt.layout_symbol["icon-pitch-alignment"]),
          "text-pitch-alignment": new ni(Rt.layout_symbol["text-pitch-alignment"]),
          "text-rotation-alignment": new ni(Rt.layout_symbol["text-rotation-alignment"]),
          "text-field": new ii(Rt.layout_symbol["text-field"]),
          "text-font": new ii(Rt.layout_symbol["text-font"]),
          "text-size": new ii(Rt.layout_symbol["text-size"]),
          "text-max-width": new ii(Rt.layout_symbol["text-max-width"]),
          "text-line-height": new ni(Rt.layout_symbol["text-line-height"]),
          "text-letter-spacing": new ii(Rt.layout_symbol["text-letter-spacing"]),
          "text-justify": new ii(Rt.layout_symbol["text-justify"]),
          "text-radial-offset": new ii(Rt.layout_symbol["text-radial-offset"]),
          "text-variable-anchor": new ni(Rt.layout_symbol["text-variable-anchor"]),
          "text-anchor": new ii(Rt.layout_symbol["text-anchor"]),
          "text-max-angle": new ni(Rt.layout_symbol["text-max-angle"]),
          "text-writing-mode": new ni(Rt.layout_symbol["text-writing-mode"]),
          "text-rotate": new ii(Rt.layout_symbol["text-rotate"]),
          "text-padding": new ni(Rt.layout_symbol["text-padding"]),
          "text-keep-upright": new ni(Rt.layout_symbol["text-keep-upright"]),
          "text-transform": new ii(Rt.layout_symbol["text-transform"]),
          "text-offset": new ii(Rt.layout_symbol["text-offset"]),
          "text-allow-overlap": new ni(Rt.layout_symbol["text-allow-overlap"]),
          "text-ignore-placement": new ni(Rt.layout_symbol["text-ignore-placement"]),
          "text-optional": new ni(Rt.layout_symbol["text-optional"])
        }),
        Ys = {
          paint: new ui({
            "icon-opacity": new ii(Rt.paint_symbol["icon-opacity"]),
            "icon-color": new ii(Rt.paint_symbol["icon-color"]),
            "icon-halo-color": new ii(Rt.paint_symbol["icon-halo-color"]),
            "icon-halo-width": new ii(Rt.paint_symbol["icon-halo-width"]),
            "icon-halo-blur": new ii(Rt.paint_symbol["icon-halo-blur"]),
            "icon-translate": new ni(Rt.paint_symbol["icon-translate"]),
            "icon-translate-anchor": new ni(Rt.paint_symbol["icon-translate-anchor"]),
            "text-opacity": new ii(Rt.paint_symbol["text-opacity"]),
            "text-color": new ii(Rt.paint_symbol["text-color"], {
              runtimeType: te,
              getOverride: function (t) {
                return t.textColor
              },
              hasOverride: function (t) {
                return !!t.textColor
              }
            }),
            "text-halo-color": new ii(Rt.paint_symbol["text-halo-color"]),
            "text-halo-width": new ii(Rt.paint_symbol["text-halo-width"]),
            "text-halo-blur": new ii(Rt.paint_symbol["text-halo-blur"]),
            "text-translate": new ni(Rt.paint_symbol["text-translate"]),
            "text-translate-anchor": new ni(Rt.paint_symbol["text-translate-anchor"])
          }),
          layout: Js
        },
        $s = function (t) {
          this.type = t.property.overrides ? t.property.overrides.runtimeType : Yt, this.defaultValue = t;
        };
      $s.prototype.evaluate = function (t) {
        if (t.formattedSection) {
          var e = this.defaultValue.property.overrides;
          if (e && e.hasOverride(t.formattedSection)) return e.getOverride(t.formattedSection)
        }
        return t.feature && t.featureState ? this.defaultValue.evaluate(t.feature, t.featureState) : this.defaultValue.property.specification.default
      }, $s.prototype.eachChild = function (t) {
        this.defaultValue.isConstant() || t(this.defaultValue.value._styleExpression.expression);
      }, $s.prototype.possibleOutputs = function () {
        return [void 0]
      }, $s.prototype.serialize = function () {
        return null
      }, En("FormatSectionOverride", $s, {
        omit: ["defaultValue"]
      });
      var Ws = function (t) {
          function e(e) {
            t.call(this, e, Ys);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.recalculate = function (e) {
            if (t.prototype.recalculate.call(this, e), "auto" === this.layout.get("icon-rotation-alignment") && ("point" !== this.layout.get("symbol-placement") ? this.layout._values["icon-rotation-alignment"] = "map" : this.layout._values["icon-rotation-alignment"] = "viewport"), "auto" === this.layout.get("text-rotation-alignment") && ("point" !== this.layout.get("symbol-placement") ? this.layout._values["text-rotation-alignment"] = "map" : this.layout._values["text-rotation-alignment"] = "viewport"), "auto" === this.layout.get("text-pitch-alignment") && (this.layout._values["text-pitch-alignment"] = this.layout.get("text-rotation-alignment")), "auto" === this.layout.get("icon-pitch-alignment") && (this.layout._values["icon-pitch-alignment"] = this.layout.get("icon-rotation-alignment")), "point" === this.layout.get("symbol-placement")) {
              var r = this.layout.get("text-writing-mode");
              if (r) {
                for (var n = [], i = 0, a = r; i < a.length; i += 1) {
                  var o = a[i];
                  n.indexOf(o) < 0 && n.push(o);
                }
                this.layout._values["text-writing-mode"] = n;
              } else this.layout._values["text-writing-mode"] = ["horizontal"];
            }
            this._setPaintOverrides();
          }, e.prototype.getValueAndResolveTokens = function (t, e) {
            var r = this.layout.get(t).evaluate(e, {}),
              n = this._unevaluatedLayout._values[t];
            return n.isDataDriven() || jr(n.value) ? r : function (t, e) {
              return e.replace(/{([^{}]+)}/g, function (e, r) {
                return r in t ? String(t[r]) : ""
              })
            }(e.properties, r)
          }, e.prototype.createBucket = function (t) {
            return new Hs(t)
          }, e.prototype.queryRadius = function () {
            return 0
          }, e.prototype.queryIntersectsFeature = function () {
            return !1
          }, e.prototype._setPaintOverrides = function () {
            for (var t = 0, r = Ys.paint.overridableProperties; t < r.length; t += 1) {
              var n = r[t];
              if (e.hasPaintOverride(this.layout, n)) {
                var i = this.paint.get(n),
                  a = new $s(i),
                  o = new Dr(a, i.property.specification),
                  s = null;
                s = "constant" === i.value.kind || "source" === i.value.kind ? new Rr("source", o) : new qr("composite", o, i.value.zoomStops, i.value._interpolationType), this.paint._values[n] = new ei(i.property, s, i.parameters);
              }
            }
          }, e.prototype._handleOverridablePaintPropertyUpdate = function (t, r, n) {
            return !(!this.layout || r.isDataDriven() || n.isDataDriven()) && e.hasPaintOverride(this.layout, t)
          }, e.hasPaintOverride = function (t, e) {
            var r = t.get("text-field"),
              n = Ys.paint.properties[e],
              i = !1,
              a = function (t) {
                for (var e = 0, r = t; e < r.length; e += 1) {
                  var a = r[e];
                  if (n.overrides && n.overrides.hasOverride(a)) return void(i = !0)
                }
              };
            if ("constant" === r.value.kind && r.value.value instanceof fe) a(r.value.value.sections);
            else if ("source" === r.value.kind) {
              var o = function (t) {
                  if (!i)
                    if (t instanceof ve && de(t.value) === ie) {
                      var e = t.value;
                      a(e.sections);
                    } else t instanceof _e ? a(t.sections) : t.eachChild(o);
                },
                s = r.value;
              s._styleExpression && o(s._styleExpression.expression);
            }
            return i
          }, e.hasPaintOverrides = function (t) {
            for (var r = 0, n = Ys.paint.overridableProperties; r < n.length; r += 1) {
              var i = n[r];
              if (e.hasPaintOverride(t, i)) return !0
            }
            return !1
          }, e
        }(li),
        Qs = {
          paint: new ui({
            "background-color": new ni(Rt.paint_background["background-color"]),
            "background-pattern": new oi(Rt.paint_background["background-pattern"]),
            "background-opacity": new ni(Rt.paint_background["background-opacity"])
          })
        },
        tu = function (t) {
          function e(e) {
            t.call(this, e, Qs);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e
        }(li),
        eu = {
          paint: new ui({
            "raster-opacity": new ni(Rt.paint_raster["raster-opacity"]),
            "raster-hue-rotate": new ni(Rt.paint_raster["raster-hue-rotate"]),
            "raster-brightness-min": new ni(Rt.paint_raster["raster-brightness-min"]),
            "raster-brightness-max": new ni(Rt.paint_raster["raster-brightness-max"]),
            "raster-saturation": new ni(Rt.paint_raster["raster-saturation"]),
            "raster-contrast": new ni(Rt.paint_raster["raster-contrast"]),
            "raster-resampling": new ni(Rt.paint_raster["raster-resampling"]),
            "raster-fade-duration": new ni(Rt.paint_raster["raster-fade-duration"])
          })
        },
        ru = function (t) {
          function e(e) {
            t.call(this, e, eu);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e
        }(li);
      var nu = function (t) {
          function e(e) {
            t.call(this, e, {}), this.implementation = e;
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.is3D = function () {
            return "3d" === this.implementation.renderingMode
          }, e.prototype.hasOffscreenPass = function () {
            return void 0 !== this.implementation.prerender
          }, e.prototype.recalculate = function () {}, e.prototype.updateTransitions = function () {}, e.prototype.hasTransition = function () {}, e.prototype.serialize = function () {}, e.prototype.onAdd = function (t) {
            this.implementation.onAdd && this.implementation.onAdd(t, t.painter.context.gl);
          }, e.prototype.onRemove = function (t) {
            this.implementation.onRemove && this.implementation.onRemove(t, t.painter.context.gl);
          }, e
        }(li),
        iu = {
          circle: Ka,
          heatmap: to,
          hillshade: ro,
          fill: Uo,
          "fill-extrusion": is,
          line: ds,
          symbol: Ws,
          background: tu,
          raster: ru
        };
  
      function au(t) {
        for (var e = 0, r = 0, n = 0, i = t; n < i.length; n += 1) {
          var a = i[n];
          e += a.w * a.h, r = Math.max(r, a.w);
        }
        t.sort(function (t, e) {
          return e.h - t.h
        });
        for (var o = [{
            x: 0,
            y: 0,
            w: Math.max(Math.ceil(Math.sqrt(e / .95)), r),
            h: 1 / 0
          }], s = 0, u = 0, l = 0, p = t; l < p.length; l += 1)
          for (var c = p[l], h = o.length - 1; h >= 0; h--) {
            var f = o[h];
            if (!(c.w > f.w || c.h > f.h)) {
              if (c.x = f.x, c.y = f.y, u = Math.max(u, c.y + c.h), s = Math.max(s, c.x + c.w), c.w === f.w && c.h === f.h) {
                var y = o.pop();
                h < o.length && (o[h] = y);
              } else c.h === f.h ? (f.x += c.w, f.w -= c.w) : c.w === f.w ? (f.y += c.h, f.h -= c.h) : (o.push({
                x: f.x + c.w,
                y: f.y,
                w: f.w - c.w,
                h: c.h
              }), f.y += c.h, f.h -= c.h);
              break
            }
          }
        return {
          w: s,
          h: u,
          fill: e / (s * u) || 0
        }
      }
      var ou = function (t, e) {
          var r = e.pixelRatio,
            n = e.version;
          this.paddedRect = t, this.pixelRatio = r, this.version = n;
        },
        su = {
          tl: {
            configurable: !0
          },
          br: {
            configurable: !0
          },
          tlbr: {
            configurable: !0
          },
          displaySize: {
            configurable: !0
          }
        };
      su.tl.get = function () {
        return [this.paddedRect.x + 1, this.paddedRect.y + 1]
      }, su.br.get = function () {
        return [this.paddedRect.x + this.paddedRect.w - 1, this.paddedRect.y + this.paddedRect.h - 1]
      }, su.tlbr.get = function () {
        return this.tl.concat(this.br)
      }, su.displaySize.get = function () {
        return [(this.paddedRect.w - 2) / this.pixelRatio, (this.paddedRect.h - 2) / this.pixelRatio]
      }, Object.defineProperties(ou.prototype, su);
      var uu = function (t, e) {
        var r = {},
          n = {};
        this.haveRenderCallbacks = [];
        var i = [];
        this.addImages(t, r, i), this.addImages(e, n, i);
        var a = au(i),
          o = a.w,
          s = a.h,
          u = new $a({
            width: o || 1,
            height: s || 1
          });
        for (var l in t) {
          var p = t[l],
            c = r[l].paddedRect;
          $a.copy(p.data, u, {
            x: 0,
            y: 0
          }, {
            x: c.x + 1,
            y: c.y + 1
          }, p.data);
        }
        for (var h in e) {
          var f = e[h],
            y = n[h].paddedRect,
            d = y.x + 1,
            m = y.y + 1,
            v = f.data.width,
            g = f.data.height;
          $a.copy(f.data, u, {
            x: 0,
            y: 0
          }, {
            x: d,
            y: m
          }, f.data), $a.copy(f.data, u, {
            x: 0,
            y: g - 1
          }, {
            x: d,
            y: m - 1
          }, {
            width: v,
            height: 1
          }), $a.copy(f.data, u, {
            x: 0,
            y: 0
          }, {
            x: d,
            y: m + g
          }, {
            width: v,
            height: 1
          }), $a.copy(f.data, u, {
            x: v - 1,
            y: 0
          }, {
            x: d - 1,
            y: m
          }, {
            width: 1,
            height: g
          }), $a.copy(f.data, u, {
            x: 0,
            y: 0
          }, {
            x: d + v,
            y: m
          }, {
            width: 1,
            height: g
          });
        }
        this.image = u, this.iconPositions = r, this.patternPositions = n;
      };
      uu.prototype.addImages = function (t, e, r) {
        for (var n in t) {
          var i = t[n],
            a = {
              x: 0,
              y: 0,
              w: i.data.width + 2,
              h: i.data.height + 2
            };
          r.push(a), e[n] = new ou(a, i), i.hasRenderCallback && this.haveRenderCallbacks.push(n);
        }
      }, uu.prototype.patchUpdatedImages = function (t, e) {
        for (var r in t.dispatchRenderCallbacks(this.haveRenderCallbacks), t.updatedImages) this.patchUpdatedImage(this.iconPositions[r], t.getImage(r), e), this.patchUpdatedImage(this.patternPositions[r], t.getImage(r), e);
      }, uu.prototype.patchUpdatedImage = function (t, e, r) {
        if (t && e && t.version !== e.version) {
          t.version = e.version;
          var n = t.tl,
            i = n[0],
            a = n[1];
          r.update(e.data, void 0, {
            x: i,
            y: a
          });
        }
      }, En("ImagePosition", ou), En("ImageAtlas", uu);
      var lu = self.HTMLImageElement,
        pu = self.HTMLCanvasElement,
        cu = self.HTMLVideoElement,
        hu = self.ImageData,
        fu = function (t, e, r, n) {
          this.context = t, this.format = r, this.texture = t.gl.createTexture(), this.update(e, n);
        };
      fu.prototype.update = function (t, e, r) {
        var n = t.width,
          i = t.height,
          a = !(this.size && this.size[0] === n && this.size[1] === i || r),
          o = this.context,
          s = o.gl;
        if (this.useMipmap = Boolean(e && e.useMipmap), s.bindTexture(s.TEXTURE_2D, this.texture), o.pixelStoreUnpackFlipY.set(!1), o.pixelStoreUnpack.set(1), o.pixelStoreUnpackPremultiplyAlpha.set(this.format === s.RGBA && (!e || !1 !== e.premultiply)), a) this.size = [n, i], t instanceof lu || t instanceof pu || t instanceof cu || t instanceof hu ? s.texImage2D(s.TEXTURE_2D, 0, this.format, this.format, s.UNSIGNED_BYTE, t) : s.texImage2D(s.TEXTURE_2D, 0, this.format, n, i, 0, this.format, s.UNSIGNED_BYTE, t.data);
        else {
          var u = r || {
              x: 0,
              y: 0
            },
            l = u.x,
            p = u.y;
          t instanceof lu || t instanceof pu || t instanceof cu || t instanceof hu ? s.texSubImage2D(s.TEXTURE_2D, 0, l, p, s.RGBA, s.UNSIGNED_BYTE, t) : s.texSubImage2D(s.TEXTURE_2D, 0, l, p, n, i, s.RGBA, s.UNSIGNED_BYTE, t.data);
        }
        this.useMipmap && this.isSizePowerOfTwo() && s.generateMipmap(s.TEXTURE_2D);
      }, fu.prototype.bind = function (t, e, r) {
        var n = this.context.gl;
        n.bindTexture(n.TEXTURE_2D, this.texture), r !== n.LINEAR_MIPMAP_NEAREST || this.isSizePowerOfTwo() || (r = n.LINEAR), t !== this.filter && (n.texParameteri(n.TEXTURE_2D, n.TEXTURE_MAG_FILTER, t), n.texParameteri(n.TEXTURE_2D, n.TEXTURE_MIN_FILTER, r || t), this.filter = t), e !== this.wrap && (n.texParameteri(n.TEXTURE_2D, n.TEXTURE_WRAP_S, e), n.texParameteri(n.TEXTURE_2D, n.TEXTURE_WRAP_T, e), this.wrap = e);
      }, fu.prototype.isSizePowerOfTwo = function () {
        return this.size[0] === this.size[1] && Math.log(this.size[0]) / Math.LN2 % 1 == 0
      }, fu.prototype.destroy = function () {
        this.context.gl.deleteTexture(this.texture), this.texture = null;
      };
      var yu = function (t, e, r, n, i) {
          var a, o, s = 8 * i - n - 1,
            u = (1 << s) - 1,
            l = u >> 1,
            p = -7,
            c = r ? i - 1 : 0,
            h = r ? -1 : 1,
            f = t[e + c];
          for (c += h, a = f & (1 << -p) - 1, f >>= -p, p += s; p > 0; a = 256 * a + t[e + c], c += h, p -= 8);
          for (o = a & (1 << -p) - 1, a >>= -p, p += n; p > 0; o = 256 * o + t[e + c], c += h, p -= 8);
          if (0 === a) a = 1 - l;
          else {
            if (a === u) return o ? NaN : 1 / 0 * (f ? -1 : 1);
            o += Math.pow(2, n), a -= l;
          }
          return (f ? -1 : 1) * o * Math.pow(2, a - n)
        },
        du = function (t, e, r, n, i, a) {
          var o, s, u, l = 8 * a - i - 1,
            p = (1 << l) - 1,
            c = p >> 1,
            h = 23 === i ? Math.pow(2, -24) - Math.pow(2, -77) : 0,
            f = n ? 0 : a - 1,
            y = n ? 1 : -1,
            d = e < 0 || 0 === e && 1 / e < 0 ? 1 : 0;
          for (e = Math.abs(e), isNaN(e) || e === 1 / 0 ? (s = isNaN(e) ? 1 : 0, o = p) : (o = Math.floor(Math.log(e) / Math.LN2), e * (u = Math.pow(2, -o)) < 1 && (o--, u *= 2), (e += o + c >= 1 ? h / u : h * Math.pow(2, 1 - c)) * u >= 2 && (o++, u /= 2), o + c >= p ? (s = 0, o = p) : o + c >= 1 ? (s = (e * u - 1) * Math.pow(2, i), o += c) : (s = e * Math.pow(2, c - 1) * Math.pow(2, i), o = 0)); i >= 8; t[r + f] = 255 & s, f += y, s /= 256, i -= 8);
          for (o = o << i | s, l += i; l > 0; t[r + f] = 255 & o, f += y, o /= 256, l -= 8);
          t[r + f - y] |= 128 * d;
        },
        mu = vu;
  
      function vu(t) {
        this.buf = ArrayBuffer.isView && ArrayBuffer.isView(t) ? t : new Uint8Array(t || 0), this.pos = 0, this.type = 0, this.length = this.buf.length;
      }
      vu.Varint = 0, vu.Fixed64 = 1, vu.Bytes = 2, vu.Fixed32 = 5;
  
      function gu(t) {
        return t.type === vu.Bytes ? t.readVarint() + t.pos : t.pos + 1
      }
  
      function xu(t, e, r) {
        return r ? 4294967296 * e + (t >>> 0) : 4294967296 * (e >>> 0) + (t >>> 0)
      }
  
      function bu(t, e, r) {
        var n = e <= 16383 ? 1 : e <= 2097151 ? 2 : e <= 268435455 ? 3 : Math.floor(Math.log(e) / (7 * Math.LN2));
        r.realloc(n);
        for (var i = r.pos - 1; i >= t; i--) r.buf[i + n] = r.buf[i];
      }
  
      function _u(t, e) {
        for (var r = 0; r < t.length; r++) e.writeVarint(t[r]);
      }
  
      function wu(t, e) {
        for (var r = 0; r < t.length; r++) e.writeSVarint(t[r]);
      }
  
      function Au(t, e) {
        for (var r = 0; r < t.length; r++) e.writeFloat(t[r]);
      }
  
      function ku(t, e) {
        for (var r = 0; r < t.length; r++) e.writeDouble(t[r]);
      }
  
      function Su(t, e) {
        for (var r = 0; r < t.length; r++) e.writeBoolean(t[r]);
      }
  
      function zu(t, e) {
        for (var r = 0; r < t.length; r++) e.writeFixed32(t[r]);
      }
  
      function Iu(t, e) {
        for (var r = 0; r < t.length; r++) e.writeSFixed32(t[r]);
      }
  
      function Cu(t, e) {
        for (var r = 0; r < t.length; r++) e.writeFixed64(t[r]);
      }
  
      function Bu(t, e) {
        for (var r = 0; r < t.length; r++) e.writeSFixed64(t[r]);
      }
  
      function Pu(t, e) {
        return (t[e] | t[e + 1] << 8 | t[e + 2] << 16) + 16777216 * t[e + 3]
      }
  
      function Eu(t, e, r) {
        t[r] = e, t[r + 1] = e >>> 8, t[r + 2] = e >>> 16, t[r + 3] = e >>> 24;
      }
  
      function Mu(t, e) {
        return (t[e] | t[e + 1] << 8 | t[e + 2] << 16) + (t[e + 3] << 24)
      }
      vu.prototype = {
        destroy: function () {
          this.buf = null;
        },
        readFields: function (t, e, r) {
          for (r = r || this.length; this.pos < r;) {
            var n = this.readVarint(),
              i = n >> 3,
              a = this.pos;
            this.type = 7 & n, t(i, e, this), this.pos === a && this.skip(n);
          }
          return e
        },
        readMessage: function (t, e) {
          return this.readFields(t, e, this.readVarint() + this.pos)
        },
        readFixed32: function () {
          var t = Pu(this.buf, this.pos);
          return this.pos += 4, t
        },
        readSFixed32: function () {
          var t = Mu(this.buf, this.pos);
          return this.pos += 4, t
        },
        readFixed64: function () {
          var t = Pu(this.buf, this.pos) + 4294967296 * Pu(this.buf, this.pos + 4);
          return this.pos += 8, t
        },
        readSFixed64: function () {
          var t = Pu(this.buf, this.pos) + 4294967296 * Mu(this.buf, this.pos + 4);
          return this.pos += 8, t
        },
        readFloat: function () {
          var t = yu(this.buf, this.pos, !0, 23, 4);
          return this.pos += 4, t
        },
        readDouble: function () {
          var t = yu(this.buf, this.pos, !0, 52, 8);
          return this.pos += 8, t
        },
        readVarint: function (t) {
          var e, r, n = this.buf;
          return e = 127 & (r = n[this.pos++]), r < 128 ? e : (e |= (127 & (r = n[this.pos++])) << 7, r < 128 ? e : (e |= (127 & (r = n[this.pos++])) << 14, r < 128 ? e : (e |= (127 & (r = n[this.pos++])) << 21, r < 128 ? e : function (t, e, r) {
            var n, i, a = r.buf;
            if (i = a[r.pos++], n = (112 & i) >> 4, i < 128) return xu(t, n, e);
            if (i = a[r.pos++], n |= (127 & i) << 3, i < 128) return xu(t, n, e);
            if (i = a[r.pos++], n |= (127 & i) << 10, i < 128) return xu(t, n, e);
            if (i = a[r.pos++], n |= (127 & i) << 17, i < 128) return xu(t, n, e);
            if (i = a[r.pos++], n |= (127 & i) << 24, i < 128) return xu(t, n, e);
            if (i = a[r.pos++], n |= (1 & i) << 31, i < 128) return xu(t, n, e);
            throw new Error("Expected varint not more than 10 bytes")
          }(e |= (15 & (r = n[this.pos])) << 28, t, this))))
        },
        readVarint64: function () {
          return this.readVarint(!0)
        },
        readSVarint: function () {
          var t = this.readVarint();
          return t % 2 == 1 ? (t + 1) / -2 : t / 2
        },
        readBoolean: function () {
          return Boolean(this.readVarint())
        },
        readString: function () {
          var t = this.readVarint() + this.pos,
            e = function (t, e, r) {
              var n = "",
                i = e;
              for (; i < r;) {
                var a, o, s, u = t[i],
                  l = null,
                  p = u > 239 ? 4 : u > 223 ? 3 : u > 191 ? 2 : 1;
                if (i + p > r) break;
                1 === p ? u < 128 && (l = u) : 2 === p ? 128 == (192 & (a = t[i + 1])) && (l = (31 & u) << 6 | 63 & a) <= 127 && (l = null) : 3 === p ? (a = t[i + 1], o = t[i + 2], 128 == (192 & a) && 128 == (192 & o) && ((l = (15 & u) << 12 | (63 & a) << 6 | 63 & o) <= 2047 || l >= 55296 && l <= 57343) && (l = null)) : 4 === p && (a = t[i + 1], o = t[i + 2], s = t[i + 3], 128 == (192 & a) && 128 == (192 & o) && 128 == (192 & s) && ((l = (15 & u) << 18 | (63 & a) << 12 | (63 & o) << 6 | 63 & s) <= 65535 || l >= 1114112) && (l = null)), null === l ? (l = 65533, p = 1) : l > 65535 && (l -= 65536, n += String.fromCharCode(l >>> 10 & 1023 | 55296), l = 56320 | 1023 & l), n += String.fromCharCode(l), i += p;
              }
              return n
            }(this.buf, this.pos, t);
          return this.pos = t, e
        },
        readBytes: function () {
          var t = this.readVarint() + this.pos,
            e = this.buf.subarray(this.pos, t);
          return this.pos = t, e
        },
        readPackedVarint: function (t, e) {
          if (this.type !== vu.Bytes) return t.push(this.readVarint(e));
          var r = gu(this);
          for (t = t || []; this.pos < r;) t.push(this.readVarint(e));
          return t
        },
        readPackedSVarint: function (t) {
          if (this.type !== vu.Bytes) return t.push(this.readSVarint());
          var e = gu(this);
          for (t = t || []; this.pos < e;) t.push(this.readSVarint());
          return t
        },
        readPackedBoolean: function (t) {
          if (this.type !== vu.Bytes) return t.push(this.readBoolean());
          var e = gu(this);
          for (t = t || []; this.pos < e;) t.push(this.readBoolean());
          return t
        },
        readPackedFloat: function (t) {
          if (this.type !== vu.Bytes) return t.push(this.readFloat());
          var e = gu(this);
          for (t = t || []; this.pos < e;) t.push(this.readFloat());
          return t
        },
        readPackedDouble: function (t) {
          if (this.type !== vu.Bytes) return t.push(this.readDouble());
          var e = gu(this);
          for (t = t || []; this.pos < e;) t.push(this.readDouble());
          return t
        },
        readPackedFixed32: function (t) {
          if (this.type !== vu.Bytes) return t.push(this.readFixed32());
          var e = gu(this);
          for (t = t || []; this.pos < e;) t.push(this.readFixed32());
          return t
        },
        readPackedSFixed32: function (t) {
          if (this.type !== vu.Bytes) return t.push(this.readSFixed32());
          var e = gu(this);
          for (t = t || []; this.pos < e;) t.push(this.readSFixed32());
          return t
        },
        readPackedFixed64: function (t) {
          if (this.type !== vu.Bytes) return t.push(this.readFixed64());
          var e = gu(this);
          for (t = t || []; this.pos < e;) t.push(this.readFixed64());
          return t
        },
        readPackedSFixed64: function (t) {
          if (this.type !== vu.Bytes) return t.push(this.readSFixed64());
          var e = gu(this);
          for (t = t || []; this.pos < e;) t.push(this.readSFixed64());
          return t
        },
        skip: function (t) {
          var e = 7 & t;
          if (e === vu.Varint)
            for (; this.buf[this.pos++] > 127;);
          else if (e === vu.Bytes) this.pos = this.readVarint() + this.pos;
          else if (e === vu.Fixed32) this.pos += 4;
          else {
            if (e !== vu.Fixed64) throw new Error("Unimplemented type: " + e);
            this.pos += 8;
          }
        },
        writeTag: function (t, e) {
          this.writeVarint(t << 3 | e);
        },
        realloc: function (t) {
          for (var e = this.length || 16; e < this.pos + t;) e *= 2;
          if (e !== this.length) {
            var r = new Uint8Array(e);
            r.set(this.buf), this.buf = r, this.length = e;
          }
        },
        finish: function () {
          return this.length = this.pos, this.pos = 0, this.buf.subarray(0, this.length)
        },
        writeFixed32: function (t) {
          this.realloc(4), Eu(this.buf, t, this.pos), this.pos += 4;
        },
        writeSFixed32: function (t) {
          this.realloc(4), Eu(this.buf, t, this.pos), this.pos += 4;
        },
        writeFixed64: function (t) {
          this.realloc(8), Eu(this.buf, -1 & t, this.pos), Eu(this.buf, Math.floor(t * (1 / 4294967296)), this.pos + 4), this.pos += 8;
        },
        writeSFixed64: function (t) {
          this.realloc(8), Eu(this.buf, -1 & t, this.pos), Eu(this.buf, Math.floor(t * (1 / 4294967296)), this.pos + 4), this.pos += 8;
        },
        writeVarint: function (t) {
          (t = +t || 0) > 268435455 || t < 0 ? function (t, e) {
            var r, n;
            t >= 0 ? (r = t % 4294967296 | 0, n = t / 4294967296 | 0) : (n = ~(-t / 4294967296), 4294967295 ^ (r = ~(-t % 4294967296)) ? r = r + 1 | 0 : (r = 0, n = n + 1 | 0));
            if (t >= 0x10000000000000000 || t < -0x10000000000000000) throw new Error("Given varint doesn't fit into 10 bytes");
            e.realloc(10),
              function (t, e, r) {
                r.buf[r.pos++] = 127 & t | 128, t >>>= 7, r.buf[r.pos++] = 127 & t | 128, t >>>= 7, r.buf[r.pos++] = 127 & t | 128, t >>>= 7, r.buf[r.pos++] = 127 & t | 128, t >>>= 7, r.buf[r.pos] = 127 & t;
              }(r, 0, e),
              function (t, e) {
                var r = (7 & t) << 4;
                if (e.buf[e.pos++] |= r | ((t >>>= 3) ? 128 : 0), !t) return;
                if (e.buf[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0), !t) return;
                if (e.buf[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0), !t) return;
                if (e.buf[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0), !t) return;
                if (e.buf[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0), !t) return;
                e.buf[e.pos++] = 127 & t;
              }(n, e);
          }(t, this) : (this.realloc(4), this.buf[this.pos++] = 127 & t | (t > 127 ? 128 : 0), t <= 127 || (this.buf[this.pos++] = 127 & (t >>>= 7) | (t > 127 ? 128 : 0), t <= 127 || (this.buf[this.pos++] = 127 & (t >>>= 7) | (t > 127 ? 128 : 0), t <= 127 || (this.buf[this.pos++] = t >>> 7 & 127))));
        },
        writeSVarint: function (t) {
          this.writeVarint(t < 0 ? 2 * -t - 1 : 2 * t);
        },
        writeBoolean: function (t) {
          this.writeVarint(Boolean(t));
        },
        writeString: function (t) {
          t = String(t), this.realloc(4 * t.length), this.pos++;
          var e = this.pos;
          this.pos = function (t, e, r) {
            for (var n, i, a = 0; a < e.length; a++) {
              if ((n = e.charCodeAt(a)) > 55295 && n < 57344) {
                if (!i) {
                  n > 56319 || a + 1 === e.length ? (t[r++] = 239, t[r++] = 191, t[r++] = 189) : i = n;
                  continue
                }
                if (n < 56320) {
                  t[r++] = 239, t[r++] = 191, t[r++] = 189, i = n;
                  continue
                }
                n = i - 55296 << 10 | n - 56320 | 65536, i = null;
              } else i && (t[r++] = 239, t[r++] = 191, t[r++] = 189, i = null);
              n < 128 ? t[r++] = n : (n < 2048 ? t[r++] = n >> 6 | 192 : (n < 65536 ? t[r++] = n >> 12 | 224 : (t[r++] = n >> 18 | 240, t[r++] = n >> 12 & 63 | 128), t[r++] = n >> 6 & 63 | 128), t[r++] = 63 & n | 128);
            }
            return r
          }(this.buf, t, this.pos);
          var r = this.pos - e;
          r >= 128 && bu(e, r, this), this.pos = e - 1, this.writeVarint(r), this.pos += r;
        },
        writeFloat: function (t) {
          this.realloc(4), du(this.buf, t, this.pos, !0, 23, 4), this.pos += 4;
        },
        writeDouble: function (t) {
          this.realloc(8), du(this.buf, t, this.pos, !0, 52, 8), this.pos += 8;
        },
        writeBytes: function (t) {
          var e = t.length;
          this.writeVarint(e), this.realloc(e);
          for (var r = 0; r < e; r++) this.buf[this.pos++] = t[r];
        },
        writeRawMessage: function (t, e) {
          this.pos++;
          var r = this.pos;
          t(e, this);
          var n = this.pos - r;
          n >= 128 && bu(r, n, this), this.pos = r - 1, this.writeVarint(n), this.pos += n;
        },
        writeMessage: function (t, e, r) {
          this.writeTag(t, vu.Bytes), this.writeRawMessage(e, r);
        },
        writePackedVarint: function (t, e) {
          e.length && this.writeMessage(t, _u, e);
        },
        writePackedSVarint: function (t, e) {
          e.length && this.writeMessage(t, wu, e);
        },
        writePackedBoolean: function (t, e) {
          e.length && this.writeMessage(t, Su, e);
        },
        writePackedFloat: function (t, e) {
          e.length && this.writeMessage(t, Au, e);
        },
        writePackedDouble: function (t, e) {
          e.length && this.writeMessage(t, ku, e);
        },
        writePackedFixed32: function (t, e) {
          e.length && this.writeMessage(t, zu, e);
        },
        writePackedSFixed32: function (t, e) {
          e.length && this.writeMessage(t, Iu, e);
        },
        writePackedFixed64: function (t, e) {
          e.length && this.writeMessage(t, Cu, e);
        },
        writePackedSFixed64: function (t, e) {
          e.length && this.writeMessage(t, Bu, e);
        },
        writeBytesField: function (t, e) {
          this.writeTag(t, vu.Bytes), this.writeBytes(e);
        },
        writeFixed32Field: function (t, e) {
          this.writeTag(t, vu.Fixed32), this.writeFixed32(e);
        },
        writeSFixed32Field: function (t, e) {
          this.writeTag(t, vu.Fixed32), this.writeSFixed32(e);
        },
        writeFixed64Field: function (t, e) {
          this.writeTag(t, vu.Fixed64), this.writeFixed64(e);
        },
        writeSFixed64Field: function (t, e) {
          this.writeTag(t, vu.Fixed64), this.writeSFixed64(e);
        },
        writeVarintField: function (t, e) {
          this.writeTag(t, vu.Varint), this.writeVarint(e);
        },
        writeSVarintField: function (t, e) {
          this.writeTag(t, vu.Varint), this.writeSVarint(e);
        },
        writeStringField: function (t, e) {
          this.writeTag(t, vu.Bytes), this.writeString(e);
        },
        writeFloatField: function (t, e) {
          this.writeTag(t, vu.Fixed32), this.writeFloat(e);
        },
        writeDoubleField: function (t, e) {
          this.writeTag(t, vu.Fixed64), this.writeDouble(e);
        },
        writeBooleanField: function (t, e) {
          this.writeVarintField(t, Boolean(e));
        }
      };
      var Tu = 3;
  
      function Vu(t, e, r) {
        1 === t && r.readMessage(Fu, e);
      }
  
      function Fu(t, e, r) {
        if (3 === t) {
          var n = r.readMessage(Ou, {}),
            i = n.id,
            a = n.bitmap,
            o = n.width,
            s = n.height,
            u = n.left,
            l = n.top,
            p = n.advance;
          e.push({
            id: i,
            bitmap: new Ya({
              width: o + 2 * Tu,
              height: s + 2 * Tu
            }, a),
            metrics: {
              width: o,
              height: s,
              left: u,
              top: l,
              advance: p
            }
          });
        }
      }
  
      function Ou(t, e, r) {
        1 === t ? e.id = r.readVarint() : 2 === t ? e.bitmap = r.readBytes() : 3 === t ? e.width = r.readVarint() : 4 === t ? e.height = r.readVarint() : 5 === t ? e.left = r.readSVarint() : 6 === t ? e.top = r.readSVarint() : 7 === t && (e.advance = r.readVarint());
      }
      var Lu = Tu,
        Du = function (t) {
          var e = this;
          this._callback = t, this._triggered = !1, "undefined" != typeof MessageChannel && (this._channel = new MessageChannel, this._channel.port2.onmessage = function () {
            e._triggered = !1, e._callback();
          });
        };
      Du.prototype.trigger = function () {
        var t = this;
        this._triggered || (this._triggered = !0, this._channel ? this._channel.port1.postMessage(!0) : setTimeout(function () {
          t._triggered = !1, t._callback();
        }, 0));
      };
      var ju = function (t, e, r) {
        this.target = t, this.parent = e, this.mapId = r, this.callbacks = {}, this.tasks = {}, this.taskQueue = [], this.cancelCallbacks = {}, A(["receive", "process"], this), this.invoker = new Du(this.process), this.target.addEventListener("message", this.receive, !1);
      };
  
      function Uu(t, e, r) {
        var n = 2 * Math.PI * 6378137 / 256 / Math.pow(2, r);
        return [t * n - 2 * Math.PI * 6378137 / 2, e * n - 2 * Math.PI * 6378137 / 2]
      }
      ju.prototype.send = function (t, e, r, n) {
        var i = this,
          a = Math.round(1e18 * Math.random()).toString(36).substring(0, 10);
        r && (this.callbacks[a] = r);
        var o = [];
        return this.target.postMessage({
          id: a,
          type: t,
          hasCallback: !!r,
          targetMapId: n,
          sourceMapId: this.mapId,
          data: Tn(e, o)
        }, o), {
          cancel: function () {
            r && delete i.callbacks[a], i.target.postMessage({
              id: a,
              type: "<cancel>",
              targetMapId: n,
              sourceMapId: i.mapId
            });
          }
        }
      }, ju.prototype.receive = function (t) {
        var e = t.data,
          r = e.id;
        if (r && (!e.targetMapId || this.mapId === e.targetMapId))
          if ("<cancel>" === e.type) {
            delete this.tasks[r];
            var n = this.cancelCallbacks[r];
            delete this.cancelCallbacks[r], n && n();
          } else this.tasks[r] = e, this.taskQueue.push(r), this.invoker.trigger();
      }, ju.prototype.process = function () {
        var t = this;
        if (this.taskQueue.length) {
          var e = this.taskQueue.shift(),
            r = this.tasks[e];
          if (delete this.tasks[e], this.taskQueue.length && this.invoker.trigger(), r)
            if ("<response>" === r.type) {
              var n = this.callbacks[e];
              delete this.callbacks[e], n && (r.error ? n(Vn(r.error)) : n(null, Vn(r.data)));
            } else {
              var i = !1,
                a = r.hasCallback ? function (r, n) {
                  i = !0, delete t.cancelCallbacks[e];
                  var a = [];
                  t.target.postMessage({
                    id: e,
                    type: "<response>",
                    sourceMapId: t.mapId,
                    error: r ? Tn(r) : null,
                    data: Tn(n, a)
                  }, a);
                } : function (t) {
                  i = !0;
                },
                o = null,
                s = Vn(r.data);
              if (this.parent[r.type]) o = this.parent[r.type](r.sourceMapId, s, a);
              else if (this.parent.getWorkerSource) {
                var u = r.type.split(".");
                o = this.parent.getWorkerSource(r.sourceMapId, u[0], s.source)[u[1]](s, a);
              } else a(new Error("Could not find function " + r.type));
              !i && o && o.cancel && (this.cancelCallbacks[e] = o.cancel);
            }
        }
      }, ju.prototype.remove = function () {
        this.target.removeEventListener("message", this.receive, !1);
      };
      var Ru = function (t, e) {
        t && (e ? this.setSouthWest(t).setNorthEast(e) : 4 === t.length ? this.setSouthWest([t[0], t[1]]).setNorthEast([t[2], t[3]]) : this.setSouthWest(t[0]).setNorthEast(t[1]));
      };
      Ru.prototype.setNorthEast = function (t) {
        return this._ne = t instanceof Ku ? new Ku(t.lng, t.lat) : Ku.convert(t), this
      }, Ru.prototype.setSouthWest = function (t) {
        return this._sw = t instanceof Ku ? new Ku(t.lng, t.lat) : Ku.convert(t), this
      }, Ru.prototype.extend = function (t) {
        var e, r, n = this._sw,
          i = this._ne;
        if (t instanceof Ku) e = t, r = t;
        else {
          if (!(t instanceof Ru)) return Array.isArray(t) ? t.every(Array.isArray) ? this.extend(Ru.convert(t)) : this.extend(Ku.convert(t)) : this;
          if (e = t._sw, r = t._ne, !e || !r) return this
        }
        return n || i ? (n.lng = Math.min(e.lng, n.lng), n.lat = Math.min(e.lat, n.lat), i.lng = Math.max(r.lng, i.lng), i.lat = Math.max(r.lat, i.lat)) : (this._sw = new Ku(e.lng, e.lat), this._ne = new Ku(r.lng, r.lat)), this
      }, Ru.prototype.getCenter = function () {
        return new Ku((this._sw.lng + this._ne.lng) / 2, (this._sw.lat + this._ne.lat) / 2)
      }, Ru.prototype.getSouthWest = function () {
        return this._sw
      }, Ru.prototype.getNorthEast = function () {
        return this._ne
      }, Ru.prototype.getNorthWest = function () {
        return new Ku(this.getWest(), this.getNorth())
      }, Ru.prototype.getSouthEast = function () {
        return new Ku(this.getEast(), this.getSouth())
      }, Ru.prototype.getWest = function () {
        return this._sw.lng
      }, Ru.prototype.getSouth = function () {
        return this._sw.lat
      }, Ru.prototype.getEast = function () {
        return this._ne.lng
      }, Ru.prototype.getNorth = function () {
        return this._ne.lat
      }, Ru.prototype.toArray = function () {
        return [this._sw.toArray(), this._ne.toArray()]
      }, Ru.prototype.toString = function () {
        return "LngLatBounds(" + this._sw.toString() + ", " + this._ne.toString() + ")"
      }, Ru.prototype.isEmpty = function () {
        return !(this._sw && this._ne)
      }, Ru.convert = function (t) {
        return !t || t instanceof Ru ? t : new Ru(t)
      };
      var qu = function (t) {
        for (var e = [], r = function (t) {
            return t ? t.length : 0
          }(t), n = Array(Math.floor(t.length / 2)), i = 0, a = 0, o = 0, s = 0; i < r; ++s) {
          var u = 1,
            l = 0;
          do {
            var p = t.charCodeAt(i++) - 63 - 1;
            u += p << l, l += 5;
          } while (31 <= p);
          a += 1 & u ? ~(u >> 1) : u >> 1, u = 1, l = 0;
          do {
            u += (p = t.charCodeAt(i++) - 63 - 1) << l, l += 5;
          } while (31 <= p);
          o += 1 & u ? ~(u >> 1) : u >> 1, n[s] = new Nu(1e-5 * a, 1e-5 * o, !0), e.push([1e-5 * o, 1e-5 * a]);
        }
        return n.length = s, e.length > 1 ? e : e[0]
      };
  
      function Nu(t, e, r) {
        if (t && (void 0 !== t.lat || void 0 !== t.lng)) try {
          Ac(t), e = t.lng, t = t.lat, r = !1;
        } catch (t) {
          _.oc(t);
        }
        t -= 0, e -= 0, r || (t = function (t, e, r) {
          return null != e && (t = Math.max(t, e)), null != r && (t = Math.min(t, r)), t
        }(t, -90, 90), 180 != e && (e = function (t, e, r) {
          return ((t - e) % (r -= e) + r) % r + e
        }(e, -180, 180)));
      }
      var Ku = function (t, e) {
        if (isNaN(t) || isNaN(e)) throw new Error("Invalid LngLat object: (" + t + ", " + e + ")");
        this.lng = +t, this.lat = +e;
      };
      Ku.prototype.wrap = function () {
        return new Ku(m(this.lng, -180, 180), this.lat)
      }, Ku.prototype.toArray = function () {
        return [this.lng, this.lat]
      }, Ku.prototype.toString = function () {
        return "LngLat(" + this.lng + ", " + this.lat + ")"
      }, Ku.prototype.toBounds = function (t) {
        void 0 === t && (t = 0);
        var e = 360 * t / 40075017,
          r = e / Math.cos(Math.PI / 180 * this.lat);
        return new Ru(new Ku(this.lng - r, this.lat - e), new Ku(this.lng + r, this.lat + e))
      }, Ku.convert = function (t) {
        if (t instanceof Ku) return t;
        if ("string" == typeof t && null !== t) {
          var e = qu(t);
          return new Ku(Number(e[0]), Number(e[1]))
        }
        if (Array.isArray(t) && (2 === t.length || 3 === t.length)) return new Ku(Number(t[0]), Number(t[1]));
        if (!Array.isArray(t) && "object" == typeof t && null !== t) return new Ku(Number("lng" in t ? t.lng : t.lon), Number(t.lat));
        throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")
      };
      var Zu = 2 * Math.PI * 6378137;
  
      function Xu(t) {
        return Zu * Math.cos(t * Math.PI / 180)
      }
  
      function Gu(t) {
        return (180 + t) / 360
      }
  
      function Hu(t) {
        return (180 - 180 / Math.PI * Math.log(Math.tan(Math.PI / 4 + t * Math.PI / 360))) / 360
      }
  
      function Ju(t, e) {
        return t / Xu(e)
      }
  
      function Yu(t) {
        return 360 * t - 180
      }
  
      function $u(t) {
        var e = 180 - 360 * t;
        return 360 / Math.PI * Math.atan(Math.exp(e * Math.PI / 180)) - 90
      }
  
      function Wu(t, e) {
        return t * Xu($u(e))
      }
      var Qu = function (t, e, r) {
        void 0 === r && (r = 0), this.x = +t, this.y = +e, this.z = +r;
      };
      Qu.fromLngLat = function (t, e) {
        void 0 === e && (e = 0);
        var r = Ku.convert(t);
        return new Qu(Gu(r.lng), Hu(r.lat), Ju(e, r.lat))
      }, Qu.prototype.toLngLat = function () {
        return new Ku(Yu(this.x), $u(this.y))
      }, Qu.prototype.toAltitude = function () {
        return Wu(this.z, this.y)
      }, Qu.prototype.meterInMercatorCoordinateUnits = function () {
        return 1 / Zu * (t = $u(this.y), 1 / Math.cos(t * Math.PI / 180));
        var t;
      };
      var tl = function (t, e, r) {
        this.z = t, this.x = e, this.y = r, this.key = nl(0, t, e, r);
      };
      tl.prototype.equals = function (t) {
        return this.z === t.z && this.x === t.x && this.y === t.y
      }, tl.prototype.url = function (t, e) {
        var r, n, i, a, o, s = (r = this.x, n = this.y, i = this.z, a = Uu(256 * r, 256 * (n = Math.pow(2, i) - n - 1), i), o = Uu(256 * (r + 1), 256 * (n + 1), i), a[0] + "," + a[1] + "," + o[0] + "," + o[1]),
          u = function (t, e, r) {
            for (var n, i = "", a = t; a > 0; a--) i += (e & (n = 1 << a - 1) ? 1 : 0) + (r & n ? 2 : 0);
            return i
          }(this.z, this.x, this.y);
        return t[(this.x + this.y) % t.length].replace("{prefix}", (this.x % 16).toString(16) + (this.y % 16).toString(16)).replace("{z}", String(this.z)).replace("{x}", String(this.x)).replace("{y}", String("tms" === e ? Math.pow(2, this.z) - this.y - 1 : this.y)).replace("{quadkey}", u).replace("{bbox-epsg-3857}", s)
      }, tl.prototype.getTilePoint = function (t) {
        var e = Math.pow(2, this.z);
        return new p((t.x * e - this.x) * ga, (t.y * e - this.y) * ga)
      };
      var el = function (t, e) {
          this.wrap = t, this.canonical = e, this.key = nl(t, e.z, e.x, e.y);
        },
        rl = function (t, e, r, n, i) {
          this.overscaledZ = t, this.wrap = e, this.canonical = new tl(r, +n, +i), this.key = nl(e, t, n, i);
        };
  
      function nl(t, e, r, n) {
        (t *= 2) < 0 && (t = -1 * t - 1);
        var i = 1 << e;
        return 32 * (i * i * t + i * n + r) + e
      }
      rl.prototype.equals = function (t) {
        return this.overscaledZ === t.overscaledZ && this.wrap === t.wrap && this.canonical.equals(t.canonical)
      }, rl.prototype.scaledTo = function (t) {
        var e = this.canonical.z - t;
        return t > this.canonical.z ? new rl(t, this.wrap, this.canonical.z, this.canonical.x, this.canonical.y) : new rl(t, this.wrap, t, this.canonical.x >> e, this.canonical.y >> e)
      }, rl.prototype.isChildOf = function (t) {
        if (t.wrap !== this.wrap) return !1;
        var e = this.canonical.z - t.canonical.z;
        return 0 === t.overscaledZ || t.overscaledZ < this.overscaledZ && t.canonical.x === this.canonical.x >> e && t.canonical.y === this.canonical.y >> e
      }, rl.prototype.children = function (t) {
        if (this.overscaledZ >= t) return [new rl(this.overscaledZ + 1, this.wrap, this.canonical.z, this.canonical.x, this.canonical.y)];
        var e = this.canonical.z + 1,
          r = 2 * this.canonical.x,
          n = 2 * this.canonical.y;
        return [new rl(e, this.wrap, e, r, n), new rl(e, this.wrap, e, r + 1, n), new rl(e, this.wrap, e, r, n + 1), new rl(e, this.wrap, e, r + 1, n + 1)]
      }, rl.prototype.isLessThan = function (t) {
        return this.wrap < t.wrap || !(this.wrap > t.wrap) && (this.overscaledZ < t.overscaledZ || !(this.overscaledZ > t.overscaledZ) && (this.canonical.x < t.canonical.x || !(this.canonical.x > t.canonical.x) && this.canonical.y < t.canonical.y))
      }, rl.prototype.wrapped = function () {
        return new rl(this.overscaledZ, 0, this.canonical.z, this.canonical.x, this.canonical.y)
      }, rl.prototype.unwrapTo = function (t) {
        return new rl(this.overscaledZ, t, this.canonical.z, this.canonical.x, this.canonical.y)
      }, rl.prototype.overscaleFactor = function () {
        return Math.pow(2, this.overscaledZ - this.canonical.z)
      }, rl.prototype.toUnwrapped = function () {
        return new el(this.wrap, this.canonical)
      }, rl.prototype.toString = function () {
        return this.overscaledZ + "/" + this.canonical.x + "/" + this.canonical.y
      }, rl.prototype.getTilePoint = function (t) {
        return this.canonical.getTilePoint(new Qu(t.x - this.wrap, t.y))
      }, En("CanonicalTileID", tl), En("OverscaledTileID", rl, {
        omit: ["posMatrix"]
      });
      var il = function (t, e, r) {
        if (this.uid = t, e.height !== e.width) throw new RangeError("DEM tiles must be square");
        if (r && "epgis" !== r && "terrarium" !== r) return B('"' + r + '" is not a valid encoding type. Valid types include "epgis" and "terrarium".');
        var n = this.dim = e.height;
        this.stride = this.dim + 2, this.data = new Int32Array(this.stride * this.stride);
        for (var i = e.data, a = "terrarium" === r ? this._unpackTerrarium : this._unpackEpgis, o = 0; o < n; o++)
          for (var s = 0; s < n; s++) {
            var u = 4 * (o * n + s);
            this.set(s, o, a(i[u], i[u + 1], i[u + 2]));
          }
        for (var l = 0; l < n; l++) this.set(-1, l, this.get(0, l)), this.set(n, l, this.get(n - 1, l)), this.set(l, -1, this.get(l, 0)), this.set(l, n, this.get(l, n - 1));
        this.set(-1, -1, this.get(0, 0)), this.set(n, -1, this.get(n - 1, 0)), this.set(-1, n, this.get(0, n - 1)), this.set(n, n, this.get(n - 1, n - 1));
      };
      il.prototype.set = function (t, e, r) {
        this.data[this._idx(t, e)] = r + 65536;
      }, il.prototype.get = function (t, e) {
        return this.data[this._idx(t, e)] - 65536
      }, il.prototype._idx = function (t, e) {
        if (t < -1 || t >= this.dim + 1 || e < -1 || e >= this.dim + 1) throw new RangeError("out of range source coordinates for DEM data");
        return (e + 1) * this.stride + (t + 1)
      }, il.prototype._unpackEpgis = function (t, e, r) {
        return (256 * t * 256 + 256 * e + r) / 10 - 1e4
      }, il.prototype._unpackTerrarium = function (t, e, r) {
        return 256 * t + e + r / 256 - 32768
      }, il.prototype.getPixels = function () {
        return new $a({
          width: this.stride,
          height: this.stride
        }, new Uint8Array(this.data.buffer))
      }, il.prototype.backfillBorder = function (t, e, r) {
        if (this.dim !== t.dim) throw new Error("dem dimension mismatch");
        var n = e * this.dim,
          i = e * this.dim + this.dim,
          a = r * this.dim,
          o = r * this.dim + this.dim;
        switch (e) {
          case -1:
            n = i - 1;
            break;
          case 1:
            i = n + 1;
        }
        switch (r) {
          case -1:
            a = o - 1;
            break;
          case 1:
            o = a + 1;
        }
        for (var s = -e * this.dim, u = -r * this.dim, l = a; l < o; l++)
          for (var p = n; p < i; p++) this.set(p, l, t.get(p + s, l + u));
      }, En("DEMData", il);
      var al = fi([{
        name: "a_pos",
        type: "Int16",
        components: 2
      }, {
        name: "a_texture_pos",
        type: "Int16",
        components: 2
      }]);
      var ol = function (t) {
        this._stringToNumber = {}, this._numberToString = [];
        for (var e = 0; e < t.length; e++) {
          var r = t[e];
          this._stringToNumber[r] = e, this._numberToString[e] = r;
        }
      };
      ol.prototype.encode = function (t) {
        return this._stringToNumber[t]
      }, ol.prototype.decode = function (t) {
        return this._numberToString[t]
      };
      var sl = function (t, e, r, n) {
          this.type = "Feature", this._vectorTileFeature = t, t._z = e, t._x = r, t._y = n, this.properties = t.properties, null != t.id && (this.id = t.id);
        },
        ul = {
          geometry: {
            configurable: !0
          }
        };
      ul.geometry.get = function () {
        return void 0 === this._geometry && (this._geometry = this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x, this._vectorTileFeature._y, this._vectorTileFeature._z).geometry), this._geometry
      }, ul.geometry.set = function (t) {
        this._geometry = t;
      }, sl.prototype.toJSON = function () {
        var t = {
          geometry: this.geometry
        };
        for (var e in this) "_geometry" !== e && "_vectorTileFeature" !== e && (t[e] = this[e]);
        return t
      }, Object.defineProperties(sl.prototype, ul);
      var ll = function () {
        this.state = {}, this.stateChanges = {}, this.deletedStates = {};
      };
      ll.prototype.updateState = function (t, e, r) {
        var n = String(e);
        if (this.stateChanges[t] = this.stateChanges[t] || {}, this.stateChanges[t][n] = this.stateChanges[t][n] || {}, v(this.stateChanges[t][n], r), null === this.deletedStates[t])
          for (var i in this.deletedStates[t] = {}, this.state[t]) i !== n && (this.deletedStates[t][i] = null);
        else if (this.deletedStates[t] && null === this.deletedStates[t][n])
          for (var a in this.deletedStates[t][n] = {}, this.state[t][n]) r[a] || (this.deletedStates[t][n][a] = null);
        else
          for (var o in r) {
            this.deletedStates[t] && this.deletedStates[t][n] && null === this.deletedStates[t][n][o] && delete this.deletedStates[t][n][o];
          }
      }, ll.prototype.removeFeatureState = function (t, e, r) {
        if (!(null === this.deletedStates[t])) {
          var n = String(e);
          if (this.deletedStates[t] = this.deletedStates[t] || {}, r && void 0 !== e && e >= 0) null !== this.deletedStates[t][n] && (this.deletedStates[t][n] = this.deletedStates[t][n] || {}, this.deletedStates[t][n][r] = null);
          else if (void 0 !== e && e >= 0) {
            if (this.stateChanges[t] && this.stateChanges[t][n])
              for (r in this.deletedStates[t][n] = {}, this.stateChanges[t][n]) this.deletedStates[t][n][r] = null;
            else this.deletedStates[t][n] = null;
          } else this.deletedStates[t] = null;
        }
      }, ll.prototype.getState = function (t, e) {
        var r = String(e),
          n = this.state[t] || {},
          i = this.stateChanges[t] || {},
          a = v({}, n[r], i[r]);
        if (null === this.deletedStates[t]) return {};
        if (this.deletedStates[t]) {
          var o = this.deletedStates[t][e];
          if (null === o) return {};
          for (var s in o) delete a[s];
        }
        return a
      }, ll.prototype.initializeTileState = function (t, e) {
        t.setFeatureState(this.state, e);
      }, ll.prototype.coalesceChanges = function (t, e) {
        var r = {};
        for (var n in this.stateChanges) {
          this.state[n] = this.state[n] || {};
          var i = {};
          for (var a in this.stateChanges[n]) this.state[n][a] || (this.state[n][a] = {}), v(this.state[n][a], this.stateChanges[n][a]), i[a] = this.state[n][a];
          r[n] = i;
        }
        for (var o in this.deletedStates) {
          this.state[o] = this.state[o] || {};
          var s = {};
          if (null === this.deletedStates[o])
            for (var u in this.state[o]) s[u] = {}, this.state[o][u] = {};
          else
            for (var l in this.deletedStates[o]) {
              if (null === this.deletedStates[o][l]) this.state[o][l] = {};
              else
                for (var p = 0, c = Object.keys(this.deletedStates[o][l]); p < c.length; p += 1) {
                  var h = c[p];
                  delete this.state[o][l][h];
                }
              s[l] = this.state[o][l];
            }
          r[o] = r[o] || {}, v(r[o], s);
        }
        if (this.stateChanges = {}, this.deletedStates = {}, 0 !== Object.keys(r).length)
          for (var f in t) {
            t[f].setFeatureState(r, e);
          }
      };
      var pl = function (t, e, r) {
        this.tileID = t, this.x = t.canonical.x, this.y = t.canonical.y, this.z = t.canonical.z, this.grid = e || new zn(ga, 16, 0), this.grid3D = new zn(ga, 16, 0), this.featureIndexArray = r || new Gi;
      };
  
      function cl(t) {
        for (var e = 1 / 0, r = 1 / 0, n = -1 / 0, i = -1 / 0, a = 0, o = t; a < o.length; a += 1) {
          var s = o[a];
          e = Math.min(e, s.x), r = Math.min(r, s.y), n = Math.max(n, s.x), i = Math.max(i, s.y);
        }
        return {
          minX: e,
          minY: r,
          maxX: n,
          maxY: i
        }
      }
  
      function hl(t, e) {
        return e - t
      }
      pl.prototype.insert = function (t, e, r, n, i, a) {
        var o = this.featureIndexArray.length;
        this.featureIndexArray.emplaceBack(r, n, i);
        for (var s = a ? this.grid3D : this.grid, u = 0; u < e.length; u++) {
          for (var l = e[u], p = [1 / 0, 1 / 0, -1 / 0, -1 / 0], c = 0; c < l.length; c++) {
            var h = l[c];
            p[0] = Math.min(p[0], h.x), p[1] = Math.min(p[1], h.y), p[2] = Math.max(p[2], h.x), p[3] = Math.max(p[3], h.y);
          }
          p[0] < ga && p[1] < ga && p[2] >= 0 && p[3] >= 0 && s.insert(o, p[0], p[1], p[2], p[3]);
        }
      }, pl.prototype.loadVTLayers = function () {
        return this.vtLayers || (this.vtLayers = new Yo.VectorTile(new mu(this.rawTileData)).layers, this.sourceLayerCoder = new ol(this.vtLayers ? Object.keys(this.vtLayers).sort() : ["_geojsonTileLayer"])), this.vtLayers
      }, pl.prototype.query = function (t, e, r) {
        var n = this;
        this.loadVTLayers();
        for (var i = t.params || {}, a = ga / t.tileSize / t.scale, o = Qr(i.filter), s = t.queryGeometry, u = t.queryPadding * a, l = cl(s), c = this.grid.query(l.minX - u, l.minY - u, l.maxX + u, l.maxY + u), h = cl(t.cameraQueryGeometry), f = this.grid3D.query(h.minX - u, h.minY - u, h.maxX + u, h.maxY + u, function (e, r, n, i) {
            return function (t, e, r, n, i) {
              for (var a = 0, o = t; a < o.length; a += 1) {
                var s = o[a];
                if (e <= s.x && r <= s.y && n >= s.x && i >= s.y) return !0
              }
              var u = [new p(e, r), new p(e, i), new p(n, i), new p(n, r)];
              if (t.length > 2)
                for (var l = 0, c = u; l < c.length; l += 1) {
                  if (Ta(t, c[l])) return !0
                }
              for (var h = 0; h < t.length - 1; h++) {
                if (Va(t[h], t[h + 1], u)) return !0
              }
              return !1
            }(t.cameraQueryGeometry, e - u, r - u, n + u, i + u)
          }), y = 0, d = f; y < d.length; y += 1) {
          var m = d[y];
          c.push(m);
        }
        c.sort(hl);
        for (var v, g = {}, x = function (u) {
            var l = c[u];
            if (l !== v) {
              v = l;
              var p = n.featureIndexArray.get(l),
                h = null;
              n.loadMatchingFeature(g, p.bucketIndex, p.sourceLayerIndex, p.featureIndex, o, i.layers, e, function (e, i) {
                h || (h = _a(e));
                var o = {};
                return e.id && (o = r.getState(i.sourceLayer || "_geojsonTileLayer", e.id)), i.queryIntersectsFeature(s, e, o, h, n.z, t.transform, a, t.pixelPosMatrix)
              });
            }
          }, b = 0; b < c.length; b++) x(b);
        return g
      }, pl.prototype.loadMatchingFeature = function (t, e, r, n, i, a, o, s) {
        var u = this.bucketLayerIDs[e];
        if (!a || function (t, e) {
            for (var r = 0; r < t.length; r++)
              if (e.indexOf(t[r]) >= 0) return !0;
            return !1
          }(a, u)) {
          var l = this.sourceLayerCoder.decode(r),
            p = this.vtLayers[l].feature(n);
          if (i(new Hn(this.tileID.overscaledZ), p))
            for (var c = 0; c < u.length; c++) {
              var h = u[c];
              if (!(a && a.indexOf(h) < 0)) {
                var f = o[h];
                if (f) {
                  var y = !s || s(p, f);
                  if (y) {
                    var d = new sl(p, this.z, this.x, this.y);
                    d.layer = f.serialize();
                    var m = t[h];
                    void 0 === m && (m = t[h] = []), m.push({
                      featureIndex: n,
                      feature: d,
                      intersectionZ: y
                    });
                  }
                }
              }
            }
        }
      }, pl.prototype.lookupSymbolFeatures = function (t, e, r, n, i, a) {
        var o = {};
        this.loadVTLayers();
        for (var s = Qr(n), u = 0, l = t; u < l.length; u += 1) {
          var p = l[u];
          this.loadMatchingFeature(o, e, r, p, s, i, a);
        }
        return o
      }, pl.prototype.hasLayer = function (t) {
        for (var e = 0, r = this.bucketLayerIDs; e < r.length; e += 1)
          for (var n = 0, i = r[e]; n < i.length; n += 1) {
            if (t === i[n]) return !0
          }
        return !1
      }, En("FeatureIndex", pl, {
        omit: ["rawTileData", "sourceLayerCoder"]
      });
      var fl = function (t, e) {
        this.tileID = t, this.uid = x(), this.uses = 0, this.tileSize = e, this.buckets = {}, this.expirationTime = null, this.queryPadding = 0, this.hasSymbolBuckets = !1, this.expiredRequestCount = 0, this.state = "loading";
      };
      fl.prototype.registerFadeDuration = function (t) {
        var e = t + this.timeAdded;
        e < s.now() || this.fadeEndTime && e < this.fadeEndTime || (this.fadeEndTime = e);
      }, fl.prototype.wasRequested = function () {
        return "errored" === this.state || "loaded" === this.state || "reloading" === this.state
      }, fl.prototype.loadVectorData = function (t, e, r) {
        if (this.hasData() && this.unloadVectorData(), this.state = "loaded", t) {
          for (var n in t.featureIndex && (this.latestFeatureIndex = t.featureIndex, t.rawTileData ? (this.latestRawTileData = t.rawTileData, this.latestFeatureIndex.rawTileData = t.rawTileData) : this.latestRawTileData && (this.latestFeatureIndex.rawTileData = this.latestRawTileData)), this.collisionBoxArray = t.collisionBoxArray, this.buckets = function (t, e) {
              var r = {};
              if (!e) return r;
              for (var n = function () {
                  var t = a[i],
                    n = t.layerIds.map(function (t) {
                      return e.getLayer(t)
                    }).filter(Boolean);
                  if (0 !== n.length) {
                    t.layers = n, t.stateDependentLayerIds && (t.stateDependentLayers = t.stateDependentLayerIds.map(function (t) {
                      return n.filter(function (e) {
                        return e.id === t
                      })[0]
                    }));
                    for (var o = 0, s = n; o < s.length; o += 1) {
                      var u = s[o];
                      r[u.id] = t;
                    }
                  }
                }, i = 0, a = t; i < a.length; i += 1) n();
              return r
            }(t.buckets, e.style), this.hasSymbolBuckets = !1, this.buckets) {
            var i = this.buckets[n];
            if (i instanceof Hs) {
              if (this.hasSymbolBuckets = !0, !r) break;
              i.justReloaded = !0;
            }
          }
          for (var a in this.queryPadding = 0, this.buckets) {
            var o = this.buckets[a];
            this.queryPadding = Math.max(this.queryPadding, e.style.getLayer(a).queryRadius(o));
          }
          t.imageAtlas && (this.imageAtlas = t.imageAtlas), t.glyphAtlasImage && (this.glyphAtlasImage = t.glyphAtlasImage);
        } else this.collisionBoxArray = new Li;
      }, fl.prototype.unloadVectorData = function () {
        for (var t in this.buckets) this.buckets[t].destroy();
        this.buckets = {}, this.imageAtlasTexture && this.imageAtlasTexture.destroy(), this.imageAtlas && (this.imageAtlas = null), this.glyphAtlasTexture && this.glyphAtlasTexture.destroy(), this.latestFeatureIndex = null, this.state = "unloaded";
      }, fl.prototype.unloadDEMData = function () {
        this.dem = null, this.neighboringTiles = null, this.state = "unloaded";
      }, fl.prototype.getBucket = function (t) {
        return this.buckets[t.id]
      }, fl.prototype.upload = function (t) {
        for (var e in this.buckets) {
          var r = this.buckets[e];
          r.uploadPending() && r.upload(t);
        }
        var n = t.gl;
        this.imageAtlas && !this.imageAtlas.uploaded && (this.imageAtlasTexture = new fu(t, this.imageAtlas.image, n.RGBA), this.imageAtlas.uploaded = !0), this.glyphAtlasImage && (this.glyphAtlasTexture = new fu(t, this.glyphAtlasImage, n.ALPHA), this.glyphAtlasImage = null);
      }, fl.prototype.prepare = function (t) {
        this.imageAtlas && this.imageAtlas.patchUpdatedImages(t, this.imageAtlasTexture);
      }, fl.prototype.queryRenderedFeatures = function (t, e, r, n, i, a, o, s, u) {
        return this.latestFeatureIndex && this.latestFeatureIndex.rawTileData ? this.latestFeatureIndex.query({
          queryGeometry: r,
          cameraQueryGeometry: n,
          scale: i,
          tileSize: this.tileSize,
          pixelPosMatrix: u,
          transform: o,
          params: a,
          queryPadding: this.queryPadding * s
        }, t, e) : {}
      }, fl.prototype.querySourceFeatures = function (t, e) {
        if (this.latestFeatureIndex && this.latestFeatureIndex.rawTileData) {
          var r = this.latestFeatureIndex.loadVTLayers(),
            n = e ? e.sourceLayer : "",
            i = r._geojsonTileLayer || r[n];
          if (i)
            for (var a = Qr(e && e.filter), o = this.tileID.canonical, s = o.z, u = o.x, l = o.y, p = {
                z: s,
                x: u,
                y: l
              }, c = 0; c < i.length; c++) {
              var h = i.feature(c);
              if (a(new Hn(this.tileID.overscaledZ), h)) {
                var f = new sl(h, s, u, l);
                f.tile = p, t.push(f);
              }
            }
        }
      }, fl.prototype.clearMask = function () {
        this.segments && (this.segments.destroy(), delete this.segments), this.maskedBoundsBuffer && (this.maskedBoundsBuffer.destroy(), delete this.maskedBoundsBuffer), this.maskedIndexBuffer && (this.maskedIndexBuffer.destroy(), delete this.maskedIndexBuffer);
      }, fl.prototype.setMask = function (t, e) {
        if (!h(this.mask, t) && (this.mask = t, this.clearMask(), !h(t, {
            0: !0
          }))) {
          var r = new mi,
            n = new Ei;
          this.segments = new Ji, this.segments.prepareSegment(0, r, n);
          for (var i = Object.keys(t), a = 0; a < i.length; a++) {
            var o = t[+i[a]],
              s = ga >> o.z,
              u = new p(o.x * s, o.y * s),
              l = new p(u.x + s, u.y + s),
              c = this.segments.prepareSegment(4, r, n);
            r.emplaceBack(u.x, u.y, u.x, u.y), r.emplaceBack(l.x, u.y, l.x, u.y), r.emplaceBack(u.x, l.y, u.x, l.y), r.emplaceBack(l.x, l.y, l.x, l.y);
            var f = c.vertexLength;
            n.emplaceBack(f, f + 1, f + 2), n.emplaceBack(f + 1, f + 2, f + 3), c.vertexLength += 4, c.primitiveLength += 2;
          }
          this.maskedBoundsBuffer = e.createVertexBuffer(r, al.members), this.maskedIndexBuffer = e.createIndexBuffer(n);
        }
      }, fl.prototype.hasData = function () {
        return "loaded" === this.state || "reloading" === this.state || "expired" === this.state
      }, fl.prototype.patternsLoaded = function () {
        return this.imageAtlas && !!Object.keys(this.imageAtlas.patternPositions).length
      }, fl.prototype.setExpiryData = function (t) {
        var e = this.expirationTime;
        if (t.cacheControl) {
          var r = M(t.cacheControl);
          r["max-age"] && (this.expirationTime = Date.now() + 1e3 * r["max-age"]);
        } else t.expires && (this.expirationTime = new Date(t.expires).getTime());
        if (this.expirationTime) {
          var n = Date.now(),
            i = !1;
          if (this.expirationTime > n) i = !1;
          else if (e)
            if (this.expirationTime < e) i = !0;
            else {
              var a = this.expirationTime - e;
              a ? this.expirationTime = n + Math.max(a, 3e4) : i = !0;
            }
          else i = !0;
          i ? (this.expiredRequestCount++, this.state = "expired") : this.expiredRequestCount = 0;
        }
      }, fl.prototype.getExpiryTimeout = function () {
        if (this.expirationTime) return this.expiredRequestCount ? 1e3 * (1 << Math.min(this.expiredRequestCount - 1, 31)) : Math.min(this.expirationTime - (new Date).getTime(), Math.pow(2, 31) - 1)
      }, fl.prototype.setFeatureState = function (t, e) {
        if (this.latestFeatureIndex && this.latestFeatureIndex.rawTileData && 0 !== Object.keys(t).length) {
          var r = this.latestFeatureIndex.loadVTLayers();
          for (var n in this.buckets) {
            var i = this.buckets[n],
              a = i.layers[0].sourceLayer || "_geojsonTileLayer",
              o = r[a],
              s = t[a];
            o && s && 0 !== Object.keys(s).length && (i.update(s, o, this.imageAtlas && this.imageAtlas.patternPositions || {}), e && e.style && (this.queryPadding = Math.max(this.queryPadding, e.style.getLayer(n).queryRadius(i))));
          }
        }
      }, fl.prototype.holdingForFade = function () {
        return void 0 !== this.symbolFadeHoldUntil
      }, fl.prototype.symbolFadeFinished = function () {
        return !this.symbolFadeHoldUntil || this.symbolFadeHoldUntil < s.now()
      }, fl.prototype.clearFadeHold = function () {
        this.symbolFadeHoldUntil = void 0;
      }, fl.prototype.setHoldDuration = function (t) {
        this.symbolFadeHoldUntil = s.now() + t;
      };
  
      function yl(t, e, r, n, i) {
        if (void 0 === e.segment) return !0;
        for (var a = e, o = e.segment + 1, s = 0; s > -r / 2;) {
          if (--o < 0) return !1;
          s -= t[o].dist(a), a = t[o];
        }
        s += t[o].dist(t[o + 1]), o++;
        for (var u = [], l = 0; s < r / 2;) {
          var p = t[o - 1],
            c = t[o],
            h = t[o + 1];
          if (!h) return !1;
          var f = p.angleTo(c) - c.angleTo(h);
          for (f = Math.abs((f + 3 * Math.PI) % (2 * Math.PI) - Math.PI), u.push({
              distance: s,
              angleDelta: f
            }), l += f; s - u[0].distance > n;) l -= u.shift().angleDelta;
          if (l > i) return !1;
          o++, s += c.dist(h);
        }
        return !0
      }
  
      function dl(t) {
        for (var e = 0, r = 0; r < t.length - 1; r++) e += t[r].dist(t[r + 1]);
        return e
      }
  
      function ml(t, e, r) {
        return t ? .6 * e * r : 0
      }
  
      function vl(t, e) {
        return Math.max(t ? t.right - t.left : 0, e ? e.right - e.left : 0)
      }
  
      function gl(t, e, r, n, i, a) {
        for (var o = ml(r, i, a), s = vl(r, n) * a, u = 0, l = dl(t) / 2, p = 0; p < t.length - 1; p++) {
          var c = t[p],
            h = t[p + 1],
            f = c.dist(h);
          if (u + f > l) {
            var y = (l - u) / f,
              d = Fe(c.x, h.x, y),
              m = Fe(c.y, h.y, y),
              v = new Os(d, m, h.angleTo(c), p);
            return v._round(), !o || yl(t, v, s, o, e) ? v : void 0
          }
          u += f;
        }
      }
  
      function xl(t, e, r, n, i, a, o, s, u) {
        var l = ml(n, a, o),
          p = vl(n, i),
          c = p * o,
          h = 0 === t[0].x || t[0].x === u || 0 === t[0].y || t[0].y === u;
        return e - c < e / 4 && (e = c + e / 4),
          function t(e, r, n, i, a, o, s, u, l) {
            var p = o / 2;
            var c = dl(e);
            var h = 0,
              f = r - n;
            var y = [];
            for (var d = 0; d < e.length - 1; d++) {
              for (var m = e[d], v = e[d + 1], g = m.dist(v), x = v.angleTo(m); f + n < h + g;) {
                var b = ((f += n) - h) / g,
                  _ = Fe(m.x, v.x, b),
                  w = Fe(m.y, v.y, b);
                if (_ >= 0 && _ < l && w >= 0 && w < l && f - p >= 0 && f + p <= c) {
                  var A = new Os(_, w, x, d);
                  A._round(), i && !yl(e, A, o, i, a) || y.push(A);
                }
              }
              h += g;
            }
            u || y.length || s || (y = t(e, h / 2, n, i, a, o, s, !0, l));
            return y
          }(t, h ? e / 2 * s % e : (p / 2 + 2 * a) * o * s % e, e, l, r, c, h, !1, u)
      }
      var bl = function (t, e, r, n, i, a, o, s, u, l, c, h) {
        var f = o.top * s - u,
          y = o.bottom * s + u,
          d = o.left * s - u,
          m = o.right * s + u;
        if (this.boxStartIndex = t.length, l) {
          var v = y - f,
            g = m - d;
          v > 0 && (v = Math.max(10 * s, v), this._addLineCollisionCircles(t, e, r, r.segment, g, v, n, i, a, c));
        } else {
          if (h) {
            var x = new p(d, f),
              b = new p(m, f),
              _ = new p(d, y),
              w = new p(m, y),
              A = h * Math.PI / 180;
            x._rotate(A), b._rotate(A), _._rotate(A), w._rotate(A), d = Math.min(x.x, b.x, _.x, w.x), m = Math.max(x.x, b.x, _.x, w.x), f = Math.min(x.y, b.y, _.y, w.y), y = Math.max(x.y, b.y, _.y, w.y);
          }
          t.emplaceBack(r.x, r.y, d, f, m, y, n, i, a, 0, 0);
        }
        this.boxEndIndex = t.length;
      };
      bl.prototype._addLineCollisionCircles = function (t, e, r, n, i, a, o, s, u, l) {
        var p = a / 2,
          c = Math.floor(i / p) || 1,
          h = 1 + .4 * Math.log(l) / Math.LN2,
          f = Math.floor(c * h / 2),
          y = -a / 2,
          d = r,
          m = n + 1,
          v = y,
          g = -i / 2,
          x = g - i / 4;
        do {
          if (--m < 0) {
            if (v > g) return;
            m = 0;
            break
          }
          v -= e[m].dist(d), d = e[m];
        } while (v > x);
        for (var b = e[m].dist(e[m + 1]), _ = -f; _ < c + f; _++) {
          var w = _ * p,
            A = g + w;
          if (w < 0 && (A += w), w > i && (A += w - i), !(A < v)) {
            for (; v + b < A;) {
              if (v += b, ++m + 1 >= e.length) return;
              b = e[m].dist(e[m + 1]);
            }
            var k = A - v,
              S = e[m],
              z = e[m + 1].sub(S)._unit()._mult(k)._add(S)._round(),
              I = Math.abs(A - y) < p ? 0 : .8 * (A - y);
            t.emplaceBack(z.x, z.y, -a / 2, -a / 2, a / 2, a / 2, o, s, u, a / 2, I);
          }
        }
      };
      var _l = function (t, e) {
        if (void 0 === t && (t = []), void 0 === e && (e = wl), this.data = t, this.length = this.data.length, this.compare = e, this.length > 0)
          for (var r = (this.length >> 1) - 1; r >= 0; r--) this._down(r);
      };
  
      function wl(t, e) {
        return t < e ? -1 : t > e ? 1 : 0
      }
  
      function Al(t, e, r) {
        void 0 === e && (e = 1), void 0 === r && (r = !1);
        for (var n = 1 / 0, i = 1 / 0, a = -1 / 0, o = -1 / 0, s = t[0], u = 0; u < s.length; u++) {
          var l = s[u];
          (!u || l.x < n) && (n = l.x), (!u || l.y < i) && (i = l.y), (!u || l.x > a) && (a = l.x), (!u || l.y > o) && (o = l.y);
        }
        var c = a - n,
          h = o - i,
          f = Math.min(c, h),
          y = f / 2,
          d = new _l([], kl);
        if (0 === f) return new p(n, i);
        for (var m = n; m < a; m += f)
          for (var v = i; v < o; v += f) d.push(new Sl(m + y, v + y, y, t));
        for (var g = function (t) {
            for (var e = 0, r = 0, n = 0, i = t[0], a = 0, o = i.length, s = o - 1; a < o; s = a++) {
              var u = i[a],
                l = i[s],
                p = u.x * l.y - l.x * u.y;
              r += (u.x + l.x) * p, n += (u.y + l.y) * p, e += 3 * p;
            }
            return new Sl(r / e, n / e, 0, t)
          }(t), x = d.length; d.length;) {
          var b = d.pop();
          (b.d > g.d || !g.d) && (g = b, r && console.log("found best %d after %d probes", Math.round(1e4 * b.d) / 1e4, x)), b.max - g.d <= e || (y = b.h / 2, d.push(new Sl(b.p.x - y, b.p.y - y, y, t)), d.push(new Sl(b.p.x + y, b.p.y - y, y, t)), d.push(new Sl(b.p.x - y, b.p.y + y, y, t)), d.push(new Sl(b.p.x + y, b.p.y + y, y, t)), x += 4);
        }
        return r && (console.log("num probes: " + x), console.log("best distance: " + g.d)), g.p
      }
  
      function kl(t, e) {
        return e.max - t.max
      }
  
      function Sl(t, e, r, n) {
        this.p = new p(t, e), this.h = r, this.d = function (t, e) {
          for (var r = !1, n = 1 / 0, i = 0; i < e.length; i++)
            for (var a = e[i], o = 0, s = a.length, u = s - 1; o < s; u = o++) {
              var l = a[o],
                p = a[u];
              l.y > t.y != p.y > t.y && t.x < (p.x - l.x) * (t.y - l.y) / (p.y - l.y) + l.x && (r = !r), n = Math.min(n, Ea(t, l, p));
            }
          return (r ? 1 : -1) * Math.sqrt(n)
        }(this.p, n), this.max = this.d + this.h * Math.SQRT2;
      }
      _l.prototype.push = function (t) {
        this.data.push(t), this.length++, this._up(this.length - 1);
      }, _l.prototype.pop = function () {
        if (0 !== this.length) {
          var t = this.data[0],
            e = this.data.pop();
          return this.length--, this.length > 0 && (this.data[0] = e, this._down(0)), t
        }
      }, _l.prototype.peek = function () {
        return this.data[0]
      }, _l.prototype._up = function (t) {
        for (var e = this.data, r = this.compare, n = e[t]; t > 0;) {
          var i = t - 1 >> 1,
            a = e[i];
          if (r(n, a) >= 0) break;
          e[t] = a, t = i;
        }
        e[t] = n;
      }, _l.prototype._down = function (t) {
        for (var e = this.data, r = this.compare, n = this.length >> 1, i = e[t]; t < n;) {
          var a = 1 + (t << 1),
            o = e[a],
            s = a + 1;
          if (s < this.length && r(e[s], o) < 0 && (a = s, o = e[s]), r(o, i) >= 0) break;
          e[t] = o, t = a;
        }
        e[t] = i;
      };
      var zl = e(function (t) {
          t.exports = function (t, e) {
            var r, n, i, a, o, s, u, l;
            for (r = 3 & t.length, n = t.length - r, i = e, o = 3432918353, s = 461845907, l = 0; l < n;) u = 255 & t.charCodeAt(l) | (255 & t.charCodeAt(++l)) << 8 | (255 & t.charCodeAt(++l)) << 16 | (255 & t.charCodeAt(++l)) << 24, ++l, i = 27492 + (65535 & (a = 5 * (65535 & (i = (i ^= u = (65535 & (u = (u = (65535 & u) * o + (((u >>> 16) * o & 65535) << 16) & 4294967295) << 15 | u >>> 17)) * s + (((u >>> 16) * s & 65535) << 16) & 4294967295) << 13 | i >>> 19)) + ((5 * (i >>> 16) & 65535) << 16) & 4294967295)) + ((58964 + (a >>> 16) & 65535) << 16);
            switch (u = 0, r) {
              case 3:
                u ^= (255 & t.charCodeAt(l + 2)) << 16;
              case 2:
                u ^= (255 & t.charCodeAt(l + 1)) << 8;
              case 1:
                i ^= u = (65535 & (u = (u = (65535 & (u ^= 255 & t.charCodeAt(l))) * o + (((u >>> 16) * o & 65535) << 16) & 4294967295) << 15 | u >>> 17)) * s + (((u >>> 16) * s & 65535) << 16) & 4294967295;
            }
            return i ^= t.length, i = 2246822507 * (65535 & (i ^= i >>> 16)) + ((2246822507 * (i >>> 16) & 65535) << 16) & 4294967295, i = 3266489909 * (65535 & (i ^= i >>> 13)) + ((3266489909 * (i >>> 16) & 65535) << 16) & 4294967295, (i ^= i >>> 16) >>> 0
          };
        }),
        Il = e(function (t) {
          t.exports = function (t, e) {
            for (var r, n = t.length, i = e ^ n, a = 0; n >= 4;) r = 1540483477 * (65535 & (r = 255 & t.charCodeAt(a) | (255 & t.charCodeAt(++a)) << 8 | (255 & t.charCodeAt(++a)) << 16 | (255 & t.charCodeAt(++a)) << 24)) + ((1540483477 * (r >>> 16) & 65535) << 16), i = 1540483477 * (65535 & i) + ((1540483477 * (i >>> 16) & 65535) << 16) ^ (r = 1540483477 * (65535 & (r ^= r >>> 24)) + ((1540483477 * (r >>> 16) & 65535) << 16)), n -= 4, ++a;
            switch (n) {
              case 3:
                i ^= (255 & t.charCodeAt(a + 2)) << 16;
              case 2:
                i ^= (255 & t.charCodeAt(a + 1)) << 8;
              case 1:
                i = 1540483477 * (65535 & (i ^= 255 & t.charCodeAt(a))) + ((1540483477 * (i >>> 16) & 65535) << 16);
            }
            return i = 1540483477 * (65535 & (i ^= i >>> 13)) + ((1540483477 * (i >>> 16) & 65535) << 16), (i ^= i >>> 15) >>> 0
          };
        }),
        Cl = zl,
        Bl = zl,
        Pl = Il;
      Cl.murmur3 = Bl, Cl.murmur2 = Pl;
      var El = 7;
  
      function Ml(t, e) {
        var r = 0,
          n = 0,
          i = e / Math.sqrt(2);
        switch (t) {
          case "top-right":
          case "top-left":
            n = i - El;
            break;
          case "bottom-right":
          case "bottom-left":
            n = -i + El;
            break;
          case "bottom":
            n = -e + El;
            break;
          case "top":
            n = e - El;
        }
        switch (t) {
          case "top-right":
          case "bottom-right":
            r = -i;
            break;
          case "top-left":
          case "bottom-left":
            r = i;
            break;
          case "left":
            r = e;
            break;
          case "right":
            r = -e;
        }
        return [r, n]
      }
  
      function Tl(t) {
        switch (t) {
          case "right":
          case "top-right":
          case "bottom-right":
            return "right";
          case "left":
          case "top-left":
          case "bottom-left":
            return "left"
        }
        return "center"
      }
      var Vl = 65535;
  
      function Fl(t, e, r, n, i, a, o, s, u, l, c, h, f) {
        var y = function (t, e, r, n, i, a, o, s) {
            for (var u = n.layout.get("text-rotate").evaluate(a, {}) * Math.PI / 180, l = e.positionedGlyphs, c = [], h = 0; h < l.length; h++) {
              var f = l[h],
                y = o[f.fontStack],
                d = y && y[f.glyph];
              if (d) {
                var m = d.rect;
                if (m) {
                  var v = Lu + 1,
                    g = d.metrics.advance * f.scale / 2,
                    x = i ? [f.x + g, f.y] : [0, 0],
                    b = i ? [0, 0] : [f.x + g + r[0], f.y + r[1]],
                    _ = (i || s) && f.vertical,
                    w = [0, 0];
                  _ && (w = b, b = [0, 0]);
                  var A = (d.metrics.left - v) * f.scale - g + b[0],
                    k = (-d.metrics.top - v) * f.scale + b[1],
                    S = A + m.w * f.scale,
                    z = k + m.h * f.scale,
                    I = new p(A, k),
                    C = new p(S, k),
                    B = new p(A, z),
                    P = new p(S, z);
                  if (_) {
                    var E = new p(-g, g - e.yOffset),
                      M = -Math.PI / 2,
                      T = ks / 2 - g,
                      V = new p(5 - e.yOffset - T, 0),
                      F = new(Function.prototype.bind.apply(p, [null].concat(w)));
                    I._rotateAround(M, E)._add(V)._add(F), C._rotateAround(M, E)._add(V)._add(F), B._rotateAround(M, E)._add(V)._add(F), P._rotateAround(M, E)._add(V)._add(F);
                  }
                  if (u) {
                    var O = Math.sin(u),
                      L = Math.cos(u),
                      D = [L, -O, O, L];
                    I._matMult(D), C._matMult(D), B._matMult(D), P._matMult(D);
                  }
                  c.push({
                    tl: I,
                    tr: C,
                    bl: B,
                    br: P,
                    tex: m,
                    writingMode: e.writingMode,
                    glyphOffset: x,
                    sectionIndex: f.sectionIndex
                  });
                }
              }
            }
            return c
          }(0, r, o, n, i, a, h, t.allowVerticalPlacement),
          d = t.textSizeData,
          m = null;
        "source" === d.kind ? (m = [Ls * n.layout.get("text-size").evaluate(a, {})])[0] > Vl && B(t.layerIds[0] + ': Value for "text-size" is >= 256. Reduce your "text-size".') : "composite" === d.kind && ((m = [Ls * f.compositeTextSizes[0].evaluate(a, {}), Ls * f.compositeTextSizes[1].evaluate(a, {})])[0] > Vl || m[1] > Vl) && B(t.layerIds[0] + ': Value for "text-size" is >= 256. Reduce your "text-size".'), t.addSymbols(t.text, y, m, o, i, a, u, e, s.lineStartIndex, s.lineLength);
        for (var v = 0, g = l; v < g.length; v += 1) {
          c[g[v]] = t.text.placedSymbolArray.length - 1;
        }
        return 4 * y.length
      }
  
      function Ol(t) {
        for (var e in t) return t[e];
        return null
      }
  
      function Ll(t, e, r, n) {
        var i = t.compareText;
        if (e in i) {
          for (var a = i[e], o = a.length - 1; o >= 0; o--)
            if (n.dist(a[o]) < r) return !0
        } else i[e] = [];
        return i[e].push(n), !1
      }
      t.Actor = ju, t.AlphaImage = Ya, t.CanonicalTileID = tl, t.CollisionBoxArray = Li, t.Color = pe, t.DEMData = il, t.DataConstantProperty = ni, t.DictionaryCoder = ol, t.EXTENT = ga, t.ErrorEvent = jt, t.EvaluationParameters = Hn, t.Event = Dt, t.Evented = Ut, t.FeatureIndex = pl, t.FillBucket = Lo, t.FillExtrusionBucket = ts, t.ImageAtlas = uu, t.ImagePosition = ou, t.LineBucket = cs, t.LngLat = Ku, t.LngLatBounds = Ru, t.MercatorCoordinate = Qu, t.ONE_EM = ks, t.OverscaledTileID = rl, t.Point = p, t.Point$1 = p, t.ProgramConfiguration = ya, t.Properties = ui, t.Protobuf = mu, t.RGBAImage = $a, t.RequestManager = q, t.ResourceType = It, t.SegmentVector = Ji, t.SourceFeatureState = ll, t.StructArrayLayout1ui2 = Ti, t.StructArrayLayout2i4 = di, t.StructArrayLayout2ui4 = Mi, t.StructArrayLayout3ui6 = Ei, t.StructArrayLayout4i8 = mi, t.SymbolBucket = Hs, t.Texture = fu, t.Tile = fl, t.Transitionable = $n, t.Uniform1f = ea, t.Uniform1i = ta, t.Uniform2f = ra, t.Uniform3f = na, t.Uniform4f = ia, t.UniformColor = aa, t.UniformMatrix4f = sa, t.UnwrappedTileID = el, t.ValidationError = qt, t.WritingMode = Ss, t.ZoomHistory = Fn, t.addDynamicAttributes = Zs, t.altitudeFromMercatorZ = Wu, t.asyncAll = function (t, e, r) {
        if (!t.length) return r(null, []);
        var n = t.length,
          i = new Array(t.length),
          a = null;
        t.forEach(function (t, o) {
          e(t, function (t, e) {
            t && (a = t), i[o] = e, 0 == --n && r(a, i);
          });
        });
      }, t.bezier = f, t.bindAll = A, t.browser = s, t.cacheEntryPossiblyAdded = function (t) {
        ++ut > nt && (t.getActor().send("enforceCacheSizeLimit", rt), ut = 0);
      }, t.clamp = d, t.clone = function (t) {
        var e = new Ua(16);
        return e[0] = t[0], e[1] = t[1], e[2] = t[2], e[3] = t[3], e[4] = t[4], e[5] = t[5], e[6] = t[6], e[7] = t[7], e[8] = t[8], e[9] = t[9], e[10] = t[10], e[11] = t[11], e[12] = t[12], e[13] = t[13], e[14] = t[14], e[15] = t[15], e
      }, t.clone$1 = I, t.config = O, t.create = function () {
        var t = new Ua(16);
        return Ua != Float32Array && (t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0), t[0] = 1, t[5] = 1, t[10] = 1, t[15] = 1, t
      }, t.create$1 = function () {
        var t = new Ua(9);
        return Ua != Float32Array && (t[1] = 0, t[2] = 0, t[3] = 0, t[5] = 0, t[6] = 0, t[7] = 0), t[0] = 1, t[4] = 1, t[8] = 1, t
      }, t.create$2 = function () {
        var t = new Ua(4);
        return Ua != Float32Array && (t[1] = 0, t[2] = 0), t[0] = 1, t[3] = 1, t
      }, t.createCommonjsModule = e, t.createExpression = Ur, t.createLayout = fi, t.createStyleLayer = function (t) {
        return "custom" === t.type ? new nu(t) : new iu[t.type](t)
      }, t.decode = qu, t.deepEqual = h, t.ease = y, t.emitValidationErrors = Sn, t.endsWith = k, t.enforceCacheSizeLimit = function (t) {
        self.caches && self.caches.open(et).then(function (e) {
          e.keys().then(function (r) {
            for (var n = 0; n < r.length - t; n++) e.delete(r[n]);
          });
        });
      }, t.evaluateRadialOffset = Ml, t.evaluateSizeForFeature = js, t.evaluateSizeForZoom = Us, t.evented = Xn, t.extend = v, t.featureFilter = Qr, t.filterObject = z, t.fromRotation = function (t, e) {
        var r = Math.sin(e),
          n = Math.cos(e);
        return t[0] = n, t[1] = r, t[2] = 0, t[3] = -r, t[4] = n, t[5] = 0, t[6] = 0, t[7] = 0, t[8] = 1, t
      }, t.getAnchorAlignment = Vs, t.getAnchorJustification = Tl, t.getArrayBuffer = Mt, t.getImage = Ft, t.getJSON = function (t, e) {
        return Et(v(t, {
          type: "json"
        }), e)
      }, t.getReferrer = Pt, t.getVideo = function (t, e) {
        var r, n, i = self.document.createElement("video");
        i.muted = !0, i.onloadstart = function () {
          e(null, i);
        };
        for (var a = 0; a < t.length; a++) {
          var o = self.document.createElement("source");
          r = t[a], n = void 0, (n = self.document.createElement("a")).href = r, (n.protocol !== self.document.location.protocol || n.host !== self.document.location.host) && (i.crossOrigin = "Anonymous"), o.src = t[a], i.appendChild(o);
        }
        return {
          cancel: function () {}
        }
      }, t.identity = function (t) {
        return t[0] = 1, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = 1, t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[10] = 1, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, t
      }, t.invert = function (t, e) {
        var r = e[0],
          n = e[1],
          i = e[2],
          a = e[3],
          o = e[4],
          s = e[5],
          u = e[6],
          l = e[7],
          p = e[8],
          c = e[9],
          h = e[10],
          f = e[11],
          y = e[12],
          d = e[13],
          m = e[14],
          v = e[15],
          g = r * s - n * o,
          x = r * u - i * o,
          b = r * l - a * o,
          _ = n * u - i * s,
          w = n * l - a * s,
          A = i * l - a * u,
          k = p * d - c * y,
          S = p * m - h * y,
          z = p * v - f * y,
          I = c * m - h * d,
          C = c * v - f * d,
          B = h * v - f * m,
          P = g * B - x * C + b * I + _ * z - w * S + A * k;
        return P ? (P = 1 / P, t[0] = (s * B - u * C + l * I) * P, t[1] = (i * C - n * B - a * I) * P, t[2] = (d * A - m * w + v * _) * P, t[3] = (h * w - c * A - f * _) * P, t[4] = (u * z - o * B - l * S) * P, t[5] = (r * B - i * z + a * S) * P, t[6] = (m * b - y * A - v * x) * P, t[7] = (p * A - h * b + f * x) * P, t[8] = (o * C - s * z + l * k) * P, t[9] = (n * z - r * C - a * k) * P, t[10] = (y * w - d * b + v * g) * P, t[11] = (c * b - p * w - f * g) * P, t[12] = (s * S - o * I - u * k) * P, t[13] = (r * I - n * S + i * k) * P, t[14] = (d * x - y * _ - m * g) * P, t[15] = (p * _ - c * x + h * g) * P, t) : null
      }, t.isChar = On, t.isEpgisURL = N, t.keysDifference = function (t, e) {
        var r = [];
        for (var n in t) n in e || r.push(n);
        return r
      }, t.latFromMercatorY = $u, t.lngFromMercatorX = Yu, t.makeRequest = Et, t.mapObject = S, t.mercatorXfromLng = Gu, t.mercatorYfromLat = Hu, t.mercatorZfromAltitude = Ju, t.multiply = function (t, e, r) {
        var n = e[0],
          i = e[1],
          a = e[2],
          o = e[3],
          s = e[4],
          u = e[5],
          l = e[6],
          p = e[7],
          c = e[8],
          h = e[9],
          f = e[10],
          y = e[11],
          d = e[12],
          m = e[13],
          v = e[14],
          g = e[15],
          x = r[0],
          b = r[1],
          _ = r[2],
          w = r[3];
        return t[0] = x * n + b * s + _ * c + w * d, t[1] = x * i + b * u + _ * h + w * m, t[2] = x * a + b * l + _ * f + w * v, t[3] = x * o + b * p + _ * y + w * g, x = r[4], b = r[5], _ = r[6], w = r[7], t[4] = x * n + b * s + _ * c + w * d, t[5] = x * i + b * u + _ * h + w * m, t[6] = x * a + b * l + _ * f + w * v, t[7] = x * o + b * p + _ * y + w * g, x = r[8], b = r[9], _ = r[10], w = r[11], t[8] = x * n + b * s + _ * c + w * d, t[9] = x * i + b * u + _ * h + w * m, t[10] = x * a + b * l + _ * f + w * v, t[11] = x * o + b * p + _ * y + w * g, x = r[12], b = r[13], _ = r[14], w = r[15], t[12] = x * n + b * s + _ * c + w * d, t[13] = x * i + b * u + _ * h + w * m, t[14] = x * a + b * l + _ * f + w * v, t[15] = x * o + b * p + _ * y + w * g, t
      }, t.mvt = Yo, t.number = Fe, t.ortho = function (t, e, r, n, i, a, o) {
        var s = 1 / (e - r),
          u = 1 / (n - i),
          l = 1 / (a - o);
        return t[0] = -2 * s, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = -2 * u, t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[10] = 2 * l, t[11] = 0, t[12] = (e + r) * s, t[13] = (i + n) * u, t[14] = (o + a) * l, t[15] = 1, t
      }, t.parseGlyphPBF = function (t) {
        return new mu(t).readFields(Vu, [])
      }, t.pbf = mu, t.performSymbolLayout = function (t, e, r, n, i, a) {
        t.createArrays();
        var o = 512 * t.overscaling;
        t.tilePixelRatio = ga / o, t.compareText = {}, t.iconsNeedLinear = !1;
        var s = t.layers[0].layout,
          u = t.layers[0]._unevaluatedLayout._values,
          l = {};
        if ("composite" === t.textSizeData.kind) {
          var c = t.textSizeData,
            h = c.minZoom,
            f = c.maxZoom;
          l.compositeTextSizes = [u["text-size"].possiblyEvaluate(new Hn(h)), u["text-size"].possiblyEvaluate(new Hn(f))];
        }
        if ("composite" === t.iconSizeData.kind) {
          var y = t.iconSizeData,
            d = y.minZoom,
            m = y.maxZoom;
          l.compositeIconSizes = [u["icon-size"].possiblyEvaluate(new Hn(d)), u["icon-size"].possiblyEvaluate(new Hn(m))];
        }
        l.layoutTextSize = u["text-size"].possiblyEvaluate(new Hn(t.zoom + 1)), l.layoutIconSize = u["icon-size"].possiblyEvaluate(new Hn(t.zoom + 1)), l.textMaxSize = u["text-size"].possiblyEvaluate(new Hn(18));
        for (var v = s.get("text-line-height") * ks, g = "map" === s.get("text-rotation-alignment") && "point" !== s.get("symbol-placement"), x = s.get("text-keep-upright"), b = function () {
            var a = w[_],
              o = s.get("text-font").evaluate(a, {}).join(","),
              u = r,
              c = {
                horizontal: {},
                vertical: void 0
              },
              h = a.text,
              f = [0, 0];
            if (h) {
              var y = h.toString(),
                d = s.get("text-letter-spacing").evaluate(a, {}) * ks,
                m = function (t) {
                  for (var e = 0, r = t; e < r.length; e += 1) {
                    if (!Dn(r[e].charCodeAt(0))) return !1
                  }
                  return !0
                }(y) ? d : 0,
                b = s.get("text-anchor").evaluate(a, {}),
                A = s.get("text-variable-anchor"),
                k = s.get("text-radial-offset").evaluate(a, {});
              A || (f = k ? Ml(b, k * ks) : s.get("text-offset").evaluate(a, {}).map(function (t) {
                return t * ks
              }));
              var S = g ? "center" : s.get("text-justify").evaluate(a, {}),
                z = "point" === s.get("symbol-placement") ? s.get("text-max-width").evaluate(a, {}) * ks : 0,
                I = function () {
                  t.allowVerticalPlacement && Ln(y) && (c.vertical = Is(h, e, o, z, v, b, "left", m, f, Ss.vertical, !0));
                };
              if (!g && A) {
                for (var C = "auto" === S ? A.map(function (t) {
                    return Tl(t)
                  }) : [S], P = !1, E = 0; E < C.length; E++) {
                  var M = C[E];
                  if (!c.horizontal[M])
                    if (P) c.horizontal[M] = c.horizontal[0];
                    else {
                      var T = Is(h, e, o, z, v, "center", M, m, f, Ss.horizontal, !1);
                      T && (c.horizontal[M] = T, P = 1 === T.lineCount);
                    }
                }
                I();
              } else {
                "auto" === S && (S = Tl(b));
                var V = Is(h, e, o, z, v, b, S, m, f, Ss.horizontal, !1);
                V && (c.horizontal[S] = V), I(), Ln(y) && g && x && (c.vertical = Is(h, e, o, z, v, b, S, m, f, Ss.vertical, !1));
              }
            }
            var F = void 0;
            if (a.icon) {
              var O = n[a.icon];
              O && (F = function (t, e, r) {
                var n = Vs(r),
                  i = n.horizontalAlign,
                  a = n.verticalAlign,
                  o = e[0],
                  s = e[1],
                  u = o - t.displaySize[0] * i,
                  l = u + t.displaySize[0],
                  p = s - t.displaySize[1] * a;
                return {
                  image: t,
                  top: p,
                  bottom: p + t.displaySize[1],
                  left: u,
                  right: l
                }
              }(i[a.icon], s.get("icon-offset").evaluate(a, {}), s.get("icon-anchor").evaluate(a, {})), void 0 === t.sdfIcons ? t.sdfIcons = O.sdf : t.sdfIcons !== O.sdf && B("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"), O.pixelRatio !== t.pixelRatio ? t.iconsNeedLinear = !0 : 0 !== s.get("icon-rotate").constantOr(1) && (t.iconsNeedLinear = !0));
            }(Object.keys(c.horizontal).length || F) && function (t, e, r, n, i, a, o) {
              var s = a.layoutTextSize.evaluate(e, {}),
                u = a.layoutIconSize.evaluate(e, {}),
                l = a.textMaxSize.evaluate(e, {});
              void 0 === l && (l = s);
              var c = t.layers[0].layout,
                h = c.get("icon-offset").evaluate(e, {}),
                f = Ol(r.horizontal),
                y = s / 24,
                d = t.tilePixelRatio * y,
                m = t.tilePixelRatio * l / 24,
                v = t.tilePixelRatio * u,
                g = t.tilePixelRatio * c.get("symbol-spacing"),
                x = c.get("text-padding") * t.tilePixelRatio,
                b = c.get("icon-padding") * t.tilePixelRatio,
                _ = c.get("text-max-angle") / 180 * Math.PI,
                w = "map" === c.get("text-rotation-alignment") && "point" !== c.get("symbol-placement"),
                A = "map" === c.get("icon-rotation-alignment") && "point" !== c.get("symbol-placement"),
                k = c.get("symbol-placement"),
                S = g / 2,
                z = function (s, u) {
                  u.x < 0 || u.x >= ga || u.y < 0 || u.y >= ga || function (t, e, r, n, i, a, o, s, u, l, c, h, f, y, d, m, v, g, x, b, _) {
                    var w, A, k, S = t.addToLineVertexArray(e, r),
                      z = 0,
                      I = 0,
                      C = 0,
                      P = {},
                      E = Cl(""),
                      M = (a.layout.get("text-radial-offset").evaluate(x, {}) || 0) * ks;
                    if (t.allowVerticalPlacement && n.vertical) {
                      var T = a.layout.get("text-rotate").evaluate(x, {}) + 90,
                        V = n.vertical;
                      k = new bl(o, r, e, s, u, l, V, c, h, f, t.overscaling, T);
                    }
                    for (var F in n.horizontal) {
                      var O = n.horizontal[F];
                      if (!w) {
                        E = Cl(O.text);
                        var L = a.layout.get("text-rotate").evaluate(x, {});
                        w = new bl(o, r, e, s, u, l, O, c, h, f, t.overscaling, L);
                      }
                      var D = 1 === O.lineCount;
                      if (I += Fl(t, e, O, a, f, x, y, S, n.vertical ? Ss.horizontal : Ss.horizontalOnly, D ? Object.keys(n.horizontal) : [F], P, b, _), D) break
                    }
                    n.vertical && (C += Fl(t, e, n.vertical, a, f, x, y, S, Ss.vertical, ["vertical"], P, b, _));
                    var j = w ? w.boxStartIndex : t.collisionBoxArray.length,
                      U = w ? w.boxEndIndex : t.collisionBoxArray.length,
                      R = k ? k.boxStartIndex : t.collisionBoxArray.length,
                      q = k ? k.boxEndIndex : t.collisionBoxArray.length;
                    if (i) {
                      var N = function (t, e, r, n, i, a) {
                          var o, s, u, l, c = e.image,
                            h = r.layout,
                            f = e.top - 1 / c.pixelRatio,
                            y = e.left - 1 / c.pixelRatio,
                            d = e.bottom + 1 / c.pixelRatio,
                            m = e.right + 1 / c.pixelRatio;
                          if ("none" !== h.get("icon-text-fit") && i) {
                            var v = m - y,
                              g = d - f,
                              x = h.get("text-size").evaluate(a, {}) / 24,
                              b = i.left * x,
                              _ = i.right * x,
                              w = i.top * x,
                              A = _ - b,
                              k = i.bottom * x - w,
                              S = h.get("icon-text-fit-padding")[0],
                              z = h.get("icon-text-fit-padding")[1],
                              I = h.get("icon-text-fit-padding")[2],
                              C = h.get("icon-text-fit-padding")[3],
                              B = "width" === h.get("icon-text-fit") ? .5 * (k - g) : 0,
                              P = "height" === h.get("icon-text-fit") ? .5 * (A - v) : 0,
                              E = "width" === h.get("icon-text-fit") || "both" === h.get("icon-text-fit") ? A : v,
                              M = "height" === h.get("icon-text-fit") || "both" === h.get("icon-text-fit") ? k : g;
                            o = new p(b + P - C, w + B - S), s = new p(b + P + z + E, w + B - S), u = new p(b + P + z + E, w + B + I + M), l = new p(b + P - C, w + B + I + M);
                          } else o = new p(y, f), s = new p(m, f), u = new p(m, d), l = new p(y, d);
                          var T = r.layout.get("icon-rotate").evaluate(a, {}) * Math.PI / 180;
                          if (T) {
                            var V = Math.sin(T),
                              F = Math.cos(T),
                              O = [F, -V, V, F];
                            o._matMult(O), s._matMult(O), l._matMult(O), u._matMult(O);
                          }
                          return [{
                            tl: o,
                            tr: s,
                            bl: l,
                            br: u,
                            tex: c.paddedRect,
                            writingMode: void 0,
                            glyphOffset: [0, 0],
                            sectionIndex: 0
                          }]
                        }(0, i, a, 0, Ol(n.horizontal), x),
                        K = a.layout.get("icon-rotate").evaluate(x, {});
                      A = new bl(o, r, e, s, u, l, i, d, m, !1, t.overscaling, K), z = 4 * N.length;
                      var Z = t.iconSizeData,
                        X = null;
                      "source" === Z.kind ? (X = [Ls * a.layout.get("icon-size").evaluate(x, {})])[0] > Vl && B(t.layerIds[0] + ': Value for "icon-size" is >= 256. Reduce your "icon-size".') : "composite" === Z.kind && ((X = [Ls * _.compositeIconSizes[0].evaluate(x, {}), Ls * _.compositeIconSizes[1].evaluate(x, {})])[0] > Vl || X[1] > Vl) && B(t.layerIds[0] + ': Value for "icon-size" is >= 256. Reduce your "icon-size".'), t.addSymbols(t.icon, N, X, g, v, x, !1, e, S.lineStartIndex, S.lineLength);
                    }
                    var G = A ? A.boxStartIndex : t.collisionBoxArray.length,
                      H = A ? A.boxEndIndex : t.collisionBoxArray.length;
                    t.glyphOffsetArray.length >= Hs.MAX_GLYPHS && B("Too many glyphs being rendered in a tile. See https://github.com/epgis/epgis-js/issues/2907");
                    t.symbolInstances.emplaceBack(e.x, e.y, P.right >= 0 ? P.right : -1, P.center >= 0 ? P.center : -1, P.left >= 0 ? P.left : -1, P.vertical || -1, E, j, U, R, q, G, H, s, I, C, z, 0, c, M);
                  }(t, u, s, r, n, t.layers[0], t.collisionBoxArray, e.index, e.sourceLayerIndex, t.index, d, x, w, o, v, b, A, h, e, i, a);
                };
              if ("line" === k)
                for (var I = 0, C = function (t, e, r, n, i) {
                    for (var a = [], o = 0; o < t.length; o++)
                      for (var s = t[o], u = void 0, l = 0; l < s.length - 1; l++) {
                        var c = s[l],
                          h = s[l + 1];
                        c.x < e && h.x < e || (c.x < e ? c = new p(e, c.y + (h.y - c.y) * ((e - c.x) / (h.x - c.x)))._round() : h.x < e && (h = new p(e, c.y + (h.y - c.y) * ((e - c.x) / (h.x - c.x)))._round()), c.y < r && h.y < r || (c.y < r ? c = new p(c.x + (h.x - c.x) * ((r - c.y) / (h.y - c.y)), r)._round() : h.y < r && (h = new p(c.x + (h.x - c.x) * ((r - c.y) / (h.y - c.y)), r)._round()), c.x >= n && h.x >= n || (c.x >= n ? c = new p(n, c.y + (h.y - c.y) * ((n - c.x) / (h.x - c.x)))._round() : h.x >= n && (h = new p(n, c.y + (h.y - c.y) * ((n - c.x) / (h.x - c.x)))._round()), c.y >= i && h.y >= i || (c.y >= i ? c = new p(c.x + (h.x - c.x) * ((i - c.y) / (h.y - c.y)), i)._round() : h.y >= i && (h = new p(c.x + (h.x - c.x) * ((i - c.y) / (h.y - c.y)), i)._round()), u && c.equals(u[u.length - 1]) || (u = [c], a.push(u)), u.push(h)))));
                      }
                    return a
                  }(e.geometry, 0, 0, ga, ga); I < C.length; I += 1)
                  for (var P = C[I], E = xl(P, g, _, r.vertical || f, n, 24, m, t.overscaling, ga), M = 0, T = E; M < T.length; M += 1) {
                    var V = T[M],
                      F = f;
                    F && Ll(t, F.text, S, V) || z(P, V);
                  } else if ("line-center" === k)
                    for (var O = 0, L = e.geometry; O < L.length; O += 1) {
                      var D = L[O];
                      if (D.length > 1) {
                        var j = gl(D, _, r.vertical || f, n, 24, m);
                        j && z(D, j);
                      }
                    } else if ("Polygon" === e.type)
                      for (var U = 0, R = To(e.geometry, 0); U < R.length; U += 1) {
                        var q = R[U],
                          N = Al(q, 16);
                        z(q[0], new Os(N.x, N.y, 0));
                      } else if ("LineString" === e.type)
                        for (var K = 0, Z = e.geometry; K < Z.length; K += 1) {
                          var X = Z[K];
                          z(X, new Os(X[0].x, X[0].y, 0));
                        } else if ("Point" === e.type)
                          for (var G = 0, H = e.geometry; G < H.length; G += 1)
                            for (var J = H[G], Y = 0, $ = J; Y < $.length; Y += 1) {
                              var W = $[Y];
                              z([W], new Os(W.x, W.y, 0));
                            }
            }(t, a, c, F, u, l, f);
          }, _ = 0, w = t.features; _ < w.length; _ += 1) b();
        a && t.generateCollisionDebugBuffers();
      }, t.perspective = function (t, e, r, n, i) {
        var a, o = 1 / Math.tan(e / 2);
        return t[0] = o / r, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = o, t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[11] = -1, t[12] = 0, t[13] = 0, t[15] = 0, null != i && i !== 1 / 0 ? (a = 1 / (n - i), t[10] = (i + n) * a, t[14] = 2 * i * n * a) : (t[10] = -1, t[14] = -2 * n), t
      }, t.pick = function (t, e) {
        for (var r = {}, n = 0; n < e.length; n++) {
          var i = e[n];
          i in t && (r[i] = t[i]);
        }
        return r
      }, t.plugin = Gn, t.polygonIntersectsPolygon = ka, t.postMapLoadEvent = tt, t.postTurnstileEvent = W, t.potpack = au, t.rasterBoundsAttributes = al, t.refProperties = ["type", "source", "source-layer", "minzoom", "maxzoom", "filter", "layout"], t.register = En, t.registerForPluginAvailability = function (t) {
        return Kn ? t({
          pluginURL: Kn,
          completionCallback: qn
        }) : Xn.once("pluginAvailable", t), t
      }, t.rotate = function (t, e, r) {
        var n = e[0],
          i = e[1],
          a = e[2],
          o = e[3],
          s = Math.sin(r),
          u = Math.cos(r);
        return t[0] = n * u + a * s, t[1] = i * u + o * s, t[2] = n * -s + a * u, t[3] = i * -s + o * u, t
      }, t.rotateX = function (t, e, r) {
        var n = Math.sin(r),
          i = Math.cos(r),
          a = e[4],
          o = e[5],
          s = e[6],
          u = e[7],
          l = e[8],
          p = e[9],
          c = e[10],
          h = e[11];
        return e !== t && (t[0] = e[0], t[1] = e[1], t[2] = e[2], t[3] = e[3], t[12] = e[12], t[13] = e[13], t[14] = e[14], t[15] = e[15]), t[4] = a * i + l * n, t[5] = o * i + p * n, t[6] = s * i + c * n, t[7] = u * i + h * n, t[8] = l * i - a * n, t[9] = p * i - o * n, t[10] = c * i - s * n, t[11] = h * i - u * n, t
      }, t.rotateZ = function (t, e, r) {
        var n = Math.sin(r),
          i = Math.cos(r),
          a = e[0],
          o = e[1],
          s = e[2],
          u = e[3],
          l = e[4],
          p = e[5],
          c = e[6],
          h = e[7];
        return e !== t && (t[8] = e[8], t[9] = e[9], t[10] = e[10], t[11] = e[11], t[12] = e[12], t[13] = e[13], t[14] = e[14], t[15] = e[15]), t[0] = a * i + l * n, t[1] = o * i + p * n, t[2] = s * i + c * n, t[3] = u * i + h * n, t[4] = l * i - a * n, t[5] = p * i - o * n, t[6] = c * i - s * n, t[7] = h * i - u * n, t
      }, t.scale = function (t, e, r) {
        var n = r[0],
          i = r[1],
          a = r[2];
        return t[0] = e[0] * n, t[1] = e[1] * n, t[2] = e[2] * n, t[3] = e[3] * n, t[4] = e[4] * i, t[5] = e[5] * i, t[6] = e[6] * i, t[7] = e[7] * i, t[8] = e[8] * a, t[9] = e[9] * a, t[10] = e[10] * a, t[11] = e[11] * a, t[12] = e[12], t[13] = e[13], t[14] = e[14], t[15] = e[15], t
      }, t.setCacheLimits = function (t, e) {
        rt = t, nt = e;
      }, t.setRTLTextPlugin = function (t, e) {
        if (Nn) throw new Error("setRTLTextPlugin cannot be called multiple times.");
        Nn = !0, Kn = s.resolveURL(t), qn = function (t) {
          t ? (Nn = !1, Kn = null, e && e(t)) : Zn = !0;
        }, Xn.fire(new Dt("pluginAvailable", {
          pluginURL: Kn,
          completionCallback: qn
        }));
      }, t.sphericalToCartesian = function (t) {
        var e = t[0],
          r = t[1],
          n = t[2];
        return r += 90, r *= Math.PI / 180, n *= Math.PI / 180, {
          x: e * Math.cos(r) * Math.sin(n),
          y: e * Math.sin(r) * Math.sin(n),
          z: e * Math.cos(n)
        }
      }, t.styleSpec = Rt, t.symbolSize = Rs, t.transformMat3 = function (t, e, r) {
        var n = e[0],
          i = e[1],
          a = e[2];
        return t[0] = n * r[0] + i * r[3] + a * r[6], t[1] = n * r[1] + i * r[4] + a * r[7], t[2] = n * r[2] + i * r[5] + a * r[8], t
      }, t.transformMat4 = Na, t.translate = function (t, e, r) {
        var n, i, a, o, s, u, l, p, c, h, f, y, d = r[0],
          m = r[1],
          v = r[2];
        return e === t ? (t[12] = e[0] * d + e[4] * m + e[8] * v + e[12], t[13] = e[1] * d + e[5] * m + e[9] * v + e[13], t[14] = e[2] * d + e[6] * m + e[10] * v + e[14], t[15] = e[3] * d + e[7] * m + e[11] * v + e[15]) : (n = e[0], i = e[1], a = e[2], o = e[3], s = e[4], u = e[5], l = e[6], p = e[7], c = e[8], h = e[9], f = e[10], y = e[11], t[0] = n, t[1] = i, t[2] = a, t[3] = o, t[4] = s, t[5] = u, t[6] = l, t[7] = p, t[8] = c, t[9] = h, t[10] = f, t[11] = y, t[12] = n * d + s * m + c * v + e[12], t[13] = i * d + u * m + h * v + e[13], t[14] = a * d + l * m + f * v + e[14], t[15] = o * d + p * m + y * v + e[15]), t
      }, t.uniqueId = x, t.unwrapExports = function (t) {
        return t && t.__esModule && Object.prototype.hasOwnProperty.call(t, "default") ? t.default : t
      }, t.validateCustomStyleLayer = function (t) {
        var e = [],
          r = t.id;
        return void 0 === r && e.push({
          message: "layers." + r + ': missing required property "id"'
        }), void 0 === t.render && e.push({
          message: "layers." + r + ': missing required method "render"'
        }), t.renderingMode && "2d" !== t.renderingMode && "3d" !== t.renderingMode && e.push({
          message: "layers." + r + ': property "renderingMode" must be either "2d" or "3d"'
        }), e
      }, t.validateLight = wn, t.validateStyle = _n, t.values = function (t) {
        var e = [];
        for (var r in t) e.push(t[r]);
        return e
      }, t.vectorTile = Yo, t.version = "1.4.2.1", t.warnOnce = B, t.webpSupported = L, t.window = self, t.wrap = m;
    });
  
    define(["./shared"], function (e) {
      "use strict";
  
      function t(e) {
        var r = typeof e;
        if ("number" === r || "boolean" === r || "string" === r || null == e) return JSON.stringify(e);
        if (Array.isArray(e)) {
          for (var o = "[", i = 0, n = e; i < n.length; i += 1) {
            o += t(n[i]) + ",";
          }
          return o + "]"
        }
        for (var a = Object.keys(e).sort(), s = "{", u = 0; u < a.length; u++) s += JSON.stringify(a[u]) + ":" + t(e[a[u]]) + ",";
        return s + "}"
      }
  
      function r(r) {
        for (var o = "", i = 0, n = e.refProperties; i < n.length; i += 1) {
          o += "/" + t(r[n[i]]);
        }
        return o
      }
      var o = function (e) {
        this.keyCache = {}, e && this.replace(e);
      };
      o.prototype.replace = function (e) {
        this._layerConfigs = {}, this._layers = {}, this.update(e, []);
      }, o.prototype.update = function (t, o) {
        for (var i = this, n = 0, a = t; n < a.length; n += 1) {
          var s = a[n];
          this._layerConfigs[s.id] = s;
          var u = this._layers[s.id] = e.createStyleLayer(s);
          u._featureFilter = e.featureFilter(u.filter), this.keyCache[s.id] && delete this.keyCache[s.id];
        }
        for (var l = 0, h = o; l < h.length; l += 1) {
          var c = h[l];
          delete this.keyCache[c], delete this._layerConfigs[c], delete this._layers[c];
        }
        this.familiesBySource = {};
        for (var p = 0, f = function (e, t) {
            for (var o = {}, i = 0; i < e.length; i++) {
              var n = t && t[e[i].id] || r(e[i]);
              t && (t[e[i].id] = n);
              var a = o[n];
              a || (a = o[n] = []), a.push(e[i]);
            }
            var s = [];
            for (var u in o) s.push(o[u]);
            return s
          }(e.values(this._layerConfigs), this.keyCache); p < f.length; p += 1) {
          var d = f[p].map(function (e) {
              return i._layers[e.id]
            }),
            g = d[0];
          if ("none" !== g.visibility) {
            var m = g.source || "",
              y = this.familiesBySource[m];
            y || (y = this.familiesBySource[m] = {});
            var v = g.sourceLayer || "_geojsonTileLayer",
              x = y[v];
            x || (x = y[v] = []), x.push(d);
          }
        }
      };
      var i = function (t) {
        var r = {},
          o = [];
        for (var i in t) {
          var n = t[i],
            a = r[i] = {};
          for (var s in n) {
            var u = n[+s];
            if (u && 0 !== u.bitmap.width && 0 !== u.bitmap.height) {
              var l = {
                x: 0,
                y: 0,
                w: u.bitmap.width + 2,
                h: u.bitmap.height + 2
              };
              o.push(l), a[s] = {
                rect: l,
                metrics: u.metrics
              };
            }
          }
        }
        var h = e.potpack(o),
          c = h.w,
          p = h.h,
          f = new e.AlphaImage({
            width: c || 1,
            height: p || 1
          });
        for (var d in t) {
          var g = t[d];
          for (var m in g) {
            var y = g[+m];
            if (y && 0 !== y.bitmap.width && 0 !== y.bitmap.height) {
              var v = r[d][m].rect;
              e.AlphaImage.copy(y.bitmap, f, {
                x: 0,
                y: 0
              }, {
                x: v.x + 1,
                y: v.y + 1
              }, y.bitmap);
            }
          }
        }
        this.image = f, this.positions = r;
      };
      e.register("GlyphAtlas", i);
      var n = function (t) {
        this.tileID = new e.OverscaledTileID(t.tileID.overscaledZ, t.tileID.wrap, t.tileID.canonical.z, t.tileID.canonical.x, t.tileID.canonical.y), this.uid = t.uid, this.zoom = t.zoom, this.pixelRatio = t.pixelRatio, this.tileSize = t.tileSize, this.source = t.source, this.overscaling = this.tileID.overscaleFactor(), this.showCollisionBoxes = t.showCollisionBoxes, this.collectResourceTiming = !!t.collectResourceTiming, this.returnDependencies = !!t.returnDependencies;
      };
  
      function a(t, r) {
        for (var o = new e.EvaluationParameters(r), i = 0, n = t; i < n.length; i += 1) {
          n[i].recalculate(o);
        }
      }
      n.prototype.parse = function (t, r, o, n) {
        var s = this;
        this.status = "parsing", this.data = t, this.collisionBoxArray = new e.CollisionBoxArray;
        var u = new e.DictionaryCoder(Object.keys(t.layers).sort()),
          l = new e.FeatureIndex(this.tileID);
        l.bucketLayerIDs = [];
        var h, c, p, f, d = {},
          g = {
            featureIndex: l,
            iconDependencies: {},
            patternDependencies: {},
            glyphDependencies: {}
          },
          m = r.familiesBySource[this.source];
        for (var y in m) {
          var v = t.layers[y];
          if (v) {
            for (var x = u.encode(y), w = [], S = 0; S < v.length; S++) {
              var M = v.feature(S);
              w.push({
                feature: M,
                index: S,
                sourceLayerIndex: x
              });
            }
            for (var k = 0, b = m[y]; k < b.length; k += 1) {
              var _ = b[k],
                P = _[0];
              if (!(P.minzoom && this.zoom < Math.floor(P.minzoom)))
                if (!(P.maxzoom && this.zoom >= P.maxzoom))
                  if ("none" !== P.visibility) a(_, this.zoom), (d[P.id] = P.createBucket({
                    index: l.bucketLayerIDs.length,
                    layers: _,
                    zoom: this.zoom,
                    pixelRatio: this.pixelRatio,
                    overscaling: this.overscaling,
                    collisionBoxArray: this.collisionBoxArray,
                    sourceLayerIndex: x,
                    sourceID: this.source
                  })).populate(w, g), l.bucketLayerIDs.push(_.map(function (e) {
                    return e.id
                  }));
            }
          }
        }
        var I = e.mapObject(g.glyphDependencies, function (e) {
          return Object.keys(e).map(Number)
        });
        Object.keys(I).length ? o.send("getGlyphs", {
          uid: this.uid,
          stacks: I
        }, function (e, t) {
          h || (h = e, c = t, D.call(s));
        }) : c = {};
        var T = Object.keys(g.iconDependencies);
        T.length ? o.send("getImages", {
          icons: T
        }, function (e, t) {
          h || (h = e, p = t, D.call(s));
        }) : p = {};
        var L = Object.keys(g.patternDependencies);
  
        function D() {
          if (h) return n(h);
          if (c && p && f) {
            var t = new i(c),
              r = new e.ImageAtlas(p, f);
            for (var o in d) {
              var s = d[o];
              s instanceof e.SymbolBucket ? (a(s.layers, this.zoom), e.performSymbolLayout(s, c, t.positions, p, r.iconPositions, this.showCollisionBoxes)) : s.hasPattern && (s instanceof e.LineBucket || s instanceof e.FillBucket || s instanceof e.FillExtrusionBucket) && (a(s.layers, this.zoom), s.addFeatures(g, r.patternPositions));
            }
            this.status = "done", n(null, {
              buckets: e.values(d).filter(function (e) {
                return !e.isEmpty()
              }),
              featureIndex: l,
              collisionBoxArray: this.collisionBoxArray,
              glyphAtlasImage: t.image,
              imageAtlas: r,
              glyphMap: this.returnDependencies ? c : null,
              iconMap: this.returnDependencies ? p : null,
              glyphPositions: this.returnDependencies ? t.positions : null
            });
          }
        }
        L.length ? o.send("getImages", {
          icons: L
        }, function (e, t) {
          h || (h = e, f = t, D.call(s));
        }) : f = {}, D.call(this);
      };
      var s = "undefined" != typeof performance,
        u = {
          getEntriesByName: function (e) {
            return !!(s && performance && performance.getEntriesByName) && performance.getEntriesByName(e)
          },
          mark: function (e) {
            return !!(s && performance && performance.mark) && performance.mark(e)
          },
          measure: function (e, t, r) {
            return !!(s && performance && performance.measure) && performance.measure(e, t, r)
          },
          clearMarks: function (e) {
            return !!(s && performance && performance.clearMarks) && performance.clearMarks(e)
          },
          clearMeasures: function (e) {
            return !!(s && performance && performance.clearMeasures) && performance.clearMeasures(e)
          }
        },
        l = function (e) {
          this._marks = {
            start: [e.url, "start"].join("#"),
            end: [e.url, "end"].join("#"),
            measure: e.url.toString()
          }, u.mark(this._marks.start);
        };
  
      function h(t, r) {
        var o = e.getArrayBuffer(t.request, function (t, o, i, n) {
          t ? r(t) : o && r(null, {
            vectorTile: new e.vectorTile.VectorTile(new e.pbf(o)),
            rawData: o,
            cacheControl: i,
            expires: n
          });
        });
        return function () {
          o.cancel(), r();
        }
      }
      l.prototype.finish = function () {
        u.mark(this._marks.end);
        var e = u.getEntriesByName(this._marks.measure);
        return 0 === e.length && (u.measure(this._marks.measure, this._marks.start, this._marks.end), e = u.getEntriesByName(this._marks.measure), u.clearMarks(this._marks.start), u.clearMarks(this._marks.end), u.clearMeasures(this._marks.measure)), e
      }, u.Performance = l;
      var c = function (e, t, r) {
        this.actor = e, this.layerIndex = t, this.loadVectorData = r || h, this.loading = {}, this.loaded = {};
      };
      c.prototype.loadTile = function (t, r) {
        var o = this,
          i = t.uid;
        this.loading || (this.loading = {});
        var a = !!(t && t.request && t.request.collectResourceTiming) && new u.Performance(t.request),
          s = this.loading[i] = new n(t);
        s.abort = this.loadVectorData(t, function (t, n) {
          if (delete o.loading[i], t || !n) return s.status = "done", o.loaded[i] = s, r(t);
          var u = n.rawData,
            l = {};
          n.expires && (l.expires = n.expires), n.cacheControl && (l.cacheControl = n.cacheControl);
          var h = {};
          if (a) {
            var c = a.finish();
            c && (h.resourceTiming = JSON.parse(JSON.stringify(c)));
          }
          s.vectorTile = n.vectorTile, s.parse(n.vectorTile, o.layerIndex, o.actor, function (t, o) {
            if (t || !o) return r(t);
            r(null, e.extend({
              rawTileData: u.slice(0)
            }, o, l, h));
          }), o.loaded = o.loaded || {}, o.loaded[i] = s;
        });
      }, c.prototype.reloadTile = function (e, t) {
        var r = this.loaded,
          o = e.uid,
          i = this;
        if (r && r[o]) {
          var n = r[o];
          n.showCollisionBoxes = e.showCollisionBoxes;
          var a = function (e, r) {
            var o = n.reloadCallback;
            o && (delete n.reloadCallback, n.parse(n.vectorTile, i.layerIndex, i.actor, o)), t(e, r);
          };
          "parsing" === n.status ? n.reloadCallback = a : "done" === n.status && (n.vectorTile ? n.parse(n.vectorTile, this.layerIndex, this.actor, a) : a());
        }
      }, c.prototype.abortTile = function (e, t) {
        var r = this.loading,
          o = e.uid;
        r && r[o] && r[o].abort && (r[o].abort(), delete r[o]), t();
      }, c.prototype.removeTile = function (e, t) {
        var r = this.loaded,
          o = e.uid;
        r && r[o] && delete r[o], t();
      };
      var p = function () {
        this.loaded = {};
      };
      p.prototype.loadTile = function (t, r) {
        var o = t.uid,
          i = t.encoding,
          n = t.rawImageData,
          a = new e.DEMData(o, n, i);
        this.loaded = this.loaded || {}, this.loaded[o] = a, r(null, a);
      }, p.prototype.removeTile = function (e) {
        var t = this.loaded,
          r = e.uid;
        t && t[r] && delete t[r];
      };
      var f = {
        RADIUS: 6378137,
        FLATTENING: 1 / 298.257223563,
        POLAR_RADIUS: 6356752.3142
      };
  
      function d(e) {
        var t = 0;
        if (e && e.length > 0) {
          t += Math.abs(g(e[0]));
          for (var r = 1; r < e.length; r++) t -= Math.abs(g(e[r]));
        }
        return t
      }
  
      function g(e) {
        var t, r, o, i, n, a, s = 0,
          u = e.length;
        if (u > 2) {
          for (a = 0; a < u; a++) a === u - 2 ? (o = u - 2, i = u - 1, n = 0) : a === u - 1 ? (o = u - 1, i = 0, n = 1) : (o = a, i = a + 1, n = a + 2), t = e[o], r = e[i], s += (m(e[n][0]) - m(t[0])) * Math.sin(m(r[1]));
          s = s * f.RADIUS * f.RADIUS / 2;
        }
        return s
      }
  
      function m(e) {
        return e * Math.PI / 180
      }
      var y = {
          geometry: function e(t) {
            var r, o = 0;
            switch (t.type) {
              case "Polygon":
                return d(t.coordinates);
              case "MultiPolygon":
                for (r = 0; r < t.coordinates.length; r++) o += d(t.coordinates[r]);
                return o;
              case "Point":
              case "MultiPoint":
              case "LineString":
              case "MultiLineString":
                return 0;
              case "GeometryCollection":
                for (r = 0; r < t.geometries.length; r++) o += e(t.geometries[r]);
                return o
            }
          },
          ring: g
        },
        v = function e(t, r) {
          switch (t && t.type || null) {
            case "FeatureCollection":
              return t.features = t.features.map(x(e, r)), t;
            case "GeometryCollection":
              return t.geometries = t.geometries.map(x(e, r)), t;
            case "Feature":
              return t.geometry = e(t.geometry, r), t;
            case "Polygon":
            case "MultiPolygon":
              return function (e, t) {
                "Polygon" === e.type ? e.coordinates = w(e.coordinates, t) : "MultiPolygon" === e.type && (e.coordinates = e.coordinates.map(x(w, t)));
                return e
              }(t, r);
            default:
              return t
          }
        };
  
      function x(e, t) {
        return function (r) {
          return e(r, t)
        }
      }
  
      function w(e, t) {
        t = !!t, e[0] = S(e[0], t);
        for (var r = 1; r < e.length; r++) e[r] = S(e[r], !t);
        return e
      }
  
      function S(e, t) {
        return function (e) {
          return y.ring(e) >= 0
        }(e) === t ? e : e.reverse()
      }
      var M = e.vectorTile.VectorTileFeature.prototype.toGeoJSON,
        k = function (t) {
          this._feature = t, this.extent = e.EXTENT, this.type = t.type, this.properties = t.tags, "id" in t && !isNaN(t.id) && (this.id = parseInt(t.id, 10));
        };
      k.prototype.loadGeometry = function () {
        if (1 === this._feature.type) {
          for (var t = [], r = 0, o = this._feature.geometry; r < o.length; r += 1) {
            var i = o[r];
            t.push([new e.Point$1(i[0], i[1])]);
          }
          return t
        }
        for (var n = [], a = 0, s = this._feature.geometry; a < s.length; a += 1) {
          for (var u = [], l = 0, h = s[a]; l < h.length; l += 1) {
            var c = h[l];
            u.push(new e.Point$1(c[0], c[1]));
          }
          n.push(u);
        }
        return n
      }, k.prototype.toGeoJSON = function (e, t, r) {
        return M.call(this, e, t, r)
      };
      var b = function (t) {
        this.layers = {
          _geojsonTileLayer: this
        }, this.name = "_geojsonTileLayer", this.extent = e.EXTENT, this.length = t.length, this._features = t;
      };
      b.prototype.feature = function (e) {
        return new k(this._features[e])
      };
      var _ = e.vectorTile.VectorTileFeature,
        P = I;
  
      function I(e, t) {
        this.options = t || {}, this.features = e, this.length = e.length;
      }
  
      function T(e, t) {
        this.id = "number" == typeof e.id ? e.id : void 0, this.type = e.type, this.rawGeometry = 1 === e.type ? [e.geometry] : e.geometry, this.properties = e.tags, this.extent = t || 4096;
      }
      I.prototype.feature = function (e) {
        return new T(this.features[e], this.options.extent)
      }, T.prototype.loadGeometry = function () {
        var t = this.rawGeometry;
        this.geometry = [];
        for (var r = 0; r < t.length; r++) {
          for (var o = t[r], i = [], n = 0; n < o.length; n++) i.push(new e.Point$1(o[n][0], o[n][1]));
          this.geometry.push(i);
        }
        return this.geometry
      }, T.prototype.bbox = function () {
        this.geometry || this.loadGeometry();
        for (var e = this.geometry, t = 1 / 0, r = -1 / 0, o = 1 / 0, i = -1 / 0, n = 0; n < e.length; n++)
          for (var a = e[n], s = 0; s < a.length; s++) {
            var u = a[s];
            t = Math.min(t, u.x), r = Math.max(r, u.x), o = Math.min(o, u.y), i = Math.max(i, u.y);
          }
        return [t, o, r, i]
      }, T.prototype.toGeoJSON = _.prototype.toGeoJSON;
      var L = O,
        D = O,
        C = function (e, t) {
          t = t || {};
          var r = {};
          for (var o in e) r[o] = new P(e[o].features, t), r[o].name = o, r[o].version = t.version, r[o].extent = t.extent;
          return O({
            layers: r
          })
        },
        z = P;
  
      function O(t) {
        var r = new e.pbf;
        return function (e, t) {
          for (var r in e.layers) t.writeMessage(3, E, e.layers[r]);
        }(t, r), r.finish()
      }
  
      function E(e, t) {
        var r;
        t.writeVarintField(15, e.version || 1), t.writeStringField(1, e.name || ""), t.writeVarintField(5, e.extent || 4096);
        var o = {
          keys: [],
          values: [],
          keycache: {},
          valuecache: {}
        };
        for (r = 0; r < e.length; r++) o.feature = e.feature(r), t.writeMessage(2, N, o);
        var i = o.keys;
        for (r = 0; r < i.length; r++) t.writeStringField(3, i[r]);
        var n = o.values;
        for (r = 0; r < n.length; r++) t.writeMessage(4, G, n[r]);
      }
  
      function N(e, t) {
        var r = e.feature;
        void 0 !== r.id && t.writeVarintField(1, r.id), t.writeMessage(2, F, e), t.writeVarintField(3, r.type), t.writeMessage(4, J, r);
      }
  
      function F(e, t) {
        var r = e.feature,
          o = e.keys,
          i = e.values,
          n = e.keycache,
          a = e.valuecache;
        for (var s in r.properties) {
          var u = n[s];
          void 0 === u && (o.push(s), u = o.length - 1, n[s] = u), t.writeVarint(u);
          var l = r.properties[s],
            h = typeof l;
          "string" !== h && "boolean" !== h && "number" !== h && (l = JSON.stringify(l));
          var c = h + ":" + l,
            p = a[c];
          void 0 === p && (i.push(l), p = i.length - 1, a[c] = p), t.writeVarint(p);
        }
      }
  
      function A(e, t) {
        return (t << 3) + (7 & e)
      }
  
      function B(e) {
        return e << 1 ^ e >> 31
      }
  
      function J(e, t) {
        for (var r = e.loadGeometry(), o = e.type, i = 0, n = 0, a = r.length, s = 0; s < a; s++) {
          var u = r[s],
            l = 1;
          1 === o && (l = u.length), t.writeVarint(A(1, l));
          for (var h = 3 === o ? u.length - 1 : u.length, c = 0; c < h; c++) {
            1 === c && 1 !== o && t.writeVarint(A(2, h - 1));
            var p = u[c].x - i,
              f = u[c].y - n;
            t.writeVarint(B(p)), t.writeVarint(B(f)), i += p, n += f;
          }
          3 === o && t.writeVarint(A(7, 1));
        }
      }
  
      function G(e, t) {
        var r = typeof e;
        "string" === r ? t.writeStringField(1, e) : "boolean" === r ? t.writeBooleanField(7, e) : "number" === r && (e % 1 != 0 ? t.writeDoubleField(3, e) : e < 0 ? t.writeSVarintField(6, e) : t.writeVarintField(5, e));
      }
  
      function Z(e, t, r, o, i, n) {
        if (!(i - o <= r)) {
          var a = o + i >> 1;
          ! function e(t, r, o, i, n, a) {
            for (; n > i;) {
              if (n - i > 600) {
                var s = n - i + 1,
                  u = o - i + 1,
                  l = Math.log(s),
                  h = .5 * Math.exp(2 * l / 3),
                  c = .5 * Math.sqrt(l * h * (s - h) / s) * (u - s / 2 < 0 ? -1 : 1),
                  p = Math.max(i, Math.floor(o - u * h / s + c)),
                  f = Math.min(n, Math.floor(o + (s - u) * h / s + c));
                e(t, r, o, p, f, a);
              }
              var d = r[2 * o + a],
                g = i,
                m = n;
              for (j(t, r, i, o), r[2 * n + a] > d && j(t, r, i, n); g < m;) {
                for (j(t, r, g, m), g++, m--; r[2 * g + a] < d;) g++;
                for (; r[2 * m + a] > d;) m--;
              }
              r[2 * i + a] === d ? j(t, r, i, m) : j(t, r, ++m, n), m <= o && (i = m + 1), o <= m && (n = m - 1);
            }
          }(e, t, a, o, i, n % 2), Z(e, t, r, o, a - 1, n + 1), Z(e, t, r, a + 1, i, n + 1);
        }
      }
  
      function j(e, t, r, o) {
        Y(e, r, o), Y(t, 2 * r, 2 * o), Y(t, 2 * r + 1, 2 * o + 1);
      }
  
      function Y(e, t, r) {
        var o = e[t];
        e[t] = e[r], e[r] = o;
      }
  
      function X(e, t, r, o) {
        var i = e - r,
          n = t - o;
        return i * i + n * n
      }
      L.fromVectorTileJs = D, L.fromGeojsonVt = C, L.GeoJSONWrapper = z;
      var V = function (e) {
          return e[0]
        },
        W = function (e) {
          return e[1]
        },
        R = function (e, t, r, o, i) {
          void 0 === t && (t = V), void 0 === r && (r = W), void 0 === o && (o = 64), void 0 === i && (i = Float64Array), this.nodeSize = o, this.points = e;
          for (var n = e.length < 65536 ? Uint16Array : Uint32Array, a = this.ids = new n(e.length), s = this.coords = new i(2 * e.length), u = 0; u < e.length; u++) a[u] = u, s[2 * u] = t(e[u]), s[2 * u + 1] = r(e[u]);
          Z(a, s, o, 0, a.length - 1, 0);
        };
      R.prototype.range = function (e, t, r, o) {
        return function (e, t, r, o, i, n, a) {
          for (var s, u, l = [0, e.length - 1, 0], h = []; l.length;) {
            var c = l.pop(),
              p = l.pop(),
              f = l.pop();
            if (p - f <= a)
              for (var d = f; d <= p; d++) s = t[2 * d], u = t[2 * d + 1], s >= r && s <= i && u >= o && u <= n && h.push(e[d]);
            else {
              var g = Math.floor((f + p) / 2);
              s = t[2 * g], u = t[2 * g + 1], s >= r && s <= i && u >= o && u <= n && h.push(e[g]);
              var m = (c + 1) % 2;
              (0 === c ? r <= s : o <= u) && (l.push(f), l.push(g - 1), l.push(m)), (0 === c ? i >= s : n >= u) && (l.push(g + 1), l.push(p), l.push(m));
            }
          }
          return h
        }(this.ids, this.coords, e, t, r, o, this.nodeSize)
      }, R.prototype.within = function (e, t, r) {
        return function (e, t, r, o, i, n) {
          for (var a = [0, e.length - 1, 0], s = [], u = i * i; a.length;) {
            var l = a.pop(),
              h = a.pop(),
              c = a.pop();
            if (h - c <= n)
              for (var p = c; p <= h; p++) X(t[2 * p], t[2 * p + 1], r, o) <= u && s.push(e[p]);
            else {
              var f = Math.floor((c + h) / 2),
                d = t[2 * f],
                g = t[2 * f + 1];
              X(d, g, r, o) <= u && s.push(e[f]);
              var m = (l + 1) % 2;
              (0 === l ? r - i <= d : o - i <= g) && (a.push(c), a.push(f - 1), a.push(m)), (0 === l ? r + i >= d : o + i >= g) && (a.push(f + 1), a.push(h), a.push(m));
            }
          }
          return s
        }(this.ids, this.coords, e, t, r, this.nodeSize)
      };
      var q = {
          minZoom: 0,
          maxZoom: 16,
          radius: 40,
          extent: 512,
          nodeSize: 64,
          log: !1,
          reduce: null,
          map: function (e) {
            return e
          }
        },
        U = function (e) {
          this.options = re(Object.create(q), e), this.trees = new Array(this.options.maxZoom + 1);
        };
  
      function $(e, t, r, o, i) {
        return {
          x: e,
          y: t,
          zoom: 1 / 0,
          id: r,
          parentId: -1,
          numPoints: o,
          properties: i
        }
      }
  
      function H(e, t) {
        var r = e.geometry.coordinates,
          o = r[0],
          i = r[1];
        return {
          x: ee(o),
          y: te(i),
          zoom: 1 / 0,
          index: t,
          parentId: -1
        }
      }
  
      function K(e) {
        return {
          type: "Feature",
          id: e.id,
          properties: Q(e),
          geometry: {
            type: "Point",
            coordinates: [(o = e.x, 360 * (o - .5)), (t = e.y, r = (180 - 360 * t) * Math.PI / 180, 360 * Math.atan(Math.exp(r)) / Math.PI - 90)]
          }
        };
        var t, r, o;
      }
  
      function Q(e) {
        var t = e.numPoints,
          r = t >= 1e4 ? Math.round(t / 1e3) + "k" : t >= 1e3 ? Math.round(t / 100) / 10 + "k" : t;
        return re(re({}, e.properties), {
          cluster: !0,
          cluster_id: e.id,
          point_count: t,
          point_count_abbreviated: r
        })
      }
  
      function ee(e) {
        return e / 360 + .5
      }
  
      function te(e) {
        var t = Math.sin(e * Math.PI / 180),
          r = .5 - .25 * Math.log((1 + t) / (1 - t)) / Math.PI;
        return r < 0 ? 0 : r > 1 ? 1 : r
      }
  
      function re(e, t) {
        for (var r in t) e[r] = t[r];
        return e
      }
  
      function oe(e) {
        return e.x
      }
  
      function ie(e) {
        return e.y
      }
  
      function ne(e, t, r, o, i, n) {
        var a = i - r,
          s = n - o;
        if (0 !== a || 0 !== s) {
          var u = ((e - r) * a + (t - o) * s) / (a * a + s * s);
          u > 1 ? (r = i, o = n) : u > 0 && (r += a * u, o += s * u);
        }
        return (a = e - r) * a + (s = t - o) * s
      }
  
      function ae(e, t, r, o) {
        var i = {
          id: void 0 === e ? null : e,
          type: t,
          geometry: r,
          tags: o,
          minX: 1 / 0,
          minY: 1 / 0,
          maxX: -1 / 0,
          maxY: -1 / 0
        };
        return function (e) {
          var t = e.geometry,
            r = e.type;
          if ("Point" === r || "MultiPoint" === r || "LineString" === r) se(e, t);
          else if ("Polygon" === r || "MultiLineString" === r)
            for (var o = 0; o < t.length; o++) se(e, t[o]);
          else if ("MultiPolygon" === r)
            for (o = 0; o < t.length; o++)
              for (var i = 0; i < t[o].length; i++) se(e, t[o][i]);
        }(i), i
      }
  
      function se(e, t) {
        for (var r = 0; r < t.length; r += 3) e.minX = Math.min(e.minX, t[r]), e.minY = Math.min(e.minY, t[r + 1]), e.maxX = Math.max(e.maxX, t[r]), e.maxY = Math.max(e.maxY, t[r + 1]);
      }
  
      function ue(e, t, r, o) {
        if (t.geometry) {
          var i = t.geometry.coordinates,
            n = t.geometry.type,
            a = Math.pow(r.tolerance / ((1 << r.maxZoom) * r.extent), 2),
            s = [],
            u = t.id;
          if (r.promoteId ? u = t.properties[r.promoteId] : r.generateId && (u = o || 0), "Point" === n) le(i, s);
          else if ("MultiPoint" === n)
            for (var l = 0; l < i.length; l++) le(i[l], s);
          else if ("LineString" === n) he(i, s, a, !1);
          else if ("MultiLineString" === n) {
            if (r.lineMetrics) {
              for (l = 0; l < i.length; l++) s = [], he(i[l], s, a, !1), e.push(ae(u, "LineString", s, t.properties));
              return
            }
            ce(i, s, a, !1);
          } else if ("Polygon" === n) ce(i, s, a, !0);
          else {
            if ("MultiPolygon" !== n) {
              if ("GeometryCollection" === n) {
                for (l = 0; l < t.geometry.geometries.length; l++) ue(e, {
                  id: u,
                  geometry: t.geometry.geometries[l],
                  properties: t.properties
                }, r, o);
                return
              }
              throw new Error("Input data is not a valid GeoJSON object.")
            }
            for (l = 0; l < i.length; l++) {
              var h = [];
              ce(i[l], h, a, !0), s.push(h);
            }
          }
          e.push(ae(u, n, s, t.properties));
        }
      }
  
      function le(e, t) {
        t.push(pe(e[0])), t.push(fe(e[1])), t.push(0);
      }
  
      function he(e, t, r, o) {
        for (var i, n, a = 0, s = 0; s < e.length; s++) {
          var u = pe(e[s][0]),
            l = fe(e[s][1]);
          t.push(u), t.push(l), t.push(0), s > 0 && (a += o ? (i * l - u * n) / 2 : Math.sqrt(Math.pow(u - i, 2) + Math.pow(l - n, 2))), i = u, n = l;
        }
        var h = t.length - 3;
        t[2] = 1,
          function e(t, r, o, i) {
            for (var n, a = i, s = o - r >> 1, u = o - r, l = t[r], h = t[r + 1], c = t[o], p = t[o + 1], f = r + 3; f < o; f += 3) {
              var d = ne(t[f], t[f + 1], l, h, c, p);
              if (d > a) n = f, a = d;
              else if (d === a) {
                var g = Math.abs(f - s);
                g < u && (n = f, u = g);
              }
            }
            a > i && (n - r > 3 && e(t, r, n, i), t[n + 2] = a, o - n > 3 && e(t, n, o, i));
          }(t, 0, h, r), t[h + 2] = 1, t.size = Math.abs(a), t.start = 0, t.end = t.size;
      }
  
      function ce(e, t, r, o) {
        for (var i = 0; i < e.length; i++) {
          var n = [];
          he(e[i], n, r, o), t.push(n);
        }
      }
  
      function pe(e) {
        return e / 360 + .5
      }
  
      function fe(e) {
        var t = Math.sin(e * Math.PI / 180),
          r = .5 - .25 * Math.log((1 + t) / (1 - t)) / Math.PI;
        return r < 0 ? 0 : r > 1 ? 1 : r
      }
  
      function de(e, t, r, o, i, n, a, s) {
        if (o /= t, n >= (r /= t) && a < o) return e;
        if (a < r || n >= o) return null;
        for (var u = [], l = 0; l < e.length; l++) {
          var h = e[l],
            c = h.geometry,
            p = h.type,
            f = 0 === i ? h.minX : h.minY,
            d = 0 === i ? h.maxX : h.maxY;
          if (f >= r && d < o) u.push(h);
          else if (!(d < r || f >= o)) {
            var g = [];
            if ("Point" === p || "MultiPoint" === p) ge(c, g, r, o, i);
            else if ("LineString" === p) me(c, g, r, o, i, !1, s.lineMetrics);
            else if ("MultiLineString" === p) ve(c, g, r, o, i, !1);
            else if ("Polygon" === p) ve(c, g, r, o, i, !0);
            else if ("MultiPolygon" === p)
              for (var m = 0; m < c.length; m++) {
                var y = [];
                ve(c[m], y, r, o, i, !0), y.length && g.push(y);
              }
            if (g.length) {
              if (s.lineMetrics && "LineString" === p) {
                for (m = 0; m < g.length; m++) u.push(ae(h.id, p, g[m], h.tags));
                continue
              }
              "LineString" !== p && "MultiLineString" !== p || (1 === g.length ? (p = "LineString", g = g[0]) : p = "MultiLineString"), "Point" !== p && "MultiPoint" !== p || (p = 3 === g.length ? "Point" : "MultiPoint"), u.push(ae(h.id, p, g, h.tags));
            }
          }
        }
        return u.length ? u : null
      }
  
      function ge(e, t, r, o, i) {
        for (var n = 0; n < e.length; n += 3) {
          var a = e[n + i];
          a >= r && a <= o && (t.push(e[n]), t.push(e[n + 1]), t.push(e[n + 2]));
        }
      }
  
      function me(e, t, r, o, i, n, a) {
        for (var s, u, l = ye(e), h = 0 === i ? we : Se, c = e.start, p = 0; p < e.length - 3; p += 3) {
          var f = e[p],
            d = e[p + 1],
            g = e[p + 2],
            m = e[p + 3],
            y = e[p + 4],
            v = 0 === i ? f : d,
            x = 0 === i ? m : y,
            w = !1;
          a && (s = Math.sqrt(Math.pow(f - m, 2) + Math.pow(d - y, 2))), v < r ? x > r && (u = h(l, f, d, m, y, r), a && (l.start = c + s * u)) : v > o ? x < o && (u = h(l, f, d, m, y, o), a && (l.start = c + s * u)) : xe(l, f, d, g), x < r && v >= r && (u = h(l, f, d, m, y, r), w = !0), x > o && v <= o && (u = h(l, f, d, m, y, o), w = !0), !n && w && (a && (l.end = c + s * u), t.push(l), l = ye(e)), a && (c += s);
        }
        var S = e.length - 3;
        f = e[S], d = e[S + 1], g = e[S + 2], (v = 0 === i ? f : d) >= r && v <= o && xe(l, f, d, g), S = l.length - 3, n && S >= 3 && (l[S] !== l[0] || l[S + 1] !== l[1]) && xe(l, l[0], l[1], l[2]), l.length && t.push(l);
      }
  
      function ye(e) {
        var t = [];
        return t.size = e.size, t.start = e.start, t.end = e.end, t
      }
  
      function ve(e, t, r, o, i, n) {
        for (var a = 0; a < e.length; a++) me(e[a], t, r, o, i, n, !1);
      }
  
      function xe(e, t, r, o) {
        e.push(t), e.push(r), e.push(o);
      }
  
      function we(e, t, r, o, i, n) {
        var a = (n - t) / (o - t);
        return e.push(n), e.push(r + (i - r) * a), e.push(1), a
      }
  
      function Se(e, t, r, o, i, n) {
        var a = (n - r) / (i - r);
        return e.push(t + (o - t) * a), e.push(n), e.push(1), a
      }
  
      function Me(e, t) {
        for (var r = [], o = 0; o < e.length; o++) {
          var i, n = e[o],
            a = n.type;
          if ("Point" === a || "MultiPoint" === a || "LineString" === a) i = ke(n.geometry, t);
          else if ("MultiLineString" === a || "Polygon" === a) {
            i = [];
            for (var s = 0; s < n.geometry.length; s++) i.push(ke(n.geometry[s], t));
          } else if ("MultiPolygon" === a)
            for (i = [], s = 0; s < n.geometry.length; s++) {
              for (var u = [], l = 0; l < n.geometry[s].length; l++) u.push(ke(n.geometry[s][l], t));
              i.push(u);
            }
          r.push(ae(n.id, a, i, n.tags));
        }
        return r
      }
  
      function ke(e, t) {
        var r = [];
        r.size = e.size, void 0 !== e.start && (r.start = e.start, r.end = e.end);
        for (var o = 0; o < e.length; o += 3) r.push(e[o] + t, e[o + 1], e[o + 2]);
        return r
      }
  
      function be(e, t) {
        if (e.transformed) return e;
        var r, o, i, n = 1 << e.z,
          a = e.x,
          s = e.y;
        for (r = 0; r < e.features.length; r++) {
          var u = e.features[r],
            l = u.geometry,
            h = u.type;
          if (u.geometry = [], 1 === h)
            for (o = 0; o < l.length; o += 2) u.geometry.push(_e(l[o], l[o + 1], t, n, a, s));
          else
            for (o = 0; o < l.length; o++) {
              var c = [];
              for (i = 0; i < l[o].length; i += 2) c.push(_e(l[o][i], l[o][i + 1], t, n, a, s));
              u.geometry.push(c);
            }
        }
        return e.transformed = !0, e
      }
  
      function _e(e, t, r, o, i, n) {
        return [Math.round(r * (e * o - i)), Math.round(r * (t * o - n))]
      }
  
      function Pe(e, t, r, o, i) {
        for (var n = t === i.maxZoom ? 0 : i.tolerance / ((1 << t) * i.extent), a = {
            features: [],
            numPoints: 0,
            numSimplified: 0,
            numFeatures: 0,
            source: null,
            x: r,
            y: o,
            z: t,
            transformed: !1,
            minX: 2,
            minY: 1,
            maxX: -1,
            maxY: 0
          }, s = 0; s < e.length; s++) {
          a.numFeatures++, Ie(a, e[s], n, i);
          var u = e[s].minX,
            l = e[s].minY,
            h = e[s].maxX,
            c = e[s].maxY;
          u < a.minX && (a.minX = u), l < a.minY && (a.minY = l), h > a.maxX && (a.maxX = h), c > a.maxY && (a.maxY = c);
        }
        return a
      }
  
      function Ie(e, t, r, o) {
        var i = t.geometry,
          n = t.type,
          a = [];
        if ("Point" === n || "MultiPoint" === n)
          for (var s = 0; s < i.length; s += 3) a.push(i[s]), a.push(i[s + 1]), e.numPoints++, e.numSimplified++;
        else if ("LineString" === n) Te(a, i, e, r, !1, !1);
        else if ("MultiLineString" === n || "Polygon" === n)
          for (s = 0; s < i.length; s++) Te(a, i[s], e, r, "Polygon" === n, 0 === s);
        else if ("MultiPolygon" === n)
          for (var u = 0; u < i.length; u++) {
            var l = i[u];
            for (s = 0; s < l.length; s++) Te(a, l[s], e, r, !0, 0 === s);
          }
        if (a.length) {
          var h = t.tags || null;
          if ("LineString" === n && o.lineMetrics) {
            for (var c in h = {}, t.tags) h[c] = t.tags[c];
            h.epgis_clip_start = i.start / i.size, h.epgis_clip_end = i.end / i.size;
          }
          var p = {
            geometry: a,
            type: "Polygon" === n || "MultiPolygon" === n ? 3 : "LineString" === n || "MultiLineString" === n ? 2 : 1,
            tags: h
          };
          null !== t.id && (p.id = t.id), e.features.push(p);
        }
      }
  
      function Te(e, t, r, o, i, n) {
        var a = o * o;
        if (o > 0 && t.size < (i ? a : o)) r.numPoints += t.length / 3;
        else {
          for (var s = [], u = 0; u < t.length; u += 3)(0 === o || t[u + 2] > a) && (r.numSimplified++, s.push(t[u]), s.push(t[u + 1])), r.numPoints++;
          i && function (e, t) {
            for (var r = 0, o = 0, i = e.length, n = i - 2; o < i; n = o, o += 2) r += (e[o] - e[n]) * (e[o + 1] + e[n + 1]);
            if (r > 0 === t)
              for (o = 0, i = e.length; o < i / 2; o += 2) {
                var a = e[o],
                  s = e[o + 1];
                e[o] = e[i - 2 - o], e[o + 1] = e[i - 1 - o], e[i - 2 - o] = a, e[i - 1 - o] = s;
              }
          }(s, n), e.push(s);
        }
      }
  
      function Le(e, t) {
        var r = (t = this.options = function (e, t) {
          for (var r in t) e[r] = t[r];
          return e
        }(Object.create(this.options), t)).debug;
        if (r && console.time("preprocess data"), t.maxZoom < 0 || t.maxZoom > 24) throw new Error("maxZoom should be in the 0-24 range");
        if (t.promoteId && t.generateId) throw new Error("promoteId and generateId cannot be used together.");
        var o = function (e, t) {
          var r = [];
          if ("FeatureCollection" === e.type)
            for (var o = 0; o < e.features.length; o++) ue(r, e.features[o], t, o);
          else "Feature" === e.type ? ue(r, e, t) : ue(r, {
            geometry: e
          }, t);
          return r
        }(e, t);
        this.tiles = {}, this.tileCoords = [], r && (console.timeEnd("preprocess data"), console.log("index: maxZoom: %d, maxPoints: %d", t.indexMaxZoom, t.indexMaxPoints), console.time("generate tiles"), this.stats = {}, this.total = 0), (o = function (e, t) {
          var r = t.buffer / t.extent,
            o = e,
            i = de(e, 1, -1 - r, r, 0, -1, 2, t),
            n = de(e, 1, 1 - r, 2 + r, 0, -1, 2, t);
          return (i || n) && (o = de(e, 1, -r, 1 + r, 0, -1, 2, t) || [], i && (o = Me(i, 1).concat(o)), n && (o = o.concat(Me(n, -1)))), o
        }(o, t)).length && this.splitTile(o, 0, 0, 0), r && (o.length && console.log("features: %d, points: %d", this.tiles[0].numFeatures, this.tiles[0].numPoints), console.timeEnd("generate tiles"), console.log("tiles generated:", this.total, JSON.stringify(this.stats)));
      }
  
      function De(e, t, r) {
        return 32 * ((1 << e) * r + t) + e
      }
  
      function Ce(e, t) {
        var r = e.tileID.canonical;
        if (!this._geoJSONIndex) return t(null, null);
        var o = this._geoJSONIndex.getTile(r.z, r.x, r.y);
        if (!o) return t(null, null);
        var i = new b(o.features),
          n = L(i);
        0 === n.byteOffset && n.byteLength === n.buffer.byteLength || (n = new Uint8Array(n)), t(null, {
          vectorTile: i,
          rawData: n.buffer
        });
      }
      U.prototype.load = function (e) {
        var t = this.options,
          r = t.log,
          o = t.minZoom,
          i = t.maxZoom,
          n = t.nodeSize;
        r && console.time("total time");
        var a = "prepare " + e.length + " points";
        r && console.time(a), this.points = e;
        for (var s = [], u = 0; u < e.length; u++) e[u].geometry && s.push(H(e[u], u));
        this.trees[i + 1] = new R(s, oe, ie, n, Float32Array), r && console.timeEnd(a);
        for (var l = i; l >= o; l--) {
          var h = +Date.now();
          s = this._cluster(s, l), this.trees[l] = new R(s, oe, ie, n, Float32Array), r && console.log("z%d: %d clusters in %dms", l, s.length, +Date.now() - h);
        }
        return r && console.timeEnd("total time"), this
      }, U.prototype.getClusters = function (e, t) {
        var r = ((e[0] + 180) % 360 + 360) % 360 - 180,
          o = Math.max(-90, Math.min(90, e[1])),
          i = 180 === e[2] ? 180 : ((e[2] + 180) % 360 + 360) % 360 - 180,
          n = Math.max(-90, Math.min(90, e[3]));
        if (e[2] - e[0] >= 360) r = -180, i = 180;
        else if (r > i) {
          var a = this.getClusters([r, o, 180, n], t),
            s = this.getClusters([-180, o, i, n], t);
          return a.concat(s)
        }
        for (var u = this.trees[this._limitZoom(t)], l = [], h = 0, c = u.range(ee(r), te(n), ee(i), te(o)); h < c.length; h += 1) {
          var p = c[h],
            f = u.points[p];
          l.push(f.numPoints ? K(f) : this.points[f.index]);
        }
        return l
      }, U.prototype.getChildren = function (e) {
        var t = e >> 5,
          r = e % 32,
          o = "No cluster with the specified id.",
          i = this.trees[r];
        if (!i) throw new Error(o);
        var n = i.points[t];
        if (!n) throw new Error(o);
        for (var a = this.options.radius / (this.options.extent * Math.pow(2, r - 1)), s = [], u = 0, l = i.within(n.x, n.y, a); u < l.length; u += 1) {
          var h = l[u],
            c = i.points[h];
          c.parentId === e && s.push(c.numPoints ? K(c) : this.points[c.index]);
        }
        if (0 === s.length) throw new Error(o);
        return s
      }, U.prototype.getLeaves = function (e, t, r) {
        t = t || 10, r = r || 0;
        var o = [];
        return this._appendLeaves(o, e, t, r, 0), o
      }, U.prototype.getTile = function (e, t, r) {
        var o = this.trees[this._limitZoom(e)],
          i = Math.pow(2, e),
          n = this.options,
          a = n.extent,
          s = n.radius / a,
          u = (r - s) / i,
          l = (r + 1 + s) / i,
          h = {
            features: []
          };
        return this._addTileFeatures(o.range((t - s) / i, u, (t + 1 + s) / i, l), o.points, t, r, i, h), 0 === t && this._addTileFeatures(o.range(1 - s / i, u, 1, l), o.points, i, r, i, h), t === i - 1 && this._addTileFeatures(o.range(0, u, s / i, l), o.points, -1, r, i, h), h.features.length ? h : null
      }, U.prototype.getClusterExpansionZoom = function (e) {
        for (var t = e % 32 - 1; t <= this.options.maxZoom;) {
          var r = this.getChildren(e);
          if (t++, 1 !== r.length) break;
          e = r[0].properties.cluster_id;
        }
        return t
      }, U.prototype._appendLeaves = function (e, t, r, o, i) {
        for (var n = 0, a = this.getChildren(t); n < a.length; n += 1) {
          var s = a[n],
            u = s.properties;
          if (u && u.cluster ? i + u.point_count <= o ? i += u.point_count : i = this._appendLeaves(e, u.cluster_id, r, o, i) : i < o ? i++ : e.push(s), e.length === r) break
        }
        return i
      }, U.prototype._addTileFeatures = function (e, t, r, o, i, n) {
        for (var a = 0, s = e; a < s.length; a += 1) {
          var u = t[s[a]],
            l = {
              type: 1,
              geometry: [
                [Math.round(this.options.extent * (u.x * i - r)), Math.round(this.options.extent * (u.y * i - o))]
              ],
              tags: u.numPoints ? Q(u) : this.points[u.index].properties
            },
            h = u.numPoints ? u.id : this.points[u.index].id;
          void 0 !== h && (l.id = h), n.features.push(l);
        }
      }, U.prototype._limitZoom = function (e) {
        return Math.max(this.options.minZoom, Math.min(e, this.options.maxZoom + 1))
      }, U.prototype._cluster = function (e, t) {
        for (var r = [], o = this.options, i = o.radius, n = o.extent, a = o.reduce, s = i / (n * Math.pow(2, t)), u = 0; u < e.length; u++) {
          var l = e[u];
          if (!(l.zoom <= t)) {
            l.zoom = t;
            for (var h = this.trees[t + 1], c = h.within(l.x, l.y, s), p = l.numPoints || 1, f = l.x * p, d = l.y * p, g = a && p > 1 ? this._map(l, !0) : null, m = (u << 5) + (t + 1), y = 0, v = c; y < v.length; y += 1) {
              var x = v[y],
                w = h.points[x];
              if (!(w.zoom <= t)) {
                w.zoom = t;
                var S = w.numPoints || 1;
                f += w.x * S, d += w.y * S, p += S, w.parentId = m, a && (g || (g = this._map(l, !0)), a(g, this._map(w)));
              }
            }
            1 === p ? r.push(l) : (l.parentId = m, r.push($(f / p, d / p, m, p, g)));
          }
        }
        return r
      }, U.prototype._map = function (e, t) {
        if (e.numPoints) return t ? re({}, e.properties) : e.properties;
        var r = this.points[e.index].properties,
          o = this.options.map(r);
        return t && o === r ? re({}, o) : o
      }, Le.prototype.options = {
        maxZoom: 14,
        indexMaxZoom: 5,
        indexMaxPoints: 1e5,
        tolerance: 3,
        extent: 4096,
        buffer: 64,
        lineMetrics: !1,
        promoteId: null,
        generateId: !1,
        debug: 0
      }, Le.prototype.splitTile = function (e, t, r, o, i, n, a) {
        for (var s = [e, t, r, o], u = this.options, l = u.debug; s.length;) {
          o = s.pop(), r = s.pop(), t = s.pop(), e = s.pop();
          var h = 1 << t,
            c = De(t, r, o),
            p = this.tiles[c];
          if (!p && (l > 1 && console.time("creation"), p = this.tiles[c] = Pe(e, t, r, o, u), this.tileCoords.push({
              z: t,
              x: r,
              y: o
            }), l)) {
            l > 1 && (console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)", t, r, o, p.numFeatures, p.numPoints, p.numSimplified), console.timeEnd("creation"));
            var f = "z" + t;
            this.stats[f] = (this.stats[f] || 0) + 1, this.total++;
          }
          if (p.source = e, i) {
            if (t === u.maxZoom || t === i) continue;
            var d = 1 << i - t;
            if (r !== Math.floor(n / d) || o !== Math.floor(a / d)) continue
          } else if (t === u.indexMaxZoom || p.numPoints <= u.indexMaxPoints) continue;
          if (p.source = null, 0 !== e.length) {
            l > 1 && console.time("clipping");
            var g, m, y, v, x, w, S = .5 * u.buffer / u.extent,
              M = .5 - S,
              k = .5 + S,
              b = 1 + S;
            g = m = y = v = null, x = de(e, h, r - S, r + k, 0, p.minX, p.maxX, u), w = de(e, h, r + M, r + b, 0, p.minX, p.maxX, u), e = null, x && (g = de(x, h, o - S, o + k, 1, p.minY, p.maxY, u), m = de(x, h, o + M, o + b, 1, p.minY, p.maxY, u), x = null), w && (y = de(w, h, o - S, o + k, 1, p.minY, p.maxY, u), v = de(w, h, o + M, o + b, 1, p.minY, p.maxY, u), w = null), l > 1 && console.timeEnd("clipping"), s.push(g || [], t + 1, 2 * r, 2 * o), s.push(m || [], t + 1, 2 * r, 2 * o + 1), s.push(y || [], t + 1, 2 * r + 1, 2 * o), s.push(v || [], t + 1, 2 * r + 1, 2 * o + 1);
          }
        }
      }, Le.prototype.getTile = function (e, t, r) {
        var o = this.options,
          i = o.extent,
          n = o.debug;
        if (e < 0 || e > 24) return null;
        var a = 1 << e,
          s = De(e, t = (t % a + a) % a, r);
        if (this.tiles[s]) return be(this.tiles[s], i);
        n > 1 && console.log("drilling down to z%d-%d-%d", e, t, r);
        for (var u, l = e, h = t, c = r; !u && l > 0;) l--, h = Math.floor(h / 2), c = Math.floor(c / 2), u = this.tiles[De(l, h, c)];
        return u && u.source ? (n > 1 && console.log("found parent tile z%d-%d-%d", l, h, c), n > 1 && console.time("drilling down"), this.splitTile(u.source, l, h, c, e, t, r), n > 1 && console.timeEnd("drilling down"), this.tiles[s] ? be(this.tiles[s], i) : null) : null
      };
      var ze = function (t) {
        function r(e, r, o) {
          t.call(this, e, r, Ce), o && (this.loadGeoJSON = o);
        }
        return t && (r.__proto__ = t), r.prototype = Object.create(t && t.prototype), r.prototype.constructor = r, r.prototype.loadData = function (e, t) {
          this._pendingCallback && this._pendingCallback(null, {
            abandoned: !0
          }), this._pendingCallback = t, this._pendingLoadDataParams = e, this._state && "Idle" !== this._state ? this._state = "NeedsLoadData" : (this._state = "Coalescing", this._loadData());
        }, r.prototype._loadData = function () {
          var t = this;
          if (this._pendingCallback && this._pendingLoadDataParams) {
            var r = this._pendingCallback,
              o = this._pendingLoadDataParams;
            delete this._pendingCallback, delete this._pendingLoadDataParams;
            var i = !!(o && o.request && o.request.collectResourceTiming) && new u.Performance(o.request);
            this.loadGeoJSON(o, function (n, a) {
              if (n || !a) return r(n);
              if ("object" != typeof a) return r(new Error("Input data given to '" + o.source + "' is not a valid GeoJSON object."));
              if (a.features && 0 != a.features.length && 0 != a.features[0].geometry.coordinates.length && ("string" == typeof a.features[0].geometry.coordinates || "string" == typeof a.features[0].geometry.coordinates[0] || "string" == typeof a.features[0].geometry.coordinates[0][0]))
                for (var s = 0, u = a.features; s < u.length; s += 1) {
                  var l = u[s];
                  if ("string" == typeof l.geometry.coordinates) l.geometry.coordinates = e.decode(l.geometry.coordinates);
                  else if ("string" == typeof l.geometry.coordinates[0]) {
                    for (var h = l.geometry.coordinates, c = [], p = 0; p < h.length; p++) c[p] = e.decode(h[p]);
                    l.geometry.coordinates = c;
                  } else {
                    for (var f = l.geometry.coordinates, d = [], g = 0; g < f.length; g++) d[g] = [e.decode(f[g][0])];
                    l.geometry.coordinates = d;
                  }
                }
              v(a, !0);
              try {
                t._geoJSONIndex = o.cluster ? new U(function (t) {
                  var r = t.superclusterOptions,
                    o = t.clusterProperties;
                  if (!o || !r) return r;
                  for (var i = {}, n = {}, a = {
                      accumulated: null,
                      zoom: 0
                    }, s = {
                      properties: null
                    }, u = Object.keys(o), l = 0, h = u; l < h.length; l += 1) {
                    var c = h[l],
                      p = o[c],
                      f = p[0],
                      d = p[1],
                      g = e.createExpression(d),
                      m = e.createExpression("string" == typeof f ? [f, ["accumulated"],
                        ["get", c]
                      ] : f);
                    i[c] = g.value, n[c] = m.value;
                  }
                  return r.map = function (e) {
                    s.properties = e;
                    for (var t = {}, r = 0, o = u; r < o.length; r += 1) {
                      var n = o[r];
                      t[n] = i[n].evaluate(a, s);
                    }
                    return t
                  }, r.reduce = function (e, t) {
                    s.properties = t;
                    for (var r = 0, o = u; r < o.length; r += 1) {
                      var i = o[r];
                      a.accumulated = e[i], e[i] = n[i].evaluate(a, s);
                    }
                  }, r
                }(o)).load(a.features) : function (e, t) {
                  return new Le(e, t)
                }(a, o.geojsonVtOptions);
              } catch (n) {
                return r(n)
              }
              t.loaded = {};
              var m = {};
              if (i) {
                var y = i.finish();
                y && (m.resourceTiming = {}, m.resourceTiming[o.source] = JSON.parse(JSON.stringify(y)));
              }
              r(null, m);
            });
          }
        }, r.prototype.coalesce = function () {
          "Coalescing" === this._state ? this._state = "Idle" : "NeedsLoadData" === this._state && (this._state = "Coalescing", this._loadData());
        }, r.prototype.reloadTile = function (e, r) {
          var o = this.loaded,
            i = e.uid;
          return o && o[i] ? t.prototype.reloadTile.call(this, e, r) : this.loadTile(e, r)
        }, r.prototype.loadGeoJSON = function (t, r) {
          if (t.request) e.getJSON(t.request, r);
          else {
            if ("string" != typeof t.data) return r(new Error("Input data given to '" + t.source + "' is not a valid GeoJSON object."));
            try {
              return r(null, JSON.parse(t.data))
            } catch (e) {
              return r(new Error("Input data given to '" + t.source + "' is not a valid GeoJSON object."))
            }
          }
        }, r.prototype.removeSource = function (e, t) {
          this._pendingCallback && this._pendingCallback(null, {
            abandoned: !0
          }), t();
        }, r.prototype.getClusterExpansionZoom = function (e, t) {
          t(null, this._geoJSONIndex.getClusterExpansionZoom(e.clusterId));
        }, r.prototype.getClusterChildren = function (e, t) {
          t(null, this._geoJSONIndex.getChildren(e.clusterId));
        }, r.prototype.getClusterLeaves = function (e, t) {
          t(null, this._geoJSONIndex.getLeaves(e.clusterId, e.limit, e.offset));
        }, r
      }(c);
      var Oe = function (t) {
        var r = this;
        this.self = t, this.actor = new e.Actor(t, this), this.layerIndexes = {}, this.workerSourceTypes = {
          vector: c,
          geojson: ze
        }, this.workerSources = {}, this.demWorkerSources = {}, this.self.registerWorkerSource = function (e, t) {
          if (r.workerSourceTypes[e]) throw new Error('Worker source with name "' + e + '" already registered.');
          r.workerSourceTypes[e] = t;
        }, this.self.registerRTLTextPlugin = function (t) {
          if (e.plugin.isLoaded()) throw new Error("RTL text plugin already registered.");
          e.plugin.applyArabicShaping = t.applyArabicShaping, e.plugin.processBidirectionalText = t.processBidirectionalText, e.plugin.processStyledBidirectionalText = t.processStyledBidirectionalText;
        };
      };
      return Oe.prototype.setReferrer = function (e, t) {
        this.referrer = t;
      }, Oe.prototype.setLayers = function (e, t, r) {
        this.getLayerIndex(e).replace(t), r();
      }, Oe.prototype.updateLayers = function (e, t, r) {
        this.getLayerIndex(e).update(t.layers, t.removedIds), r();
      }, Oe.prototype.loadTile = function (e, t, r) {
        this.getWorkerSource(e, t.type, t.source).loadTile(t, r);
      }, Oe.prototype.loadDEMTile = function (e, t, r) {
        this.getDEMWorkerSource(e, t.source).loadTile(t, r);
      }, Oe.prototype.reloadTile = function (e, t, r) {
        this.getWorkerSource(e, t.type, t.source).reloadTile(t, r);
      }, Oe.prototype.abortTile = function (e, t, r) {
        this.getWorkerSource(e, t.type, t.source).abortTile(t, r);
      }, Oe.prototype.removeTile = function (e, t, r) {
        this.getWorkerSource(e, t.type, t.source).removeTile(t, r);
      }, Oe.prototype.removeDEMTile = function (e, t) {
        this.getDEMWorkerSource(e, t.source).removeTile(t);
      }, Oe.prototype.removeSource = function (e, t, r) {
        if (this.workerSources[e] && this.workerSources[e][t.type] && this.workerSources[e][t.type][t.source]) {
          var o = this.workerSources[e][t.type][t.source];
          delete this.workerSources[e][t.type][t.source], void 0 !== o.removeSource ? o.removeSource(t, r) : r();
        }
      }, Oe.prototype.loadWorkerSource = function (e, t, r) {
        try {
          this.self.importScripts(t.url), r();
        } catch (e) {
          r(e.toString());
        }
      }, Oe.prototype.loadRTLTextPlugin = function (t, r, o) {
        try {
          e.plugin.isLoaded() || (this.self.importScripts(r), o(e.plugin.isLoaded() ? null : new Error("RTL Text Plugin failed to import scripts from " + r)));
        } catch (e) {
          o(e.toString());
        }
      }, Oe.prototype.getLayerIndex = function (e) {
        var t = this.layerIndexes[e];
        return t || (t = this.layerIndexes[e] = new o), t
      }, Oe.prototype.getWorkerSource = function (e, t, r) {
        var o = this;
        if (this.workerSources[e] || (this.workerSources[e] = {}), this.workerSources[e][t] || (this.workerSources[e][t] = {}), !this.workerSources[e][t][r]) {
          var i = {
            send: function (t, r, i) {
              o.actor.send(t, r, i, e);
            }
          };
          this.workerSources[e][t][r] = new this.workerSourceTypes[t](i, this.getLayerIndex(e));
        }
        return this.workerSources[e][t][r]
      }, Oe.prototype.getDEMWorkerSource = function (e, t) {
        return this.demWorkerSources[e] || (this.demWorkerSources[e] = {}), this.demWorkerSources[e][t] || (this.demWorkerSources[e][t] = new p), this.demWorkerSources[e][t]
      }, Oe.prototype.enforceCacheSizeLimit = function (t, r) {
        e.enforceCacheSizeLimit(r);
      }, "undefined" != typeof WorkerGlobalScope && void 0 !== e.window && e.window instanceof WorkerGlobalScope && (e.window.worker = new Oe(e.window)), Oe
    });
  
    define(["./shared"], function (t) {
      "use strict";
      var e = t.createCommonjsModule(function (t) {
          function e(t) {
            return !!("undefined" != typeof window && "undefined" != typeof document && Array.prototype && Array.prototype.every && Array.prototype.filter && Array.prototype.forEach && Array.prototype.indexOf && Array.prototype.lastIndexOf && Array.prototype.map && Array.prototype.some && Array.prototype.reduce && Array.prototype.reduceRight && Array.isArray && Function.prototype && Function.prototype.bind && Object.keys && Object.create && Object.getPrototypeOf && Object.getOwnPropertyNames && Object.isSealed && Object.isFrozen && Object.isExtensible && Object.getOwnPropertyDescriptor && Object.defineProperty && Object.defineProperties && Object.seal && Object.freeze && Object.preventExtensions && "JSON" in window && "parse" in JSON && "stringify" in JSON && function () {
              if (!("Worker" in window && "Blob" in window && "URL" in window)) return !1;
              var t, e, r = new Blob([""], {
                  type: "text/javascript"
                }),
                i = URL.createObjectURL(r);
              try {
                e = new Worker(i), t = !0;
              } catch (e) {
                t = !1;
              }
              e && e.terminate();
              return URL.revokeObjectURL(i), t
            }() && "Uint8ClampedArray" in window && ArrayBuffer.isView && function (t) {
              void 0 === r[t] && (r[t] = function (t) {
                var r = document.createElement("canvas"),
                  i = Object.create(e.webGLContextAttributes);
                return i.failIfMajorPerformanceCaveat = t, r.probablySupportsContext ? r.probablySupportsContext("webgl", i) || r.probablySupportsContext("experimental-webgl", i) : r.supportsContext ? r.supportsContext("webgl", i) || r.supportsContext("experimental-webgl", i) : r.getContext("webgl", i) || r.getContext("experimental-webgl", i)
              }(t));
              return r[t]
            }(t && t.failIfMajorPerformanceCaveat))
          }
          t.exports ? t.exports = e : window && (window.epgis = window.epgis || {}, window.epgis.supported = e);
          var r = {};
          e.webGLContextAttributes = {
            antialias: !1,
            alpha: !0,
            stencil: !0,
            depth: !0
          };
        }),
        r = {
          create: function (e, r, i) {
            var n = t.window.document.createElement(e);
            return void 0 !== r && (n.className = r), i && i.appendChild(n), n
          },
          createNS: function (e, r) {
            return t.window.document.createElementNS(e, r)
          }
        },
        i = t.window.document.documentElement.style;
  
      function n(t) {
        if (!i) return t[0];
        for (var e = 0; e < t.length; e++)
          if (t[e] in i) return t[e];
        return t[0]
      }
      var o, s = n(["userSelect", "MozUserSelect", "WebkitUserSelect", "msUserSelect"]);
      r.disableDrag = function () {
        i && s && (o = i[s], i[s] = "none");
      }, r.enableDrag = function () {
        i && s && (i[s] = o);
      };
      var a = n(["transform", "WebkitTransform"]);
      r.setTransform = function (t, e) {
        t.style[a] = e;
      };
      var u = !1;
      try {
        var c = Object.defineProperty({}, "passive", {
          get: function () {
            u = !0;
          }
        });
        t.window.addEventListener("test", c, c), t.window.removeEventListener("test", c, c);
      } catch (t) {
        u = !1;
      }
      r.addEventListener = function (t, e, r, i) {
        void 0 === i && (i = {}), "passive" in i && u ? t.addEventListener(e, r, i) : t.addEventListener(e, r, i.capture);
      }, r.removeEventListener = function (t, e, r, i) {
        void 0 === i && (i = {}), "passive" in i && u ? t.removeEventListener(e, r, i) : t.removeEventListener(e, r, i.capture);
      };
      var h = function (e) {
        e.preventDefault(), e.stopPropagation(), t.window.removeEventListener("click", h, !0);
      };
  
      function l(t) {
        var e = t.userImage;
        if (e && e.render && e.render()) return t.data.replace(new Uint8Array(e.data.buffer)), !0;
        return !1
      }
      r.suppressClick = function () {
        t.window.addEventListener("click", h, !0), t.window.setTimeout(function () {
          t.window.removeEventListener("click", h, !0);
        }, 0);
      }, r.mousePos = function (e, r) {
        var i = e.getBoundingClientRect(),
          n = t.window.TouchEvent && r instanceof t.window.TouchEvent ? r.touches[0] : r;
        return new t.Point(n.clientX - i.left - e.clientLeft, n.clientY - i.top - e.clientTop)
      }, r.touchPos = function (e, r) {
        for (var i = e.getBoundingClientRect(), n = [], o = "touchend" === r.type ? r.changedTouches : r.touches, s = 0; s < o.length; s++) n.push(new t.Point(o[s].clientX - i.left - e.clientLeft, o[s].clientY - i.top - e.clientTop));
        return n
      }, r.mouseButton = function (e) {
        return void 0 !== t.window.InstallTrigger && 2 === e.button && e.ctrlKey && t.window.navigator.platform.toUpperCase().indexOf("MAC") >= 0 ? 0 : e.button
      }, r.remove = function (t) {
        t.parentNode && t.parentNode.removeChild(t);
      };
      var p = function (e) {
        function r() {
          e.call(this), this.images = {}, this.updatedImages = {}, this.callbackDispatchedThisFrame = {}, this.loaded = !1, this.requestors = [], this.patterns = {}, this.atlasImage = new t.RGBAImage({
            width: 1,
            height: 1
          }), this.dirty = !0;
        }
        return e && (r.__proto__ = e), r.prototype = Object.create(e && e.prototype), r.prototype.constructor = r, r.prototype.isLoaded = function () {
          return this.loaded
        }, r.prototype.setLoaded = function (t) {
          if (this.loaded !== t && (this.loaded = t, t)) {
            for (var e = 0, r = this.requestors; e < r.length; e += 1) {
              var i = r[e],
                n = i.ids,
                o = i.callback;
              this._notify(n, o);
            }
            this.requestors = [];
          }
        }, r.prototype.getImage = function (t) {
          return this.images[t]
        }, r.prototype.addImage = function (t, e) {
          this.images[t] = e;
        }, r.prototype.updateImage = function (t, e) {
          var r = this.images[t];
          e.version = r.version + 1, this.images[t] = e, this.updatedImages[t] = !0;
        }, r.prototype.removeImage = function (t) {
          var e = this.images[t];
          delete this.images[t], delete this.patterns[t], e.userImage && e.userImage.onRemove && e.userImage.onRemove();
        }, r.prototype.listImages = function () {
          return Object.keys(this.images)
        }, r.prototype.getImages = function (t, e) {
          var r = !0;
          if (!this.isLoaded())
            for (var i = 0, n = t; i < n.length; i += 1) {
              var o = n[i];
              this.images[o] || (r = !1);
            }
          this.isLoaded() || r ? this._notify(t, e) : this.requestors.push({
            ids: t,
            callback: e
          });
        }, r.prototype._notify = function (e, r) {
          for (var i = {}, n = 0, o = e; n < o.length; n += 1) {
            var s = o[n];
            this.images[s] || this.fire(new t.Event("styleimagemissing", {
              id: s
            }));
            var a = this.images[s];
            a ? i[s] = {
              data: a.data.clone(),
              pixelRatio: a.pixelRatio,
              sdf: a.sdf,
              version: a.version,
              hasRenderCallback: Boolean(a.userImage && a.userImage.render)
            } : t.warnOnce('Image "' + s + '" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.');
          }
          r(null, i);
        }, r.prototype.getPixelSize = function () {
          var t = this.atlasImage;
          return {
            width: t.width,
            height: t.height
          }
        }, r.prototype.getPattern = function (e) {
          var r = this.patterns[e],
            i = this.getImage(e);
          if (!i) return null;
          if (r && r.position.version === i.version) return r.position;
          if (r) r.position.version = i.version;
          else {
            var n = {
                w: i.data.width + 2,
                h: i.data.height + 2,
                x: 0,
                y: 0
              },
              o = new t.ImagePosition(n, i);
            this.patterns[e] = {
              bin: n,
              position: o
            };
          }
          return this._updatePatternAtlas(), this.patterns[e].position
        }, r.prototype.bind = function (e) {
          var r = e.gl;
          this.atlasTexture ? this.dirty && (this.atlasTexture.update(this.atlasImage), this.dirty = !1) : this.atlasTexture = new t.Texture(e, this.atlasImage, r.RGBA), this.atlasTexture.bind(r.LINEAR, r.CLAMP_TO_EDGE);
        }, r.prototype._updatePatternAtlas = function () {
          var e = [];
          for (var r in this.patterns) e.push(this.patterns[r].bin);
          var i = t.potpack(e),
            n = i.w,
            o = i.h,
            s = this.atlasImage;
          for (var a in s.resize({
              width: n || 1,
              height: o || 1
            }), this.patterns) {
            var u = this.patterns[a].bin,
              c = u.x + 1,
              h = u.y + 1,
              l = this.images[a].data,
              p = l.width,
              f = l.height;
            t.RGBAImage.copy(l, s, {
              x: 0,
              y: 0
            }, {
              x: c,
              y: h
            }, {
              width: p,
              height: f
            }), t.RGBAImage.copy(l, s, {
              x: 0,
              y: f - 1
            }, {
              x: c,
              y: h - 1
            }, {
              width: p,
              height: 1
            }), t.RGBAImage.copy(l, s, {
              x: 0,
              y: 0
            }, {
              x: c,
              y: h + f
            }, {
              width: p,
              height: 1
            }), t.RGBAImage.copy(l, s, {
              x: p - 1,
              y: 0
            }, {
              x: c - 1,
              y: h
            }, {
              width: 1,
              height: f
            }), t.RGBAImage.copy(l, s, {
              x: 0,
              y: 0
            }, {
              x: c + p,
              y: h
            }, {
              width: 1,
              height: f
            });
          }
          this.dirty = !0;
        }, r.prototype.beginFrame = function () {
          this.callbackDispatchedThisFrame = {};
        }, r.prototype.dispatchRenderCallbacks = function (t) {
          for (var e = 0, r = t; e < r.length; e += 1) {
            var i = r[e];
            if (!this.callbackDispatchedThisFrame[i]) {
              this.callbackDispatchedThisFrame[i] = !0;
              var n = this.images[i];
              l(n) && this.updateImage(i, n);
            }
          }
        }, r
      }(t.Evented);
      var f = y,
        d = y,
        g = 1e20;
  
      function y(t, e, r, i, n, o) {
        this.fontSize = t || 24, this.buffer = void 0 === e ? 3 : e, this.cutoff = i || .25, this.fontFamily = n || "sans-serif", this.fontWeight = o || "normal", this.radius = r || 8;
        var s = this.size = this.fontSize + 2 * this.buffer;
        this.canvas = document.createElement("canvas"), this.canvas.width = this.canvas.height = s, this.ctx = this.canvas.getContext("2d"), this.ctx.font = this.fontWeight + " " + this.fontSize + "px " + this.fontFamily, this.ctx.textBaseline = "middle", this.ctx.fillStyle = "black", this.gridOuter = new Float64Array(s * s), this.gridInner = new Float64Array(s * s), this.f = new Float64Array(s), this.d = new Float64Array(s), this.z = new Float64Array(s + 1), this.v = new Int16Array(s), this.middle = Math.round(s / 2 * (navigator.userAgent.indexOf("Gecko/") >= 0 ? 1.2 : 1));
      }
  
      function m(t, e, r, i, n, o, s) {
        for (var a = 0; a < e; a++) {
          for (var u = 0; u < r; u++) i[u] = t[u * e + a];
          for (v(i, n, o, s, r), u = 0; u < r; u++) t[u * e + a] = n[u];
        }
        for (u = 0; u < r; u++) {
          for (a = 0; a < e; a++) i[a] = t[u * e + a];
          for (v(i, n, o, s, e), a = 0; a < e; a++) t[u * e + a] = Math.sqrt(n[a]);
        }
      }
  
      function v(t, e, r, i, n) {
        r[0] = 0, i[0] = -g, i[1] = +g;
        for (var o = 1, s = 0; o < n; o++) {
          for (var a = (t[o] + o * o - (t[r[s]] + r[s] * r[s])) / (2 * o - 2 * r[s]); a <= i[s];) s--, a = (t[o] + o * o - (t[r[s]] + r[s] * r[s])) / (2 * o - 2 * r[s]);
          r[++s] = o, i[s] = a, i[s + 1] = +g;
        }
        for (o = 0, s = 0; o < n; o++) {
          for (; i[s + 1] < o;) s++;
          e[o] = (o - r[s]) * (o - r[s]) + t[r[s]];
        }
      }
      y.prototype.draw = function (t) {
        this.ctx.clearRect(0, 0, this.size, this.size), this.ctx.fillText(t, this.buffer, this.middle);
        for (var e = this.ctx.getImageData(0, 0, this.size, this.size), r = new Uint8ClampedArray(this.size * this.size), i = 0; i < this.size * this.size; i++) {
          var n = e.data[4 * i + 3] / 255;
          this.gridOuter[i] = 1 === n ? 0 : 0 === n ? g : Math.pow(Math.max(0, .5 - n), 2), this.gridInner[i] = 1 === n ? g : 0 === n ? 0 : Math.pow(Math.max(0, n - .5), 2);
        }
        for (m(this.gridOuter, this.size, this.size, this.f, this.d, this.v, this.z), m(this.gridInner, this.size, this.size, this.f, this.d, this.v, this.z), i = 0; i < this.size * this.size; i++) {
          var o = this.gridOuter[i] - this.gridInner[i];
          r[i] = Math.max(0, Math.min(255, Math.round(255 - 255 * (o / this.radius + this.cutoff))));
        }
        return r
      }, f.default = d;
      var x = function (t, e) {
        this.requestManager = t, this.localIdeographFontFamily = e, this.entries = {};
      };
      x.prototype.setURL = function (t) {
        this.url = t;
      }, x.prototype.getGlyphs = function (e, r) {
        var i = this,
          n = [];
        for (var o in e)
          for (var s = 0, a = e[o]; s < a.length; s += 1) {
            var u = a[s];
            n.push({
              stack: o,
              id: u
            });
          }
        t.asyncAll(n, function (t, e) {
          var r = t.stack,
            n = t.id,
            o = i.entries[r];
          o || (o = i.entries[r] = {
            glyphs: {},
            requests: {}
          });
          var s = o.glyphs[n];
          if (void 0 === s) {
            if (s = i._tinySDF(o, r, n)) return o.glyphs[n] = s, void e(null, {
              stack: r,
              id: n,
              glyph: s
            });
            var a = Math.floor(n / 256);
            if (256 * a > 65535) e(new Error("glyphs > 65535 not supported"));
            else {
              var u = o.requests[a];
              u || (u = o.requests[a] = [], x.loadGlyphRange(r, a, i.url, i.requestManager, function (t, e) {
                if (e)
                  for (var r in e) i._doesCharSupportLocalGlyph(+r) || (o.glyphs[+r] = e[+r]);
                for (var n = 0, s = u; n < s.length; n += 1) {
                  (0, s[n])(t, e);
                }
                delete o.requests[a];
              })), u.push(function (t, i) {
                t ? e(t) : i && e(null, {
                  stack: r,
                  id: n,
                  glyph: i[n] || null
                });
              });
            }
          } else e(null, {
            stack: r,
            id: n,
            glyph: s
          });
        }, function (t, e) {
          if (t) r(t);
          else if (e) {
            for (var i = {}, n = 0, o = e; n < o.length; n += 1) {
              var s = o[n],
                a = s.stack,
                u = s.id,
                c = s.glyph;
              (i[a] || (i[a] = {}))[u] = c && {
                id: c.id,
                bitmap: c.bitmap.clone(),
                metrics: c.metrics
              };
            }
            r(null, i);
          }
        });
      }, x.prototype._doesCharSupportLocalGlyph = function (e) {
        return !!this.localIdeographFontFamily && (t.isChar["CJK Unified Ideographs"](e) || t.isChar["Hangul Syllables"](e) || t.isChar.Hiragana(e) || t.isChar.Katakana(e))
      }, x.prototype._tinySDF = function (e, r, i) {
        var n = this.localIdeographFontFamily;
        if (n && this._doesCharSupportLocalGlyph(i)) {
          var o = e.tinySDF;
          if (!o) {
            var s = "400";
            /bold/i.test(r) ? s = "900" : /medium/i.test(r) ? s = "500" : /light/i.test(r) && (s = "200"), o = e.tinySDF = new x.TinySDF(24, 3, 8, .25, n, s);
          }
          return {
            id: i,
            bitmap: new t.AlphaImage({
              width: 30,
              height: 30
            }, o.draw(String.fromCharCode(i))),
            metrics: {
              width: 24,
              height: 24,
              left: 0,
              top: -8,
              advance: 24
            }
          }
        }
      }, x.loadGlyphRange = function (e, r, i, n, o) {
        var s = 256 * r,
          a = s + 255,
          u = n.transformRequest(n.normalizeGlyphsURL(i).replace("{fontstack}", e).replace("{range}", s + "-" + a), t.ResourceType.Glyphs);
        t.getArrayBuffer(u, function (e, r) {
          if (e) o(e);
          else if (r) {
            for (var i = {}, n = 0, s = t.parseGlyphPBF(r); n < s.length; n += 1) {
              var a = s[n];
              i[a.id] = a;
            }
            o(null, i);
          }
        });
      }, x.TinySDF = f;
      var w = function () {
        this.specification = t.styleSpec.light.position;
      };
      w.prototype.possiblyEvaluate = function (e, r) {
        return t.sphericalToCartesian(e.expression.evaluate(r))
      }, w.prototype.interpolate = function (e, r, i) {
        return {
          x: t.number(e.x, r.x, i),
          y: t.number(e.y, r.y, i),
          z: t.number(e.z, r.z, i)
        }
      };
      var b = new t.Properties({
          anchor: new t.DataConstantProperty(t.styleSpec.light.anchor),
          position: new w,
          color: new t.DataConstantProperty(t.styleSpec.light.color),
          intensity: new t.DataConstantProperty(t.styleSpec.light.intensity)
        }),
        E = function (e) {
          function r(r) {
            e.call(this), this._transitionable = new t.Transitionable(b), this.setLight(r), this._transitioning = this._transitionable.untransitioned();
          }
          return e && (r.__proto__ = e), r.prototype = Object.create(e && e.prototype), r.prototype.constructor = r, r.prototype.getLight = function () {
            return this._transitionable.serialize()
          }, r.prototype.setLight = function (e, r) {
            if (void 0 === r && (r = {}), !this._validate(t.validateLight, e, r))
              for (var i in e) {
                var n = e[i];
                t.endsWith(i, "-transition") ? this._transitionable.setTransition(i.slice(0, -"-transition".length), n) : this._transitionable.setValue(i, n);
              }
          }, r.prototype.updateTransitions = function (t) {
            this._transitioning = this._transitionable.transitioned(t, this._transitioning);
          }, r.prototype.hasTransition = function () {
            return this._transitioning.hasTransition()
          }, r.prototype.recalculate = function (t) {
            this.properties = this._transitioning.possiblyEvaluate(t);
          }, r.prototype._validate = function (e, r, i) {
            return (!i || !1 !== i.validate) && t.emitValidationErrors(this, e.call(t.validateStyle, t.extend({
              value: r,
              style: {
                glyphs: !0,
                sprite: !0
              },
              styleSpec: t.styleSpec
            })))
          }, r
        }(t.Evented),
        L = function (t, e) {
          this.width = t, this.height = e, this.nextRow = 0, this.bytes = 4, this.data = new Uint8Array(this.width * this.height * this.bytes), this.positions = {};
        };
      L.prototype.getDash = function (t, e) {
        var r = t.join(",") + String(e);
        return this.positions[r] || (this.positions[r] = this.addDash(t, e)), this.positions[r]
      }, L.prototype.addDash = function (e, r) {
        var i = r ? 7 : 0,
          n = 2 * i + 1;
        if (this.nextRow + n > this.height) return t.warnOnce("LineAtlas out of space"), null;
        for (var o = 0, s = 0; s < e.length; s++) o += e[s];
        for (var a = this.width / o, u = a / 2, c = e.length % 2 == 1, h = -i; h <= i; h++)
          for (var l = this.nextRow + i + h, p = this.width * l, f = c ? -e[e.length - 1] : 0, d = e[0], g = 1, _ = 0; _ < this.width; _++) {
            for (; d < _ / a;) f = d, d += e[g], c && g === e.length - 1 && (d += e[0]), g++;
            var y = Math.abs(_ - f * a),
              m = Math.abs(_ - d * a),
              v = Math.min(y, m),
              x = g % 2 == 1,
              w = void 0;
            if (r) {
              var b = i ? h / i * (u + 1) : 0;
              if (x) {
                var E = u - Math.abs(b);
                w = Math.sqrt(v * v + E * E);
              } else w = u - Math.sqrt(v * v + b * b);
            } else w = (x ? 1 : -1) * v;
            this.data[3 + 4 * (p + _)] = Math.max(0, Math.min(255, w + 128));
          }
        var L = {
          y: (this.nextRow + i + .5) / this.height,
          height: 2 * i / this.height,
          width: o
        };
        return this.nextRow += n, this.dirty = !0, L
      }, L.prototype.bind = function (t) {
        var e = t.gl;
        this.texture ? (e.bindTexture(e.TEXTURE_2D, this.texture), this.dirty && (this.dirty = !1, e.texSubImage2D(e.TEXTURE_2D, 0, 0, 0, this.width, this.height, e.RGBA, e.UNSIGNED_BYTE, this.data))) : (this.texture = e.createTexture(), e.bindTexture(e.TEXTURE_2D, this.texture), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, e.REPEAT), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, e.REPEAT), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, e.LINEAR), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, e.LINEAR), e.texImage2D(e.TEXTURE_2D, 0, e.RGBA, this.width, this.height, 0, e.RGBA, e.UNSIGNED_BYTE, this.data));
      };
      var S = function e(r, i) {
        this.workerPool = r, this.actors = [], this.currentActor = 0, this.id = t.uniqueId();
        for (var n = this.workerPool.acquire(this.id), o = 0; o < n.length; o++) {
          var s = n[o],
            a = new e.Actor(s, i, this.id);
          a.name = "Worker " + o, this.actors.push(a);
        }
      };
  
      function C(e, r, i) {
        var n = function (n, o) {
          if (n) return i(n);
          if (o) {
            var s = t.pick(t.extend(o, e), ["tiles", "minzoom", "maxzoom", "attribution", "epgis_logo", "bounds", "scheme", "tileSize", "encoding", "tilesecurity"]);
            o.vector_layers && (s.vectorLayers = o.vector_layers, s.vectorLayerIds = s.vectorLayers.map(function (t) {
              return t.id
            })), e.url && (s.tiles = r.canonicalizeTileset(s, e.url)), i(null, s);
          }
        };
        return e.url ? t.getJSON(r.transformRequest(r.normalizeSourceURL(e.url), t.ResourceType.Source), n) : t.browser.frame(function () {
          return n(null, e)
        })
      }
  
      function I(t) {
        return (20037508.342787 + t) / 40075016.68556797
      }
  
      function M(t) {
        return (20037508.342787 - t) / 40075016.68556797
      }
  
      function T(t, e) {
        return t / 78271.51696399994
      }
  
      function P(t) {
        return 40075016.68556797 * t - 20037508.342787
      }
  
      function D(t) {
        return 20037508.342787 - 40075016.68556797 * t
      }
  
      function N(t, e) {
        return 78271.51696399994 * t
      }
      S.prototype.broadcast = function (e, r, i) {
        i = i || function () {}, t.asyncAll(this.actors, function (t, i) {
          t.send(e, r, i);
        }, i);
      }, S.prototype.getActor = function () {
        return this.currentActor = (this.currentActor + 1) % this.actors.length, this.actors[this.currentActor]
      }, S.prototype.remove = function () {
        this.actors.forEach(function (t) {
          t.remove();
        }), this.actors = [], this.workerPool.release(this.id);
      }, S.Actor = t.Actor;
      var R = function (t, e, r) {
        void 0 === r && (r = 0), this.x = +t, this.y = +e, this.z = +r;
      };
      R.fromLngLat = function (e, r) {
        void 0 === r && (r = 0);
        var i = t.LngLat.convert(e);
        return new R(I(i.lng), M(i.lat), T(r, i.lat))
      }, R.prototype.toLngLat = function () {
        return new t.LngLat(P(this.x), D(this.y))
      }, R.prototype.toAltitude = function () {
        return N(this.z, this.y)
      };
      var O = {
          "EPSG:3857": {
            MercatorCoordinate: t.MercatorCoordinate,
            mercatorXfromLng: t.mercatorXfromLng,
            mercatorYfromLat: t.mercatorYfromLat,
            mercatorZfromAltitude: t.mercatorZfromAltitude,
            lngFromMercatorX: t.lngFromMercatorX,
            latFromMercatorY: t.latFromMercatorY,
            altitudeFromMercatorZ: t.altitudeFromMercatorZ
          },
          "EPSG:4326": {
            MercatorCoordinate: R,
            mercatorXfromLng: I,
            mercatorYfromLat: M,
            mercatorZfromAltitude: T,
            lngFromMercatorX: P,
            latFromMercatorY: D,
            altitudeFromMercatorZ: N
          }
        },
        A = function (e, r, i) {
          this.bounds = t.LngLatBounds.convert(e), this.minzoom = r || 0, this.maxzoom = i || 24;
        };
      A.prototype.validateBounds = function (t) {
        return Array.isArray(t) && 4 === t.length ? [Math.max(-180, t[0]), Math.max(-90, t[1]), Math.min(180, t[2]), Math.min(90, t[3])] : [-180, -90, 180, 90]
      }, A.prototype.contains = function (e) {
        var r = Math.pow(2, e.z),
          i = Math.floor(O[t.config.PROJECT_TYPE].mercatorXfromLng(this.bounds.getWest()) * r),
          n = Math.floor(O[t.config.PROJECT_TYPE].mercatorYfromLat(this.bounds.getNorth()) * r),
          o = Math.ceil(O[t.config.PROJECT_TYPE].mercatorXfromLng(this.bounds.getEast()) * r),
          s = Math.ceil(O[t.config.PROJECT_TYPE].mercatorYfromLat(this.bounds.getSouth()) * r);
        return e.x >= i && e.x < o && e.y >= n && e.y < s
      };
      var F = function (e) {
          function r(r, i, n, o) {
            if (e.call(this), this.id = r, this.dispatcher = n, this.type = "vector", this.minzoom = 0, this.maxzoom = 22, this.scheme = "xyz", this.tileSize = 512, this.reparseOverscaled = !0, this.isTileClipped = !0, this._loaded = !1, t.extend(this, t.pick(i, ["url", "scheme", "tileSize"])), this._options = t.extend({
                type: "vector"
              }, i), this._collectResourceTiming = i.collectResourceTiming, 512 !== this.tileSize) throw new Error("vector tile sources must have a tileSize of 512");
            this.setEventedParent(o);
          }
          return e && (r.__proto__ = e), r.prototype = Object.create(e && e.prototype), r.prototype.constructor = r, r.prototype.load = function () {
            var e = this;
            this._loaded = !1, this.fire(new t.Event("dataloading", {
              dataType: "source"
            })), this._tileJSONRequest = C(this._options, this.map._requestManager, function (r, i) {
              e._tileJSONRequest = null, e._loaded = !0, r ? e.fire(new t.ErrorEvent(r)) : i && (t.extend(e, i), i.bounds && (e.tileBounds = new A(i.bounds, e.minzoom, e.maxzoom)), t.postTurnstileEvent(i.tiles, e.map._requestManager._customAccessToken), t.postMapLoadEvent(i.tiles, e.map._getMapId(), e.map._requestManager._skuToken, e.map._requestManager._customAccessToken), e.fire(new t.Event("data", {
                dataType: "source",
                sourceDataType: "metadata"
              })), e.fire(new t.Event("data", {
                dataType: "source",
                sourceDataType: "content"
              })));
            });
          }, r.prototype.loaded = function () {
            return this._loaded
          }, r.prototype.hasTile = function (t) {
            return !this.tileBounds || this.tileBounds.contains(t.canonical)
          }, r.prototype.onAdd = function (t) {
            this.map = t, this.load();
          }, r.prototype.onRemove = function () {
            this._tileJSONRequest && (this._tileJSONRequest.cancel(), this._tileJSONRequest = null);
          }, r.prototype.serialize = function () {
            return t.extend({}, this._options)
          }, r.prototype.loadTile = function (e, r) {
            var i = this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles, this.scheme), this.url, null),
              n = {
                request: t.extend(this.map._requestManager.transformRequest(i, t.ResourceType.Tile), {
                  zxy: e.tileID.canonical,
                  tilesecurity: this.tilesecurity
                }),
                uid: e.uid,
                tileID: e.tileID,
                zoom: e.tileID.overscaledZ,
                tileSize: this.tileSize * e.tileID.overscaleFactor(),
                type: this.type,
                source: this.id,
                pixelRatio: t.browser.devicePixelRatio,
                showCollisionBoxes: this.map.showCollisionBoxes
              };
  
            function o(i, n) {
              return delete e.request, e.aborted ? r(null) : i && 404 !== i.status ? r(i) : (n && n.resourceTiming && (e.resourceTiming = n.resourceTiming), this.map._refreshExpiredTiles && n && e.setExpiryData(n), e.loadVectorData(n, this.map.painter), t.cacheEntryPossiblyAdded(this.dispatcher), r(null), void(e.reloadCallback && (this.loadTile(e, e.reloadCallback), e.reloadCallback = null)))
            }
            n.request.collectResourceTiming = this._collectResourceTiming, e.actor && "expired" !== e.state ? "loading" === e.state ? e.reloadCallback = r : e.request = e.actor.send("reloadTile", n, o.bind(this)) : (e.actor = this.dispatcher.getActor(), e.request = e.actor.send("loadTile", n, o.bind(this)));
          }, r.prototype.abortTile = function (t) {
            t.request && (t.request.cancel(), delete t.request), t.actor && t.actor.send("abortTile", {
              uid: t.uid,
              type: this.type,
              source: this.id
            }, void 0);
          }, r.prototype.unloadTile = function (t) {
            t.unloadVectorData(), t.actor && t.actor.send("removeTile", {
              uid: t.uid,
              type: this.type,
              source: this.id
            }, void 0);
          }, r.prototype.hasTransition = function () {
            return !1
          }, r
        }(t.Evented),
        k = function (e) {
          function r(r, i, n, o) {
            e.call(this), this.id = r, this.dispatcher = n, this.setEventedParent(o), this.type = "raster", this.minzoom = 0, this.maxzoom = 22, this.roundZoom = !0, this.scheme = "xyz", this.tileSize = 512, this._loaded = !1, this._options = t.extend({
              type: "raster"
            }, i), t.extend(this, t.pick(i, ["url", "scheme", "tileSize"]));
          }
          return e && (r.__proto__ = e), r.prototype = Object.create(e && e.prototype), r.prototype.constructor = r, r.prototype.load = function () {
            var e = this;
            this._loaded = !1, this.fire(new t.Event("dataloading", {
              dataType: "source"
            })), this._tileJSONRequest = C(this._options, this.map._requestManager, function (r, i) {
              e._tileJSONRequest = null, e._loaded = !0, r ? e.fire(new t.ErrorEvent(r)) : i && (t.extend(e, i), i.bounds && (e.tileBounds = new A(i.bounds, e.minzoom, e.maxzoom)), t.postTurnstileEvent(i.tiles), t.postMapLoadEvent(i.tiles, e.map._getMapId(), e.map._requestManager._skuToken), e.fire(new t.Event("data", {
                dataType: "source",
                sourceDataType: "metadata"
              })), e.fire(new t.Event("data", {
                dataType: "source",
                sourceDataType: "content"
              })));
            });
          }, r.prototype.loaded = function () {
            return this._loaded
          }, r.prototype.onAdd = function (t) {
            this.map = t, this.load();
          }, r.prototype.onRemove = function () {
            this._tileJSONRequest && (this._tileJSONRequest.cancel(), this._tileJSONRequest = null);
          }, r.prototype.serialize = function () {
            return t.extend({}, this._options)
          }, r.prototype.hasTile = function (t) {
            return !this.tileBounds || this.tileBounds.contains(t.canonical)
          }, r.prototype.loadTile = function (e, r) {
            var i = this,
              n = this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles, this.scheme), this.url, this.tileSize);
            e.request = t.getImage(t.extend(this.map._requestManager.transformRequest(n, t.ResourceType.Tile), {
              tilesecurity: this.tilesecurity,
              zxy: e.tileID.canonical
            }), function (n, o) {
              if (delete e.request, e.aborted) e.state = "unloaded", r(null);
              else if (n) e.state = "errored", r(n);
              else if (o) {
                i.map._refreshExpiredTiles && e.setExpiryData(o), delete o.cacheControl, delete o.expires;
                var s = i.map.painter.context,
                  a = s.gl;
                e.texture = i.map.painter.getTileTexture(o.width), e.texture ? e.texture.update(o, {
                  useMipmap: !0
                }) : (e.texture = new t.Texture(s, o, a.RGBA, {
                  useMipmap: !0
                }), e.texture.bind(a.LINEAR, a.CLAMP_TO_EDGE, a.LINEAR_MIPMAP_NEAREST), s.extTextureFilterAnisotropic && a.texParameterf(a.TEXTURE_2D, s.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT, s.extTextureFilterAnisotropicMax)), e.state = "loaded", t.cacheEntryPossiblyAdded(i.dispatcher), r(null);
              }
            });
          }, r.prototype.abortTile = function (t, e) {
            t.request && (t.request.cancel(), delete t.request), e();
          }, r.prototype.unloadTile = function (t, e) {
            t.texture && this.map.painter.saveTileTexture(t.texture), e();
          }, r.prototype.hasTransition = function () {
            return !1
          }, r
        }(t.Evented),
        B = function (e) {
          function r(r, i, n, o) {
            e.call(this, r, i, n, o), this.type = "raster-dem", this.maxzoom = 22, this._options = t.extend({
              type: "raster-dem"
            }, i), this.encoding = i.encoding || "epgis";
          }
          return e && (r.__proto__ = e), r.prototype = Object.create(e && e.prototype), r.prototype.constructor = r, r.prototype.serialize = function () {
            return {
              type: "raster-dem",
              url: this.url,
              tileSize: this.tileSize,
              tiles: this.tiles,
              bounds: this.bounds,
              encoding: this.encoding
            }
          }, r.prototype.loadTile = function (e, r) {
            var i = this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles, this.scheme), this.url, this.tileSize);
            e.request = t.getImage(this.map._requestManager.transformRequest(i, t.ResourceType.Tile), function (i, n) {
              if (delete e.request, e.aborted) e.state = "unloaded", r(null);
              else if (i) e.state = "errored", r(i);
              else if (n) {
                this.map._refreshExpiredTiles && e.setExpiryData(n), delete n.cacheControl, delete n.expires;
                var o = t.browser.getImageData(n),
                  s = {
                    uid: e.uid,
                    coord: e.tileID,
                    source: this.id,
                    rawImageData: o,
                    encoding: this.encoding
                  };
                e.actor && "expired" !== e.state || (e.actor = this.dispatcher.getActor(), e.actor.send("loadDEMTile", s, function (t, i) {
                  t && (e.state = "errored", r(t));
                  i && (e.dem = i, e.needsHillshadePrepare = !0, e.state = "loaded", r(null));
                }.bind(this)));
              }
            }.bind(this)), e.neighboringTiles = this._getNeighboringTiles(e.tileID);
          }, r.prototype._getNeighboringTiles = function (e) {
            var r = e.canonical,
              i = Math.pow(2, r.z),
              n = (r.x - 1 + i) % i,
              o = 0 === r.x ? e.wrap - 1 : e.wrap,
              s = (r.x + 1 + i) % i,
              a = r.x + 1 === i ? e.wrap + 1 : e.wrap,
              u = {};
            return u[new t.OverscaledTileID(e.overscaledZ, o, r.z, n, r.y).key] = {
              backfilled: !1
            }, u[new t.OverscaledTileID(e.overscaledZ, a, r.z, s, r.y).key] = {
              backfilled: !1
            }, r.y > 0 && (u[new t.OverscaledTileID(e.overscaledZ, o, r.z, n, r.y - 1).key] = {
              backfilled: !1
            }, u[new t.OverscaledTileID(e.overscaledZ, e.wrap, r.z, r.x, r.y - 1).key] = {
              backfilled: !1
            }, u[new t.OverscaledTileID(e.overscaledZ, a, r.z, s, r.y - 1).key] = {
              backfilled: !1
            }), r.y + 1 < i && (u[new t.OverscaledTileID(e.overscaledZ, o, r.z, n, r.y + 1).key] = {
              backfilled: !1
            }, u[new t.OverscaledTileID(e.overscaledZ, e.wrap, r.z, r.x, r.y + 1).key] = {
              backfilled: !1
            }, u[new t.OverscaledTileID(e.overscaledZ, a, r.z, s, r.y + 1).key] = {
              backfilled: !1
            }), u
          }, r.prototype.unloadTile = function (t) {
            t.demTexture && this.map.painter.saveTileTexture(t.demTexture), t.fbo && (t.fbo.destroy(), delete t.fbo), t.dem && delete t.dem, delete t.neighboringTiles, t.state = "unloaded", t.actor && t.actor.send("removeDEMTile", {
              uid: t.uid,
              source: this.id
            });
          }, r
        }(k),
        z = function (e) {
          function r(r, i, n, o) {
            e.call(this), this.id = r, this.type = "geojson", this.minzoom = 0, this.maxzoom = 18, this.tileSize = 512, this.isTileClipped = !0, this.reparseOverscaled = !0, this._removed = !1, this._loaded = !1, this.actor = n.getActor(), this.setEventedParent(o), this._data = i.data, this._options = t.extend({}, i), this._collectResourceTiming = i.collectResourceTiming, this._resourceTiming = [], void 0 !== i.maxzoom && (this.maxzoom = i.maxzoom), i.type && (this.type = i.type), i.attribution && (this.attribution = i.attribution);
            var s = t.EXTENT / this.tileSize;
            this.workerOptions = t.extend({
              source: this.id,
              cluster: i.cluster || !1,
              geojsonVtOptions: {
                buffer: (void 0 !== i.buffer ? i.buffer : 128) * s,
                tolerance: (void 0 !== i.tolerance ? i.tolerance : .375) * s,
                extent: t.EXTENT,
                maxZoom: this.maxzoom,
                lineMetrics: i.lineMetrics || !1,
                generateId: i.generateId || !1
              },
              superclusterOptions: {
                maxZoom: void 0 !== i.clusterMaxZoom ? Math.min(i.clusterMaxZoom, this.maxzoom - 1) : this.maxzoom - 1,
                extent: t.EXTENT,
                radius: (i.clusterRadius || 50) * s,
                log: !1
              },
              clusterProperties: i.clusterProperties
            }, i.workerOptions);
          }
          return e && (r.__proto__ = e), r.prototype = Object.create(e && e.prototype), r.prototype.constructor = r, r.prototype.load = function () {
            var e = this;
            this.fire(new t.Event("dataloading", {
              dataType: "source"
            })), this._updateWorkerData(function (r) {
              if (r) e.fire(new t.ErrorEvent(r));
              else {
                var i = {
                  dataType: "source",
                  sourceDataType: "metadata"
                };
                e._collectResourceTiming && e._resourceTiming && e._resourceTiming.length > 0 && (i.resourceTiming = e._resourceTiming, e._resourceTiming = []), e.fire(new t.Event("data", i));
              }
            });
          }, r.prototype.onAdd = function (t) {
            this.map = t, this.load();
          }, r.prototype.setData = function (e) {
            var r = this;
            return this._data = e, this.fire(new t.Event("dataloading", {
              dataType: "source"
            })), this._updateWorkerData(function (e) {
              if (e) r.fire(new t.ErrorEvent(e));
              else {
                var i = {
                  dataType: "source",
                  sourceDataType: "content"
                };
                r._collectResourceTiming && r._resourceTiming && r._resourceTiming.length > 0 && (i.resourceTiming = r._resourceTiming, r._resourceTiming = []), r.fire(new t.Event("data", i));
              }
            }), this
          }, r.prototype.getClusterExpansionZoom = function (t, e) {
            return this.actor.send("geojson.getClusterExpansionZoom", {
              clusterId: t,
              source: this.id
            }, e), this
          }, r.prototype.getClusterChildren = function (t, e) {
            return this.actor.send("geojson.getClusterChildren", {
              clusterId: t,
              source: this.id
            }, e), this
          }, r.prototype.getClusterLeaves = function (t, e, r, i) {
            return this.actor.send("geojson.getClusterLeaves", {
              source: this.id,
              clusterId: t,
              limit: e,
              offset: r
            }, i), this
          }, r.prototype._updateWorkerData = function (e) {
            var r = this;
            this._loaded = !1;
            var i = t.extend({}, this.workerOptions),
              n = this._data;
            "string" == typeof n ? (i.request = this.map._requestManager.transformRequest(t.browser.resolveURL(n), t.ResourceType.Source), i.request.collectResourceTiming = this._collectResourceTiming) : i.data = JSON.stringify(n), this.actor.send(this.type + ".loadData", i, function (t, n) {
              r._removed || n && n.abandoned || (r._loaded = !0, n && n.resourceTiming && n.resourceTiming[r.id] && (r._resourceTiming = n.resourceTiming[r.id].slice(0)), r.actor.send(r.type + ".coalesce", {
                source: i.source
              }, null), e(t));
            });
          }, r.prototype.loaded = function () {
            return this._loaded
          }, r.prototype.loadTile = function (e, r) {
            var i = this,
              n = e.actor ? "reloadTile" : "loadTile";
            e.actor = this.actor;
            var o = {
              type: this.type,
              uid: e.uid,
              tileID: e.tileID,
              zoom: e.tileID.overscaledZ,
              maxZoom: this.maxzoom,
              tileSize: this.tileSize,
              source: this.id,
              pixelRatio: t.browser.devicePixelRatio,
              showCollisionBoxes: this.map.showCollisionBoxes
            };
            e.request = this.actor.send(n, o, function (t, o) {
              return delete e.request, e.unloadVectorData(), e.aborted ? r(null) : t ? r(t) : (e.loadVectorData(o, i.map.painter, "reloadTile" === n), r(null))
            });
          }, r.prototype.abortTile = function (t) {
            t.request && (t.request.cancel(), delete t.request), t.aborted = !0;
          }, r.prototype.unloadTile = function (t) {
            t.unloadVectorData(), this.actor.send("removeTile", {
              uid: t.uid,
              type: this.type,
              source: this.id
            });
          }, r.prototype.onRemove = function () {
            this._removed = !0, this.actor.send("removeSource", {
              type: this.type,
              source: this.id
            });
          }, r.prototype.serialize = function () {
            return t.extend({}, this._options, {
              type: this.type,
              data: this._data
            })
          }, r.prototype.hasTransition = function () {
            return !1
          }, r
        }(t.Evented),
        V = function (e) {
          function r(t, r, i, n) {
            e.call(this), this.id = t, this.dispatcher = i, this.coordinates = r.coordinates, this.type = "image", this.minzoom = 0, this.maxzoom = 22, this.tileSize = 512, this.tiles = {}, this._loaded = !1, this.setEventedParent(n), this.options = r;
          }
          return e && (r.__proto__ = e), r.prototype = Object.create(e && e.prototype), r.prototype.constructor = r, r.prototype.load = function (e, r) {
            var i = this;
            this._loaded = !1, this.fire(new t.Event("dataloading", {
              dataType: "source"
            })), this.url = this.options.url, t.getImage(this.map._requestManager.transformRequest(this.url, t.ResourceType.Image), function (n, o) {
              i._loaded = !0, n ? i.fire(new t.ErrorEvent(n)) : o && (i.image = o, e && (i.coordinates = e), r && r(), i._finishLoading());
            });
          }, r.prototype.loaded = function () {
            return this._loaded
          }, r.prototype.updateImage = function (t) {
            var e = this;
            return this.image && t.url ? (this.options.url = t.url, this.load(t.coordinates, function () {
              e.texture = null;
            }), this) : this
          }, r.prototype._finishLoading = function () {
            this.map && (this.setCoordinates(this.coordinates), this.fire(new t.Event("data", {
              dataType: "source",
              sourceDataType: "metadata"
            })));
          }, r.prototype.onAdd = function (t) {
            this.map = t, this.load();
          }, r.prototype.setCoordinates = function (e) {
            var r = this;
            this.coordinates = e;
            var i = e.map(O[t.config.PROJECT_TYPE].MercatorCoordinate.fromLngLat);
            this.tileID = function (e) {
              for (var r = 1 / 0, i = 1 / 0, n = -1 / 0, o = -1 / 0, s = 0, a = e; s < a.length; s += 1) {
                var u = a[s];
                r = Math.min(r, u.x), i = Math.min(i, u.y), n = Math.max(n, u.x), o = Math.max(o, u.y);
              }
              var c = n - r,
                h = o - i,
                l = Math.max(c, h),
                p = Math.max(0, Math.floor(-Math.log(l) / Math.LN2)),
                f = Math.pow(2, p);
              return new t.CanonicalTileID(p, Math.floor((r + n) / 2 * f), Math.floor((i + o) / 2 * f))
            }(i), this.minzoom = this.maxzoom = this.tileID.z;
            var n = i.map(function (t) {
              return r.tileID.getTilePoint(t)._round()
            });
            return this._boundsArray = new t.StructArrayLayout4i8, this._boundsArray.emplaceBack(n[0].x, n[0].y, 0, 0), this._boundsArray.emplaceBack(n[1].x, n[1].y, t.EXTENT, 0), this._boundsArray.emplaceBack(n[3].x, n[3].y, 0, t.EXTENT), this._boundsArray.emplaceBack(n[2].x, n[2].y, t.EXTENT, t.EXTENT), this.boundsBuffer && (this.boundsBuffer.destroy(), delete this.boundsBuffer), this.fire(new t.Event("data", {
              dataType: "source",
              sourceDataType: "content"
            })), this
          }, r.prototype.prepare = function () {
            if (0 !== Object.keys(this.tiles).length && this.image) {
              var e = this.map.painter.context,
                r = e.gl;
              for (var i in this.boundsBuffer || (this.boundsBuffer = e.createVertexBuffer(this._boundsArray, t.rasterBoundsAttributes.members)), this.boundsSegments || (this.boundsSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2)), this.texture || (this.texture = new t.Texture(e, this.image, r.RGBA), this.texture.bind(r.LINEAR, r.CLAMP_TO_EDGE)), this.tiles) {
                var n = this.tiles[i];
                "loaded" !== n.state && (n.state = "loaded", n.texture = this.texture);
              }
            }
          }, r.prototype.loadTile = function (t, e) {
            this.tileID && this.tileID.equals(t.tileID.canonical) ? (this.tiles[String(t.tileID.wrap)] = t, t.buckets = {}, e(null)) : (t.state = "errored", e(null));
          }, r.prototype.serialize = function () {
            return {
              type: "image",
              url: this.options.url,
              coordinates: this.coordinates
            }
          }, r.prototype.hasTransition = function () {
            return !1
          }, r
        }(t.Evented);
      var U = function (e) {
          function r(t, r, i, n) {
            e.call(this, t, r, i, n), this.roundZoom = !0, this.type = "video", this.options = r;
          }
          return e && (r.__proto__ = e), r.prototype = Object.create(e && e.prototype), r.prototype.constructor = r, r.prototype.load = function () {
            var e = this;
            this._loaded = !1;
            var r = this.options;
            this.urls = [];
            for (var i = 0, n = r.urls; i < n.length; i += 1) {
              var o = n[i];
              this.urls.push(this.map._requestManager.transformRequest(o, t.ResourceType.Source).url);
            }
            t.getVideo(this.urls, function (r, i) {
              e._loaded = !0, r ? e.fire(new t.ErrorEvent(r)) : i && (e.video = i, e.video.loop = !0, e.video.addEventListener("playing", function () {
                e.map.triggerRepaint();
              }), e.map && e.video.play(), e._finishLoading());
            });
          }, r.prototype.pause = function () {
            this.video && this.video.pause();
          }, r.prototype.play = function () {
            this.video && this.video.play();
          }, r.prototype.seek = function (e) {
            if (this.video) {
              var r = this.video.seekable;
              e < r.start(0) || e > r.end(0) ? this.fire(new t.ErrorEvent(new t.ValidationError("Playback for this video can be set only between the " + r.start(0) + " and " + r.end(0) + "-second mark."))) : this.video.currentTime = e;
            }
          }, r.prototype.getVideo = function () {
            return this.video
          }, r.prototype.onAdd = function (t) {
            this.map || (this.map = t, this.load(), this.video && (this.video.play(), this.setCoordinates(this.coordinates)));
          }, r.prototype.prepare = function () {
            if (!(0 === Object.keys(this.tiles).length || this.video.readyState < 2)) {
              var e = this.map.painter.context,
                r = e.gl;
              for (var i in this.boundsBuffer || (this.boundsBuffer = e.createVertexBuffer(this._boundsArray, t.rasterBoundsAttributes.members)), this.boundsSegments || (this.boundsSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2)), this.texture ? this.video.paused || (this.texture.bind(r.LINEAR, r.CLAMP_TO_EDGE), r.texSubImage2D(r.TEXTURE_2D, 0, 0, 0, r.RGBA, r.UNSIGNED_BYTE, this.video)) : (this.texture = new t.Texture(e, this.video, r.RGBA), this.texture.bind(r.LINEAR, r.CLAMP_TO_EDGE)), this.tiles) {
                var n = this.tiles[i];
                "loaded" !== n.state && (n.state = "loaded", n.texture = this.texture);
              }
            }
          }, r.prototype.serialize = function () {
            return {
              type: "video",
              urls: this.urls,
              coordinates: this.coordinates
            }
          }, r.prototype.hasTransition = function () {
            return this.video && !this.video.paused
          }, r
        }(V),
        q = function (e) {
          function r(r, i, n, o) {
            e.call(this, r, i, n, o), i.coordinates ? Array.isArray(i.coordinates) && 4 === i.coordinates.length && !i.coordinates.some(function (t) {
              return !Array.isArray(t) || 2 !== t.length || t.some(function (t) {
                return "number" != typeof t
              })
            }) || this.fire(new t.ErrorEvent(new t.ValidationError("sources." + r, null, '"coordinates" property must be an array of 4 longitude/latitude array pairs'))) : this.fire(new t.ErrorEvent(new t.ValidationError("sources." + r, null, 'missing required property "coordinates"'))), i.animate && "boolean" != typeof i.animate && this.fire(new t.ErrorEvent(new t.ValidationError("sources." + r, null, 'optional "animate" property must be a boolean value'))), i.canvas ? "string" == typeof i.canvas || i.canvas instanceof t.window.HTMLCanvasElement || this.fire(new t.ErrorEvent(new t.ValidationError("sources." + r, null, '"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))) : this.fire(new t.ErrorEvent(new t.ValidationError("sources." + r, null, 'missing required property "canvas"'))), this.options = i, this.animate = void 0 === i.animate || i.animate;
          }
          return e && (r.__proto__ = e), r.prototype = Object.create(e && e.prototype), r.prototype.constructor = r, r.prototype.load = function () {
            this._loaded = !0, this.canvas || (this.canvas = this.options.canvas instanceof t.window.HTMLCanvasElement ? this.options.canvas : t.window.document.getElementById(this.options.canvas)), this.width = this.canvas.width, this.height = this.canvas.height, this._hasInvalidDimensions() ? this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))) : (this.play = function () {
              this._playing = !0, this.map.triggerRepaint();
            }, this.pause = function () {
              this._playing && (this.prepare(), this._playing = !1);
            }, this._finishLoading());
          }, r.prototype.getCanvas = function () {
            return this.canvas
          }, r.prototype.onAdd = function (t) {
            this.map = t, this.load(), this.canvas && this.animate && this.play();
          }, r.prototype.onRemove = function () {
            this.pause();
          }, r.prototype.prepare = function () {
            var e = !1;
            if (this.canvas.width !== this.width && (this.width = this.canvas.width, e = !0), this.canvas.height !== this.height && (this.height = this.canvas.height, e = !0), !this._hasInvalidDimensions() && 0 !== Object.keys(this.tiles).length) {
              var r = this.map.painter.context,
                i = r.gl;
              for (var n in this.boundsBuffer || (this.boundsBuffer = r.createVertexBuffer(this._boundsArray, t.rasterBoundsAttributes.members)), this.boundsSegments || (this.boundsSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2)), this.texture ? (e || this._playing) && this.texture.update(this.canvas, {
                  premultiply: !0
                }) : this.texture = new t.Texture(r, this.canvas, i.RGBA, {
                  premultiply: !0
                }), this.tiles) {
                var o = this.tiles[n];
                "loaded" !== o.state && (o.state = "loaded", o.texture = this.texture);
              }
            }
          }, r.prototype.serialize = function () {
            return {
              type: "canvas",
              coordinates: this.coordinates
            }
          }, r.prototype.hasTransition = function () {
            return this._playing
          }, r.prototype._hasInvalidDimensions = function () {
            for (var t = 0, e = [this.canvas.width, this.canvas.height]; t < e.length; t += 1) {
              var r = e[t];
              if (isNaN(r) || r <= 0) return !0
            }
            return !1
          }, r
        }(V),
        j = {
          vector: F,
          raster: k,
          "raster-dem": B,
          geojson: z,
          video: U,
          image: V,
          canvas: q
        },
        G = function (e, r, i, n) {
          var o = new j[r.type](e, r, i, n);
          if (o.id !== e) throw new Error("Expected Source id to be " + e + " instead of " + o.id);
          return t.bindAll(["load", "abort", "unload", "serialize", "prepare"], o), o
        };
  
      function X(t, e, r, i, n) {
        var o = function (t, e, r) {
            if (t)
              for (var i = 0, n = t; i < n.length; i += 1) {
                var o = e[n[i]];
                if (o && o.source === r && "fill-extrusion" === o.type) return !0
              } else
                for (var s in e) {
                  var a = e[s];
                  if (a.source === r && "fill-extrusion" === a.type) return !0
                }
            return !1
          }(i && i.layers, e, t.id),
          s = n.maxPitchScaleFactor(),
          a = t.tilesIn(r, s, o);
        a.sort(Z);
        for (var u = [], c = 0, h = a; c < h.length; c += 1) {
          var l = h[c];
          u.push({
            wrappedTileID: l.tileID.wrapped().key,
            queryResults: l.tile.queryRenderedFeatures(e, t._state, l.queryGeometry, l.cameraQueryGeometry, l.scale, i, n, s, t.transform.calculatePosMatrix(l.tileID.toUnwrapped()))
          });
        }
        var p = function (t) {
          for (var e = {}, r = {}, i = 0, n = t; i < n.length; i += 1) {
            var o = n[i],
              s = o.queryResults,
              a = o.wrappedTileID,
              u = r[a] = r[a] || {};
            for (var c in s)
              for (var h = s[c], l = u[c] = u[c] || {}, p = e[c] = e[c] || [], f = 0, d = h; f < d.length; f += 1) {
                var g = d[f];
                l[g.featureIndex] || (l[g.featureIndex] = !0, p.push(g));
              }
          }
          return e
        }(u);
        for (var f in p) p[f].forEach(function (e) {
          var r = e.feature,
            i = t.getFeatureState(r.layer["source-layer"], r.id);
          r.source = r.layer.source, r.layer["source-layer"] && (r.sourceLayer = r.layer["source-layer"]), r.state = i;
        });
        return p
      }
  
      function Z(t, e) {
        var r = t.tileID,
          i = e.tileID;
        return r.overscaledZ - i.overscaledZ || r.canonical.y - i.canonical.y || r.wrap - i.wrap || r.canonical.x - i.canonical.x
      }
      var Y = function (t, e) {
        this.max = t, this.onRemove = e, this.reset();
      };
      Y.prototype.reset = function () {
        for (var t in this.data)
          for (var e = 0, r = this.data[t]; e < r.length; e += 1) {
            var i = r[e];
            i.timeout && clearTimeout(i.timeout), this.onRemove(i.value);
          }
        return this.data = {}, this.order = [], this
      }, Y.prototype.add = function (t, e, r) {
        var i = this,
          n = t.wrapped().key;
        void 0 === this.data[n] && (this.data[n] = []);
        var o = {
          value: e,
          timeout: void 0
        };
        if (void 0 !== r && (o.timeout = setTimeout(function () {
            i.remove(t, o);
          }, r)), this.data[n].push(o), this.order.push(n), this.order.length > this.max) {
          var s = this._getAndRemoveByKey(this.order[0]);
          s && this.onRemove(s);
        }
        return this
      }, Y.prototype.has = function (t) {
        return t.wrapped().key in this.data
      }, Y.prototype.getAndRemove = function (t) {
        return this.has(t) ? this._getAndRemoveByKey(t.wrapped().key) : null
      }, Y.prototype._getAndRemoveByKey = function (t) {
        var e = this.data[t].shift();
        return e.timeout && clearTimeout(e.timeout), 0 === this.data[t].length && delete this.data[t], this.order.splice(this.order.indexOf(t), 1), e.value
      }, Y.prototype.get = function (t) {
        return this.has(t) ? this.data[t.wrapped().key][0].value : null
      }, Y.prototype.remove = function (t, e) {
        if (!this.has(t)) return this;
        var r = t.wrapped().key,
          i = void 0 === e ? 0 : this.data[r].indexOf(e),
          n = this.data[r][i];
        return this.data[r].splice(i, 1), n.timeout && clearTimeout(n.timeout), 0 === this.data[r].length && delete this.data[r], this.onRemove(n.value), this.order.splice(this.order.indexOf(r), 1), this
      }, Y.prototype.setMaxSize = function (t) {
        for (this.max = t; this.order.length > this.max;) {
          var e = this._getAndRemoveByKey(this.order[0]);
          e && this.onRemove(e);
        }
        return this
      };
      var W = function (t, e, r) {
        this.context = t;
        var i = t.gl;
        this.buffer = i.createBuffer(), this.dynamicDraw = Boolean(r), this.context.unbindVAO(), t.bindElementBuffer.set(this.buffer), i.bufferData(i.ELEMENT_ARRAY_BUFFER, e.arrayBuffer, this.dynamicDraw ? i.DYNAMIC_DRAW : i.STATIC_DRAW), this.dynamicDraw || delete e.arrayBuffer;
      };
      W.prototype.bind = function () {
        this.context.bindElementBuffer.set(this.buffer);
      }, W.prototype.updateData = function (t) {
        var e = this.context.gl;
        this.context.unbindVAO(), this.bind(), e.bufferSubData(e.ELEMENT_ARRAY_BUFFER, 0, t.arrayBuffer);
      }, W.prototype.destroy = function () {
        var t = this.context.gl;
        this.buffer && (t.deleteBuffer(this.buffer), delete this.buffer);
      };
      var H = {
          Int8: "BYTE",
          Uint8: "UNSIGNED_BYTE",
          Int16: "SHORT",
          Uint16: "UNSIGNED_SHORT",
          Int32: "INT",
          Uint32: "UNSIGNED_INT",
          Float32: "FLOAT"
        },
        K = function (t, e, r, i) {
          this.length = e.length, this.attributes = r, this.itemSize = e.bytesPerElement, this.dynamicDraw = i, this.context = t;
          var n = t.gl;
          this.buffer = n.createBuffer(), t.bindVertexBuffer.set(this.buffer), n.bufferData(n.ARRAY_BUFFER, e.arrayBuffer, this.dynamicDraw ? n.DYNAMIC_DRAW : n.STATIC_DRAW), this.dynamicDraw || delete e.arrayBuffer;
        };
      K.prototype.bind = function () {
        this.context.bindVertexBuffer.set(this.buffer);
      }, K.prototype.updateData = function (t) {
        var e = this.context.gl;
        this.bind(), e.bufferSubData(e.ARRAY_BUFFER, 0, t.arrayBuffer);
      }, K.prototype.enableAttributes = function (t, e) {
        for (var r = 0; r < this.attributes.length; r++) {
          var i = this.attributes[r],
            n = e.attributes[i.name];
          void 0 !== n && t.enableVertexAttribArray(n);
        }
      }, K.prototype.setVertexAttribPointers = function (t, e, r) {
        for (var i = 0; i < this.attributes.length; i++) {
          var n = this.attributes[i],
            o = e.attributes[n.name];
          void 0 !== o && t.vertexAttribPointer(o, n.components, t[H[n.type]], !1, this.itemSize, n.offset + this.itemSize * (r || 0));
        }
      }, K.prototype.destroy = function () {
        var t = this.context.gl;
        this.buffer && (t.deleteBuffer(this.buffer), delete this.buffer);
      };
      var J = function (t) {
        this.gl = t.gl, this.default = this.getDefault(), this.current = this.default, this.dirty = !1;
      };
      J.prototype.get = function () {
        return this.current
      }, J.prototype.set = function (t) {}, J.prototype.getDefault = function () {
        return this.default
      }, J.prototype.setDefault = function () {
        this.set(this.default);
      };
      var Q = function (e) {
          function r() {
            e.apply(this, arguments);
          }
          return e && (r.__proto__ = e), r.prototype = Object.create(e && e.prototype), r.prototype.constructor = r, r.prototype.getDefault = function () {
            return t.Color.transparent
          }, r.prototype.set = function (t) {
            var e = this.current;
            (t.r !== e.r || t.g !== e.g || t.b !== e.b || t.a !== e.a || this.dirty) && (this.gl.clearColor(t.r, t.g, t.b, t.a), this.current = t, this.dirty = !1);
          }, r
        }(J),
        $ = function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getDefault = function () {
            return 1
          }, e.prototype.set = function (t) {
            (t !== this.current || this.dirty) && (this.gl.clearDepth(t), this.current = t, this.dirty = !1);
          }, e
        }(J),
        tt = function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getDefault = function () {
            return 0
          }, e.prototype.set = function (t) {
            (t !== this.current || this.dirty) && (this.gl.clearStencil(t), this.current = t, this.dirty = !1);
          }, e
        }(J),
        et = function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getDefault = function () {
            return [!0, !0, !0, !0]
          }, e.prototype.set = function (t) {
            var e = this.current;
            (t[0] !== e[0] || t[1] !== e[1] || t[2] !== e[2] || t[3] !== e[3] || this.dirty) && (this.gl.colorMask(t[0], t[1], t[2], t[3]), this.current = t, this.dirty = !1);
          }, e
        }(J),
        rt = function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getDefault = function () {
            return !0
          }, e.prototype.set = function (t) {
            (t !== this.current || this.dirty) && (this.gl.depthMask(t), this.current = t, this.dirty = !1);
          }, e
        }(J),
        it = function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getDefault = function () {
            return 255
          }, e.prototype.set = function (t) {
            (t !== this.current || this.dirty) && (this.gl.stencilMask(t), this.current = t, this.dirty = !1);
          }, e
        }(J),
        nt = function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getDefault = function () {
            return {
              func: this.gl.ALWAYS,
              ref: 0,
              mask: 255
            }
          }, e.prototype.set = function (t) {
            var e = this.current;
            (t.func !== e.func || t.ref !== e.ref || t.mask !== e.mask || this.dirty) && (this.gl.stencilFunc(t.func, t.ref, t.mask), this.current = t, this.dirty = !1);
          }, e
        }(J),
        ot = function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getDefault = function () {
            var t = this.gl;
            return [t.KEEP, t.KEEP, t.KEEP]
          }, e.prototype.set = function (t) {
            var e = this.current;
            (t[0] !== e[0] || t[1] !== e[1] || t[2] !== e[2] || this.dirty) && (this.gl.stencilOp(t[0], t[1], t[2]), this.current = t, this.dirty = !1);
          }, e
        }(J),
        st = function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getDefault = function () {
            return !1
          }, e.prototype.set = function (t) {
            if (t !== this.current || this.dirty) {
              var e = this.gl;
              t ? e.enable(e.STENCIL_TEST) : e.disable(e.STENCIL_TEST), this.current = t, this.dirty = !1;
            }
          }, e
        }(J),
        at = function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getDefault = function () {
            return [0, 1]
          }, e.prototype.set = function (t) {
            var e = this.current;
            (t[0] !== e[0] || t[1] !== e[1] || this.dirty) && (this.gl.depthRange(t[0], t[1]), this.current = t, this.dirty = !1);
          }, e
        }(J),
        ut = function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getDefault = function () {
            return !1
          }, e.prototype.set = function (t) {
            if (t !== this.current || this.dirty) {
              var e = this.gl;
              t ? e.enable(e.DEPTH_TEST) : e.disable(e.DEPTH_TEST), this.current = t, this.dirty = !1;
            }
          }, e
        }(J),
        ct = function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getDefault = function () {
            return this.gl.LESS
          }, e.prototype.set = function (t) {
            (t !== this.current || this.dirty) && (this.gl.depthFunc(t), this.current = t, this.dirty = !1);
          }, e
        }(J),
        ht = function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getDefault = function () {
            return !1
          }, e.prototype.set = function (t) {
            if (t !== this.current || this.dirty) {
              var e = this.gl;
              t ? e.enable(e.BLEND) : e.disable(e.BLEND), this.current = t, this.dirty = !1;
            }
          }, e
        }(J),
        lt = function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getDefault = function () {
            var t = this.gl;
            return [t.ONE, t.ZERO]
          }, e.prototype.set = function (t) {
            var e = this.current;
            (t[0] !== e[0] || t[1] !== e[1] || this.dirty) && (this.gl.blendFunc(t[0], t[1]), this.current = t, this.dirty = !1);
          }, e
        }(J),
        pt = function (e) {
          function r() {
            e.apply(this, arguments);
          }
          return e && (r.__proto__ = e), r.prototype = Object.create(e && e.prototype), r.prototype.constructor = r, r.prototype.getDefault = function () {
            return t.Color.transparent
          }, r.prototype.set = function (t) {
            var e = this.current;
            (t.r !== e.r || t.g !== e.g || t.b !== e.b || t.a !== e.a || this.dirty) && (this.gl.blendColor(t.r, t.g, t.b, t.a), this.current = t, this.dirty = !1);
          }, r
        }(J),
        ft = function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getDefault = function () {
            return this.gl.FUNC_ADD
          }, e.prototype.set = function (t) {
            (t !== this.current || this.dirty) && (this.gl.blendEquation(t), this.current = t, this.dirty = !1);
          }, e
        }(J),
        dt = function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getDefault = function () {
            return !1
          }, e.prototype.set = function (t) {
            if (t !== this.current || this.dirty) {
              var e = this.gl;
              t ? e.enable(e.CULL_FACE) : e.disable(e.CULL_FACE), this.current = t, this.dirty = !1;
            }
          }, e
        }(J),
        gt = function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getDefault = function () {
            return this.gl.BACK
          }, e.prototype.set = function (t) {
            (t !== this.current || this.dirty) && (this.gl.cullFace(t), this.current = t, this.dirty = !1);
          }, e
        }(J),
        _t = function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getDefault = function () {
            return this.gl.CCW
          }, e.prototype.set = function (t) {
            (t !== this.current || this.dirty) && (this.gl.frontFace(t), this.current = t, this.dirty = !1);
          }, e
        }(J),
        yt = function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getDefault = function () {
            return null
          }, e.prototype.set = function (t) {
            (t !== this.current || this.dirty) && (this.gl.useProgram(t), this.current = t, this.dirty = !1);
          }, e
        }(J),
        mt = function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getDefault = function () {
            return this.gl.TEXTURE0
          }, e.prototype.set = function (t) {
            (t !== this.current || this.dirty) && (this.gl.activeTexture(t), this.current = t, this.dirty = !1);
          }, e
        }(J),
        vt = function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getDefault = function () {
            var t = this.gl;
            return [0, 0, t.drawingBufferWidth, t.drawingBufferHeight]
          }, e.prototype.set = function (t) {
            var e = this.current;
            (t[0] !== e[0] || t[1] !== e[1] || t[2] !== e[2] || t[3] !== e[3] || this.dirty) && (this.gl.viewport(t[0], t[1], t[2], t[3]), this.current = t, this.dirty = !1);
          }, e
        }(J),
        xt = function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getDefault = function () {
            return null
          }, e.prototype.set = function (t) {
            if (t !== this.current || this.dirty) {
              var e = this.gl;
              e.bindFramebuffer(e.FRAMEBUFFER, t), this.current = t, this.dirty = !1;
            }
          }, e
        }(J),
        wt = function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getDefault = function () {
            return null
          }, e.prototype.set = function (t) {
            if (t !== this.current || this.dirty) {
              var e = this.gl;
              e.bindRenderbuffer(e.RENDERBUFFER, t), this.current = t, this.dirty = !1;
            }
          }, e
        }(J),
        bt = function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getDefault = function () {
            return null
          }, e.prototype.set = function (t) {
            if (t !== this.current || this.dirty) {
              var e = this.gl;
              e.bindTexture(e.TEXTURE_2D, t), this.current = t, this.dirty = !1;
            }
          }, e
        }(J),
        Et = function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getDefault = function () {
            return null
          }, e.prototype.set = function (t) {
            if (t !== this.current || this.dirty) {
              var e = this.gl;
              e.bindBuffer(e.ARRAY_BUFFER, t), this.current = t, this.dirty = !1;
            }
          }, e
        }(J),
        Lt = function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getDefault = function () {
            return null
          }, e.prototype.set = function (t) {
            var e = this.gl;
            e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, t), this.current = t, this.dirty = !1;
          }, e
        }(J),
        St = function (t) {
          function e(e) {
            t.call(this, e), this.vao = e.extVertexArrayObject;
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getDefault = function () {
            return null
          }, e.prototype.set = function (t) {
            this.vao && (t !== this.current || this.dirty) && (this.vao.bindVertexArrayOES(t), this.current = t, this.dirty = !1);
          }, e
        }(J),
        Ct = function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getDefault = function () {
            return 4
          }, e.prototype.set = function (t) {
            if (t !== this.current || this.dirty) {
              var e = this.gl;
              e.pixelStorei(e.UNPACK_ALIGNMENT, t), this.current = t, this.dirty = !1;
            }
          }, e
        }(J),
        It = function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getDefault = function () {
            return !1
          }, e.prototype.set = function (t) {
            if (t !== this.current || this.dirty) {
              var e = this.gl;
              e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL, t), this.current = t, this.dirty = !1;
            }
          }, e
        }(J),
        Mt = function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getDefault = function () {
            return !1
          }, e.prototype.set = function (t) {
            if (t !== this.current || this.dirty) {
              var e = this.gl;
              e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL, t), this.current = t, this.dirty = !1;
            }
          }, e
        }(J),
        Tt = function (t) {
          function e(e, r) {
            t.call(this, e), this.context = e, this.parent = r;
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getDefault = function () {
            return null
          }, e
        }(J),
        Pt = function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.setDirty = function () {
            this.dirty = !0;
          }, e.prototype.set = function (t) {
            if (t !== this.current || this.dirty) {
              this.context.bindFramebuffer.set(this.parent);
              var e = this.gl;
              e.framebufferTexture2D(e.FRAMEBUFFER, e.COLOR_ATTACHMENT0, e.TEXTURE_2D, t, 0), this.current = t, this.dirty = !1;
            }
          }, e
        }(Tt),
        Dt = function (t) {
          function e() {
            t.apply(this, arguments);
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.set = function (t) {
            if (t !== this.current || this.dirty) {
              this.context.bindFramebuffer.set(this.parent);
              var e = this.gl;
              e.framebufferRenderbuffer(e.FRAMEBUFFER, e.DEPTH_ATTACHMENT, e.RENDERBUFFER, t), this.current = t, this.dirty = !1;
            }
          }, e
        }(Tt),
        Nt = function (t, e, r) {
          this.context = t, this.width = e, this.height = r;
          var i = t.gl,
            n = this.framebuffer = i.createFramebuffer();
          this.colorAttachment = new Pt(t, n), this.depthAttachment = new Dt(t, n);
        };
      Nt.prototype.destroy = function () {
        var t = this.context.gl,
          e = this.colorAttachment.get();
        e && t.deleteTexture(e);
        var r = this.depthAttachment.get();
        r && t.deleteRenderbuffer(r), t.deleteFramebuffer(this.framebuffer);
      };
      var Rt = function (t, e, r) {
        this.func = t, this.mask = e, this.range = r;
      };
      Rt.ReadOnly = !1, Rt.ReadWrite = !0, Rt.disabled = new Rt(519, Rt.ReadOnly, [0, 1]);
      var Ot = function (t, e, r, i, n, o) {
        this.test = t, this.ref = e, this.mask = r, this.fail = i, this.depthFail = n, this.pass = o;
      };
      Ot.disabled = new Ot({
        func: 519,
        mask: 0
      }, 0, 0, 7680, 7680, 7680);
      var At = function (t, e, r) {
        this.blendFunction = t, this.blendColor = e, this.mask = r;
      };
      At.Replace = [1, 0], At.disabled = new At(At.Replace, t.Color.transparent, [!1, !1, !1, !1]), At.unblended = new At(At.Replace, t.Color.transparent, [!0, !0, !0, !0]), At.alphaBlended = new At([1, 771], t.Color.transparent, [!0, !0, !0, !0]);
      var Ft = function (t, e, r) {
        this.enable = t, this.mode = e, this.frontFace = r;
      };
      Ft.disabled = new Ft(!1, 1029, 2305), Ft.backCCW = new Ft(!0, 1029, 2305);
      var kt = function (t) {
        this.gl = t, this.extVertexArrayObject = this.gl.getExtension("OES_vertex_array_object"), this.clearColor = new Q(this), this.clearDepth = new $(this), this.clearStencil = new tt(this), this.colorMask = new et(this), this.depthMask = new rt(this), this.stencilMask = new it(this), this.stencilFunc = new nt(this), this.stencilOp = new ot(this), this.stencilTest = new st(this), this.depthRange = new at(this), this.depthTest = new ut(this), this.depthFunc = new ct(this), this.blend = new ht(this), this.blendFunc = new lt(this), this.blendColor = new pt(this), this.blendEquation = new ft(this), this.cullFace = new dt(this), this.cullFaceSide = new gt(this), this.frontFace = new _t(this), this.program = new yt(this), this.activeTexture = new mt(this), this.viewport = new vt(this), this.bindFramebuffer = new xt(this), this.bindRenderbuffer = new wt(this), this.bindTexture = new bt(this), this.bindVertexBuffer = new Et(this), this.bindElementBuffer = new Lt(this), this.bindVertexArrayOES = this.extVertexArrayObject && new St(this), this.pixelStoreUnpack = new Ct(this), this.pixelStoreUnpackPremultiplyAlpha = new It(this), this.pixelStoreUnpackFlipY = new Mt(this), this.extTextureFilterAnisotropic = t.getExtension("EXT_texture_filter_anisotropic") || t.getExtension("MOZ_EXT_texture_filter_anisotropic") || t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"), this.extTextureFilterAnisotropic && (this.extTextureFilterAnisotropicMax = t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)), this.extTextureHalfFloat = t.getExtension("OES_texture_half_float"), this.extTextureHalfFloat && t.getExtension("OES_texture_half_float_linear");
      };
      kt.prototype.setDefault = function () {
        this.unbindVAO(), this.clearColor.setDefault(), this.clearDepth.setDefault(), this.clearStencil.setDefault(), this.colorMask.setDefault(), this.depthMask.setDefault(), this.stencilMask.setDefault(), this.stencilFunc.setDefault(), this.stencilOp.setDefault(), this.stencilTest.setDefault(), this.depthRange.setDefault(), this.depthTest.setDefault(), this.depthFunc.setDefault(), this.blend.setDefault(), this.blendFunc.setDefault(), this.blendColor.setDefault(), this.blendEquation.setDefault(), this.cullFace.setDefault(), this.cullFaceSide.setDefault(), this.frontFace.setDefault(), this.program.setDefault(), this.activeTexture.setDefault(), this.bindFramebuffer.setDefault(), this.pixelStoreUnpack.setDefault(), this.pixelStoreUnpackPremultiplyAlpha.setDefault(), this.pixelStoreUnpackFlipY.setDefault();
      }, kt.prototype.setDirty = function () {
        this.clearColor.dirty = !0, this.clearDepth.dirty = !0, this.clearStencil.dirty = !0, this.colorMask.dirty = !0, this.depthMask.dirty = !0, this.stencilMask.dirty = !0, this.stencilFunc.dirty = !0, this.stencilOp.dirty = !0, this.stencilTest.dirty = !0, this.depthRange.dirty = !0, this.depthTest.dirty = !0, this.depthFunc.dirty = !0, this.blend.dirty = !0, this.blendFunc.dirty = !0, this.blendColor.dirty = !0, this.blendEquation.dirty = !0, this.cullFace.dirty = !0, this.cullFaceSide.dirty = !0, this.frontFace.dirty = !0, this.program.dirty = !0, this.activeTexture.dirty = !0, this.viewport.dirty = !0, this.bindFramebuffer.dirty = !0, this.bindRenderbuffer.dirty = !0, this.bindTexture.dirty = !0, this.bindVertexBuffer.dirty = !0, this.bindElementBuffer.dirty = !0, this.extVertexArrayObject && (this.bindVertexArrayOES.dirty = !0), this.pixelStoreUnpack.dirty = !0, this.pixelStoreUnpackPremultiplyAlpha.dirty = !0, this.pixelStoreUnpackFlipY.dirty = !0;
      }, kt.prototype.createIndexBuffer = function (t, e) {
        return new W(this, t, e)
      }, kt.prototype.createVertexBuffer = function (t, e, r) {
        return new K(this, t, e, r)
      }, kt.prototype.createRenderbuffer = function (t, e, r) {
        var i = this.gl,
          n = i.createRenderbuffer();
        return this.bindRenderbuffer.set(n), i.renderbufferStorage(i.RENDERBUFFER, t, e, r), this.bindRenderbuffer.set(null), n
      }, kt.prototype.createFramebuffer = function (t, e) {
        return new Nt(this, t, e)
      }, kt.prototype.clear = function (t) {
        var e = t.color,
          r = t.depth,
          i = this.gl,
          n = 0;
        e && (n |= i.COLOR_BUFFER_BIT, this.clearColor.set(e), this.colorMask.set([!0, !0, !0, !0])), void 0 !== r && (n |= i.DEPTH_BUFFER_BIT, this.depthRange.set([0, 1]), this.clearDepth.set(r), this.depthMask.set(!0)), i.clear(n);
      }, kt.prototype.setCullFace = function (t) {
        !1 === t.enable ? this.cullFace.set(!1) : (this.cullFace.set(!0), this.cullFaceSide.set(t.mode), this.frontFace.set(t.frontFace));
      }, kt.prototype.setDepthMode = function (t) {
        t.func !== this.gl.ALWAYS || t.mask ? (this.depthTest.set(!0), this.depthFunc.set(t.func), this.depthMask.set(t.mask), this.depthRange.set(t.range)) : this.depthTest.set(!1);
      }, kt.prototype.setStencilMode = function (t) {
        t.test.func !== this.gl.ALWAYS || t.mask ? (this.stencilTest.set(!0), this.stencilMask.set(t.mask), this.stencilOp.set([t.fail, t.depthFail, t.pass]), this.stencilFunc.set({
          func: t.test.func,
          ref: t.ref,
          mask: t.test.mask
        })) : this.stencilTest.set(!1);
      }, kt.prototype.setColorMode = function (e) {
        t.deepEqual(e.blendFunction, At.Replace) ? this.blend.set(!1) : (this.blend.set(!0), this.blendFunc.set(e.blendFunction), this.blendColor.set(e.blendColor)), this.colorMask.set(e.mask);
      }, kt.prototype.unbindVAO = function () {
        this.extVertexArrayObject && this.bindVertexArrayOES.set(null);
      };
      var Bt = function (e) {
        function r(r, i, n) {
          var o = this;
          e.call(this), this.id = r, this.dispatcher = n, this.on("data", function (t) {
            "source" === t.dataType && "metadata" === t.sourceDataType && (o._sourceLoaded = !0), o._sourceLoaded && !o._paused && "source" === t.dataType && "content" === t.sourceDataType && (o.reload(), o.transform && o.update(o.transform));
          }), this.on("error", function () {
            o._sourceErrored = !0;
          }), this._source = G(r, i, n, this), this._tiles = {}, this._cache = new Y(0, this._unloadTile.bind(this)), this._timers = {}, this._cacheTimers = {}, this._maxTileCacheSize = null, this._coveredTiles = {}, this._state = new t.SourceFeatureState;
        }
        return e && (r.__proto__ = e), r.prototype = Object.create(e && e.prototype), r.prototype.constructor = r, r.prototype.onAdd = function (t) {
          this.map = t, this._maxTileCacheSize = t ? t._maxTileCacheSize : null, this._source && this._source.onAdd && this._source.onAdd(t);
        }, r.prototype.onRemove = function (t) {
          this._source && this._source.onRemove && this._source.onRemove(t);
        }, r.prototype.loaded = function () {
          if (this._sourceErrored) return !0;
          if (!this._sourceLoaded) return !1;
          if (!this._source.loaded()) return !1;
          for (var t in this._tiles) {
            var e = this._tiles[t];
            if ("loaded" !== e.state && "errored" !== e.state) return !1
          }
          return !0
        }, r.prototype.getSource = function () {
          return this._source
        }, r.prototype.pause = function () {
          this._paused = !0;
        }, r.prototype.resume = function () {
          if (this._paused) {
            var t = this._shouldReloadOnResume;
            this._paused = !1, this._shouldReloadOnResume = !1, t && this.reload(), this.transform && this.update(this.transform);
          }
        }, r.prototype._loadTile = function (t, e) {
          return this._source.loadTile(t, e)
        }, r.prototype._unloadTile = function (t) {
          if (this._source.unloadTile) return this._source.unloadTile(t, function () {})
        }, r.prototype._abortTile = function (t) {
          if (this._source.abortTile) return this._source.abortTile(t, function () {})
        }, r.prototype.serialize = function () {
          return this._source.serialize()
        }, r.prototype.prepare = function (t) {
          for (var e in this._source.prepare && this._source.prepare(), this._state.coalesceChanges(this._tiles, this.map ? this.map.painter : null), this._tiles) {
            var r = this._tiles[e];
            r.upload(t), r.prepare(this.map.style.imageManager);
          }
        }, r.prototype.getIds = function () {
          return Object.keys(this._tiles).map(Number).sort(zt)
        }, r.prototype.getRenderableIds = function (e) {
          var r = this,
            i = [];
          for (var n in this._tiles) this._isIdRenderable(+n, e) && i.push(+n);
          return e ? i.sort(function (e, i) {
            var n = r._tiles[e].tileID,
              o = r._tiles[i].tileID,
              s = new t.Point(n.canonical.x, n.canonical.y)._rotate(r.transform.angle),
              a = new t.Point(o.canonical.x, o.canonical.y)._rotate(r.transform.angle);
            return n.overscaledZ - o.overscaledZ || a.y - s.y || a.x - s.x
          }) : i.sort(zt)
        }, r.prototype.hasRenderableParent = function (t) {
          var e = this.findLoadedParent(t, 0);
          return !!e && this._isIdRenderable(e.tileID.key)
        }, r.prototype._isIdRenderable = function (t, e) {
          return this._tiles[t] && this._tiles[t].hasData() && !this._coveredTiles[t] && (e || !this._tiles[t].holdingForFade())
        }, r.prototype.reload = function () {
          if (this._paused) this._shouldReloadOnResume = !0;
          else
            for (var t in this._cache.reset(), this._tiles) "errored" !== this._tiles[t].state && this._reloadTile(t, "reloading");
        }, r.prototype._reloadTile = function (t, e) {
          var r = this._tiles[t];
          r && ("loading" !== r.state && (r.state = e), this._loadTile(r, this._tileLoaded.bind(this, r, t, e)));
        }, r.prototype._tileLoaded = function (e, r, i, n) {
          if (n) return e.state = "errored", void(404 !== n.status ? this._source.fire(new t.ErrorEvent(n, {
            tile: e
          })) : this.update(this.transform));
          e.timeAdded = t.browser.now(), "expired" === i && (e.refreshedUponExpiration = !0), this._setTileReloadTimer(r, e), "raster-dem" === this.getSource().type && e.dem && this._backfillDEM(e), this._state.initializeTileState(e, this.map ? this.map.painter : null), this._source.fire(new t.Event("data", {
            dataType: "source",
            tile: e,
            coord: e.tileID
          }));
        }, r.prototype._backfillDEM = function (t) {
          for (var e = this.getRenderableIds(), r = 0; r < e.length; r++) {
            var i = e[r];
            if (t.neighboringTiles && t.neighboringTiles[i]) {
              var n = this.getTileByID(i);
              o(t, n), o(n, t);
            }
          }
  
          function o(t, e) {
            t.needsHillshadePrepare = !0;
            var r = e.tileID.canonical.x - t.tileID.canonical.x,
              i = e.tileID.canonical.y - t.tileID.canonical.y,
              n = Math.pow(2, t.tileID.canonical.z),
              o = e.tileID.key;
            0 === r && 0 === i || Math.abs(i) > 1 || (Math.abs(r) > 1 && (1 === Math.abs(r + n) ? r += n : 1 === Math.abs(r - n) && (r -= n)), e.dem && t.dem && (t.dem.backfillBorder(e.dem, r, i), t.neighboringTiles && t.neighboringTiles[o] && (t.neighboringTiles[o].backfilled = !0)));
          }
        }, r.prototype.getTile = function (t) {
          return this.getTileByID(t.key)
        }, r.prototype.getTileByID = function (t) {
          return this._tiles[t]
        }, r.prototype.getZoom = function (t) {
          return t.zoom + t.scaleZoom(t.tileSize / this._source.tileSize)
        }, r.prototype._retainLoadedChildren = function (t, e, r, i) {
          for (var n in this._tiles) {
            var o = this._tiles[n];
            if (!(i[n] || !o.hasData() || o.tileID.overscaledZ <= e || o.tileID.overscaledZ > r)) {
              for (var s = o.tileID; o && o.tileID.overscaledZ > e + 1;) {
                var a = o.tileID.scaledTo(o.tileID.overscaledZ - 1);
                (o = this._tiles[a.key]) && o.hasData() && (s = a);
              }
              for (var u = s; u.overscaledZ > e;)
                if (t[(u = u.scaledTo(u.overscaledZ - 1)).key]) {
                  i[s.key] = s;
                  break
                }
            }
          }
        }, r.prototype.findLoadedParent = function (t, e) {
          for (var r = t.overscaledZ - 1; r >= e; r--) {
            var i = t.scaledTo(r);
            if (!i) return;
            var n = String(i.key),
              o = this._tiles[n];
            if (o && o.hasData()) return o;
            if (this._cache.has(i)) return this._cache.get(i)
          }
        }, r.prototype.updateCacheSize = function (t) {
          var e = (Math.ceil(t.width / this._source.tileSize) + 1) * (Math.ceil(t.height / this._source.tileSize) + 1),
            r = Math.floor(5 * e),
            i = "number" == typeof this._maxTileCacheSize ? Math.min(this._maxTileCacheSize, r) : r;
          this._cache.setMaxSize(i);
        }, r.prototype.handleWrapJump = function (t) {
          var e = (t - (void 0 === this._prevLng ? t : this._prevLng)) / 360,
            r = Math.round(e);
          if (this._prevLng = t, r) {
            var i = {};
            for (var n in this._tiles) {
              var o = this._tiles[n];
              o.tileID = o.tileID.unwrapTo(o.tileID.wrap + r), i[o.tileID.key] = o;
            }
            for (var s in this._tiles = i, this._timers) clearTimeout(this._timers[s]), delete this._timers[s];
            for (var a in this._tiles) {
              var u = this._tiles[a];
              this._setTileReloadTimer(a, u);
            }
          }
        }, r.prototype.update = function (e) {
          var i = this;
          if (this.transform = e, this._sourceLoaded && !this._paused) {
            var n;
            this.updateCacheSize(e), this.transform.renderWorldCopies && this.handleWrapJump(this.transform.center.lng), this._coveredTiles = {}, this.used ? this._source.tileID ? n = e.getVisibleUnwrappedCoordinates(this._source.tileID).map(function (e) {
              return new t.OverscaledTileID(e.canonical.z, e.wrap, e.canonical.z, e.canonical.x, e.canonical.y)
            }) : (n = e.coveringTiles({
              tileSize: this._source.tileSize,
              minzoom: this._source.minzoom,
              maxzoom: this._source.maxzoom,
              roundZoom: this._source.roundZoom,
              reparseOverscaled: this._source.reparseOverscaled
            }), this._source.hasTile && (n = n.filter(function (t) {
              return i._source.hasTile(t)
            }))) : n = [];
            var o = (this._source.roundZoom ? Math.round : Math.floor)(this.getZoom(e)),
              s = Math.max(o - r.maxOverzooming, this._source.minzoom),
              a = Math.max(o + r.maxUnderzooming, this._source.minzoom),
              u = this._updateRetainedTiles(n, o);
            if (Vt(this._source.type)) {
              for (var c = {}, h = {}, l = 0, p = Object.keys(u); l < p.length; l += 1) {
                var f = p[l],
                  d = u[f],
                  g = this._tiles[f];
                if (g && !(g.fadeEndTime && g.fadeEndTime <= t.browser.now())) {
                  var _ = this.findLoadedParent(d, s);
                  _ && (this._addTile(_.tileID), c[_.tileID.key] = _.tileID), h[f] = d;
                }
              }
              for (var y in this._retainLoadedChildren(h, o, a, u), c) u[y] || (this._coveredTiles[y] = !0, u[y] = c[y]);
            }
            for (var m in u) this._tiles[m].clearFadeHold();
            for (var v = 0, x = t.keysDifference(this._tiles, u); v < x.length; v += 1) {
              var w = x[v],
                b = this._tiles[w];
              b.hasSymbolBuckets && !b.holdingForFade() ? b.setHoldDuration(this.map._fadeDuration) : b.hasSymbolBuckets && !b.symbolFadeFinished() || this._removeTile(w);
            }
          }
        }, r.prototype.releaseSymbolFadeTiles = function () {
          for (var t in this._tiles) this._tiles[t].holdingForFade() && this._removeTile(t);
        }, r.prototype._updateRetainedTiles = function (t, e) {
          for (var i = {}, n = {}, o = Math.max(e - r.maxOverzooming, this._source.minzoom), s = Math.max(e + r.maxUnderzooming, this._source.minzoom), a = {}, u = 0, c = t; u < c.length; u += 1) {
            var h = c[u],
              l = this._addTile(h);
            i[h.key] = h, l.hasData() || e < this._source.maxzoom && (a[h.key] = h);
          }
          this._retainLoadedChildren(a, e, s, i);
          for (var p = 0, f = t; p < f.length; p += 1) {
            var d = f[p],
              g = this._tiles[d.key];
            if (!g.hasData()) {
              if (e + 1 > this._source.maxzoom) {
                var _ = d.children(this._source.maxzoom)[0],
                  y = this.getTile(_);
                if (y && y.hasData()) {
                  i[_.key] = _;
                  continue
                }
              } else {
                var m = d.children(this._source.maxzoom);
                if (i[m[0].key] && i[m[1].key] && i[m[2].key] && i[m[3].key]) continue
              }
              for (var v = g.wasRequested(), x = d.overscaledZ - 1; x >= o; --x) {
                var w = d.scaledTo(x);
                if (n[w.key]) break;
                if (n[w.key] = !0, !(g = this.getTile(w)) && v && (g = this._addTile(w)), g && (i[w.key] = w, v = g.wasRequested(), g.hasData())) break
              }
            }
          }
          return i
        }, r.prototype._addTile = function (e) {
          var r = this._tiles[e.key];
          if (r) return r;
          (r = this._cache.getAndRemove(e)) && (this._setTileReloadTimer(e.key, r), r.tileID = e, this._state.initializeTileState(r, this.map ? this.map.painter : null), this._cacheTimers[e.key] && (clearTimeout(this._cacheTimers[e.key]), delete this._cacheTimers[e.key], this._setTileReloadTimer(e.key, r)));
          var i = Boolean(r);
          return i || (r = new t.Tile(e, this._source.tileSize * e.overscaleFactor()), this._loadTile(r, this._tileLoaded.bind(this, r, e.key, r.state))), r ? (r.uses++, this._tiles[e.key] = r, i || this._source.fire(new t.Event("dataloading", {
            tile: r,
            coord: r.tileID,
            dataType: "source"
          })), r) : null
        }, r.prototype._setTileReloadTimer = function (t, e) {
          var r = this;
          t in this._timers && (clearTimeout(this._timers[t]), delete this._timers[t]);
          var i = e.getExpiryTimeout();
          i && (this._timers[t] = setTimeout(function () {
            r._reloadTile(t, "expired"), delete r._timers[t];
          }, i));
        }, r.prototype._removeTile = function (t) {
          var e = this._tiles[t];
          e && (e.uses--, delete this._tiles[t], this._timers[t] && (clearTimeout(this._timers[t]), delete this._timers[t]), e.uses > 0 || (e.hasData() ? this._cache.add(e.tileID, e, e.getExpiryTimeout()) : (e.aborted = !0, this._abortTile(e), this._unloadTile(e))));
        }, r.prototype.clearTiles = function () {
          for (var t in this._shouldReloadOnResume = !1, this._paused = !1, this._tiles) this._removeTile(t);
          this._cache.reset();
        }, r.prototype.tilesIn = function (e, r, i) {
          var n = this,
            o = [],
            s = this.transform;
          if (!s) return o;
          for (var a = i ? s.getCameraQueryGeometry(e) : e, u = e.map(function (t) {
              return s.pointCoordinate(t)
            }), c = a.map(function (t) {
              return s.pointCoordinate(t)
            }), h = this.getIds(), l = 1 / 0, p = 1 / 0, f = -1 / 0, d = -1 / 0, g = 0, _ = c; g < _.length; g += 1) {
            var y = _[g];
            l = Math.min(l, y.x), p = Math.min(p, y.y), f = Math.max(f, y.x), d = Math.max(d, y.y);
          }
          for (var m = function (e) {
              var i = n._tiles[h[e]];
              if (!i.holdingForFade()) {
                var a = i.tileID,
                  g = Math.pow(2, s.zoom - i.tileID.overscaledZ),
                  _ = r * i.queryPadding * t.EXTENT / i.tileSize / g,
                  y = [a.getTilePoint(new O[t.config.PROJECT_TYPE].MercatorCoordinate(l, p)), a.getTilePoint(new O[t.config.PROJECT_TYPE].MercatorCoordinate(f, d))];
                if (y[0].x - _ < t.EXTENT && y[0].y - _ < t.EXTENT && y[1].x + _ >= 0 && y[1].y + _ >= 0) {
                  var m = u.map(function (t) {
                      return a.getTilePoint(t)
                    }),
                    v = c.map(function (t) {
                      return a.getTilePoint(t)
                    });
                  o.push({
                    tile: i,
                    tileID: a,
                    queryGeometry: m,
                    cameraQueryGeometry: v,
                    scale: g
                  });
                }
              }
            }, v = 0; v < h.length; v++) m(v);
          return o
        }, r.prototype.getVisibleCoordinates = function (t) {
          for (var e = this, r = this.getRenderableIds(t).map(function (t) {
              return e._tiles[t].tileID
            }), i = 0, n = r; i < n.length; i += 1) {
            var o = n[i];
            o.posMatrix = this.transform.calculatePosMatrix(o.toUnwrapped());
          }
          return r
        }, r.prototype.hasTransition = function () {
          if (this._source.hasTransition()) return !0;
          if (Vt(this._source.type))
            for (var e in this._tiles) {
              var r = this._tiles[e];
              if (void 0 !== r.fadeEndTime && r.fadeEndTime >= t.browser.now()) return !0
            }
          return !1
        }, r.prototype.setFeatureState = function (t, e, r) {
          t = t || "_geojsonTileLayer", this._state.updateState(t, e, r);
        }, r.prototype.removeFeatureState = function (t, e, r) {
          t = t || "_geojsonTileLayer", this._state.removeFeatureState(t, e, r);
        }, r.prototype.getFeatureState = function (t, e) {
          return t = t || "_geojsonTileLayer", this._state.getState(t, e)
        }, r
      }(t.Evented);
  
      function zt(t, e) {
        return t % 32 - e % 32 || e - t
      }
  
      function Vt(t) {
        return "raster" === t || "image" === t || "video" === t
      }
  
      function Ut() {
        return new t.window.Worker(Yo.workerUrl)
      }
      Bt.maxOverzooming = 10, Bt.maxUnderzooming = 3;
      var qt = function () {
        this.active = {};
      };
      qt.prototype.acquire = function (t) {
        if (!this.workers)
          for (this.workers = []; this.workers.length < qt.workerCount;) this.workers.push(new Ut);
        return this.active[t] = !0, this.workers.slice()
      }, qt.prototype.release = function (t) {
        delete this.active[t], 0 === Object.keys(this.active).length && (this.workers.forEach(function (t) {
          t.terminate();
        }), this.workers = null);
      };
      var jt, Gt = Math.floor(t.browser.hardwareConcurrency / 2);
  
      function Xt(e, r) {
        var i = {};
        for (var n in e) "ref" !== n && (i[n] = e[n]);
        return t.refProperties.forEach(function (t) {
          t in r && (i[t] = r[t]);
        }), i
      }
  
      function Zt(t) {
        t = t.slice();
        for (var e = Object.create(null), r = 0; r < t.length; r++) e[t[r].id] = t[r];
        for (var i = 0; i < t.length; i++) "ref" in t[i] && (t[i] = Xt(t[i], e[t[i].ref]));
        return t
      }
      qt.workerCount = Math.max(Math.min(Gt, 6), 1);
      var Yt = {
        setStyle: "setStyle",
        addLayer: "addLayer",
        removeLayer: "removeLayer",
        setPaintProperty: "setPaintProperty",
        setLayoutProperty: "setLayoutProperty",
        setFilter: "setFilter",
        addSource: "addSource",
        removeSource: "removeSource",
        setGeoJSONSourceData: "setGeoJSONSourceData",
        setLayerZoomRange: "setLayerZoomRange",
        setLayerProperty: "setLayerProperty",
        setCenter: "setCenter",
        setZoom: "setZoom",
        setBearing: "setBearing",
        setPitch: "setPitch",
        setSprite: "setSprite",
        setGlyphs: "setGlyphs",
        setTransition: "setTransition",
        setLight: "setLight"
      };
  
      function Wt(t, e, r) {
        r.push({
          command: Yt.addSource,
          args: [t, e[t]]
        });
      }
  
      function Ht(t, e, r) {
        e.push({
          command: Yt.removeSource,
          args: [t]
        }), r[t] = !0;
      }
  
      function Kt(t, e, r, i) {
        Ht(t, r, i), Wt(t, e, r);
      }
  
      function Jt(e, r, i) {
        var n;
        for (n in e[i])
          if (e[i].hasOwnProperty(n) && "data" !== n && !t.deepEqual(e[i][n], r[i][n])) return !1;
        for (n in r[i])
          if (r[i].hasOwnProperty(n) && "data" !== n && !t.deepEqual(e[i][n], r[i][n])) return !1;
        return !0
      }
  
      function Qt(e, r, i, n, o, s) {
        var a;
        for (a in r = r || {}, e = e || {}) e.hasOwnProperty(a) && (t.deepEqual(e[a], r[a]) || i.push({
          command: s,
          args: [n, a, r[a], o]
        }));
        for (a in r) r.hasOwnProperty(a) && !e.hasOwnProperty(a) && (t.deepEqual(e[a], r[a]) || i.push({
          command: s,
          args: [n, a, r[a], o]
        }));
      }
  
      function $t(t) {
        return t.id
      }
  
      function te(t, e) {
        return t[e.id] = e, t
      }
  
      function ee(e, r) {
        if (!e) return [{
          command: Yt.setStyle,
          args: [r]
        }];
        var i = [];
        try {
          if (!t.deepEqual(e.version, r.version)) return [{
            command: Yt.setStyle,
            args: [r]
          }];
          t.deepEqual(e.center, r.center) || i.push({
            command: Yt.setCenter,
            args: [r.center]
          }), t.deepEqual(e.zoom, r.zoom) || i.push({
            command: Yt.setZoom,
            args: [r.zoom]
          }), t.deepEqual(e.bearing, r.bearing) || i.push({
            command: Yt.setBearing,
            args: [r.bearing]
          }), t.deepEqual(e.pitch, r.pitch) || i.push({
            command: Yt.setPitch,
            args: [r.pitch]
          }), t.deepEqual(e.sprite, r.sprite) || i.push({
            command: Yt.setSprite,
            args: [r.sprite]
          }), t.deepEqual(e.glyphs, r.glyphs) || i.push({
            command: Yt.setGlyphs,
            args: [r.glyphs]
          }), t.deepEqual(e.transition, r.transition) || i.push({
            command: Yt.setTransition,
            args: [r.transition]
          }), t.deepEqual(e.light, r.light) || i.push({
            command: Yt.setLight,
            args: [r.light]
          });
          var n = {},
            o = [];
          ! function (e, r, i, n) {
            var o;
            for (o in r = r || {}, e = e || {}) e.hasOwnProperty(o) && (r.hasOwnProperty(o) || Ht(o, i, n));
            for (o in r) r.hasOwnProperty(o) && (e.hasOwnProperty(o) ? t.deepEqual(e[o], r[o]) || ("geojson" === e[o].type && "geojson" === r[o].type && Jt(e, r, o) ? i.push({
              command: Yt.setGeoJSONSourceData,
              args: [o, r[o].data]
            }) : Kt(o, r, i, n)) : Wt(o, r, i));
          }(e.sources, r.sources, o, n);
          var s = [];
          e.layers && e.layers.forEach(function (t) {
              n[t.source] ? i.push({
                command: Yt.removeLayer,
                args: [t.id]
              }) : s.push(t);
            }), i = i.concat(o),
            function (e, r, i) {
              r = r || [];
              var n, o, s, a, u, c, h, l = (e = e || []).map($t),
                p = r.map($t),
                f = e.reduce(te, {}),
                d = r.reduce(te, {}),
                g = l.slice(),
                _ = Object.create(null);
              for (n = 0, o = 0; n < l.length; n++) s = l[n], d.hasOwnProperty(s) ? o++ : (i.push({
                command: Yt.removeLayer,
                args: [s]
              }), g.splice(g.indexOf(s, o), 1));
              for (n = 0, o = 0; n < p.length; n++) s = p[p.length - 1 - n], g[g.length - 1 - n] !== s && (f.hasOwnProperty(s) ? (i.push({
                command: Yt.removeLayer,
                args: [s]
              }), g.splice(g.lastIndexOf(s, g.length - o), 1)) : o++, c = g[g.length - n], i.push({
                command: Yt.addLayer,
                args: [d[s], c]
              }), g.splice(g.length - n, 0, s), _[s] = !0);
              for (n = 0; n < p.length; n++)
                if (a = f[s = p[n]], u = d[s], !_[s] && !t.deepEqual(a, u))
                  if (t.deepEqual(a.source, u.source) && t.deepEqual(a["source-layer"], u["source-layer"]) && t.deepEqual(a.type, u.type)) {
                    for (h in Qt(a.layout, u.layout, i, s, null, Yt.setLayoutProperty), Qt(a.paint, u.paint, i, s, null, Yt.setPaintProperty), t.deepEqual(a.filter, u.filter) || i.push({
                        command: Yt.setFilter,
                        args: [s, u.filter]
                      }), t.deepEqual(a.minzoom, u.minzoom) && t.deepEqual(a.maxzoom, u.maxzoom) || i.push({
                        command: Yt.setLayerZoomRange,
                        args: [s, u.minzoom, u.maxzoom]
                      }), a) a.hasOwnProperty(h) && "layout" !== h && "paint" !== h && "filter" !== h && "metadata" !== h && "minzoom" !== h && "maxzoom" !== h && (0 === h.indexOf("paint.") ? Qt(a[h], u[h], i, s, h.slice(6), Yt.setPaintProperty) : t.deepEqual(a[h], u[h]) || i.push({
                      command: Yt.setLayerProperty,
                      args: [s, h, u[h]]
                    }));
                    for (h in u) u.hasOwnProperty(h) && !a.hasOwnProperty(h) && "layout" !== h && "paint" !== h && "filter" !== h && "metadata" !== h && "minzoom" !== h && "maxzoom" !== h && (0 === h.indexOf("paint.") ? Qt(a[h], u[h], i, s, h.slice(6), Yt.setPaintProperty) : t.deepEqual(a[h], u[h]) || i.push({
                      command: Yt.setLayerProperty,
                      args: [s, h, u[h]]
                    }));
                  } else i.push({
                    command: Yt.removeLayer,
                    args: [s]
                  }), c = g[g.lastIndexOf(s) + 1], i.push({
                    command: Yt.addLayer,
                    args: [u, c]
                  });
            }(s, r.layers, i);
        } catch (t) {
          console.warn("Unable to compute style diff:", t), i = [{
            command: Yt.setStyle,
            args: [r]
          }];
        }
        return i
      }
      var re = function (t, e, r) {
        var i = this.boxCells = [],
          n = this.circleCells = [];
        this.xCellCount = Math.ceil(t / r), this.yCellCount = Math.ceil(e / r);
        for (var o = 0; o < this.xCellCount * this.yCellCount; o++) i.push([]), n.push([]);
        this.circleKeys = [], this.boxKeys = [], this.bboxes = [], this.circles = [], this.width = t, this.height = e, this.xScale = this.xCellCount / t, this.yScale = this.yCellCount / e, this.boxUid = 0, this.circleUid = 0;
      };
  
      function ie(e, r, i, n, o) {
        var s = t.create();
        return r ? (t.scale(s, s, [1 / o, 1 / o, 1]), i || t.rotateZ(s, s, n.angle)) : t.multiply(s, n.labelPlaneMatrix, e), s
      }
  
      function ne(e, r, i, n, o) {
        if (r) {
          var s = t.clone(e);
          return t.scale(s, s, [o, o, 1]), i || t.rotateZ(s, s, -n.angle), s
        }
        return n.glCoordMatrix
      }
  
      function oe(e, r) {
        var i = [e.x, e.y, 0, 1];
        ge(i, i, r);
        var n = i[3];
        return {
          point: new t.Point(i[0] / n, i[1] / n),
          signedDistanceFromCamera: n
        }
      }
  
      function se(t, e) {
        var r = t[0] / t[3],
          i = t[1] / t[3];
        return r >= -e[0] && r <= e[0] && i >= -e[1] && i <= e[1]
      }
  
      function ae(e, r, i, n, o, s, a, u) {
        var c = n ? e.textSizeData : e.iconSizeData,
          h = t.evaluateSizeForZoom(c, i.transform.zoom),
          l = [256 / i.width * 2 + 1, 256 / i.height * 2 + 1],
          p = n ? e.text.dynamicLayoutVertexArray : e.icon.dynamicLayoutVertexArray;
        p.clear();
        for (var f = e.lineVertexArray, d = n ? e.text.placedSymbolArray : e.icon.placedSymbolArray, g = i.transform.width / i.transform.height, _ = !1, y = 0; y < d.length; y++) {
          var m = d.get(y);
          if (m.hidden || m.writingMode === t.WritingMode.vertical && !_) de(m.numGlyphs, p);
          else {
            _ = !1;
            var v = [m.anchorX, m.anchorY, 0, 1];
            if (t.transformMat4(v, v, r), se(v, l)) {
              var x = .5 + v[3] / i.transform.cameraToCenterDistance * .5,
                w = t.evaluateSizeForFeature(c, h, m),
                b = a ? w * x : w / x,
                E = new t.Point(m.anchorX, m.anchorY),
                L = oe(E, o).point,
                S = {},
                C = he(m, b, !1, u, r, o, s, e.glyphOffsetArray, f, p, L, E, S, g);
              _ = C.useVertical, (C.notEnoughRoom || _ || C.needsFlipping && he(m, b, !0, u, r, o, s, e.glyphOffsetArray, f, p, L, E, S, g).notEnoughRoom) && de(m.numGlyphs, p);
            } else de(m.numGlyphs, p);
          }
        }
        n ? e.text.dynamicLayoutVertexBuffer.updateData(p) : e.icon.dynamicLayoutVertexBuffer.updateData(p);
      }
  
      function ue(t, e, r, i, n, o, s, a, u, c, h, l) {
        var p = a.glyphStartIndex + a.numGlyphs,
          f = a.lineStartIndex,
          d = a.lineStartIndex + a.lineLength,
          g = e.getoffsetX(a.glyphStartIndex),
          _ = e.getoffsetX(p - 1),
          y = pe(t * g, r, i, n, o, s, a.segment, f, d, u, c, h, l);
        if (!y) return null;
        var m = pe(t * _, r, i, n, o, s, a.segment, f, d, u, c, h, l);
        return m ? {
          first: y,
          last: m
        } : null
      }
  
      function ce(e, r, i, n) {
        if (e === t.WritingMode.horizontal && Math.abs(i.y - r.y) > Math.abs(i.x - r.x) * n) return {
          useVertical: !0
        };
        return (e === t.WritingMode.vertical ? r.y < i.y : r.x > i.x) ? {
          needsFlipping: !0
        } : null
      }
  
      function he(e, r, i, n, o, s, a, u, c, h, l, p, f, d) {
        var g, _ = r / 24,
          y = e.lineOffsetX * _,
          m = e.lineOffsetY * _;
        if (e.numGlyphs > 1) {
          var v = e.glyphStartIndex + e.numGlyphs,
            x = e.lineStartIndex,
            w = e.lineStartIndex + e.lineLength,
            b = ue(_, u, y, m, i, l, p, e, c, s, f, !1);
          if (!b) return {
            notEnoughRoom: !0
          };
          var E = oe(b.first.point, a).point,
            L = oe(b.last.point, a).point;
          if (n && !i) {
            var S = ce(e.writingMode, E, L, d);
            if (S) return S
          }
          g = [b.first];
          for (var C = e.glyphStartIndex + 1; C < v - 1; C++) g.push(pe(_ * u.getoffsetX(C), y, m, i, l, p, e.segment, x, w, c, s, f, !1));
          g.push(b.last);
        } else {
          if (n && !i) {
            var I = oe(p, o).point,
              M = e.lineStartIndex + e.segment + 1,
              T = new t.Point(c.getx(M), c.gety(M)),
              P = oe(T, o),
              D = P.signedDistanceFromCamera > 0 ? P.point : le(p, T, I, 1, o),
              N = ce(e.writingMode, I, D, d);
            if (N) return N
          }
          var R = pe(_ * u.getoffsetX(e.glyphStartIndex), y, m, i, l, p, e.segment, e.lineStartIndex, e.lineStartIndex + e.lineLength, c, s, f, !1);
          if (!R) return {
            notEnoughRoom: !0
          };
          g = [R];
        }
        for (var O = 0, A = g; O < A.length; O += 1) {
          var F = A[O];
          t.addDynamicAttributes(h, F.point, F.angle);
        }
        return {}
      }
  
      function le(t, e, r, i, n) {
        var o = oe(t.add(t.sub(e)._unit()), n).point,
          s = r.sub(o);
        return r.add(s._mult(i / s.mag()))
      }
  
      function pe(e, r, i, n, o, s, a, u, c, h, l, p, f) {
        var d = n ? e - r : e + r,
          g = d > 0 ? 1 : -1,
          _ = 0;
        n && (g *= -1, _ = Math.PI), g < 0 && (_ += Math.PI);
        for (var y = g > 0 ? u + a : u + a + 1, m = y, v = o, x = o, w = 0, b = 0, E = Math.abs(d); w + b <= E;) {
          if ((y += g) < u || y >= c) return null;
          if (x = v, void 0 === (v = p[y])) {
            var L = new t.Point(h.getx(y), h.gety(y)),
              S = oe(L, l);
            if (S.signedDistanceFromCamera > 0) v = p[y] = S.point;
            else {
              var C = y - g;
              v = le(0 === w ? s : new t.Point(h.getx(C), h.gety(C)), L, x, E - w + 1, l);
            }
          }
          w += b, b = x.dist(v);
        }
        var I = (E - w) / b,
          M = v.sub(x),
          T = M.mult(I)._add(x);
        return T._add(M._unit()._perp()._mult(i * g)), {
          point: T,
          angle: _ + Math.atan2(v.y - x.y, v.x - x.x),
          tileDistance: f ? {
            prevTileDistance: y - g === m ? 0 : h.gettileUnitDistanceFromAnchor(y - g),
            lastSegmentViewportDistance: E - w
          } : null
        }
      }
      re.prototype.keysLength = function () {
        return this.boxKeys.length + this.circleKeys.length
      }, re.prototype.insert = function (t, e, r, i, n) {
        this._forEachCell(e, r, i, n, this._insertBoxCell, this.boxUid++), this.boxKeys.push(t), this.bboxes.push(e), this.bboxes.push(r), this.bboxes.push(i), this.bboxes.push(n);
      }, re.prototype.insertCircle = function (t, e, r, i) {
        this._forEachCell(e - i, r - i, e + i, r + i, this._insertCircleCell, this.circleUid++), this.circleKeys.push(t), this.circles.push(e), this.circles.push(r), this.circles.push(i);
      }, re.prototype._insertBoxCell = function (t, e, r, i, n, o) {
        this.boxCells[n].push(o);
      }, re.prototype._insertCircleCell = function (t, e, r, i, n, o) {
        this.circleCells[n].push(o);
      }, re.prototype._query = function (t, e, r, i, n, o) {
        if (r < 0 || t > this.width || i < 0 || e > this.height) return !n && [];
        var s = [];
        if (t <= 0 && e <= 0 && this.width <= r && this.height <= i) {
          if (n) return !0;
          for (var a = 0; a < this.boxKeys.length; a++) s.push({
            key: this.boxKeys[a],
            x1: this.bboxes[4 * a],
            y1: this.bboxes[4 * a + 1],
            x2: this.bboxes[4 * a + 2],
            y2: this.bboxes[4 * a + 3]
          });
          for (var u = 0; u < this.circleKeys.length; u++) {
            var c = this.circles[3 * u],
              h = this.circles[3 * u + 1],
              l = this.circles[3 * u + 2];
            s.push({
              key: this.circleKeys[u],
              x1: c - l,
              y1: h - l,
              x2: c + l,
              y2: h + l
            });
          }
          return o ? s.filter(o) : s
        }
        var p = {
          hitTest: n,
          seenUids: {
            box: {},
            circle: {}
          }
        };
        return this._forEachCell(t, e, r, i, this._queryCell, s, p, o), n ? s.length > 0 : s
      }, re.prototype._queryCircle = function (t, e, r, i, n) {
        var o = t - r,
          s = t + r,
          a = e - r,
          u = e + r;
        if (s < 0 || o > this.width || u < 0 || a > this.height) return !i && [];
        var c = [],
          h = {
            hitTest: i,
            circle: {
              x: t,
              y: e,
              radius: r
            },
            seenUids: {
              box: {},
              circle: {}
            }
          };
        return this._forEachCell(o, a, s, u, this._queryCellCircle, c, h, n), i ? c.length > 0 : c
      }, re.prototype.query = function (t, e, r, i, n) {
        return this._query(t, e, r, i, !1, n)
      }, re.prototype.hitTest = function (t, e, r, i, n) {
        return this._query(t, e, r, i, !0, n)
      }, re.prototype.hitTestCircle = function (t, e, r, i) {
        return this._queryCircle(t, e, r, !0, i)
      }, re.prototype._queryCell = function (t, e, r, i, n, o, s, a) {
        var u = s.seenUids,
          c = this.boxCells[n];
        if (null !== c)
          for (var h = this.bboxes, l = 0, p = c; l < p.length; l += 1) {
            var f = p[l];
            if (!u.box[f]) {
              u.box[f] = !0;
              var d = 4 * f;
              if (t <= h[d + 2] && e <= h[d + 3] && r >= h[d + 0] && i >= h[d + 1] && (!a || a(this.boxKeys[f]))) {
                if (s.hitTest) return o.push(!0), !0;
                o.push({
                  key: this.boxKeys[f],
                  x1: h[d],
                  y1: h[d + 1],
                  x2: h[d + 2],
                  y2: h[d + 3]
                });
              }
            }
          }
        var g = this.circleCells[n];
        if (null !== g)
          for (var _ = this.circles, y = 0, m = g; y < m.length; y += 1) {
            var v = m[y];
            if (!u.circle[v]) {
              u.circle[v] = !0;
              var x = 3 * v;
              if (this._circleAndRectCollide(_[x], _[x + 1], _[x + 2], t, e, r, i) && (!a || a(this.circleKeys[v]))) {
                if (s.hitTest) return o.push(!0), !0;
                var w = _[x],
                  b = _[x + 1],
                  E = _[x + 2];
                o.push({
                  key: this.circleKeys[v],
                  x1: w - E,
                  y1: b - E,
                  x2: w + E,
                  y2: b + E
                });
              }
            }
          }
      }, re.prototype._queryCellCircle = function (t, e, r, i, n, o, s, a) {
        var u = s.circle,
          c = s.seenUids,
          h = this.boxCells[n];
        if (null !== h)
          for (var l = this.bboxes, p = 0, f = h; p < f.length; p += 1) {
            var d = f[p];
            if (!c.box[d]) {
              c.box[d] = !0;
              var g = 4 * d;
              if (this._circleAndRectCollide(u.x, u.y, u.radius, l[g + 0], l[g + 1], l[g + 2], l[g + 3]) && (!a || a(this.boxKeys[d]))) return o.push(!0), !0
            }
          }
        var _ = this.circleCells[n];
        if (null !== _)
          for (var y = this.circles, m = 0, v = _; m < v.length; m += 1) {
            var x = v[m];
            if (!c.circle[x]) {
              c.circle[x] = !0;
              var w = 3 * x;
              if (this._circlesCollide(y[w], y[w + 1], y[w + 2], u.x, u.y, u.radius) && (!a || a(this.circleKeys[x]))) return o.push(!0), !0
            }
          }
      }, re.prototype._forEachCell = function (t, e, r, i, n, o, s, a) {
        for (var u = this._convertToXCellCoord(t), c = this._convertToYCellCoord(e), h = this._convertToXCellCoord(r), l = this._convertToYCellCoord(i), p = u; p <= h; p++)
          for (var f = c; f <= l; f++) {
            var d = this.xCellCount * f + p;
            if (n.call(this, t, e, r, i, d, o, s, a)) return
          }
      }, re.prototype._convertToXCellCoord = function (t) {
        return Math.max(0, Math.min(this.xCellCount - 1, Math.floor(t * this.xScale)))
      }, re.prototype._convertToYCellCoord = function (t) {
        return Math.max(0, Math.min(this.yCellCount - 1, Math.floor(t * this.yScale)))
      }, re.prototype._circlesCollide = function (t, e, r, i, n, o) {
        var s = i - t,
          a = n - e,
          u = r + o;
        return u * u > s * s + a * a
      }, re.prototype._circleAndRectCollide = function (t, e, r, i, n, o, s) {
        var a = (o - i) / 2,
          u = Math.abs(t - (i + a));
        if (u > a + r) return !1;
        var c = (s - n) / 2,
          h = Math.abs(e - (n + c));
        if (h > c + r) return !1;
        if (u <= a || h <= c) return !0;
        var l = u - a,
          p = h - c;
        return l * l + p * p <= r * r
      };
      var fe = new Float32Array([-1 / 0, -1 / 0, 0, -1 / 0, -1 / 0, 0, -1 / 0, -1 / 0, 0, -1 / 0, -1 / 0, 0]);
  
      function de(t, e) {
        for (var r = 0; r < t; r++) {
          var i = e.length;
          e.resize(i + 4), e.float32.set(fe, 3 * i);
        }
      }
  
      function ge(t, e, r) {
        var i = e[0],
          n = e[1];
        return t[0] = r[0] * i + r[4] * n + r[12], t[1] = r[1] * i + r[5] * n + r[13], t[3] = r[3] * i + r[7] * n + r[15], t
      }
      var _e = function (t, e, r) {
        void 0 === e && (e = new re(t.width + 200, t.height + 200, 25)), void 0 === r && (r = new re(t.width + 200, t.height + 200, 25)), this.transform = t, this.grid = e, this.ignoredGrid = r, this.pitchfactor = Math.cos(t._pitch) * t.cameraToCenterDistance, this.screenRightBoundary = t.width + 100, this.screenBottomBoundary = t.height + 100, this.gridRightBoundary = t.width + 200, this.gridBottomBoundary = t.height + 200;
      };
  
      function ye(t, e, r) {
        t[e + 4] = r ? 1 : 0;
      }
  
      function me(e, r, i) {
        return r * (t.EXTENT / (e.tileSize * Math.pow(2, i - e.tileID.overscaledZ)))
      }
      _e.prototype.placeCollisionBox = function (t, e, r, i, n) {
        var o = this.projectAndGetPerspectiveRatio(i, t.anchorPointX, t.anchorPointY),
          s = r * o.perspectiveRatio,
          a = t.x1 * s + o.point.x,
          u = t.y1 * s + o.point.y,
          c = t.x2 * s + o.point.x,
          h = t.y2 * s + o.point.y;
        return !this.isInsideGrid(a, u, c, h) || !e && this.grid.hitTest(a, u, c, h, n) ? {
          box: [],
          offscreen: !1
        } : {
          box: [a, u, c, h],
          offscreen: this.isOffscreen(a, u, c, h)
        }
      }, _e.prototype.approximateTileDistance = function (t, e, r, i, n) {
        var o = n ? 1 : i / this.pitchfactor,
          s = t.lastSegmentViewportDistance * r;
        return t.prevTileDistance + s + (o - 1) * s * Math.abs(Math.sin(e))
      }, _e.prototype.placeCollisionCircles = function (e, r, i, n, o, s, a, u, c, h, l, p, f) {
        var d = [],
          g = this.projectAnchor(c, o.anchorX, o.anchorY),
          _ = u / 24,
          y = o.lineOffsetX * u,
          m = o.lineOffsetY * u,
          v = new t.Point(o.anchorX, o.anchorY),
          x = ue(_, a, y, m, !1, oe(v, h).point, v, o, s, h, {}, !0),
          w = !1,
          b = !1,
          E = !0,
          L = g.perspectiveRatio * n,
          S = 1 / (n * i),
          C = 0,
          I = 0;
        x && (C = this.approximateTileDistance(x.first.tileDistance, x.first.angle, S, g.cameraDistance, p), I = this.approximateTileDistance(x.last.tileDistance, x.last.angle, S, g.cameraDistance, p));
        for (var M = 0; M < e.length; M += 5) {
          var T = e[M],
            P = e[M + 1],
            D = e[M + 2],
            N = e[M + 3];
          if (!x || N < -C || N > I) ye(e, M, !1);
          else {
            var R = this.projectPoint(c, T, P),
              O = D * L;
            if (d.length > 0) {
              var A = R.x - d[d.length - 4],
                F = R.y - d[d.length - 3];
              if (O * O * 2 > A * A + F * F)
                if (M + 8 < e.length) {
                  var k = e[M + 8];
                  if (k > -C && k < I) {
                    ye(e, M, !1);
                    continue
                  }
                }
            }
            var B = M / 5;
            d.push(R.x, R.y, O, B), ye(e, M, !0);
            var z = R.x - O,
              V = R.y - O,
              U = R.x + O,
              q = R.y + O;
            if (E = E && this.isOffscreen(z, V, U, q), b = b || this.isInsideGrid(z, V, U, q), !r && this.grid.hitTestCircle(R.x, R.y, O, f)) {
              if (!l) return {
                circles: [],
                offscreen: !1
              };
              w = !0;
            }
          }
        }
        return {
          circles: w || !b ? [] : d,
          offscreen: E
        }
      }, _e.prototype.queryRenderedSymbols = function (e) {
        if (0 === e.length || 0 === this.grid.keysLength() && 0 === this.ignoredGrid.keysLength()) return {};
        for (var r = [], i = 1 / 0, n = 1 / 0, o = -1 / 0, s = -1 / 0, a = 0, u = e; a < u.length; a += 1) {
          var c = u[a],
            h = new t.Point(c.x + 100, c.y + 100);
          i = Math.min(i, h.x), n = Math.min(n, h.y), o = Math.max(o, h.x), s = Math.max(s, h.y), r.push(h);
        }
        for (var l = {}, p = {}, f = 0, d = this.grid.query(i, n, o, s).concat(this.ignoredGrid.query(i, n, o, s)); f < d.length; f += 1) {
          var g = d[f],
            _ = g.key;
          if (void 0 === l[_.bucketInstanceId] && (l[_.bucketInstanceId] = {}), !l[_.bucketInstanceId][_.featureIndex]) {
            var y = [new t.Point(g.x1, g.y1), new t.Point(g.x2, g.y1), new t.Point(g.x2, g.y2), new t.Point(g.x1, g.y2)];
            t.polygonIntersectsPolygon(r, y) && (l[_.bucketInstanceId][_.featureIndex] = !0, void 0 === p[_.bucketInstanceId] && (p[_.bucketInstanceId] = []), p[_.bucketInstanceId].push(_.featureIndex));
          }
        }
        return p
      }, _e.prototype.insertCollisionBox = function (t, e, r, i, n) {
        var o = {
          bucketInstanceId: r,
          featureIndex: i,
          collisionGroupID: n
        };
        (e ? this.ignoredGrid : this.grid).insert(o, t[0], t[1], t[2], t[3]);
      }, _e.prototype.insertCollisionCircles = function (t, e, r, i, n) {
        for (var o = e ? this.ignoredGrid : this.grid, s = {
            bucketInstanceId: r,
            featureIndex: i,
            collisionGroupID: n
          }, a = 0; a < t.length; a += 4) o.insertCircle(s, t[a], t[a + 1], t[a + 2]);
      }, _e.prototype.projectAnchor = function (t, e, r) {
        var i = [e, r, 0, 1];
        return ge(i, i, t), {
          perspectiveRatio: .5 + this.transform.cameraToCenterDistance / i[3] * .5,
          cameraDistance: i[3]
        }
      }, _e.prototype.projectPoint = function (e, r, i) {
        var n = [r, i, 0, 1];
        return ge(n, n, e), new t.Point((n[0] / n[3] + 1) / 2 * this.transform.width + 100, (-n[1] / n[3] + 1) / 2 * this.transform.height + 100)
      }, _e.prototype.projectAndGetPerspectiveRatio = function (e, r, i) {
        var n = [r, i, 0, 1];
        return ge(n, n, e), {
          point: new t.Point((n[0] / n[3] + 1) / 2 * this.transform.width + 100, (-n[1] / n[3] + 1) / 2 * this.transform.height + 100),
          perspectiveRatio: .5 + this.transform.cameraToCenterDistance / n[3] * .5
        }
      }, _e.prototype.isOffscreen = function (t, e, r, i) {
        return r < 100 || t >= this.screenRightBoundary || i < 100 || e > this.screenBottomBoundary
      }, _e.prototype.isInsideGrid = function (t, e, r, i) {
        return r >= 0 && t < this.gridRightBoundary && i >= 0 && e < this.gridBottomBoundary
      };
      var ve = function (t, e, r, i) {
        this.opacity = t ? Math.max(0, Math.min(1, t.opacity + (t.placed ? e : -e))) : i && r ? 1 : 0, this.placed = r;
      };
      ve.prototype.isHidden = function () {
        return 0 === this.opacity && !this.placed
      };
      var xe = function (t, e, r, i, n) {
        this.text = new ve(t ? t.text : null, e, r, n), this.icon = new ve(t ? t.icon : null, e, i, n);
      };
      xe.prototype.isHidden = function () {
        return this.text.isHidden() && this.icon.isHidden()
      };
      var we = function (t, e, r) {
          this.text = t, this.icon = e, this.skipFade = r;
        },
        be = function (t, e, r, i, n) {
          this.bucketInstanceId = t, this.featureIndex = e, this.sourceLayerIndex = r, this.bucketIndex = i, this.tileID = n;
        },
        Ee = function (t) {
          this.crossSourceCollisions = t, this.maxGroupID = 0, this.collisionGroups = {};
        };
  
      function Le(e, r, i, n, o) {
        var s = t.getAnchorAlignment(e),
          a = -(s.horizontalAlign - .5) * r,
          u = -(s.verticalAlign - .5) * i,
          c = t.evaluateRadialOffset(e, n);
        return new t.Point(a + c[0] * o, u + c[1] * o)
      }
      Ee.prototype.get = function (t) {
        if (this.crossSourceCollisions) return {
          ID: 0,
          predicate: null
        };
        if (!this.collisionGroups[t]) {
          var e = ++this.maxGroupID;
          this.collisionGroups[t] = {
            ID: e,
            predicate: function (t) {
              return t.collisionGroupID === e
            }
          };
        }
        return this.collisionGroups[t]
      };
      var Se = function (t, e, r, i) {
        this.transform = t.clone(), this.collisionIndex = new _e(this.transform), this.placements = {}, this.opacities = {}, this.variableOffsets = {}, this.stale = !1, this.commitTime = 0, this.fadeDuration = e, this.retainedQueryData = {}, this.collisionGroups = new Ee(r), this.prevPlacement = i, i && (i.prevPlacement = void 0), this.placedOrientations = {};
      };
  
      function Ce(t, e, r, i, n) {
        t.emplaceBack(e ? 1 : 0, r ? 1 : 0, i || 0, n || 0), t.emplaceBack(e ? 1 : 0, r ? 1 : 0, i || 0, n || 0), t.emplaceBack(e ? 1 : 0, r ? 1 : 0, i || 0, n || 0), t.emplaceBack(e ? 1 : 0, r ? 1 : 0, i || 0, n || 0);
      }
      Se.prototype.placeLayerTile = function (e, r, i, n) {
        var o = r.getBucket(e),
          s = r.latestFeatureIndex;
        if (o && s && e.id === o.layerIds[0]) {
          var a = r.collisionBoxArray,
            u = o.layers[0].layout,
            c = Math.pow(2, this.transform.zoom - r.tileID.overscaledZ),
            h = r.tileSize / t.EXTENT,
            l = this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),
            p = ie(l, "map" === u.get("text-pitch-alignment"), "map" === u.get("text-rotation-alignment"), this.transform, me(r, 1, this.transform.zoom)),
            f = ie(l, "map" === u.get("icon-pitch-alignment"), "map" === u.get("icon-rotation-alignment"), this.transform, me(r, 1, this.transform.zoom));
          this.retainedQueryData[o.bucketInstanceId] = new be(o.bucketInstanceId, s, o.sourceLayerIndex, o.index, r.tileID), this.placeLayerBucket(o, l, p, f, c, h, i, r.holdingForFade(), n, a);
        }
      }, Se.prototype.attemptAnchorPlacement = function (e, r, i, n, o, s, a, u, c, h, l, p, f, d, g) {
        var _, y = Le(e, i, n, o, s),
          m = this.collisionIndex.placeCollisionBox(function (e, r, i, n, o, s) {
            var a = e.x1,
              u = e.x2,
              c = e.y1,
              h = e.y2,
              l = e.anchorPointX,
              p = e.anchorPointY,
              f = new t.Point(r, i);
            return n && f._rotate(o ? s : -s), {
              x1: a + f.x,
              y1: c + f.y,
              x2: u + f.x,
              y2: h + f.y,
              anchorPointX: l,
              anchorPointY: p
            }
          }(r, y.x, y.y, a, u, this.transform.angle), p, c, h, l.predicate);
        if (m.box.length > 0) return this.prevPlacement && this.prevPlacement.variableOffsets[f.crossTileID] && this.prevPlacement.placements[f.crossTileID] && this.prevPlacement.placements[f.crossTileID].text && (_ = this.prevPlacement.variableOffsets[f.crossTileID].anchor), this.variableOffsets[f.crossTileID] = {
          radialOffset: o,
          width: i,
          height: n,
          anchor: e,
          textBoxScale: s,
          prevAnchor: _
        }, this.markUsedJustification(d, e, f, g), d.allowVerticalPlacement && (this.markUsedOrientation(d, g, f), this.placedOrientations[f.crossTileID] = g), m
      }, Se.prototype.placeLayerBucket = function (e, r, i, n, o, s, a, u, c, h) {
        var l = this,
          p = e.layers[0].layout,
          f = t.evaluateSizeForZoom(e.textSizeData, this.transform.zoom),
          d = p.get("text-optional"),
          g = p.get("icon-optional"),
          _ = p.get("text-allow-overlap"),
          y = p.get("icon-allow-overlap"),
          m = _ && (y || !e.hasIconData() || g),
          v = y && (_ || !e.hasTextData() || d),
          x = this.collisionGroups.get(e.sourceID),
          w = "map" === p.get("text-rotation-alignment"),
          b = "map" === p.get("text-pitch-alignment"),
          E = "viewport-y" === p.get("symbol-z-order");
        !e.collisionArrays && h && e.deserializeCollisionBoxes(h);
        var L = function (n, h) {
          if (!c[n.crossTileID])
            if (u) l.placements[n.crossTileID] = new we(!1, !1, !1);
            else {
              var y, E = !1,
                L = !1,
                S = !0,
                C = {
                  box: null,
                  offscreen: null
                },
                I = {
                  box: null,
                  offscreen: null
                },
                M = null,
                T = null,
                P = 0,
                D = 0,
                N = 0;
              h.textFeatureIndex && (P = h.textFeatureIndex), h.verticalTextFeatureIndex && (D = h.verticalTextFeatureIndex);
              var R = h.textBox;
              if (R) {
                var O = function (r) {
                    var i = t.WritingMode.horizontal;
                    if (e.allowVerticalPlacement && !r && l.prevPlacement) {
                      var o = l.prevPlacement.placedOrientations[n.crossTileID];
                      o && (l.placedOrientations[n.crossTileID] = o, i = o, l.markUsedOrientation(e, i, n));
                    }
                    return i
                  },
                  A = function (r, i) {
                    if (e.allowVerticalPlacement && n.numVerticalGlyphVertices > 0 && h.verticalTextBox)
                      for (var o = 0, s = e.writingModes; o < s.length; o += 1) {
                        if (s[o] === t.WritingMode.vertical ? (C = i(), I = C) : C = r(), C && C.box && C.box.length) break
                      } else C = r();
                  };
                if (p.get("text-variable-anchor")) {
                  var F = p.get("text-variable-anchor");
                  if (l.prevPlacement && l.prevPlacement.variableOffsets[n.crossTileID]) {
                    var k = l.prevPlacement.variableOffsets[n.crossTileID];
                    F.indexOf(k.anchor) > 0 && (F = F.filter(function (t) {
                      return t !== k.anchor
                    })).unshift(k.anchor);
                  }
                  var B = function (t, i) {
                    for (var o = t.x2 - t.x1, a = t.y2 - t.y1, u = n.textBoxScale, c = {
                        box: [],
                        offscreen: !1
                      }, h = _ ? 2 * F.length : F.length, p = 0; p < h; ++p) {
                      var f = F[p % F.length],
                        d = p >= F.length;
                      if ((c = l.attemptAnchorPlacement(f, t, o, a, n.radialTextOffset, u, w, b, s, r, x, d, n, e, i)) && c.box && c.box.length) {
                        E = !0;
                        break
                      }
                    }
                    return c
                  };
                  A(function () {
                    return B(R, t.WritingMode.horizontal)
                  }, function () {
                    var r = h.verticalTextBox,
                      i = C && C.box && C.box.length;
                    return e.allowVerticalPlacement && !i && n.numVerticalGlyphVertices > 0 && r ? B(r, t.WritingMode.vertical) : {
                      box: null,
                      offscreen: null
                    }
                  }), C && (E = C.box, S = C.offscreen);
                  var z = O(C && C.box);
                  if (!E && l.prevPlacement) {
                    var V = l.prevPlacement.variableOffsets[n.crossTileID];
                    V && (l.variableOffsets[n.crossTileID] = V, l.markUsedJustification(e, V.anchor, n, z));
                  }
                } else {
                  var U = function (t, i) {
                    var o = l.collisionIndex.placeCollisionBox(t, p.get("text-allow-overlap"), s, r, x.predicate);
                    return o && o.box && o.box.length && (l.markUsedOrientation(e, i, n), l.placedOrientations[n.crossTileID] = i), o
                  };
                  A(function () {
                    return U(R, t.WritingMode.horizontal)
                  }, function () {
                    var r = h.verticalTextBox;
                    return e.allowVerticalPlacement && n.numVerticalGlyphVertices > 0 && r ? U(r, t.WritingMode.vertical) : {
                      box: null,
                      offscreen: null
                    }
                  }), O(C && C.box && C.box.length);
                }
              }
              E = (y = C) && y.box && y.box.length > 0, S = y && y.offscreen;
              var q = h.textCircles;
              if (q) {
                var j = e.text.placedSymbolArray.get(n.centerJustifiedTextSymbolIndex),
                  G = t.evaluateSizeForFeature(e.textSizeData, f, j);
                M = l.collisionIndex.placeCollisionCircles(q, p.get("text-allow-overlap"), o, s, j, e.lineVertexArray, e.glyphOffsetArray, G, r, i, a, b, x.predicate), E = p.get("text-allow-overlap") || M.circles.length > 0, S = S && M.offscreen;
              }
              h.iconFeatureIndex && (N = h.iconFeatureIndex), h.iconBox && (L = (T = l.collisionIndex.placeCollisionBox(h.iconBox, p.get("icon-allow-overlap"), s, r, x.predicate)).box.length > 0, S = S && T.offscreen);
              var X = d || 0 === n.numHorizontalGlyphVertices && 0 === n.numVerticalGlyphVertices,
                Z = g || 0 === n.numIconVertices;
              X || Z ? Z ? X || (L = L && E) : E = L && E : L = E = L && E, E && y && y.box && (I && I.box && D ? l.collisionIndex.insertCollisionBox(y.box, p.get("text-ignore-placement"), e.bucketInstanceId, D, x.ID) : l.collisionIndex.insertCollisionBox(y.box, p.get("text-ignore-placement"), e.bucketInstanceId, P, x.ID)), L && T && l.collisionIndex.insertCollisionBox(T.box, p.get("icon-ignore-placement"), e.bucketInstanceId, N, x.ID), E && M && l.collisionIndex.insertCollisionCircles(M.circles, p.get("text-ignore-placement"), e.bucketInstanceId, P, x.ID), l.placements[n.crossTileID] = new we(E || m, L || v, S || e.justReloaded), c[n.crossTileID] = !0;
            }
        };
        if (E)
          for (var S = e.getSortedSymbolIndexes(this.transform.angle), C = S.length - 1; C >= 0; --C) {
            var I = S[C];
            L(e.symbolInstances.get(I), e.collisionArrays[I]);
          } else
            for (var M = 0; M < e.symbolInstances.length; ++M) L(e.symbolInstances.get(M), e.collisionArrays[M]);
        e.justReloaded = !1;
      }, Se.prototype.markUsedJustification = function (e, r, i, n) {
        var o, s = {
          left: i.leftJustifiedTextSymbolIndex,
          center: i.centerJustifiedTextSymbolIndex,
          right: i.rightJustifiedTextSymbolIndex
        };
        o = n === t.WritingMode.vertical ? i.verticalPlacedTextSymbolIndex : s[t.getAnchorJustification(r)];
        for (var a = 0, u = [i.leftJustifiedTextSymbolIndex, i.centerJustifiedTextSymbolIndex, i.rightJustifiedTextSymbolIndex, i.verticalPlacedTextSymbolIndex]; a < u.length; a += 1) {
          var c = u[a];
          c >= 0 && (e.text.placedSymbolArray.get(c).crossTileID = o >= 0 && c !== o ? 0 : i.crossTileID);
        }
      }, Se.prototype.markUsedOrientation = function (e, r, i) {
        for (var n = r === t.WritingMode.horizontal || r === t.WritingMode.horizontalOnly ? r : 0, o = r === t.WritingMode.vertical ? r : 0, s = 0, a = [i.leftJustifiedTextSymbolIndex, i.centerJustifiedTextSymbolIndex, i.rightJustifiedTextSymbolIndex]; s < a.length; s += 1) {
          var u = a[s];
          e.text.placedSymbolArray.get(u).placedOrientation = n;
        }
        i.verticalPlacedTextSymbolIndex && (e.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).placedOrientation = o);
      }, Se.prototype.commit = function (t) {
        this.commitTime = t;
        var e = this.prevPlacement,
          r = !1,
          i = e && 0 !== this.fadeDuration ? (this.commitTime - e.commitTime) / this.fadeDuration : 1,
          n = e ? e.opacities : {},
          o = e ? e.variableOffsets : {},
          s = e ? e.placedOrientations : {};
        for (var a in this.placements) {
          var u = this.placements[a],
            c = n[a];
          c ? (this.opacities[a] = new xe(c, i, u.text, u.icon), r = r || u.text !== c.text.placed || u.icon !== c.icon.placed) : (this.opacities[a] = new xe(null, i, u.text, u.icon, u.skipFade), r = r || u.text || u.icon);
        }
        for (var h in n) {
          var l = n[h];
          if (!this.opacities[h]) {
            var p = new xe(l, i, !1, !1);
            p.isHidden() || (this.opacities[h] = p, r = r || l.text.placed || l.icon.placed);
          }
        }
        for (var f in o) this.variableOffsets[f] || !this.opacities[f] || this.opacities[f].isHidden() || (this.variableOffsets[f] = o[f]);
        for (var d in s) this.placedOrientations[d] || !this.opacities[d] || this.opacities[d].isHidden() || (this.placedOrientations[d] = s[d]);
        r ? this.lastPlacementChangeTime = t : "number" != typeof this.lastPlacementChangeTime && (this.lastPlacementChangeTime = e ? e.lastPlacementChangeTime : t);
      }, Se.prototype.updateLayerOpacities = function (t, e) {
        for (var r = {}, i = 0, n = e; i < n.length; i += 1) {
          var o = n[i],
            s = o.getBucket(t);
          s && o.latestFeatureIndex && t.id === s.layerIds[0] && this.updateBucketOpacities(s, r, o.collisionBoxArray);
        }
      }, Se.prototype.updateBucketOpacities = function (e, r, i) {
        e.hasTextData() && e.text.opacityVertexArray.clear(), e.hasIconData() && e.icon.opacityVertexArray.clear(), e.hasCollisionBoxData() && e.collisionBox.collisionVertexArray.clear(), e.hasCollisionCircleData() && e.collisionCircle.collisionVertexArray.clear();
        var n = e.layers[0].layout,
          o = new xe(null, 0, !1, !1, !0),
          s = n.get("text-allow-overlap"),
          a = n.get("icon-allow-overlap"),
          u = n.get("text-variable-anchor"),
          c = "map" === n.get("text-rotation-alignment"),
          h = "map" === n.get("text-pitch-alignment"),
          l = new xe(null, 0, s && (a || !e.hasIconData() || n.get("icon-optional")), a && (s || !e.hasTextData() || n.get("text-optional")), !0);
        !e.collisionArrays && i && (e.hasCollisionBoxData() || e.hasCollisionCircleData()) && e.deserializeCollisionBoxes(i);
        for (var p = 0; p < e.symbolInstances.length; p++) {
          var f = e.symbolInstances.get(p),
            d = f.numHorizontalGlyphVertices,
            g = f.numVerticalGlyphVertices,
            _ = f.crossTileID,
            y = r[_],
            m = this.opacities[_];
          y ? m = o : m || (m = l, this.opacities[_] = m), r[_] = !0;
          var v = d > 0 || g > 0,
            x = f.numIconVertices > 0;
          if (v) {
            for (var w = Oe(m.text), b = (d + g) / 4, E = 0; E < b; E++) e.text.opacityVertexArray.emplaceBack(w);
            var L = m.text.isHidden() ? 1 : 0,
              S = this.placedOrientations[f.crossTileID],
              C = S === t.WritingMode.horizontal || S === t.WritingMode.horizontalOnly ? 1 : 0,
              I = S === t.WritingMode.vertical ? 1 : 0;
            [f.rightJustifiedTextSymbolIndex, f.centerJustifiedTextSymbolIndex, f.leftJustifiedTextSymbolIndex].forEach(function (t) {
              t >= 0 && (e.text.placedSymbolArray.get(t).hidden = L || I);
            }), f.verticalPlacedTextSymbolIndex >= 0 && (e.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).hidden = L || C);
            var M = this.variableOffsets[f.crossTileID];
            M && this.markUsedJustification(e, M.anchor, f, S);
            var T = this.placedOrientations[f.crossTileID];
            T && (this.markUsedJustification(e, "left", f, T), this.markUsedOrientation(e, T, f));
          }
          if (x) {
            for (var P = Oe(m.icon), D = 0; D < f.numIconVertices / 4; D++) e.icon.opacityVertexArray.emplaceBack(P);
            e.icon.placedSymbolArray.get(p).hidden = m.icon.isHidden();
          }
          if (e.hasCollisionBoxData() || e.hasCollisionCircleData()) {
            var N = e.collisionArrays[p];
            if (N) {
              if (N.textBox) {
                var R = new t.Point(0, 0),
                  O = !0;
                if (u) {
                  var A = this.variableOffsets[_];
                  A ? (R = Le(A.anchor, A.width, A.height, A.radialOffset, A.textBoxScale), c && R._rotate(h ? this.transform.angle : -this.transform.angle)) : O = !1;
                }
                Ce(e.collisionBox.collisionVertexArray, m.text.placed, !O, R.x, R.y);
              }
              N.iconBox && Ce(e.collisionBox.collisionVertexArray, m.icon.placed, !1);
              var F = N.textCircles;
              if (F && e.hasCollisionCircleData())
                for (var k = 0; k < F.length; k += 5) {
                  var B = y || 0 === F[k + 4];
                  Ce(e.collisionCircle.collisionVertexArray, m.text.placed, B);
                }
            }
          }
        }
        e.sortFeatures(this.transform.angle), this.retainedQueryData[e.bucketInstanceId] && (this.retainedQueryData[e.bucketInstanceId].featureSortOrder = e.featureSortOrder), e.hasTextData() && e.text.opacityVertexBuffer && e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray), e.hasIconData() && e.icon.opacityVertexBuffer && e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray), e.hasCollisionBoxData() && e.collisionBox.collisionVertexBuffer && e.collisionBox.collisionVertexBuffer.updateData(e.collisionBox.collisionVertexArray), e.hasCollisionCircleData() && e.collisionCircle.collisionVertexBuffer && e.collisionCircle.collisionVertexBuffer.updateData(e.collisionCircle.collisionVertexArray);
      }, Se.prototype.symbolFadeChange = function (t) {
        return 0 === this.fadeDuration ? 1 : (t - this.commitTime) / this.fadeDuration
      }, Se.prototype.hasTransitions = function (t) {
        return this.stale || t - this.lastPlacementChangeTime < this.fadeDuration
      }, Se.prototype.stillRecent = function (t) {
        return this.commitTime + this.fadeDuration > t
      }, Se.prototype.setStale = function () {
        this.stale = !0;
      };
      var Ie = Math.pow(2, 25),
        Me = Math.pow(2, 24),
        Te = Math.pow(2, 17),
        Pe = Math.pow(2, 16),
        De = Math.pow(2, 9),
        Ne = Math.pow(2, 8),
        Re = Math.pow(2, 1);
  
      function Oe(t) {
        if (0 === t.opacity && !t.placed) return 0;
        if (1 === t.opacity && t.placed) return 4294967295;
        var e = t.placed ? 1 : 0,
          r = Math.floor(127 * t.opacity);
        return r * Ie + e * Me + r * Te + e * Pe + r * De + e * Ne + r * Re + e
      }
      var Ae = function () {
        this._currentTileIndex = 0, this._seenCrossTileIDs = {};
      };
      Ae.prototype.continuePlacement = function (t, e, r, i, n) {
        for (; this._currentTileIndex < t.length;) {
          var o = t[this._currentTileIndex];
          if (e.placeLayerTile(i, o, r, this._seenCrossTileIDs), this._currentTileIndex++, n()) return !0
        }
      };
      var Fe = function (t, e, r, i, n, o, s) {
        this.placement = new Se(t, n, o, s), this._currentPlacementIndex = e.length - 1, this._forceFullPlacement = r, this._showCollisionBoxes = i, this._done = !1;
      };
      Fe.prototype.isDone = function () {
        return this._done
      }, Fe.prototype.continuePlacement = function (e, r, i) {
        for (var n = this, o = t.browser.now(), s = function () {
            var e = t.browser.now() - o;
            return !n._forceFullPlacement && e > 2
          }; this._currentPlacementIndex >= 0;) {
          var a = r[e[this._currentPlacementIndex]],
            u = this.placement.collisionIndex.transform.zoom;
          if ("symbol" === a.type && (!a.minzoom || a.minzoom <= u) && (!a.maxzoom || a.maxzoom > u)) {
            if (this._inProgressLayer || (this._inProgressLayer = new Ae), this._inProgressLayer.continuePlacement(i[a.source], this.placement, this._showCollisionBoxes, a, s)) return;
            delete this._inProgressLayer;
          }
          this._currentPlacementIndex--;
        }
        this._done = !0;
      }, Fe.prototype.commit = function (t) {
        return this.placement.commit(t), this.placement
      };
      var ke = 512 / t.EXTENT / 2,
        Be = function (t, e, r) {
          this.tileID = t, this.indexedSymbolInstances = {}, this.bucketInstanceId = r;
          for (var i = 0; i < e.length; i++) {
            var n = e.get(i),
              o = n.key;
            this.indexedSymbolInstances[o] || (this.indexedSymbolInstances[o] = []), this.indexedSymbolInstances[o].push({
              crossTileID: n.crossTileID,
              coord: this.getScaledCoordinates(n, t)
            });
          }
        };
      Be.prototype.getScaledCoordinates = function (e, r) {
        var i = r.canonical.z - this.tileID.canonical.z,
          n = ke / Math.pow(2, i);
        return {
          x: Math.floor((r.canonical.x * t.EXTENT + e.anchorX) * n),
          y: Math.floor((r.canonical.y * t.EXTENT + e.anchorY) * n)
        }
      }, Be.prototype.findMatches = function (t, e, r) {
        for (var i = this.tileID.canonical.z < e.canonical.z ? 1 : Math.pow(2, this.tileID.canonical.z - e.canonical.z), n = 0; n < t.length; n++) {
          var o = t.get(n);
          if (!o.crossTileID) {
            var s = this.indexedSymbolInstances[o.key];
            if (s)
              for (var a = this.getScaledCoordinates(o, e), u = 0, c = s; u < c.length; u += 1) {
                var h = c[u];
                if (Math.abs(h.coord.x - a.x) <= i && Math.abs(h.coord.y - a.y) <= i && !r[h.crossTileID]) {
                  r[h.crossTileID] = !0, o.crossTileID = h.crossTileID;
                  break
                }
              }
          }
        }
      };
      var ze = function () {
        this.maxCrossTileID = 0;
      };
      ze.prototype.generate = function () {
        return ++this.maxCrossTileID
      };
      var Ve = function () {
        this.indexes = {}, this.usedCrossTileIDs = {}, this.lng = 0;
      };
      Ve.prototype.handleWrapJump = function (t) {
        var e = Math.round((t - this.lng) / 360);
        if (0 !== e)
          for (var r in this.indexes) {
            var i = this.indexes[r],
              n = {};
            for (var o in i) {
              var s = i[o];
              s.tileID = s.tileID.unwrapTo(s.tileID.wrap + e), n[s.tileID.key] = s;
            }
            this.indexes[r] = n;
          }
        this.lng = t;
      }, Ve.prototype.addBucket = function (t, e, r) {
        if (this.indexes[t.overscaledZ] && this.indexes[t.overscaledZ][t.key]) {
          if (this.indexes[t.overscaledZ][t.key].bucketInstanceId === e.bucketInstanceId) return !1;
          this.removeBucketCrossTileIDs(t.overscaledZ, this.indexes[t.overscaledZ][t.key]);
        }
        for (var i = 0; i < e.symbolInstances.length; i++) {
          e.symbolInstances.get(i).crossTileID = 0;
        }
        this.usedCrossTileIDs[t.overscaledZ] || (this.usedCrossTileIDs[t.overscaledZ] = {});
        var n = this.usedCrossTileIDs[t.overscaledZ];
        for (var o in this.indexes) {
          var s = this.indexes[o];
          if (Number(o) > t.overscaledZ)
            for (var a in s) {
              var u = s[a];
              u.tileID.isChildOf(t) && u.findMatches(e.symbolInstances, t, n);
            } else {
              var c = s[t.scaledTo(Number(o)).key];
              c && c.findMatches(e.symbolInstances, t, n);
            }
        }
        for (var h = 0; h < e.symbolInstances.length; h++) {
          var l = e.symbolInstances.get(h);
          l.crossTileID || (l.crossTileID = r.generate(), n[l.crossTileID] = !0);
        }
        return void 0 === this.indexes[t.overscaledZ] && (this.indexes[t.overscaledZ] = {}), this.indexes[t.overscaledZ][t.key] = new Be(t, e.symbolInstances, e.bucketInstanceId), !0
      }, Ve.prototype.removeBucketCrossTileIDs = function (t, e) {
        for (var r in e.indexedSymbolInstances)
          for (var i = 0, n = e.indexedSymbolInstances[r]; i < n.length; i += 1) {
            var o = n[i];
            delete this.usedCrossTileIDs[t][o.crossTileID];
          }
      }, Ve.prototype.removeStaleBuckets = function (t) {
        var e = !1;
        for (var r in this.indexes) {
          var i = this.indexes[r];
          for (var n in i) t[i[n].bucketInstanceId] || (this.removeBucketCrossTileIDs(r, i[n]), delete i[n], e = !0);
        }
        return e
      };
      var Ue = function () {
        this.layerIndexes = {}, this.crossTileIDs = new ze, this.maxBucketInstanceId = 0, this.bucketsInCurrentPlacement = {};
      };
      Ue.prototype.addLayer = function (t, e, r) {
        var i = this.layerIndexes[t.id];
        void 0 === i && (i = this.layerIndexes[t.id] = new Ve);
        var n = !1,
          o = {};
        i.handleWrapJump(r);
        for (var s = 0, a = e; s < a.length; s += 1) {
          var u = a[s],
            c = u.getBucket(t);
          c && t.id === c.layerIds[0] && (c.bucketInstanceId || (c.bucketInstanceId = ++this.maxBucketInstanceId), i.addBucket(u.tileID, c, this.crossTileIDs) && (n = !0), o[c.bucketInstanceId] = !0);
        }
        return i.removeStaleBuckets(o) && (n = !0), n
      }, Ue.prototype.pruneUnusedLayers = function (t) {
        var e = {};
        for (var r in t.forEach(function (t) {
            e[t] = !0;
          }), this.layerIndexes) e[r] || delete this.layerIndexes[r];
      };
      var qe = function (e, r) {
          return t.emitValidationErrors(e, r && r.filter(function (t) {
            return "source.canvas" !== t.identifier
          }))
        },
        je = t.pick(Yt, ["addLayer", "removeLayer", "setPaintProperty", "setLayoutProperty", "setFilter", "addSource", "removeSource", "setLayerZoomRange", "setLight", "setTransition", "setGeoJSONSourceData"]),
        Ge = t.pick(Yt, ["setCenter", "setZoom", "setBearing", "setPitch"]),
        Xe = function (e) {
          function r(i, n) {
            var o = this;
            void 0 === n && (n = {}), e.call(this), this.map = i, this.dispatcher = new S((jt || (jt = new qt), jt), this), this.imageManager = new p, this.imageManager.setEventedParent(this), this.glyphManager = new x(i._requestManager, n.localIdeographFontFamily), this.lineAtlas = new L(256, 512), this.crossTileSymbolIndex = new Ue, this._layers = {}, this._order = [], this.sourceCaches = {}, this.zoomHistory = new t.ZoomHistory, this._loaded = !1, this._resetUpdates(), this.dispatcher.broadcast("setReferrer", t.getReferrer());
            var s = this;
            this._rtlTextPluginCallback = r.registerForPluginAvailability(function (t) {
              for (var e in s.dispatcher.broadcast("loadRTLTextPlugin", t.pluginURL, t.completionCallback), s.sourceCaches) s.sourceCaches[e].reload();
            }), this.on("data", function (t) {
              if ("source" === t.dataType && "metadata" === t.sourceDataType) {
                var e = o.sourceCaches[t.sourceId];
                if (e) {
                  var r = e.getSource();
                  if (r && r.vectorLayerIds)
                    for (var i in o._layers) {
                      var n = o._layers[i];
                      n.source === r.id && o._validateLayer(n);
                    }
                }
              }
            });
          }
          return e && (r.__proto__ = e), r.prototype = Object.create(e && e.prototype), r.prototype.constructor = r, r.prototype.loadURL = function (e, r) {
            var i = this;
            void 0 === r && (r = {}), this.fire(new t.Event("dataloading", {
              dataType: "style"
            }));
            var n = "boolean" == typeof r.validate ? r.validate : !t.isEpgisURL(e);
            e = this.map._requestManager.normalizeStyleURL(e, r.accessToken);
            var o = this.map._requestManager.transformRequest(e, t.ResourceType.Style);
            this._request = t.getJSON(o, function (e, r) {
              i._request = null, e ? i.fire(new t.ErrorEvent(e)) : r && i._load(r, n);
            });
          }, r.prototype.loadJSON = function (e, r) {
            var i = this;
            void 0 === r && (r = {}), this.fire(new t.Event("dataloading", {
              dataType: "style"
            })), this._request = t.browser.frame(function () {
              i._request = null, i._load(e, !1 !== r.validate);
            });
          }, r.prototype._load = function (e, r) {
            var i = this;
            if (!r || !qe(this, t.validateStyle(e))) {
              for (var n in this._loaded = !0, this.stylesheet = e, e.sources) this.addSource(n, e.sources[n], {
                validate: !1
              });
              e.sprite ? this._spriteRequest = function (e, r, i) {
                var n, o, s, a = t.browser.devicePixelRatio > 1 ? "@2x" : "",
                  u = t.getJSON(r.transformRequest(r.normalizeSpriteURL(e, a, ".json"), t.ResourceType.SpriteJSON), function (t, e) {
                    u = null, s || (s = t, n = e, h());
                  }),
                  c = t.getImage(r.transformRequest(r.normalizeSpriteURL(e, a, ".png"), t.ResourceType.SpriteImage), function (t, e) {
                    c = null, s || (s = t, o = e, h());
                  });
  
                function h() {
                  if (s) i(s);
                  else if (n && o) {
                    var e = t.browser.getImageData(o),
                      r = {};
                    for (var a in n) {
                      var u = n[a],
                        c = u.width,
                        h = u.height,
                        l = u.x,
                        p = u.y,
                        f = u.sdf,
                        d = u.pixelRatio,
                        g = new t.RGBAImage({
                          width: c,
                          height: h
                        });
                      t.RGBAImage.copy(e, g, {
                        x: l,
                        y: p
                      }, {
                        x: 0,
                        y: 0
                      }, {
                        width: c,
                        height: h
                      }), r[a] = {
                        data: g,
                        pixelRatio: d,
                        sdf: f
                      };
                    }
                    i(null, r);
                  }
                }
                return {
                  cancel: function () {
                    u && (u.cancel(), u = null), c && (c.cancel(), c = null);
                  }
                }
              }(e.sprite, this.map._requestManager, function (e, r) {
                if (i._spriteRequest = null, e) i.fire(new t.ErrorEvent(e));
                else if (r)
                  for (var n in r) i.imageManager.addImage(n, r[n]);
                i.imageManager.setLoaded(!0), i.fire(new t.Event("data", {
                  dataType: "style"
                }));
              }) : this.imageManager.setLoaded(!0), this.glyphManager.setURL(e.glyphs);
              var o = Zt(this.stylesheet.layers);
              this._order = o.map(function (t) {
                return t.id
              }), this._layers = {};
              for (var s = 0, a = o; s < a.length; s += 1) {
                var u = a[s];
                (u = t.createStyleLayer(u)).setEventedParent(this, {
                  layer: {
                    id: u.id
                  }
                }), this._layers[u.id] = u;
              }
              this.dispatcher.broadcast("setLayers", this._serializeLayers(this._order)), this.light = new E(this.stylesheet.light), this.fire(new t.Event("data", {
                dataType: "style"
              })), this.fire(new t.Event("style.load"));
            }
          }, r.prototype._validateLayer = function (e) {
            var r = this.sourceCaches[e.source];
            if (r) {
              var i = e.sourceLayer;
              if (i) {
                var n = r.getSource();
                ("geojson" === n.type || n.vectorLayerIds && -1 === n.vectorLayerIds.indexOf(i)) && this.fire(new t.ErrorEvent(new Error('Source layer "' + i + '" does not exist on source "' + n.id + '" as specified by style layer "' + e.id + '"')));
              }
            }
          }, r.prototype.loaded = function () {
            if (!this._loaded) return !1;
            if (Object.keys(this._updatedSources).length) return !1;
            for (var t in this.sourceCaches)
              if (!this.sourceCaches[t].loaded()) return !1;
            return !!this.imageManager.isLoaded()
          }, r.prototype._serializeLayers = function (t) {
            for (var e = [], r = 0, i = t; r < i.length; r += 1) {
              var n = i[r],
                o = this._layers[n];
              "custom" !== o.type && e.push(o.serialize());
            }
            return e
          }, r.prototype.hasTransitions = function () {
            if (this.light && this.light.hasTransition()) return !0;
            for (var t in this.sourceCaches)
              if (this.sourceCaches[t].hasTransition()) return !0;
            for (var e in this._layers)
              if (this._layers[e].hasTransition()) return !0;
            return !1
          }, r.prototype._checkLoaded = function () {
            if (!this._loaded) throw new Error("Style is not done loading")
          }, r.prototype.update = function (e) {
            if (this._loaded) {
              var r = this._changed;
              if (this._changed) {
                var i = Object.keys(this._updatedLayers),
                  n = Object.keys(this._removedLayers);
                for (var o in (i.length || n.length) && this._updateWorkerLayers(i, n), this._updatedSources) {
                  var s = this._updatedSources[o];
                  "reload" === s ? this._reloadSource(o) : "clear" === s && this._clearSource(o);
                }
                for (var a in this._updatedPaintProps) this._layers[a].updateTransitions(e);
                this.light.updateTransitions(e), this._resetUpdates();
              }
              for (var u in this.sourceCaches) this.sourceCaches[u].used = !1;
              for (var c = 0, h = this._order; c < h.length; c += 1) {
                var l = h[c],
                  p = this._layers[l];
                p.recalculate(e), !p.isHidden(e.zoom) && p.source && (this.sourceCaches[p.source].used = !0);
              }
              this.light.recalculate(e), this.z = e.zoom, r && this.fire(new t.Event("data", {
                dataType: "style"
              }));
            }
          }, r.prototype._updateWorkerLayers = function (t, e) {
            this.dispatcher.broadcast("updateLayers", {
              layers: this._serializeLayers(t),
              removedIds: e
            });
          }, r.prototype._resetUpdates = function () {
            this._changed = !1, this._updatedLayers = {}, this._removedLayers = {}, this._updatedSources = {}, this._updatedPaintProps = {};
          }, r.prototype.setState = function (e) {
            var r = this;
            if (this._checkLoaded(), qe(this, t.validateStyle(e))) return !1;
            (e = t.clone$1(e)).layers = Zt(e.layers);
            var i = ee(this.serialize(), e).filter(function (t) {
              return !(t.command in Ge)
            });
            if (0 === i.length) return !1;
            var n = i.filter(function (t) {
              return !(t.command in je)
            });
            if (n.length > 0) throw new Error("Unimplemented: " + n.map(function (t) {
              return t.command
            }).join(", ") + ".");
            return i.forEach(function (t) {
              "setTransition" !== t.command && r[t.command].apply(r, t.args);
            }), this.stylesheet = e, !0
          }, r.prototype.addImage = function (e, r) {
            if (this.getImage(e)) return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));
            this.imageManager.addImage(e, r), this.fire(new t.Event("data", {
              dataType: "style"
            }));
          }, r.prototype.updateImage = function (t, e) {
            this.imageManager.updateImage(t, e);
          }, r.prototype.getImage = function (t) {
            return this.imageManager.getImage(t)
          }, r.prototype.removeImage = function (e) {
            if (!this.getImage(e)) return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));
            this.imageManager.removeImage(e), this.fire(new t.Event("data", {
              dataType: "style"
            }));
          }, r.prototype.listImages = function () {
            return this._checkLoaded(), this.imageManager.listImages()
          }, r.prototype.addSource = function (e, r, i) {
            var n = this;
            if (void 0 === i && (i = {}), this._checkLoaded(), void 0 !== this.sourceCaches[e]) throw new Error("There is already a source with this ID");
            if (!r.type) throw new Error("The type property must be defined, but the only the following properties were given: " + Object.keys(r).join(", ") + ".");
            if (!(["vector", "raster", "geojson", "video", "image"].indexOf(r.type) >= 0) || !this._validate(t.validateStyle.source, "sources." + e, r, null, i)) {
              this.map && this.map._collectResourceTiming && (r.collectResourceTiming = !0);
              var o = this.sourceCaches[e] = new Bt(e, r, this.dispatcher);
              o.style = this, o.setEventedParent(this, function () {
                return {
                  isSourceLoaded: n.loaded(),
                  source: o.serialize(),
                  sourceId: e
                }
              }), o.onAdd(this.map), this._changed = !0;
            }
          }, r.prototype.removeSource = function (e) {
            if (this._checkLoaded(), void 0 === this.sourceCaches[e]) throw new Error("There is no source with this ID");
            for (var r in this._layers)
              if (this._layers[r].source === e) return this.fire(new t.ErrorEvent(new Error('Source "' + e + '" cannot be removed while layer "' + r + '" is using it.')));
            var i = this.sourceCaches[e];
            delete this.sourceCaches[e], delete this._updatedSources[e], i.fire(new t.Event("data", {
              sourceDataType: "metadata",
              dataType: "source",
              sourceId: e
            })), i.setEventedParent(null), i.clearTiles(), i.onRemove && i.onRemove(this.map), this._changed = !0;
          }, r.prototype.setGeoJSONSourceData = function (t, e) {
            this._checkLoaded(), this.sourceCaches[t].getSource().setData(e), this._changed = !0;
          }, r.prototype.getSource = function (t) {
            return this.sourceCaches[t] && this.sourceCaches[t].getSource()
          }, r.prototype.addLayer = function (e, r, i) {
            void 0 === i && (i = {}), this._checkLoaded();
            var n = e.id;
            if (this.getLayer(n)) this.fire(new t.ErrorEvent(new Error('Layer with id "' + n + '" already exists on this map')));
            else {
              var o;
              if ("custom" === e.type) {
                if (qe(this, t.validateCustomStyleLayer(e))) return;
                o = t.createStyleLayer(e);
              } else {
                if ("object" == typeof e.source && (this.addSource(n, e.source), e = t.clone$1(e), e = t.extend(e, {
                    source: n
                  })), this._validate(t.validateStyle.layer, "layers." + n, e, {
                    arrayIndex: -1
                  }, i)) return;
                o = t.createStyleLayer(e), this._validateLayer(o), o.setEventedParent(this, {
                  layer: {
                    id: n
                  }
                });
              }
              var s = r ? this._order.indexOf(r) : this._order.length;
              if (r && -1 === s) this.fire(new t.ErrorEvent(new Error('Layer with id "' + r + '" does not exist on this map.')));
              else {
                if (this._order.splice(s, 0, n), this._layerOrderChanged = !0, this._layers[n] = o, this._removedLayers[n] && o.source && "custom" !== o.type) {
                  var a = this._removedLayers[n];
                  delete this._removedLayers[n], a.type !== o.type ? this._updatedSources[o.source] = "clear" : (this._updatedSources[o.source] = "reload", this.sourceCaches[o.source].pause());
                }
                this._updateLayer(o), o.onAdd && o.onAdd(this.map);
              }
            }
          }, r.prototype.moveLayer = function (e, r) {
            if (this._checkLoaded(), this._changed = !0, this._layers[e]) {
              if (e !== r) {
                var i = this._order.indexOf(e);
                this._order.splice(i, 1);
                var n = r ? this._order.indexOf(r) : this._order.length;
                r && -1 === n ? this.fire(new t.ErrorEvent(new Error('Layer with id "' + r + '" does not exist on this map.'))) : (this._order.splice(n, 0, e), this._layerOrderChanged = !0);
              }
            } else this.fire(new t.ErrorEvent(new Error("The layer '" + e + "' does not exist in the map's style and cannot be moved.")));
          }, r.prototype.removeLayer = function (e) {
            this._checkLoaded();
            var r = this._layers[e];
            if (r) {
              r.setEventedParent(null);
              var i = this._order.indexOf(e);
              this._order.splice(i, 1), this._layerOrderChanged = !0, this._changed = !0, this._removedLayers[e] = r, delete this._layers[e], delete this._updatedLayers[e], delete this._updatedPaintProps[e], r.onRemove && r.onRemove(this.map);
            } else this.fire(new t.ErrorEvent(new Error("The layer '" + e + "' does not exist in the map's style and cannot be removed.")));
          }, r.prototype.getLayer = function (t) {
            return this._layers[t]
          }, r.prototype.setLayerZoomRange = function (e, r, i) {
            this._checkLoaded();
            var n = this.getLayer(e);
            n ? n.minzoom === r && n.maxzoom === i || (null != r && (n.minzoom = r), null != i && (n.maxzoom = i), this._updateLayer(n)) : this.fire(new t.ErrorEvent(new Error("The layer '" + e + "' does not exist in the map's style and cannot have zoom extent.")));
          }, r.prototype.setFilter = function (e, r, i) {
            void 0 === i && (i = {}), this._checkLoaded();
            var n = this.getLayer(e);
            if (n) {
              if (!t.deepEqual(n.filter, r)) return null == r ? (n.filter = void 0, void this._updateLayer(n)) : void(this._validate(t.validateStyle.filter, "layers." + n.id + ".filter", r, null, i) || (n.filter = t.clone$1(r), this._updateLayer(n)))
            } else this.fire(new t.ErrorEvent(new Error("The layer '" + e + "' does not exist in the map's style and cannot be filtered.")));
          }, r.prototype.getFilter = function (e) {
            return t.clone$1(this.getLayer(e).filter)
          }, r.prototype.setLayoutProperty = function (e, r, i, n) {
            void 0 === n && (n = {}), this._checkLoaded();
            var o = this.getLayer(e);
            o ? t.deepEqual(o.getLayoutProperty(r), i) || (o.setLayoutProperty(r, i, n), this._updateLayer(o)) : this.fire(new t.ErrorEvent(new Error("The layer '" + e + "' does not exist in the map's style and cannot be styled.")));
          }, r.prototype.getLayoutProperty = function (e, r) {
            var i = this.getLayer(e);
            if (i) return i.getLayoutProperty(r);
            this.fire(new t.ErrorEvent(new Error("The layer '" + e + "' does not exist in the map's style.")));
          }, r.prototype.setPaintProperty = function (e, r, i, n) {
            void 0 === n && (n = {}), this._checkLoaded();
            var o = this.getLayer(e);
            o ? t.deepEqual(o.getPaintProperty(r), i) || (o.setPaintProperty(r, i, n) && this._updateLayer(o), this._changed = !0, this._updatedPaintProps[e] = !0) : this.fire(new t.ErrorEvent(new Error("The layer '" + e + "' does not exist in the map's style and cannot be styled.")));
          }, r.prototype.getPaintProperty = function (t, e) {
            return this.getLayer(t).getPaintProperty(e)
          }, r.prototype.setFeatureState = function (e, r) {
            this._checkLoaded();
            var i = e.source,
              n = e.sourceLayer,
              o = this.sourceCaches[i],
              s = parseInt(e.id, 10);
            if (void 0 !== o) {
              var a = o.getSource().type;
              "geojson" === a && n ? this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))) : "vector" !== a || n ? isNaN(s) || s < 0 ? this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative."))) : o.setFeatureState(n, s, r) : this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));
            } else this.fire(new t.ErrorEvent(new Error("The source '" + i + "' does not exist in the map's style.")));
          }, r.prototype.removeFeatureState = function (e, r) {
            this._checkLoaded();
            var i = e.source,
              n = this.sourceCaches[i];
            if (void 0 !== n) {
              var o = n.getSource().type,
                s = "vector" === o ? e.sourceLayer : void 0,
                a = parseInt(e.id, 10);
              "vector" !== o || s ? void 0 !== e.id && isNaN(a) || a < 0 ? this.fire(new t.ErrorEvent(new Error("The feature id parameter must be non-negative."))) : r && "string" != typeof e.id && "number" != typeof e.id ? this.fire(new t.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))) : n.removeFeatureState(s, a, r) : this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));
            } else this.fire(new t.ErrorEvent(new Error("The source '" + i + "' does not exist in the map's style.")));
          }, r.prototype.getFeatureState = function (e) {
            this._checkLoaded();
            var r = e.source,
              i = e.sourceLayer,
              n = this.sourceCaches[r],
              o = parseInt(e.id, 10);
            if (void 0 !== n)
              if ("vector" !== n.getSource().type || i) {
                if (!(isNaN(o) || o < 0)) return n.getFeatureState(i, o);
                this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative.")));
              } else this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));
            else this.fire(new t.ErrorEvent(new Error("The source '" + r + "' does not exist in the map's style.")));
          }, r.prototype.getTransition = function () {
            return t.extend({
              duration: 300,
              delay: 0
            }, this.stylesheet && this.stylesheet.transition)
          }, r.prototype.serialize = function () {
            return t.filterObject({
              version: this.stylesheet.version,
              name: this.stylesheet.name,
              metadata: this.stylesheet.metadata,
              light: this.stylesheet.light,
              center: this.stylesheet.center,
              zoom: this.stylesheet.zoom,
              bearing: this.stylesheet.bearing,
              pitch: this.stylesheet.pitch,
              sprite: this.stylesheet.sprite,
              glyphs: this.stylesheet.glyphs,
              transition: this.stylesheet.transition,
              sources: t.mapObject(this.sourceCaches, function (t) {
                return t.serialize()
              }),
              layers: this._serializeLayers(this._order)
            }, function (t) {
              return void 0 !== t
            })
          }, r.prototype._updateLayer = function (t) {
            this._updatedLayers[t.id] = !0, t.source && !this._updatedSources[t.source] && (this._updatedSources[t.source] = "reload", this.sourceCaches[t.source].pause()), this._changed = !0;
          }, r.prototype._flattenAndSortRenderedFeatures = function (t) {
            for (var e = this, r = function (t) {
                return "fill-extrusion" === e._layers[t].type
              }, i = {}, n = [], o = this._order.length - 1; o >= 0; o--) {
              var s = this._order[o];
              if (r(s)) {
                i[s] = o;
                for (var a = 0, u = t; a < u.length; a += 1) {
                  var c = u[a][s];
                  if (c)
                    for (var h = 0, l = c; h < l.length; h += 1) {
                      var p = l[h];
                      n.push(p);
                    }
                }
              }
            }
            n.sort(function (t, e) {
              return e.intersectionZ - t.intersectionZ
            });
            for (var f = [], d = this._order.length - 1; d >= 0; d--) {
              var g = this._order[d];
              if (r(g))
                for (var _ = n.length - 1; _ >= 0; _--) {
                  var y = n[_].feature;
                  if (i[y.layer.id] < d) break;
                  f.push(y), n.pop();
                } else
                  for (var m = 0, v = t; m < v.length; m += 1) {
                    var x = v[m][g];
                    if (x)
                      for (var w = 0, b = x; w < b.length; w += 1) {
                        var E = b[w];
                        f.push(E.feature);
                      }
                  }
            }
            return f
          }, r.prototype.queryRenderedFeatures = function (e, r, i) {
            r && r.filter && this._validate(t.validateStyle.filter, "queryRenderedFeatures.filter", r.filter, null, r);
            var n = {};
            if (r && r.layers) {
              if (!Array.isArray(r.layers)) return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))), [];
              for (var o = 0, s = r.layers; o < s.length; o += 1) {
                var a = s[o],
                  u = this._layers[a];
                if (!u) return this.fire(new t.ErrorEvent(new Error("The layer '" + a + "' does not exist in the map's style and cannot be queried for features."))), [];
                n[u.source] = !0;
              }
            }
            var c = [];
            for (var h in this.sourceCaches) r.layers && !n[h] || c.push(X(this.sourceCaches[h], this._layers, e, r, i));
            return this.placement && c.push(function (t, e, r, i, n, o) {
              for (var s = {}, a = n.queryRenderedSymbols(r), u = [], c = 0, h = Object.keys(a).map(Number); c < h.length; c += 1) {
                var l = h[c];
                u.push(o[l]);
              }
              u.sort(Z);
              for (var p = function () {
                  var e = d[f],
                    r = e.featureIndex.lookupSymbolFeatures(a[e.bucketInstanceId], e.bucketIndex, e.sourceLayerIndex, i.filter, i.layers, t);
                  for (var n in r) {
                    var o = s[n] = s[n] || [],
                      u = r[n];
                    u.sort(function (t, r) {
                      var i = e.featureSortOrder;
                      if (i) {
                        var n = i.indexOf(t.featureIndex);
                        return i.indexOf(r.featureIndex) - n
                      }
                      return r.featureIndex - t.featureIndex
                    });
                    for (var c = 0, h = u; c < h.length; c += 1) {
                      var l = h[c];
                      o.push(l);
                    }
                  }
                }, f = 0, d = u; f < d.length; f += 1) p();
              var g = function (r) {
                s[r].forEach(function (i) {
                  var n = i.feature,
                    o = t[r],
                    s = e[o.source].getFeatureState(n.layer["source-layer"], n.id);
                  n.source = n.layer.source, n.layer["source-layer"] && (n.sourceLayer = n.layer["source-layer"]), n.state = s;
                });
              };
              for (var _ in s) g(_);
              return s
            }(this._layers, this.sourceCaches, e, r, this.placement.collisionIndex, this.placement.retainedQueryData)), this._flattenAndSortRenderedFeatures(c)
          }, r.prototype.querySourceFeatures = function (e, r) {
            r && r.filter && this._validate(t.validateStyle.filter, "querySourceFeatures.filter", r.filter, null, r);
            var i = this.sourceCaches[e];
            return i ? function (t, e) {
              for (var r = t.getRenderableIds().map(function (e) {
                  return t.getTileByID(e)
                }), i = [], n = {}, o = 0; o < r.length; o++) {
                var s = r[o],
                  a = s.tileID.canonical.key;
                n[a] || (n[a] = !0, s.querySourceFeatures(i, e));
              }
              return i
            }(i, r) : []
          }, r.prototype.addSourceType = function (t, e, i) {
            return r.getSourceType(t) ? i(new Error('A source type called "' + t + '" already exists.')) : (r.setSourceType(t, e), e.workerSourceURL ? void this.dispatcher.broadcast("loadWorkerSource", {
              name: t,
              url: e.workerSourceURL
            }, i) : i(null, null))
          }, r.prototype.getLight = function () {
            return this.light.getLight()
          }, r.prototype.setLight = function (e, r) {
            void 0 === r && (r = {}), this._checkLoaded();
            var i = this.light.getLight(),
              n = !1;
            for (var o in e)
              if (!t.deepEqual(e[o], i[o])) {
                n = !0;
                break
              } if (n) {
              var s = {
                now: t.browser.now(),
                transition: t.extend({
                  duration: 300,
                  delay: 0
                }, this.stylesheet.transition)
              };
              this.light.setLight(e, r), this.light.updateTransitions(s);
            }
          }, r.prototype._validate = function (e, r, i, n, o) {
            return void 0 === o && (o = {}), (!o || !1 !== o.validate) && qe(this, e.call(t.validateStyle, t.extend({
              key: r,
              style: this.serialize(),
              value: i,
              styleSpec: t.styleSpec
            }, n)))
          }, r.prototype._remove = function () {
            for (var e in this._request && (this._request.cancel(), this._request = null), this._spriteRequest && (this._spriteRequest.cancel(), this._spriteRequest = null), t.evented.off("pluginAvailable", this._rtlTextPluginCallback), this.sourceCaches) this.sourceCaches[e].clearTiles();
            this.dispatcher.remove();
          }, r.prototype._clearSource = function (t) {
            this.sourceCaches[t].clearTiles();
          }, r.prototype._reloadSource = function (t) {
            this.sourceCaches[t].resume(), this.sourceCaches[t].reload();
          }, r.prototype._updateSources = function (t) {
            for (var e in this.sourceCaches) this.sourceCaches[e].update(t);
          }, r.prototype._generateCollisionBoxes = function () {
            for (var t in this.sourceCaches) this._reloadSource(t);
          }, r.prototype._updatePlacement = function (e, r, i, n) {
            for (var o = !1, s = !1, a = {}, u = 0, c = this._order; u < c.length; u += 1) {
              var h = c[u],
                l = this._layers[h];
              if ("symbol" === l.type) {
                if (!a[l.source]) {
                  var p = this.sourceCaches[l.source];
                  a[l.source] = p.getRenderableIds(!0).map(function (t) {
                    return p.getTileByID(t)
                  }).sort(function (t, e) {
                    return e.tileID.overscaledZ - t.tileID.overscaledZ || (t.tileID.isLessThan(e.tileID) ? -1 : 1)
                  });
                }
                var f = this.crossTileSymbolIndex.addLayer(l, a[l.source], e.center.lng);
                o = o || f;
              }
            }
            this.crossTileSymbolIndex.pruneUnusedLayers(this._order);
            var d = this._layerOrderChanged || 0 === i;
            if ((d || !this.pauseablePlacement || this.pauseablePlacement.isDone() && !this.placement.stillRecent(t.browser.now())) && (this.pauseablePlacement = new Fe(e, this._order, d, r, i, n, this.placement), this._layerOrderChanged = !1), this.pauseablePlacement.isDone() ? this.placement.setStale() : (this.pauseablePlacement.continuePlacement(this._order, this._layers, a), this.pauseablePlacement.isDone() && (this.placement = this.pauseablePlacement.commit(t.browser.now()), s = !0), o && this.pauseablePlacement.placement.setStale()), s || o)
              for (var g = 0, _ = this._order; g < _.length; g += 1) {
                var y = _[g],
                  m = this._layers[y];
                "symbol" === m.type && this.placement.updateLayerOpacities(m, a[m.source]);
              }
            return !this.pauseablePlacement.isDone() || this.placement.hasTransitions(t.browser.now())
          }, r.prototype._releaseSymbolFadeTiles = function () {
            for (var t in this.sourceCaches) this.sourceCaches[t].releaseSymbolFadeTiles();
          }, r.prototype.getImages = function (t, e, r) {
            this.imageManager.getImages(e.icons, r);
          }, r.prototype.getGlyphs = function (t, e, r) {
            this.glyphManager.getGlyphs(e.stacks, r);
          }, r.prototype.getResource = function (e, r, i) {
            return t.makeRequest(r, i)
          }, r
        }(t.Evented);
      Xe.getSourceType = function (t) {
        return j[t]
      }, Xe.setSourceType = function (t, e) {
        j[t] = e;
      }, Xe.registerForPluginAvailability = t.registerForPluginAvailability;
      var Ze = t.createLayout([{
          name: "a_pos",
          type: "Int16",
          components: 2
        }]),
        Ye = mr("#ifdef GL_ES\r\nprecision mediump float;\r\n#else\r\n#if !defined(lowp)\r\n#define lowp\r\n#endif\r\n#if !defined(mediump)\r\n#define mediump\r\n#endif\r\n#if !defined(highp)\r\n#define highp\r\n#endif\r\n#endif", "#ifdef GL_ES\r\nprecision highp float;\r\n#else\r\n#if !defined(lowp)\r\n#define lowp\r\n#endif\r\n#if !defined(mediump)\r\n#define mediump\r\n#endif\r\n#if !defined(highp)\r\n#define highp\r\n#endif\r\n#endif\nvec2 unpack_float(const float packedValue) {\r\nint packedIntValue=int(packedValue);\r\nint v0=packedIntValue/256;\r\nreturn vec2(v0,packedIntValue-v0*256);\r\n}\r\nvec2 unpack_opacity(const float packedOpacity) {\r\nint intOpacity=int(packedOpacity)/2;\r\nreturn vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));\r\n}vec4 decode_color(const vec2 encodedColor) {\r\nreturn vec4(\r\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\r\n);\r\n}float unpack_mix_vec2(const vec2 packedValue,const float t) {\r\nreturn mix(packedValue[0],packedValue[1],t);\r\n}vec4 unpack_mix_color(const vec4 packedColors,const float t) {\r\nvec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));\r\nvec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));\r\nreturn mix(minColor,maxColor,t);\r\n}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {\r\nvec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);\r\nreturn (tile_units_to_pixels*pos+offset)/pattern_size;\r\n}"),
        We = mr("uniform vec4 u_color;\r\nuniform float u_opacity;\r\nvoid main() {\r\ngl_FragColor=u_color*u_opacity;\r\n#ifdef OVERDRAW_INSPECTOR\r\ngl_FragColor=vec4(1.0);\r\n#endif\r\n}", "attribute vec2 a_pos;\r\nuniform mat4 u_matrix;\r\nvoid main() {\r\ngl_Position=u_matrix*vec4(a_pos,0,1);\r\n}"),
        He = mr("uniform vec2 u_pattern_tl_a;\r\nuniform vec2 u_pattern_br_a;\r\nuniform vec2 u_pattern_tl_b;\r\nuniform vec2 u_pattern_br_b;\r\nuniform vec2 u_texsize;\r\nuniform float u_mix;\r\nuniform float u_opacity;\r\nuniform sampler2D u_image;\r\nvarying vec2 v_pos_a;\r\nvarying vec2 v_pos_b;\r\nvoid main() {\r\nvec2 imagecoord=mod(v_pos_a,1.0);\r\nvec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);\r\nvec4 color1=texture2D(u_image,pos);\r\nvec2 imagecoord_b=mod(v_pos_b,1.0);\r\nvec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);\r\nvec4 color2=texture2D(u_image,pos2);\r\ngl_FragColor=mix(color1,color2,u_mix)*u_opacity;\r\n#ifdef OVERDRAW_INSPECTOR\r\ngl_FragColor=vec4(1.0);\r\n#endif\r\n}", "uniform mat4 u_matrix;\r\nuniform vec2 u_pattern_size_a;\r\nuniform vec2 u_pattern_size_b;\r\nuniform vec2 u_pixel_coord_upper;\r\nuniform vec2 u_pixel_coord_lower;\r\nuniform float u_scale_a;\r\nuniform float u_scale_b;\r\nuniform float u_tile_units_to_pixels;\r\nattribute vec2 a_pos;\r\nvarying vec2 v_pos_a;\r\nvarying vec2 v_pos_b;\r\nvoid main() {\r\ngl_Position=u_matrix*vec4(a_pos,0,1);\r\nv_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);\r\nv_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);\r\n}"),
        Ke = mr("varying vec3 v_data;\r\n#pragma epgis: define highp vec4 color\r\n#pragma epgis: define mediump float radius\r\n#pragma epgis: define lowp float blur\r\n#pragma epgis: define lowp float opacity\r\n#pragma epgis: define highp vec4 stroke_color\r\n#pragma epgis: define mediump float stroke_width\r\n#pragma epgis: define lowp float stroke_opacity\r\nvoid main() {\r\n#pragma epgis: initialize highp vec4 color\r\n#pragma epgis: initialize mediump float radius\r\n#pragma epgis: initialize lowp float blur\r\n#pragma epgis: initialize lowp float opacity\r\n#pragma epgis: initialize highp vec4 stroke_color\r\n#pragma epgis: initialize mediump float stroke_width\r\n#pragma epgis: initialize lowp float stroke_opacity\r\nvec2 extrude=v_data.xy;\r\nfloat extrude_length=length(extrude);\r\nlowp float antialiasblur=v_data.z;\r\nfloat antialiased_blur=-max(blur,antialiasblur);\r\nfloat opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);\r\nfloat color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\r\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\r\n);\r\ngl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\r\n#ifdef OVERDRAW_INSPECTOR\r\ngl_FragColor=vec4(1.0);\r\n#endif\r\n}", "uniform mat4 u_matrix;\r\nuniform bool u_scale_with_map;\r\nuniform bool u_pitch_with_map;\r\nuniform vec2 u_extrude_scale;\r\nuniform lowp float u_device_pixel_ratio;\r\nuniform highp float u_camera_to_center_distance;\r\nattribute vec2 a_pos;\r\nvarying vec3 v_data;\r\n#pragma epgis: define highp vec4 color\r\n#pragma epgis: define mediump float radius\r\n#pragma epgis: define lowp float blur\r\n#pragma epgis: define lowp float opacity\r\n#pragma epgis: define highp vec4 stroke_color\r\n#pragma epgis: define mediump float stroke_width\r\n#pragma epgis: define lowp float stroke_opacity\r\nvoid main(void) {\r\n#pragma epgis: initialize highp vec4 color\r\n#pragma epgis: initialize mediump float radius\r\n#pragma epgis: initialize lowp float blur\r\n#pragma epgis: initialize lowp float opacity\r\n#pragma epgis: initialize highp vec4 stroke_color\r\n#pragma epgis: initialize mediump float stroke_width\r\n#pragma epgis: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);\r\nif (u_pitch_with_map) {\r\nvec2 corner_position=circle_center;\r\nif (u_scale_with_map) {\r\ncorner_position+=extrude*(radius+stroke_width)*u_extrude_scale;\r\n} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);\r\ncorner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);\r\n}\r\ngl_Position=u_matrix*vec4(corner_position,0,1);\r\n} else {\r\ngl_Position=u_matrix*vec4(circle_center,0,1);\r\nif (u_scale_with_map) {\r\ngl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;\r\n} else {\r\ngl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;\r\n}\r\n}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);\r\nv_data=vec3(extrude.x,extrude.y,antialiasblur);\r\n}"),
        Je = mr("void main() {\r\ngl_FragColor=vec4(1.0);\r\n}", "attribute vec2 a_pos;\r\nuniform mat4 u_matrix;\r\nvoid main() {\r\ngl_Position=u_matrix*vec4(a_pos,0,1);\r\n}"),
        Qe = mr("uniform highp float u_intensity;\r\nvarying vec2 v_extrude;\r\n#pragma epgis: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\r\nvoid main() {\r\n#pragma epgis: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);\r\nfloat val=weight*u_intensity*GAUSS_COEF*exp(d);\r\ngl_FragColor=vec4(val,1.0,1.0,1.0);\r\n#ifdef OVERDRAW_INSPECTOR\r\ngl_FragColor=vec4(1.0);\r\n#endif\r\n}", "uniform mat4 u_matrix;\r\nuniform float u_extrude_scale;\r\nuniform float u_opacity;\r\nuniform float u_intensity;\r\nattribute vec2 a_pos;\r\nvarying vec2 v_extrude;\r\n#pragma epgis: define highp float weight\r\n#pragma epgis: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\r\nvoid main(void) {\r\n#pragma epgis: initialize highp float weight\r\n#pragma epgis: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);\r\ngl_Position=u_matrix*pos;\r\n}"),
        $e = mr("uniform sampler2D u_image;\r\nuniform sampler2D u_color_ramp;\r\nuniform float u_opacity;\r\nvarying vec2 v_pos;\r\nvoid main() {\r\nfloat t=texture2D(u_image,v_pos).r;\r\nvec4 color=texture2D(u_color_ramp,vec2(t,0.5));\r\ngl_FragColor=color*u_opacity;\r\n#ifdef OVERDRAW_INSPECTOR\r\ngl_FragColor=vec4(0.0);\r\n#endif\r\n}", "uniform mat4 u_matrix;\r\nuniform vec2 u_world;\r\nattribute vec2 a_pos;\r\nvarying vec2 v_pos;\r\nvoid main() {\r\ngl_Position=u_matrix*vec4(a_pos*u_world,0,1);\r\nv_pos.x=a_pos.x;\r\nv_pos.y=1.0-a_pos.y;\r\n}"),
        tr = mr("varying float v_placed;\r\nvarying float v_notUsed;\r\nvoid main() {\r\nfloat alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {\r\ngl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;\r\n}\r\nif (v_notUsed > 0.5) {gl_FragColor*=.1;\r\n}\r\n}", "attribute vec2 a_pos;\r\nattribute vec2 a_anchor_pos;\r\nattribute vec2 a_extrude;\r\nattribute vec2 a_placed;\r\nattribute vec2 a_shift;\r\nuniform mat4 u_matrix;\r\nuniform vec2 u_extrude_scale;\r\nuniform float u_camera_to_center_distance;\r\nvarying float v_placed;\r\nvarying float v_notUsed;\r\nvoid main() {\r\nvec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);\r\nhighp float camera_to_anchor_distance=projectedPoint.w;\r\nhighp float collision_perspective_ratio=clamp(\r\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);\r\ngl_Position=u_matrix*vec4(a_pos,0.0,1.0);\r\ngl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;\r\nv_placed=a_placed.x;\r\nv_notUsed=a_placed.y;\r\n}"),
        er = mr("uniform float u_overscale_factor;\r\nvarying float v_placed;\r\nvarying float v_notUsed;\r\nvarying float v_radius;\r\nvarying vec2 v_extrude;\r\nvarying vec2 v_extrude_scale;\r\nvoid main() {\r\nfloat alpha=0.5;vec4 color=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {\r\ncolor=vec4(0.0,0.0,1.0,0.5)*alpha;\r\n}\r\nif (v_notUsed > 0.5) {color*=.2;\r\n}\r\nfloat extrude_scale_length=length(v_extrude_scale);\r\nfloat extrude_length=length(v_extrude)*extrude_scale_length;\r\nfloat stroke_width=15.0*extrude_scale_length/u_overscale_factor;\r\nfloat radius=v_radius*extrude_scale_length;\r\nfloat distance_to_edge=abs(extrude_length-radius);\r\nfloat opacity_t=smoothstep(-stroke_width,0.0,-distance_to_edge);\r\ngl_FragColor=opacity_t*color;\r\n}", "attribute vec2 a_pos;\r\nattribute vec2 a_anchor_pos;\r\nattribute vec2 a_extrude;\r\nattribute vec2 a_placed;\r\nuniform mat4 u_matrix;\r\nuniform vec2 u_extrude_scale;\r\nuniform float u_camera_to_center_distance;\r\nvarying float v_placed;\r\nvarying float v_notUsed;\r\nvarying float v_radius;\r\nvarying vec2 v_extrude;\r\nvarying vec2 v_extrude_scale;\r\nvoid main() {\r\nvec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);\r\nhighp float camera_to_anchor_distance=projectedPoint.w;\r\nhighp float collision_perspective_ratio=clamp(\r\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);\r\ngl_Position=u_matrix*vec4(a_pos,0.0,1.0);\r\nhighp float padding_factor=1.2;gl_Position.xy+=a_extrude*u_extrude_scale*padding_factor*gl_Position.w*collision_perspective_ratio;\r\nv_placed=a_placed.x;\r\nv_notUsed=a_placed.y;\r\nv_radius=abs(a_extrude.y);v_extrude=a_extrude*padding_factor;\r\nv_extrude_scale=u_extrude_scale*u_camera_to_center_distance*collision_perspective_ratio;\r\n}"),
        rr = mr("uniform highp vec4 u_color;\r\nvoid main() {\r\ngl_FragColor=u_color;\r\n}", "attribute vec2 a_pos;\r\nuniform mat4 u_matrix;\r\nvoid main() {\r\ngl_Position=u_matrix*vec4(a_pos,0,1);\r\n}"),
        ir = mr("#pragma epgis: define highp vec4 color\r\n#pragma epgis: define lowp float opacity\r\nvoid main() {\r\n#pragma epgis: initialize highp vec4 color\r\n#pragma epgis: initialize lowp float opacity\r\ngl_FragColor=color*opacity;\r\n#ifdef OVERDRAW_INSPECTOR\r\ngl_FragColor=vec4(1.0);\r\n#endif\r\n}", "attribute vec2 a_pos;\r\nuniform mat4 u_matrix;\r\n#pragma epgis: define highp vec4 color\r\n#pragma epgis: define lowp float opacity\r\nvoid main() {\r\n#pragma epgis: initialize highp vec4 color\r\n#pragma epgis: initialize lowp float opacity\r\ngl_Position=u_matrix*vec4(a_pos,0,1);\r\n}"),
        nr = mr("varying vec2 v_pos;\r\n#pragma epgis: define highp vec4 outline_color\r\n#pragma epgis: define lowp float opacity\r\nvoid main() {\r\n#pragma epgis: initialize highp vec4 outline_color\r\n#pragma epgis: initialize lowp float opacity\r\nfloat dist=length(v_pos-gl_FragCoord.xy);\r\nfloat alpha=1.0-smoothstep(0.0,1.0,dist);\r\ngl_FragColor=outline_color*(alpha*opacity);\r\n#ifdef OVERDRAW_INSPECTOR\r\ngl_FragColor=vec4(1.0);\r\n#endif\r\n}", "attribute vec2 a_pos;\r\nuniform mat4 u_matrix;\r\nuniform vec2 u_world;\r\nvarying vec2 v_pos;\r\n#pragma epgis: define highp vec4 outline_color\r\n#pragma epgis: define lowp float opacity\r\nvoid main() {\r\n#pragma epgis: initialize highp vec4 outline_color\r\n#pragma epgis: initialize lowp float opacity\r\ngl_Position=u_matrix*vec4(a_pos,0,1);\r\nv_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\r\n}"),
        or = mr("uniform vec2 u_texsize;\r\nuniform sampler2D u_image;\r\nuniform float u_fade;\r\nvarying vec2 v_pos_a;\r\nvarying vec2 v_pos_b;\r\nvarying vec2 v_pos;\r\n#pragma epgis: define lowp float opacity\r\n#pragma epgis: define lowp vec4 pattern_from\r\n#pragma epgis: define lowp vec4 pattern_to\r\nvoid main() {\r\n#pragma epgis: initialize lowp float opacity\r\n#pragma epgis: initialize mediump vec4 pattern_from\r\n#pragma epgis: initialize mediump vec4 pattern_to\r\nvec2 pattern_tl_a=pattern_from.xy;\r\nvec2 pattern_br_a=pattern_from.zw;\r\nvec2 pattern_tl_b=pattern_to.xy;\r\nvec2 pattern_br_b=pattern_to.zw;\r\nvec2 imagecoord=mod(v_pos_a,1.0);\r\nvec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);\r\nvec4 color1=texture2D(u_image,pos);\r\nvec2 imagecoord_b=mod(v_pos_b,1.0);\r\nvec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);\r\nvec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);\r\nfloat alpha=1.0-smoothstep(0.0,1.0,dist);\r\ngl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\r\n#ifdef OVERDRAW_INSPECTOR\r\ngl_FragColor=vec4(1.0);\r\n#endif\r\n}", "uniform mat4 u_matrix;\r\nuniform vec2 u_world;\r\nuniform vec2 u_pixel_coord_upper;\r\nuniform vec2 u_pixel_coord_lower;\r\nuniform vec4 u_scale;\r\nattribute vec2 a_pos;\r\nvarying vec2 v_pos_a;\r\nvarying vec2 v_pos_b;\r\nvarying vec2 v_pos;\r\n#pragma epgis: define lowp float opacity\r\n#pragma epgis: define lowp vec4 pattern_from\r\n#pragma epgis: define lowp vec4 pattern_to\r\nvoid main() {\r\n#pragma epgis: initialize lowp float opacity\r\n#pragma epgis: initialize mediump vec4 pattern_from\r\n#pragma epgis: initialize mediump vec4 pattern_to\r\nvec2 pattern_tl_a=pattern_from.xy;\r\nvec2 pattern_br_a=pattern_from.zw;\r\nvec2 pattern_tl_b=pattern_to.xy;\r\nvec2 pattern_br_b=pattern_to.zw;\r\nfloat pixelRatio=u_scale.x;\r\nfloat tileRatio=u_scale.y;\r\nfloat fromScale=u_scale.z;\r\nfloat toScale=u_scale.w;\r\ngl_Position=u_matrix*vec4(a_pos,0,1);\r\nvec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);\r\nvec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);\r\nv_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);\r\nv_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);\r\nv_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\r\n}"),
        sr = mr("uniform vec2 u_texsize;\r\nuniform float u_fade;\r\nuniform sampler2D u_image;\r\nvarying vec2 v_pos_a;\r\nvarying vec2 v_pos_b;\r\n#pragma epgis: define lowp float opacity\r\n#pragma epgis: define lowp vec4 pattern_from\r\n#pragma epgis: define lowp vec4 pattern_to\r\nvoid main() {\r\n#pragma epgis: initialize lowp float opacity\r\n#pragma epgis: initialize mediump vec4 pattern_from\r\n#pragma epgis: initialize mediump vec4 pattern_to\r\nvec2 pattern_tl_a=pattern_from.xy;\r\nvec2 pattern_br_a=pattern_from.zw;\r\nvec2 pattern_tl_b=pattern_to.xy;\r\nvec2 pattern_br_b=pattern_to.zw;\r\nvec2 imagecoord=mod(v_pos_a,1.0);\r\nvec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);\r\nvec4 color1=texture2D(u_image,pos);\r\nvec2 imagecoord_b=mod(v_pos_b,1.0);\r\nvec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);\r\nvec4 color2=texture2D(u_image,pos2);\r\ngl_FragColor=mix(color1,color2,u_fade)*opacity;\r\n#ifdef OVERDRAW_INSPECTOR\r\ngl_FragColor=vec4(1.0);\r\n#endif\r\n}", "uniform mat4 u_matrix;\r\nuniform vec2 u_pixel_coord_upper;\r\nuniform vec2 u_pixel_coord_lower;\r\nuniform vec4 u_scale;\r\nattribute vec2 a_pos;\r\nvarying vec2 v_pos_a;\r\nvarying vec2 v_pos_b;\r\n#pragma epgis: define lowp float opacity\r\n#pragma epgis: define lowp vec4 pattern_from\r\n#pragma epgis: define lowp vec4 pattern_to\r\nvoid main() {\r\n#pragma epgis: initialize lowp float opacity\r\n#pragma epgis: initialize mediump vec4 pattern_from\r\n#pragma epgis: initialize mediump vec4 pattern_to\r\nvec2 pattern_tl_a=pattern_from.xy;\r\nvec2 pattern_br_a=pattern_from.zw;\r\nvec2 pattern_tl_b=pattern_to.xy;\r\nvec2 pattern_br_b=pattern_to.zw;\r\nfloat pixelRatio=u_scale.x;\r\nfloat tileZoomRatio=u_scale.y;\r\nfloat fromScale=u_scale.z;\r\nfloat toScale=u_scale.w;\r\nvec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);\r\nvec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);\r\ngl_Position=u_matrix*vec4(a_pos,0,1);\r\nv_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);\r\nv_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);\r\n}"),
        ar = mr("varying vec4 v_color;\r\nvoid main() {\r\ngl_FragColor=v_color;\r\n#ifdef OVERDRAW_INSPECTOR\r\ngl_FragColor=vec4(1.0);\r\n#endif\r\n}", "uniform mat4 u_matrix;\r\nuniform vec3 u_lightcolor;\r\nuniform lowp vec3 u_lightpos;\r\nuniform lowp float u_lightintensity;\r\nuniform float u_vertical_gradient;\r\nuniform lowp float u_opacity;\r\nattribute vec2 a_pos;\r\nattribute vec4 a_normal_ed;\r\nvarying vec4 v_color;\r\n#pragma epgis: define highp float base\r\n#pragma epgis: define highp float height\r\n#pragma epgis: define highp vec4 color\r\nvoid main() {\r\n#pragma epgis: initialize highp float base\r\n#pragma epgis: initialize highp float height\r\n#pragma epgis: initialize highp vec4 color\r\nvec3 normal=a_normal_ed.xyz;\r\nbase=max(0.0,base);\r\nheight=max(0.0,height);\r\nfloat t=mod(normal.x,2.0);\r\ngl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;\r\nv_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);\r\ncolor+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\r\n(1.0-u_vertical_gradient)+\n(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));\r\n}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);\r\nv_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);\r\nv_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);\r\nv_color*=u_opacity;\r\n}"),
        ur = mr("uniform vec2 u_texsize;\r\nuniform float u_fade;\r\nuniform sampler2D u_image;\r\nvarying vec2 v_pos_a;\r\nvarying vec2 v_pos_b;\r\nvarying vec4 v_lighting;\r\n#pragma epgis: define lowp float base\r\n#pragma epgis: define lowp float height\r\n#pragma epgis: define lowp vec4 pattern_from\r\n#pragma epgis: define lowp vec4 pattern_to\r\nvoid main() {\r\n#pragma epgis: initialize lowp float base\r\n#pragma epgis: initialize lowp float height\r\n#pragma epgis: initialize mediump vec4 pattern_from\r\n#pragma epgis: initialize mediump vec4 pattern_to\r\nvec2 pattern_tl_a=pattern_from.xy;\r\nvec2 pattern_br_a=pattern_from.zw;\r\nvec2 pattern_tl_b=pattern_to.xy;\r\nvec2 pattern_br_b=pattern_to.zw;\r\nvec2 imagecoord=mod(v_pos_a,1.0);\r\nvec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);\r\nvec4 color1=texture2D(u_image,pos);\r\nvec2 imagecoord_b=mod(v_pos_b,1.0);\r\nvec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);\r\nvec4 color2=texture2D(u_image,pos2);\r\nvec4 mixedColor=mix(color1,color2,u_fade);\r\ngl_FragColor=mixedColor*v_lighting;\r\n#ifdef OVERDRAW_INSPECTOR\r\ngl_FragColor=vec4(1.0);\r\n#endif\r\n}", "uniform mat4 u_matrix;\r\nuniform vec2 u_pixel_coord_upper;\r\nuniform vec2 u_pixel_coord_lower;\r\nuniform float u_height_factor;\r\nuniform vec4 u_scale;\r\nuniform float u_vertical_gradient;\r\nuniform lowp float u_opacity;\r\nuniform vec3 u_lightcolor;\r\nuniform lowp vec3 u_lightpos;\r\nuniform lowp float u_lightintensity;\r\nattribute vec2 a_pos;\r\nattribute vec4 a_normal_ed;\r\nvarying vec2 v_pos_a;\r\nvarying vec2 v_pos_b;\r\nvarying vec4 v_lighting;\r\n#pragma epgis: define lowp float base\r\n#pragma epgis: define lowp float height\r\n#pragma epgis: define lowp vec4 pattern_from\r\n#pragma epgis: define lowp vec4 pattern_to\r\nvoid main() {\r\n#pragma epgis: initialize lowp float base\r\n#pragma epgis: initialize lowp float height\r\n#pragma epgis: initialize mediump vec4 pattern_from\r\n#pragma epgis: initialize mediump vec4 pattern_to\r\nvec2 pattern_tl_a=pattern_from.xy;\r\nvec2 pattern_br_a=pattern_from.zw;\r\nvec2 pattern_tl_b=pattern_to.xy;\r\nvec2 pattern_br_b=pattern_to.zw;\r\nfloat pixelRatio=u_scale.x;\r\nfloat tileRatio=u_scale.y;\r\nfloat fromScale=u_scale.z;\r\nfloat toScale=u_scale.w;\r\nvec3 normal=a_normal_ed.xyz;\r\nfloat edgedistance=a_normal_ed.w;\r\nvec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);\r\nvec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);\r\nbase=max(0.0,base);\r\nheight=max(0.0,height);\r\nfloat t=mod(normal.x,2.0);\r\nfloat z=t > 0.0 ? height : base;\r\ngl_Position=u_matrix*vec4(a_pos,z,1);\r\nvec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\r\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);\r\nv_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);\r\nv_lighting=vec4(0.0,0.0,0.0,1.0);\r\nfloat directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);\r\ndirectional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);\r\nif (normal.y !=0.0) {directional*=(\r\n(1.0-u_vertical_gradient)+\n(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));\r\n}\r\nv_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\r\nv_lighting*=u_opacity;\r\n}"),
        cr = mr("#ifdef GL_ES\r\nprecision highp float;\r\n#endif\r\nuniform sampler2D u_image;\r\nvarying vec2 v_pos;\r\nuniform vec2 u_dimension;\r\nuniform float u_zoom;\r\nuniform float u_maxzoom;\r\nfloat getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;\r\nreturn (data.r+data.g*256.0+data.b*256.0*256.0)/4.0;\r\n}\r\nvoid main() {\r\nvec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);\r\nfloat b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);\r\nfloat c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);\r\nfloat d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);\r\nfloat e=getElevation(v_pos,0.0);\r\nfloat f=getElevation(v_pos+vec2(epsilon.x,0),0.0);\r\nfloat g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);\r\nfloat h=getElevation(v_pos+vec2(0,epsilon.y),0.0);\r\nfloat i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;\r\nvec2 deriv=vec2(\r\n(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)\r\n)/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);\r\ngl_FragColor=clamp(vec4(\r\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\r\n#ifdef OVERDRAW_INSPECTOR\r\ngl_FragColor=vec4(1.0);\r\n#endif\r\n}", "uniform mat4 u_matrix;\r\nuniform vec2 u_dimension;\r\nattribute vec2 a_pos;\r\nattribute vec2 a_texture_pos;\r\nvarying vec2 v_pos;\r\nvoid main() {\r\ngl_Position=u_matrix*vec4(a_pos,0,1);\r\nhighp vec2 epsilon=1.0/u_dimension;\r\nfloat scale=(u_dimension.x-2.0)/u_dimension.x;\r\nv_pos=(a_texture_pos/8192.0)*scale+epsilon;\r\n}"),
        hr = mr("uniform sampler2D u_image;\r\nvarying vec2 v_pos;\r\nuniform vec2 u_latrange;\r\nuniform vec2 u_light;\r\nuniform vec4 u_shadow;\r\nuniform vec4 u_highlight;\r\nuniform vec4 u_accent;\r\n#define PI 3.141592653589793\r\nvoid main() {\r\nvec4 pixel=texture2D(u_image,v_pos);\r\nvec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);\r\nfloat aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);\r\nfloat intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;\r\nfloat maxValue=0.5*PI;\r\nfloat scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);\r\nfloat shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);\r\nvec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);\r\ngl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\r\n#ifdef OVERDRAW_INSPECTOR\r\ngl_FragColor=vec4(1.0);\r\n#endif\r\n}", "uniform mat4 u_matrix;\r\nattribute vec2 a_pos;\r\nattribute vec2 a_texture_pos;\r\nvarying vec2 v_pos;\r\nvoid main() {\r\ngl_Position=u_matrix*vec4(a_pos,0,1);\r\nv_pos=a_texture_pos/8192.0;\r\n}"),
        lr = mr("uniform lowp float u_device_pixel_ratio;\r\nvarying vec2 v_width2;\r\nvarying vec2 v_normal;\r\nvarying float v_gamma_scale;\r\n#pragma epgis: define highp vec4 color\r\n#pragma epgis: define lowp float blur\r\n#pragma epgis: define lowp float opacity\r\nvoid main() {\r\n#pragma epgis: initialize highp vec4 color\r\n#pragma epgis: initialize lowp float blur\r\n#pragma epgis: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;\r\nfloat alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\r\ngl_FragColor=color*(alpha*opacity);\r\n#ifdef OVERDRAW_INSPECTOR\r\ngl_FragColor=vec4(1.0);\r\n#endif\r\n}", "\n#define scale 0.015873016\r\nattribute vec2 a_pos_normal;\r\nattribute vec4 a_data;\r\nuniform mat4 u_matrix;\r\nuniform mediump float u_ratio;\r\nuniform vec2 u_units_to_pixels;\r\nuniform lowp float u_device_pixel_ratio;\r\nvarying vec2 v_normal;\r\nvarying vec2 v_width2;\r\nvarying float v_gamma_scale;\r\nvarying highp float v_linesofar;\r\n#pragma epgis: define highp vec4 color\r\n#pragma epgis: define lowp float blur\r\n#pragma epgis: define lowp float opacity\r\n#pragma epgis: define mediump float gapwidth\r\n#pragma epgis: define lowp float offset\r\n#pragma epgis: define mediump float width\r\nvoid main() {\r\n#pragma epgis: initialize highp vec4 color\r\n#pragma epgis: initialize lowp float blur\r\n#pragma epgis: initialize lowp float opacity\r\n#pragma epgis: initialize mediump float gapwidth\r\n#pragma epgis: initialize lowp float offset\r\n#pragma epgis: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;\r\nvec2 a_extrude=a_data.xy-128.0;\r\nfloat a_direction=mod(a_data.z,4.0)-1.0;\r\nv_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;\r\nvec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;\r\nnormal.y=normal.y*2.0-1.0;\r\nv_normal=normal;gapwidth=gapwidth/2.0;\r\nfloat halfwidth=width/2.0;\r\noffset=-1.0*offset;\r\nfloat inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);\r\nfloat outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;\r\nmediump float t=1.0-abs(u);\r\nmediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);\r\nvec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);\r\ngl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);\r\nfloat extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);\r\nv_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\r\nv_width2=vec2(outset,inset);\r\n}"),
        pr = mr("uniform lowp float u_device_pixel_ratio;\r\nuniform sampler2D u_image;\r\nvarying vec2 v_width2;\r\nvarying vec2 v_normal;\r\nvarying float v_gamma_scale;\r\nvarying highp float v_lineprogress;\r\n#pragma epgis: define lowp float blur\r\n#pragma epgis: define lowp float opacity\r\nvoid main() {\r\n#pragma epgis: initialize lowp float blur\r\n#pragma epgis: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;\r\nfloat alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));\r\ngl_FragColor=color*(alpha*opacity);\r\n#ifdef OVERDRAW_INSPECTOR\r\ngl_FragColor=vec4(1.0);\r\n#endif\r\n}", "\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\r\nattribute vec2 a_pos_normal;\r\nattribute vec4 a_data;\r\nuniform mat4 u_matrix;\r\nuniform mediump float u_ratio;\r\nuniform lowp float u_device_pixel_ratio;\r\nuniform vec2 u_units_to_pixels;\r\nvarying vec2 v_normal;\r\nvarying vec2 v_width2;\r\nvarying float v_gamma_scale;\r\nvarying highp float v_lineprogress;\r\n#pragma epgis: define lowp float blur\r\n#pragma epgis: define lowp float opacity\r\n#pragma epgis: define mediump float gapwidth\r\n#pragma epgis: define lowp float offset\r\n#pragma epgis: define mediump float width\r\nvoid main() {\r\n#pragma epgis: initialize lowp float blur\r\n#pragma epgis: initialize lowp float opacity\r\n#pragma epgis: initialize mediump float gapwidth\r\n#pragma epgis: initialize lowp float offset\r\n#pragma epgis: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;\r\nvec2 a_extrude=a_data.xy-128.0;\r\nfloat a_direction=mod(a_data.z,4.0)-1.0;\r\nv_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;\r\nvec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;\r\nnormal.y=normal.y*2.0-1.0;\r\nv_normal=normal;gapwidth=gapwidth/2.0;\r\nfloat halfwidth=width/2.0;\r\noffset=-1.0*offset;\r\nfloat inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);\r\nfloat outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;\r\nmediump float t=1.0-abs(u);\r\nmediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);\r\nvec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);\r\ngl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);\r\nfloat extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);\r\nv_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\r\nv_width2=vec2(outset,inset);\r\n}"),
        fr = mr("uniform lowp float u_device_pixel_ratio;\r\nuniform vec2 u_texsize;\r\nuniform float u_fade;\r\nuniform mediump vec4 u_scale;\r\nuniform sampler2D u_image;\r\nvarying vec2 v_normal;\r\nvarying vec2 v_width2;\r\nvarying float v_linesofar;\r\nvarying float v_gamma_scale;\r\n#pragma epgis: define lowp vec4 pattern_from\r\n#pragma epgis: define lowp vec4 pattern_to\r\n#pragma epgis: define lowp float blur\r\n#pragma epgis: define lowp float opacity\r\nvoid main() {\r\n#pragma epgis: initialize mediump vec4 pattern_from\r\n#pragma epgis: initialize mediump vec4 pattern_to\r\n#pragma epgis: initialize lowp float blur\r\n#pragma epgis: initialize lowp float opacity\r\nvec2 pattern_tl_a=pattern_from.xy;\r\nvec2 pattern_br_a=pattern_from.zw;\r\nvec2 pattern_tl_b=pattern_to.xy;\r\nvec2 pattern_br_b=pattern_to.zw;\r\nfloat pixelRatio=u_scale.x;\r\nfloat tileZoomRatio=u_scale.y;\r\nfloat fromScale=u_scale.z;\r\nfloat toScale=u_scale.w;\r\nvec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);\r\nvec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);\r\nvec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);\r\nvec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;\r\nfloat alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\r\nfloat x_a=mod(v_linesofar/pattern_size_a.x,1.0);\r\nfloat x_b=mod(v_linesofar/pattern_size_b.x,1.0);float y_a=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_a.y+2.0)/2.0)/pattern_size_a.y);\r\nfloat y_b=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_b.y+2.0)/2.0)/pattern_size_b.y);\r\nvec2 pos_a=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,vec2(x_a,y_a));\r\nvec2 pos_b=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,vec2(x_b,y_b));\r\nvec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);\r\ngl_FragColor=color*alpha*opacity;\r\n#ifdef OVERDRAW_INSPECTOR\r\ngl_FragColor=vec4(1.0);\r\n#endif\r\n}", "\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\r\nattribute vec2 a_pos_normal;\r\nattribute vec4 a_data;\r\nuniform mat4 u_matrix;\r\nuniform vec2 u_units_to_pixels;\r\nuniform mediump float u_ratio;\r\nuniform lowp float u_device_pixel_ratio;\r\nvarying vec2 v_normal;\r\nvarying vec2 v_width2;\r\nvarying float v_linesofar;\r\nvarying float v_gamma_scale;\r\n#pragma epgis: define lowp float blur\r\n#pragma epgis: define lowp float opacity\r\n#pragma epgis: define lowp float offset\r\n#pragma epgis: define mediump float gapwidth\r\n#pragma epgis: define mediump float width\r\n#pragma epgis: define lowp vec4 pattern_from\r\n#pragma epgis: define lowp vec4 pattern_to\r\nvoid main() {\r\n#pragma epgis: initialize lowp float blur\r\n#pragma epgis: initialize lowp float opacity\r\n#pragma epgis: initialize lowp float offset\r\n#pragma epgis: initialize mediump float gapwidth\r\n#pragma epgis: initialize mediump float width\r\n#pragma epgis: initialize mediump vec4 pattern_from\r\n#pragma epgis: initialize mediump vec4 pattern_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;\r\nvec2 a_extrude=a_data.xy-128.0;\r\nfloat a_direction=mod(a_data.z,4.0)-1.0;\r\nfloat a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;\r\nnormal.y=normal.y*2.0-1.0;\r\nv_normal=normal;gapwidth=gapwidth/2.0;\r\nfloat halfwidth=width/2.0;\r\noffset=-1.0*offset;\r\nfloat inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);\r\nfloat outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;\r\nmediump float t=1.0-abs(u);\r\nmediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);\r\nvec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);\r\ngl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);\r\nfloat extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);\r\nv_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\r\nv_linesofar=a_linesofar;\r\nv_width2=vec2(outset,inset);\r\n}"),
        dr = mr("uniform lowp float u_device_pixel_ratio;\r\nuniform sampler2D u_image;\r\nuniform float u_sdfgamma;\r\nuniform float u_mix;\r\nvarying vec2 v_normal;\r\nvarying vec2 v_width2;\r\nvarying vec2 v_tex_a;\r\nvarying vec2 v_tex_b;\r\nvarying float v_gamma_scale;\r\n#pragma epgis: define highp vec4 color\r\n#pragma epgis: define lowp float blur\r\n#pragma epgis: define lowp float opacity\r\n#pragma epgis: define mediump float width\r\n#pragma epgis: define lowp float floorwidth\r\nvoid main() {\r\n#pragma epgis: initialize highp vec4 color\r\n#pragma epgis: initialize lowp float blur\r\n#pragma epgis: initialize lowp float opacity\r\n#pragma epgis: initialize mediump float width\r\n#pragma epgis: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;\r\nfloat alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\r\nfloat sdfdist_a=texture2D(u_image,v_tex_a).a;\r\nfloat sdfdist_b=texture2D(u_image,v_tex_b).a;\r\nfloat sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);\r\nalpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);\r\ngl_FragColor=color*(alpha*opacity);\r\n#ifdef OVERDRAW_INSPECTOR\r\ngl_FragColor=vec4(1.0);\r\n#endif\r\n}", "\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\r\nattribute vec2 a_pos_normal;\r\nattribute vec4 a_data;\r\nuniform mat4 u_matrix;\r\nuniform mediump float u_ratio;\r\nuniform lowp float u_device_pixel_ratio;\r\nuniform vec2 u_patternscale_a;\r\nuniform float u_tex_y_a;\r\nuniform vec2 u_patternscale_b;\r\nuniform float u_tex_y_b;\r\nuniform vec2 u_units_to_pixels;\r\nvarying vec2 v_normal;\r\nvarying vec2 v_width2;\r\nvarying vec2 v_tex_a;\r\nvarying vec2 v_tex_b;\r\nvarying float v_gamma_scale;\r\n#pragma epgis: define highp vec4 color\r\n#pragma epgis: define lowp float blur\r\n#pragma epgis: define lowp float opacity\r\n#pragma epgis: define mediump float gapwidth\r\n#pragma epgis: define lowp float offset\r\n#pragma epgis: define mediump float width\r\n#pragma epgis: define lowp float floorwidth\r\nvoid main() {\r\n#pragma epgis: initialize highp vec4 color\r\n#pragma epgis: initialize lowp float blur\r\n#pragma epgis: initialize lowp float opacity\r\n#pragma epgis: initialize mediump float gapwidth\r\n#pragma epgis: initialize lowp float offset\r\n#pragma epgis: initialize mediump float width\r\n#pragma epgis: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;\r\nvec2 a_extrude=a_data.xy-128.0;\r\nfloat a_direction=mod(a_data.z,4.0)-1.0;\r\nfloat a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;\r\nvec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;\r\nnormal.y=normal.y*2.0-1.0;\r\nv_normal=normal;gapwidth=gapwidth/2.0;\r\nfloat halfwidth=width/2.0;\r\noffset=-1.0*offset;\r\nfloat inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);\r\nfloat outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;\r\nmediump float t=1.0-abs(u);\r\nmediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);\r\nvec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);\r\ngl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);\r\nfloat extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);\r\nv_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\r\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);\r\nv_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);\r\nv_width2=vec2(outset,inset);\r\n}"),
        gr = mr("uniform float u_fade_t;\r\nuniform float u_opacity;\r\nuniform sampler2D u_image0;\r\nuniform sampler2D u_image1;\r\nvarying vec2 v_pos0;\r\nvarying vec2 v_pos1;\r\nuniform float u_brightness_low;\r\nuniform float u_brightness_high;\r\nuniform float u_saturation_factor;\r\nuniform float u_contrast_factor;\r\nuniform vec3 u_spin_weights;\r\nvoid main() {vec4 color0=texture2D(u_image0,v_pos0);\r\nvec4 color1=texture2D(u_image1,v_pos1);\r\nif (color0.a > 0.0) {\r\ncolor0.rgb=color0.rgb/color0.a;\r\n}\r\nif (color1.a > 0.0) {\r\ncolor1.rgb=color1.rgb/color1.a;\r\n}\r\nvec4 color=mix(color0,color1,u_fade_t);\r\ncolor.a*=u_opacity;\r\nvec3 rgb=color.rgb;rgb=vec3(\r\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;\r\nrgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);\r\nvec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);\r\ngl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\r\n#ifdef OVERDRAW_INSPECTOR\r\ngl_FragColor=vec4(1.0);\r\n#endif\r\n}", "uniform mat4 u_matrix;\r\nuniform vec2 u_tl_parent;\r\nuniform float u_scale_parent;\r\nuniform float u_buffer_scale;\r\nattribute vec2 a_pos;\r\nattribute vec2 a_texture_pos;\r\nvarying vec2 v_pos0;\r\nvarying vec2 v_pos1;\r\nvoid main() {\r\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;\r\nv_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\r\n}"),
        _r = mr("uniform sampler2D u_texture;\r\nvarying vec2 v_tex;\r\nvarying float v_fade_opacity;\r\n#pragma epgis: define lowp float opacity\r\nvoid main() {\r\n#pragma epgis: initialize lowp float opacity\r\nlowp float alpha=opacity*v_fade_opacity;\r\ngl_FragColor=texture2D(u_texture,v_tex)*alpha;\r\n#ifdef OVERDRAW_INSPECTOR\r\ngl_FragColor=vec4(1.0);\r\n#endif\r\n}", "const float PI=3.141592653589793;\r\nattribute vec4 a_pos_offset;\r\nattribute vec4 a_data;\r\nattribute vec3 a_projected_pos;\r\nattribute float a_fade_opacity;\r\nuniform bool u_is_size_zoom_constant;\r\nuniform bool u_is_size_feature_constant;\r\nuniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;\r\nuniform highp float u_pitch;\r\nuniform bool u_rotate_symbol;\r\nuniform highp float u_aspect_ratio;\r\nuniform float u_fade_change;\r\nuniform mat4 u_matrix;\r\nuniform mat4 u_label_plane_matrix;\r\nuniform mat4 u_coord_matrix;\r\nuniform bool u_is_text;\r\nuniform bool u_pitch_with_map;\r\nuniform vec2 u_texsize;\r\nvarying vec2 v_tex;\r\nvarying float v_fade_opacity;\r\n#pragma epgis: define lowp float opacity\r\nvoid main() {\r\n#pragma epgis: initialize lowp float opacity\r\nvec2 a_pos=a_pos_offset.xy;\r\nvec2 a_offset=a_pos_offset.zw;\r\nvec2 a_tex=a_data.xy;\r\nvec2 a_size=a_data.zw;\r\nhighp float segment_angle=-a_projected_pos[2];\r\nfloat size;\r\nif (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\r\nsize=mix(a_size[0],a_size[1],u_size_t)/256.0;\r\n} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\r\nsize=a_size[0]/256.0;\r\n} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\r\nsize=u_size;\r\n} else {\r\nsize=u_size;\r\n}\r\nvec4 projectedPoint=u_matrix*vec4(a_pos,0,1);\r\nhighp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\r\ncamera_to_anchor_distance/u_camera_to_center_distance :\r\nu_camera_to_center_distance/camera_to_anchor_distance;\r\nhighp float perspective_ratio=clamp(\r\n0.5+0.5*distance_ratio,0.0,4.0);\r\nsize*=perspective_ratio;\r\nfloat fontScale=u_is_text ? size/24.0 : size;\r\nhighp float symbol_rotation=0.0;\r\nif (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);\r\nvec2 a=projectedPoint.xy/projectedPoint.w;\r\nvec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;\r\nsymbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);\r\n}\r\nhighp float angle_sin=sin(segment_angle+symbol_rotation);\r\nhighp float angle_cos=cos(segment_angle+symbol_rotation);\r\nmat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);\r\nvec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);\r\ngl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);\r\nv_tex=a_tex/u_texsize;\r\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);\r\nfloat fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;\r\nv_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));\r\n}"),
        yr = mr("#define SDF_PX 8.0\r\nuniform bool u_is_halo;\r\nuniform sampler2D u_texture;\r\nuniform highp float u_gamma_scale;\r\nuniform lowp float u_device_pixel_ratio;\r\nuniform bool u_is_text;\r\nvarying vec2 v_data0;\r\nvarying vec3 v_data1;\r\n#pragma epgis: define highp vec4 fill_color\r\n#pragma epgis: define highp vec4 halo_color\r\n#pragma epgis: define lowp float opacity\r\n#pragma epgis: define lowp float halo_width\r\n#pragma epgis: define lowp float halo_blur\r\nvoid main() {\r\n#pragma epgis: initialize highp vec4 fill_color\r\n#pragma epgis: initialize highp vec4 halo_color\r\n#pragma epgis: initialize lowp float opacity\r\n#pragma epgis: initialize lowp float halo_width\r\n#pragma epgis: initialize lowp float halo_blur\r\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;\r\nvec2 tex=v_data0.xy;\r\nfloat gamma_scale=v_data1.x;\r\nfloat size=v_data1.y;\r\nfloat fade_opacity=v_data1[2];\r\nfloat fontScale=u_is_text ? size/24.0 : size;\r\nlowp vec4 color=fill_color;\r\nhighp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);\r\nlowp float buff=(256.0-64.0)/256.0;\r\nif (u_is_halo) {\r\ncolor=halo_color;\r\ngamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);\r\nbuff=(6.0-halo_width/fontScale)/SDF_PX;\r\n}\r\nlowp float dist=texture2D(u_texture,tex).a;\r\nhighp float gamma_scaled=gamma*gamma_scale;\r\nhighp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);\r\ngl_FragColor=color*(alpha*opacity*fade_opacity);\r\n#ifdef OVERDRAW_INSPECTOR\r\ngl_FragColor=vec4(1.0);\r\n#endif\r\n}", "const float PI=3.141592653589793;\r\nattribute vec4 a_pos_offset;\r\nattribute vec4 a_data;\r\nattribute vec3 a_projected_pos;\r\nattribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;\r\nuniform bool u_is_size_feature_constant;\r\nuniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;\r\nuniform mat4 u_label_plane_matrix;\r\nuniform mat4 u_coord_matrix;\r\nuniform bool u_is_text;\r\nuniform bool u_pitch_with_map;\r\nuniform highp float u_pitch;\r\nuniform bool u_rotate_symbol;\r\nuniform highp float u_aspect_ratio;\r\nuniform highp float u_camera_to_center_distance;\r\nuniform float u_fade_change;\r\nuniform vec2 u_texsize;\r\nvarying vec2 v_data0;\r\nvarying vec3 v_data1;\r\n#pragma epgis: define highp vec4 fill_color\r\n#pragma epgis: define highp vec4 halo_color\r\n#pragma epgis: define lowp float opacity\r\n#pragma epgis: define lowp float halo_width\r\n#pragma epgis: define lowp float halo_blur\r\nvoid main() {\r\n#pragma epgis: initialize highp vec4 fill_color\r\n#pragma epgis: initialize highp vec4 halo_color\r\n#pragma epgis: initialize lowp float opacity\r\n#pragma epgis: initialize lowp float halo_width\r\n#pragma epgis: initialize lowp float halo_blur\r\nvec2 a_pos=a_pos_offset.xy;\r\nvec2 a_offset=a_pos_offset.zw;\r\nvec2 a_tex=a_data.xy;\r\nvec2 a_size=a_data.zw;\r\nhighp float segment_angle=-a_projected_pos[2];\r\nfloat size;\r\nif (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\r\nsize=mix(a_size[0],a_size[1],u_size_t)/256.0;\r\n} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\r\nsize=a_size[0]/256.0;\r\n} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\r\nsize=u_size;\r\n} else {\r\nsize=u_size;\r\n}\r\nvec4 projectedPoint=u_matrix*vec4(a_pos,0,1);\r\nhighp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\r\ncamera_to_anchor_distance/u_camera_to_center_distance :\r\nu_camera_to_center_distance/camera_to_anchor_distance;\r\nhighp float perspective_ratio=clamp(\r\n0.5+0.5*distance_ratio,0.0,4.0);\r\nsize*=perspective_ratio;\r\nfloat fontScale=u_is_text ? size/24.0 : size;\r\nhighp float symbol_rotation=0.0;\r\nif (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);\r\nvec2 a=projectedPoint.xy/projectedPoint.w;\r\nvec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;\r\nsymbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);\r\n}\r\nhighp float angle_sin=sin(segment_angle+symbol_rotation);\r\nhighp float angle_cos=cos(segment_angle+symbol_rotation);\r\nmat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);\r\nvec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);\r\ngl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);\r\nfloat gamma_scale=gl_Position.w;\r\nvec2 tex=a_tex/u_texsize;\r\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);\r\nfloat fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;\r\nfloat interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));\r\nv_data0=vec2(tex.x,tex.y);\r\nv_data1=vec3(gamma_scale,size,interpolated_fade_opacity);\r\n}");
  
      function mr(t, e) {
        var r = /#pragma epgis: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,
          i = {};
        return {
          fragmentSource: t = t.replace(r, function (t, e, r, n, o) {
            return i[o] = !0, "define" === e ? "\n#ifndef HAS_UNIFORM_u_" + o + "\nvarying " + r + " " + n + " " + o + ";\n#else\nuniform " + r + " " + n + " u_" + o + ";\n#endif\n" : "\n#ifdef HAS_UNIFORM_u_" + o + "\n    " + r + " " + n + " " + o + " = u_" + o + ";\n#endif\n"
          }),
          vertexSource: e = e.replace(r, function (t, e, r, n, o) {
            var s = "float" === n ? "vec2" : "vec4",
              a = o.match(/color/) ? "color" : s;
            return i[o] ? "define" === e ? "\n#ifndef HAS_UNIFORM_u_" + o + "\nuniform lowp float u_" + o + "_t;\nattribute " + r + " " + s + " a_" + o + ";\nvarying " + r + " " + n + " " + o + ";\n#else\nuniform " + r + " " + n + " u_" + o + ";\n#endif\n" : "vec4" === a ? "\n#ifndef HAS_UNIFORM_u_" + o + "\n    " + o + " = a_" + o + ";\n#else\n    " + r + " " + n + " " + o + " = u_" + o + ";\n#endif\n" : "\n#ifndef HAS_UNIFORM_u_" + o + "\n    " + o + " = unpack_mix_" + a + "(a_" + o + ", u_" + o + "_t);\n#else\n    " + r + " " + n + " " + o + " = u_" + o + ";\n#endif\n" : "define" === e ? "\n#ifndef HAS_UNIFORM_u_" + o + "\nuniform lowp float u_" + o + "_t;\nattribute " + r + " " + s + " a_" + o + ";\n#else\nuniform " + r + " " + n + " u_" + o + ";\n#endif\n" : "vec4" === a ? "\n#ifndef HAS_UNIFORM_u_" + o + "\n    " + r + " " + n + " " + o + " = a_" + o + ";\n#else\n    " + r + " " + n + " " + o + " = u_" + o + ";\n#endif\n" : "\n#ifndef HAS_UNIFORM_u_" + o + "\n    " + r + " " + n + " " + o + " = unpack_mix_" + a + "(a_" + o + ", u_" + o + "_t);\n#else\n    " + r + " " + n + " " + o + " = u_" + o + ";\n#endif\n"
          })
        }
      }
      var vr = Object.freeze({
          prelude: Ye,
          background: We,
          backgroundPattern: He,
          circle: Ke,
          clippingMask: Je,
          heatmap: Qe,
          heatmapTexture: $e,
          collisionBox: tr,
          collisionCircle: er,
          debug: rr,
          fill: ir,
          fillOutline: nr,
          fillOutlinePattern: or,
          fillPattern: sr,
          fillExtrusion: ar,
          fillExtrusionPattern: ur,
          hillshadePrepare: cr,
          hillshade: hr,
          line: lr,
          lineGradient: pr,
          linePattern: fr,
          lineSDF: dr,
          raster: gr,
          symbolIcon: _r,
          symbolSDF: yr
        }),
        xr = function () {
          this.boundProgram = null, this.boundLayoutVertexBuffer = null, this.boundPaintVertexBuffers = [], this.boundIndexBuffer = null, this.boundVertexOffset = null, this.boundDynamicVertexBuffer = null, this.vao = null;
        };
      xr.prototype.bind = function (t, e, r, i, n, o, s, a) {
        this.context = t;
        for (var u = this.boundPaintVertexBuffers.length !== i.length, c = 0; !u && c < i.length; c++) this.boundPaintVertexBuffers[c] !== i[c] && (u = !0);
        var h = !this.vao || this.boundProgram !== e || this.boundLayoutVertexBuffer !== r || u || this.boundIndexBuffer !== n || this.boundVertexOffset !== o || this.boundDynamicVertexBuffer !== s || this.boundDynamicVertexBuffer2 !== a;
        !t.extVertexArrayObject || h ? this.freshBind(e, r, i, n, o, s, a) : (t.bindVertexArrayOES.set(this.vao), s && s.bind(), n && n.dynamicDraw && n.bind(), a && a.bind());
      }, xr.prototype.freshBind = function (t, e, r, i, n, o, s) {
        var a, u = t.numAttributes,
          c = this.context,
          h = c.gl;
        if (c.extVertexArrayObject) this.vao && this.destroy(), this.vao = c.extVertexArrayObject.createVertexArrayOES(), c.bindVertexArrayOES.set(this.vao), a = 0, this.boundProgram = t, this.boundLayoutVertexBuffer = e, this.boundPaintVertexBuffers = r, this.boundIndexBuffer = i, this.boundVertexOffset = n, this.boundDynamicVertexBuffer = o, this.boundDynamicVertexBuffer2 = s;
        else {
          a = c.currentNumAttributes || 0;
          for (var l = u; l < a; l++) h.disableVertexAttribArray(l);
        }
        e.enableAttributes(h, t);
        for (var p = 0, f = r; p < f.length; p += 1) {
          f[p].enableAttributes(h, t);
        }
        o && o.enableAttributes(h, t), s && s.enableAttributes(h, t), e.bind(), e.setVertexAttribPointers(h, t, n);
        for (var d = 0, g = r; d < g.length; d += 1) {
          var _ = g[d];
          _.bind(), _.setVertexAttribPointers(h, t, n);
        }
        o && (o.bind(), o.setVertexAttribPointers(h, t, n)), i && i.bind(), s && (s.bind(), s.setVertexAttribPointers(h, t, n)), c.currentNumAttributes = u;
      }, xr.prototype.destroy = function () {
        this.vao && (this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao), this.vao = null);
      };
      var wr = function (t, e, r, i, n) {
        var o = t.gl;
        this.program = o.createProgram();
        var s = r.defines();
        n && s.push("#define OVERDRAW_INSPECTOR;");
        var a = s.concat(Ye.fragmentSource, e.fragmentSource).join("\n"),
          u = s.concat(Ye.vertexSource, e.vertexSource).join("\n"),
          c = o.createShader(o.FRAGMENT_SHADER);
        o.shaderSource(c, a), o.compileShader(c), o.attachShader(this.program, c);
        var h = o.createShader(o.VERTEX_SHADER);
        o.shaderSource(h, u), o.compileShader(h), o.attachShader(this.program, h);
        for (var l = r.layoutAttributes || [], p = 0; p < l.length; p++) o.bindAttribLocation(this.program, p, l[p].name);
        o.linkProgram(this.program), this.numAttributes = o.getProgramParameter(this.program, o.ACTIVE_ATTRIBUTES), this.attributes = {};
        for (var f = {}, d = 0; d < this.numAttributes; d++) {
          var g = o.getActiveAttrib(this.program, d);
          g && (this.attributes[g.name] = o.getAttribLocation(this.program, g.name));
        }
        for (var _ = o.getProgramParameter(this.program, o.ACTIVE_UNIFORMS), y = 0; y < _; y++) {
          var m = o.getActiveUniform(this.program, y);
          m && (f[m.name] = o.getUniformLocation(this.program, m.name));
        }
        this.fixedUniforms = i(t, f), this.binderUniforms = r.getUniforms(t, f);
      };
  
      function br(e, r, i) {
        var n = 1 / me(i, 1, r.transform.tileZoom),
          o = Math.pow(2, i.tileID.overscaledZ),
          s = i.tileSize * Math.pow(2, r.transform.tileZoom) / o,
          a = s * (i.tileID.canonical.x + i.tileID.wrap * o),
          u = s * i.tileID.canonical.y;
        return {
          u_image: 0,
          u_texsize: i.imageAtlasTexture.size,
          u_scale: [t.browser.devicePixelRatio, n, e.fromScale, e.toScale],
          u_fade: e.t,
          u_pixel_coord_upper: [a >> 16, u >> 16],
          u_pixel_coord_lower: [65535 & a, 65535 & u]
        }
      }
      wr.prototype.draw = function (t, e, r, i, n, o, s, a, u, c, h, l, p, f, d, g) {
        var _, y = t.gl;
        for (var m in t.program.set(this.program), t.setDepthMode(r), t.setStencilMode(i), t.setColorMode(n), t.setCullFace(o), this.fixedUniforms) this.fixedUniforms[m].set(s[m]);
        f && f.setUniforms(t, this.binderUniforms, l, {
          zoom: p
        });
        for (var v = (_ = {}, _[y.LINES] = 2, _[y.TRIANGLES] = 3, _[y.LINE_STRIP] = 1, _)[e], x = 0, w = h.get(); x < w.length; x += 1) {
          var b = w[x],
            E = b.vaos || (b.vaos = {});
          (E[a] || (E[a] = new xr)).bind(t, this, u, f ? f.getPaintVertexBuffers() : [], c, b.vertexOffset, d, g), y.drawElements(e, b.primitiveLength * v, y.UNSIGNED_SHORT, b.primitiveOffset * v * 2);
        }
      };
      var Er = function (e, r, i, n) {
          var o = r.style.light,
            s = o.properties.get("position"),
            a = [s.x, s.y, s.z],
            u = t.create$1();
          "viewport" === o.properties.get("anchor") && t.fromRotation(u, -r.transform.angle), t.transformMat3(a, a, u);
          var c = o.properties.get("color");
          return {
            u_matrix: e,
            u_lightpos: a,
            u_lightintensity: o.properties.get("intensity"),
            u_lightcolor: [c.r, c.g, c.b],
            u_vertical_gradient: +i,
            u_opacity: n
          }
        },
        Lr = function (e, r, i, n, o, s, a) {
          return t.extend(Er(e, r, i, n), br(s, r, a), {
            u_height_factor: -Math.pow(2, o.overscaledZ) / a.tileSize / 8
          })
        },
        Sr = function (t) {
          return {
            u_matrix: t
          }
        },
        Cr = function (e, r, i, n) {
          return t.extend(Sr(e), br(i, r, n))
        },
        Ir = function (t, e) {
          return {
            u_matrix: t,
            u_world: e
          }
        },
        Mr = function (e, r, i, n, o) {
          return t.extend(Cr(e, r, i, n), {
            u_world: o
          })
        },
        Tr = function (e, r, i, n) {
          var o, s, a = e.transform;
          if ("map" === n.paint.get("circle-pitch-alignment")) {
            var u = me(i, 1, a.zoom);
            o = !0, s = [u, u];
          } else o = !1, s = a.pixelsToGLUnits;
          return {
            u_camera_to_center_distance: a.cameraToCenterDistance,
            u_scale_with_map: +("map" === n.paint.get("circle-pitch-scale")),
            u_matrix: e.translatePosMatrix(r.posMatrix, i, n.paint.get("circle-translate"), n.paint.get("circle-translate-anchor")),
            u_pitch_with_map: +o,
            u_device_pixel_ratio: t.browser.devicePixelRatio,
            u_extrude_scale: s
          }
        },
        Pr = function (e, r) {
          return {
            u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
            u_camera_to_center_distance: new t.Uniform1f(e, r.u_camera_to_center_distance),
            u_pixels_to_tile_units: new t.Uniform1f(e, r.u_pixels_to_tile_units),
            u_extrude_scale: new t.Uniform2f(e, r.u_extrude_scale),
            u_overscale_factor: new t.Uniform1f(e, r.u_overscale_factor)
          }
        },
        Dr = function (t, e, r) {
          var i = me(r, 1, e.zoom),
            n = Math.pow(2, e.zoom - r.tileID.overscaledZ),
            o = r.tileID.overscaleFactor();
          return {
            u_matrix: t,
            u_camera_to_center_distance: e.cameraToCenterDistance,
            u_pixels_to_tile_units: i,
            u_extrude_scale: [e.pixelsToGLUnits[0] / (i * n), e.pixelsToGLUnits[1] / (i * n)],
            u_overscale_factor: o
          }
        },
        Nr = function (t, e) {
          return {
            u_matrix: t,
            u_color: e
          }
        },
        Rr = function (t) {
          return {
            u_matrix: t
          }
        },
        Or = function (t, e, r, i) {
          return {
            u_matrix: t,
            u_extrude_scale: me(e, 1, r),
            u_intensity: i
          }
        },
        Ar = function (e, r, i, n) {
          var o = t.create();
          t.ortho(o, 0, e.width, e.height, 0, 0, 1);
          var s = e.context.gl;
          return {
            u_matrix: o,
            u_world: [s.drawingBufferWidth, s.drawingBufferHeight],
            u_image: i,
            u_color_ramp: n,
            u_opacity: r.paint.get("heatmap-opacity")
          }
        },
        Fr = function (t, e, r) {
          var i = r.paint.get("hillshade-shadow-color"),
            n = r.paint.get("hillshade-highlight-color"),
            o = r.paint.get("hillshade-accent-color"),
            s = r.paint.get("hillshade-illumination-direction") * (Math.PI / 180);
          "viewport" === r.paint.get("hillshade-illumination-anchor") && (s -= t.transform.angle);
          var a = !t.options.moving;
          return {
            u_matrix: t.transform.calculatePosMatrix(e.tileID.toUnwrapped(), a),
            u_image: 0,
            u_latrange: Br(t, e.tileID),
            u_light: [r.paint.get("hillshade-exaggeration"), s],
            u_shadow: i,
            u_highlight: n,
            u_accent: o
          }
        },
        kr = function (e, r) {
          var i = e.dem.stride,
            n = t.create();
          return t.ortho(n, 0, t.EXTENT, -t.EXTENT, 0, 0, 1), t.translate(n, n, [0, -t.EXTENT, 0]), {
            u_matrix: n,
            u_image: 1,
            u_dimension: [i, i],
            u_zoom: e.tileID.overscaledZ,
            u_maxzoom: r
          }
        };
  
      function Br(e, r) {
        var i = Math.pow(2, r.canonical.z),
          n = r.canonical.y;
        return [new O[t.config.PROJECT_TYPE].MercatorCoordinate(0, n / i).toLngLat().lat, new O[t.config.PROJECT_TYPE].MercatorCoordinate(0, (n + 1) / i).toLngLat().lat]
      }
      var zr = function (e, r, i) {
          var n = e.transform;
          return {
            u_matrix: Gr(e, r, i),
            u_ratio: 1 / me(r, 1, n.zoom),
            u_device_pixel_ratio: t.browser.devicePixelRatio,
            u_units_to_pixels: [1 / n.pixelsToGLUnits[0], 1 / n.pixelsToGLUnits[1]]
          }
        },
        Vr = function (e, r, i) {
          return t.extend(zr(e, r, i), {
            u_image: 0
          })
        },
        Ur = function (e, r, i, n) {
          var o = e.transform,
            s = jr(r, o);
          return {
            u_matrix: Gr(e, r, i),
            u_texsize: r.imageAtlasTexture.size,
            u_ratio: 1 / me(r, 1, o.zoom),
            u_device_pixel_ratio: t.browser.devicePixelRatio,
            u_image: 0,
            u_scale: [t.browser.devicePixelRatio, s, n.fromScale, n.toScale],
            u_fade: n.t,
            u_units_to_pixels: [1 / o.pixelsToGLUnits[0], 1 / o.pixelsToGLUnits[1]]
          }
        },
        qr = function (e, r, i, n, o) {
          var s = e.transform,
            a = e.lineAtlas,
            u = jr(r, s),
            c = "round" === i.layout.get("line-cap"),
            h = a.getDash(n.from, c),
            l = a.getDash(n.to, c),
            p = h.width * o.fromScale,
            f = l.width * o.toScale;
          return t.extend(zr(e, r, i), {
            u_patternscale_a: [u / p, -h.height / 2],
            u_patternscale_b: [u / f, -l.height / 2],
            u_sdfgamma: a.width / (256 * Math.min(p, f) * t.browser.devicePixelRatio) / 2,
            u_image: 0,
            u_tex_y_a: h.y,
            u_tex_y_b: l.y,
            u_mix: o.t
          })
        };
  
      function jr(t, e) {
        return 1 / me(t, 1, e.tileZoom)
      }
  
      function Gr(t, e, r) {
        return t.translatePosMatrix(e.tileID.posMatrix, e, r.paint.get("line-translate"), r.paint.get("line-translate-anchor"))
      }
      var Xr = function (t, e, r, i, n) {
        return {
          u_matrix: t,
          u_tl_parent: e,
          u_scale_parent: r,
          u_buffer_scale: 1,
          u_fade_t: i.mix,
          u_opacity: i.opacity * n.paint.get("raster-opacity"),
          u_image0: 0,
          u_image1: 1,
          u_brightness_low: n.paint.get("raster-brightness-min"),
          u_brightness_high: n.paint.get("raster-brightness-max"),
          u_saturation_factor: (s = n.paint.get("raster-saturation"), s > 0 ? 1 - 1 / (1.001 - s) : -s),
          u_contrast_factor: (o = n.paint.get("raster-contrast"), o > 0 ? 1 / (1 - o) : 1 + o),
          u_spin_weights: Zr(n.paint.get("raster-hue-rotate"))
        };
        var o, s;
      };
  
      function Zr(t) {
        t *= Math.PI / 180;
        var e = Math.sin(t),
          r = Math.cos(t);
        return [(2 * r + 1) / 3, (-Math.sqrt(3) * e - r + 1) / 3, (Math.sqrt(3) * e - r + 1) / 3]
      }
      var Yr = function (t, e, r, i, n, o, s, a, u, c) {
          var h = n.transform;
          return {
            u_is_size_zoom_constant: +("constant" === t || "source" === t),
            u_is_size_feature_constant: +("constant" === t || "camera" === t),
            u_size_t: e ? e.uSizeT : 0,
            u_size: e ? e.uSize : 0,
            u_camera_to_center_distance: h.cameraToCenterDistance,
            u_pitch: h.pitch / 360 * 2 * Math.PI,
            u_rotate_symbol: +r,
            u_aspect_ratio: h.width / h.height,
            u_fade_change: n.options.fadeDuration ? n.symbolFadeChange : 1,
            u_matrix: o,
            u_label_plane_matrix: s,
            u_coord_matrix: a,
            u_is_text: +u,
            u_pitch_with_map: +i,
            u_texsize: c,
            u_texture: 0
          }
        },
        Wr = function (e, r, i, n, o, s, a, u, c, h, l) {
          var p = o.transform;
          return t.extend(Yr(e, r, i, n, o, s, a, u, c, h), {
            u_gamma_scale: n ? Math.cos(p._pitch) * p.cameraToCenterDistance : 1,
            u_device_pixel_ratio: t.browser.devicePixelRatio,
            u_is_halo: +l
          })
        },
        Hr = function (t, e, r) {
          return {
            u_matrix: t,
            u_opacity: e,
            u_color: r
          }
        },
        Kr = function (e, r, i, n, o, s) {
          return t.extend(function (t, e, r, i) {
            var n = r.imageManager.getPattern(t.from),
              o = r.imageManager.getPattern(t.to),
              s = r.imageManager.getPixelSize(),
              a = s.width,
              u = s.height,
              c = Math.pow(2, i.tileID.overscaledZ),
              h = i.tileSize * Math.pow(2, r.transform.tileZoom) / c,
              l = h * (i.tileID.canonical.x + i.tileID.wrap * c),
              p = h * i.tileID.canonical.y;
            return {
              u_image: 0,
              u_pattern_tl_a: n.tl,
              u_pattern_br_a: n.br,
              u_pattern_tl_b: o.tl,
              u_pattern_br_b: o.br,
              u_texsize: [a, u],
              u_mix: e.t,
              u_pattern_size_a: n.displaySize,
              u_pattern_size_b: o.displaySize,
              u_scale_a: e.fromScale,
              u_scale_b: e.toScale,
              u_tile_units_to_pixels: 1 / me(i, 1, r.transform.tileZoom),
              u_pixel_coord_upper: [l >> 16, p >> 16],
              u_pixel_coord_lower: [65535 & l, 65535 & p]
            }
          }(n, s, i, o), {
            u_matrix: e,
            u_opacity: r
          })
        },
        Jr = {
          fillExtrusion: function (e, r) {
            return {
              u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
              u_lightpos: new t.Uniform3f(e, r.u_lightpos),
              u_lightintensity: new t.Uniform1f(e, r.u_lightintensity),
              u_lightcolor: new t.Uniform3f(e, r.u_lightcolor),
              u_vertical_gradient: new t.Uniform1f(e, r.u_vertical_gradient),
              u_opacity: new t.Uniform1f(e, r.u_opacity)
            }
          },
          fillExtrusionPattern: function (e, r) {
            return {
              u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
              u_lightpos: new t.Uniform3f(e, r.u_lightpos),
              u_lightintensity: new t.Uniform1f(e, r.u_lightintensity),
              u_lightcolor: new t.Uniform3f(e, r.u_lightcolor),
              u_vertical_gradient: new t.Uniform1f(e, r.u_vertical_gradient),
              u_height_factor: new t.Uniform1f(e, r.u_height_factor),
              u_image: new t.Uniform1i(e, r.u_image),
              u_texsize: new t.Uniform2f(e, r.u_texsize),
              u_pixel_coord_upper: new t.Uniform2f(e, r.u_pixel_coord_upper),
              u_pixel_coord_lower: new t.Uniform2f(e, r.u_pixel_coord_lower),
              u_scale: new t.Uniform4f(e, r.u_scale),
              u_fade: new t.Uniform1f(e, r.u_fade),
              u_opacity: new t.Uniform1f(e, r.u_opacity)
            }
          },
          fill: function (e, r) {
            return {
              u_matrix: new t.UniformMatrix4f(e, r.u_matrix)
            }
          },
          fillPattern: function (e, r) {
            return {
              u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
              u_image: new t.Uniform1i(e, r.u_image),
              u_texsize: new t.Uniform2f(e, r.u_texsize),
              u_pixel_coord_upper: new t.Uniform2f(e, r.u_pixel_coord_upper),
              u_pixel_coord_lower: new t.Uniform2f(e, r.u_pixel_coord_lower),
              u_scale: new t.Uniform4f(e, r.u_scale),
              u_fade: new t.Uniform1f(e, r.u_fade)
            }
          },
          fillOutline: function (e, r) {
            return {
              u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
              u_world: new t.Uniform2f(e, r.u_world)
            }
          },
          fillOutlinePattern: function (e, r) {
            return {
              u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
              u_world: new t.Uniform2f(e, r.u_world),
              u_image: new t.Uniform1i(e, r.u_image),
              u_texsize: new t.Uniform2f(e, r.u_texsize),
              u_pixel_coord_upper: new t.Uniform2f(e, r.u_pixel_coord_upper),
              u_pixel_coord_lower: new t.Uniform2f(e, r.u_pixel_coord_lower),
              u_scale: new t.Uniform4f(e, r.u_scale),
              u_fade: new t.Uniform1f(e, r.u_fade)
            }
          },
          circle: function (e, r) {
            return {
              u_camera_to_center_distance: new t.Uniform1f(e, r.u_camera_to_center_distance),
              u_scale_with_map: new t.Uniform1i(e, r.u_scale_with_map),
              u_pitch_with_map: new t.Uniform1i(e, r.u_pitch_with_map),
              u_extrude_scale: new t.Uniform2f(e, r.u_extrude_scale),
              u_device_pixel_ratio: new t.Uniform1f(e, r.u_device_pixel_ratio),
              u_matrix: new t.UniformMatrix4f(e, r.u_matrix)
            }
          },
          collisionBox: Pr,
          collisionCircle: Pr,
          debug: function (e, r) {
            return {
              u_color: new t.UniformColor(e, r.u_color),
              u_matrix: new t.UniformMatrix4f(e, r.u_matrix)
            }
          },
          clippingMask: function (e, r) {
            return {
              u_matrix: new t.UniformMatrix4f(e, r.u_matrix)
            }
          },
          heatmap: function (e, r) {
            return {
              u_extrude_scale: new t.Uniform1f(e, r.u_extrude_scale),
              u_intensity: new t.Uniform1f(e, r.u_intensity),
              u_matrix: new t.UniformMatrix4f(e, r.u_matrix)
            }
          },
          heatmapTexture: function (e, r) {
            return {
              u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
              u_world: new t.Uniform2f(e, r.u_world),
              u_image: new t.Uniform1i(e, r.u_image),
              u_color_ramp: new t.Uniform1i(e, r.u_color_ramp),
              u_opacity: new t.Uniform1f(e, r.u_opacity)
            }
          },
          hillshade: function (e, r) {
            return {
              u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
              u_image: new t.Uniform1i(e, r.u_image),
              u_latrange: new t.Uniform2f(e, r.u_latrange),
              u_light: new t.Uniform2f(e, r.u_light),
              u_shadow: new t.UniformColor(e, r.u_shadow),
              u_highlight: new t.UniformColor(e, r.u_highlight),
              u_accent: new t.UniformColor(e, r.u_accent)
            }
          },
          hillshadePrepare: function (e, r) {
            return {
              u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
              u_image: new t.Uniform1i(e, r.u_image),
              u_dimension: new t.Uniform2f(e, r.u_dimension),
              u_zoom: new t.Uniform1f(e, r.u_zoom),
              u_maxzoom: new t.Uniform1f(e, r.u_maxzoom)
            }
          },
          line: function (e, r) {
            return {
              u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
              u_ratio: new t.Uniform1f(e, r.u_ratio),
              u_device_pixel_ratio: new t.Uniform1f(e, r.u_device_pixel_ratio),
              u_units_to_pixels: new t.Uniform2f(e, r.u_units_to_pixels)
            }
          },
          lineGradient: function (e, r) {
            return {
              u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
              u_ratio: new t.Uniform1f(e, r.u_ratio),
              u_device_pixel_ratio: new t.Uniform1f(e, r.u_device_pixel_ratio),
              u_units_to_pixels: new t.Uniform2f(e, r.u_units_to_pixels),
              u_image: new t.Uniform1i(e, r.u_image)
            }
          },
          linePattern: function (e, r) {
            return {
              u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
              u_texsize: new t.Uniform2f(e, r.u_texsize),
              u_ratio: new t.Uniform1f(e, r.u_ratio),
              u_device_pixel_ratio: new t.Uniform1f(e, r.u_device_pixel_ratio),
              u_image: new t.Uniform1i(e, r.u_image),
              u_units_to_pixels: new t.Uniform2f(e, r.u_units_to_pixels),
              u_scale: new t.Uniform4f(e, r.u_scale),
              u_fade: new t.Uniform1f(e, r.u_fade)
            }
          },
          lineSDF: function (e, r) {
            return {
              u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
              u_ratio: new t.Uniform1f(e, r.u_ratio),
              u_device_pixel_ratio: new t.Uniform1f(e, r.u_device_pixel_ratio),
              u_units_to_pixels: new t.Uniform2f(e, r.u_units_to_pixels),
              u_patternscale_a: new t.Uniform2f(e, r.u_patternscale_a),
              u_patternscale_b: new t.Uniform2f(e, r.u_patternscale_b),
              u_sdfgamma: new t.Uniform1f(e, r.u_sdfgamma),
              u_image: new t.Uniform1i(e, r.u_image),
              u_tex_y_a: new t.Uniform1f(e, r.u_tex_y_a),
              u_tex_y_b: new t.Uniform1f(e, r.u_tex_y_b),
              u_mix: new t.Uniform1f(e, r.u_mix)
            }
          },
          raster: function (e, r) {
            return {
              u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
              u_tl_parent: new t.Uniform2f(e, r.u_tl_parent),
              u_scale_parent: new t.Uniform1f(e, r.u_scale_parent),
              u_buffer_scale: new t.Uniform1f(e, r.u_buffer_scale),
              u_fade_t: new t.Uniform1f(e, r.u_fade_t),
              u_opacity: new t.Uniform1f(e, r.u_opacity),
              u_image0: new t.Uniform1i(e, r.u_image0),
              u_image1: new t.Uniform1i(e, r.u_image1),
              u_brightness_low: new t.Uniform1f(e, r.u_brightness_low),
              u_brightness_high: new t.Uniform1f(e, r.u_brightness_high),
              u_saturation_factor: new t.Uniform1f(e, r.u_saturation_factor),
              u_contrast_factor: new t.Uniform1f(e, r.u_contrast_factor),
              u_spin_weights: new t.Uniform3f(e, r.u_spin_weights)
            }
          },
          symbolIcon: function (e, r) {
            return {
              u_is_size_zoom_constant: new t.Uniform1i(e, r.u_is_size_zoom_constant),
              u_is_size_feature_constant: new t.Uniform1i(e, r.u_is_size_feature_constant),
              u_size_t: new t.Uniform1f(e, r.u_size_t),
              u_size: new t.Uniform1f(e, r.u_size),
              u_camera_to_center_distance: new t.Uniform1f(e, r.u_camera_to_center_distance),
              u_pitch: new t.Uniform1f(e, r.u_pitch),
              u_rotate_symbol: new t.Uniform1i(e, r.u_rotate_symbol),
              u_aspect_ratio: new t.Uniform1f(e, r.u_aspect_ratio),
              u_fade_change: new t.Uniform1f(e, r.u_fade_change),
              u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
              u_label_plane_matrix: new t.UniformMatrix4f(e, r.u_label_plane_matrix),
              u_coord_matrix: new t.UniformMatrix4f(e, r.u_coord_matrix),
              u_is_text: new t.Uniform1f(e, r.u_is_text),
              u_pitch_with_map: new t.Uniform1i(e, r.u_pitch_with_map),
              u_texsize: new t.Uniform2f(e, r.u_texsize),
              u_texture: new t.Uniform1i(e, r.u_texture)
            }
          },
          symbolSDF: function (e, r) {
            return {
              u_is_size_zoom_constant: new t.Uniform1i(e, r.u_is_size_zoom_constant),
              u_is_size_feature_constant: new t.Uniform1i(e, r.u_is_size_feature_constant),
              u_size_t: new t.Uniform1f(e, r.u_size_t),
              u_size: new t.Uniform1f(e, r.u_size),
              u_camera_to_center_distance: new t.Uniform1f(e, r.u_camera_to_center_distance),
              u_pitch: new t.Uniform1f(e, r.u_pitch),
              u_rotate_symbol: new t.Uniform1i(e, r.u_rotate_symbol),
              u_aspect_ratio: new t.Uniform1f(e, r.u_aspect_ratio),
              u_fade_change: new t.Uniform1f(e, r.u_fade_change),
              u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
              u_label_plane_matrix: new t.UniformMatrix4f(e, r.u_label_plane_matrix),
              u_coord_matrix: new t.UniformMatrix4f(e, r.u_coord_matrix),
              u_is_text: new t.Uniform1f(e, r.u_is_text),
              u_pitch_with_map: new t.Uniform1i(e, r.u_pitch_with_map),
              u_texsize: new t.Uniform2f(e, r.u_texsize),
              u_texture: new t.Uniform1i(e, r.u_texture),
              u_gamma_scale: new t.Uniform1f(e, r.u_gamma_scale),
              u_device_pixel_ratio: new t.Uniform1f(e, r.u_device_pixel_ratio),
              u_is_halo: new t.Uniform1f(e, r.u_is_halo)
            }
          },
          background: function (e, r) {
            return {
              u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
              u_opacity: new t.Uniform1f(e, r.u_opacity),
              u_color: new t.UniformColor(e, r.u_color)
            }
          },
          backgroundPattern: function (e, r) {
            return {
              u_matrix: new t.UniformMatrix4f(e, r.u_matrix),
              u_opacity: new t.Uniform1f(e, r.u_opacity),
              u_image: new t.Uniform1i(e, r.u_image),
              u_pattern_tl_a: new t.Uniform2f(e, r.u_pattern_tl_a),
              u_pattern_br_a: new t.Uniform2f(e, r.u_pattern_br_a),
              u_pattern_tl_b: new t.Uniform2f(e, r.u_pattern_tl_b),
              u_pattern_br_b: new t.Uniform2f(e, r.u_pattern_br_b),
              u_texsize: new t.Uniform2f(e, r.u_texsize),
              u_mix: new t.Uniform1f(e, r.u_mix),
              u_pattern_size_a: new t.Uniform2f(e, r.u_pattern_size_a),
              u_pattern_size_b: new t.Uniform2f(e, r.u_pattern_size_b),
              u_scale_a: new t.Uniform1f(e, r.u_scale_a),
              u_scale_b: new t.Uniform1f(e, r.u_scale_b),
              u_pixel_coord_upper: new t.Uniform2f(e, r.u_pixel_coord_upper),
              u_pixel_coord_lower: new t.Uniform2f(e, r.u_pixel_coord_lower),
              u_tile_units_to_pixels: new t.Uniform1f(e, r.u_tile_units_to_pixels)
            }
          }
        };
  
      function Qr(e, r) {
        for (var i = e.sort(function (t, e) {
            return t.tileID.isLessThan(e.tileID) ? -1 : e.tileID.isLessThan(t.tileID) ? 1 : 0
          }), n = 0; n < i.length; n++) {
          var o = {},
            s = i[n],
            a = i.slice(n + 1);
          $r(s.tileID.wrapped(), s.tileID, a, new t.OverscaledTileID(0, s.tileID.wrap + 1, 0, 0, 0), o), s.setMask(o, r);
        }
      }
  
      function $r(e, r, i, n, o) {
        for (var s = 0; s < i.length; s++) {
          var a = i[s];
          if (n.isLessThan(a.tileID)) break;
          if (r.key === a.tileID.key) return;
          if (a.tileID.isChildOf(r)) {
            for (var u = r.children(1 / 0), c = 0; c < u.length; c++) {
              $r(e, u[c], i.slice(s), n, o);
            }
            return
          }
        }
        var h = r.overscaledZ - e.overscaledZ,
          l = new t.CanonicalTileID(h, r.canonical.x - (e.canonical.x << h), r.canonical.y - (e.canonical.y << h));
        o[l.key] = o[l.key] || l;
      }
  
      function ti(t, e, r, i, n) {
        for (var o = t.context, s = o.gl, a = n ? t.useProgram("collisionCircle") : t.useProgram("collisionBox"), u = 0; u < i.length; u++) {
          var c = i[u],
            h = e.getTile(c),
            l = h.getBucket(r);
          if (l) {
            var p = n ? l.collisionCircle : l.collisionBox;
            p && a.draw(o, n ? s.TRIANGLES : s.LINES, Rt.disabled, Ot.disabled, t.colorModeForRenderPass(), Ft.disabled, Dr(c.posMatrix, t.transform, h), r.id, p.layoutVertexBuffer, p.indexBuffer, p.segments, null, t.transform.zoom, null, null, p.collisionVertexBuffer);
          }
        }
      }
      var ei = t.identity(new Float32Array(16));
  
      function ri(e, r, i, n, o, s) {
        var a = t.getAnchorAlignment(e),
          u = -(a.horizontalAlign - .5) * r,
          c = -(a.verticalAlign - .5) * i,
          h = t.evaluateRadialOffset(e, n);
        return new t.Point((u / o + h[0]) * s, (c / o + h[1]) * s)
      }
  
      function ii(e, r, i, n, o, s, a, u, c, h) {
        var l = e.text.placedSymbolArray,
          p = e.text.dynamicLayoutVertexArray;
        p.clear();
        for (var f = 0; f < l.length; f++) {
          var d = l.get(f),
            g = e.allowVerticalPlacement && !d.placedOrientation,
            _ = d.hidden || !d.crossTileID || g ? null : n[d.crossTileID];
          if (_) {
            var y = new t.Point(d.anchorX, d.anchorY),
              m = oe(y, i ? u : a),
              v = .5 + s.cameraToCenterDistance / m.signedDistanceFromCamera * .5,
              x = o.evaluateSizeForFeature(e.textSizeData, h, d) * v / t.ONE_EM;
            i && (x *= e.tilePixelRatio / c);
            for (var w = _.width, b = _.height, E = _.radialOffset, L = _.textBoxScale, S = ri(_.anchor, w, b, E, L, x), C = i ? oe(y.add(S), a).point : m.point.add(r ? S.rotate(-s.angle) : S), I = e.allowVerticalPlacement && d.placedOrientation === t.WritingMode.vertical ? Math.PI / 2 : 0, M = 0; M < d.numGlyphs; M++) t.addDynamicAttributes(p, C, I);
          } else de(d.numGlyphs, p);
        }
        e.text.dynamicLayoutVertexBuffer.updateData(p);
      }
  
      function ni(e) {
        var r = e.text.placedSymbolArray,
          i = e.text.dynamicLayoutVertexArray;
        i.clear();
        for (var n = 0; n < r.length; n++) {
          var o = r.get(n);
          if (o.hidden || !o.placedOrientation) de(o.numGlyphs, i);
          else
            for (var s = new t.Point(o.anchorX, o.anchorY), a = e.allowVerticalPlacement && o.placedOrientation === t.WritingMode.vertical ? Math.PI / 2 : 0, u = 0; u < o.numGlyphs; u++) t.addDynamicAttributes(i, s, a);
        }
        e.text.dynamicLayoutVertexBuffer.updateData(i);
      }
  
      function oi(e, r, i, n, o, s, a, u, c, h, l, p, f) {
        for (var d, g, _ = e.context, y = _.gl, m = e.transform, v = "map" === u, x = "map" === c, w = v && "point" !== i.layout.get("symbol-placement"), b = v && !x && !w, E = void 0 !== i.layout.get("symbol-sort-key").constantOr(1), L = e.depthModeForSublayer(0, Rt.ReadOnly), S = i.layout.get("text-variable-anchor"), C = [], I = 0, M = n; I < M.length; I += 1) {
          var T = M[I],
            P = r.getTile(T),
            D = P.getBucket(i);
          if (D) {
            var N = o ? D.text : D.icon;
            if (N && N.segments.get().length) {
              var R = N.programConfigurations.get(i.id),
                O = o || D.sdfIcons,
                A = o ? D.textSizeData : D.iconSizeData;
              d || (d = e.useProgram(O ? "symbolSDF" : "symbolIcon", R), g = t.evaluateSizeForZoom(A, m.zoom)), _.activeTexture.set(y.TEXTURE0);
              var F = void 0,
                k = void 0,
                B = void 0;
              if (o) k = P.glyphAtlasTexture, B = y.LINEAR, F = P.glyphAtlasTexture.size;
              else {
                var z = 1 !== i.layout.get("icon-size").constantOr(0) || D.iconsNeedLinear,
                  V = x || 0 !== m.pitch;
                k = P.imageAtlasTexture, B = O || e.options.rotating || e.options.zooming || z || V ? y.LINEAR : y.NEAREST, F = P.imageAtlasTexture.size;
              }
              var U = me(P, 1, e.transform.zoom),
                q = ie(T.posMatrix, x, v, e.transform, U),
                j = ne(T.posMatrix, x, v, e.transform, U);
              if (w) ae(D, T.posMatrix, e, o, q, j, x, h);
              else if (o && g && S) {
                var G = Math.pow(2, m.zoom - P.tileID.overscaledZ);
                ii(D, v, x, f, t.symbolSize, m, q, T.posMatrix, G, g);
              } else o && g && D.allowVerticalPlacement && ni(D);
              var X = e.translatePosMatrix(T.posMatrix, P, s, a),
                Z = w || o && S ? ei : q,
                Y = e.translatePosMatrix(j, P, s, a, !0),
                W = O && 0 !== i.paint.get(o ? "text-halo-width" : "icon-halo-width").constantOr(1),
                H = {
                  program: d,
                  buffers: N,
                  uniformValues: O ? Wr(A.kind, g, b, x, e, X, Z, Y, o, F, !0) : Yr(A.kind, g, b, x, e, X, Z, Y, o, F),
                  atlasTexture: k,
                  atlasInterpolation: B,
                  isSDF: O,
                  hasHalo: W
                };
              if (E)
                for (var K = 0, J = N.segments.get(); K < J.length; K += 1) {
                  var Q = J[K];
                  C.push({
                    segments: new t.SegmentVector([Q]),
                    sortKey: Q.sortKey,
                    state: H
                  });
                } else C.push({
                  segments: N.segments,
                  sortKey: 0,
                  state: H
                });
            }
          }
        }
        E && C.sort(function (t, e) {
          return t.sortKey - e.sortKey
        });
        for (var $ = 0, tt = C; $ < tt.length; $ += 1) {
          var et = tt[$],
            rt = et.state;
          if (rt.atlasTexture.bind(rt.atlasInterpolation, y.CLAMP_TO_EDGE), rt.isSDF) {
            var it = rt.uniformValues;
            rt.hasHalo && (it.u_is_halo = 1, si(rt.buffers, et.segments, i, e, rt.program, L, l, p, it)), it.u_is_halo = 0;
          }
          si(rt.buffers, et.segments, i, e, rt.program, L, l, p, rt.uniformValues);
        }
      }
  
      function si(t, e, r, i, n, o, s, a, u) {
        var c = i.context,
          h = c.gl;
        n.draw(c, h.TRIANGLES, o, s, a, Ft.disabled, u, r.id, t.layoutVertexBuffer, t.indexBuffer, e, r.paint, i.transform.zoom, t.programConfigurations.get(r.id), t.dynamicLayoutVertexBuffer, t.opacityVertexBuffer);
      }
  
      function ai(t, e, r, i, n, o, s) {
        var a, u, c, h, l, p = t.context.gl,
          f = r.paint.get("fill-pattern"),
          d = f && f.constantOr(1),
          g = r.getCrossfadeParameters();
        s ? (u = d && !r.getPaintProperty("fill-outline-color") ? "fillOutlinePattern" : "fillOutline", a = p.LINES) : (u = d ? "fillPattern" : "fill", a = p.TRIANGLES);
        for (var _ = 0, y = i; _ < y.length; _ += 1) {
          var m = y[_],
            v = e.getTile(m);
          if (!d || v.patternsLoaded()) {
            var x = v.getBucket(r);
            if (x) {
              var w = x.programConfigurations.get(r.id),
                b = t.useProgram(u, w);
              d && (t.context.activeTexture.set(p.TEXTURE0), v.imageAtlasTexture.bind(p.LINEAR, p.CLAMP_TO_EDGE), w.updatePatternPaintBuffers(g));
              var E = f.constantOr(null);
              if (E && v.imageAtlas) {
                var L = v.imageAtlas.patternPositions[E.to],
                  S = v.imageAtlas.patternPositions[E.from];
                L && S && w.setConstantPatternPositions(L, S);
              }
              var C = t.translatePosMatrix(m.posMatrix, v, r.paint.get("fill-translate"), r.paint.get("fill-translate-anchor"));
              if (s) {
                h = x.indexBuffer2, l = x.segments2;
                var I = [p.drawingBufferWidth, p.drawingBufferHeight];
                c = "fillOutlinePattern" === u && d ? Mr(C, t, g, v, I) : Ir(C, I);
              } else h = x.indexBuffer, l = x.segments, c = d ? Cr(C, t, g, v) : Sr(C);
              b.draw(t.context, a, n, t.stencilModeForClipping(m), o, Ft.disabled, c, r.id, x.layoutVertexBuffer, h, l, r.paint, t.transform.zoom, w);
            }
          }
        }
      }
  
      function ui(t, e, r, i, n, o, s) {
        for (var a = t.context, u = a.gl, c = r.paint.get("fill-extrusion-pattern"), h = c.constantOr(1), l = r.getCrossfadeParameters(), p = r.paint.get("fill-extrusion-opacity"), f = 0, d = i; f < d.length; f += 1) {
          var g = d[f],
            _ = e.getTile(g),
            y = _.getBucket(r);
          if (y) {
            var m = y.programConfigurations.get(r.id),
              v = t.useProgram(h ? "fillExtrusionPattern" : "fillExtrusion", m);
            h && (t.context.activeTexture.set(u.TEXTURE0), _.imageAtlasTexture.bind(u.LINEAR, u.CLAMP_TO_EDGE), m.updatePatternPaintBuffers(l));
            var x = c.constantOr(null);
            if (x && _.imageAtlas) {
              var w = _.imageAtlas.patternPositions[x.to],
                b = _.imageAtlas.patternPositions[x.from];
              w && b && m.setConstantPatternPositions(w, b);
            }
            var E = t.translatePosMatrix(g.posMatrix, _, r.paint.get("fill-extrusion-translate"), r.paint.get("fill-extrusion-translate-anchor")),
              L = r.paint.get("fill-extrusion-vertical-gradient"),
              S = h ? Lr(E, t, L, p, g, l, _) : Er(E, t, L, p);
            v.draw(a, a.gl.TRIANGLES, n, o, s, Ft.backCCW, S, r.id, y.layoutVertexBuffer, y.indexBuffer, y.segments, r.paint, t.transform.zoom, m);
          }
        }
      }
  
      function ci(t, e, r, i, n, o) {
        var s = t.context,
          a = s.gl,
          u = e.fbo;
        if (u) {
          var c = t.useProgram("hillshade");
          s.activeTexture.set(a.TEXTURE0), a.bindTexture(a.TEXTURE_2D, u.colorAttachment.get());
          var h = Fr(t, e, r);
          e.maskedBoundsBuffer && e.maskedIndexBuffer && e.segments ? c.draw(s, a.TRIANGLES, i, n, o, Ft.disabled, h, r.id, e.maskedBoundsBuffer, e.maskedIndexBuffer, e.segments) : c.draw(s, a.TRIANGLES, i, n, o, Ft.disabled, h, r.id, t.rasterBoundsBuffer, t.quadTriangleIndexBuffer, t.rasterBoundsSegments);
        }
      }
  
      function hi(e, r, i, n, o, s, a) {
        var u = e.context,
          c = u.gl;
        if (r.dem && r.dem.data) {
          var h = r.dem.dim,
            l = r.dem.stride,
            p = r.dem.getPixels();
          if (u.activeTexture.set(c.TEXTURE1), u.pixelStoreUnpackPremultiplyAlpha.set(!1), r.demTexture = r.demTexture || e.getTileTexture(l), r.demTexture) {
            var f = r.demTexture;
            f.update(p, {
              premultiply: !1
            }), f.bind(c.NEAREST, c.CLAMP_TO_EDGE);
          } else r.demTexture = new t.Texture(u, p, c.RGBA, {
            premultiply: !1
          }), r.demTexture.bind(c.NEAREST, c.CLAMP_TO_EDGE);
          u.activeTexture.set(c.TEXTURE0);
          var d = r.fbo;
          if (!d) {
            var g = new t.Texture(u, {
              width: h,
              height: h,
              data: null
            }, c.RGBA);
            g.bind(c.LINEAR, c.CLAMP_TO_EDGE), (d = r.fbo = u.createFramebuffer(h, h)).colorAttachment.set(g.texture);
          }
          u.bindFramebuffer.set(d.framebuffer), u.viewport.set([0, 0, h, h]), e.useProgram("hillshadePrepare").draw(u, c.TRIANGLES, o, s, a, Ft.disabled, kr(r, n), i.id, e.rasterBoundsBuffer, e.quadTriangleIndexBuffer, e.rasterBoundsSegments), r.needsHillshadePrepare = !1;
        }
      }
  
      function li(e, r, i, n, o) {
        var s = n.paint.get("raster-fade-duration");
        if (s > 0) {
          var a = t.browser.now(),
            u = (a - e.timeAdded) / s,
            c = r ? (a - r.timeAdded) / s : -1,
            h = i.getSource(),
            l = o.coveringZoomLevel({
              tileSize: h.tileSize,
              roundZoom: h.roundZoom
            }),
            p = !r || Math.abs(r.tileID.overscaledZ - l) > Math.abs(e.tileID.overscaledZ - l),
            f = p && e.refreshedUponExpiration ? 1 : t.clamp(p ? u : 1 - c, 0, 1);
          return e.refreshedUponExpiration && u >= 1 && (e.refreshedUponExpiration = !1), r ? {
            opacity: 1,
            mix: 1 - f
          } : {
            opacity: f,
            mix: 0
          }
        }
        return {
          opacity: 1,
          mix: 0
        }
      }
  
      function pi(e, r, i) {
        var n = e.context,
          o = n.gl,
          s = i.posMatrix,
          a = e.useProgram("debug"),
          u = Rt.disabled,
          c = Ot.disabled,
          h = e.colorModeForRenderPass(),
          l = "$debug";
        a.draw(n, o.LINE_STRIP, u, c, h, Ft.disabled, Nr(s, t.Color.red), l, e.debugBuffer, e.tileBorderIndexBuffer, e.debugSegments);
        for (var p = r.getTileByID(i.key).latestRawTileData, f = p && p.byteLength || 0, d = Math.floor(f / 1024), g = r.getTile(i).tileSize, _ = 512 / Math.min(g, 512), y = function (t, e, r, i) {
            i = i || 1;
            var n, o, s, a, u, c, h, l, p = [];
            for (n = 0, o = t.length; n < o; n++)
              if (u = fi[t[n]]) {
                for (l = null, s = 0, a = u[1].length; s < a; s += 2) - 1 === u[1][s] && -1 === u[1][s + 1] ? l = null : (c = e + u[1][s] * i, h = r - u[1][s + 1] * i, l && p.push(l.x, l.y, c, h), l = {
                  x: c,
                  y: h
                });
                e += u[0] * i;
              } return p
          }(i.toString() + " " + d + "kb", 50, 200 * _, 5 * _), m = new t.StructArrayLayout2i4, v = new t.StructArrayLayout2ui4, x = 0; x < y.length; x += 2) m.emplaceBack(y[x], y[x + 1]), v.emplaceBack(x, x + 1);
        for (var w = n.createVertexBuffer(m, Ze.members), b = n.createIndexBuffer(v), E = t.SegmentVector.simpleSegment(0, 0, m.length / 2, m.length / 2), L = t.EXTENT / (Math.pow(2, e.transform.zoom - i.overscaledZ) * g * _), S = [], C = -1; C <= 1; C++)
          for (var I = -1; I <= 1 && (0 !== C || 0 !== I); I++) S.push([C, I]);
        for (var M = 0; M < S.length; M++) {
          var T = S[M];
          a.draw(n, o.LINES, u, c, h, Ft.disabled, Nr(t.translate([], s, [L * T[0], L * T[1], 0]), t.Color.white), l, w, b, E);
        }
        a.draw(n, o.LINES, u, c, h, Ft.disabled, Nr(s, t.Color.black), l, w, b, E);
      }
      var fi = {
        " ": [16, []],
        "!": [10, [5, 21, 5, 7, -1, -1, 5, 2, 4, 1, 5, 0, 6, 1, 5, 2]],
        '"': [16, [4, 21, 4, 14, -1, -1, 12, 21, 12, 14]],
        "#": [21, [11, 25, 4, -7, -1, -1, 17, 25, 10, -7, -1, -1, 4, 12, 18, 12, -1, -1, 3, 6, 17, 6]],
        $: [20, [8, 25, 8, -4, -1, -1, 12, 25, 12, -4, -1, -1, 17, 18, 15, 20, 12, 21, 8, 21, 5, 20, 3, 18, 3, 16, 4, 14, 5, 13, 7, 12, 13, 10, 15, 9, 16, 8, 17, 6, 17, 3, 15, 1, 12, 0, 8, 0, 5, 1, 3, 3]],
        "%": [24, [21, 21, 3, 0, -1, -1, 8, 21, 10, 19, 10, 17, 9, 15, 7, 14, 5, 14, 3, 16, 3, 18, 4, 20, 6, 21, 8, 21, 10, 20, 13, 19, 16, 19, 19, 20, 21, 21, -1, -1, 17, 7, 15, 6, 14, 4, 14, 2, 16, 0, 18, 0, 20, 1, 21, 3, 21, 5, 19, 7, 17, 7]],
        "&": [26, [23, 12, 23, 13, 22, 14, 21, 14, 20, 13, 19, 11, 17, 6, 15, 3, 13, 1, 11, 0, 7, 0, 5, 1, 4, 2, 3, 4, 3, 6, 4, 8, 5, 9, 12, 13, 13, 14, 14, 16, 14, 18, 13, 20, 11, 21, 9, 20, 8, 18, 8, 16, 9, 13, 11, 10, 16, 3, 18, 1, 20, 0, 22, 0, 23, 1, 23, 2]],
        "'": [10, [5, 19, 4, 20, 5, 21, 6, 20, 6, 18, 5, 16, 4, 15]],
        "(": [14, [11, 25, 9, 23, 7, 20, 5, 16, 4, 11, 4, 7, 5, 2, 7, -2, 9, -5, 11, -7]],
        ")": [14, [3, 25, 5, 23, 7, 20, 9, 16, 10, 11, 10, 7, 9, 2, 7, -2, 5, -5, 3, -7]],
        "*": [16, [8, 21, 8, 9, -1, -1, 3, 18, 13, 12, -1, -1, 13, 18, 3, 12]],
        "+": [26, [13, 18, 13, 0, -1, -1, 4, 9, 22, 9]],
        ",": [10, [6, 1, 5, 0, 4, 1, 5, 2, 6, 1, 6, -1, 5, -3, 4, -4]],
        "-": [26, [4, 9, 22, 9]],
        ".": [10, [5, 2, 4, 1, 5, 0, 6, 1, 5, 2]],
        "/": [22, [20, 25, 2, -7]],
        0: [20, [9, 21, 6, 20, 4, 17, 3, 12, 3, 9, 4, 4, 6, 1, 9, 0, 11, 0, 14, 1, 16, 4, 17, 9, 17, 12, 16, 17, 14, 20, 11, 21, 9, 21]],
        1: [20, [6, 17, 8, 18, 11, 21, 11, 0]],
        2: [20, [4, 16, 4, 17, 5, 19, 6, 20, 8, 21, 12, 21, 14, 20, 15, 19, 16, 17, 16, 15, 15, 13, 13, 10, 3, 0, 17, 0]],
        3: [20, [5, 21, 16, 21, 10, 13, 13, 13, 15, 12, 16, 11, 17, 8, 17, 6, 16, 3, 14, 1, 11, 0, 8, 0, 5, 1, 4, 2, 3, 4]],
        4: [20, [13, 21, 3, 7, 18, 7, -1, -1, 13, 21, 13, 0]],
        5: [20, [15, 21, 5, 21, 4, 12, 5, 13, 8, 14, 11, 14, 14, 13, 16, 11, 17, 8, 17, 6, 16, 3, 14, 1, 11, 0, 8, 0, 5, 1, 4, 2, 3, 4]],
        6: [20, [16, 18, 15, 20, 12, 21, 10, 21, 7, 20, 5, 17, 4, 12, 4, 7, 5, 3, 7, 1, 10, 0, 11, 0, 14, 1, 16, 3, 17, 6, 17, 7, 16, 10, 14, 12, 11, 13, 10, 13, 7, 12, 5, 10, 4, 7]],
        7: [20, [17, 21, 7, 0, -1, -1, 3, 21, 17, 21]],
        8: [20, [8, 21, 5, 20, 4, 18, 4, 16, 5, 14, 7, 13, 11, 12, 14, 11, 16, 9, 17, 7, 17, 4, 16, 2, 15, 1, 12, 0, 8, 0, 5, 1, 4, 2, 3, 4, 3, 7, 4, 9, 6, 11, 9, 12, 13, 13, 15, 14, 16, 16, 16, 18, 15, 20, 12, 21, 8, 21]],
        9: [20, [16, 14, 15, 11, 13, 9, 10, 8, 9, 8, 6, 9, 4, 11, 3, 14, 3, 15, 4, 18, 6, 20, 9, 21, 10, 21, 13, 20, 15, 18, 16, 14, 16, 9, 15, 4, 13, 1, 10, 0, 8, 0, 5, 1, 4, 3]],
        ":": [10, [5, 14, 4, 13, 5, 12, 6, 13, 5, 14, -1, -1, 5, 2, 4, 1, 5, 0, 6, 1, 5, 2]],
        ";": [10, [5, 14, 4, 13, 5, 12, 6, 13, 5, 14, -1, -1, 6, 1, 5, 0, 4, 1, 5, 2, 6, 1, 6, -1, 5, -3, 4, -4]],
        "<": [24, [20, 18, 4, 9, 20, 0]],
        "=": [26, [4, 12, 22, 12, -1, -1, 4, 6, 22, 6]],
        ">": [24, [4, 18, 20, 9, 4, 0]],
        "?": [18, [3, 16, 3, 17, 4, 19, 5, 20, 7, 21, 11, 21, 13, 20, 14, 19, 15, 17, 15, 15, 14, 13, 13, 12, 9, 10, 9, 7, -1, -1, 9, 2, 8, 1, 9, 0, 10, 1, 9, 2]],
        "@": [27, [18, 13, 17, 15, 15, 16, 12, 16, 10, 15, 9, 14, 8, 11, 8, 8, 9, 6, 11, 5, 14, 5, 16, 6, 17, 8, -1, -1, 12, 16, 10, 14, 9, 11, 9, 8, 10, 6, 11, 5, -1, -1, 18, 16, 17, 8, 17, 6, 19, 5, 21, 5, 23, 7, 24, 10, 24, 12, 23, 15, 22, 17, 20, 19, 18, 20, 15, 21, 12, 21, 9, 20, 7, 19, 5, 17, 4, 15, 3, 12, 3, 9, 4, 6, 5, 4, 7, 2, 9, 1, 12, 0, 15, 0, 18, 1, 20, 2, 21, 3, -1, -1, 19, 16, 18, 8, 18, 6, 19, 5]],
        A: [18, [9, 21, 1, 0, -1, -1, 9, 21, 17, 0, -1, -1, 4, 7, 14, 7]],
        B: [21, [4, 21, 4, 0, -1, -1, 4, 21, 13, 21, 16, 20, 17, 19, 18, 17, 18, 15, 17, 13, 16, 12, 13, 11, -1, -1, 4, 11, 13, 11, 16, 10, 17, 9, 18, 7, 18, 4, 17, 2, 16, 1, 13, 0, 4, 0]],
        C: [21, [18, 16, 17, 18, 15, 20, 13, 21, 9, 21, 7, 20, 5, 18, 4, 16, 3, 13, 3, 8, 4, 5, 5, 3, 7, 1, 9, 0, 13, 0, 15, 1, 17, 3, 18, 5]],
        D: [21, [4, 21, 4, 0, -1, -1, 4, 21, 11, 21, 14, 20, 16, 18, 17, 16, 18, 13, 18, 8, 17, 5, 16, 3, 14, 1, 11, 0, 4, 0]],
        E: [19, [4, 21, 4, 0, -1, -1, 4, 21, 17, 21, -1, -1, 4, 11, 12, 11, -1, -1, 4, 0, 17, 0]],
        F: [18, [4, 21, 4, 0, -1, -1, 4, 21, 17, 21, -1, -1, 4, 11, 12, 11]],
        G: [21, [18, 16, 17, 18, 15, 20, 13, 21, 9, 21, 7, 20, 5, 18, 4, 16, 3, 13, 3, 8, 4, 5, 5, 3, 7, 1, 9, 0, 13, 0, 15, 1, 17, 3, 18, 5, 18, 8, -1, -1, 13, 8, 18, 8]],
        H: [22, [4, 21, 4, 0, -1, -1, 18, 21, 18, 0, -1, -1, 4, 11, 18, 11]],
        I: [8, [4, 21, 4, 0]],
        J: [16, [12, 21, 12, 5, 11, 2, 10, 1, 8, 0, 6, 0, 4, 1, 3, 2, 2, 5, 2, 7]],
        K: [21, [4, 21, 4, 0, -1, -1, 18, 21, 4, 7, -1, -1, 9, 12, 18, 0]],
        L: [17, [4, 21, 4, 0, -1, -1, 4, 0, 16, 0]],
        M: [24, [4, 21, 4, 0, -1, -1, 4, 21, 12, 0, -1, -1, 20, 21, 12, 0, -1, -1, 20, 21, 20, 0]],
        N: [22, [4, 21, 4, 0, -1, -1, 4, 21, 18, 0, -1, -1, 18, 21, 18, 0]],
        O: [22, [9, 21, 7, 20, 5, 18, 4, 16, 3, 13, 3, 8, 4, 5, 5, 3, 7, 1, 9, 0, 13, 0, 15, 1, 17, 3, 18, 5, 19, 8, 19, 13, 18, 16, 17, 18, 15, 20, 13, 21, 9, 21]],
        P: [21, [4, 21, 4, 0, -1, -1, 4, 21, 13, 21, 16, 20, 17, 19, 18, 17, 18, 14, 17, 12, 16, 11, 13, 10, 4, 10]],
        Q: [22, [9, 21, 7, 20, 5, 18, 4, 16, 3, 13, 3, 8, 4, 5, 5, 3, 7, 1, 9, 0, 13, 0, 15, 1, 17, 3, 18, 5, 19, 8, 19, 13, 18, 16, 17, 18, 15, 20, 13, 21, 9, 21, -1, -1, 12, 4, 18, -2]],
        R: [21, [4, 21, 4, 0, -1, -1, 4, 21, 13, 21, 16, 20, 17, 19, 18, 17, 18, 15, 17, 13, 16, 12, 13, 11, 4, 11, -1, -1, 11, 11, 18, 0]],
        S: [20, [17, 18, 15, 20, 12, 21, 8, 21, 5, 20, 3, 18, 3, 16, 4, 14, 5, 13, 7, 12, 13, 10, 15, 9, 16, 8, 17, 6, 17, 3, 15, 1, 12, 0, 8, 0, 5, 1, 3, 3]],
        T: [16, [8, 21, 8, 0, -1, -1, 1, 21, 15, 21]],
        U: [22, [4, 21, 4, 6, 5, 3, 7, 1, 10, 0, 12, 0, 15, 1, 17, 3, 18, 6, 18, 21]],
        V: [18, [1, 21, 9, 0, -1, -1, 17, 21, 9, 0]],
        W: [24, [2, 21, 7, 0, -1, -1, 12, 21, 7, 0, -1, -1, 12, 21, 17, 0, -1, -1, 22, 21, 17, 0]],
        X: [20, [3, 21, 17, 0, -1, -1, 17, 21, 3, 0]],
        Y: [18, [1, 21, 9, 11, 9, 0, -1, -1, 17, 21, 9, 11]],
        Z: [20, [17, 21, 3, 0, -1, -1, 3, 21, 17, 21, -1, -1, 3, 0, 17, 0]],
        "[": [14, [4, 25, 4, -7, -1, -1, 5, 25, 5, -7, -1, -1, 4, 25, 11, 25, -1, -1, 4, -7, 11, -7]],
        "\\": [14, [0, 21, 14, -3]],
        "]": [14, [9, 25, 9, -7, -1, -1, 10, 25, 10, -7, -1, -1, 3, 25, 10, 25, -1, -1, 3, -7, 10, -7]],
        "^": [16, [6, 15, 8, 18, 10, 15, -1, -1, 3, 12, 8, 17, 13, 12, -1, -1, 8, 17, 8, 0]],
        _: [16, [0, -2, 16, -2]],
        "`": [10, [6, 21, 5, 20, 4, 18, 4, 16, 5, 15, 6, 16, 5, 17]],
        a: [19, [15, 14, 15, 0, -1, -1, 15, 11, 13, 13, 11, 14, 8, 14, 6, 13, 4, 11, 3, 8, 3, 6, 4, 3, 6, 1, 8, 0, 11, 0, 13, 1, 15, 3]],
        b: [19, [4, 21, 4, 0, -1, -1, 4, 11, 6, 13, 8, 14, 11, 14, 13, 13, 15, 11, 16, 8, 16, 6, 15, 3, 13, 1, 11, 0, 8, 0, 6, 1, 4, 3]],
        c: [18, [15, 11, 13, 13, 11, 14, 8, 14, 6, 13, 4, 11, 3, 8, 3, 6, 4, 3, 6, 1, 8, 0, 11, 0, 13, 1, 15, 3]],
        d: [19, [15, 21, 15, 0, -1, -1, 15, 11, 13, 13, 11, 14, 8, 14, 6, 13, 4, 11, 3, 8, 3, 6, 4, 3, 6, 1, 8, 0, 11, 0, 13, 1, 15, 3]],
        e: [18, [3, 8, 15, 8, 15, 10, 14, 12, 13, 13, 11, 14, 8, 14, 6, 13, 4, 11, 3, 8, 3, 6, 4, 3, 6, 1, 8, 0, 11, 0, 13, 1, 15, 3]],
        f: [12, [10, 21, 8, 21, 6, 20, 5, 17, 5, 0, -1, -1, 2, 14, 9, 14]],
        g: [19, [15, 14, 15, -2, 14, -5, 13, -6, 11, -7, 8, -7, 6, -6, -1, -1, 15, 11, 13, 13, 11, 14, 8, 14, 6, 13, 4, 11, 3, 8, 3, 6, 4, 3, 6, 1, 8, 0, 11, 0, 13, 1, 15, 3]],
        h: [19, [4, 21, 4, 0, -1, -1, 4, 10, 7, 13, 9, 14, 12, 14, 14, 13, 15, 10, 15, 0]],
        i: [8, [3, 21, 4, 20, 5, 21, 4, 22, 3, 21, -1, -1, 4, 14, 4, 0]],
        j: [10, [5, 21, 6, 20, 7, 21, 6, 22, 5, 21, -1, -1, 6, 14, 6, -3, 5, -6, 3, -7, 1, -7]],
        k: [17, [4, 21, 4, 0, -1, -1, 14, 14, 4, 4, -1, -1, 8, 8, 15, 0]],
        l: [8, [4, 21, 4, 0]],
        m: [30, [4, 14, 4, 0, -1, -1, 4, 10, 7, 13, 9, 14, 12, 14, 14, 13, 15, 10, 15, 0, -1, -1, 15, 10, 18, 13, 20, 14, 23, 14, 25, 13, 26, 10, 26, 0]],
        n: [19, [4, 14, 4, 0, -1, -1, 4, 10, 7, 13, 9, 14, 12, 14, 14, 13, 15, 10, 15, 0]],
        o: [19, [8, 14, 6, 13, 4, 11, 3, 8, 3, 6, 4, 3, 6, 1, 8, 0, 11, 0, 13, 1, 15, 3, 16, 6, 16, 8, 15, 11, 13, 13, 11, 14, 8, 14]],
        p: [19, [4, 14, 4, -7, -1, -1, 4, 11, 6, 13, 8, 14, 11, 14, 13, 13, 15, 11, 16, 8, 16, 6, 15, 3, 13, 1, 11, 0, 8, 0, 6, 1, 4, 3]],
        q: [19, [15, 14, 15, -7, -1, -1, 15, 11, 13, 13, 11, 14, 8, 14, 6, 13, 4, 11, 3, 8, 3, 6, 4, 3, 6, 1, 8, 0, 11, 0, 13, 1, 15, 3]],
        r: [13, [4, 14, 4, 0, -1, -1, 4, 8, 5, 11, 7, 13, 9, 14, 12, 14]],
        s: [17, [14, 11, 13, 13, 10, 14, 7, 14, 4, 13, 3, 11, 4, 9, 6, 8, 11, 7, 13, 6, 14, 4, 14, 3, 13, 1, 10, 0, 7, 0, 4, 1, 3, 3]],
        t: [12, [5, 21, 5, 4, 6, 1, 8, 0, 10, 0, -1, -1, 2, 14, 9, 14]],
        u: [19, [4, 14, 4, 4, 5, 1, 7, 0, 10, 0, 12, 1, 15, 4, -1, -1, 15, 14, 15, 0]],
        v: [16, [2, 14, 8, 0, -1, -1, 14, 14, 8, 0]],
        w: [22, [3, 14, 7, 0, -1, -1, 11, 14, 7, 0, -1, -1, 11, 14, 15, 0, -1, -1, 19, 14, 15, 0]],
        x: [17, [3, 14, 14, 0, -1, -1, 14, 14, 3, 0]],
        y: [16, [2, 14, 8, 0, -1, -1, 14, 14, 8, 0, 6, -4, 4, -6, 2, -7, 1, -7]],
        z: [17, [14, 14, 3, 0, -1, -1, 3, 14, 14, 14, -1, -1, 3, 0, 14, 0]],
        "{": [14, [9, 25, 7, 24, 6, 23, 5, 21, 5, 19, 6, 17, 7, 16, 8, 14, 8, 12, 6, 10, -1, -1, 7, 24, 6, 22, 6, 20, 7, 18, 8, 17, 9, 15, 9, 13, 8, 11, 4, 9, 8, 7, 9, 5, 9, 3, 8, 1, 7, 0, 6, -2, 6, -4, 7, -6, -1, -1, 6, 8, 8, 6, 8, 4, 7, 2, 6, 1, 5, -1, 5, -3, 6, -5, 7, -6, 9, -7]],
        "|": [8, [4, 25, 4, -7]],
        "}": [14, [5, 25, 7, 24, 8, 23, 9, 21, 9, 19, 8, 17, 7, 16, 6, 14, 6, 12, 8, 10, -1, -1, 7, 24, 8, 22, 8, 20, 7, 18, 6, 17, 5, 15, 5, 13, 6, 11, 10, 9, 6, 7, 5, 5, 5, 3, 6, 1, 7, 0, 8, -2, 8, -4, 7, -6, -1, -1, 8, 8, 6, 6, 6, 4, 7, 2, 8, 1, 9, -1, 9, -3, 8, -5, 7, -6, 5, -7]],
        "~": [24, [3, 6, 3, 8, 4, 11, 6, 12, 8, 12, 10, 11, 14, 8, 16, 7, 18, 7, 20, 8, 21, 10, -1, -1, 3, 8, 4, 10, 6, 11, 8, 11, 10, 10, 14, 7, 16, 6, 18, 6, 20, 7, 21, 10, 21, 12]]
      };
      var di = {
          symbol: function (t, e, r, i, n) {
            if ("translucent" === t.renderPass) {
              var o = Ot.disabled,
                s = t.colorModeForRenderPass();
              0 !== r.paint.get("icon-opacity").constantOr(1) && oi(t, e, r, i, !1, r.paint.get("icon-translate"), r.paint.get("icon-translate-anchor"), r.layout.get("icon-rotation-alignment"), r.layout.get("icon-pitch-alignment"), r.layout.get("icon-keep-upright"), o, s, n), 0 !== r.paint.get("text-opacity").constantOr(1) && oi(t, e, r, i, !0, r.paint.get("text-translate"), r.paint.get("text-translate-anchor"), r.layout.get("text-rotation-alignment"), r.layout.get("text-pitch-alignment"), r.layout.get("text-keep-upright"), o, s, n), e.map.showCollisionBoxes && function (t, e, r, i) {
                ti(t, e, r, i, !1), ti(t, e, r, i, !0);
              }(t, e, r, i);
            }
          },
          circle: function (e, r, i, n) {
            if ("translucent" === e.renderPass) {
              var o = i.paint.get("circle-opacity"),
                s = i.paint.get("circle-stroke-width"),
                a = i.paint.get("circle-stroke-opacity"),
                u = void 0 !== i.layout.get("circle-sort-key").constantOr(1);
              if (0 !== o.constantOr(1) || 0 !== s.constantOr(1) && 0 !== a.constantOr(1)) {
                for (var c = e.context, h = c.gl, l = e.depthModeForSublayer(0, Rt.ReadOnly), p = Ot.disabled, f = e.colorModeForRenderPass(), d = [], g = 0; g < n.length; g++) {
                  var _ = n[g],
                    y = r.getTile(_),
                    m = y.getBucket(i);
                  if (m) {
                    var v = m.programConfigurations.get(i.id),
                      x = {
                        programConfiguration: v,
                        program: e.useProgram("circle", v),
                        layoutVertexBuffer: m.layoutVertexBuffer,
                        indexBuffer: m.indexBuffer,
                        uniformValues: Tr(e, _, y, i)
                      };
                    if (u)
                      for (var w = 0, b = m.segments.get(); w < b.length; w += 1) {
                        var E = b[w];
                        d.push({
                          segments: new t.SegmentVector([E]),
                          sortKey: E.sortKey,
                          state: x
                        });
                      } else d.push({
                        segments: m.segments,
                        sortKey: 0,
                        state: x
                      });
                  }
                }
                u && d.sort(function (t, e) {
                  return t.sortKey - e.sortKey
                });
                for (var L = 0, S = d; L < S.length; L += 1) {
                  var C = S[L],
                    I = C.state,
                    M = I.programConfiguration,
                    T = I.program,
                    P = I.layoutVertexBuffer,
                    D = I.indexBuffer,
                    N = I.uniformValues,
                    R = C.segments;
                  T.draw(c, h.TRIANGLES, l, p, f, Ft.disabled, N, i.id, P, D, R, i.paint, e.transform.zoom, M);
                }
              }
            }
          },
          heatmap: function (e, r, i, n) {
            if (0 !== i.paint.get("heatmap-opacity"))
              if ("offscreen" === e.renderPass) {
                var o = e.context,
                  s = o.gl,
                  a = e.depthModeForSublayer(0, Rt.ReadOnly),
                  u = Ot.disabled,
                  c = new At([s.ONE, s.ONE], t.Color.transparent, [!0, !0, !0, !0]);
                ! function (t, e, r) {
                  var i = t.gl;
                  t.activeTexture.set(i.TEXTURE1), t.viewport.set([0, 0, e.width / 4, e.height / 4]);
                  var n = r.heatmapFbo;
                  if (n) i.bindTexture(i.TEXTURE_2D, n.colorAttachment.get()), t.bindFramebuffer.set(n.framebuffer);
                  else {
                    var o = i.createTexture();
                    i.bindTexture(i.TEXTURE_2D, o), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_WRAP_S, i.CLAMP_TO_EDGE), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_WRAP_T, i.CLAMP_TO_EDGE), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_MIN_FILTER, i.LINEAR), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_MAG_FILTER, i.LINEAR), n = r.heatmapFbo = t.createFramebuffer(e.width / 4, e.height / 4),
                      function t(e, r, i, n) {
                        var o = e.gl;
                        o.texImage2D(o.TEXTURE_2D, 0, o.RGBA, r.width / 4, r.height / 4, 0, o.RGBA, e.extTextureHalfFloat ? e.extTextureHalfFloat.HALF_FLOAT_OES : o.UNSIGNED_BYTE, null);
                        n.colorAttachment.set(i);
                        e.extTextureHalfFloat && o.checkFramebufferStatus(o.FRAMEBUFFER) !== o.FRAMEBUFFER_COMPLETE && (e.extTextureHalfFloat = null, n.colorAttachment.setDirty(), t(e, r, i, n));
                      }(t, e, o, n);
                  }
                }(o, e, i), o.clear({
                  color: t.Color.transparent
                });
                for (var h = 0; h < n.length; h++) {
                  var l = n[h];
                  if (!r.hasRenderableParent(l)) {
                    var p = r.getTile(l),
                      f = p.getBucket(i);
                    if (f) {
                      var d = f.programConfigurations.get(i.id),
                        g = e.useProgram("heatmap", d),
                        _ = e.transform.zoom;
                      g.draw(o, s.TRIANGLES, a, u, c, Ft.disabled, Or(l.posMatrix, p, _, i.paint.get("heatmap-intensity")), i.id, f.layoutVertexBuffer, f.indexBuffer, f.segments, i.paint, e.transform.zoom, d);
                    }
                  }
                }
                o.viewport.set([0, 0, e.width, e.height]);
              } else "translucent" === e.renderPass && (e.context.setColorMode(e.colorModeForRenderPass()), function (e, r) {
                var i = e.context,
                  n = i.gl,
                  o = r.heatmapFbo;
                if (!o) return;
                i.activeTexture.set(n.TEXTURE0), n.bindTexture(n.TEXTURE_2D, o.colorAttachment.get()), i.activeTexture.set(n.TEXTURE1);
                var s = r.colorRampTexture;
                s || (s = r.colorRampTexture = new t.Texture(i, r.colorRamp, n.RGBA));
                s.bind(n.LINEAR, n.CLAMP_TO_EDGE), e.useProgram("heatmapTexture").draw(i, n.TRIANGLES, Rt.disabled, Ot.disabled, e.colorModeForRenderPass(), Ft.disabled, Ar(e, r, 0, 1), r.id, e.viewportBuffer, e.quadTriangleIndexBuffer, e.viewportSegments, r.paint, e.transform.zoom);
              }(e, i));
          },
          line: function (e, r, i, n) {
            if ("translucent" === e.renderPass) {
              var o = i.paint.get("line-opacity"),
                s = i.paint.get("line-width");
              if (0 !== o.constantOr(1) && 0 !== s.constantOr(1)) {
                var a = e.depthModeForSublayer(0, Rt.ReadOnly),
                  u = e.colorModeForRenderPass(),
                  c = i.paint.get("line-dasharray"),
                  h = i.paint.get("line-pattern"),
                  l = h.constantOr(1),
                  p = i.paint.get("line-gradient"),
                  f = i.getCrossfadeParameters(),
                  d = c ? "lineSDF" : l ? "linePattern" : p ? "lineGradient" : "line",
                  g = e.context,
                  _ = g.gl,
                  y = !0;
                if (p) {
                  g.activeTexture.set(_.TEXTURE0);
                  var m = i.gradientTexture;
                  if (!i.gradient) return;
                  m || (m = i.gradientTexture = new t.Texture(g, i.gradient, _.RGBA)), m.bind(_.LINEAR, _.CLAMP_TO_EDGE);
                }
                for (var v = 0, x = n; v < x.length; v += 1) {
                  var w = x[v],
                    b = r.getTile(w);
                  if (!l || b.patternsLoaded()) {
                    var E = b.getBucket(i);
                    if (E) {
                      var L = E.programConfigurations.get(i.id),
                        S = e.context.program.get(),
                        C = e.useProgram(d, L),
                        I = y || C.program !== S,
                        M = h.constantOr(null);
                      if (M && b.imageAtlas) {
                        var T = b.imageAtlas.patternPositions[M.to],
                          P = b.imageAtlas.patternPositions[M.from];
                        T && P && L.setConstantPatternPositions(T, P);
                      }
                      var D = c ? qr(e, b, i, c, f) : l ? Ur(e, b, i, f) : p ? Vr(e, b, i) : zr(e, b, i);
                      c && (I || e.lineAtlas.dirty) ? (g.activeTexture.set(_.TEXTURE0), e.lineAtlas.bind(g)) : l && (g.activeTexture.set(_.TEXTURE0), b.imageAtlasTexture.bind(_.LINEAR, _.CLAMP_TO_EDGE), L.updatePatternPaintBuffers(f)), C.draw(g, _.TRIANGLES, a, e.stencilModeForClipping(w), u, Ft.disabled, D, i.id, E.layoutVertexBuffer, E.indexBuffer, E.segments, i.paint, e.transform.zoom, L), y = !1;
                    }
                  }
                }
              }
            }
          },
          fill: function (e, r, i, n) {
            var o = i.paint.get("fill-color"),
              s = i.paint.get("fill-opacity");
            if (0 !== s.constantOr(1)) {
              var a = e.colorModeForRenderPass(),
                u = i.paint.get("fill-pattern"),
                c = e.opaquePassEnabledForLayer() && !u.constantOr(1) && 1 === o.constantOr(t.Color.transparent).a && 1 === s.constantOr(0) ? "opaque" : "translucent";
              if (e.renderPass === c) {
                var h = e.depthModeForSublayer(1, "opaque" === e.renderPass ? Rt.ReadWrite : Rt.ReadOnly);
                ai(e, r, i, n, h, a, !1);
              }
              if ("translucent" === e.renderPass && i.paint.get("fill-antialias")) {
                var l = e.depthModeForSublayer(i.getPaintProperty("fill-outline-color") ? 2 : 0, Rt.ReadOnly);
                ai(e, r, i, n, l, a, !0);
              }
            }
          },
          "fill-extrusion": function (t, e, r, i) {
            var n = r.paint.get("fill-extrusion-opacity");
            if (0 !== n && "translucent" === t.renderPass) {
              var o = new Rt(t.context.gl.LEQUAL, Rt.ReadWrite, t.depthRangeFor3D);
              if (1 !== n || r.paint.get("fill-extrusion-pattern").constantOr(1)) ui(t, e, r, i, o, Ot.disabled, At.disabled), ui(t, e, r, i, o, t.stencilModeFor3D(), t.colorModeForRenderPass());
              else {
                var s = t.colorModeForRenderPass();
                ui(t, e, r, i, o, Ot.disabled, s);
              }
            }
          },
          hillshade: function (t, e, r, i) {
            if ("offscreen" === t.renderPass || "translucent" === t.renderPass) {
              for (var n = t.context, o = e.getSource().maxzoom, s = t.depthModeForSublayer(0, Rt.ReadOnly), a = Ot.disabled, u = t.colorModeForRenderPass(), c = 0, h = i; c < h.length; c += 1) {
                var l = h[c],
                  p = e.getTile(l);
                p.needsHillshadePrepare && "offscreen" === t.renderPass ? hi(t, p, r, o, s, a, u) : "translucent" === t.renderPass && ci(t, p, r, s, a, u);
              }
              n.viewport.set([0, 0, t.width, t.height]);
            }
          },
          raster: function (t, e, r, i) {
            if ("translucent" === t.renderPass && 0 !== r.paint.get("raster-opacity"))
              for (var n = t.context, o = n.gl, s = e.getSource(), a = t.useProgram("raster"), u = Ot.disabled, c = t.colorModeForRenderPass(), h = i.length && i[0].overscaledZ, l = !t.options.moving, p = 0, f = i; p < f.length; p += 1) {
                var d = f[p],
                  g = t.depthModeForSublayer(d.overscaledZ - h, 1 === r.paint.get("raster-opacity") ? Rt.ReadWrite : Rt.ReadOnly, o.LESS),
                  _ = e.getTile(d),
                  y = t.transform.calculatePosMatrix(d.toUnwrapped(), l);
                _.registerFadeDuration(r.paint.get("raster-fade-duration"));
                var m = e.findLoadedParent(d, 0),
                  v = li(_, m, e, r, t.transform),
                  x = void 0,
                  w = void 0,
                  b = "nearest" === r.paint.get("raster-resampling") ? o.NEAREST : o.LINEAR;
                n.activeTexture.set(o.TEXTURE0), _.texture.bind(b, o.CLAMP_TO_EDGE, o.LINEAR_MIPMAP_NEAREST), n.activeTexture.set(o.TEXTURE1), m ? (m.texture.bind(b, o.CLAMP_TO_EDGE, o.LINEAR_MIPMAP_NEAREST), x = Math.pow(2, m.tileID.overscaledZ - _.tileID.overscaledZ), w = [_.tileID.canonical.x * x % 1, _.tileID.canonical.y * x % 1]) : _.texture.bind(b, o.CLAMP_TO_EDGE, o.LINEAR_MIPMAP_NEAREST);
                var E = Xr(y, w || [0, 0], x || 1, v, r);
                s instanceof V ? a.draw(n, o.TRIANGLES, g, u, c, Ft.disabled, E, r.id, s.boundsBuffer, t.quadTriangleIndexBuffer, s.boundsSegments) : _.maskedBoundsBuffer && _.maskedIndexBuffer && _.segments ? a.draw(n, o.TRIANGLES, g, u, c, Ft.disabled, E, r.id, _.maskedBoundsBuffer, _.maskedIndexBuffer, _.segments, r.paint, t.transform.zoom) : a.draw(n, o.TRIANGLES, g, u, c, Ft.disabled, E, r.id, t.rasterBoundsBuffer, t.quadTriangleIndexBuffer, t.rasterBoundsSegments);
              }
          },
          background: function (t, e, r) {
            var i = r.paint.get("background-color"),
              n = r.paint.get("background-opacity");
            if (0 !== n) {
              var o = t.context,
                s = o.gl,
                a = t.transform,
                u = a.tileSize,
                c = r.paint.get("background-pattern");
              if (!t.isPatternMissing(c)) {
                var h = !c && 1 === i.a && 1 === n && t.opaquePassEnabledForLayer() ? "opaque" : "translucent";
                if (t.renderPass === h) {
                  var l = Ot.disabled,
                    p = t.depthModeForSublayer(0, "opaque" === h ? Rt.ReadWrite : Rt.ReadOnly),
                    f = t.colorModeForRenderPass(),
                    d = t.useProgram(c ? "backgroundPattern" : "background"),
                    g = a.coveringTiles({
                      tileSize: u
                    });
                  c && (o.activeTexture.set(s.TEXTURE0), t.imageManager.bind(t.context));
                  for (var _ = r.getCrossfadeParameters(), y = 0, m = g; y < m.length; y += 1) {
                    var v = m[y],
                      x = t.transform.calculatePosMatrix(v.toUnwrapped()),
                      w = c ? Kr(x, n, t, c, {
                        tileID: v,
                        tileSize: u
                      }, _) : Hr(x, n, i);
                    d.draw(o, s.TRIANGLES, p, l, f, Ft.disabled, w, r.id, t.tileExtentBuffer, t.quadTriangleIndexBuffer, t.tileExtentSegments);
                  }
                }
              }
            }
          },
          debug: function (t, e, r) {
            for (var i = 0; i < r.length; i++) pi(t, e, r[i]);
          },
          custom: function (t, e, r) {
            var i = t.context,
              n = r.implementation;
            if ("offscreen" === t.renderPass) {
              var o = n.prerender;
              o && (t.setCustomLayerDefaults(), i.setColorMode(t.colorModeForRenderPass()), o.call(n, i.gl, t.transform.customLayerMatrix()), i.setDirty(), t.setBaseState());
            } else if ("translucent" === t.renderPass) {
              t.setCustomLayerDefaults(), i.setColorMode(t.colorModeForRenderPass()), i.setStencilMode(Ot.disabled);
              var s = "3d" === n.renderingMode ? new Rt(t.context.gl.LEQUAL, Rt.ReadWrite, t.depthRangeFor3D) : t.depthModeForSublayer(0, Rt.ReadOnly);
              i.setDepthMode(s), n.render(i.gl, t.transform.customLayerMatrix()), i.setDirty(), t.setBaseState(), i.bindFramebuffer.set(null);
            }
          }
        },
        gi = function (e, r) {
          this.context = new kt(e), this.transform = r, this._tileTextures = {}, this.setup(), this.numSublayers = Bt.maxUnderzooming + Bt.maxOverzooming + 1, this.depthEpsilon = 1 / Math.pow(2, 16), this.depthRboNeedsClear = !0, this.emptyProgramConfiguration = new t.ProgramConfiguration, this.crossTileSymbolIndex = new Ue;
        };
  
      function _i(e, r, i, n) {
        void 0 === n && (n = !0);
        var o = 1 << e,
          s = {};
  
        function a(r, a, u) {
          var c, h, l, p;
          if (u >= 0 && u <= o)
            for (c = r; c < a; c++) h = Math.floor(c / o), l = (c % o + o) % o, 0 !== h && !0 !== n || (p = new t.OverscaledTileID(i, h, e, l, u), s[p.key] = p);
        }
        var u = r.map(function (e) {
          return new t.Point(e.x, e.y)._mult(o)
        });
        return vi(u[0], u[1], u[2], 0, o, a), vi(u[2], u[3], u[0], 0, o, a), Object.keys(s).map(function (t) {
          return s[t]
        })
      }
  
      function yi(t, e) {
        if (t.y > e.y) {
          var r = t;
          t = e, e = r;
        }
        return {
          x0: t.x,
          y0: t.y,
          x1: e.x,
          y1: e.y,
          dx: e.x - t.x,
          dy: e.y - t.y
        }
      }
  
      function mi(t, e, r, i, n) {
        var o = Math.max(r, Math.floor(e.y0)),
          s = Math.min(i, Math.ceil(e.y1));
        if (t.x0 === e.x0 && t.y0 === e.y0 ? t.x0 + e.dy / t.dy * t.dx < e.x1 : t.x1 - e.dy / t.dy * t.dx < e.x0) {
          var a = t;
          t = e, e = a;
        }
        for (var u = t.dx / t.dy, c = e.dx / e.dy, h = t.dx > 0, l = e.dx < 0, p = o; p < s; p++) {
          var f = u * Math.max(0, Math.min(t.dy, p + h - t.y0)) + t.x0,
            d = c * Math.max(0, Math.min(e.dy, p + l - e.y0)) + e.x0;
          n(Math.floor(d), Math.ceil(f), p);
        }
      }
  
      function vi(t, e, r, i, n, o) {
        var s, a = yi(t, e),
          u = yi(e, r),
          c = yi(r, t);
        a.dy > u.dy && (s = a, a = u, u = s), a.dy > c.dy && (s = a, a = c, c = s), u.dy > c.dy && (s = u, u = c, c = s), a.dy && mi(c, a, i, n, o), u.dy && mi(c, u, i, n, o);
      }
      gi.prototype.resize = function (e, r) {
        var i = this.context.gl;
        if (this.width = e * t.browser.devicePixelRatio, this.height = r * t.browser.devicePixelRatio, this.context.viewport.set([0, 0, this.width, this.height]), this.style)
          for (var n = 0, o = this.style._order; n < o.length; n += 1) {
            var s = o[n];
            this.style._layers[s].resize();
          }
        this.depthRbo && (i.deleteRenderbuffer(this.depthRbo), this.depthRbo = null);
      }, gi.prototype.setup = function () {
        var e = this.context,
          r = new t.StructArrayLayout2i4;
        r.emplaceBack(0, 0), r.emplaceBack(t.EXTENT, 0), r.emplaceBack(0, t.EXTENT), r.emplaceBack(t.EXTENT, t.EXTENT), this.tileExtentBuffer = e.createVertexBuffer(r, Ze.members), this.tileExtentSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2);
        var i = new t.StructArrayLayout2i4;
        i.emplaceBack(0, 0), i.emplaceBack(t.EXTENT, 0), i.emplaceBack(0, t.EXTENT), i.emplaceBack(t.EXTENT, t.EXTENT), this.debugBuffer = e.createVertexBuffer(i, Ze.members), this.debugSegments = t.SegmentVector.simpleSegment(0, 0, 4, 5);
        var n = new t.StructArrayLayout4i8;
        n.emplaceBack(0, 0, 0, 0), n.emplaceBack(t.EXTENT, 0, t.EXTENT, 0), n.emplaceBack(0, t.EXTENT, 0, t.EXTENT), n.emplaceBack(t.EXTENT, t.EXTENT, t.EXTENT, t.EXTENT), this.rasterBoundsBuffer = e.createVertexBuffer(n, t.rasterBoundsAttributes.members), this.rasterBoundsSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2);
        var o = new t.StructArrayLayout2i4;
        o.emplaceBack(0, 0), o.emplaceBack(1, 0), o.emplaceBack(0, 1), o.emplaceBack(1, 1), this.viewportBuffer = e.createVertexBuffer(o, Ze.members), this.viewportSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2);
        var s = new t.StructArrayLayout1ui2;
        s.emplaceBack(0), s.emplaceBack(1), s.emplaceBack(3), s.emplaceBack(2), s.emplaceBack(0), this.tileBorderIndexBuffer = e.createIndexBuffer(s);
        var a = new t.StructArrayLayout3ui6;
        a.emplaceBack(0, 1, 2), a.emplaceBack(2, 1, 3), this.quadTriangleIndexBuffer = e.createIndexBuffer(a);
        var u = this.context.gl;
        this.stencilClearMode = new Ot({
          func: u.ALWAYS,
          mask: 0
        }, 0, 255, u.ZERO, u.ZERO, u.ZERO);
      }, gi.prototype.clearStencil = function () {
        var e = this.context,
          r = e.gl;
        this.nextStencilID = 1, this.currentStencilSource = void 0;
        var i = t.create();
        t.ortho(i, 0, this.width, this.height, 0, 0, 1), t.scale(i, i, [r.drawingBufferWidth, r.drawingBufferHeight, 0]), this.useProgram("clippingMask").draw(e, r.TRIANGLES, Rt.disabled, this.stencilClearMode, At.disabled, Ft.disabled, Rr(i), "$clipping", this.viewportBuffer, this.quadTriangleIndexBuffer, this.viewportSegments);
      }, gi.prototype._renderTileClippingMasks = function (t, e) {
        if (this.currentStencilSource !== t.source && t.isTileClipped() && e && e.length) {
          this.currentStencilSource = t.source;
          var r = this.context,
            i = r.gl;
          this.nextStencilID + e.length > 256 && this.clearStencil(), r.setColorMode(At.disabled), r.setDepthMode(Rt.disabled);
          var n = this.useProgram("clippingMask");
          this._tileClippingMaskIDs = {};
          for (var o = 0, s = e; o < s.length; o += 1) {
            var a = s[o],
              u = this._tileClippingMaskIDs[a.key] = this.nextStencilID++;
            n.draw(r, i.TRIANGLES, Rt.disabled, new Ot({
              func: i.ALWAYS,
              mask: 0
            }, u, 255, i.KEEP, i.KEEP, i.REPLACE), At.disabled, Ft.disabled, Rr(a.posMatrix), "$clipping", this.tileExtentBuffer, this.quadTriangleIndexBuffer, this.tileExtentSegments);
          }
        }
      }, gi.prototype.stencilModeFor3D = function () {
        this.currentStencilSource = void 0, this.nextStencilID + 1 > 256 && this.clearStencil();
        var t = this.nextStencilID++,
          e = this.context.gl;
        return new Ot({
          func: e.NOTEQUAL,
          mask: 255
        }, t, 255, e.KEEP, e.KEEP, e.REPLACE)
      }, gi.prototype.stencilModeForClipping = function (t) {
        var e = this.context.gl;
        return new Ot({
          func: e.EQUAL,
          mask: 255
        }, this._tileClippingMaskIDs[t.key], 0, e.KEEP, e.KEEP, e.REPLACE)
      }, gi.prototype.colorModeForRenderPass = function () {
        var e = this.context.gl;
        if (this._showOverdrawInspector) {
          return new At([e.CONSTANT_COLOR, e.ONE], new t.Color(1 / 8, 1 / 8, 1 / 8, 0), [!0, !0, !0, !0])
        }
        return "opaque" === this.renderPass ? At.unblended : At.alphaBlended
      }, gi.prototype.depthModeForSublayer = function (t, e, r) {
        if (!this.opaquePassEnabledForLayer()) return Rt.disabled;
        var i = 1 - ((1 + this.currentLayer) * this.numSublayers + t) * this.depthEpsilon;
        return new Rt(r || this.context.gl.LEQUAL, e, [i, i])
      }, gi.prototype.opaquePassEnabledForLayer = function () {
        return this.currentLayer < this.opaquePassCutoff
      }, gi.prototype.render = function (e, r) {
        this.style = e, this.options = r, this.lineAtlas = e.lineAtlas, this.imageManager = e.imageManager, this.glyphManager = e.glyphManager, this.symbolFadeChange = e.placement.symbolFadeChange(t.browser.now()), this.imageManager.beginFrame();
        var i = this.style._order,
          n = this.style.sourceCaches;
        for (var o in n) {
          var s = n[o];
          s.used && s.prepare(this.context);
        }
        var a = {},
          u = {},
          c = {};
        for (var h in n) {
          var l = n[h];
          a[h] = l.getVisibleCoordinates(), u[h] = a[h].slice().reverse(), c[h] = l.getVisibleCoordinates(!0).reverse();
        }
        for (var p in n) {
          var f = n[p],
            d = f.getSource();
          if ("raster" === d.type || "raster-dem" === d.type) {
            for (var g = [], _ = 0, y = a[p]; _ < y.length; _ += 1) {
              var m = y[_];
              g.push(f.getTile(m));
            }
            Qr(g, this.context);
          }
        }
        this.opaquePassCutoff = 1 / 0;
        for (var v = 0; v < i.length; v++) {
          var x = i[v];
          if (this.style._layers[x].is3D()) {
            this.opaquePassCutoff = v;
            break
          }
        }
        this.renderPass = "offscreen", this.depthRboNeedsClear = !0;
        for (var w = 0, b = i; w < b.length; w += 1) {
          var E = b[w],
            L = this.style._layers[E];
          if (L.hasOffscreenPass() && !L.isHidden(this.transform.zoom)) {
            var S = u[L.source];
            ("custom" === L.type || S.length) && this.renderLayer(this, n[L.source], L, S);
          }
        }
        for (this.context.bindFramebuffer.set(null), this.context.clear({
            color: r.showOverdrawInspector ? t.Color.black : t.Color.transparent,
            depth: 1
          }), this.clearStencil(), this._showOverdrawInspector = r.showOverdrawInspector, this.depthRangeFor3D = [0, 1 - (e._order.length + 2) * this.numSublayers * this.depthEpsilon], this.renderPass = "opaque", this.currentLayer = i.length - 1; this.currentLayer >= 0; this.currentLayer--) {
          var C = this.style._layers[i[this.currentLayer]],
            I = n[C.source],
            M = a[C.source];
          this._renderTileClippingMasks(C, M), this.renderLayer(this, I, C, M);
        }
        for (this.renderPass = "translucent", this.currentLayer = 0; this.currentLayer < i.length; this.currentLayer++) {
          var T = this.style._layers[i[this.currentLayer]],
            P = n[T.source],
            D = ("symbol" === T.type ? c : u)[T.source];
          this._renderTileClippingMasks(T, a[T.source]), this.renderLayer(this, P, T, D);
        }
        if (this.options.showTileBoundaries)
          for (var N in n) {
            di.debug(this, n[N], a[N]);
            break
          }
        this.context.setDefault();
      }, gi.prototype.setupOffscreenDepthRenderbuffer = function () {
        var t = this.context;
        this.depthRbo || (this.depthRbo = t.createRenderbuffer(t.gl.DEPTH_COMPONENT16, this.width, this.height));
      }, gi.prototype.renderLayer = function (t, e, r, i) {
        r.isHidden(this.transform.zoom) || ("background" === r.type || "custom" === r.type || i.length) && (this.id = r.id, di[r.type](t, e, r, i, this.style.placement.variableOffsets));
      }, gi.prototype.translatePosMatrix = function (e, r, i, n, o) {
        if (!i[0] && !i[1]) return e;
        var s = o ? "map" === n ? this.transform.angle : 0 : "viewport" === n ? -this.transform.angle : 0;
        if (s) {
          var a = Math.sin(s),
            u = Math.cos(s);
          i = [i[0] * u - i[1] * a, i[0] * a + i[1] * u];
        }
        var c = [o ? i[0] : me(r, i[0], this.transform.zoom), o ? i[1] : me(r, i[1], this.transform.zoom), 0],
          h = new Float32Array(16);
        return t.translate(h, e, c), h
      }, gi.prototype.saveTileTexture = function (t) {
        var e = this._tileTextures[t.size[0]];
        e ? e.push(t) : this._tileTextures[t.size[0]] = [t];
      }, gi.prototype.getTileTexture = function (t) {
        var e = this._tileTextures[t];
        return e && e.length > 0 ? e.pop() : null
      }, gi.prototype.isPatternMissing = function (t) {
        if (!t) return !1;
        var e = this.imageManager.getPattern(t.from),
          r = this.imageManager.getPattern(t.to);
        return !e || !r
      }, gi.prototype.useProgram = function (t, e) {
        void 0 === e && (e = this.emptyProgramConfiguration), this.cache = this.cache || {};
        var r = "" + t + (e.cacheKey || "") + (this._showOverdrawInspector ? "/overdraw" : "");
        return this.cache[r] || (this.cache[r] = new wr(this.context, vr[t], e, Jr[t], this._showOverdrawInspector)), this.cache[r]
      }, gi.prototype.setCustomLayerDefaults = function () {
        this.context.unbindVAO(), this.context.cullFace.setDefault(), this.context.activeTexture.setDefault(), this.context.pixelStoreUnpack.setDefault(), this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(), this.context.pixelStoreUnpackFlipY.setDefault();
      }, gi.prototype.setBaseState = function () {
        var t = this.context.gl;
        this.context.cullFace.set(!1), this.context.viewport.set([0, 0, this.width, this.height]), this.context.blendEquation.set(t.FUNC_ADD);
      };
      var xi = function (e, r, i) {
          this.tileSize = 512, this.maxValidLatitude = 85.051129, this._renderWorldCopies = void 0 === i || i, this._minZoom = e || 0, this._maxZoom = r || 22, this.setMaxBounds(), this.width = 0, this.height = 0, this._center = new t.LngLat(0, 0), this.zoom = 0, this.angle = 0, this._fov = .6435011087932844, this._pitch = 0, this._unmodified = !0, this._posMatrixCache = {}, this._alignedPosMatrixCache = {};
        },
        wi = {
          minZoom: {
            configurable: !0
          },
          maxZoom: {
            configurable: !0
          },
          renderWorldCopies: {
            configurable: !0
          },
          worldSize: {
            configurable: !0
          },
          centerPoint: {
            configurable: !0
          },
          size: {
            configurable: !0
          },
          bearing: {
            configurable: !0
          },
          pitch: {
            configurable: !0
          },
          fov: {
            configurable: !0
          },
          zoom: {
            configurable: !0
          },
          center: {
            configurable: !0
          },
          unmodified: {
            configurable: !0
          },
          point: {
            configurable: !0
          }
        };
      xi.prototype.clone = function () {
        var t = new xi(this._minZoom, this._maxZoom, this._renderWorldCopies);
        return t.tileSize = this.tileSize, t.latRange = this.latRange, t.width = this.width, t.height = this.height, t._center = this._center, t.zoom = this.zoom, t.angle = this.angle, t._fov = this._fov, t._pitch = this._pitch, t._unmodified = this._unmodified, t._calcMatrices(), t
      }, wi.minZoom.get = function () {
        return this._minZoom
      }, wi.minZoom.set = function (t) {
        this._minZoom !== t && (this._minZoom = t, this.zoom = Math.max(this.zoom, t));
      }, wi.maxZoom.get = function () {
        return this._maxZoom
      }, wi.maxZoom.set = function (t) {
        this._maxZoom !== t && (this._maxZoom = t, this.zoom = Math.min(this.zoom, t));
      }, wi.renderWorldCopies.get = function () {
        return this._renderWorldCopies
      }, wi.renderWorldCopies.set = function (t) {
        void 0 === t ? t = !0 : null === t && (t = !1), this._renderWorldCopies = t;
      }, wi.worldSize.get = function () {
        return this.tileSize * this.scale
      }, wi.centerPoint.get = function () {
        return this.size._div(2)
      }, wi.size.get = function () {
        return new t.Point(this.width, this.height)
      }, wi.bearing.get = function () {
        return -this.angle / Math.PI * 180
      }, wi.bearing.set = function (e) {
        var r = -t.wrap(e, -180, 180) * Math.PI / 180;
        this.angle !== r && (this._unmodified = !1, this.angle = r, this._calcMatrices(), this.rotationMatrix = t.create$2(), t.rotate(this.rotationMatrix, this.rotationMatrix, this.angle));
      }, wi.pitch.get = function () {
        return this._pitch / Math.PI * 180
      }, wi.pitch.set = function (e) {
        var r = t.clamp(e, 0, 60) / 180 * Math.PI;
        this._pitch !== r && (this._unmodified = !1, this._pitch = r, this._calcMatrices());
      }, wi.fov.get = function () {
        return this._fov / Math.PI * 180
      }, wi.fov.set = function (t) {
        t = Math.max(.01, Math.min(60, t)), this._fov !== t && (this._unmodified = !1, this._fov = t / 180 * Math.PI, this._calcMatrices());
      }, wi.zoom.get = function () {
        return this._zoom
      }, wi.zoom.set = function (t) {
        var e = Math.min(Math.max(t, this.minZoom), this.maxZoom);
        this._zoom !== e && (this._unmodified = !1, this._zoom = e, this.scale = this.zoomScale(e), this.tileZoom = Math.floor(e), this.zoomFraction = e - this.tileZoom, this._constrain(), this._calcMatrices());
      }, wi.center.get = function () {
        return this._center
      }, wi.center.set = function (t) {
        t.lat === this._center.lat && t.lng === this._center.lng || (this._unmodified = !1, this._center = t, this._constrain(), this._calcMatrices());
      }, xi.prototype.coveringZoomLevel = function (t) {
        return (t.roundZoom ? Math.round : Math.floor)(this.zoom + this.scaleZoom(this.tileSize / t.tileSize))
      }, xi.prototype.getVisibleUnwrappedCoordinates = function (e) {
        var r = [new t.UnwrappedTileID(0, e)];
        if (this._renderWorldCopies)
          for (var i = this.pointCoordinate(new t.Point(0, 0)), n = this.pointCoordinate(new t.Point(this.width, 0)), o = this.pointCoordinate(new t.Point(this.width, this.height)), s = this.pointCoordinate(new t.Point(0, this.height)), a = Math.floor(Math.min(i.x, n.x, o.x, s.x)), u = Math.floor(Math.max(i.x, n.x, o.x, s.x)), c = a - 1; c <= u + 1; c++) 0 !== c && r.push(new t.UnwrappedTileID(c, e));
        return r
      }, xi.prototype.coveringTiles = function (e) {
        var r = this.coveringZoomLevel(e),
          i = r;
        if (void 0 !== e.minzoom && r < e.minzoom) return [];
        void 0 !== e.maxzoom && r > e.maxzoom && (r = e.maxzoom);
        var n = t.MercatorCoordinate.fromLngLat(this.center),
          o = Math.pow(2, r),
          s = new t.Point(o * n.x - .5, o * n.y - .5);
        return _i(r, [this.pointCoordinate(new t.Point(0, 0)), this.pointCoordinate(new t.Point(this.width, 0)), this.pointCoordinate(new t.Point(this.width, this.height)), this.pointCoordinate(new t.Point(0, this.height))], e.reparseOverscaled ? i : r, this._renderWorldCopies).sort(function (t, e) {
          return s.dist(t.canonical) - s.dist(e.canonical)
        })
      }, xi.prototype.resize = function (t, e) {
        this.width = t, this.height = e, this.pixelsToGLUnits = [2 / t, -2 / e], this._constrain(), this._calcMatrices();
      }, wi.unmodified.get = function () {
        return this._unmodified
      }, xi.prototype.zoomScale = function (t) {
        return Math.pow(2, t)
      }, xi.prototype.scaleZoom = function (t) {
        return Math.log(t) / Math.LN2
      }, xi.prototype.project = function (e) {
        var r = t.clamp(e.lat, -this.maxValidLatitude, this.maxValidLatitude);
        return new t.Point(t.mercatorXfromLng(e.lng) * this.worldSize, t.mercatorYfromLat(r) * this.worldSize)
      }, xi.prototype.unproject = function (e) {
        return new t.MercatorCoordinate(e.x / this.worldSize, e.y / this.worldSize).toLngLat()
      }, wi.point.get = function () {
        return this.project(this.center)
      }, xi.prototype.setLocationAtPoint = function (e, r) {
        var i = this.pointCoordinate(r),
          n = this.pointCoordinate(this.centerPoint),
          o = this.locationCoordinate(e),
          s = new t.MercatorCoordinate(o.x - (i.x - n.x), o.y - (i.y - n.y));
        this.center = this.coordinateLocation(s), this._renderWorldCopies && (this.center = this.center.wrap());
      }, xi.prototype.locationPoint = function (t) {
        return this.coordinatePoint(this.locationCoordinate(t))
      }, xi.prototype.pointLocation = function (t) {
        return this.coordinateLocation(this.pointCoordinate(t))
      }, xi.prototype.locationCoordinate = function (e) {
        return t.MercatorCoordinate.fromLngLat(e)
      }, xi.prototype.coordinateLocation = function (t) {
        return t.toLngLat()
      }, xi.prototype.pointCoordinate = function (e) {
        var r = [e.x, e.y, 0, 1],
          i = [e.x, e.y, 1, 1];
        t.transformMat4(r, r, this.pixelMatrixInverse), t.transformMat4(i, i, this.pixelMatrixInverse);
        var n = r[3],
          o = i[3],
          s = r[0] / n,
          a = i[0] / o,
          u = r[1] / n,
          c = i[1] / o,
          h = r[2] / n,
          l = i[2] / o,
          p = h === l ? 0 : (0 - h) / (l - h);
        return new t.MercatorCoordinate(t.number(s, a, p) / this.worldSize, t.number(u, c, p) / this.worldSize)
      }, xi.prototype.coordinatePoint = function (e) {
        var r = [e.x * this.worldSize, e.y * this.worldSize, 0, 1];
        return t.transformMat4(r, r, this.pixelMatrix), new t.Point(r[0] / r[3], r[1] / r[3])
      }, xi.prototype.getBounds = function () {
        return (new t.LngLatBounds).extend(this.pointLocation(new t.Point(0, 0))).extend(this.pointLocation(new t.Point(this.width, 0))).extend(this.pointLocation(new t.Point(this.width, this.height))).extend(this.pointLocation(new t.Point(0, this.height)))
      }, xi.prototype.getMaxBounds = function () {
        return this.latRange && 2 === this.latRange.length && this.lngRange && 2 === this.lngRange.length ? new t.LngLatBounds([this.lngRange[0], this.latRange[0]], [this.lngRange[1], this.latRange[1]]) : null
      }, xi.prototype.setMaxBounds = function (t) {
        t ? (this.lngRange = [t.getWest(), t.getEast()], this.latRange = [t.getSouth(), t.getNorth()], this._constrain()) : (this.lngRange = null, this.latRange = [-this.maxValidLatitude, this.maxValidLatitude]);
      }, xi.prototype.calculatePosMatrix = function (e, r) {
        void 0 === r && (r = !1);
        var i = e.key,
          n = r ? this._alignedPosMatrixCache : this._posMatrixCache;
        if (n[i]) return n[i];
        var o = e.canonical,
          s = this.worldSize / this.zoomScale(o.z),
          a = o.x + Math.pow(2, o.z) * e.wrap,
          u = t.identity(new Float64Array(16));
        return t.translate(u, u, [a * s, o.y * s, 0]), t.scale(u, u, [s / t.EXTENT, s / t.EXTENT, 1]), t.multiply(u, r ? this.alignedProjMatrix : this.projMatrix, u), n[i] = new Float32Array(u), n[i]
      }, xi.prototype.customLayerMatrix = function () {
        return this.mercatorMatrix.slice()
      }, xi.prototype._constrain = function () {
        if (this.center && this.width && this.height && !this._constraining) {
          this._constraining = !0;
          var e, r, i, n, o = -90,
            s = 90,
            a = -180,
            u = 180,
            c = this.size,
            h = this._unmodified;
          if (this.latRange) {
            var l = this.latRange;
            o = t.mercatorYfromLat(l[1]) * this.worldSize, e = (s = t.mercatorYfromLat(l[0]) * this.worldSize) - o < c.y ? c.y / (s - o) : 0;
          }
          if (this.lngRange) {
            var p = this.lngRange;
            a = t.mercatorXfromLng(p[0]) * this.worldSize, r = (u = t.mercatorXfromLng(p[1]) * this.worldSize) - a < c.x ? c.x / (u - a) : 0;
          }
          var f = this.point,
            d = Math.max(r || 0, e || 0);
          if (d) return this.center = this.unproject(new t.Point(r ? (u + a) / 2 : f.x, e ? (s + o) / 2 : f.y)), this.zoom += this.scaleZoom(d), this._unmodified = h, void(this._constraining = !1);
          if (this.latRange) {
            var g = f.y,
              _ = c.y / 2;
            g - _ < o && (n = o + _), g + _ > s && (n = s - _);
          }
          if (this.lngRange) {
            var y = f.x,
              m = c.x / 2;
            y - m < a && (i = a + m), y + m > u && (i = u - m);
          }
          void 0 === i && void 0 === n || (this.center = this.unproject(new t.Point(void 0 !== i ? i : f.x, void 0 !== n ? n : f.y))), this._unmodified = h, this._constraining = !1;
        }
      }, xi.prototype._calcMatrices = function () {
        if (this.height) {
          this.cameraToCenterDistance = .5 / Math.tan(this._fov / 2) * this.height;
          var e = this._fov / 2,
            r = Math.PI / 2 + this._pitch,
            i = Math.sin(e) * this.cameraToCenterDistance / Math.sin(Math.PI - r - e),
            n = this.point,
            o = n.x,
            s = n.y,
            a = 1.01 * (Math.cos(Math.PI / 2 - this._pitch) * i + this.cameraToCenterDistance),
            u = this.height / 50,
            c = new Float64Array(16);
          t.perspective(c, this._fov, this.width / this.height, u, a), t.scale(c, c, [1, -1, 1]), t.translate(c, c, [0, 0, -this.cameraToCenterDistance]), t.rotateX(c, c, this._pitch), t.rotateZ(c, c, this.angle), t.translate(c, c, [-o, -s, 0]), this.mercatorMatrix = t.scale([], c, [this.worldSize, this.worldSize, this.worldSize]), t.scale(c, c, [1, 1, t.mercatorZfromAltitude(1, this.center.lat) * this.worldSize, 1]), this.projMatrix = c;
          var h = this.width % 2 / 2,
            l = this.height % 2 / 2,
            p = Math.cos(this.angle),
            f = Math.sin(this.angle),
            d = o - Math.round(o) + p * h + f * l,
            g = s - Math.round(s) + p * l + f * h,
            _ = new Float64Array(c);
          if (t.translate(_, _, [d > .5 ? d - 1 : d, g > .5 ? g - 1 : g, 0]), this.alignedProjMatrix = _, c = t.create(), t.scale(c, c, [this.width / 2, -this.height / 2, 1]), t.translate(c, c, [1, -1, 0]), this.labelPlaneMatrix = c, c = t.create(), t.scale(c, c, [1, -1, 1]), t.translate(c, c, [-1, -1, 0]), t.scale(c, c, [2 / this.width, 2 / this.height, 1]), this.glCoordMatrix = c, this.pixelMatrix = t.multiply(new Float64Array(16), this.labelPlaneMatrix, this.projMatrix), !(c = t.invert(new Float64Array(16), this.pixelMatrix))) throw new Error("failed to invert matrix");
          this.pixelMatrixInverse = c, this._posMatrixCache = {}, this._alignedPosMatrixCache = {};
        }
      }, xi.prototype.maxPitchScaleFactor = function () {
        if (!this.pixelMatrixInverse) return 1;
        var e = this.pointCoordinate(new t.Point(0, 0)),
          r = [e.x * this.worldSize, e.y * this.worldSize, 0, 1];
        return t.transformMat4(r, r, this.pixelMatrix)[3] / this.cameraToCenterDistance
      }, xi.prototype.getCameraPoint = function () {
        var e = this._pitch,
          r = Math.tan(e) * (this.cameraToCenterDistance || 1);
        return this.centerPoint.add(new t.Point(0, r))
      }, xi.prototype.getCameraQueryGeometry = function (e) {
        var r = this.getCameraPoint();
        if (1 === e.length) return [e[0], r];
        for (var i = r.x, n = r.y, o = r.x, s = r.y, a = 0, u = e; a < u.length; a += 1) {
          var c = u[a];
          i = Math.min(i, c.x), n = Math.min(n, c.y), o = Math.max(o, c.x), s = Math.max(s, c.y);
        }
        return [new t.Point(i, n), new t.Point(o, n), new t.Point(o, s), new t.Point(i, s), new t.Point(i, n)]
      }, Object.defineProperties(xi.prototype, wi);
      var bi = function () {
        var e, r, i, n, o;
        t.bindAll(["_onHashChange", "_updateHash"], this), this._updateHash = (e = this._updateHashUnthrottled.bind(this), r = 300, i = !1, n = null, o = function () {
          n = null, i && (e(), n = setTimeout(o, r), i = !1);
        }, function () {
          return i = !0, n || o(), n
        });
      };
      bi.prototype.addTo = function (e) {
        return this._map = e, t.window.addEventListener("hashchange", this._onHashChange, !1), this._map.on("moveend", this._updateHash), this
      }, bi.prototype.remove = function () {
        return t.window.removeEventListener("hashchange", this._onHashChange, !1), this._map.off("moveend", this._updateHash), clearTimeout(this._updateHash()), delete this._map, this
      }, bi.prototype.getHashString = function (t) {
        var e = this._map.getCenter(),
          r = Math.round(100 * this._map.getZoom()) / 100,
          i = Math.ceil((r * Math.LN2 + Math.log(512 / 360 / .5)) / Math.LN10),
          n = Math.pow(10, i),
          o = Math.round(e.lng * n) / n,
          s = Math.round(e.lat * n) / n,
          a = this._map.getBearing(),
          u = this._map.getPitch(),
          c = "";
        return c += t ? "#/" + o + "/" + s + "/" + r : "#" + r + "/" + s + "/" + o, (a || u) && (c += "/" + Math.round(10 * a) / 10), u && (c += "/" + Math.round(u)), c
      }, bi.prototype._onHashChange = function () {
        var e = t.window.location.hash.replace("#", "").split("/");
        return e.length >= 3 && (this._map.jumpTo({
          center: [+e[2], +e[1]],
          zoom: +e[0],
          bearing: +(e[3] || 0),
          pitch: +(e[4] || 0)
        }), !0)
      }, bi.prototype._updateHashUnthrottled = function () {
        var e = this.getHashString();
        try {
          t.window.history.replaceState(t.window.history.state, "", e);
        } catch (t) {}
      };
      var Ei = function (e) {
          function i(i, n, o, s) {
            void 0 === s && (s = {});
            var a = r.mousePos(n.getCanvasContainer(), o),
              u = n.unproject(a);
            e.call(this, i, t.extend({
              point: a,
              lngLat: u,
              originalEvent: o
            }, s)), this._defaultPrevented = !1, this.target = n;
          }
          e && (i.__proto__ = e), i.prototype = Object.create(e && e.prototype), i.prototype.constructor = i;
          var n = {
            defaultPrevented: {
              configurable: !0
            }
          };
          return i.prototype.preventDefault = function () {
            this._defaultPrevented = !0;
          }, n.defaultPrevented.get = function () {
            return this._defaultPrevented
          }, Object.defineProperties(i.prototype, n), i
        }(t.Event),
        Li = function (e) {
          function i(i, n, o) {
            var s = r.touchPos(n.getCanvasContainer(), o),
              a = s.map(function (t) {
                return n.unproject(t)
              }),
              u = s.reduce(function (t, e, r, i) {
                return t.add(e.div(i.length))
              }, new t.Point(0, 0)),
              c = n.unproject(u);
            e.call(this, i, {
              points: s,
              point: u,
              lngLats: a,
              lngLat: c,
              originalEvent: o
            }), this._defaultPrevented = !1;
          }
          e && (i.__proto__ = e), i.prototype = Object.create(e && e.prototype), i.prototype.constructor = i;
          var n = {
            defaultPrevented: {
              configurable: !0
            }
          };
          return i.prototype.preventDefault = function () {
            this._defaultPrevented = !0;
          }, n.defaultPrevented.get = function () {
            return this._defaultPrevented
          }, Object.defineProperties(i.prototype, n), i
        }(t.Event),
        Si = function (t) {
          function e(e, r, i) {
            t.call(this, e, {
              originalEvent: i
            }), this._defaultPrevented = !1;
          }
          t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e;
          var r = {
            defaultPrevented: {
              configurable: !0
            }
          };
          return e.prototype.preventDefault = function () {
            this._defaultPrevented = !0;
          }, r.defaultPrevented.get = function () {
            return this._defaultPrevented
          }, Object.defineProperties(e.prototype, r), e
        }(t.Event),
        Ci = function (e) {
          this._map = e, this._el = e.getCanvasContainer(), this._delta = 0, this._defaultZoomRate = .01, this._wheelZoomRate = 1 / 450, t.bindAll(["_onWheel", "_onTimeout", "_onScrollFrame", "_onScrollFinished"], this);
        };
      Ci.prototype.setZoomRate = function (t) {
        this._defaultZoomRate = t;
      }, Ci.prototype.setWheelZoomRate = function (t) {
        this._wheelZoomRate = t;
      }, Ci.prototype.isEnabled = function () {
        return !!this._enabled
      }, Ci.prototype.isActive = function () {
        return !!this._active
      }, Ci.prototype.isZooming = function () {
        return !!this._zooming
      }, Ci.prototype.enable = function (t) {
        this.isEnabled() || (this._enabled = !0, this._aroundCenter = t && "center" === t.around);
      }, Ci.prototype.disable = function () {
        this.isEnabled() && (this._enabled = !1);
      }, Ci.prototype.onWheel = function (e) {
        if (this.isEnabled()) {
          var r = e.deltaMode === t.window.WheelEvent.DOM_DELTA_LINE ? 40 * e.deltaY : e.deltaY,
            i = t.browser.now(),
            n = i - (this._lastWheelEventTime || 0);
          this._lastWheelEventTime = i, 0 !== r && r % 4.000244140625 == 0 ? this._type = "wheel" : 0 !== r && Math.abs(r) < 4 ? this._type = "trackpad" : n > 400 ? (this._type = null, this._lastValue = r, this._timeout = setTimeout(this._onTimeout, 40, e)) : this._type || (this._type = Math.abs(n * r) < 200 ? "trackpad" : "wheel", this._timeout && (clearTimeout(this._timeout), this._timeout = null, r += this._lastValue)), e.shiftKey && r && (r /= 4), this._type && (this._lastWheelEvent = e, this._delta -= r, this.isActive() || this._start(e)), e.preventDefault();
        }
      }, Ci.prototype._onTimeout = function (t) {
        this._type = "wheel", this._delta -= this._lastValue, this.isActive() || this._start(t);
      }, Ci.prototype._start = function (e) {
        if (this._delta) {
          this._frameId && (this._map._cancelRenderFrame(this._frameId), this._frameId = null), this._active = !0, this.isZooming() || (this._zooming = !0, this._map.fire(new t.Event("movestart", {
            originalEvent: e
          })), this._map.fire(new t.Event("zoomstart", {
            originalEvent: e
          }))), this._finishTimeout && clearTimeout(this._finishTimeout);
          var i = r.mousePos(this._el, e);
          this._around = t.LngLat.convert(this._aroundCenter ? this._map.getCenter() : this._map.unproject(i)), this._aroundPoint = this._map.transform.locationPoint(this._around), this._frameId || (this._frameId = this._map._requestRenderFrame(this._onScrollFrame));
        }
      }, Ci.prototype._onScrollFrame = function () {
        var e = this;
        if (this._frameId = null, this.isActive()) {
          var r = this._map.transform;
          if (0 !== this._delta) {
            var i = "wheel" === this._type && Math.abs(this._delta) > 4.000244140625 ? this._wheelZoomRate : this._defaultZoomRate,
              n = 2 / (1 + Math.exp(-Math.abs(this._delta * i)));
            this._delta < 0 && 0 !== n && (n = 1 / n);
            var o = "number" == typeof this._targetZoom ? r.zoomScale(this._targetZoom) : r.scale;
            this._targetZoom = Math.min(r.maxZoom, Math.max(r.minZoom, r.scaleZoom(o * n))), "wheel" === this._type && (this._startZoom = r.zoom, this._easing = this._smoothOutEasing(200)), this._delta = 0;
          }
          var s = "number" == typeof this._targetZoom ? this._targetZoom : r.zoom,
            a = this._startZoom,
            u = this._easing,
            c = !1;
          if ("wheel" === this._type && a && u) {
            var h = Math.min((t.browser.now() - this._lastWheelEventTime) / 200, 1),
              l = u(h);
            r.zoom = t.number(a, s, l), h < 1 ? this._frameId || (this._frameId = this._map._requestRenderFrame(this._onScrollFrame)) : c = !0;
          } else r.zoom = s, c = !0;
          r.setLocationAtPoint(this._around, this._aroundPoint), this._map.fire(new t.Event("move", {
            originalEvent: this._lastWheelEvent
          })), this._map.fire(new t.Event("zoom", {
            originalEvent: this._lastWheelEvent
          })), c && (this._active = !1, this._finishTimeout = setTimeout(function () {
            e._zooming = !1, e._map.fire(new t.Event("zoomend", {
              originalEvent: e._lastWheelEvent
            })), e._map.fire(new t.Event("moveend", {
              originalEvent: e._lastWheelEvent
            })), delete e._targetZoom;
          }, 200));
        }
      }, Ci.prototype._smoothOutEasing = function (e) {
        var r = t.ease;
        if (this._prevEase) {
          var i = this._prevEase,
            n = (t.browser.now() - i.start) / i.duration,
            o = i.easing(n + .01) - i.easing(n),
            s = .27 / Math.sqrt(o * o + 1e-4) * .01,
            a = Math.sqrt(.0729 - s * s);
          r = t.bezier(s, a, .25, 1);
        }
        return this._prevEase = {
          start: t.browser.now(),
          duration: e,
          easing: r
        }, r
      };
      var Ii = function (e, r) {
        this._map = e, this._el = e.getCanvasContainer(), this._container = e.getContainer(), this._clickTolerance = r.clickTolerance || 1, t.bindAll(["_onMouseMove", "_onMouseUp", "_onKeyDown"], this);
      };
      Ii.prototype.isEnabled = function () {
        return !!this._enabled
      }, Ii.prototype.isActive = function () {
        return !!this._active
      }, Ii.prototype.enable = function () {
        this.isEnabled() || (this._enabled = !0);
      }, Ii.prototype.disable = function () {
        this.isEnabled() && (this._enabled = !1);
      }, Ii.prototype.onMouseDown = function (e) {
        this.isEnabled() && e.shiftKey && 0 === e.button && (t.window.document.addEventListener("mousemove", this._onMouseMove, !1), t.window.document.addEventListener("keydown", this._onKeyDown, !1), t.window.document.addEventListener("mouseup", this._onMouseUp, !1), r.disableDrag(), this._startPos = this._lastPos = r.mousePos(this._el, e), this._active = !0);
      }, Ii.prototype._onMouseMove = function (t) {
        var e = r.mousePos(this._el, t);
        if (!(this._lastPos.equals(e) || !this._box && e.dist(this._startPos) < this._clickTolerance)) {
          var i = this._startPos;
          this._lastPos = e, this._box || (this._box = r.create("div", "epgis-boxzoom", this._container), this._container.classList.add("epgis-crosshair"), this._fireEvent("boxzoomstart", t));
          var n = Math.min(i.x, e.x),
            o = Math.max(i.x, e.x),
            s = Math.min(i.y, e.y),
            a = Math.max(i.y, e.y);
          r.setTransform(this._box, "translate(" + n + "px," + s + "px)"), this._box.style.width = o - n + "px", this._box.style.height = a - s + "px";
        }
      }, Ii.prototype._onMouseUp = function (e) {
        if (0 === e.button) {
          var i = this._startPos,
            n = r.mousePos(this._el, e);
          this._finish(), r.suppressClick(), i.x === n.x && i.y === n.y ? this._fireEvent("boxzoomcancel", e) : this._map.fitScreenCoordinates(i, n, this._map.getBearing(), {
            linear: !0
          }).fire(new t.Event("boxzoomend", {
            originalEvent: e
          }));
        }
      }, Ii.prototype._onKeyDown = function (t) {
        27 === t.keyCode && (this._finish(), this._fireEvent("boxzoomcancel", t));
      }, Ii.prototype._finish = function () {
        this._active = !1, t.window.document.removeEventListener("mousemove", this._onMouseMove, !1), t.window.document.removeEventListener("keydown", this._onKeyDown, !1), t.window.document.removeEventListener("mouseup", this._onMouseUp, !1), this._container.classList.remove("epgis-crosshair"), this._box && (r.remove(this._box), this._box = null), r.enableDrag(), delete this._startPos, delete this._lastPos;
      }, Ii.prototype._fireEvent = function (e, r) {
        return this._map.fire(new t.Event(e, {
          originalEvent: r
        }))
      };
      var Mi = t.bezier(0, 0, .25, 1),
        Ti = function (e, r) {
          this._map = e, this._el = r.element || e.getCanvasContainer(), this._state = "disabled", this._button = r.button || "right", this._bearingSnap = r.bearingSnap || 0, this._pitchWithRotate = !1 !== r.pitchWithRotate, t.bindAll(["onMouseDown", "_onMouseMove", "_onMouseUp", "_onBlur", "_onDragFrame"], this);
        };
      Ti.prototype.isEnabled = function () {
        return "disabled" !== this._state
      }, Ti.prototype.isActive = function () {
        return "active" === this._state
      }, Ti.prototype.enable = function () {
        this.isEnabled() || (this._state = "enabled");
      }, Ti.prototype.disable = function () {
        if (this.isEnabled()) switch (this._state) {
          case "active":
            this._state = "disabled", this._unbind(), this._deactivate(), this._fireEvent("rotateend"), this._pitchWithRotate && this._fireEvent("pitchend"), this._fireEvent("moveend");
            break;
          case "pending":
            this._state = "disabled", this._unbind();
            break;
          default:
            this._state = "disabled";
        }
      }, Ti.prototype.onMouseDown = function (e) {
        if ("enabled" === this._state) {
          var i = "touchstart" === e.type;
          if (i) this._startTime = Date.now();
          else if ("right" === this._button) {
            if (this._eventButton = r.mouseButton(e), this._eventButton !== (e.ctrlKey ? 0 : 2)) return
          } else {
            if (e.ctrlKey || 0 !== r.mouseButton(e)) return;
            this._eventButton = 0;
          }
          r.disableDrag(), i ? (t.window.document.addEventListener("touchmove", this._onMouseMove, {
            capture: !0
          }), t.window.document.addEventListener("touchend", this._onMouseUp)) : (t.window.document.addEventListener("mousemove", this._onMouseMove, {
            capture: !0
          }), t.window.document.addEventListener("mouseup", this._onMouseUp)), t.window.addEventListener("blur", this._onBlur), this._state = "pending", this._inertia = [
            [t.browser.now(), this._map.getBearing()]
          ], this._startPos = this._prevPos = this._lastPos = r.mousePos(this._el, e), this._center = this._map.transform.centerPoint, e.preventDefault();
        }
      }, Ti.prototype._onMouseMove = function (t) {
        var e = r.mousePos(this._el, t);
        this._lastPos.equals(e) || (this._lastMoveEvent = t, this._lastPos = e, "pending" === this._state && (this._state = "active", this._fireEvent("rotatestart", t), this._fireEvent("movestart", t), this._pitchWithRotate && this._fireEvent("pitchstart", t)), this._frameId || (this._frameId = this._map._requestRenderFrame(this._onDragFrame)));
      }, Ti.prototype._onDragFrame = function () {
        this._frameId = null;
        var e = this._lastMoveEvent;
        if (e) {
          var r = this._map.transform,
            i = this._prevPos,
            n = this._lastPos,
            o = .8 * (i.x - n.x),
            s = -.5 * (i.y - n.y),
            a = r.bearing - o,
            u = r.pitch - s,
            c = this._inertia,
            h = c[c.length - 1];
          this._drainInertiaBuffer(), c.push([t.browser.now(), this._map._normalizeBearing(a, h[1])]), r.bearing = a, this._pitchWithRotate && (this._fireEvent("pitch", e), r.pitch = u), this._fireEvent("rotate", e), this._fireEvent("move", e), delete this._lastMoveEvent, this._prevPos = this._lastPos;
        }
      }, Ti.prototype._onMouseUp = function (t) {
        if ("touchend" === t.type && this._startPos === this._lastPos && Date.now() - this._startTime < 300 && this._el.click(), r.mouseButton(t) === this._eventButton) switch (this._state) {
          case "active":
            this._state = "enabled", r.suppressClick(), this._unbind(), this._deactivate(), this._inertialRotate(t);
            break;
          case "pending":
            this._state = "enabled", this._unbind();
        }
      }, Ti.prototype._onBlur = function (t) {
        switch (this._state) {
          case "active":
            this._state = "enabled", this._unbind(), this._deactivate(), this._fireEvent("rotateend", t), this._pitchWithRotate && this._fireEvent("pitchend", t), this._fireEvent("moveend", t);
            break;
          case "pending":
            this._state = "enabled", this._unbind();
        }
      }, Ti.prototype._unbind = function () {
        t.window.document.removeEventListener("mousemove", this._onMouseMove, {
          capture: !0
        }), t.window.document.removeEventListener("mouseup", this._onMouseUp), t.window.document.removeEventListener("touchmove", this._onMouseMove, {
          capture: !0
        }), t.window.document.removeEventListener("touchend", this._onMouseUp), t.window.removeEventListener("blur", this._onBlur), r.enableDrag();
      }, Ti.prototype._deactivate = function () {
        this._frameId && (this._map._cancelRenderFrame(this._frameId), this._frameId = null), delete this._lastMoveEvent, delete this._startPos, delete this._prevPos, delete this._lastPos;
      }, Ti.prototype._inertialRotate = function (t) {
        var e = this;
        this._fireEvent("rotateend", t), this._drainInertiaBuffer();
        var r = this._map,
          i = r.getBearing(),
          n = this._inertia,
          o = function () {
            Math.abs(i) < e._bearingSnap ? r.resetNorth({
              noMoveStart: !0
            }, {
              originalEvent: t
            }) : e._fireEvent("moveend", t), e._pitchWithRotate && e._fireEvent("pitchend", t);
          };
        if (n.length < 2) o();
        else {
          var s = n[0],
            a = n[n.length - 1],
            u = n[n.length - 2],
            c = r._normalizeBearing(i, u[1]),
            h = a[1] - s[1],
            l = h < 0 ? -1 : 1,
            p = (a[0] - s[0]) / 1e3;
          if (0 !== h && 0 !== p) {
            var f = Math.abs(h * (.25 / p));
            f > 180 && (f = 180);
            var d = f / 180;
            c += l * f * (d / 2), Math.abs(r._normalizeBearing(c, 0)) < this._bearingSnap && (c = r._normalizeBearing(0, c)), r.rotateTo(c, {
              duration: 1e3 * d,
              easing: Mi,
              noMoveStart: !0
            }, {
              originalEvent: t
            });
          } else o();
        }
      }, Ti.prototype._fireEvent = function (e, r) {
        return this._map.fire(new t.Event(e, r ? {
          originalEvent: r
        } : {}))
      }, Ti.prototype._drainInertiaBuffer = function () {
        for (var e = this._inertia, r = t.browser.now(); e.length > 0 && r - e[0][0] > 160;) e.shift();
      };
      var Pi = t.bezier(0, 0, .3, 1),
        Di = function (e, r) {
          this._map = e, this._el = e.getCanvasContainer(), this._state = "disabled", this._clickTolerance = r.clickTolerance || 1, t.bindAll(["_onMove", "_onMouseUp", "_onTouchEnd", "_onBlur", "_onDragFrame"], this);
        };
      Di.prototype.isEnabled = function () {
        return "disabled" !== this._state
      }, Di.prototype.isActive = function () {
        return "active" === this._state
      }, Di.prototype.enable = function () {
        this.isEnabled() || (this._el.classList.add("epgis-touch-drag-pan"), this._state = "enabled");
      }, Di.prototype.disable = function () {
        if (this.isEnabled()) switch (this._el.classList.remove("epgis-touch-drag-pan"), this._state) {
          case "active":
            this._state = "disabled", this._unbind(), this._deactivate(), this._fireEvent("dragend"), this._fireEvent("moveend");
            break;
          case "pending":
            this._state = "disabled", this._unbind();
            break;
          default:
            this._state = "disabled";
        }
      }, Di.prototype.onMouseDown = function (e) {
        "enabled" === this._state && (e.ctrlKey || 0 !== r.mouseButton(e) || (r.addEventListener(t.window.document, "mousemove", this._onMove, {
          capture: !0
        }), r.addEventListener(t.window.document, "mouseup", this._onMouseUp), this._start(e)));
      }, Di.prototype.onTouchStart = function (e) {
        "enabled" === this._state && (e.touches.length > 1 || (r.addEventListener(t.window.document, "touchmove", this._onMove, {
          capture: !0,
          passive: !1
        }), r.addEventListener(t.window.document, "touchend", this._onTouchEnd), this._start(e)));
      }, Di.prototype._start = function (e) {
        t.window.addEventListener("blur", this._onBlur), this._state = "pending", this._startPos = this._mouseDownPos = this._prevPos = this._lastPos = r.mousePos(this._el, e), this._inertia = [
          [t.browser.now(), this._startPos]
        ];
      }, Di.prototype._onMove = function (e) {
        e.preventDefault();
        var i = r.mousePos(this._el, e);
        this._lastPos.equals(i) || "pending" === this._state && i.dist(this._mouseDownPos) < this._clickTolerance || (this._lastMoveEvent = e, this._lastPos = i, this._drainInertiaBuffer(), this._inertia.push([t.browser.now(), this._lastPos]), "pending" === this._state && (this._state = "active", this._fireEvent("dragstart", e), this._fireEvent("movestart", e)), this._frameId || (this._frameId = this._map._requestRenderFrame(this._onDragFrame)));
      }, Di.prototype._onDragFrame = function () {
        this._frameId = null;
        var t = this._lastMoveEvent;
        if (t) {
          var e = this._map.transform;
          e.setLocationAtPoint(e.pointLocation(this._prevPos), this._lastPos), this._fireEvent("drag", t), this._fireEvent("move", t), this._prevPos = this._lastPos, delete this._lastMoveEvent;
        }
      }, Di.prototype._onMouseUp = function (t) {
        if (0 === r.mouseButton(t)) switch (this._state) {
          case "active":
            this._state = "enabled", r.suppressClick(), this._unbind(), this._deactivate(), this._inertialPan(t);
            break;
          case "pending":
            this._state = "enabled", this._unbind();
        }
      }, Di.prototype._onTouchEnd = function (t) {
        switch (this._state) {
          case "active":
            this._state = "enabled", this._unbind(), this._deactivate(), this._inertialPan(t);
            break;
          case "pending":
            this._state = "enabled", this._unbind();
        }
      }, Di.prototype._onBlur = function (t) {
        switch (this._state) {
          case "active":
            this._state = "enabled", this._unbind(), this._deactivate(), this._fireEvent("dragend", t), this._fireEvent("moveend", t);
            break;
          case "pending":
            this._state = "enabled", this._unbind();
        }
      }, Di.prototype._unbind = function () {
        r.removeEventListener(t.window.document, "touchmove", this._onMove, {
          capture: !0,
          passive: !1
        }), r.removeEventListener(t.window.document, "touchend", this._onTouchEnd), r.removeEventListener(t.window.document, "mousemove", this._onMove, {
          capture: !0
        }), r.removeEventListener(t.window.document, "mouseup", this._onMouseUp), r.removeEventListener(t.window, "blur", this._onBlur);
      }, Di.prototype._deactivate = function () {
        this._frameId && (this._map._cancelRenderFrame(this._frameId), this._frameId = null), delete this._lastMoveEvent, delete this._startPos, delete this._prevPos, delete this._mouseDownPos, delete this._lastPos;
      }, Di.prototype._inertialPan = function (t) {
        this._fireEvent("dragend", t), this._drainInertiaBuffer();
        var e = this._inertia;
        if (e.length < 2) this._fireEvent("moveend", t);
        else {
          var r = e[e.length - 1],
            i = e[0],
            n = r[1].sub(i[1]),
            o = (r[0] - i[0]) / 1e3;
          if (0 === o || r[1].equals(i[1])) this._fireEvent("moveend", t);
          else {
            var s = n.mult(.3 / o),
              a = s.mag();
            a > 1400 && (a = 1400, s._unit()._mult(a));
            var u = a / 750,
              c = s.mult(-u / 2);
            this._map.panBy(c, {
              duration: 1e3 * u,
              easing: Pi,
              noMoveStart: !0
            }, {
              originalEvent: t
            });
          }
        }
      }, Di.prototype._fireEvent = function (e, r) {
        return this._map.fire(new t.Event(e, r ? {
          originalEvent: r
        } : {}))
      }, Di.prototype._drainInertiaBuffer = function () {
        for (var e = this._inertia, r = t.browser.now(); e.length > 0 && r - e[0][0] > 160;) e.shift();
      };
      var Ni = function (e) {
        this._map = e, this._el = e.getCanvasContainer(), t.bindAll(["_onKeyDown"], this);
      };
  
      function Ri(t) {
        return t * (2 - t)
      }
      Ni.prototype.isEnabled = function () {
        return !!this._enabled
      }, Ni.prototype.enable = function () {
        this.isEnabled() || (this._el.addEventListener("keydown", this._onKeyDown, !1), this._enabled = !0);
      }, Ni.prototype.disable = function () {
        this.isEnabled() && (this._el.removeEventListener("keydown", this._onKeyDown), this._enabled = !1);
      }, Ni.prototype._onKeyDown = function (t) {
        if (!(t.altKey || t.ctrlKey || t.metaKey)) {
          var e = 0,
            r = 0,
            i = 0,
            n = 0,
            o = 0;
          switch (t.keyCode) {
            case 61:
            case 107:
            case 171:
            case 187:
              e = 1;
              break;
            case 189:
            case 109:
            case 173:
              e = -1;
              break;
            case 37:
              t.shiftKey ? r = -1 : (t.preventDefault(), n = -1);
              break;
            case 39:
              t.shiftKey ? r = 1 : (t.preventDefault(), n = 1);
              break;
            case 38:
              t.shiftKey ? i = 1 : (t.preventDefault(), o = -1);
              break;
            case 40:
              t.shiftKey ? i = -1 : (o = 1, t.preventDefault());
              break;
            default:
              return
          }
          var s = this._map,
            a = s.getZoom(),
            u = {
              duration: 300,
              delayEndEvents: 500,
              easing: Ri,
              zoom: e ? Math.round(a) + e * (t.shiftKey ? 2 : 1) : a,
              bearing: s.getBearing() + 15 * r,
              pitch: s.getPitch() + 10 * i,
              offset: [100 * -n, 100 * -o],
              center: s.getCenter()
            };
          s.easeTo(u, {
            originalEvent: t
          });
        }
      };
      var Oi = function (e) {
        this._map = e, t.bindAll(["_onDblClick", "_onZoomEnd"], this);
      };
      Oi.prototype.isEnabled = function () {
        return !!this._enabled
      }, Oi.prototype.isActive = function () {
        return !!this._active
      }, Oi.prototype.enable = function () {
        this.isEnabled() || (this._enabled = !0);
      }, Oi.prototype.disable = function () {
        this.isEnabled() && (this._enabled = !1);
      }, Oi.prototype.onTouchStart = function (t) {
        var e = this;
        if (this.isEnabled() && !(t.points.length > 1))
          if (this._tapped) {
            var r = t.points[0],
              i = this._tappedPoint;
            if (i && i.dist(r) <= 30) {
              t.originalEvent.preventDefault();
              var n = function () {
                  e._tapped && e._zoom(t), e._map.off("touchcancel", o), e._resetTapped();
                },
                o = function () {
                  e._map.off("touchend", n), e._resetTapped();
                };
              this._map.once("touchend", n), this._map.once("touchcancel", o);
            } else this._resetTapped();
          } else this._tappedPoint = t.points[0], this._tapped = setTimeout(function () {
            e._tapped = null, e._tappedPoint = null;
          }, 300);
      }, Oi.prototype._resetTapped = function () {
        clearTimeout(this._tapped), this._tapped = null, this._tappedPoint = null;
      }, Oi.prototype.onDblClick = function (t) {
        this.isEnabled() && (t.originalEvent.preventDefault(), this._zoom(t));
      }, Oi.prototype._zoom = function (t) {
        this._active = !0, this._map.on("zoomend", this._onZoomEnd), this._map.zoomTo(this._map.getZoom() + (t.originalEvent.shiftKey ? -1 : 1), {
          around: t.lngLat
        }, t);
      }, Oi.prototype._onZoomEnd = function () {
        this._active = !1, this._map.off("zoomend", this._onZoomEnd);
      };
      var Ai = t.bezier(0, 0, .15, 1),
        Fi = function (e) {
          this._map = e, this._el = e.getCanvasContainer(), t.bindAll(["_onMove", "_onEnd", "_onTouchFrame"], this);
        };
      Fi.prototype.isEnabled = function () {
        return !!this._enabled
      }, Fi.prototype.enable = function (t) {
        this.isEnabled() || (this._el.classList.add("epgis-touch-zoom-rotate"), this._enabled = !0, this._aroundCenter = !!t && "center" === t.around);
      }, Fi.prototype.disable = function () {
        this.isEnabled() && (this._el.classList.remove("epgis-touch-zoom-rotate"), this._enabled = !1);
      }, Fi.prototype.disableRotation = function () {
        this._rotationDisabled = !0;
      }, Fi.prototype.enableRotation = function () {
        this._rotationDisabled = !1;
      }, Fi.prototype.onStart = function (e) {
        if (this.isEnabled() && 2 === e.touches.length) {
          var i = r.mousePos(this._el, e.touches[0]),
            n = r.mousePos(this._el, e.touches[1]),
            o = i.add(n).div(2);
          this._startVec = i.sub(n), this._startAround = this._map.transform.pointLocation(o), this._gestureIntent = void 0, this._inertia = [], r.addEventListener(t.window.document, "touchmove", this._onMove, {
            passive: !1
          }), r.addEventListener(t.window.document, "touchend", this._onEnd);
        }
      }, Fi.prototype._getTouchEventData = function (t) {
        var e = r.mousePos(this._el, t.touches[0]),
          i = r.mousePos(this._el, t.touches[1]),
          n = e.sub(i);
        return {
          vec: n,
          center: e.add(i).div(2),
          scale: n.mag() / this._startVec.mag(),
          bearing: this._rotationDisabled ? 0 : 180 * n.angleWith(this._startVec) / Math.PI
        }
      }, Fi.prototype._onMove = function (e) {
        if (2 === e.touches.length) {
          var r = this._getTouchEventData(e),
            i = r.vec,
            n = r.scale,
            o = r.bearing;
          if (!this._gestureIntent) {
            var s = this._rotationDisabled && 1 !== n || Math.abs(1 - n) > .15;
            Math.abs(o) > 10 ? this._gestureIntent = "rotate" : s && (this._gestureIntent = "zoom"), this._gestureIntent && (this._map.fire(new t.Event(this._gestureIntent + "start", {
              originalEvent: e
            })), this._map.fire(new t.Event("movestart", {
              originalEvent: e
            })), this._startVec = i);
          }
          this._lastTouchEvent = e, this._frameId || (this._frameId = this._map._requestRenderFrame(this._onTouchFrame)), e.preventDefault();
        }
      }, Fi.prototype._onTouchFrame = function () {
        this._frameId = null;
        var e = this._gestureIntent;
        if (e) {
          var r = this._map.transform;
          this._startScale || (this._startScale = r.scale, this._startBearing = r.bearing);
          var i = this._getTouchEventData(this._lastTouchEvent),
            n = i.center,
            o = i.bearing,
            s = i.scale,
            a = r.pointLocation(n),
            u = r.locationPoint(a);
          "rotate" === e && (r.bearing = this._startBearing + o), r.zoom = r.scaleZoom(this._startScale * s), r.setLocationAtPoint(this._startAround, u), this._map.fire(new t.Event(e, {
            originalEvent: this._lastTouchEvent
          })), this._map.fire(new t.Event("move", {
            originalEvent: this._lastTouchEvent
          })), this._drainInertiaBuffer(), this._inertia.push([t.browser.now(), s, n]);
        }
      }, Fi.prototype._onEnd = function (e) {
        r.removeEventListener(t.window.document, "touchmove", this._onMove, {
          passive: !1
        }), r.removeEventListener(t.window.document, "touchend", this._onEnd);
        var i = this._gestureIntent,
          n = this._startScale;
        if (this._frameId && (this._map._cancelRenderFrame(this._frameId), this._frameId = null), delete this._gestureIntent, delete this._startScale, delete this._startBearing, delete this._lastTouchEvent, i) {
          this._map.fire(new t.Event(i + "end", {
            originalEvent: e
          })), this._drainInertiaBuffer();
          var o = this._inertia,
            s = this._map;
          if (o.length < 2) s.snapToNorth({}, {
            originalEvent: e
          });
          else {
            var a = o[o.length - 1],
              u = o[0],
              c = s.transform.scaleZoom(n * a[1]),
              h = s.transform.scaleZoom(n * u[1]),
              l = c - h,
              p = (a[0] - u[0]) / 1e3,
              f = a[2];
            if (0 !== p && c !== h) {
              var d = .15 * l / p;
              Math.abs(d) > 2.5 && (d = d > 0 ? 2.5 : -2.5);
              var g = 1e3 * Math.abs(d / (12 * .15)),
                _ = c + d * g / 2e3;
              _ < 0 && (_ = 0), s.easeTo({
                zoom: _,
                duration: g,
                easing: Ai,
                around: this._aroundCenter ? s.getCenter() : s.unproject(f),
                noMoveStart: !0
              }, {
                originalEvent: e
              });
            } else s.snapToNorth({}, {
              originalEvent: e
            });
          }
        }
      }, Fi.prototype._drainInertiaBuffer = function () {
        for (var e = this._inertia, r = t.browser.now(); e.length > 2 && r - e[0][0] > 160;) e.shift();
      };
      var ki = {
        scrollZoom: Ci,
        boxZoom: Ii,
        dragRotate: Ti,
        dragPan: Di,
        keyboard: Ni,
        doubleClickZoom: Oi,
        touchZoomRotate: Fi
      };
      var Bi = function (e) {
          function r(r, i) {
            e.call(this), this._moving = !1, this._zooming = !1, this.transform = r, this._bearingSnap = i.bearingSnap, t.bindAll(["_renderFrameCallback"], this);
          }
          return e && (r.__proto__ = e), r.prototype = Object.create(e && e.prototype), r.prototype.constructor = r, r.prototype.getCenter = function () {
            return new t.LngLat(this.transform.center.lng, this.transform.center.lat)
          }, r.prototype.setCenter = function (t, e) {
            return this.jumpTo({
              center: t
            }, e)
          }, r.prototype.panBy = function (e, r, i) {
            return e = t.Point.convert(e).mult(-1), this.panTo(this.transform.center, t.extend({
              offset: e
            }, r), i)
          }, r.prototype.panTo = function (e, r, i) {
            return this.easeTo(t.extend({
              center: e
            }, r), i)
          }, r.prototype.getZoom = function () {
            return this.transform.zoom
          }, r.prototype.setZoom = function (t, e) {
            return this.jumpTo({
              zoom: t
            }, e), this
          }, r.prototype.zoomTo = function (e, r, i) {
            return this.easeTo(t.extend({
              zoom: e
            }, r), i)
          }, r.prototype.zoomIn = function (t, e) {
            return this.zoomTo(this.getZoom() + 1, t, e), this
          }, r.prototype.zoomOut = function (t, e) {
            return this.zoomTo(this.getZoom() - 1, t, e), this
          }, r.prototype.getBearing = function () {
            return this.transform.bearing
          }, r.prototype.setBearing = function (t, e) {
            return this.jumpTo({
              bearing: t
            }, e), this
          }, r.prototype.rotateTo = function (e, r, i) {
            return this.easeTo(t.extend({
              bearing: e
            }, r), i)
          }, r.prototype.resetNorth = function (e, r) {
            return this.rotateTo(0, t.extend({
              duration: 1e3
            }, e), r), this
          }, r.prototype.resetNorthPitch = function (e, r) {
            return this.easeTo(t.extend({
              bearing: 0,
              pitch: 0,
              duration: 1e3
            }, e), r), this
          }, r.prototype.snapToNorth = function (t, e) {
            return Math.abs(this.getBearing()) < this._bearingSnap ? this.resetNorth(t, e) : this
          }, r.prototype.getPitch = function () {
            return this.transform.pitch
          }, r.prototype.setPitch = function (t, e) {
            return this.jumpTo({
              pitch: t
            }, e), this
          }, r.prototype.cameraForBounds = function (e, r) {
            return e = t.LngLatBounds.convert(e), this._cameraForBoxAndBearing(e.getNorthWest(), e.getSouthEast(), 0, r)
          }, r.prototype._cameraForBoxAndBearing = function (e, r, i, n) {
            if ("number" == typeof (n = t.extend({
                padding: {
                  top: 0,
                  bottom: 0,
                  right: 0,
                  left: 0
                },
                offset: [0, 0],
                maxZoom: this.transform.maxZoom
              }, n)).padding) {
              var o = n.padding;
              n.padding = {
                top: o,
                bottom: o,
                right: o,
                left: o
              };
            }
            if (t.deepEqual(Object.keys(n.padding).sort(function (t, e) {
                return t < e ? -1 : t > e ? 1 : 0
              }), ["bottom", "left", "right", "top"])) {
              var s = this.transform,
                a = s.project(t.LngLat.convert(e)),
                u = s.project(t.LngLat.convert(r)),
                c = a.rotate(-i * Math.PI / 180),
                h = u.rotate(-i * Math.PI / 180),
                l = new t.Point(Math.max(c.x, h.x), Math.max(c.y, h.y)),
                p = new t.Point(Math.min(c.x, h.x), Math.min(c.y, h.y)),
                f = l.sub(p),
                d = (s.width - n.padding.left - n.padding.right) / f.x,
                g = (s.height - n.padding.top - n.padding.bottom) / f.y;
              if (!(g < 0 || d < 0)) {
                var _ = Math.min(s.scaleZoom(s.scale * Math.min(d, g)), n.maxZoom),
                  y = t.Point.convert(n.offset),
                  m = (n.padding.left - n.padding.right) / 2,
                  v = (n.padding.top - n.padding.bottom) / 2,
                  x = new t.Point(y.x + m, y.y + v).mult(s.scale / s.zoomScale(_));
                return {
                  center: s.unproject(a.add(u).div(2).sub(x)),
                  zoom: _,
                  bearing: i
                }
              }
              t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");
            } else t.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'");
          }, r.prototype.fitBounds = function (t, e, r) {
            return this._fitInternal(this.cameraForBounds(t, e), e, r)
          }, r.prototype.fitScreenCoordinates = function (e, r, i, n, o) {
            return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)), this.transform.pointLocation(t.Point.convert(r)), i, n), n, o)
          }, r.prototype._fitInternal = function (e, r, i) {
            return e ? (r = t.extend(e, r)).linear ? this.easeTo(r, i) : this.flyTo(r, i) : this
          }, r.prototype.jumpTo = function (e, r) {
            this.stop();
            var i = this.transform,
              n = !1,
              o = !1,
              s = !1;
            return "zoom" in e && i.zoom !== +e.zoom && (n = !0, i.zoom = +e.zoom), void 0 !== e.center && (i.center = t.LngLat.convert(e.center)), "bearing" in e && i.bearing !== +e.bearing && (o = !0, i.bearing = +e.bearing), "pitch" in e && i.pitch !== +e.pitch && (s = !0, i.pitch = +e.pitch), this.fire(new t.Event("movestart", r)).fire(new t.Event("move", r)), n && this.fire(new t.Event("zoomstart", r)).fire(new t.Event("zoom", r)).fire(new t.Event("zoomend", r)), o && this.fire(new t.Event("rotatestart", r)).fire(new t.Event("rotate", r)).fire(new t.Event("rotateend", r)), s && this.fire(new t.Event("pitchstart", r)).fire(new t.Event("pitch", r)).fire(new t.Event("pitchend", r)), this.fire(new t.Event("moveend", r))
          }, r.prototype.easeTo = function (e, r) {
            var i = this;
            this.stop(), (!1 === (e = t.extend({
              offset: [0, 0],
              duration: 500,
              easing: t.ease
            }, e)).animate || t.browser.prefersReducedMotion) && (e.duration = 0);
            var n = this.transform,
              o = this.getZoom(),
              s = this.getBearing(),
              a = this.getPitch(),
              u = "zoom" in e ? +e.zoom : o,
              c = "bearing" in e ? this._normalizeBearing(e.bearing, s) : s,
              h = "pitch" in e ? +e.pitch : a,
              l = n.centerPoint.add(t.Point.convert(e.offset)),
              p = n.pointLocation(l),
              f = t.LngLat.convert(e.center || p);
            this._normalizeCenter(f);
            var d, g, _ = n.project(p),
              y = n.project(f).sub(_),
              m = n.zoomScale(u - o);
            return e.around && (d = t.LngLat.convert(e.around), g = n.locationPoint(d)), this._zooming = u !== o, this._rotating = s !== c, this._pitching = h !== a, this._prepareEase(r, e.noMoveStart), clearTimeout(this._easeEndTimeoutID), this._ease(function (e) {
              if (i._zooming && (n.zoom = t.number(o, u, e)), i._rotating && (n.bearing = t.number(s, c, e)), i._pitching && (n.pitch = t.number(a, h, e)), d) n.setLocationAtPoint(d, g);
              else {
                var p = n.zoomScale(n.zoom - o),
                  f = u > o ? Math.min(2, m) : Math.max(.5, m),
                  v = Math.pow(f, 1 - e),
                  x = n.unproject(_.add(y.mult(e * v)).mult(p));
                n.setLocationAtPoint(n.renderWorldCopies ? x.wrap() : x, l);
              }
              i._fireMoveEvents(r);
            }, function () {
              e.delayEndEvents ? i._easeEndTimeoutID = setTimeout(function () {
                return i._afterEase(r)
              }, e.delayEndEvents) : i._afterEase(r);
            }, e), this
          }, r.prototype._prepareEase = function (e, r) {
            this._moving = !0, r || this.fire(new t.Event("movestart", e)), this._zooming && this.fire(new t.Event("zoomstart", e)), this._rotating && this.fire(new t.Event("rotatestart", e)), this._pitching && this.fire(new t.Event("pitchstart", e));
          }, r.prototype._fireMoveEvents = function (e) {
            this.fire(new t.Event("move", e)), this._zooming && this.fire(new t.Event("zoom", e)), this._rotating && this.fire(new t.Event("rotate", e)), this._pitching && this.fire(new t.Event("pitch", e));
          }, r.prototype._afterEase = function (e) {
            var r = this._zooming,
              i = this._rotating,
              n = this._pitching;
            this._moving = !1, this._zooming = !1, this._rotating = !1, this._pitching = !1, r && this.fire(new t.Event("zoomend", e)), i && this.fire(new t.Event("rotateend", e)), n && this.fire(new t.Event("pitchend", e)), this.fire(new t.Event("moveend", e));
          }, r.prototype.flyTo = function (e, r) {
            var i = this;
            if (t.browser.prefersReducedMotion) {
              var n = t.pick(e, ["center", "zoom", "bearing", "pitch", "around"]);
              return this.jumpTo(n, r)
            }
            this.stop(), e = t.extend({
              offset: [0, 0],
              speed: 1.2,
              curve: 1.42,
              easing: t.ease
            }, e);
            var o = this.transform,
              s = this.getZoom(),
              a = this.getBearing(),
              u = this.getPitch(),
              c = "zoom" in e ? t.clamp(+e.zoom, o.minZoom, o.maxZoom) : s,
              h = "bearing" in e ? this._normalizeBearing(e.bearing, a) : a,
              l = "pitch" in e ? +e.pitch : u,
              p = o.zoomScale(c - s),
              f = o.centerPoint.add(t.Point.convert(e.offset)),
              d = o.pointLocation(f),
              g = t.LngLat.convert(e.center || d);
            this._normalizeCenter(g);
            var _ = o.project(d),
              y = o.project(g).sub(_),
              m = e.curve,
              v = Math.max(o.width, o.height),
              x = v / p,
              w = y.mag();
            if ("minZoom" in e) {
              var b = t.clamp(Math.min(e.minZoom, s, c), o.minZoom, o.maxZoom),
                E = v / o.zoomScale(b - s);
              m = Math.sqrt(E / w * 2);
            }
            var L = m * m;
  
            function S(t) {
              var e = (x * x - v * v + (t ? -1 : 1) * L * L * w * w) / (2 * (t ? x : v) * L * w);
              return Math.log(Math.sqrt(e * e + 1) - e)
            }
  
            function C(t) {
              return (Math.exp(t) - Math.exp(-t)) / 2
            }
  
            function I(t) {
              return (Math.exp(t) + Math.exp(-t)) / 2
            }
            var M = S(0),
              T = function (t) {
                return I(M) / I(M + m * t)
              },
              P = function (t) {
                return v * ((I(M) * (C(e = M + m * t) / I(e)) - C(M)) / L) / w;
                var e;
              },
              D = (S(1) - M) / m;
            if (Math.abs(w) < 1e-6 || !isFinite(D)) {
              if (Math.abs(v - x) < 1e-6) return this.easeTo(e, r);
              var N = x < v ? -1 : 1;
              D = Math.abs(Math.log(x / v)) / m, P = function () {
                return 0
              }, T = function (t) {
                return Math.exp(N * m * t)
              };
            }
            if ("duration" in e) e.duration = +e.duration;
            else {
              var R = "screenSpeed" in e ? +e.screenSpeed / m : +e.speed;
              e.duration = 1e3 * D / R;
            }
            return e.maxDuration && e.duration > e.maxDuration && (e.duration = 0), this._zooming = !0, this._rotating = a !== h, this._pitching = l !== u, this._prepareEase(r, !1), this._ease(function (e) {
              var n = e * D,
                p = 1 / T(n);
              o.zoom = 1 === e ? c : s + o.scaleZoom(p), i._rotating && (o.bearing = t.number(a, h, e)), i._pitching && (o.pitch = t.number(u, l, e));
              var d = 1 === e ? g : o.unproject(_.add(y.mult(P(n))).mult(p));
              o.setLocationAtPoint(o.renderWorldCopies ? d.wrap() : d, f), i._fireMoveEvents(r);
            }, function () {
              return i._afterEase(r)
            }, e), this
          }, r.prototype.isEasing = function () {
            return !!this._easeFrameId
          }, r.prototype.stop = function () {
            if (this._easeFrameId && (this._cancelRenderFrame(this._easeFrameId), delete this._easeFrameId, delete this._onEaseFrame), this._onEaseEnd) {
              var t = this._onEaseEnd;
              delete this._onEaseEnd, t.call(this);
            }
            return this
          }, r.prototype._ease = function (e, r, i) {
            !1 === i.animate || 0 === i.duration ? (e(1), r()) : (this._easeStart = t.browser.now(), this._easeOptions = i, this._onEaseFrame = e, this._onEaseEnd = r, this._easeFrameId = this._requestRenderFrame(this._renderFrameCallback));
          }, r.prototype._renderFrameCallback = function () {
            var e = Math.min((t.browser.now() - this._easeStart) / this._easeOptions.duration, 1);
            this._onEaseFrame(this._easeOptions.easing(e)), e < 1 ? this._easeFrameId = this._requestRenderFrame(this._renderFrameCallback) : this.stop();
          }, r.prototype._normalizeBearing = function (e, r) {
            e = t.wrap(e, -180, 180);
            var i = Math.abs(e - r);
            return Math.abs(e - 360 - r) < i && (e -= 360), Math.abs(e + 360 - r) < i && (e += 360), e
          }, r.prototype._normalizeCenter = function (t) {
            var e = this.transform;
            if (e.renderWorldCopies && !e.lngRange) {
              var r = t.lng - e.center.lng;
              t.lng += r > 180 ? -360 : r < -180 ? 360 : 0;
            }
          }, r
        }(t.Evented),
        zi = function (e) {
          void 0 === e && (e = {}), this.options = e, t.bindAll(["_updateEditLink", "_updateData", "_updateCompact"], this);
        };
      zi.prototype.getDefaultPosition = function () {
        return "bottom-right"
      }, zi.prototype.onAdd = function (t) {
        var e = this.options && this.options.compact;
        return this._map = t, this._container = r.create("div", "epgis-ctrl epgis-ctrl-attrib"), this._innerContainer = r.create("div", "epgis-ctrl-attrib-inner", this._container), e && this._container.classList.add("epgis-compact"), this._updateAttributions(), this._updateEditLink(), this._map.on("styledata", this._updateData), this._map.on("sourcedata", this._updateData), this._map.on("moveend", this._updateEditLink), void 0 === e && (this._map.on("resize", this._updateCompact), this._updateCompact()), this._container
      }, zi.prototype.onRemove = function () {
        r.remove(this._container), this._map.off("styledata", this._updateData), this._map.off("sourcedata", this._updateData), this._map.off("moveend", this._updateEditLink), this._map.off("resize", this._updateCompact), this._map = void 0;
      }, zi.prototype._updateEditLink = function () {
        var e = this._editLink;
        e || (e = this._editLink = this._container.querySelector(".epgis-improve-map"));
        var r = [{
          key: "owner",
          value: this.styleOwner
        }, {
          key: "id",
          value: this.styleId
        }, {
          key: "access_token",
          value: this._map._requestManager._customAccessToken || t.config.ACCESS_TOKEN
        }];
        if (e) {
          var i = r.reduce(function (t, e, i) {
            return e.value && (t += e.key + "=" + e.value + (i < r.length - 1 ? "&" : "")), t
          }, "?");
          e.href = t.config.FEEDBACK_URL + "/" + i + (this._map._hash ? this._map._hash.getHashString(!0) : ""), e.rel = "noopener nofollow";
        }
      }, zi.prototype._updateData = function (t) {
        !t || "metadata" !== t.sourceDataType && "style" !== t.dataType || (this._updateAttributions(), this._updateEditLink());
      }, zi.prototype._updateAttributions = function () {
        if (this._map.style) {
          var t = [];
          if (this.options.customAttribution && (Array.isArray(this.options.customAttribution) ? t = t.concat(this.options.customAttribution.map(function (t) {
              return "string" != typeof t ? "" : t
            })) : "string" == typeof this.options.customAttribution && t.push(this.options.customAttribution)), this._map.style.stylesheet) {
            var e = this._map.style.stylesheet;
            this.styleOwner = e.owner, this.styleId = e.id;
          }
          var r = this._map.style.sourceCaches;
          for (var i in r) {
            var n = r[i];
            if (n.used) {
              var o = n.getSource();
              o.attribution && t.indexOf(o.attribution) < 0 && t.push(o.attribution);
            }
          }
          t.sort(function (t, e) {
            return t.length - e.length
          });
          var s = (t = t.filter(function (e, r) {
            for (var i = r + 1; i < t.length; i++)
              if (t[i].indexOf(e) >= 0) return !1;
            return !0
          })).join(" | ");
          s !== this._attribHTML && (this._attribHTML = s, t.length ? (this._innerContainer.innerHTML = s, this._container.classList.remove("epgis-attrib-empty")) : this._container.classList.add("epgis-attrib-empty"), this._editLink = null);
        }
      }, zi.prototype._updateCompact = function () {
        this._map.getCanvasContainer().offsetWidth <= 640 ? this._container.classList.add("epgis-compact") : this._container.classList.remove("epgis-compact");
      };
      var Vi = function () {
        t.bindAll(["_updateLogo"], this), t.bindAll(["_updateCompact"], this);
      };
      Vi.prototype.onAdd = function (t) {
        this._map = t, this._container = r.create("div", "epgis-ctrl");
        var e = r.create("a", "epgis-ctrl-logo");
        return e.target = "_blank", e.rel = "noopener nofollow", e.href = "https://www.epgis.com/", e.setAttribute("aria-label", "Epgis logo"), e.setAttribute("rel", "noopener nofollow"), this._container.appendChild(e), this._container.style.display = "none", this._map.on("sourcedata", this._updateLogo), this._updateLogo(), this._map.on("resize", this._updateCompact), this._updateCompact(), this._container
      }, Vi.prototype.onRemove = function () {
        r.remove(this._container), this._map.off("sourcedata", this._updateLogo), this._map.off("resize", this._updateCompact);
      }, Vi.prototype.getDefaultPosition = function () {
        return "bottom-left"
      }, Vi.prototype._updateLogo = function (t) {
        t && "metadata" !== t.sourceDataType || (this._container.style.display = this._logoRequired() ? "block" : "none");
      }, Vi.prototype._logoRequired = function () {
        if (this._map.style) {
          var t = this._map.style.sourceCaches;
          for (var e in t) {
            if (t[e].getSource().epgis_logo) return !0
          }
          return !1
        }
      }, Vi.prototype._updateCompact = function () {
        var t = this._container.children;
        if (t.length) {
          var e = t[0];
          this._map.getCanvasContainer().offsetWidth < 250 ? e.classList.add("epgis-compact") : e.classList.remove("epgis-compact");
        }
      };
      var Ui = function () {
        this._queue = [], this._id = 0, this._cleared = !1, this._currentlyRunning = !1;
      };
      Ui.prototype.add = function (t) {
        var e = ++this._id;
        return this._queue.push({
          callback: t,
          id: e,
          cancelled: !1
        }), e
      }, Ui.prototype.remove = function (t) {
        for (var e = this._currentlyRunning, r = 0, i = e ? this._queue.concat(e) : this._queue; r < i.length; r += 1) {
          var n = i[r];
          if (n.id === t) return void(n.cancelled = !0)
        }
      }, Ui.prototype.run = function () {
        var t = this._currentlyRunning = this._queue;
        this._queue = [];
        for (var e = 0, r = t; e < r.length; e += 1) {
          var i = r[e];
          if (!i.cancelled && (i.callback(), this._cleared)) break
        }
        this._cleared = !1, this._currentlyRunning = !1;
      }, Ui.prototype.clear = function () {
        this._currentlyRunning && (this._cleared = !0), this._queue = [];
      };
      var qi = function (e, r, i) {
          this.tileSize = 512, this.maxValidLatitude = 20037508.342787, this._renderWorldCopies = void 0 === i || i, this._minZoom = e || 0, this._maxZoom = r || 22, this.setMaxBounds(), this.width = 0, this.height = 0, this._center = new t.LngLat(0, 0), this.zoom = 0, this.angle = 0, this._fov = .6435011087932844, this._pitch = 0, this._unmodified = !0, this._posMatrixCache = {}, this._alignedPosMatrixCache = {};
        },
        ji = {
          minZoom: {
            configurable: !0
          },
          maxZoom: {
            configurable: !0
          },
          renderWorldCopies: {
            configurable: !0
          },
          worldSize: {
            configurable: !0
          },
          centerPoint: {
            configurable: !0
          },
          size: {
            configurable: !0
          },
          bearing: {
            configurable: !0
          },
          pitch: {
            configurable: !0
          },
          fov: {
            configurable: !0
          },
          zoom: {
            configurable: !0
          },
          center: {
            configurable: !0
          },
          unmodified: {
            configurable: !0
          },
          point: {
            configurable: !0
          }
        };
      qi.prototype.clone = function () {
        var t = new qi(this._minZoom, this._maxZoom, this._renderWorldCopies);
        return t.tileSize = this.tileSize, t.latRange = this.latRange, t.width = this.width, t.height = this.height, t._center = this._center, t.zoom = this.zoom, t.angle = this.angle, t._fov = this._fov, t._pitch = this._pitch, t._unmodified = this._unmodified, t._calcMatrices(), t
      }, ji.minZoom.get = function () {
        return this._minZoom
      }, ji.minZoom.set = function (t) {
        this._minZoom !== t && (this._minZoom = t, this.zoom = Math.max(this.zoom, t));
      }, ji.maxZoom.get = function () {
        return this._maxZoom
      }, ji.maxZoom.set = function (t) {
        this._maxZoom !== t && (this._maxZoom = t, this.zoom = Math.min(this.zoom, t));
      }, ji.renderWorldCopies.get = function () {
        return this._renderWorldCopies
      }, ji.renderWorldCopies.set = function (t) {
        void 0 === t ? t = !0 : null === t && (t = !1), this._renderWorldCopies = t;
      }, ji.worldSize.get = function () {
        return this.tileSize * this.scale
      }, ji.centerPoint.get = function () {
        return this.size._div(2)
      }, ji.size.get = function () {
        return new t.Point(this.width, this.height)
      }, ji.bearing.get = function () {
        return -this.angle / Math.PI * 180
      }, ji.bearing.set = function (e) {
        var r = -t.wrap(e, -180, 180) * Math.PI / 180;
        this.angle !== r && (this._unmodified = !1, this.angle = r, this._calcMatrices(), this.rotationMatrix = t.create$2(), t.rotate(this.rotationMatrix, this.rotationMatrix, this.angle));
      }, ji.pitch.get = function () {
        return this._pitch / Math.PI * 180
      }, ji.pitch.set = function (e) {
        var r = t.clamp(e, 0, 60) / 180 * Math.PI;
        this._pitch !== r && (this._unmodified = !1, this._pitch = r, this._calcMatrices());
      }, ji.fov.get = function () {
        return this._fov / Math.PI * 180
      }, ji.fov.set = function (t) {
        t = Math.max(.01, Math.min(60, t)), this._fov !== t && (this._unmodified = !1, this._fov = t / 180 * Math.PI, this._calcMatrices());
      }, ji.zoom.get = function () {
        return this._zoom
      }, ji.zoom.set = function (t) {
        var e = Math.min(Math.max(t, this.minZoom), this.maxZoom);
        this._zoom !== e && (this._unmodified = !1, this._zoom = e, this.scale = this.zoomScale(e), this.tileZoom = Math.floor(e), this.zoomFraction = e - this.tileZoom, this._constrain(), this._calcMatrices());
      }, ji.center.get = function () {
        return this._center
      }, ji.center.set = function (t) {
        t.lat === this._center.lat && t.lng === this._center.lng || (this._unmodified = !1, this._center = t, this._constrain(), this._calcMatrices());
      }, qi.prototype.coveringZoomLevel = function (t) {
        return (t.roundZoom ? Math.round : Math.floor)(this.zoom + this.scaleZoom(this.tileSize / t.tileSize))
      }, qi.prototype.getVisibleUnwrappedCoordinates = function (e) {
        var r = [new t.UnwrappedTileID(0, e)];
        if (this._renderWorldCopies)
          for (var i = this.pointCoordinate(new t.Point(0, 0)), n = this.pointCoordinate(new t.Point(this.width, 0)), o = this.pointCoordinate(new t.Point(this.width, this.height)), s = this.pointCoordinate(new t.Point(0, this.height)), a = Math.floor(Math.min(i.x, n.x, o.x, s.x)), u = Math.floor(Math.max(i.x, n.x, o.x, s.x)), c = a - 1; c <= u + 1; c++) 0 !== c && r.push(new t.UnwrappedTileID(c, e));
        return r
      }, qi.prototype.coveringTiles = function (e) {
        var r = this.coveringZoomLevel(e),
          i = r;
        if (void 0 !== e.minzoom && r < e.minzoom) return [];
        void 0 !== e.maxzoom && r > e.maxzoom && (r = e.maxzoom);
        var n = R.fromLngLat(this.center),
          o = Math.pow(2, r),
          s = new t.Point(o * n.x - .5, o * n.y - .5);
        return _i(r, [this.pointCoordinate(new t.Point(0, 0)), this.pointCoordinate(new t.Point(this.width, 0)), this.pointCoordinate(new t.Point(this.width, this.height)), this.pointCoordinate(new t.Point(0, this.height))], e.reparseOverscaled ? i : r, this._renderWorldCopies).sort(function (t, e) {
          return s.dist(t.canonical) - s.dist(e.canonical)
        })
      }, qi.prototype.resize = function (t, e) {
        this.width = t, this.height = e, this.pixelsToGLUnits = [2 / t, -2 / e], this._constrain(), this._calcMatrices();
      }, ji.unmodified.get = function () {
        return this._unmodified
      }, qi.prototype.zoomScale = function (t) {
        return Math.pow(2, t)
      }, qi.prototype.scaleZoom = function (t) {
        return Math.log(t) / Math.LN2
      }, qi.prototype.project = function (e) {
        var r = t.clamp(e.lat, -this.maxValidLatitude, this.maxValidLatitude);
        return new t.Point(I(e.lng) * this.worldSize, M(r) * this.worldSize)
      }, qi.prototype.unproject = function (t) {
        return new R(t.x / this.worldSize, t.y / this.worldSize).toLngLat()
      }, ji.point.get = function () {
        return this.project(this.center)
      }, qi.prototype.setLocationAtPoint = function (t, e) {
        var r = this.pointCoordinate(e),
          i = this.pointCoordinate(this.centerPoint),
          n = this.locationCoordinate(t),
          o = new R(n.x - (r.x - i.x), n.y - (r.y - i.y));
        this.center = this.coordinateLocation(o), this._renderWorldCopies && (this.center = this.center.wrap());
      }, qi.prototype.locationPoint = function (t) {
        return this.coordinatePoint(this.locationCoordinate(t))
      }, qi.prototype.pointLocation = function (t) {
        return this.coordinateLocation(this.pointCoordinate(t))
      }, qi.prototype.locationCoordinate = function (t) {
        return R.fromLngLat(t)
      }, qi.prototype.coordinateLocation = function (t) {
        return t.toLngLat()
      }, qi.prototype.pointCoordinate = function (e) {
        var r = [e.x, e.y, 0, 1],
          i = [e.x, e.y, 1, 1];
        t.transformMat4(r, r, this.pixelMatrixInverse), t.transformMat4(i, i, this.pixelMatrixInverse);
        var n = r[3],
          o = i[3],
          s = r[0] / n,
          a = i[0] / o,
          u = r[1] / n,
          c = i[1] / o,
          h = r[2] / n,
          l = i[2] / o,
          p = h === l ? 0 : (0 - h) / (l - h);
        return new R(t.number(s, a, p) / this.worldSize, t.number(u, c, p) / this.worldSize)
      }, qi.prototype.coordinatePoint = function (e) {
        var r = [e.x * this.worldSize, e.y * this.worldSize, 0, 1];
        return t.transformMat4(r, r, this.pixelMatrix), new t.Point(r[0] / r[3], r[1] / r[3])
      }, qi.prototype.getBounds = function () {
        return (new t.LngLatBounds).extend(this.pointLocation(new t.Point(0, 0))).extend(this.pointLocation(new t.Point(this.width, 0))).extend(this.pointLocation(new t.Point(this.width, this.height))).extend(this.pointLocation(new t.Point(0, this.height)))
      }, qi.prototype.getMaxBounds = function () {
        return this.latRange && 2 === this.latRange.length && this.lngRange && 2 === this.lngRange.length ? new t.LngLatBounds([this.lngRange[0], this.latRange[0]], [this.lngRange[1], this.latRange[1]]) : null
      }, qi.prototype.setMaxBounds = function (t) {
        t ? (this.lngRange = [t.getWest(), t.getEast()], this.latRange = [t.getSouth(), t.getNorth()], this._constrain()) : (this.lngRange = null, this.latRange = [-this.maxValidLatitude, this.maxValidLatitude]);
      }, qi.prototype.calculatePosMatrix = function (e, r) {
        void 0 === r && (r = !1);
        var i = e.key,
          n = r ? this._alignedPosMatrixCache : this._posMatrixCache;
        if (n[i]) return n[i];
        var o = e.canonical,
          s = this.worldSize / this.zoomScale(o.z),
          a = o.x + Math.pow(2, o.z) * e.wrap,
          u = t.identity(new Float64Array(16));
        return t.translate(u, u, [a * s, o.y * s, 0]), t.scale(u, u, [s / t.EXTENT, s / t.EXTENT, 1]), t.multiply(u, r ? this.alignedProjMatrix : this.projMatrix, u), n[i] = new Float32Array(u), n[i]
      }, qi.prototype.customLayerMatrix = function () {
        return this.mercatorMatrix.slice()
      }, qi.prototype._constrain = function () {
        if (this.center && this.width && this.height && !this._constraining) {
          this._constraining = !0;
          var e, r, i, n, o = -20037508.342780966,
            s = 20037508.342787,
            a = -20037508.342787,
            u = 20037508.342780966;
          this.latRange = [o, s], this.lngRange = [a, u];
          var c = this.size,
            h = this._unmodified;
          if (this.latRange) {
            var l = this.latRange;
            o = M(l[1]) * this.worldSize, e = (s = M(l[0]) * this.worldSize) - o < c.y ? c.y / (s - o) : 0;
          }
          if (this.lngRange) {
            var p = this.lngRange;
            a = I(p[0]) * this.worldSize, r = (u = I(p[1]) * this.worldSize) - a < c.x ? c.x / (u - a) : 0;
          }
          var f = this.point,
            d = Math.max(r || 0, e || 0);
          if (d) return this.center = this.unproject(new t.Point(r ? (u + a) / 2 : f.x, e ? (s + o) / 2 : f.y)), this.zoom += this.scaleZoom(d), this._unmodified = h, void(this._constraining = !1);
          if (this.latRange) {
            var g = f.y,
              _ = c.y / 2;
            g - _ < o && (n = o + _), g + _ > s && (n = s - _);
          }
          if (this.lngRange) {
            var y = f.x,
              m = c.x / 2;
            y - m < a && (i = a + m), y + m > u && (i = u - m);
          }
          void 0 === i && void 0 === n || (this.center = this.unproject(new t.Point(void 0 !== i ? i : f.x, void 0 !== n ? n : f.y))), this._unmodified = h, this._constraining = !1;
        }
      }, qi.prototype._calcMatrices = function () {
        if (this.height) {
          this.cameraToCenterDistance = .5 / Math.tan(this._fov / 2) * this.height;
          var e = this._fov / 2,
            r = Math.PI / 2 + this._pitch,
            i = Math.sin(e) * this.cameraToCenterDistance / Math.sin(Math.PI - r - e),
            n = this.point,
            o = n.x,
            s = n.y,
            a = 1.01 * (Math.cos(Math.PI / 2 - this._pitch) * i + this.cameraToCenterDistance),
            u = this.height / 50,
            c = new Float64Array(16);
          t.perspective(c, this._fov, this.width / this.height, u, a), t.scale(c, c, [1, -1, 1]), t.translate(c, c, [0, 0, -this.cameraToCenterDistance]), t.rotateX(c, c, this._pitch), t.rotateZ(c, c, this.angle), t.translate(c, c, [-o, -s, 0]), this.mercatorMatrix = t.scale([], c, [this.worldSize, this.worldSize, this.worldSize]), t.scale(c, c, [1, 1, T(1, this.center.lat) * this.worldSize, 1]), this.projMatrix = c;
          var h = this.width % 2 / 2,
            l = this.height % 2 / 2,
            p = Math.cos(this.angle),
            f = Math.sin(this.angle),
            d = o - Math.round(o) + p * h + f * l,
            g = s - Math.round(s) + p * l + f * h,
            _ = new Float64Array(c);
          if (t.translate(_, _, [d > .5 ? d - 1 : d, g > .5 ? g - 1 : g, 0]), this.alignedProjMatrix = _, c = t.create(), t.scale(c, c, [this.width / 2, -this.height / 2, 1]), t.translate(c, c, [1, -1, 0]), this.labelPlaneMatrix = c, c = t.create(), t.scale(c, c, [1, -1, 1]), t.translate(c, c, [-1, -1, 0]), t.scale(c, c, [2 / this.width, 2 / this.height, 1]), this.glCoordMatrix = c, this.pixelMatrix = t.multiply(new Float64Array(16), this.labelPlaneMatrix, this.projMatrix), !(c = t.invert(new Float64Array(16), this.pixelMatrix))) throw new Error("failed to invert matrix");
          this.pixelMatrixInverse = c, this._posMatrixCache = {}, this._alignedPosMatrixCache = {};
        }
      }, qi.prototype.maxPitchScaleFactor = function () {
        if (!this.pixelMatrixInverse) return 1;
        var e = this.pointCoordinate(new t.Point(0, 0)),
          r = [e.x * this.worldSize, e.y * this.worldSize, 0, 1];
        return t.transformMat4(r, r, this.pixelMatrix)[3] / this.cameraToCenterDistance
      }, qi.prototype.getCameraPoint = function () {
        var e = this._pitch,
          r = Math.tan(e) * (this.cameraToCenterDistance || 1);
        return this.centerPoint.add(new t.Point(0, r))
      }, qi.prototype.getCameraQueryGeometry = function (e) {
        var r = this.getCameraPoint();
        if (1 === e.length) return [e[0], r];
        for (var i = r.x, n = r.y, o = r.x, s = r.y, a = 0, u = e; a < u.length; a += 1) {
          var c = u[a];
          i = Math.min(i, c.x), n = Math.min(n, c.y), o = Math.max(o, c.x), s = Math.max(s, c.y);
        }
        return [new t.Point(i, n), new t.Point(o, n), new t.Point(o, s), new t.Point(i, s), new t.Point(i, n)]
      }, Object.defineProperties(qi.prototype, ji);
      var Gi = {
          "EPSG:3857": xi,
          "EPSG:4326": qi
        },
        Xi = t.createCommonjsModule(function (t, e) {
          ! function (r, i) {
            var n = "model",
              o = "name",
              s = "type",
              a = "vendor",
              u = "version",
              c = "mobile",
              h = "tablet",
              l = {
                extend: function (t, e) {
                  var r = {};
                  for (var i in t) e[i] && e[i].length % 2 == 0 ? r[i] = e[i].concat(t[i]) : r[i] = t[i];
                  return r
                },
                has: function (t, e) {
                  return "string" == typeof t && -1 !== e.toLowerCase().indexOf(t.toLowerCase())
                },
                lowerize: function (t) {
                  return t.toLowerCase()
                },
                major: function (t) {
                  return "string" == typeof t ? t.replace(/[^\d\.]/g, "").split(".")[0] : void 0
                },
                trim: function (t) {
                  return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, "")
                }
              },
              p = {
                rgx: function (t, e) {
                  for (var r, i, n, o, s, a, u = 0; u < e.length && !s;) {
                    var c = e[u],
                      h = e[u + 1];
                    for (r = i = 0; r < c.length && !s;)
                      if (s = c[r++].exec(t))
                        for (n = 0; n < h.length; n++) a = s[++i], "object" == typeof (o = h[n]) && o.length > 0 ? 2 == o.length ? "function" == typeof o[1] ? this[o[0]] = o[1].call(this, a) : this[o[0]] = o[1] : 3 == o.length ? "function" != typeof o[1] || o[1].exec && o[1].test ? this[o[0]] = a ? a.replace(o[1], o[2]) : void 0 : this[o[0]] = a ? o[1].call(this, a, o[2]) : void 0 : 4 == o.length && (this[o[0]] = a ? o[3].call(this, a.replace(o[1], o[2])) : void 0) : this[o] = a || void 0;
                    u += 2;
                  }
                },
                str: function (t, e) {
                  for (var r in e)
                    if ("object" == typeof e[r] && e[r].length > 0) {
                      for (var i = 0; i < e[r].length; i++)
                        if (l.has(e[r][i], t)) return "?" === r ? void 0 : r
                    } else if (l.has(e[r], t)) return "?" === r ? void 0 : r;
                  return t
                }
              },
              f = {
                browser: {
                  oldsafari: {
                    version: {
                      "1.0": "/8",
                      1.2: "/1",
                      1.3: "/3",
                      "2.0": "/412",
                      "2.0.2": "/416",
                      "2.0.3": "/417",
                      "2.0.4": "/419",
                      "?": "/"
                    }
                  }
                },
                device: {
                  amazon: {
                    model: {
                      "Fire Phone": ["SD", "KF"]
                    }
                  },
                  sprint: {
                    model: {
                      "Evo Shift 4G": "7373KT"
                    },
                    vendor: {
                      HTC: "APA",
                      Sprint: "Sprint"
                    }
                  }
                },
                os: {
                  windows: {
                    version: {
                      ME: "4.90",
                      "NT 3.11": "NT3.51",
                      "NT 4.0": "NT4.0",
                      2e3: "NT 5.0",
                      XP: ["NT 5.1", "NT 5.2"],
                      Vista: "NT 6.0",
                      7: "NT 6.1",
                      8: "NT 6.2",
                      8.1: "NT 6.3",
                      10: ["NT 6.4", "NT 10.0"],
                      RT: "ARM"
                    }
                  }
                }
              },
              d = {
                browser: [
                  [/(opera\smini)\/([\w\.-]+)/i, /(opera\s[mobiletab]+).+version\/([\w\.-]+)/i, /(opera).+version\/([\w\.]+)/i, /(opera)[\/\s]+([\w\.]+)/i],
                  [o, u],
                  [/(opios)[\/\s]+([\w\.]+)/i],
                  [
                    [o, "Opera Mini"], u
                  ],
                  [/\s(opr)\/([\w\.]+)/i],
                  [
                    [o, "Opera"], u
                  ],
                  [/(kindle)\/([\w\.]+)/i, /(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i, /(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i, /(?:ms|\()(ie)\s([\w\.]+)/i, /(rekonq)\/([\w\.]*)/i, /(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],
                  [o, u],
                  [/(konqueror)\/([\w\.]+)/i],
                  [
                    [o, "Konqueror"], u
                  ],
                  [/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],
                  [
                    [o, "IE"], u
                  ],
                  [/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],
                  [
                    [o, "Edge"], u
                  ],
                  [/(yabrowser)\/([\w\.]+)/i],
                  [
                    [o, "Yandex"], u
                  ],
                  [/(puffin)\/([\w\.]+)/i],
                  [
                    [o, "Puffin"], u
                  ],
                  [/(focus)\/([\w\.]+)/i],
                  [
                    [o, "Firefox Focus"], u
                  ],
                  [/(opt)\/([\w\.]+)/i],
                  [
                    [o, "Opera Touch"], u
                  ],
                  [/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],
                  [
                    [o, "UCBrowser"], u
                  ],
                  [/(comodo_dragon)\/([\w\.]+)/i],
                  [
                    [o, /_/g, " "], u
                  ],
                  [/(windowswechat qbcore)\/([\w\.]+)/i],
                  [
                    [o, "WeChat(Win) Desktop"], u
                  ],
                  [/(micromessenger)\/([\w\.]+)/i],
                  [
                    [o, "WeChat"], u
                  ],
                  [/(brave)\/([\w\.]+)/i],
                  [
                    [o, "Brave"], u
                  ],
                  [/(qqbrowserlite)\/([\w\.]+)/i],
                  [o, u],
                  [/(QQ)\/([\d\.]+)/i],
                  [o, u],
                  [/m?(qqbrowser)[\/\s]?([\w\.]+)/i],
                  [o, u],
                  [/(BIDUBrowser)[\/\s]?([\w\.]+)/i],
                  [o, u],
                  [/(2345Explorer)[\/\s]?([\w\.]+)/i],
                  [o, u],
                  [/(MetaSr)[\/\s]?([\w\.]+)/i],
                  [o],
                  [/(LBBROWSER)/i],
                  [o],
                  [/xiaomi\/miuibrowser\/([\w\.]+)/i],
                  [u, [o, "MIUI Browser"]],
                  [/;fbav\/([\w\.]+);/i],
                  [u, [o, "Facebook"]],
                  [/safari\s(line)\/([\w\.]+)/i, /android.+(line)\/([\w\.]+)\/iab/i],
                  [o, u],
                  [/headlesschrome(?:\/([\w\.]+)|\s)/i],
                  [u, [o, "Chrome Headless"]],
                  [/\swv\).+(chrome)\/([\w\.]+)/i],
                  [
                    [o, /(.+)/, "$1 WebView"], u
                  ],
                  [/((?:oculus|samsung)browser)\/([\w\.]+)/i],
                  [
                    [o, /(.+(?:g|us))(.+)/, "$1 $2"], u
                  ],
                  [/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],
                  [u, [o, "Android Browser"]],
                  [/(sailfishbrowser)\/([\w\.]+)/i],
                  [
                    [o, "Sailfish Browser"], u
                  ],
                  [/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],
                  [o, u],
                  [/(dolfin)\/([\w\.]+)/i],
                  [
                    [o, "Dolphin"], u
                  ],
                  [/((?:android.+)crmo|crios)\/([\w\.]+)/i],
                  [
                    [o, "Chrome"], u
                  ],
                  [/(coast)\/([\w\.]+)/i],
                  [
                    [o, "Opera Coast"], u
                  ],
                  [/fxios\/([\w\.-]+)/i],
                  [u, [o, "Firefox"]],
                  [/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],
                  [u, [o, "Mobile Safari"]],
                  [/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],
                  [u, o],
                  [/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],
                  [
                    [o, "GSA"], u
                  ],
                  [/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],
                  [o, [u, p.str, f.browser.oldsafari.version]],
                  [/(webkit|khtml)\/([\w\.]+)/i],
                  [o, u],
                  [/(navigator|netscape)\/([\w\.-]+)/i],
                  [
                    [o, "Netscape"], u
                  ],
                  [/(swiftfox)/i, /(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i, /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i, /(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i, /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i, /(links)\s\(([\w\.]+)/i, /(gobrowser)\/?([\w\.]*)/i, /(ice\s?browser)\/v?([\w\._]+)/i, /(mosaic)[\/\s]([\w\.]+)/i],
                  [o, u]
                ],
                cpu: [
                  [/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],
                  [
                    ["architecture", "amd64"]
                  ],
                  [/(ia32(?=;))/i],
                  [
                    ["architecture", l.lowerize]
                  ],
                  [/((?:i[346]|x)86)[;\)]/i],
                  [
                    ["architecture", "ia32"]
                  ],
                  [/windows\s(ce|mobile);\sppc;/i],
                  [
                    ["architecture", "arm"]
                  ],
                  [/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],
                  [
                    ["architecture", /ower/, "", l.lowerize]
                  ],
                  [/(sun4\w)[;\)]/i],
                  [
                    ["architecture", "sparc"]
                  ],
                  [/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],
                  [
                    ["architecture", l.lowerize]
                  ]
                ],
                device: [
                  [/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],
                  [n, a, [s, h]],
                  [/applecoremedia\/[\w\.]+ \((ipad)/],
                  [n, [a, "Apple"],
                    [s, h]
                  ],
                  [/(apple\s{0,1}tv)/i],
                  [
                    [n, "Apple TV"],
                    [a, "Apple"]
                  ],
                  [/(archos)\s(gamepad2?)/i, /(hp).+(touchpad)/i, /(hp).+(tablet)/i, /(kindle)\/([\w\.]+)/i, /\s(nook)[\w\s]+build\/(\w+)/i, /(dell)\s(strea[kpr\s\d]*[\dko])/i],
                  [a, n, [s, h]],
                  [/(kf[A-z]+)\sbuild\/.+silk\//i],
                  [n, [a, "Amazon"],
                    [s, h]
                  ],
                  [/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],
                  [
                    [n, p.str, f.device.amazon.model],
                    [a, "Amazon"],
                    [s, c]
                  ],
                  [/android.+aft([bms])\sbuild/i],
                  [n, [a, "Amazon"],
                    [s, "smarttv"]
                  ],
                  [/\((ip[honed|\s\w*]+);.+(apple)/i],
                  [n, a, [s, c]],
                  [/\((ip[honed|\s\w*]+);/i],
                  [n, [a, "Apple"],
                    [s, c]
                  ],
                  [/(blackberry)[\s-]?(\w+)/i, /(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i, /(hp)\s([\w\s]+\w)/i, /(asus)-?(\w+)/i],
                  [a, n, [s, c]],
                  [/\(bb10;\s(\w+)/i],
                  [n, [a, "BlackBerry"],
                    [s, c]
                  ],
                  [/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],
                  [n, [a, "Asus"],
                    [s, h]
                  ],
                  [/(sony)\s(tablet\s[ps])\sbuild\//i, /(sony)?(?:sgp.+)\sbuild\//i],
                  [
                    [a, "Sony"],
                    [n, "Xperia Tablet"],
                    [s, h]
                  ],
                  [/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],
                  [n, [a, "Sony"],
                    [s, c]
                  ],
                  [/\s(ouya)\s/i, /(nintendo)\s([wids3u]+)/i],
                  [a, n, [s, "console"]],
                  [/android.+;\s(shield)\sbuild/i],
                  [n, [a, "Nvidia"],
                    [s, "console"]
                  ],
                  [/(playstation\s[34portablevi]+)/i],
                  [n, [a, "Sony"],
                    [s, "console"]
                  ],
                  [/(sprint\s(\w+))/i],
                  [
                    [a, p.str, f.device.sprint.vendor],
                    [n, p.str, f.device.sprint.model],
                    [s, c]
                  ],
                  [/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i, /(zte)-(\w*)/i, /(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],
                  [a, [n, /_/g, " "],
                    [s, c]
                  ],
                  [/(nexus\s9)/i],
                  [n, [a, "HTC"],
                    [s, h]
                  ],
                  [/d\/huawei([\w\s-]+)[;\)]/i, /(nexus\s6p)/i],
                  [n, [a, "Huawei"],
                    [s, c]
                  ],
                  [/(microsoft);\s(lumia[\s\w]+)/i],
                  [a, n, [s, c]],
                  [/[\s\(;](xbox(?:\sone)?)[\s\);]/i],
                  [n, [a, "Microsoft"],
                    [s, "console"]
                  ],
                  [/(kin\.[onetw]{3})/i],
                  [
                    [n, /\./g, " "],
                    [a, "Microsoft"],
                    [s, c]
                  ],
                  [/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i, /mot[\s-]?(\w*)/i, /(XT\d{3,4}) build\//i, /(nexus\s6)/i],
                  [n, [a, "Motorola"],
                    [s, c]
                  ],
                  [/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],
                  [n, [a, "Motorola"],
                    [s, h]
                  ],
                  [/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],
                  [
                    [a, l.trim],
                    [n, l.trim],
                    [s, "smarttv"]
                  ],
                  [/hbbtv.+maple;(\d+)/i],
                  [
                    [n, /^/, "SmartTV"],
                    [a, "Samsung"],
                    [s, "smarttv"]
                  ],
                  [/\(dtv[\);].+(aquos)/i],
                  [n, [a, "Sharp"],
                    [s, "smarttv"]
                  ],
                  [/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i, /((SM-T\w+))/i],
                  [
                    [a, "Samsung"], n, [s, h]
                  ],
                  [/smart-tv.+(samsung)/i],
                  [a, [s, "smarttv"], n],
                  [/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i, /(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i, /sec-((sgh\w+))/i],
                  [
                    [a, "Samsung"], n, [s, c]
                  ],
                  [/sie-(\w*)/i],
                  [n, [a, "Siemens"],
                    [s, c]
                  ],
                  [/(maemo|nokia).*(n900|lumia\s\d+)/i, /(nokia)[\s_-]?([\w-]*)/i],
                  [
                    [a, "Nokia"], n, [s, c]
                  ],
                  [/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],
                  [n, [a, "Acer"],
                    [s, h]
                  ],
                  [/android.+([vl]k\-?\d{3})\s+build/i],
                  [n, [a, "LG"],
                    [s, h]
                  ],
                  [/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],
                  [
                    [a, "LG"], n, [s, h]
                  ],
                  [/(lg) netcast\.tv/i],
                  [a, n, [s, "smarttv"]],
                  [/(nexus\s[45])/i, /lg[e;\s\/-]+(\w*)/i, /android.+lg(\-?[\d\w]+)\s+build/i],
                  [n, [a, "LG"],
                    [s, c]
                  ],
                  [/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],
                  [a, n, [s, h]],
                  [/android.+(ideatab[a-z0-9\-\s]+)/i],
                  [n, [a, "Lenovo"],
                    [s, h]
                  ],
                  [/(lenovo)[_\s-]?([\w-]+)/i],
                  [a, n, [s, c]],
                  [/linux;.+((jolla));/i],
                  [a, n, [s, c]],
                  [/((pebble))app\/[\d\.]+\s/i],
                  [a, n, [s, "wearable"]],
                  [/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],
                  [a, n, [s, c]],
                  [/crkey/i],
                  [
                    [n, "Chromecast"],
                    [a, "Google"]
                  ],
                  [/android.+;\s(glass)\s\d/i],
                  [n, [a, "Google"],
                    [s, "wearable"]
                  ],
                  [/android.+;\s(pixel c)[\s)]/i],
                  [n, [a, "Google"],
                    [s, h]
                  ],
                  [/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],
                  [n, [a, "Google"],
                    [s, c]
                  ],
                  [/android.+;\s(\w+)\s+build\/hm\1/i, /android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i, /android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i, /android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],
                  [
                    [n, /_/g, " "],
                    [a, "Xiaomi"],
                    [s, c]
                  ],
                  [/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],
                  [
                    [n, /_/g, " "],
                    [a, "Xiaomi"],
                    [s, h]
                  ],
                  [/android.+;\s(m[1-5]\snote)\sbuild/i],
                  [n, [a, "Meizu"],
                    [s, c]
                  ],
                  [/(mz)-([\w-]{2,})/i],
                  [
                    [a, "Meizu"], n, [s, c]
                  ],
                  [/android.+a000(1)\s+build/i, /android.+oneplus\s(a\d{4})\s+build/i],
                  [n, [a, "OnePlus"],
                    [s, c]
                  ],
                  [/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],
                  [n, [a, "RCA"],
                    [s, h]
                  ],
                  [/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],
                  [n, [a, "Dell"],
                    [s, h]
                  ],
                  [/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],
                  [n, [a, "Verizon"],
                    [s, h]
                  ],
                  [/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],
                  [
                    [a, "Barnes & Noble"], n, [s, h]
                  ],
                  [/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],
                  [n, [a, "NuVision"],
                    [s, h]
                  ],
                  [/android.+;\s(k88)\sbuild/i],
                  [n, [a, "ZTE"],
                    [s, h]
                  ],
                  [/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],
                  [n, [a, "Swiss"],
                    [s, c]
                  ],
                  [/android.+[;\/]\s*(zur\d{3})\s+build/i],
                  [n, [a, "Swiss"],
                    [s, h]
                  ],
                  [/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],
                  [n, [a, "Zeki"],
                    [s, h]
                  ],
                  [/(android).+[;\/]\s+([YR]\d{2})\s+build/i, /android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],
                  [
                    [a, "Dragon Touch"], n, [s, h]
                  ],
                  [/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],
                  [n, [a, "Insignia"],
                    [s, h]
                  ],
                  [/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],
                  [n, [a, "NextBook"],
                    [s, h]
                  ],
                  [/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],
                  [
                    [a, "Voice"], n, [s, c]
                  ],
                  [/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],
                  [
                    [a, "LvTel"], n, [s, c]
                  ],
                  [/android.+;\s(PH-1)\s/i],
                  [n, [a, "Essential"],
                    [s, c]
                  ],
                  [/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],
                  [n, [a, "Envizen"],
                    [s, h]
                  ],
                  [/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],
                  [a, n, [s, h]],
                  [/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],
                  [n, [a, "MachSpeed"],
                    [s, h]
                  ],
                  [/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],
                  [a, n, [s, h]],
                  [/android.+[;\/]\s*TU_(1491)\s+build/i],
                  [n, [a, "Rotor"],
                    [s, h]
                  ],
                  [/android.+(KS(.+))\s+build/i],
                  [n, [a, "Amazon"],
                    [s, h]
                  ],
                  [/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],
                  [a, n, [s, h]],
                  [/\s(tablet|tab)[;\/]/i, /\s(mobile)(?:[;\/]|\ssafari)/i],
                  [
                    [s, l.lowerize], a, n
                  ],
                  [/[\s\/\(](smart-?tv)[;\)]/i],
                  [
                    [s, "smarttv"]
                  ],
                  [/(android[\w\.\s\-]{0,9});.+build/i],
                  [n, [a, "Generic"]]
                ],
                engine: [
                  [/windows.+\sedge\/([\w\.]+)/i],
                  [u, [o, "EdgeHTML"]],
                  [/webkit\/537\.36.+chrome\/(?!27)/i],
                  [
                    [o, "Blink"]
                  ],
                  [/(presto)\/([\w\.]+)/i, /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i, /(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i, /(icab)[\/\s]([23]\.[\d\.]+)/i],
                  [o, u],
                  [/rv\:([\w\.]{1,9}).+(gecko)/i],
                  [u, o]
                ],
                os: [
                  [/microsoft\s(windows)\s(vista|xp)/i],
                  [o, u],
                  [/(windows)\snt\s6\.2;\s(arm)/i, /(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i, /(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],
                  [o, [u, p.str, f.os.windows.version]],
                  [/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],
                  [
                    [o, "Windows"],
                    [u, p.str, f.os.windows.version]
                  ],
                  [/\((bb)(10);/i],
                  [
                    [o, "BlackBerry"], u
                  ],
                  [/(blackberry)\w*\/?([\w\.]*)/i, /(tizen)[\/\s]([\w\.]+)/i, /(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],
                  [o, u],
                  [/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],
                  [
                    [o, "Symbian"], u
                  ],
                  [/\((series40);/i],
                  [o],
                  [/mozilla.+\(mobile;.+gecko.+firefox/i],
                  [
                    [o, "Firefox OS"], u
                  ],
                  [/(nintendo|playstation)\s([wids34portablevu]+)/i, /(mint)[\/\s\(]?(\w*)/i, /(mageia|vectorlinux)[;\s]/i, /(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i, /(hurd|linux)\s?([\w\.]*)/i, /(gnu)\s?([\w\.]*)/i],
                  [o, u],
                  [/(cros)\s[\w]+\s([\w\.]+\w)/i],
                  [
                    [o, "Chromium OS"], u
                  ],
                  [/(sunos)\s?([\w\.\d]*)/i],
                  [
                    [o, "Solaris"], u
                  ],
                  [/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],
                  [o, u],
                  [/(haiku)\s(\w+)/i],
                  [o, u],
                  [/cfnetwork\/.+darwin/i, /ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],
                  [
                    [u, /_/g, "."],
                    [o, "iOS"]
                  ],
                  [/(mac\sos\sx)\s?([\w\s\.]*)/i, /(macintosh|mac(?=_powerpc)\s)/i],
                  [
                    [o, "Mac OS"],
                    [u, /_/g, "."]
                  ],
                  [/((?:open)?solaris)[\/\s-]?([\w\.]*)/i, /(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i, /(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i, /(unix)\s?([\w\.]*)/i],
                  [o, u]
                ]
              },
              g = function (t, e) {
                if ("object" == typeof t && (e = t, t = void 0), !(this instanceof g)) return new g(t, e).getResult();
                var i = t || (r && r.navigator && r.navigator.userAgent ? r.navigator.userAgent : ""),
                  n = e ? l.extend(d, e) : d;
                return this.getBrowser = function () {
                  var t = {
                    name: void 0,
                    version: void 0
                  };
                  return p.rgx.call(t, i, n.browser), t.major = l.major(t.version), t
                }, this.getCPU = function () {
                  var t = {
                    architecture: void 0
                  };
                  return p.rgx.call(t, i, n.cpu), t
                }, this.getDevice = function () {
                  var t = {
                    vendor: void 0,
                    model: void 0,
                    type: void 0
                  };
                  return p.rgx.call(t, i, n.device), t
                }, this.getEngine = function () {
                  var t = {
                    name: void 0,
                    version: void 0
                  };
                  return p.rgx.call(t, i, n.engine), t
                }, this.getOS = function () {
                  var t = {
                    name: void 0,
                    version: void 0
                  };
                  return p.rgx.call(t, i, n.os), t
                }, this.getResult = function () {
                  return {
                    ua: this.getUA(),
                    browser: this.getBrowser(),
                    engine: this.getEngine(),
                    os: this.getOS(),
                    device: this.getDevice(),
                    cpu: this.getCPU()
                  }
                }, this.getUA = function () {
                  return i
                }, this.setUA = function (t) {
                  return i = t, this
                }, this
              };
            g.VERSION = "0.7.20", g.BROWSER = {
              NAME: o,
              MAJOR: "major",
              VERSION: u
            }, g.CPU = {
              ARCHITECTURE: "architecture"
            }, g.DEVICE = {
              MODEL: n,
              VENDOR: a,
              TYPE: s,
              CONSOLE: "console",
              MOBILE: c,
              SMARTTV: "smarttv",
              TABLET: h,
              WEARABLE: "wearable",
              EMBEDDED: "embedded"
            }, g.ENGINE = {
              NAME: o,
              VERSION: u
            }, g.OS = {
              NAME: o,
              VERSION: u
            }, t.exports && (e = t.exports = g), e.UAParser = g;
            var _ = r && (r.jQuery || r.Zepto);
            if (void 0 !== _ && !_.ua) {
              var y = new g;
              _.ua = y.getResult(), _.ua.get = function () {
                return y.getUA()
              }, _.ua.set = function (t) {
                y.setUA(t);
                var e = y.getResult();
                for (var r in e) _.ua[r] = e[r];
              };
            }
          }("object" == typeof window ? window : this);
        }),
        Zi = (Xi.UAParser, t.window.HTMLImageElement),
        Yi = t.window.HTMLElement,
        Wi = {
          center: [0, 0],
          zoom: 0,
          bearing: 0,
          pitch: 0,
          minZoom: 0,
          maxZoom: 22,
          interactive: !0,
          scrollZoom: !0,
          boxZoom: !0,
          dragRotate: !0,
          dragPan: !0,
          keyboard: !0,
          doubleClickZoom: !0,
          touchZoomRotate: !0,
          bearingSnap: 7,
          clickTolerance: 3,
          hash: !1,
          attributionControl: !0,
          failIfMajorPerformanceCaveat: !1,
          preserveDrawingBuffer: !1,
          trackResize: !0,
          renderWorldCopies: !0,
          refreshExpiredTiles: !0,
          maxTileCacheSize: null,
          localIdeographFontFamily: "sans-serif",
          transformRequest: null,
          accessToken: null,
          fadeDuration: 300,
          crossSourceCollisions: !0,
          crsCode: "EPSG:3857"
        },
        Hi = function (i) {
          function n(e) {
            var n = this;
            if (null != (e = t.extend({}, Wi, e)).minZoom && null != e.maxZoom && e.minZoom > e.maxZoom) throw new Error("maxZoom must be greater than minZoom");
            "EPSG:4326" == e.crsCode && (e.renderWorldCopies = !1);
            var o = new Gi[e.crsCode](e.minZoom, e.maxZoom, e.renderWorldCopies);
            if (t.config.PROJECT_TYPE = e.crsCode, i.call(this, o, e), this._interactive = e.interactive, this._maxTileCacheSize = e.maxTileCacheSize, this._failIfMajorPerformanceCaveat = e.failIfMajorPerformanceCaveat, this._preserveDrawingBuffer = e.preserveDrawingBuffer, this._antialias = e.antialias, this._trackResize = e.trackResize, this._bearingSnap = e.bearingSnap, this._refreshExpiredTiles = e.refreshExpiredTiles, this._fadeDuration = e.fadeDuration, this._crossSourceCollisions = e.crossSourceCollisions, this._crossFadingFactor = 1, this._collectResourceTiming = e.collectResourceTiming, this._renderTaskQueue = new Ui, this._controls = [], this._mapId = t.uniqueId(), this._UAParser = new Xi, this._requestManager = new t.RequestManager(e.transformRequest, e.accessToken), "string" == typeof e.container) {
              if (this._container = t.window.document.getElementById(e.container), !this._container) throw new Error("Container '" + e.container + "' not found.")
            } else {
              if (!(e.container instanceof Yi)) throw new Error("Invalid type: 'container' must be a String or HTMLElement.");
              this._container = e.container;
            }
            if (e.maxBounds && this.setMaxBounds(e.maxBounds), t.bindAll(["_onWindowOnline", "_onWindowResize", "_contextLost", "_contextRestored"], this), this._setupContainer(), this._setupPainter(), void 0 === this.painter) throw new Error("Failed to initialize WebGL.");
            if (this.on("move", function () {
                return n._update(!1)
              }), this.on("moveend", function () {
                return n._update(!1)
              }), this.on("zoom", function () {
                return n._update(!0)
              }), void 0 !== t.window && (t.window.addEventListener("online", this._onWindowOnline, !1), t.window.addEventListener("resize", this._onWindowResize, !1)), function (t, e) {
                var i = t.getCanvasContainer(),
                  n = null,
                  o = !1,
                  s = null;
                for (var a in ki) t[a] = new ki[a](t, e), e.interactive && e[a] && t[a].enable(e[a]);
                r.addEventListener(i, "mouseout", function (e) {
                  t.fire(new Ei("mouseout", t, e));
                }), r.addEventListener(i, "mousedown", function (n) {
                  o = !0, s = r.mousePos(i, n);
                  var a = new Ei("mousedown", t, n);
                  if (t.fire(a), a.defaultPrevented) return;
                  e.interactive && !t.doubleClickZoom.isActive() && t.stop();
                  t.boxZoom.onMouseDown(n), t.boxZoom.isActive() || t.dragPan.isActive() || t.dragRotate.onMouseDown(n);
                  t.boxZoom.isActive() || t.dragRotate.isActive() || t.dragPan.onMouseDown(n);
                }), r.addEventListener(i, "mouseup", function (e) {
                  var r = t.dragRotate.isActive();
                  n && !r && t.fire(new Ei("contextmenu", t, n));
                  n = null, o = !1, t.fire(new Ei("mouseup", t, e));
                }), r.addEventListener(i, "mousemove", function (e) {
                  if (t.dragPan.isActive()) return;
                  if (t.dragRotate.isActive()) return;
                  var r = e.target;
                  for (; r && r !== i;) r = r.parentNode;
                  if (r !== i) return;
                  t.fire(new Ei("mousemove", t, e));
                }), r.addEventListener(i, "mouseover", function (e) {
                  var r = e.target;
                  for (; r && r !== i;) r = r.parentNode;
                  if (r !== i) return;
                  t.fire(new Ei("mouseover", t, e));
                }), r.addEventListener(i, "touchstart", function (r) {
                  var i = new Li("touchstart", t, r);
                  if (t.fire(i), i.defaultPrevented) return;
                  e.interactive && t.stop();
                  t.boxZoom.isActive() || t.dragRotate.isActive() || t.dragPan.onTouchStart(r);
                  t.touchZoomRotate.onStart(r), t.doubleClickZoom.onTouchStart(i);
                }, {
                  passive: !1
                }), r.addEventListener(i, "touchmove", function (e) {
                  t.fire(new Li("touchmove", t, e));
                }, {
                  passive: !1
                }), r.addEventListener(i, "touchend", function (e) {
                  t.fire(new Li("touchend", t, e));
                }), r.addEventListener(i, "touchcancel", function (e) {
                  t.fire(new Li("touchcancel", t, e));
                }), r.addEventListener(i, "click", function (n) {
                  var o = r.mousePos(i, n);
                  (!s || o.equals(s) || o.dist(s) < e.clickTolerance) && t.fire(new Ei("click", t, n));
                }), r.addEventListener(i, "dblclick", function (e) {
                  var r = new Ei("dblclick", t, e);
                  if (t.fire(r), r.defaultPrevented) return;
                  t.doubleClickZoom.onDblClick(r);
                }), r.addEventListener(i, "contextmenu", function (e) {
                  var r = t.dragRotate.isActive();
                  o || r ? o && (n = e) : t.fire(new Ei("contextmenu", t, e));
                  (t.dragRotate.isEnabled() || t.listens("contextmenu")) && e.preventDefault();
                }), r.addEventListener(i, "wheel", function (r) {
                  e.interactive && t.stop();
                  var i = new Si("wheel", t, r);
                  if (t.fire(i), i.defaultPrevented) return;
                  t.scrollZoom.onWheel(r);
                }, {
                  passive: !1
                });
              }(this, e), this._hash = e.hash && (new bi).addTo(this), this._hash && this._hash._onHashChange() || (this.jumpTo({
                center: e.center,
                zoom: e.zoom,
                bearing: e.bearing,
                pitch: e.pitch
              }), e.bounds && (this.resize(), this.fitBounds(e.bounds, t.extend({}, e.fitBoundsOptions, {
                duration: 0
              })))), this.resize(), null == e.style) {
              var s = this._UAParser.getDevice().type;
              e.style = "mobile" == s ? "aegis://styles/aegis/Streets-Raster512" : "aegis://styles/aegis/Streets";
            }
            this._localIdeographFontFamily = e.localIdeographFontFamily, e.style && this.setStyle(e.style, {
              localIdeographFontFamily: e.localIdeographFontFamily
            }), e.attributionControl && this.addControl(new zi({
              customAttribution: e.customAttribution
            })), this.addControl(new Vi, e.logoPosition), this.on("style.load", function () {
              n.transform.unmodified && n.jumpTo(n.style.stylesheet);
            }), this.on("data", function (e) {
              n._update("style" === e.dataType), n.fire(new t.Event(e.dataType + "data", e));
            }), this.on("dataloading", function (e) {
              n.fire(new t.Event(e.dataType + "dataloading", e));
            });
          }
          i && (n.__proto__ = i), n.prototype = Object.create(i && i.prototype), n.prototype.constructor = n;
          var o = {
            showTileBoundaries: {
              configurable: !0
            },
            showCollisionBoxes: {
              configurable: !0
            },
            showOverdrawInspector: {
              configurable: !0
            },
            repaint: {
              configurable: !0
            },
            vertices: {
              configurable: !0
            },
            version: {
              configurable: !0
            }
          };
          return n.prototype._getMapId = function () {
            return this._mapId
          }, n.prototype.addControl = function (e, r) {
            if (void 0 === r && e.getDefaultPosition && (r = e.getDefaultPosition()), void 0 === r && (r = "top-right"), !e || !e.onAdd) return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));
            var i = e.onAdd(this);
            this._controls.push(e);
            var n = this._controlPositions[r];
            return -1 !== r.indexOf("bottom") ? n.insertBefore(i, n.firstChild) : n.appendChild(i), this
          }, n.prototype.removeControl = function (e) {
            if (!e || !e.onRemove) return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));
            var r = this._controls.indexOf(e);
            return r > -1 && this._controls.splice(r, 1), e.onRemove(this), this
          }, n.prototype.resize = function (e) {
            var r = this._containerDimensions(),
              i = r[0],
              n = r[1];
            return this._resizeCanvas(i, n), this.transform.resize(i, n), this.painter.resize(i, n), this.fire(new t.Event("movestart", e)).fire(new t.Event("move", e)).fire(new t.Event("resize", e)).fire(new t.Event("moveend", e)), this
          }, n.prototype.getBounds = function () {
            return this.transform.getBounds()
          }, n.prototype.getMaxBounds = function () {
            return this.transform.getMaxBounds()
          }, n.prototype.setMaxBounds = function (e) {
            return this.transform.setMaxBounds(t.LngLatBounds.convert(e)), this._update()
          }, n.prototype.setMinZoom = function (t) {
            if ((t = null == t ? 0 : t) >= 0 && t <= this.transform.maxZoom) return this.transform.minZoom = t, this._update(), this.getZoom() < t && this.setZoom(t), this;
            throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")
          }, n.prototype.getMinZoom = function () {
            return this.transform.minZoom
          }, n.prototype.setMaxZoom = function (t) {
            if ((t = null == t ? 22 : t) >= this.transform.minZoom) return this.transform.maxZoom = t, this._update(), this.getZoom() > t && this.setZoom(t), this;
            throw new Error("maxZoom must be greater than the current minZoom")
          }, n.prototype.getRenderWorldCopies = function () {
            return this.transform.renderWorldCopies
          }, n.prototype.setRenderWorldCopies = function (t) {
            return this.transform.renderWorldCopies = t, this._update()
          }, n.prototype.getMaxZoom = function () {
            return this.transform.maxZoom
          }, n.prototype.project = function (e) {
            return this.transform.locationPoint(t.LngLat.convert(e))
          }, n.prototype.unproject = function (e) {
            return this.transform.pointLocation(t.Point.convert(e))
          }, n.prototype.isMoving = function () {
            return this._moving || this.dragPan.isActive() || this.dragRotate.isActive() || this.scrollZoom.isActive()
          }, n.prototype.isZooming = function () {
            return this._zooming || this.scrollZoom.isZooming()
          }, n.prototype.isRotating = function () {
            return this._rotating || this.dragRotate.isActive()
          }, n.prototype.on = function (t, e, r) {
            var n = this;
            if (void 0 === r) return i.prototype.on.call(this, t, e);
            var o = function () {
              var i;
              if ("mouseenter" === t || "mouseover" === t) {
                var o = !1;
                return {
                  layer: e,
                  listener: r,
                  delegates: {
                    mousemove: function (i) {
                      var s = n.getLayer(e) ? n.queryRenderedFeatures(i.point, {
                        layers: [e]
                      }) : [];
                      s.length ? o || (o = !0, r.call(n, new Ei(t, n, i.originalEvent, {
                        features: s
                      }))) : o = !1;
                    },
                    mouseout: function () {
                      o = !1;
                    }
                  }
                }
              }
              if ("mouseleave" === t || "mouseout" === t) {
                var s = !1;
                return {
                  layer: e,
                  listener: r,
                  delegates: {
                    mousemove: function (i) {
                      (n.getLayer(e) ? n.queryRenderedFeatures(i.point, {
                        layers: [e]
                      }) : []).length ? s = !0 : s && (s = !1, r.call(n, new Ei(t, n, i.originalEvent)));
                    },
                    mouseout: function (e) {
                      s && (s = !1, r.call(n, new Ei(t, n, e.originalEvent)));
                    }
                  }
                }
              }
              return {
                layer: e,
                listener: r,
                delegates: (i = {}, i[t] = function (t) {
                  var i = n.getLayer(e) ? n.queryRenderedFeatures(t.point, {
                    layers: [e]
                  }) : [];
                  i.length && (t.features = i, r.call(n, t), delete t.features);
                }, i)
              }
            }();
            for (var s in this._delegatedListeners = this._delegatedListeners || {}, this._delegatedListeners[t] = this._delegatedListeners[t] || [], this._delegatedListeners[t].push(o), o.delegates) this.on(s, o.delegates[s]);
            return this
          }, n.prototype.off = function (t, e, r) {
            if (void 0 === r) return i.prototype.off.call(this, t, e);
            if (this._delegatedListeners && this._delegatedListeners[t])
              for (var n = this._delegatedListeners[t], o = 0; o < n.length; o++) {
                var s = n[o];
                if (s.layer === e && s.listener === r) {
                  for (var a in s.delegates) this.off(a, s.delegates[a]);
                  return n.splice(o, 1), this
                }
              }
            return this
          }, n.prototype.queryRenderedFeatures = function (e, r) {
            if (!this.style) return [];
            var i;
            if (void 0 !== r || void 0 === e || e instanceof t.Point || Array.isArray(e) || (r = e, e = void 0), r = r || {}, (e = e || [
                [0, 0],
                [this.transform.width, this.transform.height]
              ]) instanceof t.Point || "number" == typeof e[0]) i = [t.Point.convert(e)];
            else {
              var n = t.Point.convert(e[0]),
                o = t.Point.convert(e[1]);
              i = [n, new t.Point(o.x, n.y), o, new t.Point(n.x, o.y), n];
            }
            return this.style.queryRenderedFeatures(i, r, this.transform)
          }, n.prototype.querySourceFeatures = function (t, e) {
            return this.style.querySourceFeatures(t, e)
          }, n.prototype.setStyle = function (e, r) {
            return !1 !== (r = t.extend({}, {
              localIdeographFontFamily: this._localIdeographFontFamily
            }, r)).diff && r.localIdeographFontFamily === this._localIdeographFontFamily && this.style && e ? (this._diffStyle(e, r), this) : (this._localIdeographFontFamily = r.localIdeographFontFamily, this._updateStyle(e, r))
          }, n.prototype._updateStyle = function (t, e) {
            return this.style && (this.style.setEventedParent(null), this.style._remove()), t ? (this.style = new Xe(this, e || {}), this.style.setEventedParent(this, {
              style: this.style
            }), "string" == typeof t ? this.style.loadURL(t) : this.style.loadJSON(t), this) : (delete this.style, this)
          }, n.prototype._diffStyle = function (e, r) {
            var i = this;
            if ("string" == typeof e) {
              var n = this._requestManager.normalizeStyleURL(e),
                o = this._requestManager.transformRequest(n, t.ResourceType.Style);
              t.getJSON(o, function (e, n) {
                e ? i.fire(new t.ErrorEvent(e)) : n && i._updateDiff(n, r);
              });
            } else "object" == typeof e && this._updateDiff(e, r);
          }, n.prototype._updateDiff = function (e, r) {
            try {
              this.style.setState(e) && this._update(!0);
            } catch (i) {
              t.warnOnce("Unable to perform style diff: " + (i.message || i.error || i) + ".  Rebuilding the style from scratch."), this._updateStyle(e, r);
            }
          }, n.prototype.getStyle = function () {
            if (this.style) return this.style.serialize()
          }, n.prototype.isStyleLoaded = function () {
            return this.style ? this.style.loaded() : t.warnOnce("There is no style added to the map.")
          }, n.prototype.addSource = function (t, e) {
            return this.style.addSource(t, e), this._update(!0)
          }, n.prototype.isSourceLoaded = function (e) {
            var r = this.style && this.style.sourceCaches[e];
            if (void 0 !== r) return r.loaded();
            this.fire(new t.ErrorEvent(new Error("There is no source with ID '" + e + "'")));
          }, n.prototype.areTilesLoaded = function () {
            var t = this.style && this.style.sourceCaches;
            for (var e in t) {
              var r = t[e]._tiles;
              for (var i in r) {
                var n = r[i];
                if ("loaded" !== n.state && "errored" !== n.state) return !1
              }
            }
            return !0
          }, n.prototype.addSourceType = function (t, e, r) {
            return this.style.addSourceType(t, e, r)
          }, n.prototype.removeSource = function (t) {
            return this.style.removeSource(t), this._update(!0)
          }, n.prototype.getSource = function (t) {
            return this.style.getSource(t)
          }, n.prototype.addImage = function (e, r, i) {
            void 0 === i && (i = {});
            var n = i.pixelRatio;
            void 0 === n && (n = 1);
            var o = i.sdf;
            void 0 === o && (o = !1);
            if (r instanceof Zi) {
              var s = t.browser.getImageData(r),
                a = s.width,
                u = s.height,
                c = s.data;
              this.style.addImage(e, {
                data: new t.RGBAImage({
                  width: a,
                  height: u
                }, c),
                pixelRatio: n,
                sdf: o,
                version: 0
              });
            } else {
              if (void 0 === r.width || void 0 === r.height) return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));
              var h = r.width,
                l = r.height,
                p = r.data,
                f = r;
              this.style.addImage(e, {
                data: new t.RGBAImage({
                  width: h,
                  height: l
                }, new Uint8Array(p)),
                pixelRatio: n,
                sdf: o,
                version: 0,
                userImage: f
              }), f.onAdd && f.onAdd(this, e);
            }
          }, n.prototype.updateImage = function (e, r) {
            var i = this.style.getImage(e);
            if (!i) return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));
            var n = r instanceof Zi ? t.browser.getImageData(r) : r,
              o = n.width,
              s = n.height,
              a = n.data;
            if (void 0 === o || void 0 === s) return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));
            if (o !== i.data.width || s !== i.data.height) return this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));
            var u = !(r instanceof Zi);
            i.data.replace(a, u), this.style.updateImage(e, i);
          }, n.prototype.hasImage = function (e) {
            return e ? !!this.style.getImage(e) : (this.fire(new t.ErrorEvent(new Error("Missing required image id"))), !1)
          }, n.prototype.removeImage = function (t) {
            this.style.removeImage(t);
          }, n.prototype.loadImage = function (e, r) {
            t.getImage(this._requestManager.transformRequest(e, t.ResourceType.Image), r);
          }, n.prototype.listImages = function () {
            return this.style.listImages()
          }, n.prototype.addLayer = function (t, e) {
            return this.style.addLayer(t, e), this._update(!0)
          }, n.prototype.moveLayer = function (t, e) {
            return this.style.moveLayer(t, e), this._update(!0)
          }, n.prototype.removeLayer = function (t) {
            return this.style.removeLayer(t), this._update(!0)
          }, n.prototype.getLayer = function (t) {
            return this.style.getLayer(t)
          }, n.prototype.setFilter = function (t, e, r) {
            return void 0 === r && (r = {}), this.style.setFilter(t, e, r), this._update(!0)
          }, n.prototype.setLayerZoomRange = function (t, e, r) {
            return this.style.setLayerZoomRange(t, e, r), this._update(!0)
          }, n.prototype.getFilter = function (t) {
            return this.style.getFilter(t)
          }, n.prototype.setPaintProperty = function (t, e, r, i) {
            return void 0 === i && (i = {}), this.style.setPaintProperty(t, e, r, i), this._update(!0)
          }, n.prototype.getPaintProperty = function (t, e) {
            return this.style.getPaintProperty(t, e)
          }, n.prototype.setLayoutProperty = function (t, e, r, i) {
            return void 0 === i && (i = {}), this.style.setLayoutProperty(t, e, r, i), this._update(!0)
          }, n.prototype.getLayoutProperty = function (t, e) {
            return this.style.getLayoutProperty(t, e)
          }, n.prototype.setLight = function (t, e) {
            return void 0 === e && (e = {}), this.style.setLight(t, e), this._update(!0)
          }, n.prototype.getLight = function () {
            return this.style.getLight()
          }, n.prototype.setFeatureState = function (t, e) {
            return this.style.setFeatureState(t, e), this._update()
          }, n.prototype.removeFeatureState = function (t, e) {
            return this.style.removeFeatureState(t, e), this._update()
          }, n.prototype.getFeatureState = function (t) {
            return this.style.getFeatureState(t)
          }, n.prototype.getContainer = function () {
            return this._container
          }, n.prototype.getCanvasContainer = function () {
            return this._canvasContainer
          }, n.prototype.getCanvas = function () {
            return this._canvas
          }, n.prototype._containerDimensions = function () {
            var t = 0,
              e = 0;
            return this._container && (t = this._container.clientWidth || 400, e = this._container.clientHeight || 300), [t, e]
          }, n.prototype._detectMissingCSS = function () {
            "rgb(250, 128, 114)" !== t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color") && t.warnOnce("This page appears to be missing CSS declarations for EPGIS JS, which may cause the map to display incorrectly. Please ensure your page includes epgis.css, as described in https://www.epgis.com/epgis-js/api/.");
          }, n.prototype._setupContainer = function () {
            var t = this._container;
            t.classList.add("epgis-map"), (this._missingCSSCanary = r.create("div", "epgis-canary", t)).style.visibility = "hidden", this._detectMissingCSS();
            var e = this._canvasContainer = r.create("div", "epgis-canvas-container", t);
            this._interactive && e.classList.add("epgis-interactive"), this._canvas = r.create("canvas", "epgis-canvas", e), this._canvas.style.position = "absolute", this._canvas.addEventListener("webglcontextlost", this._contextLost, !1), this._canvas.addEventListener("webglcontextrestored", this._contextRestored, !1), this._canvas.setAttribute("tabindex", "0"), this._canvas.setAttribute("aria-label", "Map");
            var i = this._containerDimensions();
            this._resizeCanvas(i[0], i[1]);
            var n = this._controlContainer = r.create("div", "epgis-control-container", t),
              o = this._controlPositions = {};
            ["top-left", "top-right", "bottom-left", "bottom-right"].forEach(function (t) {
              o[t] = r.create("div", "epgis-ctrl-" + t, n);
            });
          }, n.prototype._resizeCanvas = function (e, r) {
            var i = t.window.devicePixelRatio || 1;
            this._canvas.width = i * e, this._canvas.height = i * r, this._canvas.style.width = e + "px", this._canvas.style.height = r + "px";
          }, n.prototype._setupPainter = function () {
            var r = t.extend({}, e.webGLContextAttributes, {
                failIfMajorPerformanceCaveat: this._failIfMajorPerformanceCaveat,
                preserveDrawingBuffer: this._preserveDrawingBuffer,
                antialias: this._antialias || !1
              }),
              i = this._canvas.getContext("webgl", r) || this._canvas.getContext("experimental-webgl", r);
            i ? (this.painter = new gi(i, this.transform), t.webpSupported.testSupport(i)) : this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")));
          }, n.prototype._contextLost = function (e) {
            e.preventDefault(), this._frame && (this._frame.cancel(), this._frame = null), this.fire(new t.Event("webglcontextlost", {
              originalEvent: e
            }));
          }, n.prototype._contextRestored = function (e) {
            this._setupPainter(), this.resize(), this._update(), this.fire(new t.Event("webglcontextrestored", {
              originalEvent: e
            }));
          }, n.prototype.loaded = function () {
            return !this._styleDirty && !this._sourcesDirty && !!this.style && this.style.loaded()
          }, n.prototype._update = function (t) {
            return this.style ? (this._styleDirty = this._styleDirty || t, this._sourcesDirty = !0, this.triggerRepaint(), this) : this
          }, n.prototype._requestRenderFrame = function (t) {
            return this._update(), this._renderTaskQueue.add(t)
          }, n.prototype._cancelRenderFrame = function (t) {
            this._renderTaskQueue.remove(t);
          }, n.prototype._render = function () {
            this.painter.context.setDirty(), this.painter.setBaseState(), this._renderTaskQueue.run();
            var e = !1;
            if (this.style && this._styleDirty) {
              this._styleDirty = !1;
              var r = this.transform.zoom,
                i = t.browser.now();
              this.style.zoomHistory.update(r, i);
              var n = new t.EvaluationParameters(r, {
                  now: i,
                  fadeDuration: this._fadeDuration,
                  zoomHistory: this.style.zoomHistory,
                  transition: this.style.getTransition()
                }),
                o = n.crossFadingFactor();
              1 === o && o === this._crossFadingFactor || (e = !0, this._crossFadingFactor = o), this.style.update(n);
            }
            return this.style && this._sourcesDirty && (this._sourcesDirty = !1, this.style._updateSources(this.transform)), this._placementDirty = this.style && this.style._updatePlacement(this.painter.transform, this.showCollisionBoxes, this._fadeDuration, this._crossSourceCollisions), this.painter.render(this.style, {
              showTileBoundaries: this.showTileBoundaries,
              showOverdrawInspector: this._showOverdrawInspector,
              rotating: this.isRotating(),
              zooming: this.isZooming(),
              moving: this.isMoving(),
              fadeDuration: this._fadeDuration
            }), this.fire(new t.Event("render")), this.loaded() && !this._loaded && (this._loaded = !0, this.fire(new t.Event("load"))), this.style && (this.style.hasTransitions() || e) && (this._styleDirty = !0), this.style && !this._placementDirty && this.style._releaseSymbolFadeTiles(), this._sourcesDirty || this._repaint || this._styleDirty || this._placementDirty ? this.triggerRepaint() : !this.isMoving() && this.loaded() && this.fire(new t.Event("idle")), this
          }, n.prototype.remove = function () {
            this._hash && this._hash.remove();
            for (var e = 0, r = this._controls; e < r.length; e += 1) {
              r[e].onRemove(this);
            }
            this._controls = [], this._frame && (this._frame.cancel(), this._frame = null), this._renderTaskQueue.clear(), this.setStyle(null), void 0 !== t.window && (t.window.removeEventListener("resize", this._onWindowResize, !1), t.window.removeEventListener("online", this._onWindowOnline, !1));
            var i = this.painter.context.gl.getExtension("WEBGL_lose_context");
            i && i.loseContext(), Ki(this._canvasContainer), Ki(this._controlContainer), Ki(this._missingCSSCanary), this._container.classList.remove("epgis-map"), this.fire(new t.Event("remove"));
          }, n.prototype.triggerRepaint = function () {
            var e = this;
            this.style && !this._frame && (this._frame = t.browser.frame(function () {
              e._frame = null, e._render();
            }));
          }, n.prototype._onWindowOnline = function () {
            this._update();
          }, n.prototype._onWindowResize = function () {
            this._trackResize && this.resize()._update();
          }, o.showTileBoundaries.get = function () {
            return !!this._showTileBoundaries
          }, o.showTileBoundaries.set = function (t) {
            this._showTileBoundaries !== t && (this._showTileBoundaries = t, this._update());
          }, o.showCollisionBoxes.get = function () {
            return !!this._showCollisionBoxes
          }, o.showCollisionBoxes.set = function (t) {
            this._showCollisionBoxes !== t && (this._showCollisionBoxes = t, t ? this.style._generateCollisionBoxes() : this._update());
          }, o.showOverdrawInspector.get = function () {
            return !!this._showOverdrawInspector
          }, o.showOverdrawInspector.set = function (t) {
            this._showOverdrawInspector !== t && (this._showOverdrawInspector = t, this._update());
          }, o.repaint.get = function () {
            return !!this._repaint
          }, o.repaint.set = function (t) {
            this._repaint !== t && (this._repaint = t, this.triggerRepaint());
          }, o.vertices.get = function () {
            return !!this._vertices
          }, o.vertices.set = function (t) {
            this._vertices = t, this._update();
          }, n.prototype._setCacheLimits = function (e, r) {
            t.setCacheLimits(e, r);
          }, o.version.get = function () {
            return t.version
          }, Object.defineProperties(n.prototype, o), n
        }(Bi);
  
      function Ki(t) {
        t.parentNode && t.parentNode.removeChild(t);
      }
      var Ji = function (e) {
        this.options = e, t.bindAll(["_updateCompact"], this);
      };
      Ji.prototype.getDefaultPosition = function () {
        return "bottom-left"
      }, Ji.prototype.onAdd = function (t) {
        var e = this,
          i = this.options && this.options.compact,
          n = this.options && this.options.logoSize ? parseInt(this.options.logoSize) > 20 ? this.options.logoSize : 20 : "",
          o = "mobile" == t._UAParser.getDevice().type;
        this._map = t, this._container = r.create("div", "epgis-log-attribution");
        var s = r.create("div", "epgis-logo" + (o ? " mob" : ""), this._container);
        if (n) var a = setTimeout(function () {
          var t = parseInt(e._getStyle(s, "width")),
            r = parseInt(e._getStyle(s, "height"));
          s.style.width = n * (t / r) + "px", s.style.height = n + "px", clearTimeout(a);
        }, 0);
        return o || (this._attributionContainer = r.create("div", "epgis-attribution", this._container), this._attributionContainer.innerText = "© 2020 亿力吉奥 -GS(2018)634号", this.options.customAttribution && (this._attributionContainer.innerHTML += this.options.customAttribution)), i && this._container.classList.add("epgis-compact"), void 0 === i && (this._map.on("resize", this._updateCompact), this._updateCompact()), this._container
      }, Ji.prototype.onRemove = function () {
        r.remove(this._container), this._map.off("resize", this._updateCompact), this._map = void 0;
      }, Ji.prototype._updateCompact = function () {
        this._map.getCanvasContainer().offsetWidth <= 640 ? this._container.classList.add("epgis-compact") : this._container.classList.remove("epgis-compact");
      }, Ji.prototype._getStyle = function (t, e) {
        return t.currentStyle ? t.currentStyle[e] : getComputedStyle(t)[e]
      };
      var Qi = {
          fixZoomStep: !1,
          logoAtrribution: !0,
          attributionControl: !1,
          crsCode: "EPSG:3857"
        },
        $i = function (e) {
          function r(r) {
            r = t.extend({}, Qi, r), e.call(this, r), r.logoAtrribution && this.addControl(new Ji({
              customAttribution: r.customAttribution
            })), this._fixZoomStep = r.fixZoomStep;
          }
          return e && (r.__proto__ = e), r.prototype = Object.create(e && e.prototype), r.prototype.constructor = r, r
        }(Hi),
        tn = function () {};
      tn.resize = function () {}, tn.remove = function () {}, tn.mousedown = function () {}, tn.mouseup = function () {}, tn.mousemove = function () {}, tn.click = function () {}, tn.dblclick = function () {}, tn.mouseenter = function () {}, tn.mouseleave = function () {}, tn.mouseout = function () {}, tn.contextmenu = function () {}, tn.wheel = function () {}, tn.touchstart = function () {}, tn.touchend = function () {}, tn.touchmove = function () {}, tn.touchcancel = function () {}, tn.movestart = function () {}, tn.move = function () {}, tn.moveend = function () {}, tn.zoomstart = function () {}, tn.zoom = function () {}, tn.zoomend = function () {}, tn.pitchstart = function () {}, tn.pitch = function () {}, tn.pitchend = function () {}, tn.load = function () {}, tn.render = function () {}, tn.idle = function () {}, tn.error = function () {}, tn.data = function () {}, tn.styledata = function () {}, tn.sourcedata = function () {}, tn.dataloading = function () {}, tn.styledataloading = function () {}, tn.sourcedataloading = function () {}, tn.styleimagemissing = function () {};
      var en = {
          showCompass: !0,
          showZoom: !0,
          visualizePitch: !1
        },
        rn = function (e) {
          var i = this;
          this.options = t.extend({}, en, e), this._container = r.create("div", "epgis-ctrl epgis-ctrl-group"), this._container.addEventListener("contextmenu", function (t) {
            return t.preventDefault()
          }), this.options.showZoom && (t.bindAll(["_updateZoomButtons"], this), this._zoomInButton = this._createButton("epgis-ctrl-icon epgis-ctrl-zoom-in", "Zoom in", function () {
            return i._map.zoomIn()
          }), this._zoomOutButton = this._createButton("epgis-ctrl-icon epgis-ctrl-zoom-out", "Zoom out", function () {
            return i._map.zoomOut()
          })), this.options.showCompass && (t.bindAll(["_rotateCompassArrow"], this), this._compass = this._createButton("epgis-ctrl-icon epgis-ctrl-compass", "Reset bearing to north", function () {
            i.options.visualizePitch ? i._map.resetNorthPitch() : i._map.resetNorth();
          }), this._compassArrow = r.create("span", "epgis-ctrl-compass-arrow", this._compass));
        };
  
      function nn(e, r, i) {
        if (e = new t.LngLat(e.lng, e.lat), r) {
          var n = new t.LngLat(e.lng - 360, e.lat),
            o = new t.LngLat(e.lng + 360, e.lat),
            s = i.locationPoint(e).distSqr(r);
          i.locationPoint(n).distSqr(r) < s ? e = n : i.locationPoint(o).distSqr(r) < s && (e = o);
        }
        for (; Math.abs(e.lng - i.center.lng) > 180;) {
          var a = i.locationPoint(e);
          if (a.x >= 0 && a.y >= 0 && a.x <= i.width && a.y <= i.height) break;
          e.lng > i.center.lng ? e.lng -= 360 : e.lng += 360;
        }
        return e
      }
      rn.prototype._updateZoomButtons = function () {
        var t = this._map.getZoom();
        t === this._map.getMaxZoom() ? this._zoomInButton.classList.add("epgis-ctrl-icon-disabled") : this._zoomInButton.classList.remove("epgis-ctrl-icon-disabled"), t === this._map.getMinZoom() ? this._zoomOutButton.classList.add("epgis-ctrl-icon-disabled") : this._zoomOutButton.classList.remove("epgis-ctrl-icon-disabled");
      }, rn.prototype._rotateCompassArrow = function () {
        var t = this.options.visualizePitch ? "scale(" + 1 / Math.pow(Math.cos(this._map.transform.pitch * (Math.PI / 180)), .5) + ") rotateX(" + this._map.transform.pitch + "deg) rotateZ(" + this._map.transform.angle * (180 / Math.PI) + "deg)" : "rotate(" + this._map.transform.angle * (180 / Math.PI) + "deg)";
        this._compassArrow.style.transform = t;
      }, rn.prototype.onAdd = function (t) {
        return this._map = t, this.options.showZoom && (this._map.on("zoom", this._updateZoomButtons), this._updateZoomButtons()), this.options.showCompass && (this.options.visualizePitch && this._map.on("pitch", this._rotateCompassArrow), this._map.on("rotate", this._rotateCompassArrow), this._rotateCompassArrow(), this._handler = new Ti(t, {
          button: "left",
          element: this._compass
        }), r.addEventListener(this._compass, "mousedown", this._handler.onMouseDown), r.addEventListener(this._compass, "touchstart", this._handler.onMouseDown, {
          passive: !1
        }), this._handler.enable()), this._container
      }, rn.prototype.onRemove = function () {
        r.remove(this._container), this.options.showZoom && this._map.off("zoom", this._updateZoomButtons), this.options.showCompass && (this.options.visualizePitch && this._map.off("pitch", this._rotateCompassArrow), this._map.off("rotate", this._rotateCompassArrow), r.removeEventListener(this._compass, "mousedown", this._handler.onMouseDown), r.removeEventListener(this._compass, "touchstart", this._handler.onMouseDown, {
          passive: !1
        }), this._handler.disable(), delete this._handler), delete this._map;
      }, rn.prototype._createButton = function (t, e, i) {
        var n = r.create("button", t, this._container);
        return n.type = "button", n.title = e, n.setAttribute("aria-label", e), n.addEventListener("click", i), n
      };
      var on = {
        center: "translate(-50%,-50%)",
        top: "translate(-50%,0)",
        "top-left": "translate(0,0)",
        "top-right": "translate(-100%,0)",
        bottom: "translate(-50%,-100%)",
        "bottom-left": "translate(0,-100%)",
        "bottom-right": "translate(-100%,-100%)",
        left: "translate(0,-50%)",
        right: "translate(-100%,-50%)"
      };
  
      function sn(t, e, r) {
        var i = t.classList;
        for (var n in on) i.remove("epgis-" + r + "-anchor-" + n);
        i.add("epgis-" + r + "-anchor-" + e);
      }
      var an, un = function (e) {
          function i(i, n) {
            if (e.call(this), (i instanceof t.window.HTMLElement || n) && (i = t.extend({
                element: i
              }, n)), t.bindAll(["_update", "_onMove", "_onUp", "_addDragHandler", "_onMapClick"], this), this._anchor = i && i.anchor || "center", this._color = i && i.color || "#3FB1CE", this._draggable = i && i.draggable || !1, this._state = "inactive", i && i.element) this._element = i.element, this._offset = t.Point.convert(i && i.offset || [0, 0]);
            else {
              this._defaultMarker = !0, this._element = r.create("div");
              var o = r.createNS("http://www.w3.org/2000/svg", "svg");
              o.setAttributeNS(null, "display", "block"), o.setAttributeNS(null, "height", "41px"), o.setAttributeNS(null, "width", "27px"), o.setAttributeNS(null, "viewBox", "0 0 27 41");
              var s = r.createNS("http://www.w3.org/2000/svg", "g");
              s.setAttributeNS(null, "stroke", "none"), s.setAttributeNS(null, "stroke-width", "1"), s.setAttributeNS(null, "fill", "none"), s.setAttributeNS(null, "fill-rule", "evenodd");
              var a = r.createNS("http://www.w3.org/2000/svg", "g");
              a.setAttributeNS(null, "fill-rule", "nonzero");
              var u = r.createNS("http://www.w3.org/2000/svg", "g");
              u.setAttributeNS(null, "transform", "translate(3.0, 29.0)"), u.setAttributeNS(null, "fill", "#000000");
              for (var c = 0, h = [{
                  rx: "10.5",
                  ry: "5.25002273"
                }, {
                  rx: "10.5",
                  ry: "5.25002273"
                }, {
                  rx: "9.5",
                  ry: "4.77275007"
                }, {
                  rx: "8.5",
                  ry: "4.29549936"
                }, {
                  rx: "7.5",
                  ry: "3.81822308"
                }, {
                  rx: "6.5",
                  ry: "3.34094679"
                }, {
                  rx: "5.5",
                  ry: "2.86367051"
                }, {
                  rx: "4.5",
                  ry: "2.38636864"
                }]; c < h.length; c += 1) {
                var l = h[c],
                  p = r.createNS("http://www.w3.org/2000/svg", "ellipse");
                p.setAttributeNS(null, "opacity", "0.04"), p.setAttributeNS(null, "cx", "10.5"), p.setAttributeNS(null, "cy", "5.80029008"), p.setAttributeNS(null, "rx", l.rx), p.setAttributeNS(null, "ry", l.ry), u.appendChild(p);
              }
              var f = r.createNS("http://www.w3.org/2000/svg", "g");
              f.setAttributeNS(null, "fill", this._color);
              var d = r.createNS("http://www.w3.org/2000/svg", "path");
              d.setAttributeNS(null, "d", "M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"), f.appendChild(d);
              var g = r.createNS("http://www.w3.org/2000/svg", "g");
              g.setAttributeNS(null, "opacity", "0.25"), g.setAttributeNS(null, "fill", "#000000");
              var _ = r.createNS("http://www.w3.org/2000/svg", "path");
              _.setAttributeNS(null, "d", "M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"), g.appendChild(_);
              var y = r.createNS("http://www.w3.org/2000/svg", "g");
              y.setAttributeNS(null, "transform", "translate(6.0, 7.0)"), y.setAttributeNS(null, "fill", "#FFFFFF");
              var m = r.createNS("http://www.w3.org/2000/svg", "g");
              m.setAttributeNS(null, "transform", "translate(8.0, 8.0)");
              var v = r.createNS("http://www.w3.org/2000/svg", "circle");
              v.setAttributeNS(null, "fill", "#000000"), v.setAttributeNS(null, "opacity", "0.25"), v.setAttributeNS(null, "cx", "5.5"), v.setAttributeNS(null, "cy", "5.5"), v.setAttributeNS(null, "r", "5.4999962");
              var x = r.createNS("http://www.w3.org/2000/svg", "circle");
              x.setAttributeNS(null, "fill", "#FFFFFF"), x.setAttributeNS(null, "cx", "5.5"), x.setAttributeNS(null, "cy", "5.5"), x.setAttributeNS(null, "r", "5.4999962"), m.appendChild(v), m.appendChild(x), a.appendChild(u), a.appendChild(f), a.appendChild(g), a.appendChild(y), a.appendChild(m), o.appendChild(a), this._element.appendChild(o), this._offset = t.Point.convert(i && i.offset || [0, -14]);
            }
            this._element.classList.add("epgis-marker"), this._element.addEventListener("dragstart", function (t) {
              t.preventDefault();
            }), sn(this._element, this._anchor, "marker"), this._popup = null;
          }
          return e && (i.__proto__ = e), i.prototype = Object.create(e && e.prototype), i.prototype.constructor = i, i.prototype.addTo = function (t) {
            return this.remove(), this._map = t, t.getCanvasContainer().appendChild(this._element), t.on("move", this._update), t.on("moveend", this._update), this.setDraggable(this._draggable), this._update(), this._map.on("click", this._onMapClick), this
          }, i.prototype.remove = function () {
            return this._map && (this._map.off("click", this._onMapClick), this._map.off("move", this._update), this._map.off("moveend", this._update), this._map.off("mousedown", this._addDragHandler), this._map.off("touchstart", this._addDragHandler), this._map.off("mouseup", this._onUp), this._map.off("touchend", this._onUp), this._map.off("mousemove", this._onMove), this._map.off("touchmove", this._onMove), delete this._map), r.remove(this._element), this._popup && this._popup.remove(), this
          }, i.prototype.getLngLat = function () {
            return this._lngLat
          }, i.prototype.setLngLat = function (e) {
            return this._lngLat = t.LngLat.convert(e), this._pos = null, this._popup && this._popup.setLngLat(this._lngLat), this._update(), this
          }, i.prototype.getElement = function () {
            return this._element
          }, i.prototype.setPopup = function (t) {
            if (this._popup && (this._popup.remove(), this._popup = null), t) {
              if (!("offset" in t.options)) {
                var e = Math.sqrt(Math.pow(13.5, 2) / 2);
                t.options.offset = this._defaultMarker ? {
                  top: [0, 0],
                  "top-left": [0, 0],
                  "top-right": [0, 0],
                  bottom: [0, -38.1],
                  "bottom-left": [e, -1 * (24.6 + e)],
                  "bottom-right": [-e, -1 * (24.6 + e)],
                  left: [13.5, -24.6],
                  right: [-13.5, -24.6]
                } : this._offset;
              }
              this._popup = t, this._lngLat && this._popup.setLngLat(this._lngLat);
            }
            return this
          }, i.prototype._onMapClick = function (t) {
            var e = t.originalEvent.target,
              r = this._element;
            this._popup && (e === r || r.contains(e)) && this.togglePopup();
          }, i.prototype.getPopup = function () {
            return this._popup
          }, i.prototype.togglePopup = function () {
            var t = this._popup;
            return t ? (t.isOpen() ? t.remove() : t.addTo(this._map), this) : this
          }, i.prototype._update = function (t) {
            this._map && (this._map.transform.renderWorldCopies && (this._lngLat = nn(this._lngLat, this._pos, this._map.transform)), this._pos = this._map.project(this._lngLat)._add(this._offset), t && "moveend" !== t.type || (this._pos = this._pos.round()), sn(this._element, this._anchor, "marker"), this._rotate ? r.setTransform(this._element, on[this._anchor] + " translate(" + this._pos.x + "px, " + this._pos.y + "px) rotate(" + this._rotate + "deg)") : r.setTransform(this._element, on[this._anchor] + " translate(" + this._pos.x + "px, " + this._pos.y + "px)"));
          }, i.prototype.setRotate = function (t) {
            return this._rotate = t, this._update(), this
          }, i.prototype.getRotate = function () {
            return this._rotate
          }, i.prototype.getOffset = function () {
            return this._offset
          }, i.prototype.setOffset = function (e) {
            return this._offset = t.Point.convert(e), this._update(), this
          }, i.prototype._onMove = function (e) {
            this._pos = e.point.sub(this._positionDelta), this._lngLat = this._map.unproject(this._pos), this.setLngLat(this._lngLat), this._element.style.pointerEvents = "none", "pending" === this._state && (this._state = "active", this.fire(new t.Event("dragstart"))), this.fire(new t.Event("drag"));
          }, i.prototype._onUp = function () {
            this._element.style.pointerEvents = "auto", this._positionDelta = null, this._map.off("mousemove", this._onMove), this._map.off("touchmove", this._onMove), "active" === this._state && this.fire(new t.Event("dragend")), this._state = "inactive";
          }, i.prototype._addDragHandler = function (t) {
            this._element.contains(t.originalEvent.target) && (t.preventDefault(), this._positionDelta = t.point.sub(this._pos).add(this._offset), this._state = "pending", this._map.on("mousemove", this._onMove), this._map.on("touchmove", this._onMove), this._map.once("mouseup", this._onUp), this._map.once("touchend", this._onUp));
          }, i.prototype.setDraggable = function (t) {
            return this._draggable = !!t, this._map && (t ? (this._map.on("mousedown", this._addDragHandler), this._map.on("touchstart", this._addDragHandler)) : (this._map.off("mousedown", this._addDragHandler), this._map.off("touchstart", this._addDragHandler))), this
          }, i.prototype.isDraggable = function () {
            return this._draggable
          }, i
        }(t.Evented),
        cn = {
          positionOptions: {
            enableHighAccuracy: !1,
            maximumAge: 0,
            timeout: 6e3
          },
          fitBoundsOptions: {
            maxZoom: 15
          },
          trackUserLocation: !1,
          showUserLocation: !0
        };
      var hn = function (e) {
          function i(r) {
            e.call(this), this.options = t.extend({}, cn, r), t.bindAll(["_onSuccess", "_onError", "_finish", "_setupUI", "_updateCamera", "_updateMarker"], this);
          }
          return e && (i.__proto__ = e), i.prototype = Object.create(e && e.prototype), i.prototype.constructor = i, i.prototype.onAdd = function (e) {
            var i;
            return this._map = e, this._container = r.create("div", "epgis-ctrl epgis-ctrl-group"), i = this._setupUI, void 0 !== an ? i(an) : void 0 !== t.window.navigator.permissions ? t.window.navigator.permissions.query({
              name: "geolocation"
            }).then(function (t) {
              an = "denied" !== t.state, i(an);
            }) : (an = !!t.window.navigator.geolocation, i(an)), this._container
          }, i.prototype.onRemove = function () {
            void 0 !== this._geolocationWatchID && (t.window.navigator.geolocation.clearWatch(this._geolocationWatchID), this._geolocationWatchID = void 0), this.options.showUserLocation && this._userLocationDotMarker && this._userLocationDotMarker.remove(), r.remove(this._container), this._map = void 0;
          }, i.prototype._onSuccess = function (e) {
            if (this.options.trackUserLocation) switch (this._lastKnownPosition = e, this._watchState) {
              case "WAITING_ACTIVE":
              case "ACTIVE_LOCK":
              case "ACTIVE_ERROR":
                this._watchState = "ACTIVE_LOCK", this._geolocateButton.classList.remove("epgis-ctrl-geolocate-waiting"), this._geolocateButton.classList.remove("epgis-ctrl-geolocate-active-error"), this._geolocateButton.classList.add("epgis-ctrl-geolocate-active");
                break;
              case "BACKGROUND":
              case "BACKGROUND_ERROR":
                this._watchState = "BACKGROUND", this._geolocateButton.classList.remove("epgis-ctrl-geolocate-waiting"), this._geolocateButton.classList.remove("epgis-ctrl-geolocate-background-error"), this._geolocateButton.classList.add("epgis-ctrl-geolocate-background");
            }
            this.options.showUserLocation && "OFF" !== this._watchState && this._updateMarker(e), this.options.trackUserLocation && "ACTIVE_LOCK" !== this._watchState || this._updateCamera(e), this.options.showUserLocation && this._dotElement.classList.remove("epgis-user-location-dot-stale"), this.fire(new t.Event("geolocate", e)), this._finish();
          }, i.prototype._updateCamera = function (e) {
            var r = new t.LngLat(e.coords.longitude, e.coords.latitude),
              i = e.coords.accuracy,
              n = this._map.getBearing(),
              o = t.extend({
                bearing: n
              }, this.options.fitBoundsOptions);
            this._map.fitBounds(r.toBounds(i), o, {
              geolocateSource: !0
            });
          }, i.prototype._updateMarker = function (t) {
            t ? this._userLocationDotMarker.setLngLat([t.coords.longitude, t.coords.latitude]).addTo(this._map) : this._userLocationDotMarker.remove();
          }, i.prototype._onError = function (e) {
            if (this.options.trackUserLocation)
              if (1 === e.code) this._watchState = "OFF", this._geolocateButton.classList.remove("epgis-ctrl-geolocate-waiting"), this._geolocateButton.classList.remove("epgis-ctrl-geolocate-active"), this._geolocateButton.classList.remove("epgis-ctrl-geolocate-active-error"), this._geolocateButton.classList.remove("epgis-ctrl-geolocate-background"), this._geolocateButton.classList.remove("epgis-ctrl-geolocate-background-error"), void 0 !== this._geolocationWatchID && this._clearWatch();
              else switch (this._watchState) {
                case "WAITING_ACTIVE":
                  this._watchState = "ACTIVE_ERROR", this._geolocateButton.classList.remove("epgis-ctrl-geolocate-active"), this._geolocateButton.classList.add("epgis-ctrl-geolocate-active-error");
                  break;
                case "ACTIVE_LOCK":
                  this._watchState = "ACTIVE_ERROR", this._geolocateButton.classList.remove("epgis-ctrl-geolocate-active"), this._geolocateButton.classList.add("epgis-ctrl-geolocate-active-error"), this._geolocateButton.classList.add("epgis-ctrl-geolocate-waiting");
                  break;
                case "BACKGROUND":
                  this._watchState = "BACKGROUND_ERROR", this._geolocateButton.classList.remove("epgis-ctrl-geolocate-background"), this._geolocateButton.classList.add("epgis-ctrl-geolocate-background-error"), this._geolocateButton.classList.add("epgis-ctrl-geolocate-waiting");
              }
            "OFF" !== this._watchState && this.options.showUserLocation && this._dotElement.classList.add("epgis-user-location-dot-stale"), this.fire(new t.Event("error", e)), this._finish();
          }, i.prototype._finish = function () {
            this._timeoutId && clearTimeout(this._timeoutId), this._timeoutId = void 0;
          }, i.prototype._setupUI = function (e) {
            var i = this;
            !1 !== e ? (this._container.addEventListener("contextmenu", function (t) {
              return t.preventDefault()
            }), this._geolocateButton = r.create("button", "epgis-ctrl-icon epgis-ctrl-geolocate", this._container), this._geolocateButton.type = "button", this._geolocateButton.setAttribute("aria-label", "Geolocate"), this.options.trackUserLocation && (this._geolocateButton.setAttribute("aria-pressed", "false"), this._watchState = "OFF"), this.options.showUserLocation && (this._dotElement = r.create("div", "epgis-user-location-dot"), this._userLocationDotMarker = new un(this._dotElement), this.options.trackUserLocation && (this._watchState = "OFF")), this._geolocateButton.addEventListener("click", this.trigger.bind(this)), this._setup = !0, this.options.trackUserLocation && this._map.on("movestart", function (e) {
              e.geolocateSource || "ACTIVE_LOCK" !== i._watchState || (i._watchState = "BACKGROUND", i._geolocateButton.classList.add("epgis-ctrl-geolocate-background"), i._geolocateButton.classList.remove("epgis-ctrl-geolocate-active"), i.fire(new t.Event("trackuserlocationend")));
            })) : t.warnOnce("Geolocation support is not available, the GeolocateControl will not be visible.");
          }, i.prototype.trigger = function () {
            if (!this._setup) return t.warnOnce("Geolocate control triggered before added to a map"), !1;
            if (this.options.trackUserLocation) {
              switch (this._watchState) {
                case "OFF":
                  this._watchState = "WAITING_ACTIVE", this.fire(new t.Event("trackuserlocationstart"));
                  break;
                case "WAITING_ACTIVE":
                case "ACTIVE_LOCK":
                case "ACTIVE_ERROR":
                case "BACKGROUND_ERROR":
                  this._watchState = "OFF", this._geolocateButton.classList.remove("epgis-ctrl-geolocate-waiting"), this._geolocateButton.classList.remove("epgis-ctrl-geolocate-active"), this._geolocateButton.classList.remove("epgis-ctrl-geolocate-active-error"), this._geolocateButton.classList.remove("epgis-ctrl-geolocate-background"), this._geolocateButton.classList.remove("epgis-ctrl-geolocate-background-error"), this.fire(new t.Event("trackuserlocationend"));
                  break;
                case "BACKGROUND":
                  this._watchState = "ACTIVE_LOCK", this._geolocateButton.classList.remove("epgis-ctrl-geolocate-background"), this._lastKnownPosition && this._updateCamera(this._lastKnownPosition), this.fire(new t.Event("trackuserlocationstart"));
              }
              switch (this._watchState) {
                case "WAITING_ACTIVE":
                  this._geolocateButton.classList.add("epgis-ctrl-geolocate-waiting"), this._geolocateButton.classList.add("epgis-ctrl-geolocate-active");
                  break;
                case "ACTIVE_LOCK":
                  this._geolocateButton.classList.add("epgis-ctrl-geolocate-active");
                  break;
                case "ACTIVE_ERROR":
                  this._geolocateButton.classList.add("epgis-ctrl-geolocate-waiting"), this._geolocateButton.classList.add("epgis-ctrl-geolocate-active-error");
                  break;
                case "BACKGROUND":
                  this._geolocateButton.classList.add("epgis-ctrl-geolocate-background");
                  break;
                case "BACKGROUND_ERROR":
                  this._geolocateButton.classList.add("epgis-ctrl-geolocate-waiting"), this._geolocateButton.classList.add("epgis-ctrl-geolocate-background-error");
              }
              "OFF" === this._watchState && void 0 !== this._geolocationWatchID ? this._clearWatch() : void 0 === this._geolocationWatchID && (this._geolocateButton.classList.add("epgis-ctrl-geolocate-waiting"), this._geolocateButton.setAttribute("aria-pressed", "true"), this._geolocationWatchID = t.window.navigator.geolocation.watchPosition(this._onSuccess, this._onError, this.options.positionOptions));
            } else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess, this._onError, this.options.positionOptions), this._timeoutId = setTimeout(this._finish, 1e4);
            return !0
          }, i.prototype._clearWatch = function () {
            t.window.navigator.geolocation.clearWatch(this._geolocationWatchID), this._geolocationWatchID = void 0, this._geolocateButton.classList.remove("epgis-ctrl-geolocate-waiting"), this._geolocateButton.setAttribute("aria-pressed", "false"), this.options.showUserLocation && this._updateMarker(null);
          }, i
        }(t.Evented),
        ln = null,
        pn = (ln || (ln = function () {
          var t, e, r, i, n, o, s, a, u, c, h = h || function (t, e) {
            var r = Object.create || function () {
                function t() {}
                return function (e) {
                  var r;
                  return t.prototype = e, r = new t, t.prototype = null, r
                }
              }(),
              i = {},
              n = i.lib = {},
              o = n.Base = {
                extend: function (t) {
                  var e = r(this);
                  return t && e.mixIn(t), e.hasOwnProperty("init") && this.init !== e.init || (e.init = function () {
                    e.$super.init.apply(this, arguments);
                  }), e.init.prototype = e, e.$super = this, e
                },
                create: function () {
                  var t = this.extend();
                  return t.init.apply(t, arguments), t
                },
                init: function () {},
                mixIn: function (t) {
                  for (var e in t) t.hasOwnProperty(e) && (this[e] = t[e]);
                  t.hasOwnProperty("toString") && (this.toString = t.toString);
                },
                clone: function () {
                  return this.init.prototype.extend(this)
                }
              },
              s = n.WordArray = o.extend({
                init: function (t, e) {
                  t = this.words = t || [], this.sigBytes = null != e ? e : 4 * t.length;
                },
                toString: function (t) {
                  return (t || u).stringify(this)
                },
                concat: function (t) {
                  var e = this.words,
                    r = t.words,
                    i = this.sigBytes,
                    n = t.sigBytes;
                  if (this.clamp(), i % 4)
                    for (var o = 0; o < n; o++) {
                      var s = r[o >>> 2] >>> 24 - o % 4 * 8 & 255;
                      e[i + o >>> 2] |= s << 24 - (i + o) % 4 * 8;
                    } else
                      for (o = 0; o < n; o += 4) e[i + o >>> 2] = r[o >>> 2];
                  return this.sigBytes += n, this
                },
                clamp: function () {
                  var e = this.words,
                    r = this.sigBytes;
                  e[r >>> 2] &= 4294967295 << 32 - r % 4 * 8, e.length = t.ceil(r / 4);
                },
                clone: function () {
                  var t = o.clone.call(this);
                  return t.words = this.words.slice(0), t
                },
                random: function (e) {
                  for (var r, i = [], n = function (e) {
                      e = e;
                      var r = 987654321,
                        i = 4294967295;
                      return function () {
                        var n = ((r = 36969 * (65535 & r) + (r >> 16) & i) << 16) + (e = 18e3 * (65535 & e) + (e >> 16) & i) & i;
                        return n /= 4294967296, (n += .5) * (t.random() > .5 ? 1 : -1)
                      }
                    }, o = 0; o < e; o += 4) {
                    var a = n(4294967296 * (r || t.random()));
                    r = 987654071 * a(), i.push(4294967296 * a() | 0);
                  }
                  return new s.init(i, e)
                }
              }),
              a = i.enc = {},
              u = a.Hex = {
                stringify: function (t) {
                  for (var e = t.words, r = t.sigBytes, i = [], n = 0; n < r; n++) {
                    var o = e[n >>> 2] >>> 24 - n % 4 * 8 & 255;
                    i.push((o >>> 4).toString(16)), i.push((15 & o).toString(16));
                  }
                  return i.join("")
                },
                parse: function (t) {
                  for (var e = t.length, r = [], i = 0; i < e; i += 2) r[i >>> 3] |= parseInt(t.substr(i, 2), 16) << 24 - i % 8 * 4;
                  return new s.init(r, e / 2)
                }
              },
              c = a.Latin1 = {
                stringify: function (t) {
                  for (var e = t.words, r = t.sigBytes, i = [], n = 0; n < r; n++) {
                    var o = e[n >>> 2] >>> 24 - n % 4 * 8 & 255;
                    i.push(String.fromCharCode(o));
                  }
                  return i.join("")
                },
                parse: function (t) {
                  for (var e = t.length, r = [], i = 0; i < e; i++) r[i >>> 2] |= (255 & t.charCodeAt(i)) << 24 - i % 4 * 8;
                  return new s.init(r, e)
                }
              },
              h = a.Utf8 = {
                stringify: function (t) {
                  try {
                    return decodeURIComponent(escape(c.stringify(t)))
                  } catch (t) {
                    throw new Error("Malformed UTF-8 data")
                  }
                },
                parse: function (t) {
                  return c.parse(unescape(encodeURIComponent(t)))
                }
              },
              l = n.BufferedBlockAlgorithm = o.extend({
                reset: function () {
                  this._data = new s.init, this._nDataBytes = 0;
                },
                _append: function (t) {
                  "string" == typeof t && (t = h.parse(t)), this._data.concat(t), this._nDataBytes += t.sigBytes;
                },
                _process: function (e) {
                  var r = this._data,
                    i = r.words,
                    n = r.sigBytes,
                    o = this.blockSize,
                    a = n / (4 * o),
                    u = (a = e ? t.ceil(a) : t.max((0 | a) - this._minBufferSize, 0)) * o,
                    c = t.min(4 * u, n);
                  if (u) {
                    for (var h = 0; h < u; h += o) this._doProcessBlock(i, h);
                    var l = i.splice(0, u);
                    r.sigBytes -= c;
                  }
                  return new s.init(l, c)
                },
                clone: function () {
                  var t = o.clone.call(this);
                  return t._data = this._data.clone(), t
                },
                _minBufferSize: 0
              }),
              p = (n.Hasher = l.extend({
                cfg: o.extend(),
                init: function (t) {
                  this.cfg = this.cfg.extend(t), this.reset();
                },
                reset: function () {
                  l.reset.call(this), this._doReset();
                },
                update: function (t) {
                  return this._append(t), this._process(), this
                },
                finalize: function (t) {
                  return t && this._append(t), this._doFinalize()
                },
                blockSize: 16,
                _createHelper: function (t) {
                  return function (e, r) {
                    return new t.init(r).finalize(e)
                  }
                },
                _createHmacHelper: function (t) {
                  return function (e, r) {
                    return new p.HMAC.init(t, r).finalize(e)
                  }
                }
              }), i.algo = {});
            return i
          }(Math);
          return function () {
              var t = h,
                e = t.lib.WordArray;
              t.enc.Base64 = {
                stringify: function (t) {
                  var e = t.words,
                    r = t.sigBytes,
                    i = this._map;
                  t.clamp();
                  for (var n = [], o = 0; o < r; o += 3)
                    for (var s = (e[o >>> 2] >>> 24 - o % 4 * 8 & 255) << 16 | (e[o + 1 >>> 2] >>> 24 - (o + 1) % 4 * 8 & 255) << 8 | e[o + 2 >>> 2] >>> 24 - (o + 2) % 4 * 8 & 255, a = 0; a < 4 && o + .75 * a < r; a++) n.push(i.charAt(s >>> 6 * (3 - a) & 63));
                  var u = i.charAt(64);
                  if (u)
                    for (; n.length % 4;) n.push(u);
                  return n.join("")
                },
                parse: function (t) {
                  var r = t.length,
                    i = this._map,
                    n = this._reverseMap;
                  if (!n) {
                    n = this._reverseMap = [];
                    for (var o = 0; o < i.length; o++) n[i.charCodeAt(o)] = o;
                  }
                  var s = i.charAt(64);
                  if (s) {
                    var a = t.indexOf(s); - 1 !== a && (r = a);
                  }
                  return function (t, r, i) {
                    for (var n = [], o = 0, s = 0; s < r; s++)
                      if (s % 4) {
                        var a = i[t.charCodeAt(s - 1)] << s % 4 * 2,
                          u = i[t.charCodeAt(s)] >>> 6 - s % 4 * 2;
                        n[o >>> 2] |= (a | u) << 24 - o % 4 * 8, o++;
                      } return e.create(n, o)
                  }(t, r, n)
                },
                _map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="
              };
            }(),
            function (t) {
              var e = h,
                r = e.lib,
                i = r.WordArray,
                n = r.Hasher,
                o = e.algo,
                s = [];
              ! function () {
                for (var e = 0; e < 64; e++) s[e] = 4294967296 * t.abs(t.sin(e + 1)) | 0;
              }();
              var a = o.MD5 = n.extend({
                _doReset: function () {
                  this._hash = new i.init([1732584193, 4023233417, 2562383102, 271733878]);
                },
                _doProcessBlock: function (t, e) {
                  for (var r = 0; r < 16; r++) {
                    var i = e + r,
                      n = t[i];
                    t[i] = 16711935 & (n << 8 | n >>> 24) | 4278255360 & (n << 24 | n >>> 8);
                  }
                  var o = this._hash.words,
                    a = t[e + 0],
                    h = t[e + 1],
                    f = t[e + 2],
                    d = t[e + 3],
                    g = t[e + 4],
                    _ = t[e + 5],
                    y = t[e + 6],
                    m = t[e + 7],
                    v = t[e + 8],
                    x = t[e + 9],
                    w = t[e + 10],
                    b = t[e + 11],
                    E = t[e + 12],
                    L = t[e + 13],
                    S = t[e + 14],
                    C = t[e + 15],
                    I = o[0],
                    M = o[1],
                    T = o[2],
                    P = o[3];
                  I = u(I, M, T, P, a, 7, s[0]), P = u(P, I, M, T, h, 12, s[1]), T = u(T, P, I, M, f, 17, s[2]), M = u(M, T, P, I, d, 22, s[3]), I = u(I, M, T, P, g, 7, s[4]), P = u(P, I, M, T, _, 12, s[5]), T = u(T, P, I, M, y, 17, s[6]), M = u(M, T, P, I, m, 22, s[7]), I = u(I, M, T, P, v, 7, s[8]), P = u(P, I, M, T, x, 12, s[9]), T = u(T, P, I, M, w, 17, s[10]), M = u(M, T, P, I, b, 22, s[11]), I = u(I, M, T, P, E, 7, s[12]), P = u(P, I, M, T, L, 12, s[13]), T = u(T, P, I, M, S, 17, s[14]), I = c(I, M = u(M, T, P, I, C, 22, s[15]), T, P, h, 5, s[16]), P = c(P, I, M, T, y, 9, s[17]), T = c(T, P, I, M, b, 14, s[18]), M = c(M, T, P, I, a, 20, s[19]), I = c(I, M, T, P, _, 5, s[20]), P = c(P, I, M, T, w, 9, s[21]), T = c(T, P, I, M, C, 14, s[22]), M = c(M, T, P, I, g, 20, s[23]), I = c(I, M, T, P, x, 5, s[24]), P = c(P, I, M, T, S, 9, s[25]), T = c(T, P, I, M, d, 14, s[26]), M = c(M, T, P, I, v, 20, s[27]), I = c(I, M, T, P, L, 5, s[28]), P = c(P, I, M, T, f, 9, s[29]), T = c(T, P, I, M, m, 14, s[30]), I = l(I, M = c(M, T, P, I, E, 20, s[31]), T, P, _, 4, s[32]), P = l(P, I, M, T, v, 11, s[33]), T = l(T, P, I, M, b, 16, s[34]), M = l(M, T, P, I, S, 23, s[35]), I = l(I, M, T, P, h, 4, s[36]), P = l(P, I, M, T, g, 11, s[37]), T = l(T, P, I, M, m, 16, s[38]), M = l(M, T, P, I, w, 23, s[39]), I = l(I, M, T, P, L, 4, s[40]), P = l(P, I, M, T, a, 11, s[41]), T = l(T, P, I, M, d, 16, s[42]), M = l(M, T, P, I, y, 23, s[43]), I = l(I, M, T, P, x, 4, s[44]), P = l(P, I, M, T, E, 11, s[45]), T = l(T, P, I, M, C, 16, s[46]), I = p(I, M = l(M, T, P, I, f, 23, s[47]), T, P, a, 6, s[48]), P = p(P, I, M, T, m, 10, s[49]), T = p(T, P, I, M, S, 15, s[50]), M = p(M, T, P, I, _, 21, s[51]), I = p(I, M, T, P, E, 6, s[52]), P = p(P, I, M, T, d, 10, s[53]), T = p(T, P, I, M, w, 15, s[54]), M = p(M, T, P, I, h, 21, s[55]), I = p(I, M, T, P, v, 6, s[56]), P = p(P, I, M, T, C, 10, s[57]), T = p(T, P, I, M, y, 15, s[58]), M = p(M, T, P, I, L, 21, s[59]), I = p(I, M, T, P, g, 6, s[60]), P = p(P, I, M, T, b, 10, s[61]), T = p(T, P, I, M, f, 15, s[62]), M = p(M, T, P, I, x, 21, s[63]), o[0] = o[0] + I | 0, o[1] = o[1] + M | 0, o[2] = o[2] + T | 0, o[3] = o[3] + P | 0;
                },
                _doFinalize: function () {
                  var e = this._data,
                    r = e.words,
                    i = 8 * this._nDataBytes,
                    n = 8 * e.sigBytes;
                  r[n >>> 5] |= 128 << 24 - n % 32;
                  var o = t.floor(i / 4294967296),
                    s = i;
                  r[15 + (n + 64 >>> 9 << 4)] = 16711935 & (o << 8 | o >>> 24) | 4278255360 & (o << 24 | o >>> 8), r[14 + (n + 64 >>> 9 << 4)] = 16711935 & (s << 8 | s >>> 24) | 4278255360 & (s << 24 | s >>> 8), e.sigBytes = 4 * (r.length + 1), this._process();
                  for (var a = this._hash, u = a.words, c = 0; c < 4; c++) {
                    var h = u[c];
                    u[c] = 16711935 & (h << 8 | h >>> 24) | 4278255360 & (h << 24 | h >>> 8);
                  }
                  return a
                },
                clone: function () {
                  var t = n.clone.call(this);
                  return t._hash = this._hash.clone(), t
                }
              });
  
              function u(t, e, r, i, n, o, s) {
                var a = t + (e & r | ~e & i) + n + s;
                return (a << o | a >>> 32 - o) + e
              }
  
              function c(t, e, r, i, n, o, s) {
                var a = t + (e & i | r & ~i) + n + s;
                return (a << o | a >>> 32 - o) + e
              }
  
              function l(t, e, r, i, n, o, s) {
                var a = t + (e ^ r ^ i) + n + s;
                return (a << o | a >>> 32 - o) + e
              }
  
              function p(t, e, r, i, n, o, s) {
                var a = t + (r ^ (e | ~i)) + n + s;
                return (a << o | a >>> 32 - o) + e
              }
              e.MD5 = n._createHelper(a), e.HmacMD5 = n._createHmacHelper(a);
            }(Math), e = (t = h).lib, r = e.WordArray, i = e.Hasher, n = t.algo, o = [], s = n.SHA1 = i.extend({
              _doReset: function () {
                this._hash = new r.init([1732584193, 4023233417, 2562383102, 271733878, 3285377520]);
              },
              _doProcessBlock: function (t, e) {
                for (var r = this._hash.words, i = r[0], n = r[1], s = r[2], a = r[3], u = r[4], c = 0; c < 80; c++) {
                  if (c < 16) o[c] = 0 | t[e + c];
                  else {
                    var h = o[c - 3] ^ o[c - 8] ^ o[c - 14] ^ o[c - 16];
                    o[c] = h << 1 | h >>> 31;
                  }
                  var l = (i << 5 | i >>> 27) + u + o[c];
                  l += c < 20 ? 1518500249 + (n & s | ~n & a) : c < 40 ? 1859775393 + (n ^ s ^ a) : c < 60 ? (n & s | n & a | s & a) - 1894007588 : (n ^ s ^ a) - 899497514, u = a, a = s, s = n << 30 | n >>> 2, n = i, i = l;
                }
                r[0] = r[0] + i | 0, r[1] = r[1] + n | 0, r[2] = r[2] + s | 0, r[3] = r[3] + a | 0, r[4] = r[4] + u | 0;
              },
              _doFinalize: function () {
                var t = this._data,
                  e = t.words,
                  r = 8 * this._nDataBytes,
                  i = 8 * t.sigBytes;
                return e[i >>> 5] |= 128 << 24 - i % 32, e[14 + (i + 64 >>> 9 << 4)] = Math.floor(r / 4294967296), e[15 + (i + 64 >>> 9 << 4)] = r, t.sigBytes = 4 * e.length, this._process(), this._hash
              },
              clone: function () {
                var t = i.clone.call(this);
                return t._hash = this._hash.clone(), t
              }
            }), t.SHA1 = i._createHelper(s), t.HmacSHA1 = i._createHmacHelper(s),
            function (t) {
              var e = h,
                r = e.lib,
                i = r.WordArray,
                n = r.Hasher,
                o = e.algo,
                s = [],
                a = [];
              ! function () {
                function e(e) {
                  for (var r = t.sqrt(e), i = 2; i <= r; i++)
                    if (!(e % i)) return !1;
                  return !0
                }
  
                function r(t) {
                  return 4294967296 * (t - (0 | t)) | 0
                }
                for (var i = 2, n = 0; n < 64;) e(i) && (n < 8 && (s[n] = r(t.pow(i, .5))), a[n] = r(t.pow(i, 1 / 3)), n++), i++;
              }();
              var u = [],
                c = o.SHA256 = n.extend({
                  _doReset: function () {
                    this._hash = new i.init(s.slice(0));
                  },
                  _doProcessBlock: function (t, e) {
                    for (var r = this._hash.words, i = r[0], n = r[1], o = r[2], s = r[3], c = r[4], h = r[5], l = r[6], p = r[7], f = 0; f < 64; f++) {
                      if (f < 16) u[f] = 0 | t[e + f];
                      else {
                        var d = u[f - 15],
                          g = (d << 25 | d >>> 7) ^ (d << 14 | d >>> 18) ^ d >>> 3,
                          _ = u[f - 2],
                          y = (_ << 15 | _ >>> 17) ^ (_ << 13 | _ >>> 19) ^ _ >>> 10;
                        u[f] = g + u[f - 7] + y + u[f - 16];
                      }
                      var m = i & n ^ i & o ^ n & o,
                        v = (i << 30 | i >>> 2) ^ (i << 19 | i >>> 13) ^ (i << 10 | i >>> 22),
                        x = p + ((c << 26 | c >>> 6) ^ (c << 21 | c >>> 11) ^ (c << 7 | c >>> 25)) + (c & h ^ ~c & l) + a[f] + u[f];
                      p = l, l = h, h = c, c = s + x | 0, s = o, o = n, n = i, i = x + (v + m) | 0;
                    }
                    r[0] = r[0] + i | 0, r[1] = r[1] + n | 0, r[2] = r[2] + o | 0, r[3] = r[3] + s | 0, r[4] = r[4] + c | 0, r[5] = r[5] + h | 0, r[6] = r[6] + l | 0, r[7] = r[7] + p | 0;
                  },
                  _doFinalize: function () {
                    var e = this._data,
                      r = e.words,
                      i = 8 * this._nDataBytes,
                      n = 8 * e.sigBytes;
                    return r[n >>> 5] |= 128 << 24 - n % 32, r[14 + (n + 64 >>> 9 << 4)] = t.floor(i / 4294967296), r[15 + (n + 64 >>> 9 << 4)] = i, e.sigBytes = 4 * r.length, this._process(), this._hash
                  },
                  clone: function () {
                    var t = n.clone.call(this);
                    return t._hash = this._hash.clone(), t
                  }
                });
              e.SHA256 = n._createHelper(c), e.HmacSHA256 = n._createHmacHelper(c);
            }(Math),
            function () {
              var t = h,
                e = t.lib.WordArray,
                r = t.enc;
              r.Utf16 = r.Utf16BE = {
                stringify: function (t) {
                  for (var e = t.words, r = t.sigBytes, i = [], n = 0; n < r; n += 2) {
                    var o = e[n >>> 2] >>> 16 - n % 4 * 8 & 65535;
                    i.push(String.fromCharCode(o));
                  }
                  return i.join("")
                },
                parse: function (t) {
                  for (var r = t.length, i = [], n = 0; n < r; n++) i[n >>> 1] |= t.charCodeAt(n) << 16 - n % 2 * 16;
                  return e.create(i, 2 * r)
                }
              };
  
              function i(t) {
                return t << 8 & 4278255360 | t >>> 8 & 16711935
              }
              r.Utf16LE = {
                stringify: function (t) {
                  for (var e = t.words, r = t.sigBytes, n = [], o = 0; o < r; o += 2) {
                    var s = i(e[o >>> 2] >>> 16 - o % 4 * 8 & 65535);
                    n.push(String.fromCharCode(s));
                  }
                  return n.join("")
                },
                parse: function (t) {
                  for (var r = t.length, n = [], o = 0; o < r; o++) n[o >>> 1] |= i(t.charCodeAt(o) << 16 - o % 2 * 16);
                  return e.create(n, 2 * r)
                }
              };
            }(),
            function () {
              if ("function" == typeof ArrayBuffer) {
                var t = h.lib.WordArray,
                  e = t.init;
                (t.init = function (t) {
                  if (t instanceof ArrayBuffer && (t = new Uint8Array(t)), (t instanceof Int8Array || "undefined" != typeof Uint8ClampedArray && t instanceof Uint8ClampedArray || t instanceof Int16Array || t instanceof Uint16Array || t instanceof Int32Array || t instanceof Uint32Array || t instanceof Float32Array || t instanceof Float64Array) && (t = new Uint8Array(t.buffer, t.byteOffset, t.byteLength)), t instanceof Uint8Array) {
                    for (var r = t.byteLength, i = [], n = 0; n < r; n++) i[n >>> 2] |= t[n] << 24 - n % 4 * 8;
                    e.call(this, i, r);
                  } else e.apply(this, arguments);
                }).prototype = t;
              }
            }(),
            function (t) {
              var e = h,
                r = e.lib,
                i = r.WordArray,
                n = r.Hasher,
                o = e.algo,
                s = i.create([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8, 3, 10, 14, 4, 9, 15, 8, 1, 2, 7, 0, 6, 13, 11, 5, 12, 1, 9, 11, 10, 0, 8, 12, 4, 13, 3, 7, 15, 14, 5, 6, 2, 4, 0, 5, 9, 7, 12, 2, 10, 14, 1, 3, 8, 11, 6, 15, 13]),
                a = i.create([5, 14, 7, 0, 9, 2, 11, 4, 13, 6, 15, 8, 1, 10, 3, 12, 6, 11, 3, 7, 0, 13, 5, 10, 14, 15, 8, 12, 4, 9, 1, 2, 15, 5, 1, 3, 7, 14, 6, 9, 11, 8, 12, 2, 10, 0, 4, 13, 8, 6, 4, 1, 3, 11, 15, 0, 5, 12, 2, 13, 9, 7, 10, 14, 12, 15, 10, 4, 1, 5, 8, 7, 6, 2, 13, 14, 0, 3, 9, 11]),
                u = i.create([11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8, 7, 6, 8, 13, 11, 9, 7, 15, 7, 12, 15, 9, 11, 7, 13, 12, 11, 13, 6, 7, 14, 9, 13, 15, 14, 8, 13, 6, 5, 12, 7, 5, 11, 12, 14, 15, 14, 15, 9, 8, 9, 14, 5, 6, 8, 6, 5, 12, 9, 15, 5, 11, 6, 8, 13, 12, 5, 12, 13, 14, 11, 8, 5, 6]),
                c = i.create([8, 9, 9, 11, 13, 15, 15, 5, 7, 7, 8, 11, 14, 14, 12, 6, 9, 13, 15, 7, 12, 8, 9, 11, 7, 7, 12, 7, 6, 15, 13, 11, 9, 7, 15, 11, 8, 6, 6, 14, 12, 13, 5, 14, 13, 13, 7, 5, 15, 5, 8, 11, 14, 14, 6, 14, 6, 9, 12, 9, 12, 5, 15, 8, 8, 5, 12, 9, 12, 5, 14, 6, 8, 13, 6, 5, 15, 13, 11, 11]),
                l = i.create([0, 1518500249, 1859775393, 2400959708, 2840853838]),
                p = i.create([1352829926, 1548603684, 1836072691, 2053994217, 0]),
                f = o.RIPEMD160 = n.extend({
                  _doReset: function () {
                    this._hash = i.create([1732584193, 4023233417, 2562383102, 271733878, 3285377520]);
                  },
                  _doProcessBlock: function (t, e) {
                    for (var r = 0; r < 16; r++) {
                      var i = e + r,
                        n = t[i];
                      t[i] = 16711935 & (n << 8 | n >>> 24) | 4278255360 & (n << 24 | n >>> 8);
                    }
                    var o, h, f, x, w, b, E, L, S, C, I, M = this._hash.words,
                      T = l.words,
                      P = p.words,
                      D = s.words,
                      N = a.words,
                      R = u.words,
                      O = c.words;
                    b = o = M[0], E = h = M[1], L = f = M[2], S = x = M[3], C = w = M[4];
                    for (r = 0; r < 80; r += 1) I = o + t[e + D[r]] | 0, I += r < 16 ? d(h, f, x) + T[0] : r < 32 ? g(h, f, x) + T[1] : r < 48 ? _(h, f, x) + T[2] : r < 64 ? y(h, f, x) + T[3] : m(h, f, x) + T[4], I = (I = v(I |= 0, R[r])) + w | 0, o = w, w = x, x = v(f, 10), f = h, h = I, I = b + t[e + N[r]] | 0, I += r < 16 ? m(E, L, S) + P[0] : r < 32 ? y(E, L, S) + P[1] : r < 48 ? _(E, L, S) + P[2] : r < 64 ? g(E, L, S) + P[3] : d(E, L, S) + P[4], I = (I = v(I |= 0, O[r])) + C | 0, b = C, C = S, S = v(L, 10), L = E, E = I;
                    I = M[1] + f + S | 0, M[1] = M[2] + x + C | 0, M[2] = M[3] + w + b | 0, M[3] = M[4] + o + E | 0, M[4] = M[0] + h + L | 0, M[0] = I;
                  },
                  _doFinalize: function () {
                    var t = this._data,
                      e = t.words,
                      r = 8 * this._nDataBytes,
                      i = 8 * t.sigBytes;
                    e[i >>> 5] |= 128 << 24 - i % 32, e[14 + (i + 64 >>> 9 << 4)] = 16711935 & (r << 8 | r >>> 24) | 4278255360 & (r << 24 | r >>> 8), t.sigBytes = 4 * (e.length + 1), this._process();
                    for (var n = this._hash, o = n.words, s = 0; s < 5; s++) {
                      var a = o[s];
                      o[s] = 16711935 & (a << 8 | a >>> 24) | 4278255360 & (a << 24 | a >>> 8);
                    }
                    return n
                  },
                  clone: function () {
                    var t = n.clone.call(this);
                    return t._hash = this._hash.clone(), t
                  }
                });
  
              function d(t, e, r) {
                return t ^ e ^ r
              }
  
              function g(t, e, r) {
                return t & e | ~t & r
              }
  
              function _(t, e, r) {
                return (t | ~e) ^ r
              }
  
              function y(t, e, r) {
                return t & r | e & ~r
              }
  
              function m(t, e, r) {
                return t ^ (e | ~r)
              }
  
              function v(t, e) {
                return t << e | t >>> 32 - e
              }
              e.RIPEMD160 = n._createHelper(f), e.HmacRIPEMD160 = n._createHmacHelper(f);
            }(),
            function () {
              var t = h,
                e = t.lib.Base,
                r = t.enc.Utf8;
              t.algo.HMAC = e.extend({
                init: function (t, e) {
                  t = this._hasher = new t.init, "string" == typeof e && (e = r.parse(e));
                  var i = t.blockSize,
                    n = 4 * i;
                  e.sigBytes > n && (e = t.finalize(e)), e.clamp();
                  for (var o = this._oKey = e.clone(), s = this._iKey = e.clone(), a = o.words, u = s.words, c = 0; c < i; c++) a[c] ^= 1549556828, u[c] ^= 909522486;
                  o.sigBytes = s.sigBytes = n, this.reset();
                },
                reset: function () {
                  var t = this._hasher;
                  t.reset(), t.update(this._iKey);
                },
                update: function (t) {
                  return this._hasher.update(t), this
                },
                finalize: function (t) {
                  var e = this._hasher,
                    r = e.finalize(t);
                  return e.reset(), e.finalize(this._oKey.clone().concat(r))
                }
              });
            }(),
            function () {
              var t = h,
                e = t.lib,
                r = e.Base,
                i = e.WordArray,
                n = t.algo,
                o = n.SHA1,
                s = n.HMAC,
                a = n.PBKDF2 = r.extend({
                  cfg: r.extend({
                    keySize: 4,
                    hasher: o,
                    iterations: 1
                  }),
                  init: function (t) {
                    this.cfg = this.cfg.extend(t);
                  },
                  compute: function (t, e) {
                    for (var r = this.cfg, n = s.create(r.hasher, t), o = i.create(), a = i.create([1]), u = o.words, c = a.words, h = r.keySize, l = r.iterations; u.length < h;) {
                      var p = n.update(e).finalize(a);
                      n.reset();
                      for (var f = p.words, d = f.length, g = p, _ = 1; _ < l; _++) {
                        g = n.finalize(g), n.reset();
                        for (var y = g.words, m = 0; m < d; m++) f[m] ^= y[m];
                      }
                      o.concat(p), c[0]++;
                    }
                    return o.sigBytes = 4 * h, o
                  }
                });
              t.PBKDF2 = function (t, e, r) {
                return a.create(r).compute(t, e)
              };
            }(),
            function () {
              var t = h,
                e = t.lib,
                r = e.Base,
                i = e.WordArray,
                n = t.algo,
                o = n.MD5,
                s = n.EvpKDF = r.extend({
                  cfg: r.extend({
                    keySize: 4,
                    hasher: o,
                    iterations: 1
                  }),
                  init: function (t) {
                    this.cfg = this.cfg.extend(t);
                  },
                  compute: function (t, e) {
                    for (var r = this.cfg, n = r.hasher.create(), o = i.create(), s = o.words, a = r.keySize, u = r.iterations; s.length < a;) {
                      c && n.update(c);
                      var c = n.update(t).finalize(e);
                      n.reset();
                      for (var h = 1; h < u; h++) c = n.finalize(c), n.reset();
                      o.concat(c);
                    }
                    return o.sigBytes = 4 * a, o
                  }
                });
              t.EvpKDF = function (t, e, r) {
                return s.create(r).compute(t, e)
              };
            }(),
            function () {
              var t = h,
                e = t.lib.WordArray,
                r = t.algo,
                i = r.SHA256,
                n = r.SHA224 = i.extend({
                  _doReset: function () {
                    this._hash = new e.init([3238371032, 914150663, 812702999, 4144912697, 4290775857, 1750603025, 1694076839, 3204075428]);
                  },
                  _doFinalize: function () {
                    var t = i._doFinalize.call(this);
                    return t.sigBytes -= 4, t
                  }
                });
              t.SHA224 = i._createHelper(n), t.HmacSHA224 = i._createHmacHelper(n);
            }(),
            function (t) {
              var e = h,
                r = e.lib,
                i = r.Base,
                n = r.WordArray,
                o = e.x64 = {};
              o.Word = i.extend({
                init: function (t, e) {
                  this.high = t, this.low = e;
                }
              }), o.WordArray = i.extend({
                init: function (t, e) {
                  t = this.words = t || [], this.sigBytes = null != e ? e : 8 * t.length;
                },
                toX32: function () {
                  for (var t = this.words, e = t.length, r = [], i = 0; i < e; i++) {
                    var o = t[i];
                    r.push(o.high), r.push(o.low);
                  }
                  return n.create(r, this.sigBytes)
                },
                clone: function () {
                  for (var t = i.clone.call(this), e = t.words = this.words.slice(0), r = e.length, n = 0; n < r; n++) e[n] = e[n].clone();
                  return t
                }
              });
            }(),
            function (t) {
              var e = h,
                r = e.lib,
                i = r.WordArray,
                n = r.Hasher,
                o = e.x64.Word,
                s = e.algo,
                a = [],
                u = [],
                c = [];
              ! function () {
                for (var t = 1, e = 0, r = 0; r < 24; r++) {
                  a[t + 5 * e] = (r + 1) * (r + 2) / 2 % 64;
                  var i = (2 * t + 3 * e) % 5;
                  t = e % 5, e = i;
                }
                for (t = 0; t < 5; t++)
                  for (e = 0; e < 5; e++) u[t + 5 * e] = e + (2 * t + 3 * e) % 5 * 5;
                for (var n = 1, s = 0; s < 24; s++) {
                  for (var h = 0, l = 0, p = 0; p < 7; p++) {
                    if (1 & n) {
                      var f = (1 << p) - 1;
                      f < 32 ? l ^= 1 << f : h ^= 1 << f - 32;
                    }
                    128 & n ? n = n << 1 ^ 113 : n <<= 1;
                  }
                  c[s] = o.create(h, l);
                }
              }();
              var l = [];
              ! function () {
                for (var t = 0; t < 25; t++) l[t] = o.create();
              }();
              var p = s.SHA3 = n.extend({
                cfg: n.cfg.extend({
                  outputLength: 512
                }),
                _doReset: function () {
                  for (var t = this._state = [], e = 0; e < 25; e++) t[e] = new o.init;
                  this.blockSize = (1600 - 2 * this.cfg.outputLength) / 32;
                },
                _doProcessBlock: function (t, e) {
                  for (var r = this._state, i = this.blockSize / 2, n = 0; n < i; n++) {
                    var o = t[e + 2 * n],
                      s = t[e + 2 * n + 1];
                    o = 16711935 & (o << 8 | o >>> 24) | 4278255360 & (o << 24 | o >>> 8), s = 16711935 & (s << 8 | s >>> 24) | 4278255360 & (s << 24 | s >>> 8), (M = r[n]).high ^= s, M.low ^= o;
                  }
                  for (var h = 0; h < 24; h++) {
                    for (var p = 0; p < 5; p++) {
                      for (var f = 0, d = 0, g = 0; g < 5; g++) {
                        f ^= (M = r[p + 5 * g]).high, d ^= M.low;
                      }
                      var _ = l[p];
                      _.high = f, _.low = d;
                    }
                    for (p = 0; p < 5; p++) {
                      var y = l[(p + 4) % 5],
                        m = l[(p + 1) % 5],
                        v = m.high,
                        x = m.low;
                      for (f = y.high ^ (v << 1 | x >>> 31), d = y.low ^ (x << 1 | v >>> 31), g = 0; g < 5; g++) {
                        (M = r[p + 5 * g]).high ^= f, M.low ^= d;
                      }
                    }
                    for (var w = 1; w < 25; w++) {
                      var b = (M = r[w]).high,
                        E = M.low,
                        L = a[w];
                      if (L < 32) f = b << L | E >>> 32 - L, d = E << L | b >>> 32 - L;
                      else f = E << L - 32 | b >>> 64 - L, d = b << L - 32 | E >>> 64 - L;
                      var S = l[u[w]];
                      S.high = f, S.low = d;
                    }
                    var C = l[0],
                      I = r[0];
                    C.high = I.high, C.low = I.low;
                    for (p = 0; p < 5; p++)
                      for (g = 0; g < 5; g++) {
                        var M = r[w = p + 5 * g],
                          T = l[w],
                          P = l[(p + 1) % 5 + 5 * g],
                          D = l[(p + 2) % 5 + 5 * g];
                        M.high = T.high ^ ~P.high & D.high, M.low = T.low ^ ~P.low & D.low;
                      }
                    M = r[0];
                    var N = c[h];
                    M.high ^= N.high, M.low ^= N.low;
                  }
                },
                _doFinalize: function () {
                  var e = this._data,
                    r = e.words,
                    n = (this._nDataBytes, 8 * e.sigBytes),
                    o = 32 * this.blockSize;
                  r[n >>> 5] |= 1 << 24 - n % 32, r[(t.ceil((n + 1) / o) * o >>> 5) - 1] |= 128, e.sigBytes = 4 * r.length, this._process();
                  for (var s = this._state, a = this.cfg.outputLength / 8, u = a / 8, c = [], h = 0; h < u; h++) {
                    var l = s[h],
                      p = l.high,
                      f = l.low;
                    p = 16711935 & (p << 8 | p >>> 24) | 4278255360 & (p << 24 | p >>> 8), f = 16711935 & (f << 8 | f >>> 24) | 4278255360 & (f << 24 | f >>> 8), c.push(f), c.push(p);
                  }
                  return new i.init(c, a)
                },
                clone: function () {
                  for (var t = n.clone.call(this), e = t._state = this._state.slice(0), r = 0; r < 25; r++) e[r] = e[r].clone();
                  return t
                }
              });
              e.SHA3 = n._createHelper(p), e.HmacSHA3 = n._createHmacHelper(p);
            }(Math),
            function () {
              var t = h,
                e = t.lib.Hasher,
                r = t.x64,
                i = r.Word,
                n = r.WordArray,
                o = t.algo;
  
              function s() {
                return i.create.apply(i, arguments)
              }
              var a = [s(1116352408, 3609767458), s(1899447441, 602891725), s(3049323471, 3964484399), s(3921009573, 2173295548), s(961987163, 4081628472), s(1508970993, 3053834265), s(2453635748, 2937671579), s(2870763221, 3664609560), s(3624381080, 2734883394), s(310598401, 1164996542), s(607225278, 1323610764), s(1426881987, 3590304994), s(1925078388, 4068182383), s(2162078206, 991336113), s(2614888103, 633803317), s(3248222580, 3479774868), s(3835390401, 2666613458), s(4022224774, 944711139), s(264347078, 2341262773), s(604807628, 2007800933), s(770255983, 1495990901), s(1249150122, 1856431235), s(1555081692, 3175218132), s(1996064986, 2198950837), s(2554220882, 3999719339), s(2821834349, 766784016), s(2952996808, 2566594879), s(3210313671, 3203337956), s(3336571891, 1034457026), s(3584528711, 2466948901), s(113926993, 3758326383), s(338241895, 168717936), s(666307205, 1188179964), s(773529912, 1546045734), s(1294757372, 1522805485), s(1396182291, 2643833823), s(1695183700, 2343527390), s(1986661051, 1014477480), s(2177026350, 1206759142), s(2456956037, 344077627), s(2730485921, 1290863460), s(2820302411, 3158454273), s(3259730800, 3505952657), s(3345764771, 106217008), s(3516065817, 3606008344), s(3600352804, 1432725776), s(4094571909, 1467031594), s(275423344, 851169720), s(430227734, 3100823752), s(506948616, 1363258195), s(659060556, 3750685593), s(883997877, 3785050280), s(958139571, 3318307427), s(1322822218, 3812723403), s(1537002063, 2003034995), s(1747873779, 3602036899), s(1955562222, 1575990012), s(2024104815, 1125592928), s(2227730452, 2716904306), s(2361852424, 442776044), s(2428436474, 593698344), s(2756734187, 3733110249), s(3204031479, 2999351573), s(3329325298, 3815920427), s(3391569614, 3928383900), s(3515267271, 566280711), s(3940187606, 3454069534), s(4118630271, 4000239992), s(116418474, 1914138554), s(174292421, 2731055270), s(289380356, 3203993006), s(460393269, 320620315), s(685471733, 587496836), s(852142971, 1086792851), s(1017036298, 365543100), s(1126000580, 2618297676), s(1288033470, 3409855158), s(1501505948, 4234509866), s(1607167915, 987167468), s(1816402316, 1246189591)],
                u = [];
              ! function () {
                for (var t = 0; t < 80; t++) u[t] = s();
              }();
              var c = o.SHA512 = e.extend({
                _doReset: function () {
                  this._hash = new n.init([new i.init(1779033703, 4089235720), new i.init(3144134277, 2227873595), new i.init(1013904242, 4271175723), new i.init(2773480762, 1595750129), new i.init(1359893119, 2917565137), new i.init(2600822924, 725511199), new i.init(528734635, 4215389547), new i.init(1541459225, 327033209)]);
                },
                _doProcessBlock: function (t, e) {
                  for (var r = this._hash.words, i = r[0], n = r[1], o = r[2], s = r[3], c = r[4], h = r[5], l = r[6], p = r[7], f = i.high, d = i.low, g = n.high, _ = n.low, y = o.high, m = o.low, v = s.high, x = s.low, w = c.high, b = c.low, E = h.high, L = h.low, S = l.high, C = l.low, I = p.high, M = p.low, T = f, P = d, D = g, N = _, R = y, O = m, A = v, F = x, k = w, B = b, z = E, V = L, U = S, q = C, j = I, G = M, X = 0; X < 80; X++) {
                    var Z = u[X];
                    if (X < 16) var Y = Z.high = 0 | t[e + 2 * X],
                      W = Z.low = 0 | t[e + 2 * X + 1];
                    else {
                      var H = u[X - 15],
                        K = H.high,
                        J = H.low,
                        Q = (K >>> 1 | J << 31) ^ (K >>> 8 | J << 24) ^ K >>> 7,
                        $ = (J >>> 1 | K << 31) ^ (J >>> 8 | K << 24) ^ (J >>> 7 | K << 25),
                        tt = u[X - 2],
                        et = tt.high,
                        rt = tt.low,
                        it = (et >>> 19 | rt << 13) ^ (et << 3 | rt >>> 29) ^ et >>> 6,
                        nt = (rt >>> 19 | et << 13) ^ (rt << 3 | et >>> 29) ^ (rt >>> 6 | et << 26),
                        ot = u[X - 7],
                        st = ot.high,
                        at = ot.low,
                        ut = u[X - 16],
                        ct = ut.high,
                        ht = ut.low;
                      Y = (Y = (Y = Q + st + ((W = $ + at) >>> 0 < $ >>> 0 ? 1 : 0)) + it + ((W = W + nt) >>> 0 < nt >>> 0 ? 1 : 0)) + ct + ((W = W + ht) >>> 0 < ht >>> 0 ? 1 : 0);
                      Z.high = Y, Z.low = W;
                    }
                    var lt, pt = k & z ^ ~k & U,
                      ft = B & V ^ ~B & q,
                      dt = T & D ^ T & R ^ D & R,
                      gt = P & N ^ P & O ^ N & O,
                      _t = (T >>> 28 | P << 4) ^ (T << 30 | P >>> 2) ^ (T << 25 | P >>> 7),
                      yt = (P >>> 28 | T << 4) ^ (P << 30 | T >>> 2) ^ (P << 25 | T >>> 7),
                      mt = (k >>> 14 | B << 18) ^ (k >>> 18 | B << 14) ^ (k << 23 | B >>> 9),
                      vt = (B >>> 14 | k << 18) ^ (B >>> 18 | k << 14) ^ (B << 23 | k >>> 9),
                      xt = a[X],
                      wt = xt.high,
                      bt = xt.low,
                      Et = j + mt + ((lt = G + vt) >>> 0 < G >>> 0 ? 1 : 0),
                      Lt = yt + gt;
                    j = U, G = q, U = z, q = V, z = k, V = B, k = A + (Et = (Et = (Et = Et + pt + ((lt = lt + ft) >>> 0 < ft >>> 0 ? 1 : 0)) + wt + ((lt = lt + bt) >>> 0 < bt >>> 0 ? 1 : 0)) + Y + ((lt = lt + W) >>> 0 < W >>> 0 ? 1 : 0)) + ((B = F + lt | 0) >>> 0 < F >>> 0 ? 1 : 0) | 0, A = R, F = O, R = D, O = N, D = T, N = P, T = Et + (_t + dt + (Lt >>> 0 < yt >>> 0 ? 1 : 0)) + ((P = lt + Lt | 0) >>> 0 < lt >>> 0 ? 1 : 0) | 0;
                  }
                  d = i.low = d + P, i.high = f + T + (d >>> 0 < P >>> 0 ? 1 : 0), _ = n.low = _ + N, n.high = g + D + (_ >>> 0 < N >>> 0 ? 1 : 0), m = o.low = m + O, o.high = y + R + (m >>> 0 < O >>> 0 ? 1 : 0), x = s.low = x + F, s.high = v + A + (x >>> 0 < F >>> 0 ? 1 : 0), b = c.low = b + B, c.high = w + k + (b >>> 0 < B >>> 0 ? 1 : 0), L = h.low = L + V, h.high = E + z + (L >>> 0 < V >>> 0 ? 1 : 0), C = l.low = C + q, l.high = S + U + (C >>> 0 < q >>> 0 ? 1 : 0), M = p.low = M + G, p.high = I + j + (M >>> 0 < G >>> 0 ? 1 : 0);
                },
                _doFinalize: function () {
                  var t = this._data,
                    e = t.words,
                    r = 8 * this._nDataBytes,
                    i = 8 * t.sigBytes;
                  return e[i >>> 5] |= 128 << 24 - i % 32, e[30 + (i + 128 >>> 10 << 5)] = Math.floor(r / 4294967296), e[31 + (i + 128 >>> 10 << 5)] = r, t.sigBytes = 4 * e.length, this._process(), this._hash.toX32()
                },
                clone: function () {
                  var t = e.clone.call(this);
                  return t._hash = this._hash.clone(), t
                },
                blockSize: 32
              });
              t.SHA512 = e._createHelper(c), t.HmacSHA512 = e._createHmacHelper(c);
            }(),
            function () {
              var t = h,
                e = t.x64,
                r = e.Word,
                i = e.WordArray,
                n = t.algo,
                o = n.SHA512,
                s = n.SHA384 = o.extend({
                  _doReset: function () {
                    this._hash = new i.init([new r.init(3418070365, 3238371032), new r.init(1654270250, 914150663), new r.init(2438529370, 812702999), new r.init(355462360, 4144912697), new r.init(1731405415, 4290775857), new r.init(2394180231, 1750603025), new r.init(3675008525, 1694076839), new r.init(1203062813, 3204075428)]);
                  },
                  _doFinalize: function () {
                    var t = o._doFinalize.call(this);
                    return t.sigBytes -= 16, t
                  }
                });
              t.SHA384 = o._createHelper(s), t.HmacSHA384 = o._createHmacHelper(s);
            }(), h.lib.Cipher || function (t) {
              var e = h,
                r = e.lib,
                i = r.Base,
                n = r.WordArray,
                o = r.BufferedBlockAlgorithm,
                s = e.enc,
                a = (s.Utf8, s.Base64),
                u = e.algo.EvpKDF,
                c = r.Cipher = o.extend({
                  cfg: i.extend(),
                  createEncryptor: function (t, e) {
                    return this.create(this._ENC_XFORM_MODE, t, e)
                  },
                  createDecryptor: function (t, e) {
                    return this.create(this._DEC_XFORM_MODE, t, e)
                  },
                  init: function (t, e, r) {
                    this.cfg = this.cfg.extend(r), this._xformMode = t, this._key = e, this.reset();
                  },
                  reset: function () {
                    o.reset.call(this), this._doReset();
                  },
                  process: function (t) {
                    return this._append(t), this._process()
                  },
                  finalize: function (t) {
                    return t && this._append(t), this._doFinalize()
                  },
                  keySize: 4,
                  ivSize: 4,
                  _ENC_XFORM_MODE: 1,
                  _DEC_XFORM_MODE: 2,
                  _createHelper: function () {
                    function t(t) {
                      return "string" == typeof t ? v : y
                    }
                    return function (e) {
                      return {
                        encrypt: function (r, i, n) {
                          return t(i).encrypt(e, r, i, n)
                        },
                        decrypt: function (r, i, n) {
                          return t(i).decrypt(e, r, i, n)
                        }
                      }
                    }
                  }()
                }),
                l = (r.StreamCipher = c.extend({
                  _doFinalize: function () {
                    return this._process(!0)
                  },
                  blockSize: 1
                }), e.mode = {}),
                p = r.BlockCipherMode = i.extend({
                  createEncryptor: function (t, e) {
                    return this.Encryptor.create(t, e)
                  },
                  createDecryptor: function (t, e) {
                    return this.Decryptor.create(t, e)
                  },
                  init: function (t, e) {
                    this._cipher = t, this._iv = e;
                  }
                }),
                f = l.CBC = function () {
                  var e = p.extend();
  
                  function r(e, r, i) {
                    var n = this._iv;
                    if (n) {
                      var o = n;
                      this._iv = t;
                    } else o = this._prevBlock;
                    for (var s = 0; s < i; s++) e[r + s] ^= o[s];
                  }
                  return e.Encryptor = e.extend({
                    processBlock: function (t, e) {
                      var i = this._cipher,
                        n = i.blockSize;
                      r.call(this, t, e, n), i.encryptBlock(t, e), this._prevBlock = t.slice(e, e + n);
                    }
                  }), e.Decryptor = e.extend({
                    processBlock: function (t, e) {
                      var i = this._cipher,
                        n = i.blockSize,
                        o = t.slice(e, e + n);
                      i.decryptBlock(t, e), r.call(this, t, e, n), this._prevBlock = o;
                    }
                  }), e
                }(),
                d = (e.pad = {}).Pkcs7 = {
                  pad: function (t, e) {
                    for (var r = 4 * e, i = r - t.sigBytes % r, o = i << 24 | i << 16 | i << 8 | i, s = [], a = 0; a < i; a += 4) s.push(o);
                    var u = n.create(s, i);
                    t.concat(u);
                  },
                  unpad: function (t) {
                    var e = 255 & t.words[t.sigBytes - 1 >>> 2];
                    t.sigBytes -= e;
                  }
                },
                g = (r.BlockCipher = c.extend({
                  cfg: c.cfg.extend({
                    mode: f,
                    padding: d
                  }),
                  reset: function () {
                    c.reset.call(this);
                    var t = this.cfg,
                      e = t.iv,
                      r = t.mode;
                    if (this._xformMode == this._ENC_XFORM_MODE) var i = r.createEncryptor;
                    else {
                      i = r.createDecryptor;
                      this._minBufferSize = 1;
                    }
                    this._mode && this._mode.__creator == i ? this._mode.init(this, e && e.words) : (this._mode = i.call(r, this, e && e.words), this._mode.__creator = i);
                  },
                  _doProcessBlock: function (t, e) {
                    this._mode.processBlock(t, e);
                  },
                  _doFinalize: function () {
                    var t = this.cfg.padding;
                    if (this._xformMode == this._ENC_XFORM_MODE) {
                      t.pad(this._data, this.blockSize);
                      var e = this._process(!0);
                    } else {
                      e = this._process(!0);
                      t.unpad(e);
                    }
                    return e
                  },
                  blockSize: 4
                }), r.CipherParams = i.extend({
                  init: function (t) {
                    this.mixIn(t);
                  },
                  toString: function (t) {
                    return (t || this.formatter).stringify(this)
                  }
                })),
                _ = (e.format = {}).OpenSSL = {
                  stringify: function (t) {
                    var e = t.ciphertext,
                      r = t.salt;
                    if (r) var i = n.create([1398893684, 1701076831]).concat(r).concat(e);
                    else i = e;
                    return i.toString(a)
                  },
                  parse: function (t) {
                    var e = a.parse(t),
                      r = e.words;
                    if (1398893684 == r[0] && 1701076831 == r[1]) {
                      var i = n.create(r.slice(2, 4));
                      r.splice(0, 4), e.sigBytes -= 16;
                    }
                    return g.create({
                      ciphertext: e,
                      salt: i
                    })
                  }
                },
                y = r.SerializableCipher = i.extend({
                  cfg: i.extend({
                    format: _
                  }),
                  encrypt: function (t, e, r, i) {
                    i = this.cfg.extend(i);
                    var n = t.createEncryptor(r, i),
                      o = n.finalize(e),
                      s = n.cfg;
                    return g.create({
                      ciphertext: o,
                      key: r,
                      iv: s.iv,
                      algorithm: t,
                      mode: s.mode,
                      padding: s.padding,
                      blockSize: t.blockSize,
                      formatter: i.format
                    })
                  },
                  decrypt: function (t, e, r, i) {
                    return i = this.cfg.extend(i), e = this._parse(e, i.format), t.createDecryptor(r, i).finalize(e.ciphertext)
                  },
                  _parse: function (t, e) {
                    return "string" == typeof t ? e.parse(t, this) : t
                  }
                }),
                m = (e.kdf = {}).OpenSSL = {
                  execute: function (t, e, r, i) {
                    i || (i = n.random(8));
                    var o = u.create({
                        keySize: e + r
                      }).compute(t, i),
                      s = n.create(o.words.slice(e), 4 * r);
                    return o.sigBytes = 4 * e, g.create({
                      key: o,
                      iv: s,
                      salt: i
                    })
                  }
                },
                v = r.PasswordBasedCipher = y.extend({
                  cfg: y.cfg.extend({
                    kdf: m
                  }),
                  encrypt: function (t, e, r, i) {
                    var n = (i = this.cfg.extend(i)).kdf.execute(r, t.keySize, t.ivSize);
                    i.iv = n.iv;
                    var o = y.encrypt.call(this, t, e, n.key, i);
                    return o.mixIn(n), o
                  },
                  decrypt: function (t, e, r, i) {
                    i = this.cfg.extend(i), e = this._parse(e, i.format);
                    var n = i.kdf.execute(r, t.keySize, t.ivSize, e.salt);
                    return i.iv = n.iv, y.decrypt.call(this, t, e, n.key, i)
                  }
                });
            }(), h.mode.CFB = function () {
              var t = h.lib.BlockCipherMode.extend();
  
              function e(t, e, r, i) {
                var n = this._iv;
                if (n) {
                  var o = n.slice(0);
                  this._iv = void 0;
                } else o = this._prevBlock;
                i.encryptBlock(o, 0);
                for (var s = 0; s < r; s++) t[e + s] ^= o[s];
              }
              return t.Encryptor = t.extend({
                processBlock: function (t, r) {
                  var i = this._cipher,
                    n = i.blockSize;
                  e.call(this, t, r, n, i), this._prevBlock = t.slice(r, r + n);
                }
              }), t.Decryptor = t.extend({
                processBlock: function (t, r) {
                  var i = this._cipher,
                    n = i.blockSize,
                    o = t.slice(r, r + n);
                  e.call(this, t, r, n, i), this._prevBlock = o;
                }
              }), t
            }(), h.mode.ECB = ((a = h.lib.BlockCipherMode.extend()).Encryptor = a.extend({
              processBlock: function (t, e) {
                this._cipher.encryptBlock(t, e);
              }
            }), a.Decryptor = a.extend({
              processBlock: function (t, e) {
                this._cipher.decryptBlock(t, e);
              }
            }), a), h.pad.AnsiX923 = {
              pad: function (t, e) {
                var r = t.sigBytes,
                  i = 4 * e,
                  n = i - r % i,
                  o = r + n - 1;
                t.clamp(), t.words[o >>> 2] |= n << 24 - o % 4 * 8, t.sigBytes += n;
              },
              unpad: function (t) {
                var e = 255 & t.words[t.sigBytes - 1 >>> 2];
                t.sigBytes -= e;
              }
            }, h.pad.Iso10126 = {
              pad: function (t, e) {
                var r = 4 * e,
                  i = r - t.sigBytes % r;
                t.concat(h.lib.WordArray.random(i - 1)).concat(h.lib.WordArray.create([i << 24], 1));
              },
              unpad: function (t) {
                var e = 255 & t.words[t.sigBytes - 1 >>> 2];
                t.sigBytes -= e;
              }
            }, h.pad.Iso97971 = {
              pad: function (t, e) {
                t.concat(h.lib.WordArray.create([2147483648], 1)), h.pad.ZeroPadding.pad(t, e);
              },
              unpad: function (t) {
                h.pad.ZeroPadding.unpad(t), t.sigBytes--;
              }
            }, h.mode.OFB = (u = h.lib.BlockCipherMode.extend(), c = u.Encryptor = u.extend({
              processBlock: function (t, e) {
                var r = this._cipher,
                  i = r.blockSize,
                  n = this._iv,
                  o = this._keystream;
                n && (o = this._keystream = n.slice(0), this._iv = void 0), r.encryptBlock(o, 0);
                for (var s = 0; s < i; s++) t[e + s] ^= o[s];
              }
            }), u.Decryptor = c, u), h.pad.NoPadding = {
              pad: function () {},
              unpad: function () {}
            },
            function (t) {
              var e = h,
                r = e.lib.CipherParams,
                i = e.enc.Hex;
              e.format.Hex = {
                stringify: function (t) {
                  return t.ciphertext.toString(i)
                },
                parse: function (t) {
                  var e = i.parse(t);
                  return r.create({
                    ciphertext: e
                  })
                }
              };
            }(),
            function () {
              var t = h,
                e = t.lib.BlockCipher,
                r = t.algo,
                i = [],
                n = [],
                o = [],
                s = [],
                a = [],
                u = [],
                c = [],
                l = [],
                p = [],
                f = [];
              ! function () {
                for (var t = [], e = 0; e < 256; e++) t[e] = e < 128 ? e << 1 : e << 1 ^ 283;
                var r = 0,
                  h = 0;
                for (e = 0; e < 256; e++) {
                  var d = h ^ h << 1 ^ h << 2 ^ h << 3 ^ h << 4;
                  d = d >>> 8 ^ 255 & d ^ 99, i[r] = d, n[d] = r;
                  var g = t[r],
                    _ = t[g],
                    y = t[_],
                    m = 257 * t[d] ^ 16843008 * d;
                  o[r] = m << 24 | m >>> 8, s[r] = m << 16 | m >>> 16, a[r] = m << 8 | m >>> 24, u[r] = m;
                  m = 16843009 * y ^ 65537 * _ ^ 257 * g ^ 16843008 * r;
                  c[d] = m << 24 | m >>> 8, l[d] = m << 16 | m >>> 16, p[d] = m << 8 | m >>> 24, f[d] = m, r ? (r = g ^ t[t[t[y ^ g]]], h ^= t[t[h]]) : r = h = 1;
                }
              }();
              var d = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54],
                g = r.AES = e.extend({
                  _doReset: function () {
                    if (!this._nRounds || this._keyPriorReset !== this._key) {
                      for (var t = this._keyPriorReset = this._key, e = t.words, r = t.sigBytes / 4, n = 4 * ((this._nRounds = r + 6) + 1), o = this._keySchedule = [], s = 0; s < n; s++)
                        if (s < r) o[s] = e[s];
                        else {
                          var a = o[s - 1];
                          s % r ? r > 6 && s % r == 4 && (a = i[a >>> 24] << 24 | i[a >>> 16 & 255] << 16 | i[a >>> 8 & 255] << 8 | i[255 & a]) : (a = i[(a = a << 8 | a >>> 24) >>> 24] << 24 | i[a >>> 16 & 255] << 16 | i[a >>> 8 & 255] << 8 | i[255 & a], a ^= d[s / r | 0] << 24), o[s] = o[s - r] ^ a;
                        } for (var u = this._invKeySchedule = [], h = 0; h < n; h++) {
                        s = n - h;
                        if (h % 4) a = o[s];
                        else a = o[s - 4];
                        u[h] = h < 4 || s <= 4 ? a : c[i[a >>> 24]] ^ l[i[a >>> 16 & 255]] ^ p[i[a >>> 8 & 255]] ^ f[i[255 & a]];
                      }
                    }
                  },
                  encryptBlock: function (t, e) {
                    this._doCryptBlock(t, e, this._keySchedule, o, s, a, u, i);
                  },
                  decryptBlock: function (t, e) {
                    var r = t[e + 1];
                    t[e + 1] = t[e + 3], t[e + 3] = r, this._doCryptBlock(t, e, this._invKeySchedule, c, l, p, f, n);
                    r = t[e + 1];
                    t[e + 1] = t[e + 3], t[e + 3] = r;
                  },
                  _doCryptBlock: function (t, e, r, i, n, o, s, a) {
                    for (var u = this._nRounds, c = t[e] ^ r[0], h = t[e + 1] ^ r[1], l = t[e + 2] ^ r[2], p = t[e + 3] ^ r[3], f = 4, d = 1; d < u; d++) {
                      var g = i[c >>> 24] ^ n[h >>> 16 & 255] ^ o[l >>> 8 & 255] ^ s[255 & p] ^ r[f++],
                        _ = i[h >>> 24] ^ n[l >>> 16 & 255] ^ o[p >>> 8 & 255] ^ s[255 & c] ^ r[f++],
                        y = i[l >>> 24] ^ n[p >>> 16 & 255] ^ o[c >>> 8 & 255] ^ s[255 & h] ^ r[f++],
                        m = i[p >>> 24] ^ n[c >>> 16 & 255] ^ o[h >>> 8 & 255] ^ s[255 & l] ^ r[f++];
                      c = g, h = _, l = y, p = m;
                    }
                    g = (a[c >>> 24] << 24 | a[h >>> 16 & 255] << 16 | a[l >>> 8 & 255] << 8 | a[255 & p]) ^ r[f++], _ = (a[h >>> 24] << 24 | a[l >>> 16 & 255] << 16 | a[p >>> 8 & 255] << 8 | a[255 & c]) ^ r[f++], y = (a[l >>> 24] << 24 | a[p >>> 16 & 255] << 16 | a[c >>> 8 & 255] << 8 | a[255 & h]) ^ r[f++], m = (a[p >>> 24] << 24 | a[c >>> 16 & 255] << 16 | a[h >>> 8 & 255] << 8 | a[255 & l]) ^ r[f++];
                    t[e] = g, t[e + 1] = _, t[e + 2] = y, t[e + 3] = m;
                  },
                  keySize: 8
                });
              t.AES = e._createHelper(g);
            }(),
            function () {
              var t = h,
                e = t.lib,
                r = e.WordArray,
                i = e.BlockCipher,
                n = t.algo,
                o = [57, 49, 41, 33, 25, 17, 9, 1, 58, 50, 42, 34, 26, 18, 10, 2, 59, 51, 43, 35, 27, 19, 11, 3, 60, 52, 44, 36, 63, 55, 47, 39, 31, 23, 15, 7, 62, 54, 46, 38, 30, 22, 14, 6, 61, 53, 45, 37, 29, 21, 13, 5, 28, 20, 12, 4],
                s = [14, 17, 11, 24, 1, 5, 3, 28, 15, 6, 21, 10, 23, 19, 12, 4, 26, 8, 16, 7, 27, 20, 13, 2, 41, 52, 31, 37, 47, 55, 30, 40, 51, 45, 33, 48, 44, 49, 39, 56, 34, 53, 46, 42, 50, 36, 29, 32],
                a = [1, 2, 4, 6, 8, 10, 12, 14, 15, 17, 19, 21, 23, 25, 27, 28],
                u = [{
                  0: 8421888,
                  268435456: 32768,
                  536870912: 8421378,
                  805306368: 2,
                  1073741824: 512,
                  1342177280: 8421890,
                  1610612736: 8389122,
                  1879048192: 8388608,
                  2147483648: 514,
                  2415919104: 8389120,
                  2684354560: 33280,
                  2952790016: 8421376,
                  3221225472: 32770,
                  3489660928: 8388610,
                  3758096384: 0,
                  4026531840: 33282,
                  134217728: 0,
                  402653184: 8421890,
                  671088640: 33282,
                  939524096: 32768,
                  1207959552: 8421888,
                  1476395008: 512,
                  1744830464: 8421378,
                  2013265920: 2,
                  2281701376: 8389120,
                  2550136832: 33280,
                  2818572288: 8421376,
                  3087007744: 8389122,
                  3355443200: 8388610,
                  3623878656: 32770,
                  3892314112: 514,
                  4160749568: 8388608,
                  1: 32768,
                  268435457: 2,
                  536870913: 8421888,
                  805306369: 8388608,
                  1073741825: 8421378,
                  1342177281: 33280,
                  1610612737: 512,
                  1879048193: 8389122,
                  2147483649: 8421890,
                  2415919105: 8421376,
                  2684354561: 8388610,
                  2952790017: 33282,
                  3221225473: 514,
                  3489660929: 8389120,
                  3758096385: 32770,
                  4026531841: 0,
                  134217729: 8421890,
                  402653185: 8421376,
                  671088641: 8388608,
                  939524097: 512,
                  1207959553: 32768,
                  1476395009: 8388610,
                  1744830465: 2,
                  2013265921: 33282,
                  2281701377: 32770,
                  2550136833: 8389122,
                  2818572289: 514,
                  3087007745: 8421888,
                  3355443201: 8389120,
                  3623878657: 0,
                  3892314113: 33280,
                  4160749569: 8421378
                }, {
                  0: 1074282512,
                  16777216: 16384,
                  33554432: 524288,
                  50331648: 1074266128,
                  67108864: 1073741840,
                  83886080: 1074282496,
                  100663296: 1073758208,
                  117440512: 16,
                  134217728: 540672,
                  150994944: 1073758224,
                  167772160: 1073741824,
                  184549376: 540688,
                  201326592: 524304,
                  218103808: 0,
                  234881024: 16400,
                  251658240: 1074266112,
                  8388608: 1073758208,
                  25165824: 540688,
                  41943040: 16,
                  58720256: 1073758224,
                  75497472: 1074282512,
                  92274688: 1073741824,
                  109051904: 524288,
                  125829120: 1074266128,
                  142606336: 524304,
                  159383552: 0,
                  176160768: 16384,
                  192937984: 1074266112,
                  209715200: 1073741840,
                  226492416: 540672,
                  243269632: 1074282496,
                  260046848: 16400,
                  268435456: 0,
                  285212672: 1074266128,
                  301989888: 1073758224,
                  318767104: 1074282496,
                  335544320: 1074266112,
                  352321536: 16,
                  369098752: 540688,
                  385875968: 16384,
                  402653184: 16400,
                  419430400: 524288,
                  436207616: 524304,
                  452984832: 1073741840,
                  469762048: 540672,
                  486539264: 1073758208,
                  503316480: 1073741824,
                  520093696: 1074282512,
                  276824064: 540688,
                  293601280: 524288,
                  310378496: 1074266112,
                  327155712: 16384,
                  343932928: 1073758208,
                  360710144: 1074282512,
                  377487360: 16,
                  394264576: 1073741824,
                  411041792: 1074282496,
                  427819008: 1073741840,
                  444596224: 1073758224,
                  461373440: 524304,
                  478150656: 0,
                  494927872: 16400,
                  511705088: 1074266128,
                  528482304: 540672
                }, {
                  0: 260,
                  1048576: 0,
                  2097152: 67109120,
                  3145728: 65796,
                  4194304: 65540,
                  5242880: 67108868,
                  6291456: 67174660,
                  7340032: 67174400,
                  8388608: 67108864,
                  9437184: 67174656,
                  10485760: 65792,
                  11534336: 67174404,
                  12582912: 67109124,
                  13631488: 65536,
                  14680064: 4,
                  15728640: 256,
                  524288: 67174656,
                  1572864: 67174404,
                  2621440: 0,
                  3670016: 67109120,
                  4718592: 67108868,
                  5767168: 65536,
                  6815744: 65540,
                  7864320: 260,
                  8912896: 4,
                  9961472: 256,
                  11010048: 67174400,
                  12058624: 65796,
                  13107200: 65792,
                  14155776: 67109124,
                  15204352: 67174660,
                  16252928: 67108864,
                  16777216: 67174656,
                  17825792: 65540,
                  18874368: 65536,
                  19922944: 67109120,
                  20971520: 256,
                  22020096: 67174660,
                  23068672: 67108868,
                  24117248: 0,
                  25165824: 67109124,
                  26214400: 67108864,
                  27262976: 4,
                  28311552: 65792,
                  29360128: 67174400,
                  30408704: 260,
                  31457280: 65796,
                  32505856: 67174404,
                  17301504: 67108864,
                  18350080: 260,
                  19398656: 67174656,
                  20447232: 0,
                  21495808: 65540,
                  22544384: 67109120,
                  23592960: 256,
                  24641536: 67174404,
                  25690112: 65536,
                  26738688: 67174660,
                  27787264: 65796,
                  28835840: 67108868,
                  29884416: 67109124,
                  30932992: 67174400,
                  31981568: 4,
                  33030144: 65792
                }, {
                  0: 2151682048,
                  65536: 2147487808,
                  131072: 4198464,
                  196608: 2151677952,
                  262144: 0,
                  327680: 4198400,
                  393216: 2147483712,
                  458752: 4194368,
                  524288: 2147483648,
                  589824: 4194304,
                  655360: 64,
                  720896: 2147487744,
                  786432: 2151678016,
                  851968: 4160,
                  917504: 4096,
                  983040: 2151682112,
                  32768: 2147487808,
                  98304: 64,
                  163840: 2151678016,
                  229376: 2147487744,
                  294912: 4198400,
                  360448: 2151682112,
                  425984: 0,
                  491520: 2151677952,
                  557056: 4096,
                  622592: 2151682048,
                  688128: 4194304,
                  753664: 4160,
                  819200: 2147483648,
                  884736: 4194368,
                  950272: 4198464,
                  1015808: 2147483712,
                  1048576: 4194368,
                  1114112: 4198400,
                  1179648: 2147483712,
                  1245184: 0,
                  1310720: 4160,
                  1376256: 2151678016,
                  1441792: 2151682048,
                  1507328: 2147487808,
                  1572864: 2151682112,
                  1638400: 2147483648,
                  1703936: 2151677952,
                  1769472: 4198464,
                  1835008: 2147487744,
                  1900544: 4194304,
                  1966080: 64,
                  2031616: 4096,
                  1081344: 2151677952,
                  1146880: 2151682112,
                  1212416: 0,
                  1277952: 4198400,
                  1343488: 4194368,
                  1409024: 2147483648,
                  1474560: 2147487808,
                  1540096: 64,
                  1605632: 2147483712,
                  1671168: 4096,
                  1736704: 2147487744,
                  1802240: 2151678016,
                  1867776: 4160,
                  1933312: 2151682048,
                  1998848: 4194304,
                  2064384: 4198464
                }, {
                  0: 128,
                  4096: 17039360,
                  8192: 262144,
                  12288: 536870912,
                  16384: 537133184,
                  20480: 16777344,
                  24576: 553648256,
                  28672: 262272,
                  32768: 16777216,
                  36864: 537133056,
                  40960: 536871040,
                  45056: 553910400,
                  49152: 553910272,
                  53248: 0,
                  57344: 17039488,
                  61440: 553648128,
                  2048: 17039488,
                  6144: 553648256,
                  10240: 128,
                  14336: 17039360,
                  18432: 262144,
                  22528: 537133184,
                  26624: 553910272,
                  30720: 536870912,
                  34816: 537133056,
                  38912: 0,
                  43008: 553910400,
                  47104: 16777344,
                  51200: 536871040,
                  55296: 553648128,
                  59392: 16777216,
                  63488: 262272,
                  65536: 262144,
                  69632: 128,
                  73728: 536870912,
                  77824: 553648256,
                  81920: 16777344,
                  86016: 553910272,
                  90112: 537133184,
                  94208: 16777216,
                  98304: 553910400,
                  102400: 553648128,
                  106496: 17039360,
                  110592: 537133056,
                  114688: 262272,
                  118784: 536871040,
                  122880: 0,
                  126976: 17039488,
                  67584: 553648256,
                  71680: 16777216,
                  75776: 17039360,
                  79872: 537133184,
                  83968: 536870912,
                  88064: 17039488,
                  92160: 128,
                  96256: 553910272,
                  100352: 262272,
                  104448: 553910400,
                  108544: 0,
                  112640: 553648128,
                  116736: 16777344,
                  120832: 262144,
                  124928: 537133056,
                  129024: 536871040
                }, {
                  0: 268435464,
                  256: 8192,
                  512: 270532608,
                  768: 270540808,
                  1024: 268443648,
                  1280: 2097152,
                  1536: 2097160,
                  1792: 268435456,
                  2048: 0,
                  2304: 268443656,
                  2560: 2105344,
                  2816: 8,
                  3072: 270532616,
                  3328: 2105352,
                  3584: 8200,
                  3840: 270540800,
                  128: 270532608,
                  384: 270540808,
                  640: 8,
                  896: 2097152,
                  1152: 2105352,
                  1408: 268435464,
                  1664: 268443648,
                  1920: 8200,
                  2176: 2097160,
                  2432: 8192,
                  2688: 268443656,
                  2944: 270532616,
                  3200: 0,
                  3456: 270540800,
                  3712: 2105344,
                  3968: 268435456,
                  4096: 268443648,
                  4352: 270532616,
                  4608: 270540808,
                  4864: 8200,
                  5120: 2097152,
                  5376: 268435456,
                  5632: 268435464,
                  5888: 2105344,
                  6144: 2105352,
                  6400: 0,
                  6656: 8,
                  6912: 270532608,
                  7168: 8192,
                  7424: 268443656,
                  7680: 270540800,
                  7936: 2097160,
                  4224: 8,
                  4480: 2105344,
                  4736: 2097152,
                  4992: 268435464,
                  5248: 268443648,
                  5504: 8200,
                  5760: 270540808,
                  6016: 270532608,
                  6272: 270540800,
                  6528: 270532616,
                  6784: 8192,
                  7040: 2105352,
                  7296: 2097160,
                  7552: 0,
                  7808: 268435456,
                  8064: 268443656
                }, {
                  0: 1048576,
                  16: 33555457,
                  32: 1024,
                  48: 1049601,
                  64: 34604033,
                  80: 0,
                  96: 1,
                  112: 34603009,
                  128: 33555456,
                  144: 1048577,
                  160: 33554433,
                  176: 34604032,
                  192: 34603008,
                  208: 1025,
                  224: 1049600,
                  240: 33554432,
                  8: 34603009,
                  24: 0,
                  40: 33555457,
                  56: 34604032,
                  72: 1048576,
                  88: 33554433,
                  104: 33554432,
                  120: 1025,
                  136: 1049601,
                  152: 33555456,
                  168: 34603008,
                  184: 1048577,
                  200: 1024,
                  216: 34604033,
                  232: 1,
                  248: 1049600,
                  256: 33554432,
                  272: 1048576,
                  288: 33555457,
                  304: 34603009,
                  320: 1048577,
                  336: 33555456,
                  352: 34604032,
                  368: 1049601,
                  384: 1025,
                  400: 34604033,
                  416: 1049600,
                  432: 1,
                  448: 0,
                  464: 34603008,
                  480: 33554433,
                  496: 1024,
                  264: 1049600,
                  280: 33555457,
                  296: 34603009,
                  312: 1,
                  328: 33554432,
                  344: 1048576,
                  360: 1025,
                  376: 34604032,
                  392: 33554433,
                  408: 34603008,
                  424: 0,
                  440: 34604033,
                  456: 1049601,
                  472: 1024,
                  488: 33555456,
                  504: 1048577
                }, {
                  0: 134219808,
                  1: 131072,
                  2: 134217728,
                  3: 32,
                  4: 131104,
                  5: 134350880,
                  6: 134350848,
                  7: 2048,
                  8: 134348800,
                  9: 134219776,
                  10: 133120,
                  11: 134348832,
                  12: 2080,
                  13: 0,
                  14: 134217760,
                  15: 133152,
                  2147483648: 2048,
                  2147483649: 134350880,
                  2147483650: 134219808,
                  2147483651: 134217728,
                  2147483652: 134348800,
                  2147483653: 133120,
                  2147483654: 133152,
                  2147483655: 32,
                  2147483656: 134217760,
                  2147483657: 2080,
                  2147483658: 131104,
                  2147483659: 134350848,
                  2147483660: 0,
                  2147483661: 134348832,
                  2147483662: 134219776,
                  2147483663: 131072,
                  16: 133152,
                  17: 134350848,
                  18: 32,
                  19: 2048,
                  20: 134219776,
                  21: 134217760,
                  22: 134348832,
                  23: 131072,
                  24: 0,
                  25: 131104,
                  26: 134348800,
                  27: 134219808,
                  28: 134350880,
                  29: 133120,
                  30: 2080,
                  31: 134217728,
                  2147483664: 131072,
                  2147483665: 2048,
                  2147483666: 134348832,
                  2147483667: 133152,
                  2147483668: 32,
                  2147483669: 134348800,
                  2147483670: 134217728,
                  2147483671: 134219808,
                  2147483672: 134350880,
                  2147483673: 134217760,
                  2147483674: 134219776,
                  2147483675: 0,
                  2147483676: 133120,
                  2147483677: 2080,
                  2147483678: 131104,
                  2147483679: 134350848
                }],
                c = [4160749569, 528482304, 33030144, 2064384, 129024, 8064, 504, 2147483679],
                l = n.DES = i.extend({
                  _doReset: function () {
                    for (var t = this._key.words, e = [], r = 0; r < 56; r++) {
                      var i = o[r] - 1;
                      e[r] = t[i >>> 5] >>> 31 - i % 32 & 1;
                    }
                    for (var n = this._subKeys = [], u = 0; u < 16; u++) {
                      var c = n[u] = [],
                        h = a[u];
                      for (r = 0; r < 24; r++) c[r / 6 | 0] |= e[(s[r] - 1 + h) % 28] << 31 - r % 6, c[4 + (r / 6 | 0)] |= e[28 + (s[r + 24] - 1 + h) % 28] << 31 - r % 6;
                      c[0] = c[0] << 1 | c[0] >>> 31;
                      for (r = 1; r < 7; r++) c[r] = c[r] >>> 4 * (r - 1) + 3;
                      c[7] = c[7] << 5 | c[7] >>> 27;
                    }
                    var l = this._invSubKeys = [];
                    for (r = 0; r < 16; r++) l[r] = n[15 - r];
                  },
                  encryptBlock: function (t, e) {
                    this._doCryptBlock(t, e, this._subKeys);
                  },
                  decryptBlock: function (t, e) {
                    this._doCryptBlock(t, e, this._invSubKeys);
                  },
                  _doCryptBlock: function (t, e, r) {
                    this._lBlock = t[e], this._rBlock = t[e + 1], p.call(this, 4, 252645135), p.call(this, 16, 65535), f.call(this, 2, 858993459), f.call(this, 8, 16711935), p.call(this, 1, 1431655765);
                    for (var i = 0; i < 16; i++) {
                      for (var n = r[i], o = this._lBlock, s = this._rBlock, a = 0, h = 0; h < 8; h++) a |= u[h][((s ^ n[h]) & c[h]) >>> 0];
                      this._lBlock = s, this._rBlock = o ^ a;
                    }
                    var l = this._lBlock;
                    this._lBlock = this._rBlock, this._rBlock = l, p.call(this, 1, 1431655765), f.call(this, 8, 16711935), f.call(this, 2, 858993459), p.call(this, 16, 65535), p.call(this, 4, 252645135), t[e] = this._lBlock, t[e + 1] = this._rBlock;
                  },
                  keySize: 2,
                  ivSize: 2,
                  blockSize: 2
                });
  
              function p(t, e) {
                var r = (this._lBlock >>> t ^ this._rBlock) & e;
                this._rBlock ^= r, this._lBlock ^= r << t;
              }
  
              function f(t, e) {
                var r = (this._rBlock >>> t ^ this._lBlock) & e;
                this._lBlock ^= r, this._rBlock ^= r << t;
              }
              t.DES = i._createHelper(l);
              var d = n.TripleDES = i.extend({
                _doReset: function () {
                  var t = this._key.words;
                  this._des1 = l.createEncryptor(r.create(t.slice(0, 2))), this._des2 = l.createEncryptor(r.create(t.slice(2, 4))), this._des3 = l.createEncryptor(r.create(t.slice(4, 6)));
                },
                encryptBlock: function (t, e) {
                  this._des1.encryptBlock(t, e), this._des2.decryptBlock(t, e), this._des3.encryptBlock(t, e);
                },
                decryptBlock: function (t, e) {
                  this._des3.decryptBlock(t, e), this._des2.encryptBlock(t, e), this._des1.decryptBlock(t, e);
                },
                keySize: 6,
                ivSize: 2,
                blockSize: 2
              });
              t.TripleDES = i._createHelper(d);
            }(),
            function () {
              var t = h,
                e = t.lib.StreamCipher,
                r = t.algo,
                i = r.RC4 = e.extend({
                  _doReset: function () {
                    for (var t = this._key, e = t.words, r = t.sigBytes, i = this._S = [], n = 0; n < 256; n++) i[n] = n;
                    n = 0;
                    for (var o = 0; n < 256; n++) {
                      var s = n % r,
                        a = e[s >>> 2] >>> 24 - s % 4 * 8 & 255;
                      o = (o + i[n] + a) % 256;
                      var u = i[n];
                      i[n] = i[o], i[o] = u;
                    }
                    this._i = this._j = 0;
                  },
                  _doProcessBlock: function (t, e) {
                    t[e] ^= n.call(this);
                  },
                  keySize: 8,
                  ivSize: 0
                });
  
              function n() {
                for (var t = this._S, e = this._i, r = this._j, i = 0, n = 0; n < 4; n++) {
                  r = (r + t[e = (e + 1) % 256]) % 256;
                  var o = t[e];
                  t[e] = t[r], t[r] = o, i |= t[(t[e] + t[r]) % 256] << 24 - 8 * n;
                }
                return this._i = e, this._j = r, i
              }
              t.RC4 = e._createHelper(i);
              var o = r.RC4Drop = i.extend({
                cfg: i.cfg.extend({
                  drop: 192
                }),
                _doReset: function () {
                  i._doReset.call(this);
                  for (var t = this.cfg.drop; t > 0; t--) n.call(this);
                }
              });
              t.RC4Drop = e._createHelper(o);
            }(), h.mode.CTRGladman = function () {
              var t = h.lib.BlockCipherMode.extend();
  
              function e(t) {
                if (255 == (t >> 24 & 255)) {
                  var e = t >> 16 & 255,
                    r = t >> 8 & 255,
                    i = 255 & t;
                  255 === e ? (e = 0, 255 === r ? (r = 0, 255 === i ? i = 0 : ++i) : ++r) : ++e, t = 0, t += e << 16, t += r << 8, t += i;
                } else t += 1 << 24;
                return t
              }
              var r = t.Encryptor = t.extend({
                processBlock: function (t, r) {
                  var i = this._cipher,
                    n = i.blockSize,
                    o = this._iv,
                    s = this._counter;
                  o && (s = this._counter = o.slice(0), this._iv = void 0),
                    function (t) {
                      0 === (t[0] = e(t[0])) && (t[1] = e(t[1]));
                    }(s);
                  var a = s.slice(0);
                  i.encryptBlock(a, 0);
                  for (var u = 0; u < n; u++) t[r + u] ^= a[u];
                }
              });
              return t.Decryptor = r, t
            }(),
            function () {
              var t = h,
                e = t.lib.StreamCipher,
                r = t.algo,
                i = [],
                n = [],
                o = [],
                s = r.Rabbit = e.extend({
                  _doReset: function () {
                    for (var t = this._key.words, e = this.cfg.iv, r = 0; r < 4; r++) t[r] = 16711935 & (t[r] << 8 | t[r] >>> 24) | 4278255360 & (t[r] << 24 | t[r] >>> 8);
                    var i = this._X = [t[0], t[3] << 16 | t[2] >>> 16, t[1], t[0] << 16 | t[3] >>> 16, t[2], t[1] << 16 | t[0] >>> 16, t[3], t[2] << 16 | t[1] >>> 16],
                      n = this._C = [t[2] << 16 | t[2] >>> 16, 4294901760 & t[0] | 65535 & t[1], t[3] << 16 | t[3] >>> 16, 4294901760 & t[1] | 65535 & t[2], t[0] << 16 | t[0] >>> 16, 4294901760 & t[2] | 65535 & t[3], t[1] << 16 | t[1] >>> 16, 4294901760 & t[3] | 65535 & t[0]];
                    this._b = 0;
                    for (r = 0; r < 4; r++) a.call(this);
                    for (r = 0; r < 8; r++) n[r] ^= i[r + 4 & 7];
                    if (e) {
                      var o = e.words,
                        s = o[0],
                        u = o[1],
                        c = 16711935 & (s << 8 | s >>> 24) | 4278255360 & (s << 24 | s >>> 8),
                        h = 16711935 & (u << 8 | u >>> 24) | 4278255360 & (u << 24 | u >>> 8),
                        l = c >>> 16 | 4294901760 & h,
                        p = h << 16 | 65535 & c;
                      n[0] ^= c, n[1] ^= l, n[2] ^= h, n[3] ^= p, n[4] ^= c, n[5] ^= l, n[6] ^= h, n[7] ^= p;
                      for (r = 0; r < 4; r++) a.call(this);
                    }
                  },
                  _doProcessBlock: function (t, e) {
                    var r = this._X;
                    a.call(this), i[0] = r[0] ^ r[5] >>> 16 ^ r[3] << 16, i[1] = r[2] ^ r[7] >>> 16 ^ r[5] << 16, i[2] = r[4] ^ r[1] >>> 16 ^ r[7] << 16, i[3] = r[6] ^ r[3] >>> 16 ^ r[1] << 16;
                    for (var n = 0; n < 4; n++) i[n] = 16711935 & (i[n] << 8 | i[n] >>> 24) | 4278255360 & (i[n] << 24 | i[n] >>> 8), t[e + n] ^= i[n];
                  },
                  blockSize: 4,
                  ivSize: 2
                });
  
              function a() {
                for (var t = this._X, e = this._C, r = 0; r < 8; r++) n[r] = e[r];
                e[0] = e[0] + 1295307597 + this._b | 0, e[1] = e[1] + 3545052371 + (e[0] >>> 0 < n[0] >>> 0 ? 1 : 0) | 0, e[2] = e[2] + 886263092 + (e[1] >>> 0 < n[1] >>> 0 ? 1 : 0) | 0, e[3] = e[3] + 1295307597 + (e[2] >>> 0 < n[2] >>> 0 ? 1 : 0) | 0, e[4] = e[4] + 3545052371 + (e[3] >>> 0 < n[3] >>> 0 ? 1 : 0) | 0, e[5] = e[5] + 886263092 + (e[4] >>> 0 < n[4] >>> 0 ? 1 : 0) | 0, e[6] = e[6] + 1295307597 + (e[5] >>> 0 < n[5] >>> 0 ? 1 : 0) | 0, e[7] = e[7] + 3545052371 + (e[6] >>> 0 < n[6] >>> 0 ? 1 : 0) | 0, this._b = e[7] >>> 0 < n[7] >>> 0 ? 1 : 0;
                for (r = 0; r < 8; r++) {
                  var i = t[r] + e[r],
                    s = 65535 & i,
                    a = i >>> 16,
                    u = ((s * s >>> 17) + s * a >>> 15) + a * a,
                    c = ((4294901760 & i) * i | 0) + ((65535 & i) * i | 0);
                  o[r] = u ^ c;
                }
                t[0] = o[0] + (o[7] << 16 | o[7] >>> 16) + (o[6] << 16 | o[6] >>> 16) | 0, t[1] = o[1] + (o[0] << 8 | o[0] >>> 24) + o[7] | 0, t[2] = o[2] + (o[1] << 16 | o[1] >>> 16) + (o[0] << 16 | o[0] >>> 16) | 0, t[3] = o[3] + (o[2] << 8 | o[2] >>> 24) + o[1] | 0, t[4] = o[4] + (o[3] << 16 | o[3] >>> 16) + (o[2] << 16 | o[2] >>> 16) | 0, t[5] = o[5] + (o[4] << 8 | o[4] >>> 24) + o[3] | 0, t[6] = o[6] + (o[5] << 16 | o[5] >>> 16) + (o[4] << 16 | o[4] >>> 16) | 0, t[7] = o[7] + (o[6] << 8 | o[6] >>> 24) + o[5] | 0;
              }
              t.Rabbit = e._createHelper(s);
            }(), h.mode.CTR = function () {
              var t = h.lib.BlockCipherMode.extend(),
                e = t.Encryptor = t.extend({
                  processBlock: function (t, e) {
                    var r = this._cipher,
                      i = r.blockSize,
                      n = this._iv,
                      o = this._counter;
                    n && (o = this._counter = n.slice(0), this._iv = void 0);
                    var s = o.slice(0);
                    r.encryptBlock(s, 0), o[i - 1] = o[i - 1] + 1 | 0;
                    for (var a = 0; a < i; a++) t[e + a] ^= s[a];
                  }
                });
              return t.Decryptor = e, t
            }(),
            function () {
              var t = h,
                e = t.lib.StreamCipher,
                r = t.algo,
                i = [],
                n = [],
                o = [],
                s = r.RabbitLegacy = e.extend({
                  _doReset: function () {
                    var t = this._key.words,
                      e = this.cfg.iv,
                      r = this._X = [t[0], t[3] << 16 | t[2] >>> 16, t[1], t[0] << 16 | t[3] >>> 16, t[2], t[1] << 16 | t[0] >>> 16, t[3], t[2] << 16 | t[1] >>> 16],
                      i = this._C = [t[2] << 16 | t[2] >>> 16, 4294901760 & t[0] | 65535 & t[1], t[3] << 16 | t[3] >>> 16, 4294901760 & t[1] | 65535 & t[2], t[0] << 16 | t[0] >>> 16, 4294901760 & t[2] | 65535 & t[3], t[1] << 16 | t[1] >>> 16, 4294901760 & t[3] | 65535 & t[0]];
                    this._b = 0;
                    for (var n = 0; n < 4; n++) a.call(this);
                    for (n = 0; n < 8; n++) i[n] ^= r[n + 4 & 7];
                    if (e) {
                      var o = e.words,
                        s = o[0],
                        u = o[1],
                        c = 16711935 & (s << 8 | s >>> 24) | 4278255360 & (s << 24 | s >>> 8),
                        h = 16711935 & (u << 8 | u >>> 24) | 4278255360 & (u << 24 | u >>> 8),
                        l = c >>> 16 | 4294901760 & h,
                        p = h << 16 | 65535 & c;
                      i[0] ^= c, i[1] ^= l, i[2] ^= h, i[3] ^= p, i[4] ^= c, i[5] ^= l, i[6] ^= h, i[7] ^= p;
                      for (n = 0; n < 4; n++) a.call(this);
                    }
                  },
                  _doProcessBlock: function (t, e) {
                    var r = this._X;
                    a.call(this), i[0] = r[0] ^ r[5] >>> 16 ^ r[3] << 16, i[1] = r[2] ^ r[7] >>> 16 ^ r[5] << 16, i[2] = r[4] ^ r[1] >>> 16 ^ r[7] << 16, i[3] = r[6] ^ r[3] >>> 16 ^ r[1] << 16;
                    for (var n = 0; n < 4; n++) i[n] = 16711935 & (i[n] << 8 | i[n] >>> 24) | 4278255360 & (i[n] << 24 | i[n] >>> 8), t[e + n] ^= i[n];
                  },
                  blockSize: 4,
                  ivSize: 2
                });
  
              function a() {
                for (var t = this._X, e = this._C, r = 0; r < 8; r++) n[r] = e[r];
                e[0] = e[0] + 1295307597 + this._b | 0, e[1] = e[1] + 3545052371 + (e[0] >>> 0 < n[0] >>> 0 ? 1 : 0) | 0, e[2] = e[2] + 886263092 + (e[1] >>> 0 < n[1] >>> 0 ? 1 : 0) | 0, e[3] = e[3] + 1295307597 + (e[2] >>> 0 < n[2] >>> 0 ? 1 : 0) | 0, e[4] = e[4] + 3545052371 + (e[3] >>> 0 < n[3] >>> 0 ? 1 : 0) | 0, e[5] = e[5] + 886263092 + (e[4] >>> 0 < n[4] >>> 0 ? 1 : 0) | 0, e[6] = e[6] + 1295307597 + (e[5] >>> 0 < n[5] >>> 0 ? 1 : 0) | 0, e[7] = e[7] + 3545052371 + (e[6] >>> 0 < n[6] >>> 0 ? 1 : 0) | 0, this._b = e[7] >>> 0 < n[7] >>> 0 ? 1 : 0;
                for (r = 0; r < 8; r++) {
                  var i = t[r] + e[r],
                    s = 65535 & i,
                    a = i >>> 16,
                    u = ((s * s >>> 17) + s * a >>> 15) + a * a,
                    c = ((4294901760 & i) * i | 0) + ((65535 & i) * i | 0);
                  o[r] = u ^ c;
                }
                t[0] = o[0] + (o[7] << 16 | o[7] >>> 16) + (o[6] << 16 | o[6] >>> 16) | 0, t[1] = o[1] + (o[0] << 8 | o[0] >>> 24) + o[7] | 0, t[2] = o[2] + (o[1] << 16 | o[1] >>> 16) + (o[0] << 16 | o[0] >>> 16) | 0, t[3] = o[3] + (o[2] << 8 | o[2] >>> 24) + o[1] | 0, t[4] = o[4] + (o[3] << 16 | o[3] >>> 16) + (o[2] << 16 | o[2] >>> 16) | 0, t[5] = o[5] + (o[4] << 8 | o[4] >>> 24) + o[3] | 0, t[6] = o[6] + (o[5] << 16 | o[5] >>> 16) + (o[4] << 16 | o[4] >>> 16) | 0, t[7] = o[7] + (o[6] << 8 | o[6] >>> 24) + o[5] | 0;
              }
              t.RabbitLegacy = e._createHelper(s);
            }(), h.pad.ZeroPadding = {
              pad: function (t, e) {
                var r = 4 * e;
                t.clamp(), t.sigBytes += r - (t.sigBytes % r || r);
              },
              unpad: function (t) {
                for (var e = t.words, r = t.sigBytes - 1; !(e[r >>> 2] >>> 24 - r % 4 * 8 & 255);) r--;
                t.sigBytes = r + 1;
              }
            }, h
        }()), ln);
      var fn, dn = null,
        gn = (dn || (fn = pn, function () {
          function t(t, e) {
            return t ^ e
          }
  
          function e(t, e) {
            return t << (e %= 32) | t >>> 32 - e
          }
  
          function r(t) {
            return c[(4026531840 & t) >>> 28][(251658240 & t) >>> 24] << 24 | c[(15728640 & t) >>> 20][(983040 & t) >>> 16] << 16 | c[(61440 & t) >>> 12][(3840 & t) >>> 8] << 8 | c[(240 & t) >>> 4][(15 & t) >>> 0] << 0
          }
  
          function i(i) {
            return t(t(t(i = r(i), e(i, 2)), t(e(i, 10), e(i, 18))), e(i, 24))
          }
  
          function n(i) {
            return t(i = r(i), t(e(i, 13), e(i, 23)))
          }
  
          function o(e) {
            var r = new Array,
              i = new Array;
            r[0] = t(e[0], l[0]), r[1] = t(e[1], l[1]), r[2] = t(e[2], l[2]), r[3] = t(e[3], l[3]);
            for (var o = 0; 32 > o; o++) r[o + 4] = t(r[o], n(t(t(r[o + 1], r[o + 2]), t(r[o + 3], h[o])))), i[o] = r[o + 4].toString(16);
            return i
          }
          var s = fn,
            a = s.lib.BlockCipher,
            u = s.algo,
            c = new Array;
          c[0] = new Array(214, 144, 233, 254, 204, 225, 61, 183, 22, 182, 20, 194, 40, 251, 44, 5), c[1] = new Array(43, 103, 154, 118, 42, 190, 4, 195, 170, 68, 19, 38, 73, 134, 6, 153), c[2] = new Array(156, 66, 80, 244, 145, 239, 152, 122, 51, 84, 11, 67, 237, 207, 172, 98), c[3] = new Array(228, 179, 28, 169, 201, 8, 232, 149, 128, 223, 148, 250, 117, 143, 63, 166), c[4] = new Array(71, 7, 167, 252, 243, 115, 23, 186, 131, 89, 60, 25, 230, 133, 79, 168), c[5] = new Array(104, 107, 129, 178, 113, 100, 218, 139, 248, 235, 15, 75, 112, 86, 157, 53), c[6] = new Array(30, 36, 14, 94, 99, 88, 209, 162, 37, 34, 124, 59, 1, 33, 120, 135), c[7] = new Array(212, 0, 70, 87, 159, 211, 39, 82, 76, 54, 2, 231, 160, 196, 200, 158), c[8] = new Array(234, 191, 138, 210, 64, 199, 56, 181, 163, 247, 242, 206, 249, 97, 21, 161), c[9] = new Array(224, 174, 93, 164, 155, 52, 26, 85, 173, 147, 50, 48, 245, 140, 177, 227), c[10] = new Array(29, 246, 226, 46, 130, 102, 202, 96, 192, 41, 35, 171, 13, 83, 78, 111), c[11] = new Array(213, 219, 55, 69, 222, 253, 142, 47, 3, 255, 106, 114, 109, 108, 91, 81), c[12] = new Array(141, 27, 175, 146, 187, 221, 188, 127, 17, 217, 92, 65, 31, 16, 90, 216), c[13] = new Array(10, 193, 49, 136, 165, 205, 123, 189, 45, 116, 208, 18, 184, 229, 180, 176), c[14] = new Array(137, 105, 151, 74, 12, 150, 119, 126, 101, 185, 241, 9, 197, 110, 198, 132), c[15] = new Array(24, 240, 125, 236, 58, 220, 77, 32, 121, 238, 95, 62, 215, 203, 57, 72);
          var h = [462357, 472066609, 943670861, 1415275113, 1886879365, 2358483617, 2830087869, 3301692121, 3773296373, 4228057617, 404694573, 876298825, 1347903077, 1819507329, 2291111581, 2762715833, 3234320085, 3705924337, 4177462797, 337322537, 808926789, 1280531041, 1752135293, 2223739545, 2695343797, 3166948049, 3638552301, 4110090761, 269950501, 741554753, 1213159005, 1684763257],
            l = [2746333894, 1453994832, 1736282519, 2993693404],
            p = u.SM4 = a.extend({
              _doReset: function () {
                for (var t = o(this._key.words), e = this._SK = [], r = 0; r < t.length; r++) e[r] = t[r];
                var i = this._invSK = [];
                for (r = t.length - 1; r >= 0; r--) i[t.length - 1 - r] = t[r];
              },
              encryptBlock: function (t, e) {
                this._doCryptBlock(t, e, this._SK);
              },
              decryptBlock: function (t, e) {
                this._doCryptBlock(t, e, this._invSK);
              },
              _doCryptBlock: function (e, r, n) {
                var o = [];
                o[0] = e[r], o[1] = e[r + 1], o[2] = e[r + 2], o[3] = e[r + 3];
                for (var s = 0; 32 > s; s++) o[s + 4] = t(o[s], i(t(t(o[s + 1], o[s + 2]), t(o[s + 3], parseInt(n[s], 16)))));
                e[r] = o[35], e[r + 1] = o[34], e[r + 2] = o[33], e[r + 3] = o[32];
              },
              keySize: 4,
              ivSize: 4,
              blockSize: 4
            });
          s.SM4 = a._createHelper(p);
        }(), fn.SM4, dn = pn.SM4), dn),
        _n = t.createCommonjsModule(function (t) {
          ! function () {
            var e = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
              r = {
                rotl: function (t, e) {
                  return t << e | t >>> 32 - e
                },
                rotr: function (t, e) {
                  return t << 32 - e | t >>> e
                },
                endian: function (t) {
                  if (t.constructor == Number) return 16711935 & r.rotl(t, 8) | 4278255360 & r.rotl(t, 24);
                  for (var e = 0; e < t.length; e++) t[e] = r.endian(t[e]);
                  return t
                },
                randomBytes: function (t) {
                  for (var e = []; t > 0; t--) e.push(Math.floor(256 * Math.random()));
                  return e
                },
                bytesToWords: function (t) {
                  for (var e = [], r = 0, i = 0; r < t.length; r++, i += 8) e[i >>> 5] |= t[r] << 24 - i % 32;
                  return e
                },
                wordsToBytes: function (t) {
                  for (var e = [], r = 0; r < 32 * t.length; r += 8) e.push(t[r >>> 5] >>> 24 - r % 32 & 255);
                  return e
                },
                bytesToHex: function (t) {
                  for (var e = [], r = 0; r < t.length; r++) e.push((t[r] >>> 4).toString(16)), e.push((15 & t[r]).toString(16));
                  return e.join("")
                },
                hexToBytes: function (t) {
                  for (var e = [], r = 0; r < t.length; r += 2) e.push(parseInt(t.substr(r, 2), 16));
                  return e
                },
                bytesToBase64: function (t) {
                  for (var r = [], i = 0; i < t.length; i += 3)
                    for (var n = t[i] << 16 | t[i + 1] << 8 | t[i + 2], o = 0; o < 4; o++) 8 * i + 6 * o <= 8 * t.length ? r.push(e.charAt(n >>> 6 * (3 - o) & 63)) : r.push("=");
                  return r.join("")
                },
                base64ToBytes: function (t) {
                  t = t.replace(/[^A-Z0-9+\/]/gi, "");
                  for (var r = [], i = 0, n = 0; i < t.length; n = ++i % 4) 0 != n && r.push((e.indexOf(t.charAt(i - 1)) & Math.pow(2, -2 * n + 8) - 1) << 2 * n | e.indexOf(t.charAt(i)) >>> 6 - 2 * n);
                  return r
                }
              };
            t.exports = r;
          }();
        }),
        yn = {
          utf8: {
            stringToBytes: function (t) {
              return yn.bin.stringToBytes(unescape(encodeURIComponent(t)))
            },
            bytesToString: function (t) {
              return decodeURIComponent(escape(yn.bin.bytesToString(t)))
            }
          },
          bin: {
            stringToBytes: function (t) {
              for (var e = [], r = 0; r < t.length; r++) e.push(255 & t.charCodeAt(r));
              return e
            },
            bytesToString: function (t) {
              for (var e = [], r = 0; r < t.length; r++) e.push(String.fromCharCode(t[r]));
              return e.join("")
            }
          }
        },
        mn = yn,
        vn = function (t) {
          return null != t && (xn(t) || function (t) {
            return "function" == typeof t.readFloatLE && "function" == typeof t.slice && xn(t.slice(0, 0))
          }(t) || !!t._isBuffer)
        };
  
      function xn(t) {
        return !!t.constructor && "function" == typeof t.constructor.isBuffer && t.constructor.isBuffer(t)
      }
      var wn, bn = t.createCommonjsModule(function (t) {
          ! function () {
            var e = _n,
              r = mn.utf8,
              i = vn,
              n = mn.bin,
              o = function (t, s) {
                t.constructor == String ? t = s && "binary" === s.encoding ? n.stringToBytes(t) : r.stringToBytes(t) : i(t) ? t = Array.prototype.slice.call(t, 0) : Array.isArray(t) || (t = t.toString());
                for (var a = e.bytesToWords(t), u = 8 * t.length, c = 1732584193, h = -271733879, l = -1732584194, p = 271733878, f = 0; f < a.length; f++) a[f] = 16711935 & (a[f] << 8 | a[f] >>> 24) | 4278255360 & (a[f] << 24 | a[f] >>> 8);
                a[u >>> 5] |= 128 << u % 32, a[14 + (u + 64 >>> 9 << 4)] = u;
                var d = o._ff,
                  g = o._gg,
                  _ = o._hh,
                  y = o._ii;
                for (f = 0; f < a.length; f += 16) {
                  var m = c,
                    v = h,
                    x = l,
                    w = p;
                  c = d(c, h, l, p, a[f + 0], 7, -680876936), p = d(p, c, h, l, a[f + 1], 12, -389564586), l = d(l, p, c, h, a[f + 2], 17, 606105819), h = d(h, l, p, c, a[f + 3], 22, -1044525330), c = d(c, h, l, p, a[f + 4], 7, -176418897), p = d(p, c, h, l, a[f + 5], 12, 1200080426), l = d(l, p, c, h, a[f + 6], 17, -1473231341), h = d(h, l, p, c, a[f + 7], 22, -45705983), c = d(c, h, l, p, a[f + 8], 7, 1770035416), p = d(p, c, h, l, a[f + 9], 12, -1958414417), l = d(l, p, c, h, a[f + 10], 17, -42063), h = d(h, l, p, c, a[f + 11], 22, -1990404162), c = d(c, h, l, p, a[f + 12], 7, 1804603682), p = d(p, c, h, l, a[f + 13], 12, -40341101), l = d(l, p, c, h, a[f + 14], 17, -1502002290), c = g(c, h = d(h, l, p, c, a[f + 15], 22, 1236535329), l, p, a[f + 1], 5, -165796510), p = g(p, c, h, l, a[f + 6], 9, -1069501632), l = g(l, p, c, h, a[f + 11], 14, 643717713), h = g(h, l, p, c, a[f + 0], 20, -373897302), c = g(c, h, l, p, a[f + 5], 5, -701558691), p = g(p, c, h, l, a[f + 10], 9, 38016083), l = g(l, p, c, h, a[f + 15], 14, -660478335), h = g(h, l, p, c, a[f + 4], 20, -405537848), c = g(c, h, l, p, a[f + 9], 5, 568446438), p = g(p, c, h, l, a[f + 14], 9, -1019803690), l = g(l, p, c, h, a[f + 3], 14, -187363961), h = g(h, l, p, c, a[f + 8], 20, 1163531501), c = g(c, h, l, p, a[f + 13], 5, -1444681467), p = g(p, c, h, l, a[f + 2], 9, -51403784), l = g(l, p, c, h, a[f + 7], 14, 1735328473), c = _(c, h = g(h, l, p, c, a[f + 12], 20, -1926607734), l, p, a[f + 5], 4, -378558), p = _(p, c, h, l, a[f + 8], 11, -2022574463), l = _(l, p, c, h, a[f + 11], 16, 1839030562), h = _(h, l, p, c, a[f + 14], 23, -35309556), c = _(c, h, l, p, a[f + 1], 4, -1530992060), p = _(p, c, h, l, a[f + 4], 11, 1272893353), l = _(l, p, c, h, a[f + 7], 16, -155497632), h = _(h, l, p, c, a[f + 10], 23, -1094730640), c = _(c, h, l, p, a[f + 13], 4, 681279174), p = _(p, c, h, l, a[f + 0], 11, -358537222), l = _(l, p, c, h, a[f + 3], 16, -722521979), h = _(h, l, p, c, a[f + 6], 23, 76029189), c = _(c, h, l, p, a[f + 9], 4, -640364487), p = _(p, c, h, l, a[f + 12], 11, -421815835), l = _(l, p, c, h, a[f + 15], 16, 530742520), c = y(c, h = _(h, l, p, c, a[f + 2], 23, -995338651), l, p, a[f + 0], 6, -198630844), p = y(p, c, h, l, a[f + 7], 10, 1126891415), l = y(l, p, c, h, a[f + 14], 15, -1416354905), h = y(h, l, p, c, a[f + 5], 21, -57434055), c = y(c, h, l, p, a[f + 12], 6, 1700485571), p = y(p, c, h, l, a[f + 3], 10, -1894986606), l = y(l, p, c, h, a[f + 10], 15, -1051523), h = y(h, l, p, c, a[f + 1], 21, -2054922799), c = y(c, h, l, p, a[f + 8], 6, 1873313359), p = y(p, c, h, l, a[f + 15], 10, -30611744), l = y(l, p, c, h, a[f + 6], 15, -1560198380), h = y(h, l, p, c, a[f + 13], 21, 1309151649), c = y(c, h, l, p, a[f + 4], 6, -145523070), p = y(p, c, h, l, a[f + 11], 10, -1120210379), l = y(l, p, c, h, a[f + 2], 15, 718787259), h = y(h, l, p, c, a[f + 9], 21, -343485551), c = c + m >>> 0, h = h + v >>> 0, l = l + x >>> 0, p = p + w >>> 0;
                }
                return e.endian([c, h, l, p])
              };
            o._ff = function (t, e, r, i, n, o, s) {
              var a = t + (e & r | ~e & i) + (n >>> 0) + s;
              return (a << o | a >>> 32 - o) + e
            }, o._gg = function (t, e, r, i, n, o, s) {
              var a = t + (e & i | r & ~i) + (n >>> 0) + s;
              return (a << o | a >>> 32 - o) + e
            }, o._hh = function (t, e, r, i, n, o, s) {
              var a = t + (e ^ r ^ i) + (n >>> 0) + s;
              return (a << o | a >>> 32 - o) + e
            }, o._ii = function (t, e, r, i, n, o, s) {
              var a = t + (r ^ (e | ~i)) + (n >>> 0) + s;
              return (a << o | a >>> 32 - o) + e
            }, o._blocksize = 16, o._digestsize = 16, t.exports = function (t, r) {
              if (null == t) throw new Error("Illegal argument " + t);
              var i = e.wordsToBytes(o(t, r));
              return r && r.asBytes ? i : r && r.asString ? n.bytesToString(i) : e.bytesToHex(i)
            };
          }();
        }),
        En = En || function (t, e) {
          var r = {},
            i = r.lib = {},
            n = i.Base = function () {
              function t() {}
              return {
                extend: function (e) {
                  t.prototype = this;
                  var r = new t;
                  return e && r.mixIn(e), r.hasOwnProperty("init") || (r.init = function () {
                    r.$super.init.apply(this, arguments);
                  }), r.init.prototype = r, r.$super = this, r
                },
                create: function () {
                  var t = this.extend();
                  return t.init.apply(t, arguments), t
                },
                init: function () {},
                mixIn: function (t) {
                  for (var e in t) t.hasOwnProperty(e) && (this[e] = t[e]);
                  t.hasOwnProperty("toString") && (this.toString = t.toString);
                },
                clone: function () {
                  return this.init.prototype.extend(this)
                }
              }
            }(),
            o = i.WordArray = n.extend({
              init: function (t, e) {
                t = this.words = t || [], this.sigBytes = null != e ? e : 4 * t.length;
              },
              toString: function (t) {
                return (t || a).stringify(this)
              },
              concat: function (t) {
                var e = this.words,
                  r = t.words,
                  i = this.sigBytes,
                  n = t.sigBytes;
                if (this.clamp(), i % 4)
                  for (var o = 0; n > o; o++) {
                    var s = r[o >>> 2] >>> 24 - o % 4 * 8 & 255;
                    e[i + o >>> 2] |= s << 24 - (i + o) % 4 * 8;
                  } else if (r.length > 65535)
                    for (o = 0; n > o; o += 4) e[i + o >>> 2] = r[o >>> 2];
                  else e.push.apply(e, r);
                return this.sigBytes += n, this
              },
              clamp: function () {
                var e = this.words,
                  r = this.sigBytes;
                e[r >>> 2] &= 4294967295 << 32 - r % 4 * 8, e.length = t.ceil(r / 4);
              },
              clone: function () {
                var t = n.clone.call(this);
                return t.words = this.words.slice(0), t
              },
              random: function (e) {
                for (var r = [], i = 0; e > i; i += 4) r.push(4294967296 * t.random() | 0);
                return new o.init(r, e)
              }
            }),
            s = r.enc = {},
            a = s.Hex = {
              stringify: function (t) {
                for (var e = t.words, r = t.sigBytes, i = [], n = 0; r > n; n++) {
                  var o = e[n >>> 2] >>> 24 - n % 4 * 8 & 255;
                  i.push((o >>> 4).toString(16)), i.push((15 & o).toString(16));
                }
                return i.join("")
              },
              parse: function (t) {
                for (var e = t.length, r = [], i = 0; e > i; i += 2) r[i >>> 3] |= parseInt(t.substr(i, 2), 16) << 24 - i % 8 * 4;
                return new o.init(r, e / 2)
              }
            },
            u = s.Latin1 = {
              stringify: function (t) {
                for (var e = t.words, r = t.sigBytes, i = [], n = 0; r > n; n++) {
                  var o = e[n >>> 2] >>> 24 - n % 4 * 8 & 255;
                  i.push(String.fromCharCode(o));
                }
                return i.join("")
              },
              parse: function (t) {
                for (var e = t.length, r = [], i = 0; e > i; i++) r[i >>> 2] |= (255 & t.charCodeAt(i)) << 24 - i % 4 * 8;
                return new o.init(r, e)
              }
            },
            c = s.Utf8 = {
              stringify: function (t) {
                try {
                  return decodeURIComponent(escape(u.stringify(t)))
                } catch (t) {
                  throw new Error("Malformed UTF-8 data")
                }
              },
              parse: function (t) {
                return u.parse(unescape(encodeURIComponent(t)))
              }
            },
            h = i.BufferedBlockAlgorithm = n.extend({
              reset: function () {
                this._data = new o.init, this._nDataBytes = 0;
              },
              _append: function (t) {
                "string" == typeof t && (t = c.parse(t)), this._data.concat(t), this._nDataBytes += t.sigBytes;
              },
              _process: function (e) {
                var r = this._data,
                  i = r.words,
                  n = r.sigBytes,
                  s = this.blockSize,
                  a = n / (4 * s),
                  u = (a = e ? t.ceil(a) : t.max((0 | a) - this._minBufferSize, 0)) * s,
                  c = t.min(4 * u, n);
                if (u) {
                  for (var h = 0; u > h; h += s) this._doProcessBlock(i, h);
                  var l = i.splice(0, u);
                  r.sigBytes -= c;
                }
                return new o.init(l, c)
              },
              clone: function () {
                var t = n.clone.call(this);
                return t._data = this._data.clone(), t
              },
              _minBufferSize: 0
            }),
            l = (i.Hasher = h.extend({
              cfg: n.extend(),
              init: function (t) {
                this.cfg = this.cfg.extend(t), this.reset();
              },
              reset: function () {
                h.reset.call(this), this._doReset();
              },
              update: function (t) {
                return this._append(t), this._process(), this
              },
              finalize: function (t) {
                return t && this._append(t), this._doFinalize()
              },
              blockSize: 16,
              _createHelper: function (t) {
                return function (e, r) {
                  return new t.init(r).finalize(e)
                }
              },
              _createHmacHelper: function (t) {
                return function (e, r) {
                  return new l.HMAC.init(t, r).finalize(e)
                }
              }
            }), r.algo = {});
          return r
        }(Math);
  
      function Ln() {
        this.BYTE_LENGTH = 64, this.xBuf = new Array, this.xBufOff = 0, this.byteCount = 0, this.DIGEST_LENGTH = 32, this.v0 = [1937774191, 1226093241, 388252375, 3666478592, 2842636476, 372324522, 3817729613, 2969243214], this.v0 = [1937774191, 1226093241, 388252375, -628488704, -1452330820, 372324522, -477237683, -1325724082], this.v = new Array(8), this.v_ = new Array(8), this.X0 = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], this.X = new Array(68), this.xOff = 0, this.T_00_15 = 2043430169, this.T_16_63 = 2055708042, arguments.length > 0 ? this.InitDigest(arguments[0]) : this.Init();
      }
  
      function Sn(t, e, r) {
        null != t && ("number" == typeof t ? this.fromNumber(t, e, r) : null == e && "string" != typeof t ? this.fromString(t, 256) : this.fromString(t, e));
      }
  
      function Cn() {
        return new Sn(null)
      }
  
      function In(t) {
        return An.charAt(t)
      }
  
      function Mn(t, e) {
        var r = Fn[t.charCodeAt(e)];
        return null == r ? -1 : r
      }
  
      function Tn(t) {
        var e = Cn();
        return e.fromInt(t), e
      }
  
      function Pn(t) {
        var e, r = 1;
        return 0 != (e = t >>> 16) && (t = e, r += 16), 0 != (e = t >> 8) && (t = e, r += 8), 0 != (e = t >> 4) && (t = e, r += 4), 0 != (e = t >> 2) && (t = e, r += 2), 0 != (e = t >> 1) && (t = e, r += 1), r
      }
  
      function Dn(t) {
        this.m = t;
      }
  
      function Nn(t) {
        this.m = t, this.mp = t.invDigit(), this.mpl = 32767 & this.mp, this.mph = this.mp >> 15, this.um = (1 << t.DB - 15) - 1, this.mt2 = 2 * t.t;
      }
      Ln.prototype = {
        Init: function () {
          this.xBuf = new Array(4), this.Reset();
        },
        InitDigest: function (t) {
          this.xBuf = new Array(t.xBuf.length), Array.Copy(t.xBuf, 0, this.xBuf, 0, t.xBuf.length), this.xBufOff = t.xBufOff, this.byteCount = t.byteCount, Array.Copy(t.X, 0, this.X, 0, t.X.length), this.xOff = t.xOff, Array.Copy(t.v, 0, this.v, 0, t.v.length);
        },
        GetDigestSize: function () {
          return this.DIGEST_LENGTH
        },
        Reset: function () {
          this.byteCount = 0, this.xBufOff = 0, Array.Clear(this.xBuf, 0, this.xBuf.length), Array.Copy(this.v0, 0, this.v, 0, this.v0.length), this.xOff = 0, Array.Copy(this.X0, 0, this.X, 0, this.X0.length);
        },
        GetByteLength: function () {
          return this.BYTE_LENGTH
        },
        ProcessBlock: function () {
          var t, e = this.X,
            r = new Array(64);
          for (t = 16; 68 > t; t++) e[t] = this.P1(e[t - 16] ^ e[t - 9] ^ this.ROTATE(e[t - 3], 15)) ^ this.ROTATE(e[t - 13], 7) ^ e[t - 6];
          for (t = 0; 64 > t; t++) r[t] = e[t] ^ e[t + 4];
          var i, n, o, s, a, u = this.v,
            c = this.v_;
          for (Array.Copy(u, 0, c, 0, this.v0.length), t = 0; 16 > t; t++) a = this.ROTATE(c[0], 12), i = epgis_Int32.parse(epgis_Int32.parse(a + c[4]) + this.ROTATE(this.T_00_15, t)), n = (i = this.ROTATE(i, 7)) ^ a, o = epgis_Int32.parse(epgis_Int32.parse(this.FF_00_15(c[0], c[1], c[2]) + c[3]) + n) + r[t], s = epgis_Int32.parse(epgis_Int32.parse(this.GG_00_15(c[4], c[5], c[6]) + c[7]) + i) + e[t], c[3] = c[2], c[2] = this.ROTATE(c[1], 9), c[1] = c[0], c[0] = o, c[7] = c[6], c[6] = this.ROTATE(c[5], 19), c[5] = c[4], c[4] = this.P0(s);
          for (t = 16; 64 > t; t++) a = this.ROTATE(c[0], 12), i = epgis_Int32.parse(epgis_Int32.parse(a + c[4]) + this.ROTATE(this.T_16_63, t)), n = (i = this.ROTATE(i, 7)) ^ a, o = epgis_Int32.parse(epgis_Int32.parse(this.FF_16_63(c[0], c[1], c[2]) + c[3]) + n) + r[t], s = epgis_Int32.parse(epgis_Int32.parse(this.GG_16_63(c[4], c[5], c[6]) + c[7]) + i) + e[t], c[3] = c[2], c[2] = this.ROTATE(c[1], 9), c[1] = c[0], c[0] = o, c[7] = c[6], c[6] = this.ROTATE(c[5], 19), c[5] = c[4], c[4] = this.P0(s);
          for (t = 0; 8 > t; t++) u[t] ^= epgis_Int32.parse(c[t]);
          this.xOff = 0, Array.Copy(this.X0, 0, this.X, 0, this.X0.length);
        },
        ProcessWord: function (t, e) {
          var r = t[e] << 24;
          r |= (255 & t[++e]) << 16, r |= (255 & t[++e]) << 8, r |= 255 & t[++e], this.X[this.xOff] = r, 16 == ++this.xOff && this.ProcessBlock();
        },
        ProcessLength: function (t) {
          this.xOff > 14 && this.ProcessBlock(), this.X[14] = this.URShiftLong(t, 32), this.X[15] = 4294967295 & t;
        },
        IntToBigEndian: function (t, e, r) {
          e[r] = epgis_Int32.parseByte(this.URShift(t, 24)), e[++r] = epgis_Int32.parseByte(this.URShift(t, 16)), e[++r] = epgis_Int32.parseByte(this.URShift(t, 8)), e[++r] = epgis_Int32.parseByte(t);
        },
        DoFinal: function (t, e) {
          this.Finish();
          for (var r = 0; 8 > r; r++) this.IntToBigEndian(this.v[r], t, e + 4 * r);
          return this.Reset(), this.DIGEST_LENGTH
        },
        Update: function (t) {
          this.xBuf[this.xBufOff++] = t, this.xBufOff == this.xBuf.length && (this.ProcessWord(this.xBuf, 0), this.xBufOff = 0), this.byteCount++;
        },
        BlockUpdate: function (t, e, r) {
          for (; 0 != this.xBufOff && r > 0;) this.Update(t[e]), e++, r--;
          for (; r > this.xBuf.length;) this.ProcessWord(t, e), e += this.xBuf.length, r -= this.xBuf.length, this.byteCount += this.xBuf.length;
          for (; r > 0;) this.Update(t[e]), e++, r--;
        },
        Finish: function () {
          var t = this.byteCount << 3;
          for (this.Update(128); 0 != this.xBufOff;) this.Update(0);
          this.ProcessLength(t), this.ProcessBlock();
        },
        ROTATE: function (t, e) {
          return t << e | this.URShift(t, 32 - e)
        },
        P0: function (t) {
          return t ^ this.ROTATE(t, 9) ^ this.ROTATE(t, 17)
        },
        P1: function (t) {
          return t ^ this.ROTATE(t, 15) ^ this.ROTATE(t, 23)
        },
        FF_00_15: function (t, e, r) {
          return t ^ e ^ r
        },
        FF_16_63: function (t, e, r) {
          return t & e | t & r | e & r
        },
        GG_00_15: function (t, e, r) {
          return t ^ e ^ r
        },
        GG_16_63: function (t, e, r) {
          return t & e | ~t & r
        },
        URShift: function (t, e) {
          return (t > epgis_Int32.maxValue || t < epgis_Int32.minValue) && (t = epgis_Int32.parse(t)), t >= 0 ? t >> e : (t >> e) + (2 << ~e)
        },
        URShiftLong: function (t, e) {
          var r, i = new Sn;
          if (i.fromInt(t), i.signum() >= 0) r = i.shiftRight(e).intValue();
          else {
            var n = new Sn;
            n.fromInt(2);
            var o = ~e,
              s = "";
            if (0 > o) {
              for (var a = 64 + o, u = 0; a > u; u++) s += "0";
              var c = new Sn;
              c.fromInt(t >> e);
              var h = new Sn("10" + s, 2);
              s = h.toRadix(10), r = h.add(c).toRadix(10);
            } else r = (t >> e) + (s = n.shiftLeft(~e).intValue());
          }
          return r
        },
        GetZ: function (t, e) {
          var r = En.enc.Utf8.parse("1234567812345678"),
            i = 4 * r.words.length * 8;
          this.Update(i >> 8 & 255), this.Update(255 & i);
          var n = this.GetWords(r.toString());
          this.BlockUpdate(n, 0, n.length);
          var o = this.GetWords(t.curve.a.toBigInteger().toRadix(16)),
            s = this.GetWords(t.curve.b.toBigInteger().toRadix(16)),
            a = this.GetWords(t.getX().toBigInteger().toRadix(16)),
            u = this.GetWords(t.getY().toBigInteger().toRadix(16)),
            c = this.GetWords(e.substr(0, 64)),
            h = this.GetWords(e.substr(64, 64));
          this.BlockUpdate(o, 0, o.length), this.BlockUpdate(s, 0, s.length), this.BlockUpdate(a, 0, a.length), this.BlockUpdate(u, 0, u.length), this.BlockUpdate(c, 0, c.length), this.BlockUpdate(h, 0, h.length);
          var l = new Array(this.GetDigestSize());
          return this.DoFinal(l, 0), l
        },
        GetWords: function (t) {
          for (var e = [], r = t.length, i = 0; r > i; i += 2) e[e.length] = parseInt(t.substr(i, 2), 16);
          return e
        },
        GetHex: function (t) {
          for (var e = [], r = 0, i = 0; i < 2 * t.length; i += 2) e[i >>> 3] |= parseInt(t[r]) << 24 - i % 8 * 4, r++;
          return new En.lib.WordArray.init(e, t.length)
        }
      }, Array.Clear = function (t, e, r) {
        for (var i in t) t[i] = null;
      }, Array.Copy = function (t, e, r, i, n) {
        for (var o = t.slice(e, e + n), s = 0; s < o.length; s++) r[i] = o[s], i++;
      }, window.epgis_Int32 = {
        minValue: -parseInt("10000000000000000000000000000000", 2),
        maxValue: parseInt("1111111111111111111111111111111", 2),
        parse: function (t) {
          if (t < this.minValue) {
            for (var e = (n = new Number(-t).toString(2)).substr(n.length - 31, 31), r = "", i = 0; i < e.length; i++) {
              r += "0" == e.substr(i, 1) ? "1" : "0";
            }
            return parseInt(r, 2) + 1
          }
          if (t > this.maxValue) {
            var n;
            for (e = (n = Number(t).toString(2)).substr(n.length - 31, 31), r = "", i = 0; i < e.length; i++) {
              r += "0" == e.substr(i, 1) ? "1" : "0";
            }
            return -(parseInt(r, 2) + 1)
          }
          return t
        },
        parseByte: function (t) {
          if (0 > t) {
            for (var e = (n = new Number(-t).toString(2)).substr(n.length - 8, 8), r = "", i = 0; i < e.length; i++) {
              r += "0" == e.substr(i, 1) ? "1" : "0";
            }
            return parseInt(r, 2) + 1
          }
          if (t > 255) {
            var n = Number(t).toString(2);
            return parseInt(n.substr(n.length - 8, 8), 2)
          }
          return t
        }
      }, "Microsoft Internet Explorer" == navigator.appName ? (Sn.prototype.am = function (t, e, r, i, n, o) {
        for (var s = 32767 & e, a = e >> 15; --o >= 0;) {
          var u = 32767 & this[t],
            c = this[t++] >> 15,
            h = a * u + c * s;
          n = ((u = s * u + ((32767 & h) << 15) + r[i] + (1073741823 & n)) >>> 30) + (h >>> 15) + a * c + (n >>> 30), r[i++] = 1073741823 & u;
        }
        return n
      }, wn = 30) : "Netscape" != navigator.appName ? (Sn.prototype.am = function (t, e, r, i, n, o) {
        for (; --o >= 0;) {
          var s = e * this[t++] + r[i] + n;
          n = Math.floor(s / 67108864), r[i++] = 67108863 & s;
        }
        return n
      }, wn = 26) : (Sn.prototype.am = function (t, e, r, i, n, o) {
        for (var s = 16383 & e, a = e >> 14; --o >= 0;) {
          var u = 16383 & this[t],
            c = this[t++] >> 14,
            h = a * u + c * s;
          n = ((u = s * u + ((16383 & h) << 14) + r[i] + n) >> 28) + (h >> 14) + a * c, r[i++] = 268435455 & u;
        }
        return n
      }, wn = 28), Sn.prototype.DB = wn, Sn.prototype.DM = (1 << wn) - 1, Sn.prototype.DV = 1 << wn;
      Sn.prototype.FV = Math.pow(2, 52), Sn.prototype.F1 = 52 - wn, Sn.prototype.F2 = 2 * wn - 52;
      var Rn, On, An = "0123456789abcdefghijklmnopqrstuvwxyz",
        Fn = new Array;
      for (Rn = "0".charCodeAt(0), On = 0; 9 >= On; ++On) Fn[Rn++] = On;
      for (Rn = "a".charCodeAt(0), On = 10; 36 > On; ++On) Fn[Rn++] = On;
      for (Rn = "A".charCodeAt(0), On = 10; 36 > On; ++On) Fn[Rn++] = On;
  
      function kn(t, e) {
        return t & e
      }
  
      function Bn(t, e) {
        return t | e
      }
  
      function zn(t, e) {
        return t ^ e
      }
  
      function Vn(t, e) {
        return t & ~e
      }
  
      function Un(t) {
        if (0 == t) return -1;
        var e = 0;
        return 0 == (65535 & t) && (t >>= 16, e += 16), 0 == (255 & t) && (t >>= 8, e += 8), 0 == (15 & t) && (t >>= 4, e += 4), 0 == (3 & t) && (t >>= 2, e += 2), 0 == (1 & t) && ++e, e
      }
  
      function qn(t) {
        for (var e = 0; 0 != t;) t &= t - 1, ++e;
        return e
      }
  
      function jn() {}
  
      function Gn(t) {
        return t
      }
  
      function Xn(t) {
        this.r2 = Cn(), this.q3 = Cn(), Sn.ONE.dlShiftTo(2 * t.t, this.r2), this.mu = this.r2.divide(t), this.m = t;
      }
      Dn.prototype.convert = function (t) {
        return t.s < 0 || t.compareTo(this.m) >= 0 ? t.mod(this.m) : t
      }, Dn.prototype.revert = function (t) {
        return t
      }, Dn.prototype.reduce = function (t) {
        t.divRemTo(this.m, null, t);
      }, Dn.prototype.mulTo = function (t, e, r) {
        t.multiplyTo(e, r), this.reduce(r);
      }, Dn.prototype.sqrTo = function (t, e) {
        t.squareTo(e), this.reduce(e);
      }, Nn.prototype.convert = function (t) {
        var e = Cn();
        return t.abs().dlShiftTo(this.m.t, e), e.divRemTo(this.m, null, e), t.s < 0 && e.compareTo(Sn.ZERO) > 0 && this.m.subTo(e, e), e
      }, Nn.prototype.revert = function (t) {
        var e = Cn();
        return t.copyTo(e), this.reduce(e), e
      }, Nn.prototype.reduce = function (t) {
        for (; t.t <= this.mt2;) t[t.t++] = 0;
        for (var e = 0; e < this.m.t; ++e) {
          var r = 32767 & t[e],
            i = r * this.mpl + ((r * this.mph + (t[e] >> 15) * this.mpl & this.um) << 15) & t.DM;
          for (t[r = e + this.m.t] += this.m.am(0, i, t, e, 0, this.m.t); t[r] >= t.DV;) t[r] -= t.DV, t[++r]++;
        }
        t.clamp(), t.drShiftTo(this.m.t, t), t.compareTo(this.m) >= 0 && t.subTo(this.m, t);
      }, Nn.prototype.mulTo = function (t, e, r) {
        t.multiplyTo(e, r), this.reduce(r);
      }, Nn.prototype.sqrTo = function (t, e) {
        t.squareTo(e), this.reduce(e);
      }, Sn.prototype.copyTo = function (t) {
        for (var e = this.t - 1; e >= 0; --e) t[e] = this[e];
        t.t = this.t, t.s = this.s;
      }, Sn.prototype.fromInt = function (t) {
        this.t = 1, this.s = 0 > t ? -1 : 0, t > 0 ? this[0] = t : -1 > t ? this[0] = t + this.DV : this.t = 0;
      }, Sn.prototype.fromString = function (t, e) {
        var r;
        if (16 == e) r = 4;
        else if (8 == e) r = 3;
        else if (256 == e) r = 8;
        else if (2 == e) r = 1;
        else if (32 == e) r = 5;
        else {
          if (4 != e) return void this.fromRadix(t, e);
          r = 2;
        }
        this.t = 0, this.s = 0;
        for (var i = t.length, n = !1, o = 0; --i >= 0;) {
          var s = 8 == r ? 255 & t[i] : Mn(t, i);
          0 > s ? "-" == t.charAt(i) && (n = !0) : (n = !1, 0 == o ? this[this.t++] = s : o + r > this.DB ? (this[this.t - 1] |= (s & (1 << this.DB - o) - 1) << o, this[this.t++] = s >> this.DB - o) : this[this.t - 1] |= s << o, (o += r) >= this.DB && (o -= this.DB));
        }
        8 == r && 0 != (128 & t[0]) && (this.s = -1, o > 0 && (this[this.t - 1] |= (1 << this.DB - o) - 1 << o)), this.clamp(), n && Sn.ZERO.subTo(this, this);
      }, Sn.prototype.clamp = function () {
        for (var t = this.s & this.DM; this.t > 0 && this[this.t - 1] == t;) --this.t;
      }, Sn.prototype.dlShiftTo = function (t, e) {
        var r;
        for (r = this.t - 1; r >= 0; --r) e[r + t] = this[r];
        for (r = t - 1; r >= 0; --r) e[r] = 0;
        e.t = this.t + t, e.s = this.s;
      }, Sn.prototype.drShiftTo = function (t, e) {
        for (var r = t; r < this.t; ++r) e[r - t] = this[r];
        e.t = Math.max(this.t - t, 0), e.s = this.s;
      }, Sn.prototype.lShiftTo = function (t, e) {
        var r, i = t % this.DB,
          n = this.DB - i,
          o = (1 << n) - 1,
          s = Math.floor(t / this.DB),
          a = this.s << i & this.DM;
        for (r = this.t - 1; r >= 0; --r) e[r + s + 1] = this[r] >> n | a, a = (this[r] & o) << i;
        for (r = s - 1; r >= 0; --r) e[r] = 0;
        e[s] = a, e.t = this.t + s + 1, e.s = this.s, e.clamp();
      }, Sn.prototype.rShiftTo = function (t, e) {
        e.s = this.s;
        var r = Math.floor(t / this.DB);
        if (r >= this.t) e.t = 0;
        else {
          var i = t % this.DB,
            n = this.DB - i,
            o = (1 << i) - 1;
          e[0] = this[r] >> i;
          for (var s = r + 1; s < this.t; ++s) e[s - r - 1] |= (this[s] & o) << n, e[s - r] = this[s] >> i;
          i > 0 && (e[this.t - r - 1] |= (this.s & o) << n), e.t = this.t - r, e.clamp();
        }
      }, Sn.prototype.subTo = function (t, e) {
        for (var r = 0, i = 0, n = Math.min(t.t, this.t); n > r;) i += this[r] - t[r], e[r++] = i & this.DM, i >>= this.DB;
        if (t.t < this.t) {
          for (i -= t.s; r < this.t;) i += this[r], e[r++] = i & this.DM, i >>= this.DB;
          i += this.s;
        } else {
          for (i += this.s; r < t.t;) i -= t[r], e[r++] = i & this.DM, i >>= this.DB;
          i -= t.s;
        }
        e.s = 0 > i ? -1 : 0, -1 > i ? e[r++] = this.DV + i : i > 0 && (e[r++] = i), e.t = r, e.clamp();
      }, Sn.prototype.multiplyTo = function (t, e) {
        var r = this.abs(),
          i = t.abs(),
          n = r.t;
        for (e.t = n + i.t; --n >= 0;) e[n] = 0;
        for (n = 0; n < i.t; ++n) e[n + r.t] = r.am(0, i[n], e, n, 0, r.t);
        e.s = 0, e.clamp(), this.s != t.s && Sn.ZERO.subTo(e, e);
      }, Sn.prototype.squareTo = function (t) {
        for (var e = this.abs(), r = t.t = 2 * e.t; --r >= 0;) t[r] = 0;
        for (r = 0; r < e.t - 1; ++r) {
          var i = e.am(r, e[r], t, 2 * r, 0, 1);
          (t[r + e.t] += e.am(r + 1, 2 * e[r], t, 2 * r + 1, i, e.t - r - 1)) >= e.DV && (t[r + e.t] -= e.DV, t[r + e.t + 1] = 1);
        }
        t.t > 0 && (t[t.t - 1] += e.am(r, e[r], t, 2 * r, 0, 1)), t.s = 0, t.clamp();
      }, Sn.prototype.divRemTo = function (t, e, r) {
        var i = t.abs();
        if (!(i.t <= 0)) {
          var n = this.abs();
          if (n.t < i.t) return null != e && e.fromInt(0), void(null != r && this.copyTo(r));
          null == r && (r = Cn());
          var o = Cn(),
            s = this.s,
            a = t.s,
            u = this.DB - Pn(i[i.t - 1]);
          u > 0 ? (i.lShiftTo(u, o), n.lShiftTo(u, r)) : (i.copyTo(o), n.copyTo(r));
          var c = o.t,
            h = o[c - 1];
          if (0 != h) {
            var l = h * (1 << this.F1) + (c > 1 ? o[c - 2] >> this.F2 : 0),
              p = this.FV / l,
              f = (1 << this.F1) / l,
              d = 1 << this.F2,
              g = r.t,
              _ = g - c,
              y = null == e ? Cn() : e;
            for (o.dlShiftTo(_, y), r.compareTo(y) >= 0 && (r[r.t++] = 1, r.subTo(y, r)), Sn.ONE.dlShiftTo(c, y), y.subTo(o, o); o.t < c;) o[o.t++] = 0;
            for (; --_ >= 0;) {
              var m = r[--g] == h ? this.DM : Math.floor(r[g] * p + (r[g - 1] + d) * f);
              if ((r[g] += o.am(0, m, r, _, 0, c)) < m)
                for (o.dlShiftTo(_, y), r.subTo(y, r); r[g] < --m;) r.subTo(y, r);
            }
            null != e && (r.drShiftTo(c, e), s != a && Sn.ZERO.subTo(e, e)), r.t = c, r.clamp(), u > 0 && r.rShiftTo(u, r), 0 > s && Sn.ZERO.subTo(r, r);
          }
        }
      }, Sn.prototype.invDigit = function () {
        if (this.t < 1) return 0;
        var t = this[0];
        if (0 == (1 & t)) return 0;
        var e = 3 & t;
        return (e = (e = (e = (e = e * (2 - (15 & t) * e) & 15) * (2 - (255 & t) * e) & 255) * (2 - ((65535 & t) * e & 65535)) & 65535) * (2 - t * e % this.DV) % this.DV) > 0 ? this.DV - e : -e
      }, Sn.prototype.isEven = function () {
        return 0 == (this.t > 0 ? 1 & this[0] : this.s)
      }, Sn.prototype.exp = function (t, e) {
        if (t > 4294967295 || 1 > t) return Sn.ONE;
        var r = Cn(),
          i = Cn(),
          n = e.convert(this),
          o = Pn(t) - 1;
        for (n.copyTo(r); --o >= 0;)
          if (e.sqrTo(r, i), (t & 1 << o) > 0) e.mulTo(i, n, r);
          else {
            var s = r;
            r = i, i = s;
          } return e.revert(r)
      }, Sn.prototype.toString = function (t) {
        if (this.s < 0) return "-" + this.negate().toString(t);
        var e;
        if (16 == t) e = 4;
        else if (8 == t) e = 3;
        else if (2 == t) e = 1;
        else if (32 == t) e = 5;
        else {
          if (4 != t) return this.toRadix(t);
          e = 2;
        }
        var r, i = (1 << e) - 1,
          n = !1,
          o = "",
          s = this.t,
          a = this.DB - s * this.DB % e;
        if (s-- > 0)
          for (a < this.DB && (r = this[s] >> a) > 0 && (n = !0, o = In(r)); s >= 0;) e > a ? (r = (this[s] & (1 << a) - 1) << e - a, r |= this[--s] >> (a += this.DB - e)) : (r = this[s] >> (a -= e) & i, 0 >= a && (a += this.DB, --s)), r > 0 && (n = !0), n && (o += In(r));
        return n ? o : "0"
      }, Sn.prototype.negate = function () {
        var t = Cn();
        return Sn.ZERO.subTo(this, t), t
      }, Sn.prototype.abs = function () {
        return this.s < 0 ? this.negate() : this
      }, Sn.prototype.compareTo = function (t) {
        var e = this.s - t.s;
        if (0 != e) return e;
        var r = this.t;
        if (0 != (e = r - t.t)) return this.s < 0 ? -e : e;
        for (; --r >= 0;)
          if (0 != (e = this[r] - t[r])) return e;
        return 0
      }, Sn.prototype.bitLength = function () {
        return this.t <= 0 ? 0 : this.DB * (this.t - 1) + Pn(this[this.t - 1] ^ this.s & this.DM)
      }, Sn.prototype.mod = function (t) {
        var e = Cn();
        return this.abs().divRemTo(t, null, e), this.s < 0 && e.compareTo(Sn.ZERO) > 0 && t.subTo(e, e), e
      }, Sn.prototype.modPowInt = function (t, e) {
        var r;
        return r = 256 > t || e.isEven() ? new Dn(e) : new Nn(e), this.exp(t, r)
      }, Sn.ZERO = Tn(0), Sn.ONE = Tn(1), jn.prototype.convert = Gn, jn.prototype.revert = Gn, jn.prototype.mulTo = function (t, e, r) {
        t.multiplyTo(e, r);
      }, jn.prototype.sqrTo = function (t, e) {
        t.squareTo(e);
      }, Xn.prototype.convert = function (t) {
        if (t.s < 0 || t.t > 2 * this.m.t) return t.mod(this.m);
        if (t.compareTo(this.m) < 0) return t;
        var e = Cn();
        return t.copyTo(e), this.reduce(e), e
      }, Xn.prototype.revert = function (t) {
        return t
      }, Xn.prototype.reduce = function (t) {
        for (t.drShiftTo(this.m.t - 1, this.r2), t.t > this.m.t + 1 && (t.t = this.m.t + 1, t.clamp()), this.mu.multiplyUpperTo(this.r2, this.m.t + 1, this.q3), this.m.multiplyLowerTo(this.q3, this.m.t + 1, this.r2); t.compareTo(this.r2) < 0;) t.dAddOffset(1, this.m.t + 1);
        for (t.subTo(this.r2, t); t.compareTo(this.m) >= 0;) t.subTo(this.m, t);
      }, Xn.prototype.mulTo = function (t, e, r) {
        t.multiplyTo(e, r), this.reduce(r);
      }, Xn.prototype.sqrTo = function (t, e) {
        t.squareTo(e), this.reduce(e);
      };
      var Zn = [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173, 179, 181, 191, 193, 197, 199, 211, 223, 227, 229, 233, 239, 241, 251, 257, 263, 269, 271, 277, 281, 283, 293, 307, 311, 313, 317, 331, 337, 347, 349, 353, 359, 367, 373, 379, 383, 389, 397, 401, 409, 419, 421, 431, 433, 439, 443, 449, 457, 461, 463, 467, 479, 487, 491, 499, 503, 509, 521, 523, 541, 547, 557, 563, 569, 571, 577, 587, 593, 599, 601, 607, 613, 617, 619, 631, 641, 643, 647, 653, 659, 661, 673, 677, 683, 691, 701, 709, 719, 727, 733, 739, 743, 751, 757, 761, 769, 773, 787, 797, 809, 811, 821, 823, 827, 829, 839, 853, 857, 859, 863, 877, 881, 883, 887, 907, 911, 919, 929, 937, 941, 947, 953, 967, 971, 977, 983, 991, 997],
        Yn = (1 << 26) / Zn[Zn.length - 1];
      Sn.prototype.chunkSize = function (t) {
        return Math.floor(Math.LN2 * this.DB / Math.log(t))
      }, Sn.prototype.toRadix = function (t) {
        if (null == t && (t = 10), 0 == this.signum() || 2 > t || t > 36) return "0";
        var e = this.chunkSize(t),
          r = Math.pow(t, e),
          i = Tn(r),
          n = Cn(),
          o = Cn(),
          s = "";
        for (this.divRemTo(i, n, o); n.signum() > 0;) s = (r + o.intValue()).toString(t).substr(1) + s, n.divRemTo(i, n, o);
        return o.intValue().toString(t) + s
      }, Sn.prototype.fromRadix = function (t, e) {
        this.fromInt(0), null == e && (e = 10);
        for (var r = this.chunkSize(e), i = Math.pow(e, r), n = !1, o = 0, s = 0, a = 0; a < t.length; ++a) {
          var u = Mn(t, a);
          0 > u ? "-" == t.charAt(a) && 0 == this.signum() && (n = !0) : (s = e * s + u, ++o >= r && (this.dMultiply(i), this.dAddOffset(s, 0), o = 0, s = 0));
        }
        o > 0 && (this.dMultiply(Math.pow(e, o)), this.dAddOffset(s, 0)), n && Sn.ZERO.subTo(this, this);
      }, Sn.prototype.fromNumber = function (t, e, r) {
        if ("number" == typeof e)
          if (2 > t) this.fromInt(1);
          else
            for (this.fromNumber(t, r), this.testBit(t - 1) || this.bitwiseTo(Sn.ONE.shiftLeft(t - 1), Bn, this), this.isEven() && this.dAddOffset(1, 0); !this.isProbablePrime(e);) this.dAddOffset(2, 0), this.bitLength() > t && this.subTo(Sn.ONE.shiftLeft(t - 1), this);
        else {
          var i = new Array,
            n = 7 & t;
          i.length = 1 + (t >> 3), e.nextBytes(i), n > 0 ? i[0] &= (1 << n) - 1 : i[0] = 0, this.fromString(i, 256);
        }
      }, Sn.prototype.bitwiseTo = function (t, e, r) {
        var i, n, o = Math.min(t.t, this.t);
        for (i = 0; o > i; ++i) r[i] = e(this[i], t[i]);
        if (t.t < this.t) {
          for (n = t.s & this.DM, i = o; i < this.t; ++i) r[i] = e(this[i], n);
          r.t = this.t;
        } else {
          for (n = this.s & this.DM, i = o; i < t.t; ++i) r[i] = e(n, t[i]);
          r.t = t.t;
        }
        r.s = e(this.s, t.s), r.clamp();
      }, Sn.prototype.changeBit = function (t, e) {
        var r = Sn.ONE.shiftLeft(t);
        return this.bitwiseTo(r, e, r), r
      }, Sn.prototype.addTo = function (t, e) {
        for (var r = 0, i = 0, n = Math.min(t.t, this.t); n > r;) i += this[r] + t[r], e[r++] = i & this.DM, i >>= this.DB;
        if (t.t < this.t) {
          for (i += t.s; r < this.t;) i += this[r], e[r++] = i & this.DM, i >>= this.DB;
          i += this.s;
        } else {
          for (i += this.s; r < t.t;) i += t[r], e[r++] = i & this.DM, i >>= this.DB;
          i += t.s;
        }
        e.s = 0 > i ? -1 : 0, i > 0 ? e[r++] = i : -1 > i && (e[r++] = this.DV + i), e.t = r, e.clamp();
      }, Sn.prototype.dMultiply = function (t) {
        this[this.t] = this.am(0, t - 1, this, 0, 0, this.t), ++this.t, this.clamp();
      }, Sn.prototype.dAddOffset = function (t, e) {
        if (0 != t) {
          for (; this.t <= e;) this[this.t++] = 0;
          for (this[e] += t; this[e] >= this.DV;) this[e] -= this.DV, ++e >= this.t && (this[this.t++] = 0), ++this[e];
        }
      }, Sn.prototype.multiplyLowerTo = function (t, e, r) {
        var i, n = Math.min(this.t + t.t, e);
        for (r.s = 0, r.t = n; n > 0;) r[--n] = 0;
        for (i = r.t - this.t; i > n; ++n) r[n + this.t] = this.am(0, t[n], r, n, 0, this.t);
        for (i = Math.min(t.t, e); i > n; ++n) this.am(0, t[n], r, n, 0, e - n);
        r.clamp();
      }, Sn.prototype.multiplyUpperTo = function (t, e, r) {
        --e;
        var i = r.t = this.t + t.t - e;
        for (r.s = 0; --i >= 0;) r[i] = 0;
        for (i = Math.max(e - this.t, 0); i < t.t; ++i) r[this.t + i - e] = this.am(e - i, t[i], r, 0, 0, this.t + i - e);
        r.clamp(), r.drShiftTo(1, r);
      }, Sn.prototype.modInt = function (t) {
        if (0 >= t) return 0;
        var e = this.DV % t,
          r = this.s < 0 ? t - 1 : 0;
        if (this.t > 0)
          if (0 == e) r = this[0] % t;
          else
            for (var i = this.t - 1; i >= 0; --i) r = (e * r + this[i]) % t;
        return r
      }, Sn.prototype.millerRabin = function (t) {
        var e = this.subtract(Sn.ONE),
          r = e.getLowestSetBit();
        if (0 >= r) return !1;
        var i = e.shiftRight(r);
        (t = t + 1 >> 1) > Zn.length && (t = Zn.length);
        for (var n = Cn(), o = 0; t > o; ++o) {
          n.fromInt(Zn[Math.floor(Math.random() * Zn.length)]);
          var s = n.modPow(i, this);
          if (0 != s.compareTo(Sn.ONE) && 0 != s.compareTo(e)) {
            for (var a = 1; a++ < r && 0 != s.compareTo(e);)
              if (0 == (s = s.modPowInt(2, this)).compareTo(Sn.ONE)) return !1;
            if (0 != s.compareTo(e)) return !1
          }
        }
        return !0
      }, Sn.prototype.clone = function () {
        var t = Cn();
        return this.copyTo(t), t
      }, Sn.prototype.intValue = function () {
        if (this.s < 0) {
          if (1 == this.t) return this[0] - this.DV;
          if (0 == this.t) return -1
        } else {
          if (1 == this.t) return this[0];
          if (0 == this.t) return 0
        }
        return (this[1] & (1 << 32 - this.DB) - 1) << this.DB | this[0]
      }, Sn.prototype.byteValue = function () {
        return 0 == this.t ? this.s : this[0] << 24 >> 24
      }, Sn.prototype.shortValue = function () {
        return 0 == this.t ? this.s : this[0] << 16 >> 16
      }, Sn.prototype.signum = function () {
        return this.s < 0 ? -1 : this.t <= 0 || 1 == this.t && this[0] <= 0 ? 0 : 1
      }, Sn.prototype.toByteArray = function () {
        var t = this.t,
          e = new Array;
        e[0] = this.s;
        var r, i = this.DB - t * this.DB % 8,
          n = 0;
        if (t-- > 0)
          for (i < this.DB && (r = this[t] >> i) != (this.s & this.DM) >> i && (e[n++] = r | this.s << this.DB - i); t >= 0;) 8 > i ? (r = (this[t] & (1 << i) - 1) << 8 - i, r |= this[--t] >> (i += this.DB - 8)) : (r = this[t] >> (i -= 8) & 255, 0 >= i && (i += this.DB, --t)), 0 != (128 & r) && (r |= -256), 0 == n && (128 & this.s) != (128 & r) && ++n, (n > 0 || r != this.s) && (e[n++] = r);
        return e
      }, Sn.prototype.equals = function (t) {
        return 0 == this.compareTo(t)
      }, Sn.prototype.min = function (t) {
        return this.compareTo(t) < 0 ? this : t
      }, Sn.prototype.max = function (t) {
        return this.compareTo(t) > 0 ? this : t
      }, Sn.prototype.and = function (t) {
        var e = Cn();
        return this.bitwiseTo(t, kn, e), e
      }, Sn.prototype.or = function (t) {
        var e = Cn();
        return this.bitwiseTo(t, Bn, e), e
      }, Sn.prototype.xor = function (t) {
        var e = Cn();
        return this.bitwiseTo(t, zn, e), e
      }, Sn.prototype.andNot = function (t) {
        var e = Cn();
        return this.bitwiseTo(t, Vn, e), e
      }, Sn.prototype.not = function () {
        for (var t = Cn(), e = 0; e < this.t; ++e) t[e] = this.DM & ~this[e];
        return t.t = this.t, t.s = ~this.s, t
      }, Sn.prototype.shiftLeft = function (t) {
        var e = Cn();
        return 0 > t ? this.rShiftTo(-t, e) : this.lShiftTo(t, e), e
      }, Sn.prototype.shiftRight = function (t) {
        var e = Cn();
        return 0 > t ? this.lShiftTo(-t, e) : this.rShiftTo(t, e), e
      }, Sn.prototype.getLowestSetBit = function () {
        for (var t = 0; t < this.t; ++t)
          if (0 != this[t]) return t * this.DB + Un(this[t]);
        return this.s < 0 ? this.t * this.DB : -1
      }, Sn.prototype.bitCount = function () {
        for (var t = 0, e = this.s & this.DM, r = 0; r < this.t; ++r) t += qn(this[r] ^ e);
        return t
      }, Sn.prototype.testBit = function (t) {
        var e = Math.floor(t / this.DB);
        return e >= this.t ? 0 != this.s : 0 != (this[e] & 1 << t % this.DB)
      }, Sn.prototype.setBit = function (t) {
        return this.changeBit(t, Bn)
      }, Sn.prototype.clearBit = function (t) {
        return this.changeBit(t, Vn)
      }, Sn.prototype.flipBit = function (t) {
        return this.changeBit(t, zn)
      }, Sn.prototype.add = function (t) {
        var e = Cn();
        return this.addTo(t, e), e
      }, Sn.prototype.subtract = function (t) {
        var e = Cn();
        return this.subTo(t, e), e
      }, Sn.prototype.multiply = function (t) {
        var e = Cn();
        return this.multiplyTo(t, e), e
      }, Sn.prototype.divide = function (t) {
        var e = Cn();
        return this.divRemTo(t, e, null), e
      }, Sn.prototype.remainder = function (t) {
        var e = Cn();
        return this.divRemTo(t, null, e), e
      }, Sn.prototype.divideAndRemainder = function (t) {
        var e = Cn(),
          r = Cn();
        return this.divRemTo(t, e, r), new Array(e, r)
      }, Sn.prototype.modPow = function (t, e) {
        var r, i, n = t.bitLength(),
          o = Tn(1);
        if (0 >= n) return o;
        r = 18 > n ? 1 : 48 > n ? 3 : 144 > n ? 4 : 768 > n ? 5 : 6, i = 8 > n ? new Dn(e) : e.isEven() ? new Xn(e) : new Nn(e);
        var s = new Array,
          a = 3,
          u = r - 1,
          c = (1 << r) - 1;
        if (s[1] = i.convert(this), r > 1) {
          var h = Cn();
          for (i.sqrTo(s[1], h); c >= a;) s[a] = Cn(), i.mulTo(h, s[a - 2], s[a]), a += 2;
        }
        var l, p, f = t.t - 1,
          d = !0,
          g = Cn();
        for (n = Pn(t[f]) - 1; f >= 0;) {
          for (n >= u ? l = t[f] >> n - u & c : (l = (t[f] & (1 << n + 1) - 1) << u - n, f > 0 && (l |= t[f - 1] >> this.DB + n - u)), a = r; 0 == (1 & l);) l >>= 1, --a;
          if ((n -= a) < 0 && (n += this.DB, --f), d) s[l].copyTo(o), d = !1;
          else {
            for (; a > 1;) i.sqrTo(o, g), i.sqrTo(g, o), a -= 2;
            a > 0 ? i.sqrTo(o, g) : (p = o, o = g, g = p), i.mulTo(g, s[l], o);
          }
          for (; f >= 0 && 0 == (t[f] & 1 << n);) i.sqrTo(o, g), p = o, o = g, g = p, --n < 0 && (n = this.DB - 1, --f);
        }
        return i.revert(o)
      }, Sn.prototype.modInverse = function (t) {
        var e = t.isEven();
        if (this.isEven() && e || 0 == t.signum()) return Sn.ZERO;
        for (var r = t.clone(), i = this.clone(), n = Tn(1), o = Tn(0), s = Tn(0), a = Tn(1); 0 != r.signum();) {
          for (; r.isEven();) r.rShiftTo(1, r), e ? (n.isEven() && o.isEven() || (n.addTo(this, n), o.subTo(t, o)), n.rShiftTo(1, n)) : o.isEven() || o.subTo(t, o), o.rShiftTo(1, o);
          for (; i.isEven();) i.rShiftTo(1, i), e ? (s.isEven() && a.isEven() || (s.addTo(this, s), a.subTo(t, a)), s.rShiftTo(1, s)) : a.isEven() || a.subTo(t, a), a.rShiftTo(1, a);
          r.compareTo(i) >= 0 ? (r.subTo(i, r), e && n.subTo(s, n), o.subTo(a, o)) : (i.subTo(r, i), e && s.subTo(n, s), a.subTo(o, a));
        }
        return 0 != i.compareTo(Sn.ONE) ? Sn.ZERO : a.compareTo(t) >= 0 ? a.subtract(t) : a.signum() < 0 ? (a.addTo(t, a), a.signum() < 0 ? a.add(t) : a) : a
      }, Sn.prototype.pow = function (t) {
        return this.exp(t, new jn)
      }, Sn.prototype.gcd = function (t) {
        var e = this.s < 0 ? this.negate() : this.clone(),
          r = t.s < 0 ? t.negate() : t.clone();
        if (e.compareTo(r) < 0) {
          var i = e;
          e = r, r = i;
        }
        var n = e.getLowestSetBit(),
          o = r.getLowestSetBit();
        if (0 > o) return e;
        for (o > n && (o = n), o > 0 && (e.rShiftTo(o, e), r.rShiftTo(o, r)); e.signum() > 0;)(n = e.getLowestSetBit()) > 0 && e.rShiftTo(n, e), (n = r.getLowestSetBit()) > 0 && r.rShiftTo(n, r), e.compareTo(r) >= 0 ? (e.subTo(r, e), e.rShiftTo(1, e)) : (r.subTo(e, r), r.rShiftTo(1, r));
        return o > 0 && r.lShiftTo(o, r), r
      }, Sn.prototype.isProbablePrime = function (t) {
        var e, r = this.abs();
        if (1 == r.t && r[0] <= Zn[Zn.length - 1]) {
          for (e = 0; e < Zn.length; ++e)
            if (r[0] == Zn[e]) return !0;
          return !1
        }
        if (r.isEven()) return !1;
        for (e = 1; e < Zn.length;) {
          for (var i = Zn[e], n = e + 1; n < Zn.length && Yn > i;) i *= Zn[n++];
          for (i = r.modInt(i); n > e;)
            if (i % Zn[e++] == 0) return !1
        }
        return r.millerRabin(t)
      }, Sn.prototype.square = function () {
        var t = Cn();
        return this.squareTo(t), t
      };
      var Wn = {
          baseUrl: t.config.API_URL
        },
        Hn = function (e) {
          this.options = t.extend({}, Wn, e), this._requestManager = new t.RequestManager(null, "");
        };
      Hn.prototype.makeAPIURL = function (t) {
        return this.getBaseUrl() + t
      }, Hn.prototype.getBaseUrl = function () {
        return new RegExp("^http").test(this.options.baseUrl) ? this.options.baseUrl : this._detectPath() + "/" + this.options.baseUrl
      }, Hn.prototype.delEmptyObj = function (t) {
        for (var e in t) !t.hasOwnProperty(e) || null !== t[e] && void 0 !== t[e] && "" !== t[e] || delete t[e];
        return t
      }, Hn.prototype.formatLnglat = function (t) {
        return t instanceof Array && (t = [t[0].toFixed(6), t[1].toFixed(6)]), t
      }, Hn.prototype.getStyleUrl = function (t, e) {
        return this._requestManager.normalizeStyleURL(t, e)
      }, Hn.prototype.ajax = function (e, r) {
        (e = e || {}).method = e.method ? e.method.toUpperCase() : "POST", e.url = e.url || "", e.async = e.async || !0, e.data = e.data || null;
        var i = null,
          n = null;
        return new Promise(function (r, o) {
          i = XMLHttpRequest ? new XMLHttpRequest : new ActiveXObject("Microsoft.XMLHTTP");
          var s = [];
          for (var a in e.data) s.push(a + "=" + e.data[a]);
          n = s.join("&"), "POST" === e.method.toUpperCase() ? (i.open(e.method, e.url, e.async), "json" === e.type ? (n = JSON.stringify(e.data), i.setRequestHeader("Content-Type", "application/json;charset=UTF-8")) : i.setRequestHeader("Content-Type", "application/x-www-form-urlencoded;charset=utf-8")) : "GET" === e.method.toUpperCase() && i.open(e.method, n ? e.url + "?" + n : e.url, e.async), "arrayBuffer" === e.type && (i.responseType = "arraybuffer"), i.onreadystatechange = function () {
            if (4 == i.readyState)
              if (200 == i.status) try {
                var t;
                t = "arrayBuffer" != e.type ? JSON.parse(i.responseText) : i.response, r(t);
              } catch (t) {
                o(this._detectError(JSON.parse(i.responseText)));
              } else try {
                o(this._detectError(JSON.parse(i.responseText)));
              } catch (t) {
                throw new Error("请求错误，请检查网络异常111")
              }
          }.bind(this), e.accessToken = void 0 !== e.accessToken ? e.accessToken : t.config.ACCESS_TOKEN, e.accessToken && !e.refresh && i.setRequestHeader("Authorization", e.accessToken), "POST" === e.method.toUpperCase() ? i.send(n) : "GET" === e.method.toUpperCase() && i.send(null);
        }.bind(this))
      }, Hn.prototype._detectError = function (t) {
        try {
          throw new Error(t.code + ":" + t.message)
        } catch (t) {
          throw new Error("请求错误，请检查网络异常")
        }
      }, Hn.prototype._detectPath = function () {
        var t = document.createElement("div");
        t.className = "epgis-other", document.head.appendChild(t);
        var e = this._getStyle(t, "background-image") || this._getStyle(t, "backgroundImage");
        return document.head.removeChild(t), 0 === e.indexOf("url") ? e.replace(/^url\([\"\']?/, "").replace(/sg-icon\.png[\"\']?\)$/, "").split("/").splice(0, 3).join("/") : ""
      }, Hn.prototype._getStyle = function (t, e) {
        var r = t.style[e] || t.currentStyle && t.currentStyle[e];
        if ((!r || "auto" === r) && document.defaultView) {
          var i = document.defaultView.getComputedStyle(t, null);
          r = i ? i[e] : null;
        }
        return "auto" === r ? null : r
      }, Hn.prototype.encode = function (t) {
        return this._Jm(t, function (t) {
          return [Math.round(1e5 * t[1]), Math.round(1e5 * t[0])]
        })
      }, Hn.prototype.decode = function (t) {
        for (var e = [], r = this._w(t), i = Array(Math.floor(t.length / 2)), n = 0, o = 0, s = 0, a = 0; n < r; ++a) {
          var u = 1,
            c = 0;
          do {
            var h = t.charCodeAt(n++) - 63 - 1;
            u += h << c, c += 5;
          } while (31 <= h);
          o += 1 & u ? ~(u >> 1) : u >> 1, u = 1, c = 0;
          do {
            u += (h = t.charCodeAt(n++) - 63 - 1) << c, c += 5;
          } while (31 <= h);
          s += 1 & u ? ~(u >> 1) : u >> 1, i[a] = new this._F(1e-5 * o, 1e-5 * s, !0), e.push([1e-5 * s, 1e-5 * o]);
        }
        return i.length = a, e
      }, Hn.prototype._Jm = function (t, e) {
        for (var r, i = [], n = [0, 0], o = 0, s = this._w(t); o < s; ++o) r = e ? e(t[o]) : t[o], this._zh(r[0] - n[0], i), this._zh(r[1] - n[1], i), n = r;
        return i.join("")
      }, Hn.prototype._zh = function (t, e) {
        return this._Km(0 > t ? ~(t << 1) : t << 1, e)
      }, Hn.prototype._Km = function (t, e) {
        for (; 32 <= t;) e.push(String.fromCharCode(63 + (32 | 31 & t))), t >>= 5;
        return e.push(String.fromCharCode(t + 63)), e
      }, Hn.prototype._w = function (t) {
        return t ? t.length : 0
      }, Hn.prototype._F = function (t, e, r) {
        if (t && (void 0 !== t.lat || void 0 !== t.lng)) try {
          Ac(t), e = t.lng, t = t.lat, r = !1;
        } catch (t) {
          _.oc(t);
        }
        t -= 0, e -= 0, r || (t = this._fb(t, -90, 90), 180 != e && (e = this._gb(e, -180, 180))), this.lat = function () {
          return t
        }, this.lng = function () {
          return e
        };
      }, Hn.prototype._fb = function (t, e, r) {
        return null != e && (t = Math.max(t, e)), null != r && (t = Math.min(t, r)), t
      }, Hn.prototype._gb = function (t, e, r) {
        return ((t - e) % (r -= e) + r) % r + e
      }, Hn.prototype.md5 = function (t) {
        return bn(t)
      }, Hn.prototype.encryptByDESModeEBC = function (t, e) {
        if (!pn) return null;
        var r = pn.enc.Utf8.parse(e);
        return gn.encrypt(pn.enc.Utf8.parse(t), r, {
          mode: pn.mode.ECB,
          padding: pn.pad.Pkcs7
        }).ciphertext.toString(pn.enc.Base64)
      }, Hn.prototype.sm3 = function (t) {
        return function (t) {
          if (null == t || "" == t) return "";
          var e = [],
            r = new Ln,
            i = En.enc.Utf8.parse(t);
          return i = r.GetWords(i.toString()), r.BlockUpdate(i, 0, i.length), (r.DoFinal(e, 0), r.GetHex(e)).toString()
        }(t)
      }, Hn.prototype.decryptByDESModeEBC = function (t, e) {
        if (!pn) return null;
        var r = pn.enc.Utf8.parse(e);
        return gn.decrypt({
          ciphertext: pn.enc.Base64.parse(t)
        }, r, {
          mode: pn.mode.ECB,
          padding: pn.pad.Pkcs7
        }).toString(pn.enc.Utf8)
      };
      var Kn = function (t) {
          function e() {
            t.call(this), this._coordTransformUrl = this.makeAPIURL("geoconv/v2");
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.convertCoord = function (t, e) {
            var r = e.from || 1,
              i = t,
              n = t instanceof Array ? 0 : 3;
            if (0 == n) {
              for (var o = 0, s = i; o < s.length; o += 1) {
                var a = s[o];
                a = a.toString();
              }
              i = i.join(";");
            }
            return this.ajax({
              url: this._coordTransformUrl,
              data: {
                coords: i,
                from: r,
                encode: n
              },
              method: "POST"
            }).then(function (t) {
              var e = t.value;
              if (e instanceof Array) {
                for (var r = [], i = 0, n = e; i < n.length; i += 1) {
                  var o = n[i];
                  r.push([o.x, o.y]);
                }
                e = r;
              }
              return e
            }.bind(this)).catch(function (t) {
              throw new Error(t)
            })
          }, e
        }(Hn),
        Jn = function (t) {
          function e(e) {
            t.call(this, e), this._convertTask = new Kn;
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype._onSuccess = function (t) {
            if (this.options.trackUserLocation) switch (this._lastKnownPosition = t, this._watchState) {
              case "WAITING_ACTIVE":
              case "ACTIVE_LOCK":
              case "ACTIVE_ERROR":
                this._watchState = "ACTIVE_LOCK", this._geolocateButton.classList.remove("epgis-ctrl-geolocate-waiting"), this._geolocateButton.classList.remove("epgis-ctrl-geolocate-active-error"), this._geolocateButton.classList.add("epgis-ctrl-geolocate-active");
                break;
              case "BACKGROUND":
              case "BACKGROUND_ERROR":
                this._watchState = "BACKGROUND", this._geolocateButton.classList.remove("epgis-ctrl-geolocate-waiting"), this._geolocateButton.classList.remove("epgis-ctrl-geolocate-background-error"), this._geolocateButton.classList.add("epgis-ctrl-geolocate-background");
            }
            this._convertTask.convertCoord([
              [t.coords.longitude, t.coords.latitude]
            ], {
              from: 1
            }).then(function (e) {
              var r = {
                coords: {
                  longitude: e[0][0],
                  latitude: e[0][1],
                  accuracy: t.coords.accuracy
                }
              };
              this.options.showUserLocation && "OFF" !== this._watchState && this._updateMarker(r), this.options.trackUserLocation && "ACTIVE_LOCK" !== this._watchState || this._updateCamera(r), this.options.showUserLocation && this._dotElement.classList.remove("epgis-user-location-dot-stale"), this.fire(new Event("geolocate", r)), this._finish();
            }.bind(this));
          }, e
        }(hn),
        Qn = function () {
          t.bindAll(["_onClickPitch", "_changeIcon"], this);
        };
      Qn.prototype.getDefaultPosition = function () {
        return "bottom-right"
      }, Qn.prototype.onAdd = function (t) {
        return this._map = t, this._container = r.create("div", "epgis-ctrl epgis-ctrl-group"), this._pitchControlBtn = r.create("button", "epgis-ctrl-pitch-text", this._container), this._pitchControlBtn.innerHTML = "2D", this._pitchControlBtn.addEventListener("click", this._onClickPitch), this._map.on("pitch", this._changeIcon), this._container
      }, Qn.prototype.onRemove = function () {
        this._map.off("pitch", this._changeIcon), r.remove(this._container);
      }, Qn.prototype._onClickPitch = function () {
        this._ispitch ? (this._pitchControlBtn.innerHTML = "2D", this._map.easeTo({
          pitch: 0
        }), this._ispitch = !1) : (this._pitchControlBtn.innerHTML = "threeD", this._map.easeTo({
          pitch: 50
        }), this._ispitch = !0);
      }, Qn.prototype._changeIcon = function () {
        0 != this._map.getPitch() ? (this._pitchControlBtn.innerHTML = "threeD", this._ispitch = !0) : (this._pitchControlBtn.innerHTML = "2D", this._ispitch = !1);
      };
      var $n = function (e) {
        this.options = e, t.bindAll(["_onMove"], this);
      };
  
      function to(t, e, r, i, n) {
        var o, s, a, u = (o = r, (s = Math.pow(10, ("" + Math.floor(o)).length - 1)) * (a = (a = o / s) >= 10 ? 10 : a >= 5 ? 5 : a >= 3 ? 3 : a >= 2 ? 2 : 1)),
          c = u / r;
        "m" === i && u >= 1e3 && (u /= 1e3, i = "km"), t.style.width = e * c + "px", n.innerHTML = u + i;
      }
      $n.prototype.getDefaultPosition = function () {
        return "bottom-left"
      }, $n.prototype._onMove = function () {
        ! function (e, r, i, n) {
          var o = i && i.maxWidth || 100,
            s = e._container.clientHeight / 2,
            a = function (e, r) {
              if ("EPSG:4326" == t.config.PROJECT_TYPE) return Math.sqrt(Math.pow(Math.abs(e.lat - r.lat), 2) + Math.pow(Math.abs(e.lng - r.lng), 2));
              var i = Math.PI / 180,
                n = e.lat * i,
                o = r.lat * i,
                s = Math.sin(n) * Math.sin(o) + Math.cos(n) * Math.cos(o) * Math.cos((r.lng - e.lng) * i);
              return 6371e3 * Math.acos(Math.min(s, 1))
            }(e.unproject([0, s]), e.unproject([o, s]));
          if (i && "imperial" === i.unit) {
            var u = 3.2808 * a;
            if (u > 5280) to(r, o, u / 5280, "mi", n);
            else to(r, o, u, "ft", n);
          } else if (i && "nautical" === i.unit) {
            to(r, o, a / 1852, "nm", n);
          } else to(r, o, a, "m", n);
        }(this._map, this._container, this.options, this._scaleTxt);
      }, $n.prototype.onAdd = function (t) {
        return this._map = t, this._container = r.create("div", "epgis-ctrl epgis-ctrl-scale2", t.getContainer()), this._scaleTxt = r.create("div", "epgis-scaleTxt", this._container), r.create("div", "epgis-scaleBarBG epgis-scaleHBarBG", this._container), r.create("div", "epgis-scaleBarBG epgis-scaleRBarBG", this._container), r.create("div", "epgis-scaleBarBG epgis-scaleLBarBG", this._container), r.create("div", "epgis-scaleBar epgis-scaleHBar", this._container), r.create("div", "epgis-scaleBar epgis-scaleRBar", this._container), r.create("div", "epgis-scaleBar epgis-scaleLBar", this._container), this._map.on("move", this._onMove), this._onMove(), this._container
      }, $n.prototype.onRemove = function () {
        r.remove(this._container), this._map.off("move", this._onMove), this._map = void 0;
      };
      var eo = {
          id: "minimap",
          position: "bottom-left",
          width: "150px",
          height: "100px",
          style: "aegis://styles/aegis/Streets",
          center: [0, 0],
          zoom: 4,
          zoomAdjust: null,
          zoomLevels: [
            [18, 12, 15],
            [16, 10, 13],
            [14, 8, 11],
            [12, 6, 9],
            [10, 4, 7],
            [8, 2, 5],
            [6, 0, 3],
            [4, 0, 0],
            [0, 0, 0]
          ],
          bounds: "parent",
          lineColor: "#08F",
          lineWidth: 1,
          lineOpacity: 1,
          fillColor: "#F80",
          fillOpacity: .25,
          dragPan: !1,
          scrollZoom: !1,
          boxZoom: !1,
          dragRotate: !1,
          keyboard: !1,
          doubleClickZoom: !1,
          touchZoomRotate: !1
        },
        ro = function (e) {
          this.options = t.extend({}, eo, e), this._ticking = !1, this._lastMouseMoveEvent = null, this._parentMap = null, this._isDragging = !1, this._isCursorOverFeature = !1, this._previousPoint = [0, 0], this._currentPoint = [0, 0], this._trackingRectCoordinates = [
            [
              [],
              [],
              [],
              [],
              []
            ]
          ];
        };
      ro.prototype.getDefaultPosition = function () {
        return "bottom-right"
      }, ro.prototype.onAdd = function (t) {
        this._parentMap = t;
        var e = this.options,
          r = this._container = this._createContainer(t);
        return (this._miniMap = new epgis.Map({
          logoAtrribution: !1,
          container: r,
          style: e.style,
          zoom: e.zoom,
          center: e.center,
          localIdeographFontFamily: "Microsoft YoHei"
        })).on("load", this._load.bind(this)), this._borderContainer = document.createElement("div"), this._borderContainer.className = "mini_map_container epgis-ctrl", this._toggleBtn = document.createElement("a"), this._toggleBtn.className = "mini_map_toggle_btn", this._toggleBtn.title = "隐藏", borderContainer.appendChild(this._toggleBtn), borderContainer.appendChild(r), this._theMiniControl = this._miniControl.bind(this), this._toggleBtn.addEventListener("click", this._theMiniControl), this._borderContainer
      }, ro.prototype.onRemove = function () {
        this._miniMap.remove(), r.removeEventListener(this._toggleBtn, "click", this._theMiniControl), r.remove(this._borderContainer), this._parentMap.off("move", this._theUpdate), delete this._parentMap;
      }, ro.prototype._miniControl = function () {
        this._miniControlHide ? (this._miniControlHide = !1, this._container.setAttribute("style", "width: " + this.options.width + "; height: " + this.options.height + ";display: block;"), this._toggleBtn.className = "mini_map_toggle_btn", this._toggleBtn.title = "隐藏") : (this._miniControlHide = !0, this._container.setAttribute("style", "display:none;"), this._toggleBtn.className = "mini_map_toggle_btn egis-minimap-btn-tranform", this._toggleBtn.title = "鹰眼图");
      }, ro.prototype._load = function () {
        var t = this.options,
          e = this._parentMap,
          r = this._miniMap;
        ["dragPan", "scrollZoom", "boxZoom", "dragRotate", "keyboard", "doubleClickZoom", "touchZoomRotate"].forEach(function (e) {
          !0 !== t[e] && r[e].disable();
        }), "function" == typeof t.zoomAdjust ? this.options.zoomAdjust = t.zoomAdjust.bind(this) : null === t.zoomAdjust && (this.options.zoomAdjust = this._zoomAdjust.bind(this)), "parent" === t.bounds && (t.bounds = e.getBounds()), "object" == typeof t.bounds && r.fitBounds(t.bounds, {
          duration: 50
        });
        var i = r.getBounds();
        this._convertBoundsToPoints(i), r.addSource("trackingRect", {
          type: "geojson",
          data: {
            type: "Feature",
            properties: {
              name: "trackingRect"
            },
            geometry: {
              type: "Polygon",
              coordinates: this._trackingRectCoordinates
            }
          }
        }), r.addLayer({
          id: "trackingRectOutline",
          type: "line",
          source: "trackingRect",
          layout: {},
          paint: {
            "line-color": t.lineColor,
            "line-width": t.lineWidth,
            "line-opacity": t.lineOpacity
          }
        }), r.addLayer({
          id: "trackingRectFill",
          type: "fill",
          source: "trackingRect",
          layout: {},
          paint: {
            "fill-color": t.fillColor,
            "fill-opacity": t.fillOpacity
          }
        }), this._trackingRect = this._miniMap.getSource("trackingRect"), this._update(), this._theUpdate = this._update.bind(this), e.on("move", this._theUpdate), r.on("mousemove", this._mouseMove.bind(this)), r.on("mousedown", this._mouseDown.bind(this), !0), r.on("mouseup", this._mouseUp.bind(this)), r.on("touchmove", this._mouseMove.bind(this)), r.on("touchstart", this._mouseDown.bind(this), !0), r.on("touchend", this._mouseUp.bind(this)), this._miniMapCanvas = r.getCanvasContainer(), this._miniMapCanvas.addEventListener("wheel", this._preventDefault), this._miniMapCanvas.addEventListener("mousewheel", this._preventDefault);
      }, ro.prototype._mouseDown = function (t) {
        this._isCursorOverFeature && (this._isDragging = !0, this._previousPoint = this._currentPoint, this._currentPoint = [t.lngLat.lng, t.lngLat.lat]);
      }, ro.prototype._mouseMove = function (t) {
        this._ticking = !1;
        var e = this._miniMap.queryRenderedFeatures(t.point, {
          layers: ["trackingRectFill"]
        });
        if (this._isCursorOverFeature && e.length > 0 || (this._isCursorOverFeature = e.length > 0, this._miniMapCanvas.style.cursor = this._isCursorOverFeature ? "move" : ""), this._isDragging) {
          this._previousPoint = this._currentPoint, this._currentPoint = [t.lngLat.lng, t.lngLat.lat];
          var r = [this._previousPoint[0] - this._currentPoint[0], this._previousPoint[1] - this._currentPoint[1]],
            i = this._moveTrackingRect(r);
          this._parentMap.fitBounds(i, {
            duration: 80,
            noMoveStart: !0
          });
        }
      }, ro.prototype._mouseUp = function () {
        this._isDragging = !1, this._ticking = !1;
      }, ro.prototype._moveTrackingRect = function (t) {
        var e = this._trackingRect,
          r = e._data,
          i = r.properties.bounds;
        return i._ne.lat -= t[1], i._ne.lng -= t[0], i._sw.lat -= t[1], i._sw.lng -= t[0], this._convertBoundsToPoints(i), e.setData(r), i
      }, ro.prototype._setTrackingRectBounds = function (t) {
        var e = this._trackingRect,
          r = e._data;
        r.properties.bounds = t, this._convertBoundsToPoints(t), e.setData(r);
      }, ro.prototype._convertBoundsToPoints = function (t) {
        var e = t._ne,
          r = t._sw,
          i = this._trackingRectCoordinates;
        i[0][0][0] = e.lng, i[0][0][1] = e.lat, i[0][1][0] = r.lng, i[0][1][1] = e.lat, i[0][2][0] = r.lng, i[0][2][1] = r.lat, i[0][3][0] = e.lng, i[0][3][1] = r.lat, i[0][4][0] = e.lng, i[0][4][1] = e.lat;
      }, ro.prototype._update = function (t) {
        if (!this._isDragging) {
          var e = this._parentMap.getBounds();
          this._setTrackingRectBounds(e), "function" == typeof this.options.zoomAdjust && this.options.zoomAdjust();
        }
      }, ro.prototype._zoomAdjust = function () {
        var t = this._miniMap,
          e = this._parentMap,
          r = parseInt(t.getZoom(), 10),
          i = parseInt(e.getZoom(), 10),
          n = this.options.zoomLevels,
          o = !1;
        n.forEach(function (n) {
          !o && i >= n[0] && (r >= n[1] && t.setZoom(n[2]), t.setCenter(e.getCenter()), o = !0);
        }), o || r === this.options.zoom || ("object" == typeof this.options.bounds && t.fitBounds(this.options.bounds, {
          duration: 50
        }), t.setZoom(this.options.zoom));
      }, ro.prototype._createContainer = function (t) {
        var e = this.options,
          r = document.createElement("div");
        return r.className = "epgis-ctrl-minimap", r.setAttribute("style", "width: " + e.width + "; height: " + e.height + ";"), r.addEventListener("contextmenu", this._preventDefault), t.getContainer().appendChild(r), "" !== e.id && (r.id = e.id), r
      }, ro.prototype._preventDefault = function (t) {
        t.preventDefault();
      };
      var io = function (e) {
        this._fullscreen = !1, e && e.container && (e.container instanceof t.window.HTMLElement ? this._container = e.container : t.warnOnce("Full screen control 'container' must be a DOM element.")), t.bindAll(["_onClickFullscreen", "_changeIcon"], this), "onfullscreenchange" in t.window.document ? this._fullscreenchange = "fullscreenchange" : "onmozfullscreenchange" in t.window.document ? this._fullscreenchange = "mozfullscreenchange" : "onwebkitfullscreenchange" in t.window.document ? this._fullscreenchange = "webkitfullscreenchange" : "onmsfullscreenchange" in t.window.document && (this._fullscreenchange = "MSFullscreenChange"), this._className = "epgis-ctrl";
      };
      io.prototype.onAdd = function (e) {
        return this._map = e, this._container || (this._container = this._map.getContainer()), this._controlContainer = r.create("div", this._className + " epgis-ctrl-group"), this._checkFullscreenSupport() ? this._setupUI() : (this._controlContainer.style.display = "none", t.warnOnce("This device does not support fullscreen mode.")), this._controlContainer
      }, io.prototype.onRemove = function () {
        r.remove(this._controlContainer), this._map = null, t.window.document.removeEventListener(this._fullscreenchange, this._changeIcon);
      }, io.prototype._checkFullscreenSupport = function () {
        return !!(t.window.document.fullscreenEnabled || t.window.document.mozFullScreenEnabled || t.window.document.msFullscreenEnabled || t.window.document.webkitFullscreenEnabled)
      }, io.prototype._setupUI = function () {
        (this._fullscreenButton = r.create("button", this._className + "-icon " + this._className + "-fullscreen", this._controlContainer)).type = "button", this._updateTitle(), this._fullscreenButton.addEventListener("click", this._onClickFullscreen), t.window.document.addEventListener(this._fullscreenchange, this._changeIcon);
      }, io.prototype._updateTitle = function () {
        var t = this._isFullscreen() ? "Exit fullscreen" : "Enter fullscreen";
        this._fullscreenButton.setAttribute("aria-label", t), this._fullscreenButton.title = t;
      }, io.prototype._isFullscreen = function () {
        return this._fullscreen
      }, io.prototype._changeIcon = function () {
        (t.window.document.fullscreenElement || t.window.document.mozFullScreenElement || t.window.document.webkitFullscreenElement || t.window.document.msFullscreenElement) === this._container !== this._fullscreen && (this._fullscreen = !this._fullscreen, this._fullscreenButton.classList.toggle(this._className + "-shrink"), this._fullscreenButton.classList.toggle(this._className + "-fullscreen"), this._updateTitle());
      }, io.prototype._onClickFullscreen = function () {
        this._isFullscreen() ? t.window.document.exitFullscreen ? t.window.document.exitFullscreen() : t.window.document.mozCancelFullScreen ? t.window.document.mozCancelFullScreen() : t.window.document.msExitFullscreen ? t.window.document.msExitFullscreen() : t.window.document.webkitCancelFullScreen && t.window.document.webkitCancelFullScreen() : this._container.requestFullscreen ? this._container.requestFullscreen() : this._container.mozRequestFullScreen ? this._container.mozRequestFullScreen() : this._container.msRequestFullscreen ? this._container.msRequestFullscreen() : this._container.webkitRequestFullscreen && this._container.webkitRequestFullscreen();
      };
      var no = {
          closeButton: !0,
          closeOnClick: !0,
          className: "",
          maxWidth: "240px"
        },
        oo = function (e) {
          function i(r) {
            e.call(this), this.options = t.extend(Object.create(no), r), t.bindAll(["_update", "_onClickClose", "remove"], this);
          }
          return e && (i.__proto__ = e), i.prototype = Object.create(e && e.prototype), i.prototype.constructor = i, i.prototype.addTo = function (e) {
            var r = this;
            return this._map = e, this.options.closeOnClick && this._map.on("click", this._onClickClose), this._map.on("remove", this.remove), this._update(), this._trackPointer ? (this._map.on("mousemove", function (t) {
              r._update(t.point);
            }), this._map.on("mouseup", function (t) {
              r._update(t.point);
            }), this._container.classList.add("epgis-popup-track-pointer"), this._map._canvasContainer.classList.add("epgis-track-pointer")) : this._map.on("move", this._update), this.fire(new t.Event("open")), this
          }, i.prototype.isOpen = function () {
            return !!this._map
          }, i.prototype.remove = function () {
            return this._content && r.remove(this._content), this._container && (r.remove(this._container), delete this._container), this._map && (this._map.off("move", this._update), this._map.off("click", this._onClickClose), this._map.off("remove", this.remove), this._map.off("mousemove"), delete this._map), this.fire(new t.Event("close")), this
          }, i.prototype.getLngLat = function () {
            return this._lngLat
          }, i.prototype.setLngLat = function (e) {
            return this._lngLat = t.LngLat.convert(e), this._pos = null, this._trackPointer = !1, this._update(), this._map && (this._map.on("move", this._update), this._map.off("mousemove"), this._container.classList.remove("epgis-popup-track-pointer"), this._map._canvasContainer.classList.remove("epgis-track-pointer")), this
          }, i.prototype.trackPointer = function () {
            var t = this;
            return this._trackPointer = !0, this._pos = null, this._map && (this._map.off("move", this._update), this._map.on("mousemove", function (e) {
              t._update(e.point);
            }), this._map.on("drag", function (e) {
              t._update(e.point);
            }), this._container.classList.add("epgis-popup-track-pointer"), this._map._canvasContainer.classList.add("epgis-track-pointer")), this
          }, i.prototype.getElement = function () {
            return this._container
          }, i.prototype.setText = function (e) {
            return this.setDOMContent(t.window.document.createTextNode(e))
          }, i.prototype.setHTML = function (e) {
            var r, i = t.window.document.createDocumentFragment(),
              n = t.window.document.createElement("body");
            for (n.innerHTML = e; r = n.firstChild;) i.appendChild(r);
            return this.setDOMContent(i)
          }, i.prototype.getMaxWidth = function () {
            return this._container.style.maxWidth
          }, i.prototype.setMaxWidth = function (t) {
            return this.options.maxWidth = t, this._update(), this
          }, i.prototype.setDOMContent = function (t) {
            return this._createContent(), this._content.appendChild(t), this._update(), this
          }, i.prototype._createContent = function () {
            this._content && r.remove(this._content), this._content = r.create("div", "epgis-popup-content", this._container), this.options.closeButton && (this._closeButton = r.create("button", "epgis-popup-close-button", this._content), this._closeButton.type = "button", this._closeButton.setAttribute("aria-label", "Close popup"), this._closeButton.innerHTML = "&#215;", this._closeButton.addEventListener("click", this._onClickClose));
          }, i.prototype._update = function (e) {
            var i = this,
              n = this._lngLat || this._trackPointer;
            if (this._map && n && this._content && (this._container || (this._container = r.create("div", "epgis-popup", this._map.getContainer()), this._tip = r.create("div", "epgis-popup-tip", this._container), this._container.appendChild(this._content), this.options.className && this.options.className.split(" ").forEach(function (t) {
                return i._container.classList.add(t)
              })), this.options.maxWidth && this._container.style.maxWidth !== this.options.maxWidth && (this._container.style.maxWidth = this.options.maxWidth), this._map.transform.renderWorldCopies && !this._trackPointer && (this._lngLat = nn(this._lngLat, this._pos, this._map.transform)), !this._trackPointer || e)) {
              var o = this._pos = this._trackPointer && e ? e : this._map.project(this._lngLat),
                s = this.options.anchor,
                a = function e(r) {
                  if (r) {
                    if ("number" == typeof r) {
                      var i = Math.round(Math.sqrt(.5 * Math.pow(r, 2)));
                      return {
                        center: new t.Point(0, 0),
                        top: new t.Point(0, r),
                        "top-left": new t.Point(i, i),
                        "top-right": new t.Point(-i, i),
                        bottom: new t.Point(0, -r),
                        "bottom-left": new t.Point(i, -i),
                        "bottom-right": new t.Point(-i, -i),
                        left: new t.Point(r, 0),
                        right: new t.Point(-r, 0)
                      }
                    }
                    if (r instanceof t.Point || Array.isArray(r)) {
                      var n = t.Point.convert(r);
                      return {
                        center: n,
                        top: n,
                        "top-left": n,
                        "top-right": n,
                        bottom: n,
                        "bottom-left": n,
                        "bottom-right": n,
                        left: n,
                        right: n
                      }
                    }
                    return {
                      center: t.Point.convert(r.center || [0, 0]),
                      top: t.Point.convert(r.top || [0, 0]),
                      "top-left": t.Point.convert(r["top-left"] || [0, 0]),
                      "top-right": t.Point.convert(r["top-right"] || [0, 0]),
                      bottom: t.Point.convert(r.bottom || [0, 0]),
                      "bottom-left": t.Point.convert(r["bottom-left"] || [0, 0]),
                      "bottom-right": t.Point.convert(r["bottom-right"] || [0, 0]),
                      left: t.Point.convert(r.left || [0, 0]),
                      right: t.Point.convert(r.right || [0, 0])
                    }
                  }
                  return e(new t.Point(0, 0))
                }(this.options.offset);
              if (!s) {
                var u, c = this._container.offsetWidth,
                  h = this._container.offsetHeight;
                u = o.y + a.bottom.y < h ? ["top"] : o.y > this._map.transform.height - h ? ["bottom"] : [], o.x < c / 2 ? u.push("left") : o.x > this._map.transform.width - c / 2 && u.push("right"), s = 0 === u.length ? "bottom" : u.join("-");
              }
              var l = o.add(a[s]).round();
              r.setTransform(this._container, on[s] + " translate(" + l.x + "px," + l.y + "px)"), sn(this._container, s, "popup");
            }
          }, i.prototype._onClickClose = function () {
            this.remove();
          }, i
        }(t.Evented);
      var so = function (e) {
        function r() {
          e.call(this), this._authenticationUrl = this.makeAPIURL("authentication"), this.OPTS = {
            isAuto: !0
          }, this._firstLogin = !0, this._timer = null;
        }
        return e && (r.__proto__ = e), r.prototype = Object.create(e && e.prototype), r.prototype.constructor = r, r.prototype._initAutoLogin = function () {
          window.addEventListener("online", this._autoLogin.bind(this), !1);
        }, r.prototype._autoLogin = function () {
          var t = this._opts.onAutoLogin;
          this.login(this._key, this._sn), t && t(this);
        }, r.prototype.login = function (e, r, i) {
          var n = this;
          this._opts = t.extend({}, this.OPTS, i), this._key = e, this._sn = r, this.md5key = this.md5(e + r).substring(5, 21);
          var o = this.sm3(JSON.stringify({
            appKey: e,
            appSecret: r
          })) + this.encryptByDESModeEBC(JSON.stringify({
            appKey: e,
            appSecret: r
          }), this.md5key);
          return this._firstLogin && (this._parseOpts(), this._firstLogin = !1), this.ajax({
            url: this._authenticationUrl + "/v2/login/sysLogin",
            data: {
              key: e,
              enc: encodeURIComponent(o)
            },
            method: "POST"
          }).then(function (t) {
            if ("10000" != t.code) throw new Error(t.message);
            var e = JSON.parse(n.decryptByDESModeEBC(t.resultValue.substring(64), n.md5key)).token;
            n._setToken(e.accessToken, e.refreshToken);
          }, function (t) {
            throw new Error(t)
          })
        }, r.prototype._parseOpts = function () {
          this._opts.isAuto && window && this._initAutoLogin();
        }, r.prototype.getAccessToken = function () {
          return this._accessToken
        }, r.prototype.getRefreshToken = function () {
          return this._refreshToken
        }, r.prototype.setToken = function (t, e) {
          this._setConfigAccessToken(t), this._accessToken = t, this._refreshToken = e, this.ajax({
            url: this._authenticationUrl + "/token/refresh",
            data: {
              accessToken: this._accessToken,
              refreshToken: this._refreshToken
            },
            method: "POST"
          }).then(function (t) {
            this._setToken(t.resultValue.accessToken, t.resultValue.refreshToken);
          }.bind(this)).catch(function (t) {
            throw new Error(t)
          });
        }, r.prototype._setToken = function (t, e) {
          this._setConfigAccessToken(t);
          var r = this._accessToken,
            i = this._refreshToken;
          this._accessToken = t, this._refreshToken = e, r && i && this.loginoutToken(r, i), this._triggerTimer();
        }, r.prototype._setConfigAccessToken = function (e) {
          t.config.ACCESS_TOKEN = e;
        }, r.prototype._triggerTimer = function () {
          this._timer && clearTimeout(this._timer), this._timer = setTimeout(this._refreshTokens.bind(this), this._getInterval());
        }, r.prototype._getInterval = function () {
          var t = this._accessToken.split("."),
            e = JSON.parse(atob(t[1]));
          return 1e3 * (e.exp - e.iat - 60)
        }, r.prototype._refreshTokens = function () {
          return this.ajax({
            url: this._authenticationUrl + "/token/refresh",
            data: {
              accessToken: this._accessToken,
              refreshToken: this._refreshToken
            },
            method: "POST"
          }).then(function (t) {
            this._setToken(t.resultValue.accessToken, t.resultValue.refreshToken);
          }.bind(this)).catch(function (t) {
            throw new Error(t)
          })
        }, r.prototype.loginout = function () {
          return this.loginoutToken(this._accessToken, this._refreshToken)
        }, r.prototype.loginoutToken = function (t, e) {
          var r = this._key,
            i = this._sn;
          this.md5key = this.md5(r + i).substring(5, 21);
          var n = this.sm3(JSON.stringify({
            accessToken: t,
            refreshToken: e
          })) + this.encryptByDESModeEBC(JSON.stringify({
            accessToken: t,
            refreshToken: e
          }), this.md5key);
          return this.ajax({
            url: this._authenticationUrl + "/v2/sysLogout",
            data: {
              key: r,
              enc: encodeURIComponent(n)
            },
            method: "POST"
          }).then(function (t) {
            return !0
          }.bind(this)).catch(function (t) {
            throw new Error(t)
          })
        }, r
      }(Hn);
      so.singleton = null;
      var ao = (so.singleton || (so.singleton = new so), so.singleton),
        uo = function (t) {
          function e() {
            t.call(this), this._poiSearchUrl = this.makeAPIURL("place/v1/");
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.search = function (t) {
            var e = !1;
            if (t.query || (console.error("search: query参数不能为空！"), e = !0), t.location || (console.error("search: location参数不能为空！"), e = !0), t.region || (console.error("search: region参数不能为空！"), e = !0), !e) {
              var r = t.query,
                i = t.region,
                n = t.location,
                o = t.tag || "",
                s = null == t.isEncode || t.isEncode,
                a = t.cityLimit || !1,
                u = t.coordtype || "sg",
                c = {
                  query: r,
                  region: i,
                  tag: o,
                  cityLimit: a,
                  location: n,
                  coordtype: u = "sg_encode" == u ? "sg_polyline" : u
                };
              return c = this.delEmptyObj(c), this.ajax({
                url: this._poiSearchUrl + "suggestion",
                data: c,
                method: "GET"
              }).then(function (t) {
                var e = [];
                if (t.features) {
                  var r = t.features;
                  for (var i in r) {
                    var n = {
                      id: r[i].id,
                      type: r[i].type,
                      properties: {
                        address: r[i].properties.address || "",
                        category: r[i].properties.category || "",
                        tel: r[i].properties.tel || "",
                        objectId: r[i].properties.objectId || "",
                        businessTime: r[i].properties.businessTime || "",
                        businessContent: r[i].properties.businessContent || "",
                        traffic: r[i].properties.traffic || ""
                      },
                      text: r[i].text,
                      place_name: r[i].place_name,
                      bbox: s ? r[i].bbox || "" : this.decode(r[i].bbox || ""),
                      center: s ? r[i].center : this.decode(r[i].center)[0],
                      geometry: {
                        type: r[i].geometry.type,
                        coordinates: s ? r[i].geometry.coordinates : this.decode(r[i].geometry.coordinates)[0]
                      },
                      context: [{
                        adcode: r[i].context[0].adcode
                      }]
                    };
                    e.push(n);
                  }
                }
                return {
                  count: 10,
                  tips: e
                }
              }.bind(this)).catch(function (t) {
                throw new Error(t)
              })
            }
          }, e
        }(Hn),
        co = function (t) {
          function e() {
            t.call(this), this._districtUrl = this.makeAPIURL("district/v1/"), this.CITY_MAP = {
              region: "province",
              place: "city",
              locality: "district"
            };
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.searchByLocation = function (t) {
            var e = !1;
            if (t.location || (console.error("searchByLocation: location参数不能为空！"), e = !0), !e) {
              var r = t.location.toString(),
                i = null == t.isEncode || t.isEncode,
                n = t.coordtype || "sg";
              return n = "sg_encode" == n ? "sg_polyline" : n, this.ajax({
                url: this._districtUrl + "searchByLocation",
                data: {
                  location: r,
                  coordtype: n
                },
                method: "GET"
              }).then(function (t) {
                var e = t.districts,
                  r = [];
                if (e)
                  for (var n = 0; n < e.length; n++) {
                    var o = {
                      adcode: e[n].adcode,
                      bbox: i ? e[n].bbox : this.decode(e[n].bbox),
                      center: i ? e[n].center : this.decode(e[n].center)[0],
                      level: this.CITY_MAP[e[n].level],
                      name: e[n].name
                    };
                    r.push(o);
                  }
                return r
              }.bind(this)).catch(function (t) {
                throw new Error(t)
              })
            }
          }, e.prototype.searchDistrict = function (t) {
            var e = !1;
            if (t.keyword || (console.error("searchDistrict: keyword参数不能为空！"), e = !0), !e) {
              var r = t.keyword,
                i = null == t.isEncode || t.isEncode,
                n = t.subdistrict || 0,
                o = t.pageIndex || 1,
                s = t.pageSize || 1,
                a = t.extension || !1;
              return o = (o - 1) * s, this.ajax({
                url: this._districtUrl + "search",
                data: {
                  keyword: r,
                  subdistrict: n,
                  start: o,
                  limit: s,
                  extension: a
                },
                method: "GET"
              }).then(function (t) {
                var e = t.districts;
                return this._decodeRecursion(e, i)
              }.bind(this)).catch(function (t) {
                throw new Error(t)
              })
            }
          }, e.prototype.searchNearBy = function (t) {
            var e = !1;
            if (t.location || (console.error("searchByLocation: location参数不能为空！"), e = !0), t.levels || (console.error("searchByLocation: levels参数不能为空！"), e = !0), t.radius || (console.error("searchByLocation: radius参数不能为空！"), e = !0), !e) {
              var r = t.location.toString(),
                i = null == t.isEncode || t.isEncode,
                n = t.coordtype || "sg",
                o = t.levels,
                s = t.radius,
                a = t.pageIndex || 1,
                u = t.pageSize || 10,
                c = t.extension || !1;
              return n = "sg_encode" == n ? "sg_polyline" : n, a = (a - 1) * u, this.ajax({
                url: this._districtUrl + "searchDistrictByShape",
                data: {
                  location: r,
                  coordtype: n,
                  levels: o,
                  radius: s,
                  start: a,
                  limit: u,
                  extension: c
                },
                method: "GET"
              }).then(function (t) {
                var e, r = this,
                  n = [];
                if (t.districts)
                  for (var o = 0, s = t.districts; o < s.length; o += 1) e = void 0, e = s[o], n.push({
                    adcode: e.adcode,
                    name: e.name,
                    shape: e.shape && {
                      type: e.shape.type,
                      coordinates: i ? e.shape.coordinates : function () {
                        var t = [];
                        if ("string" == typeof e.shape.coordinates) t = r.decode(e.shape.coordinates);
                        else
                          for (var i = 0, n = e.shape.coordinates; i < n.length; i += 1) {
                            var o = n[i];
                            "string" == typeof o ? t.push(r.decode(o)) : t.push([r.decode(o[0])]);
                          }
                        return t
                      }()
                    } || "",
                    center: i ? e.center : r.decode(e.center)[0],
                    bbox: i ? e.bbox : r.decode(e.bbox)[0],
                    level: r.CITY_MAP[e.level]
                  });
                return {
                  total: t.total || 0,
                  districts: n
                }
              }.bind(this)).catch(function (t) {
                throw new Error(t)
              })
            }
          }, e.prototype.searchByBounds = function (t) {
            var e = !1;
            if (t.bounds || (console.error("searchInBounds: bounds参数不能为空！"), e = !0), t.levels || (console.error("searchInBounds: levels参数不能为空！"), e = !0), !e) {
              var r = t.bounds,
                i = null == t.isEncode || t.isEncode,
                n = t.coordtype || "sg",
                o = t.levels,
                s = t.pageIndex || 1,
                a = t.pageSize || 10,
                u = t.extension || !1;
              if (s = (s - 1) * a, "sg_polyline" != (n = "sg_encode" == n ? "sg_polyline" : n)) {
                for (var c = 0, h = r; c < h.length; c += 1) {
                  var l = h[c];
                  l = l.toString();
                }
                r = r.toString();
              }
              return this.ajax({
                url: this._districtUrl + "searchDistrictByShape",
                data: {
                  bounds: r,
                  coordtype: n,
                  levels: o,
                  start: s,
                  limit: a,
                  extension: u
                },
                method: "GET"
              }).then(function (t) {
                var e, r = this,
                  n = [];
                if (t.districts)
                  for (var o = 0, s = t.districts; o < s.length; o += 1) e = void 0, e = s[o], n.push({
                    adcode: e.adcode,
                    name: e.name,
                    shape: e.shape && {
                      type: e.shape.type,
                      coordinates: i ? e.shape.coordinates : function () {
                        var t = [];
                        if ("string" == typeof e.shape.coordinates) t = r.decode(e.shape.coordinates);
                        else
                          for (var i = 0, n = e.shape.coordinates; i < n.length; i += 1) {
                            var o = n[i];
                            "string" == typeof o ? t.push(r.decode(o)) : t.push([r.decode(o[0])]);
                          }
                        return t
                      }()
                    } || "",
                    center: i ? e.center : r.decode(e.center)[0],
                    bbox: i ? e.bbox : r.decode(e.bbox)[0],
                    level: r.CITY_MAP[e.level]
                  });
                return {
                  total: t.total || 0,
                  districts: n
                }
              }.bind(this)).catch(function (t) {
                throw new Error(t)
              })
            }
          }, e.prototype._decodeRecursion = function (t, e) {
            for (var r = this, i = [], n = 0; n < t.length; n++) {
              var o = {
                adcode: t[n].adcode,
                bbox: e ? t[n].bbox : this.decode(t[n].bbox),
                center: e ? t[n].center : this.decode(t[n].center)[0],
                level: this.CITY_MAP[t[n].level],
                name: t[n].name,
                shape: t[n].shape && {
                  coordinates: e ? t[n].shape.coordinates : function () {
                    var e = [];
                    if ("string" == typeof t[n].shape.coordinates) e = r.decode(t[n].shape.coordinates);
                    else
                      for (var i = 0, o = t[n].shape.coordinates; i < o.length; i += 1) {
                        var s = o[i];
                        "string" == typeof s ? e.push(r.decode(s)) : e.push([r.decode(s[0])]);
                      }
                    return e
                  }(),
                  type: t[n].shape.type
                } || "",
                sub_districts: Array.isArray(t[n].sub_districts) ? e ? t[n].sub_districts : this._decodeRecursion(t[n].sub_districts, e) : ""
              };
              i.push(o);
            }
            return i
          }, e
        }(Hn),
        ho = function (t) {
          function e(e) {
            t.call(this), this._poiSearchUrl = this.makeAPIURL("place/v1/");
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.searchPlace = function (t) {
            var e = !1;
            if (t.query || t.tag || (console.error("searchPlace: query或者tag参数不能为空！"), e = !0), t.region || (console.error("searchPlace: region参数不能为空！"), e = !0), !e) {
              var r = t.query || "",
                i = t.region || "",
                n = t.tag || "",
                o = null == t.isEncode || t.isEncode,
                s = t.cityLimit || !1,
                a = t.pageIndex || 1,
                u = t.pageSize || 10,
                c = t.coordtype || "sg";
              return a = (a - 1) * u, c = "sg_encode" == c ? "sg_polyline" : c, this.ajax({
                url: this._poiSearchUrl + "search",
                data: {
                  query: r,
                  region: i,
                  tag: n,
                  cityLimit: s,
                  start: a,
                  limit: u,
                  coordtype: c
                },
                method: "GET"
              }).then(function (e) {
                var r = this,
                  i = [];
                if (e.features) {
                  var n = e.features;
                  for (var s in n) {
                    var a = {
                      id: n[s].id,
                      type: n[s].type,
                      properties: {
                        address: n[s].properties.address || "",
                        category: n[s].properties.category || "",
                        tel: n[s].properties.tel || "",
                        objectId: n[s].properties.objectId || "",
                        shape: n[s].properties.shape && {
                          type: n[s].properties.shape.type,
                          coordinates: o ? n[s].properties.shape.coordinates : function () {
                            var t = [];
                            if ("string" == typeof n[s].properties.shape.coordinates) t = r.decode(n[s].properties.shape.coordinates);
                            else
                              for (var e = 0, i = n[s].properties.shape.coordinates; e < i.length; e += 1) {
                                var o = i[e];
                                "string" == typeof o ? t = r.decode(o) : o[0] = r.decode(o[0]);
                              }
                            return t
                          }()
                        } || "",
                        businessTime: n[s].properties.businessTime || "",
                        businessContent: n[s].properties.businessContent || "",
                        traffic: n[s].properties.traffic || ""
                      },
                      text: n[s].text,
                      place_name: n[s].place_name,
                      bbox: o ? n[s].bbox || "" : this.decode(n[s].bbox || ""),
                      center: o ? n[s].center : this.decode(n[s].center)[0],
                      geometry: {
                        type: n[s].geometry.type,
                        coordinates: o ? n[s].geometry.coordinates : this.decode(n[s].geometry.coordinates)[0]
                      },
                      context: [{
                        adcode: n[s].context[0].adcode
                      }]
                    };
                    i.push(a);
                  }
                }
                return {
                  pageIndex: t.pageIndex || 1,
                  pageSize: u,
                  count: e.total,
                  pois: i
                }
              }.bind(this)).catch(function (t) {
                throw new Error(t)
              })
            }
          }, e.prototype.searchNearBy = function (t) {
            var e = !1;
            if (t.query || t.tag || (console.error("searchNearBy: query或者tag参数不能同时为空！"), e = !0), t.region || (console.error("searchNearBy: region参数不能为空！"), e = !0), t.location || (console.error("searchNearBy: location参数不能为空！"), e = !0), !e) {
              var r = t.query || "",
                i = t.radius || 1e3,
                n = t.location.toString(),
                o = t.region || "",
                s = t.tag || "",
                a = null == t.isEncode || t.isEncode,
                u = t.cityLimit || !1,
                c = t.pageIndex || 1,
                h = t.pageSize || 10,
                l = t.coordtype || "sg";
              return c = (c - 1) * h, l = "sg_encode" == l ? "sg_polyline" : l, this.ajax({
                url: this._poiSearchUrl + "search",
                data: {
                  query: r,
                  region: o,
                  tag: s,
                  cityLimit: u,
                  location: n,
                  radius: i / 1e3,
                  start: c,
                  limit: h,
                  coordtype: l
                },
                method: "GET"
              }).then(function (e) {
                var r = this,
                  i = [];
                if (e.features) {
                  var n = e.features;
                  for (var o in n) {
                    var s = {
                      id: n[o].id,
                      type: n[o].type,
                      properties: {
                        address: n[o].properties.address || "",
                        category: n[o].properties.category || "",
                        tel: n[o].properties.tel || "",
                        objectId: n[o].properties.objectId || "",
                        shape: n[o].properties.shape && {
                          type: n[o].properties.shape.type,
                          coordinates: a ? n[o].properties.shape.coordinates : function () {
                            var t = [];
                            if ("string" == typeof n[o].properties.shape.coordinates) t = r.decode(n[o].properties.shape.coordinates);
                            else
                              for (var e = 0, i = n[o].properties.shape.coordinates; e < i.length; e += 1) {
                                var s = i[e];
                                "string" == typeof s ? t = r.decode(s) : s[0] = r.decode(s[0]);
                              }
                            return t
                          }()
                        } || "",
                        businessTime: n[o].properties.businessTime || "",
                        businessContent: n[o].properties.businessContent || "",
                        traffic: n[o].properties.traffic || ""
                      },
                      text: n[o].text,
                      place_name: n[o].place_name,
                      bbox: a ? n[o].bbox || "" : this.decode(n[o].bbox || ""),
                      center: a ? n[o].center : this.decode(n[o].center)[0],
                      geometry: {
                        type: n[o].geometry.type,
                        coordinates: a ? n[o].geometry.coordinates : this.decode(n[o].geometry.coordinates)[0]
                      },
                      context: [{
                        adcode: n[o].context[0].adcode
                      }]
                    };
                    i.push(s);
                  }
                }
                return {
                  pageIndex: t.pageIndex || 1,
                  pageSize: h,
                  count: e.total,
                  pois: i
                }
              }.bind(this)).catch(function (t) {
                throw new Error(t)
              })
            }
          }, e.prototype.searchInBounds = function (t) {
            var e = !1;
            if (t.query || t.tag || (console.error("searchInBounds: query或者tag参数不能同时为空！"), e = !0), t.region || (console.error("searchInBounds: region参数不能为空！"), e = !0), t.bounds || (console.error("searchInBounds: bounds参数不能为空！"), e = !0), !e) {
              var r = t.query || "",
                i = t.bounds,
                n = t.region || "",
                o = t.tag || "",
                s = null == t.isEncode || t.isEncode,
                a = t.cityLimit || !1,
                u = t.pageIndex || 1,
                c = t.pageSize || 10,
                h = t.coordtype || "sg";
              return u = (u - 1) * c, h = "sg_encode" == h ? "sg_polyline" : h, this.ajax({
                url: this._poiSearchUrl + "search",
                data: {
                  query: r,
                  region: n,
                  tag: o,
                  cityLimit: a,
                  bounds: i,
                  start: u,
                  limit: c,
                  coordtype: h
                },
                method: "GET"
              }).then(function (e) {
                var r = this,
                  i = [];
                if (e.features) {
                  var n = e.features;
                  for (var o in n) {
                    var a = {
                      id: n[o].id,
                      type: n[o].type,
                      properties: {
                        address: n[o].properties.address || "",
                        category: n[o].properties.category || "",
                        tel: n[o].properties.tel || "",
                        objectId: n[o].properties.objectId || "",
                        shape: n[o].properties.shape && {
                          type: n[o].properties.shape.type,
                          coordinates: s ? n[o].properties.shape.coordinates : function () {
                            var t = [];
                            if ("string" == typeof n[o].properties.shape.coordinates) t = r.decode(n[o].properties.shape.coordinates);
                            else
                              for (var e = 0, i = n[o].properties.shape.coordinates; e < i.length; e += 1) {
                                var s = i[e];
                                "string" == typeof s ? t = r.decode(s) : s[0] = r.decode(s[0]);
                              }
                            return t
                          }()
                        } || "",
                        businessTime: n[o].properties.businessTime || "",
                        businessContent: n[o].properties.businessContent || "",
                        traffic: n[o].properties.traffic || ""
                      },
                      text: n[o].text,
                      place_name: n[o].place_name,
                      bbox: s ? n[o].bbox || "" : this.decode(n[o].bbox || ""),
                      center: s ? n[o].center : this.decode(n[o].center)[0],
                      geometry: {
                        type: n[o].geometry.type,
                        coordinates: s ? n[o].geometry.coordinates : this.decode(n[o].geometry.coordinates)[0]
                      },
                      context: [{
                        adcode: n[o].context[0].adcode
                      }]
                    };
                    i.push(a);
                  }
                }
                return {
                  pageIndex: t.pageIndex || 1,
                  pageSize: c,
                  count: e.total,
                  pois: i
                }
              }.bind(this)).catch(function (t) {
                throw new Error(t)
              })
            }
          }, e.prototype.getDetails = function (t) {
            var e = !1;
            if (t.ids || (console.error("getDetails: ids参数不能为空！"), e = !0), !e) {
              var r = t.ids,
                i = null == t.isEncode || t.isEncode,
                n = t.type || "";
              return this.ajax({
                url: this._poiSearchUrl + "searchByIds",
                data: {
                  ids: r,
                  type: n
                },
                method: "GET"
              }).then(function (t) {
                var e = this,
                  r = null,
                  n = t.features[0];
                return n && (r = {
                  id: n.id,
                  type: n.type,
                  properties: {
                    address: n.properties.address || "",
                    category: n.properties.category || "",
                    tel: n.properties.tel || "",
                    objectId: n.properties.objectId || "",
                    shape: n.properties.shape && {
                      type: n.properties.shape.type,
                      coordinates: i ? n.properties.shape.coordinates : function () {
                        var t = [];
                        if ("string" == typeof n.properties.shape.coordinates) t = e.decode(n.properties.shape.coordinates);
                        else
                          for (var r = 0, i = n.properties.shape.coordinates; r < i.length; r += 1) {
                            var o = i[r];
                            "string" == typeof o ? t = e.decode(o) : o[0] = e.decode(o[0]);
                          }
                        return t
                      }()
                    } || "",
                    businessTime: n.properties.businessTime || "",
                    businessContent: n.properties.businessContent || "",
                    traffic: n.properties.traffic || ""
                  },
                  text: n.text,
                  place_name: n.place_name,
                  bbox: i ? n.bbox || "" : this.decode(n.bbox || ""),
                  center: i ? n.center : this.decode(n.center)[0],
                  geometry: {
                    type: n.geometry.type,
                    coordinates: i ? n.geometry.coordinates : this.decode(n.geometry.coordinates)[0]
                  },
                  context: [{
                    adcode: n.context[0].adcode
                  }]
                }), r
              }.bind(this)).catch(function (t) {
                throw new Error(t)
              })
            }
          }, e
        }(Hn),
        lo = function (t) {
          function e() {
            t.call(this), this._geocoddingUrl = this.makeAPIURL("geocode/v1/"), this._regeocoddingUrl = this.makeAPIURL("geocode/v2/");
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getLocation = function (t) {
            var e = !1;
            if (t.address || (console.error("getLocation: address参数不能为空！"), e = !0), t.region || (console.error("getLocation: region参数不能为空！"), e = !0), !e) {
              var r = t.address,
                i = null == t.isEncode || t.isEncode,
                n = t.region;
              return this.ajax({
                url: this._geocoddingUrl + "geo",
                data: {
                  address: r,
                  region: n
                },
                method: "GET"
              }).then(function (t) {
                return {
                  formattedAddress: t.formattedAddress,
                  addressComponent: {
                    country: t.addressComponent.country || "",
                    province: t.addressComponent.province || "",
                    city: t.addressComponent.city || "",
                    district: t.addressComponent.district || "",
                    adcode: t.addressComponent.adcode || "",
                    address: t.addressComponent.streetNumber || ""
                  },
                  location: i ? t.location : this.decode(t.location)[0]
                }
              }.bind(this)).catch(function (t) {
                throw new Error(t)
              })
            }
          }, e.prototype.getAddress = function (t) {
            var e = !1;
            if (t.location || (console.error("getAddress: location参数不能为空！"), e = !0), !e) {
              var r = t.location.toString(),
                i = r.indexOf(",") > -1 ? r : this.decode(r)[0].toString(),
                n = t.roadClass || 0,
                o = t.coordtype || "sg",
                s = t.radius || 2e3,
                a = null == t.isEncode || t.isEncode,
                u = t.extensions || "all";
              return this.ajax({
                url: this._regeocoddingUrl + "regeo",
                data: {
                  location: i,
                  roadClass: n,
                  coordtype: o,
                  radius: s,
                  extensions: u
                },
                method: "GET"
              }).then(function (t) {
                var e = this;
                return {
                  formattedAddress: t.formattedAddress,
                  addressComponent: {
                    country: t.addressComponent.country || "",
                    province: t.addressComponent.province || "",
                    city: t.addressComponent.city || "",
                    district: t.addressComponent.district || "",
                    adcode: t.addressComponent.adcode || "",
                    address: t.addressComponent.streetNumber || ""
                  },
                  pois: function () {
                    var r = [];
                    if (t.pois)
                      for (var i = 0, n = t.pois; i < n.length; i += 1) {
                        var o = n[i];
                        r.push({
                          id: o.id,
                          name: o.name || "",
                          poiType: o.poiType || "",
                          direction: o.direction || "",
                          distance: o.distance || "",
                          address: o.address || "",
                          location: a ? o.location : e.decode(o.location)[0]
                        });
                      }
                    return r
                  }(),
                  roadNodes: function () {
                    var r = [];
                    if (t.roadNodes)
                      for (var i = 0, n = t.roadNodes; i < n.length; i += 1) {
                        var o = n[i];
                        r.push({
                          direction: o.direction || "",
                          distance: o.distance || "",
                          location: a ? o.location || "" : e.decode(o.location)[0] || "",
                          name: o.name || ""
                        });
                      }
                    return r
                  }()
                }
              }.bind(this)).catch(function (t) {
                throw new Error(t)
              })
            }
          }, e
        }(Hn),
        po = function (t) {
          function e() {
            t.call(this), this._poiSearchUrl = this.makeAPIURL("directions/v1/"), this._baseUrl = this.makeAPIURL("directions/v2/"), this._drivingPolicy = {
              LEAST_TIME: 0,
              LEAST_FEE: 1,
              LEAST_DISTANCE: 2,
              REAL_TRAFFIC: 5
            };
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.searchByDriving = function (t) {
            var e = !1;
            if (t.coordinates || (t.startPoint || (console.error("searchByDriving: startPoint参数不能为空！"), e = !0), t.endPoint || (console.error("searchByDriving: endPoint参数不能为空！"), e = !0), t.waypointsPast && t.waypointsPast.length > 10 && (console.error("searchByDriving: waypointsPast途经点数量不能超过10个！"), e = !0)), t.policy && null == this._drivingPolicy[t.policy] && (console.error("searchByDriving: policy参数填写错误！"), e = !0), !e) {
              var r = t.geometries || "polyline",
                i = t.policy ? this._drivingPolicy[t.policy] : "",
                n = 1 == t.ferry,
                o = t.startPoint && this.formatLnglat(t.startPoint).toString(),
                s = t.waypointsPast || [],
                a = t.endPoint && this.formatLnglat(t.endPoint).toString(),
                u = t.coordtype || "sg",
                c = 0 != t.steps,
                h = t.coordinates,
                l = null == t.isEncode || t.isEncode,
                p = "";
              if (u = "sg_encode" == u ? "sg_polyline" : u, h) u = "sg_polyline";
              else {
                if (s.length > 0)
                  for (var f = 0, d = s; f < d.length; f += 1) {
                    var g = d[f];
                    p += this.formatLnglat(g).toString() + ";";
                  }
                h = o + ";" + p + a;
              }
              return this.ajax({
                url: this._baseUrl + "driving/" + h,
                data: {
                  geometries: r,
                  strategy: i,
                  ferry: n,
                  coordtype: u,
                  location: h,
                  steps: c
                },
                method: "GET"
              }).then(function (t) {
                var e, r, i = this,
                  n = t.waypoints ? t.waypoints.length - 2 : 0,
                  o = [],
                  s = [];
                if (t.routes) {
                  for (var a = 0, u = t.routes; a < u.length; a += 1) e = void 0, r = void 0, e = u[a], r = {
                    distance: e.distance,
                    duration: e.duration,
                    feature: {
                      type: "FeatureCollection",
                      features: [{
                        type: "Feature",
                        geometry: {
                          type: "LineString",
                          coordinates: l ? t.routes[0].geometry : i.decode(t.routes[0].geometry)
                        }
                      }]
                    },
                    legs: function () {
                      var t, r = [];
                      if (e.legs)
                        for (var n = 0, o = e.legs; n < o.length; n += 1) t = void 0, t = o[n], r.push({
                          steps: function () {
                            var e = [];
                            if (t.steps)
                              for (var r = 0, n = t.steps; r < n.length; r += 1) {
                                var o = n[r];
                                e.push({
                                  geometry: l ? o.geometry : i.decode(o.geometry),
                                  maneuver: {
                                    instruction: o.maneuver.instruction,
                                    location: l ? o.maneuver.location : i.decode(o.maneuver.location)[0],
                                    modifier: o.maneuver.modifier,
                                    type: o.maneuver.type
                                  },
                                  mode: o.mode,
                                  name: o.name,
                                  ref: o.ref
                                });
                              }
                            return e
                          }()
                        });
                      return r
                    }(),
                    lights: e.lights
                  }, s.push(r);
                  for (var c = 0; c <= n; c++) 0 != c && o.push({
                    type: "Feature",
                    geometry: {
                      type: "Point",
                      coordinates: l ? t.waypoints[c].location : this.decode(t.waypoints[c].location)[0]
                    }
                  });
                }
                return {
                  routes: s,
                  startpoint: {
                    type: "FeatureCollection",
                    features: [{
                      type: "Feature",
                      geometry: {
                        type: "Point",
                        coordinates: l ? t.waypoints[0].location : this.decode(t.waypoints[0].location)[0]
                      }
                    }]
                  },
                  waypoints: {
                    type: "FeatureCollection",
                    features: o
                  },
                  endpoint: {
                    type: "FeatureCollection",
                    features: [{
                      type: "Feature",
                      geometry: {
                        type: "Point",
                        coordinates: l ? t.waypoints[n + 1].location : this.decode(t.waypoints[n + 1].location)[0]
                      }
                    }]
                  }
                }
              }.bind(this)).catch(function (t) {
                throw new Error(t)
              })
            }
          }, e.prototype.searchByWalking = function (t) {
            var e = !1;
            if (t.coordinates || (t.startPoint || (console.error("searchByWalking: startPoint参数不能为空！"), e = !0), t.endPoint || (console.error("searchByWalking: endPoint参数不能为空！"), e = !0)), !e) {
              var r = t.geometries || "polyline",
                i = t.startPoint && t.startPoint.toString(),
                n = t.waypointsPast || [],
                o = t.endPoint && t.endPoint.toString(),
                s = t.coordtype || "sg",
                a = t.steps || !0,
                u = t.coordinates,
                c = void 0 === t.isEncode || t.isEncode,
                h = "";
              if (s = "sg_encode" == s ? "sg_polyline" : s, u) s = "sg_polyline";
              else {
                if (n.length > 0)
                  for (var l = 0, p = n; l < p.length; l += 1) {
                    h += p[l].toString() + ";";
                  }
                u = i + ";" + h + o;
              }
              return this.ajax({
                url: this._poiSearchUrl + "walking/" + u,
                data: {
                  geometries: r,
                  coordtype: s,
                  location: u,
                  steps: a
                },
                method: "GET"
              }).then(function (t) {
                var e, r, i = this,
                  n = t.waypoints ? t.waypoints.length - 2 : 0,
                  o = [],
                  s = [];
                if (t.routes) {
                  for (var a = 0, u = t.routes; a < u.length; a += 1) e = void 0, r = void 0, e = u[a], r = {
                    distance: e.distance,
                    duration: e.duration,
                    feature: {
                      type: "FeatureCollection",
                      features: [{
                        type: "Feature",
                        geometry: {
                          type: "LineString",
                          coordinates: c ? t.routes[0].geometry : i.decode(t.routes[0].geometry)
                        }
                      }]
                    },
                    legs: function () {
                      var t, r = [];
                      if (e.legs)
                        for (var n = 0, o = e.legs; n < o.length; n += 1) t = void 0, t = o[n], r.push({
                          steps: function () {
                            var e = [];
                            if (t.steps)
                              for (var r = 0, n = t.steps; r < n.length; r += 1) {
                                var o = n[r];
                                e.push({
                                  geometry: c ? o.geometry : i.decode(o.geometry),
                                  maneuver: {
                                    instruction: o.maneuver.instruction,
                                    location: c ? o.maneuver.location : i.decode(o.maneuver.location)[0],
                                    modifier: o.maneuver.modifier,
                                    type: o.maneuver.type
                                  },
                                  mode: o.mode,
                                  name: o.name,
                                  ref: o.ref
                                });
                              }
                            return e
                          }()
                        });
                      return r
                    }(),
                    lights: e.lights
                  }, o.push(r);
                  for (var h = 0; h <= n; h++) 0 != h && s.push({
                    type: "Feature",
                    geometry: {
                      type: "Point",
                      coordinates: c ? t.waypoints[h].location : this.decode(t.waypoints[h].location)[0]
                    }
                  });
                }
                return {
                  routes: o,
                  startpoint: {
                    type: "FeatureCollection",
                    features: [{
                      type: "Feature",
                      geometry: {
                        type: "Point",
                        coordinates: c ? t.waypoints[0].location : this.decode(t.waypoints[0].location)[0]
                      }
                    }]
                  },
                  waypoints: {
                    type: "FeatureCollection",
                    features: s
                  },
                  endpoint: {
                    type: "FeatureCollection",
                    features: [{
                      type: "Feature",
                      geometry: {
                        type: "Point",
                        coordinates: c ? t.waypoints[n + 1].location : this.decode(t.waypoints[n + 1].location)[0]
                      }
                    }]
                  }
                }
              }.bind(this)).catch(function (t) {
                throw new Error(t)
              })
            }
          }, e.prototype.searchByCycling = function (t) {
            var e = !1;
            if (t.coordinates || (t.startPoint || (console.error("searchByCycling: startPoint参数不能为空！"), e = !0), t.endPoint || (console.error("searchByCycling: endPoint参数不能为空！"), e = !0)), !e) {
              var r = t.geometries || "polyline",
                i = t.startPoint && t.startPoint.toString(),
                n = t.waypointsPast || [],
                o = t.endPoint && t.endPoint.toString(),
                s = t.coordtype || "sg",
                a = t.steps || !0,
                u = t.coordinates,
                c = "";
              if (s = "sg_encode" == s ? "sg_polyline" : s, u) s = "sg_polyline";
              else {
                if (n.length > 0)
                  for (var h = 0, l = n; h < l.length; h += 1) {
                    c += l[h].toString() + ";";
                  }
                u = i + ";" + c + o;
              }
              return this.ajax({
                url: this._poiSearchUrl + "cycling/" + u,
                data: {
                  geometries: r,
                  coordtype: s,
                  location: u,
                  steps: a
                },
                method: "GET"
              }).then(function (t) {
                var e, r, i = this,
                  n = [],
                  o = [];
                if (t.routes) {
                  for (var s = 0, a = t.routes; s < a.length; s += 1) e = void 0, r = void 0, e = a[s], r = {
                    distance: e.distance,
                    duration: e.duration,
                    geometry: i.decode(e.geometry),
                    legs: function () {
                      var t, r = [];
                      if (e.legs)
                        for (var n = 0, o = e.legs; n < o.length; n += 1) t = void 0, t = o[n], r.push({
                          steps: function () {
                            var e = [];
                            if (t.steps)
                              for (var r = 0, n = t.steps; r < n.length; r += 1) {
                                var o = n[r];
                                e.push({
                                  geometry: i.decode(o.geometry),
                                  maneuver: {
                                    instruction: o.maneuver.instruction,
                                    location: i.decode(o.maneuver.location)[0],
                                    modifier: o.maneuver.modifier,
                                    type: o.maneuver.type
                                  },
                                  mode: o.mode,
                                  name: o.name,
                                  ref: o.ref
                                });
                              }
                            return e
                          }()
                        });
                      return r
                    }(),
                    lights: e.lights
                  }, n.push(r);
                  for (var u = 0, c = t.waypoints; u < c.length; u += 1) {
                    var h = c[u];
                    o.push({
                      location: this.decode(h.location)[0],
                      name: h.name
                    });
                  }
                }
                return {
                  routes: n,
                  waypoints: o
                }
              }.bind(this)).catch(function (t) {
                throw new Error(t)
              })
            }
          }, e.prototype.searchByTransit = function (t) {
            var e = !1;
            if (t.startPoint || (console.error("searchByTransit: startPoint参数不能为空！"), e = !0), t.endPoint || (console.error("searchByTransit: endPoint参数不能为空！"), e = !0), t.city || (console.error("searchByTransit: city参数不能为空！"), e = !0), !e) {
              var r = new Date,
                i = {
                  origin: t.startPoint instanceof Array ? t.startPoint.toString() : this.decode(t.startPoint)[0].toString(),
                  destination: t.endPoint instanceof Array ? t.endPoint.toString() : this.decode(t.endPoint)[0].toString(),
                  city: t.city,
                  cityd: t.cityd || t.city,
                  extensions: t.extensions || "base",
                  strategy: t.strategy || 0,
                  nightflag: t.nightflag || 0,
                  date: t.date || r.getFullYear() + "-" + (r.getMonth() + 1) + "-" + r.getDate(),
                  time: t.time || r.getHours() + ":" + r.getMinutes()
                };
              return i = this.delEmptyObj(i), this.ajax({
                url: this._poiSearchUrl + "transit/integrated",
                data: i,
                method: "GET"
              }).then(function (t) {
                var e = this;
                return t.route ? {
                  count: t.count,
                  route: {
                    origin: this.decode(t.route.origin)[0],
                    destination: this.decode(t.route.destination)[0],
                    transits: function () {
                      var r, i = [];
                      if (t.route.transits)
                        for (var n = 0, o = t.route.transits; n < o.length; n += 1) r = void 0, r = o[n], i.push({
                          cost: r.cost,
                          duration: r.duration,
                          nightflag: r.nightflag,
                          walking_distance: r.walking_distance,
                          segments: function () {
                            var t, i = [];
                            if (r.segments)
                              for (var n = 0, o = r.segments; n < o.length; n += 1) t = void 0, t = o[n], i.push({
                                walking: t.walking && {
                                  origin: e.decode(t.walking.origin)[0],
                                  destination: e.decode(t.walking.destination)[0],
                                  distance: t.walking.distance,
                                  duration: t.walking.duration,
                                  steps: function () {
                                    var r = [];
                                    if (t.walking.steps)
                                      for (var i = 0, n = t.walking.steps; i < n.length; i += 1) {
                                        var o = n[i];
                                        r.push({
                                          instruction: o.instruction || "",
                                          road: o.road || "",
                                          distance: o.distance,
                                          polyline: e.decode(o.polyline),
                                          action: o.action || ""
                                        });
                                      }
                                    return r
                                  }()
                                } || "",
                                bus: {
                                  buslines: function () {
                                    var r, i = [];
                                    if (t.bus.buslines)
                                      for (var n = 0, o = t.bus.buslines; n < o.length; n += 1) r = void 0, r = o[n], i.push({
                                        departure_stop: {
                                          name: r.departure_stop.name,
                                          id: r.departure_stop.id,
                                          location: e.decode(r.departure_stop.location)[0]
                                        },
                                        arrival_stop: {
                                          name: r.arrival_stop.name,
                                          id: r.arrival_stop.id,
                                          location: e.decode(r.arrival_stop.location)[0]
                                        },
                                        name: r.name,
                                        id: r.id,
                                        type: r.type,
                                        distance: r.distance,
                                        duration: r.duration,
                                        polyline: e.decode(r.polyline),
                                        start_time: r.start_time,
                                        end_time: r.end_time,
                                        via_num: r.via_num,
                                        via_stops: function () {
                                          var t = [];
                                          if (r.via_stops)
                                            for (var i = 0, n = r.via_stops; i < n.length; i += 1) {
                                              var o = n[i];
                                              t.push({
                                                name: o.name,
                                                id: o.id,
                                                location: e.decode(o.location)[0]
                                              });
                                            }
                                          return t
                                        }()
                                      });
                                    return i
                                  }()
                                },
                                entrance: t.entrance && {
                                  name: t.entrance.name,
                                  location: e.decode(t.entrance.location)[0]
                                } || "",
                                exit: t.exit && {
                                  name: t.exit.name,
                                  location: e.decode(t.exit.location)[0]
                                } || ""
                              });
                            return i
                          }()
                        });
                      return i
                    }()
                  }
                } : null
              }.bind(this)).catch(function (t) {
                throw new Error(t)
              })
            }
          }, e
        }(Hn),
        fo = function (t) {
          function e() {
            t.call(this), this._baseUrl = this.makeAPIURL("oceandata/");
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.searchNearBy = function (t) {
            var e = !1;
            if (t.mapId || (console.error("searchNearBy: mapId参数不能为空！"), e = !0), t.location || (console.error("searchNearBy: location参数不能为空！"), e = !0), t.radius || (console.error("searchNearBy: radius参数不能为空！"), e = !0), !e) {
              var r = t.mapId,
                i = t.location.toString(),
                n = t.pageIndex,
                o = t.pageSize,
                s = t.fields,
                a = t.radius || !1,
                u = {
                  mapId: r,
                  center: i,
                  page: n,
                  limit: o,
                  radius: a,
                  displayFields: s
                };
              return u = this.delEmptyObj(u), this.ajax({
                url: this._baseUrl + "element/around",
                data: u,
                method: "POST"
              }).then(function (t) {
                var e = [];
                if (t.Feature)
                  for (var r = 0, i = t.Feature.features; r < i.length; r += 1) {
                    var s = i[r];
                    e.push({
                      type: s.type,
                      geometry: {
                        type: s.geometry.type,
                        coordinates: s.geometry.coordinates
                      },
                      properties: s.properties
                    });
                  }
                return {
                  pageIndex: n || 1,
                  pageSize: o || 500,
                  count: t.Num,
                  pois: e
                }
              }.bind(this)).catch(function (t) {
                throw new Error(t)
              })
            }
          }, e.prototype.searchIntersect = function (t) {
            var e = !1;
            if (t.mapId || (console.error("searchIntersect: mapId参数不能为空！"), e = !0), t.geometry || (console.error("searchIntersect: geometry参数不能为空！"), e = !0), !e) {
              var r = t.mapId,
                i = t.geometry,
                n = t.pageIndex,
                o = t.pageSize,
                s = t.fields,
                a = {
                  mapId: r,
                  geometry: JSON.stringify(i),
                  page: n,
                  pageSize: o,
                  displayFields: s,
                  spatialRel: "Intersects"
                };
              return a = this.delEmptyObj(a), this.ajax({
                url: this._baseUrl + "map/features/query",
                data: a,
                method: "POST"
              }).then(function (t) {
                var e = [];
                if (t.features)
                  for (var r = 0, i = t.features; r < i.length; r += 1) {
                    var s = i[r];
                    e.push({
                      type: "Feature",
                      geometry: {
                        type: s.geometry.type,
                        coordinates: s.geometry.coordinates
                      },
                      properties: s.properties
                    });
                  }
                return {
                  pageIndex: n || 1,
                  pageSize: o || 500,
                  count: t.Totals,
                  pois: e
                }
              }.bind(this)).catch(function (t) {
                throw new Error(t)
              })
            }
          }, e
        }(Hn),
        go = function (t) {
          function e() {
            t.call(this), this._baseUrl = this.makeAPIURL("grid/");
          }
          return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.searchByPoint = function (t) {
            var e = !1;
            if (t.location || (console.error("searchByPoint: location参数不能为空！"), e = !0), t.ids ? 1 === t.ids.split(".").length && (console.error("searchByPoint: ids参数格式错误！"), e = !0) : (console.error("searchByPoint: ids参数不能为空！"), e = !0), !e) {
              var r = t.ids.split("."),
                i = r[0],
                n = 1 === r[1].split(",").length ? r[1] : "{" + r[1] + "}",
                o = t.location,
                s = t.wkid || "4326",
                a = t.timestamp || 0;
              return this.ajax({
                url: this._baseUrl + "v1/" + i + "." + n + "/" + s + "/" + o + "/" + a,
                method: "GET"
              }).then(function (t) {
                var e = t.resultValue,
                  r = [];
                if (e.layers)
                  for (var i = 0, n = e.layers; i < n.length; i += 1) {
                    var o = n[i];
                    r.push({
                      name: o.username + "." + o.name,
                      value: o.value
                    });
                  }
                var s = e.location.coordinate.split(",");
                return {
                  location: {
                    wkid: e.location.wkid,
                    lat: Number(s[0]),
                    lng: Number(s[1])
                  },
                  layers: r
                }
              }.bind(this)).catch(function (t) {
                throw new Error(t)
              })
            }
          }, e
        }(Hn),
        _o = {
          enableEdit: !0,
          drawColor: "#3b89ca",
          editColor: "#fdc204"
        };
  
      function yo(t) {
        return JSON.parse(JSON.stringify(t))
      }
  
      function mo(t) {
        return void 0 === t && (t = "polylineDrawLayer"), t + "_" + Math.random().toString(16).substr(2)
      }
      var vo = function (e) {
          function r(e) {
            this.options = t.extend({}, _o, e), this._map = this.options.map, this._container = this._map.getCanvasContainer(), this._isDrawing = !1, this._lastPoint = [], this._currentPoint = [], this._dragIndex = null, this._drawFeaturesList = this.options.featuresList || [], this._drawCurrentFeature, this._drawActiveLineData, this._drawEndVertexData, this._editFeaturesList = [], this._editVertexList, this._editMidleVertexList = [], this.polylineDrawLayer = mo(), this.polylineDrawActiveLayer = mo("polylineDrawActiveLayer"), this.polylineDrawVertexLayer = mo("polylineDrawVertexLayer"), this.polylineEditLayer = mo("polylineEditLayer"), this.polylineEditVertexLayer = mo("polylineEditVertexLayer"), this.polylineEditMidleVertexLayer = mo("polylineEditMidleVertexLayer"), this._map.getLayer(this.polylineDrawLayer) || (this._map.addLayer({
              id: this.polylineDrawLayer,
              type: "line",
              source: {
                type: "geojson",
                data: {
                  type: "FeatureCollection",
                  features: []
                }
              },
              paint: {
                "line-color": this.options.drawColor,
                "line-width": 3,
                "line-opacity": .8
              }
            }), this._map.addLayer({
              id: this.polylineDrawActiveLayer,
              type: "line",
              source: {
                type: "geojson",
                data: {
                  type: "FeatureCollection",
                  features: []
                }
              },
              paint: {
                "line-color": this.options.drawColor,
                "line-width": 3,
                "line-opacity": .8,
                "line-dasharray": [1, 2]
              }
            }), this._map.addLayer({
              id: this.polylineDrawVertexLayer,
              type: "circle",
              source: {
                type: "geojson",
                data: {
                  type: "FeatureCollection",
                  features: [{
                    type: "Feature",
                    geometry: {
                      type: "Point",
                      coordinates: []
                    }
                  }]
                }
              },
              paint: {
                "circle-color": this.options.drawColor,
                "circle-radius": 5,
                "circle-opacity": .7,
                "circle-stroke-width": 3,
                "circle-stroke-color": "#ffffff"
              }
            }), this._theOnDrawLineMouseover = this._onDrawLineMouseover.bind(this), this._map.on("mouseover", this.polylineDrawLayer, this._theOnDrawLineMouseover), this._theOnDrawLineMouseout = this._onDrawLineMouseout.bind(this), this._map.on("mouseout", this.polylineDrawLayer, this._theOnDrawLineMouseout)), this.options.enableEdit && (this._map.getLayer(this.polylineEditLayer) || (this._map.addLayer({
              id: this.polylineEditLayer,
              type: "line",
              source: {
                type: "geojson",
                data: {
                  type: "FeatureCollection",
                  features: []
                }
              },
              paint: {
                "line-color": this.options.editColor,
                "line-width": 2,
                "line-dasharray": [2, 2]
              }
            }), this._map.addLayer({
              id: this.polylineEditVertexLayer,
              type: "circle",
              source: {
                type: "geojson",
                data: {
                  type: "FeatureCollection",
                  features: [{
                    type: "Feature",
                    geometry: {
                      type: "Point",
                      coordinates: []
                    }
                  }]
                }
              },
              paint: {
                "circle-color": this.options.editColor,
                "circle-radius": 5,
                "circle-opacity": .9,
                "circle-stroke-width": 3,
                "circle-stroke-color": "#ffffff"
              }
            }), this._map.addLayer({
              id: this.polylineEditMidleVertexLayer,
              type: "circle",
              source: {
                type: "geojson",
                data: {
                  type: "FeatureCollection",
                  features: [{
                    type: "Feature",
                    geometry: {
                      type: "Point",
                      coordinates: []
                    }
                  }]
                }
              },
              paint: {
                "circle-color": this.options.editColor,
                "circle-radius": 3,
                "circle-opacity": .7,
                "circle-stroke-width": 1,
                "circle-stroke-color": "#ffffff"
              }
            })), this._theOnSelect = this._onSelect.bind(this), this._map.on("click", this._theOnSelect), this._theOnEditVertexMousedown = this._onEditVertexMousedown.bind(this), this._map.on("mousedown", this.polylineEditVertexLayer, this._theOnEditVertexMousedown), this._theOnSelectEditMidVertex = this._onSelectEditMidVertex.bind(this), this._map.on("click", this.polylineEditMidleVertexLayer, this._theOnSelectEditMidVertex), this._theOnEditLineMouseover = this._onEditLineMouseover.bind(this), this._map.on("mouseover", this.polylineEditLayer, this._theOnEditLineMouseover), this._theOnEditLineMouseleave = this._onEditLineMouseleave.bind(this), this._map.on("mouseleave", this.polylineEditLayer, this._theOnEditLineMouseleave), this._theOnEditLineMousedown = this._onEditLineMousedown.bind(this), this._map.on("mousedown", this.polylineEditLayer, this._theOnEditLineMousedown), this._drawFeaturesList.length > 0 && this._map.getSource(this.polylineDrawLayer).setData({
              type: "FeatureCollection",
              features: this._drawFeaturesList
            }));
          }
          return e && (r.__proto__ = e), r.prototype = Object.create(e && e.prototype), r.prototype.constructor = r, r.prototype.getFeatures = function () {
            var t;
            return yo((t = this._drawFeaturesList).concat.apply(t, this._editFeaturesList))
          }, r.prototype.setFeatures = function (t) {
            t instanceof Array && t.length > 0 && (this._drawFeaturesList = t, this._map.getSource(this.polylineDrawLayer).setData({
              type: "FeatureCollection",
              features: this._drawFeaturesList
            }));
          }, r.prototype.startDraw = function () {
            this._isDrawing || this._vertexIsMoving || (this._isDrawing = !0, this._stopEdit(), this._container.style.cursor = "crosshair", this._map.doubleClickZoom.disable(), this._map.dragPan.disable(), this._theOnClick = this._onClick.bind(this), this._theOnMouseMove = this._onMouseMove.bind(this), this._map.on("click", this._theOnClick), this._map.on("mousemove", this._theOnMouseMove), this._currentDrawId = this._getUniqueId(), this._drawCurrentFeature = {
              type: "Feature",
              geometry: {
                type: "LineString",
                coordinates: []
              },
              properties: {
                id: this._currentDrawId
              }
            }, this._drawFeaturesList = this._drawFeaturesList || [], this._drawFeaturesList.push(this._drawCurrentFeature), this._map.getSource(this.polylineDrawLayer).setData({
              type: "FeatureCollection",
              features: this._drawFeaturesList
            }), this.fire("draw.polyline.start"));
          }, r.prototype.endDraw = function () {
            if (this._currentDrawId && this.options.enableEdit && (this._editFeatureById(this._currentDrawId), this._currentDrawId = null), !this._isDrawing || this._vertexIsMoving) return this._stopEdit(), this.fire("polyline.changeStatus", {
              status: "compelete"
            }), this._map.off("mouseover", this.polylineEditLayer, this._theOnEditLineMouseover), this._map.off("mouseleave", this.polylineEditLayer, this._theOnEditLineMouseleave), this._map.off("mousedown", this.polylineEditLayer, this._theOnEditLineMousedown), this._map.off("mousemove", this._theVertexMoving), this._container.style.cursor = "", void(this._vertexIsMoving = !1);
            this._isDrawing = !1, this._clearEditShap(), this._clearEndVertex(), this._map.off("click", this._theOnClick), this._map.off("mousemove", this._theOnMouseMove), this.fire("draw.polyline.end", {
              feature: this._drawCurrentFeature.geometry.coordinates.length > 1 ? yo(this._drawCurrentFeature) : "",
              lastPoint: this._lastPoint,
              currentPoint: this._currentPoint
            }), this._container.style.cursor = "", this._map.dragPan.enable(), setTimeout(function () {
              this._map.doubleClickZoom.enable();
            }.bind(this), 5), this._lastPoint = [], this._currentPoint = [];
          }, r.prototype._onEditLineMouseover = function (t) {
            var e = this._map.queryRenderedFeatures(t.point)[0];
            e.source === this.polylineEditVertexLayer || e.source === this.polylineEditMidleVertexLayer ? this._container.style.cursor = "pointer" : e.source === this.polylineEditLayer && (this._container.style.cursor = "move");
          }, r.prototype._onEditLineMouseleave = function () {
            this._container.style.cursor = "";
          }, r.prototype._onEditLineMousedown = function (t) {
            var e = this._map.queryRenderedFeatures(t.point)[0];
            e.source !== this.polylineEditVertexLayer && e.source !== this.polylineEditMidleVertexLayer && (t.preventDefault(), this.startPos = [t.lngLat.lng, t.lngLat.lat], this._theOnEditLineMousemove = this._onEditLineMousemove.bind(this), this._map.on("mousemove", this._theOnEditLineMousemove), this._theOnEditLineMouseup = this._onEditLineMouseup.bind(this), this._map.on("mouseup", this._theOnEditLineMouseup));
          }, r.prototype._onEditLineMousemove = function (t) {
            var e = this,
              r = this._map.project(this.startPos),
              i = this._map.project([t.lngLat.lng, t.lngLat.lat]),
              n = [i.x - r.x, i.y - r.y];
            this._container.style.cursor = "move", this.tempEditFeaturesList = yo(this._editFeaturesList), this.tempEditVertexList = yo(this._editVertexList), this.tempEditMidleVertexList = yo(this._editMidleVertexList), this.tempEditFeaturesList[0].geometry.coordinates.map(function (t) {
              var r = e._map.project(t);
              r.x += n[0], r.y += n[1];
              var i = e._map.unproject([r.x, r.y]);
              t[0] = i.lng, t[1] = i.lat;
            }), this.tempEditVertexList.map(function (t) {
              var r = e._map.project(t.geometry.coordinates);
              r.x += n[0], r.y += n[1];
              var i = e._map.unproject([r.x, r.y]);
              t.geometry.coordinates[0] = i.lng, t.geometry.coordinates[1] = i.lat;
            }), this.tempEditMidleVertexList.map(function (t) {
              var r = e._map.project(t.geometry.coordinates);
              r.x += n[0], r.y += n[1];
              var i = e._map.unproject([r.x, r.y]);
              t.geometry.coordinates[0] = i.lng, t.geometry.coordinates[1] = i.lat;
            }), this._map.getSource(this.polylineEditLayer).setData({
              type: "FeatureCollection",
              features: this.tempEditFeaturesList
            }), this._map.getSource(this.polylineEditVertexLayer).setData({
              type: "FeatureCollection",
              features: this.tempEditVertexList
            }), this._map.getSource(this.polylineEditMidleVertexLayer).setData({
              type: "FeatureCollection",
              features: this.tempEditMidleVertexList
            });
          }, r.prototype._onEditLineMouseup = function () {
            this._map.off("mousedown", this._theOnEditLineMousedown), this._map.off("mousemove", this._theOnEditLineMousemove), this._map.off("mouseup", this._theOnEditLineMouseup), this.tempEditFeaturesList && 0 != this.tempEditFeaturesList.length && (this._editFeaturesList = this.tempEditFeaturesList, this._editVertexList = this.tempEditVertexList, this._editMidleVertexList = this.tempEditMidleVertexList, this.tempEditFeaturesList = [], this.fire("edit.polyline.change", {
              editFeature: yo(this._editFeaturesList[0])
            }));
          }, r.prototype._onDrawLineMouseover = function () {
            this._isDrawing || (this._container.style.cursor = "pointer");
          }, r.prototype._onDrawLineMouseout = function () {
            this._isDrawing || (this._container.style.cursor = "");
          }, r.prototype._editFeatureById = function (t) {
            for (var e = 0; e < this._drawFeaturesList.length; e++)
              if (this._drawFeaturesList[e].properties.id === t) {
                this._editFeaturesList = this._drawFeaturesList.splice(e, 1), this._map.getSource(this.polylineEditLayer).setData({
                  type: "FeatureCollection",
                  features: this._editFeaturesList
                });
                var r, i = this._editFeaturesList[0].geometry.coordinates;
                this._editVertexList = [];
                for (var n = 0; n < i.length; n++) {
                  var o = {
                    type: "Feature",
                    geometry: {
                      type: "Point",
                      coordinates: i[n]
                    },
                    properties: {
                      id: this._getUniqueId()
                    }
                  };
                  this._editVertexList.push(o), 0 != n && this._editMidleVertexList.push({
                    type: "Feature",
                    geometry: {
                      type: "Point",
                      coordinates: this._midPoi(r, i[n])
                    },
                    properties: {
                      id: this._getUniqueId()
                    }
                  }), r = i[n];
                }
                this._map.getSource(this.polylineEditVertexLayer).setData({
                  type: "FeatureCollection",
                  features: this._editVertexList
                }), this._map.getSource(this.polylineEditMidleVertexLayer).setData({
                  type: "FeatureCollection",
                  features: this._editMidleVertexList
                }), this._map.getSource(this.polylineDrawLayer).setData({
                  type: "FeatureCollection",
                  features: this._drawFeaturesList
                }), this._map.moveLayer(this.polylineEditLayer), this._map.moveLayer(this.polylineEditVertexLayer), this._map.moveLayer(this.polylineEditMidleVertexLayer);
                break
              }
          }, r.prototype._onSelect = function (t) {
            if (!this._isDrawing) {
              var e = this._map.queryRenderedFeatures(t.point)[0];
              if (e.source !== this.polylineEditVertexLayer && this._vertexIsMoving) return this._vertexIsMoving = !1, void this._map.off("mousemove", this._theVertexMoving);
              if (e.source !== this.polylineEditVertexLayer && e.source !== this.polylineEditMidleVertexLayer && e.source !== this.polylineEditLayer) {
                if (this._editFeaturesList.length && this.fire("edit.polyline.end", {
                    editFeature: yo(this._editFeaturesList[0])
                  }), this._stopEdit(), e.source === this.polylineDrawLayer) {
                  this._container.style.cursor = "move";
                  var r = e.properties.id;
                  this.fire("edit.polyline.start", {
                    currentID: r
                  }), this.fire("polyline.changeStatus", {
                    status: "edit"
                  }), this._editFeatureById(r);
                }
                "epgis" === e.source && this.fire("polyline.changeStatus", {
                  status: "compelete"
                });
              }
            }
          }, r.prototype._midPoi = function (t, e) {
            var r = this._map.project([t[0], t[1]]),
              i = this._map.project([e[0], e[1]]),
              n = this._map.unproject([(r.x + i.x) / 2, (r.y + i.y) / 2]);
            return [n.lng, n.lat]
          }, r.prototype._stopEdit = function () {
            if (this._editFeaturesList && 0 != this._editFeaturesList.length) {
              var t = this._editFeaturesList.splice(0, 1);
              this._drawFeaturesList.push(t[0]), this._map.getSource(this.polylineDrawLayer).setData({
                type: "FeatureCollection",
                features: this._drawFeaturesList
              }), this._map.getSource(this.polylineEditLayer).setData({
                type: "FeatureCollection",
                features: this._editFeaturesList
              }), this._editVertexList = [], this._map.getSource(this.polylineEditVertexLayer).setData({
                type: "FeatureCollection",
                features: this._editVertexList
              }), this._editMidleVertexList = [], this._map.getSource(this.polylineEditMidleVertexLayer).setData({
                type: "FeatureCollection",
                features: this._editMidleVertexList
              });
            }
          }, r.prototype._onSelectEditMidVertex = function (t) {
            var e = this._map.queryRenderedFeatures(t.point, {
              layers: [this.polylineEditMidleVertexLayer]
            });
            if (e.length > 0) {
              var r, i = e[0].properties.id,
                n = this._editMidleVertexList.findIndex(function (t) {
                  return t.properties.id === i
                }),
                o = this._editMidleVertexList.splice(n, 1);
              this._editVertexList.splice(n + 1, 0, o[0]), this._editMidleVertexList = [];
              for (var s = 0; s < this._editVertexList.length; s++) 0 != s && this._editMidleVertexList.push({
                type: "Feature",
                geometry: {
                  type: "Point",
                  coordinates: this._midPoi(r, this._editVertexList[s].geometry.coordinates)
                },
                properties: {
                  id: this._getUniqueId()
                }
              }), r = this._editVertexList[s].geometry.coordinates;
              this._map.getSource(this.polylineEditVertexLayer).setData({
                type: "FeatureCollection",
                features: this._editVertexList
              }), this._map.getSource(this.polylineEditMidleVertexLayer).setData({
                type: "FeatureCollection",
                features: this._editMidleVertexList
              });
            }
          }, r.prototype._onEditVertexMousedown = function (t) {
            t.preventDefault();
            var e = this._map.queryRenderedFeatures(t.point, {
              layers: [this.polylineEditVertexLayer]
            })[0];
            if (e) {
              for (var r = e.properties.id, i = 0; i < this._editVertexList.length; i++)
                if (this._editVertexList[i].properties.id === r) {
                  this._dragIndex = i;
                  break
                } if (null === this._dragIndex) return;
              this._theOnEditVertexMousemove = this._onEditVertexMousemove.bind(this), this._map.on("mousemove", this._theOnEditVertexMousemove), this._theOnEditVertexMouseup = this._onEditVertexMouseup.bind(this), this._map.on("mouseup", this._theOnEditVertexMouseup);
            }
          }, r.prototype._onEditVertexMousemove = function (t) {
            var e = this._dragIndex;
            this._vertexIsMoving = !0, this._editVertexList[e].geometry.coordinates[0] = t.lngLat.lng, this._editVertexList[e].geometry.coordinates[1] = t.lngLat.lat, this._editVertexList[e - 1] && (this._editMidleVertexList[e - 1].geometry.coordinates = this._midPoi(this._editVertexList[e - 1].geometry.coordinates, this._editVertexList[e].geometry.coordinates)), this._editVertexList[e + 1] && (this._editMidleVertexList[e].geometry.coordinates = this._midPoi(this._editVertexList[e].geometry.coordinates, this._editVertexList[e + 1].geometry.coordinates)), this._refreshEditLine();
          }, r.prototype._onEditVertexMouseup = function (t) {
            this._vertexIsMoving = !1, this._map.off("mousemove", this._theOnEditVertexMousemove), this._map.off("mouseup", this._theOnEditVertexMouseup), this.fire("edit.polyline.change", {
              editFeature: yo(this._editFeaturesList[0])
            }), this._dragIndex = null;
          }, r.prototype._refreshEditLine = function () {
            this._map.getSource(this.polylineEditVertexLayer).setData({
              type: "FeatureCollection",
              features: this._editVertexList
            }), this._map.getSource(this.polylineEditMidleVertexLayer).setData({
              type: "FeatureCollection",
              features: this._editMidleVertexList
            }), this._editFeaturesList[0].geometry.coordinates = [];
            for (var t = 0, e = this._editVertexList; t < e.length; t += 1) {
              var r = e[t];
              this._editFeaturesList[0].geometry.coordinates.push(r.geometry.coordinates);
            }
            this._map.getSource(this.polylineEditLayer).setData({
              type: "FeatureCollection",
              features: this._editFeaturesList
            });
          }, r.prototype._drawShape = function (t, e) {
            this._drawCurrentFeature.geometry.coordinates.push([t, e]), this._map.getSource(this.polylineDrawLayer).setData({
              type: "FeatureCollection",
              features: this._drawFeaturesList
            }), this._map.getSource(this.polylineDrawVertexLayer).setData({
              type: "FeatureCollection",
              features: [{
                type: "Feature",
                geometry: {
                  type: "Point",
                  coordinates: [t, e]
                }
              }]
            });
          }, r.prototype._drawEditShape = function (t, e) {
            this._drawActiveLineData = {
              type: "FeatureCollection",
              features: [{
                type: "Feature",
                geometry: {
                  type: "LineString",
                  coordinates: [this._currentPoint, [t, e]]
                }
              }]
            }, this._map.getSource(this.polylineDrawActiveLayer).setData(this._drawActiveLineData);
          }, r.prototype._clearEditShap = function () {
            this._drawActiveLineData = {
              type: "FeatureCollection",
              features: []
            }, this._map.getSource(this.polylineDrawActiveLayer).setData(this._drawActiveLineData);
          }, r.prototype._clearEndVertex = function () {
            this._drawEndVertexData = {
              type: "FeatureCollection",
              features: []
            }, this._map.getSource(this.polylineDrawVertexLayer).setData(this._drawEndVertexData);
          }, r.prototype._onClick = function (t) {
            this._isClickVertex(t) || (this._clearEditShap(), this._currentPoint && this._currentPoint.length ? this._lastPoint = [this._currentPoint[0], this._currentPoint[1]] : this._lastPoint = [t.lngLat.lng, t.lngLat.lat], this._currentPoint = [t.lngLat.lng, t.lngLat.lat], this._drawShape(t.lngLat.lng, t.lngLat.lat), this.fire("draw.polyline.addPoint", {
              lastPoint: yo(this._lastPoint),
              currentPoint: yo(this._currentPoint)
            }));
          }, r.prototype._isClickVertex = function (t) {
            var e = this._map.queryRenderedFeatures(t.point, {
              layers: [this.polylineDrawVertexLayer]
            });
            return e.length > 0 && this.endDraw(), e.length
          }, r.prototype._onMouseMove = function (t) {
            this._lastPoint.length && this._drawEditShape(t.lngLat.lng, t.lngLat.lat);
          }, r.prototype.remove = function () {
            this.endDraw(), this._map.off("click", this._theOnSelect), this._map.off("mousedown", this.polylineEditVertexLayer, this._theOnEditVertexMousedown), this._map.off("click", this.polylineEditMidleVertexLayer, this._theOnSelectEditMidVertex), this._map.off("mouseover", this.polylineEditLayer, this._theOnEditLineMouseover), this._map.off("mouseleave", this.polylineEditLayer, this._theOnEditLineMouseleave), this._map.off("mousedown", this.polylineEditLayer, this._theOnEditLineMousedown), this._map.removeLayer(this.polylineDrawLayer), this._map.removeLayer(this.polylineDrawActiveLayer), this._map.removeLayer(this.polylineDrawVertexLayer), this._map.removeLayer(this.polylineEditMidleVertexLayer), this._map.removeSource(this.polylineDrawLayer), this._map.removeSource(this.polylineDrawActiveLayer), this._map.removeSource(this.polylineDrawVertexLayer), this._map.removeSource(this.polylineEditMidleVertexLayer), this._map.off("mouseover", this.polylineDrawLayer, this._theOnDrawLineMouseover), this._map.off("mouseout", this.polylineDrawLayer, this._theOnDrawLineMouseout), this.options.enableEdit && (this._map.removeLayer(this.polylineEditLayer), this._map.removeLayer(this.polylineEditVertexLayer), this._map.removeSource(this.polylineEditLayer), this._map.removeSource(this.polylineEditVertexLayer), this._map.off("click", this._theOnSelect), this._map.off("mousedown", this.polylineEditVertexLayer, this._theOnEditVertexMousedown));
          }, r.prototype.clearData = function () {
            if (this._editFeaturesList.length) {
              var t = this._editFeaturesList[0].properties.id;
              return this._stopEdit(), void this.clearDataById(t)
            }
            this._stopEdit(), this._isDrawing && this.endDraw(), this._vertexIsMoving && (this._map.off("mousemove", this._theVertexMoving), this._vertexIsMoving = !1), this._container.style.cursor = "", this._map.getSource(this.polylineDrawLayer).setData({
              type: "FeatureCollection",
              features: []
            }), this._drawFeaturesList = [];
          }, r.prototype.clearDataById = function (t) {
            var e;
            for (var r in this._isDrawing && this.endDraw(), this._vertexIsMoving && (this._stopEdit(), this._map.off("mousemove", this._theVertexMoving), this._vertexIsMoving = !1), this._container.style.cursor = "", this._drawFeaturesList) this._drawFeaturesList[r].properties.id == t && (e = r);
            var i = this._drawFeaturesList.splice(e, 1);
            return this._map.getSource(this.polylineDrawLayer).setData({
              type: "FeatureCollection",
              features: this._drawFeaturesList
            }), i
          }, r.prototype._getUniqueId = function () {
            return this._uniqueId = null != this._uniqueId ? this._uniqueId + 1 : 2, "drawPolylineId_" + (new Date).getTime() + this._uniqueId
          }, r
        }(t.Evented),
        xo = {
          enableEdit: !0,
          drawColor: "#3b89ca",
          editColor: "#fdc204"
        };
  
      function wo(t) {
        return JSON.parse(JSON.stringify(t))
      }
  
      function bo(t) {
        return void 0 === t && (t = "polygonDrawLayer"), t + "_" + Math.random().toString(16).substr(2)
      }
      var Eo = function (e) {
          function r(e) {
            if (this.options = t.extend({}, xo, e), this._map = this.options.map, this._container = this._map.getCanvasContainer(), this._isDrawing = !1, this._lastPoint = [], this._currentPoint = [], this._dragIndex = null, this._drawFeaturesList = this.options.featuresList || [], this._featuresStroke = [], this._editFeaturesList = [], this._editFeaturesStroke, this._editVertexList, this._editMidleVertexList = [], this.polygonDrawLayer = bo(), this.polygonLineDrawLayer = bo("polygonLineDrawLayer"), this.polygonDrawActiveLayer = bo("polygonDrawActiveLayer"), this.polygonDrawVertexLayer = bo("polygonDrawVertexLayer"), this.polygonEditLayer = bo("polygonEditLayer"), this.polygonLineEditLayer = bo("polygonLineEditLayer"), this.polygonEditVertexLayer = bo("polygonEditVertexLayer"), this.polygonEditMidleVertexLayer = bo("polygonEditMidleVertexLayer"), this._map.getLayer(this.polygonDrawLayer) || (this._map.addLayer({
                id: this.polygonDrawLayer,
                type: "fill",
                source: {
                  type: "geojson",
                  data: {
                    type: "FeatureCollection",
                    features: []
                  }
                },
                paint: {
                  "fill-color": this.options.drawColor,
                  "fill-opacity": .4
                }
              }), this._map.addLayer({
                id: this.polygonDrawActiveLayer,
                type: "line",
                source: {
                  type: "geojson",
                  data: {
                    type: "FeatureCollection",
                    features: []
                  }
                },
                paint: {
                  "line-color": this.options.drawColor,
                  "line-width": 3,
                  "line-opacity": .8,
                  "line-dasharray": [1, 2]
                }
              }), this._map.addLayer({
                id: this.polygonLineDrawLayer,
                type: "line",
                source: {
                  type: "geojson",
                  data: {
                    type: "FeatureCollection",
                    features: []
                  }
                },
                paint: {
                  "line-color": this.options.drawColor,
                  "line-width": 3,
                  "line-opacity": .8
                }
              }), this._map.addLayer({
                id: this.polygonDrawVertexLayer,
                type: "circle",
                source: {
                  type: "geojson",
                  data: {
                    type: "FeatureCollection",
                    features: [{
                      type: "Feature",
                      geometry: {
                        type: "Point",
                        coordinates: []
                      }
                    }]
                  }
                },
                paint: {
                  "circle-color": this.options.drawColor,
                  "circle-radius": 5,
                  "circle-opacity": .7,
                  "circle-stroke-width": 3,
                  "circle-stroke-color": "#ffffff"
                }
              })), this.options.enableEdit && (this._map.getLayer(this.polygonEditLayer) || (this._map.addLayer({
                id: this.polygonEditLayer,
                type: "fill",
                source: {
                  type: "geojson",
                  data: {
                    type: "FeatureCollection",
                    features: []
                  }
                },
                paint: {
                  "fill-color": this.options.editColor,
                  "fill-opacity": .4
                }
              }), this._map.addLayer({
                id: this.polygonLineEditLayer,
                type: "line",
                source: {
                  type: "geojson",
                  data: {
                    type: "FeatureCollection",
                    features: []
                  }
                },
                paint: {
                  "line-color": this.options.editColor,
                  "line-width": 3,
                  "line-opacity": .8,
                  "line-dasharray": [1, 2]
                }
              }), this._map.addLayer({
                id: this.polygonEditVertexLayer,
                type: "circle",
                source: {
                  type: "geojson",
                  data: {
                    type: "FeatureCollection",
                    features: [{
                      type: "Feature",
                      geometry: {
                        type: "Point",
                        coordinates: []
                      }
                    }]
                  }
                },
                paint: {
                  "circle-color": this.options.editColor,
                  "circle-radius": 5,
                  "circle-opacity": .9,
                  "circle-stroke-width": 3,
                  "circle-stroke-color": "#ffffff"
                }
              }), this._map.addLayer({
                id: this.polygonEditMidleVertexLayer,
                type: "circle",
                source: {
                  type: "geojson",
                  data: {
                    type: "FeatureCollection",
                    features: [{
                      type: "Feature",
                      geometry: {
                        type: "Point",
                        coordinates: []
                      }
                    }]
                  }
                },
                paint: {
                  "circle-color": this.options.editColor,
                  "circle-radius": 3,
                  "circle-opacity": .7,
                  "circle-stroke-width": 1,
                  "circle-stroke-color": "#ffffff"
                }
              })), this._theOnSelect = this._onSelect.bind(this), this._map.on("click", this._theOnSelect), this._theOnEditVertexMousedown = this._onEditVertexMousedown.bind(this), this._map.on("mousedown", this.polygonEditVertexLayer, this._theOnEditVertexMousedown), this._theOnSelectEditMidVertex = this._onSelectEditMidVertex.bind(this), this._map.on("click", this.polygonEditMidleVertexLayer, this._theOnSelectEditMidVertex), this._theOnEditMouseover = this._onEditMouseover.bind(this), this._map.on("mouseover", this.polygonEditLayer, this._theOnEditMouseover), this._theOnEditMouseleave = this._onEditMouseleave.bind(this), this._map.on("mouseleave", this.polygonEditLayer, this._theOnEditMouseleave), this._theOnEditMousedown = this._onEditMousedown.bind(this), this._map.on("mousedown", this.polygonEditLayer, this._theOnEditMousedown), this._drawFeaturesList.length > 0)) {
              this._map.getSource(this.polygonDrawLayer).setData({
                type: "FeatureCollection",
                features: this._drawFeaturesList
              });
              for (var r = 0, i = this._drawFeaturesList; r < i.length; r += 1) {
                var n = i[r];
                this._featuresStroke.push({
                  type: "Feature",
                  geometry: {
                    type: "LineString",
                    coordinates: n.geometry.coordinates[0]
                  },
                  properties: n.properties
                });
              }
              this._map.getSource(this.polygonLineDrawLayer).setData({
                type: "FeatureCollection",
                features: this._featuresStroke
              });
            }
          }
          return e && (r.__proto__ = e), r.prototype = Object.create(e && e.prototype), r.prototype.constructor = r, r.prototype._editFeatureById = function (t) {
            for (var e = 0; e < this._drawFeaturesList.length; e++)
              if (this._drawFeaturesList[e].properties.id === t) {
                this._editFeaturesList = this._drawFeaturesList.splice(e, 1), this._editFeaturesStroke = this._featuresStroke.splice(e, 1), this._map.getSource(this.polygonEditLayer).setData({
                  type: "FeatureCollection",
                  features: this._editFeaturesList
                }), this._map.getSource(this.polygonLineEditLayer).setData({
                  type: "FeatureCollection",
                  features: this._editFeaturesStroke
                });
                var r, i = this._editFeaturesList[0].geometry.coordinates[0];
                this._editVertexList = [];
                for (var n = 0; n < i.length; n++) {
                  var o = {
                    type: "Feature",
                    geometry: {
                      type: "Point",
                      coordinates: i[n]
                    },
                    properties: {
                      id: this._getUniqueId()
                    }
                  };
                  this._editVertexList.push(o), 0 != n && this._editMidleVertexList.push({
                    type: "Feature",
                    geometry: {
                      type: "Point",
                      coordinates: this._midPoi(r, i[n])
                    },
                    properties: {
                      id: this._getUniqueId()
                    }
                  }), r = i[n];
                }
                this._editVertexList.pop(), this._map.getSource(this.polygonEditVertexLayer).setData({
                  type: "FeatureCollection",
                  features: this._editVertexList
                }), this._map.getSource(this.polygonEditMidleVertexLayer).setData({
                  type: "FeatureCollection",
                  features: this._editMidleVertexList
                }), this._map.getSource(this.polygonDrawLayer).setData({
                  type: "FeatureCollection",
                  features: this._drawFeaturesList
                }), this._map.getSource(this.polygonLineDrawLayer).setData({
                  type: "FeatureCollection",
                  features: this._featuresStroke
                }), this._map.moveLayer(this.polygonEditLayer), this._map.moveLayer(this.polygonLineEditLayer), this._map.moveLayer(this.polygonEditVertexLayer), this._map.moveLayer(this.polygonEditMidleVertexLayer);
                break
              }
          }, r.prototype._onSelect = function (t) {
            if (!this._isDrawing) {
              var e = this._map.queryRenderedFeatures(t.point)[0];
              if (e.source !== this.polygonEditVertexLayer && this._vertexIsMoving) return this._vertexIsMoving = !1, void this._map.off("mousemove", this._theVertexMoving);
              if (e.source !== this.polygonEditVertexLayer && e.source !== this.polygonEditMidleVertexLayer && e.source !== this.polygonEditLayer) {
                if (this._editFeaturesList.length && this.fire("edit.polygon.end", {
                    editFeature: wo(this._editFeaturesList[0])
                  }), this._stopEdit(), e.source === this.polygonDrawLayer) {
                  this._container.style.cursor = "move";
                  var r = e.properties.id;
                  this.fire("edit.polygon.start", {
                    currentID: r
                  }), this.fire("polygon.changeStatus", {
                    status: "edit"
                  }), this._editFeatureById(r);
                }
                "epgis" === e.source && this.fire("polygon.changeStatus", {
                  status: "compelete"
                });
              }
            }
          }, r.prototype.getFeatures = function () {
            var t;
            return wo((t = this._drawFeaturesList).concat.apply(t, this._editFeaturesList))
          }, r.prototype.setFeatures = function (t) {
            if (t instanceof Array && t.length > 0) {
              this._drawFeaturesList = t, this._featuresStroke = [], this._map.getSource(this.polygonDrawLayer).setData({
                type: "FeatureCollection",
                features: this._drawFeaturesList
              });
              for (var e = 0, r = this._drawFeaturesList; e < r.length; e += 1) {
                var i = r[e];
                this._featuresStroke.push({
                  type: "Feature",
                  geometry: {
                    type: "LineString",
                    coordinates: i.geometry.coordinates[0]
                  },
                  properties: i.properties
                });
              }
              this._map.getSource(this.polygonLineDrawLayer).setData({
                type: "FeatureCollection",
                features: this._featuresStroke
              });
            }
          }, r.prototype.startDraw = function () {
            this._isDrawing || this._vertexIsMoving || (this._isDrawing = !0, this._isClickVertexSwitch = !1, this._container.style.cursor = "crosshair", this._map.doubleClickZoom.disable(), this._map.dragPan.disable(), this._theOnClick = this._onClick.bind(this), this._theOnMouseMove = this._onMouseMove.bind(this), this._map.on("click", this._theOnClick), this._map.on("mousemove", this._theOnMouseMove), this._currentDrawId = this._getUniqueId(), this._currentPolygonFeature = {
              type: "Feature",
              geometry: {
                type: "Polygon",
                coordinates: [
                  []
                ]
              },
              properties: {
                id: this._currentDrawId
              }
            }, this._drawFeaturesList = this._drawFeaturesList || [], this._drawFeaturesList.push(this._currentPolygonFeature), this._featuresStroke = this._featuresStroke || [], this._map.getSource(this.polygonDrawLayer).setData({
              type: "FeatureCollection",
              features: this._drawFeaturesList
            }), this.fire("draw.polygon.start"));
          }, r.prototype.endDraw = function () {
            if (!this._isDrawing) return this._stopEdit(), this.fire("polygon.changeStatus", {
              status: "compelete"
            }), this._map.off("mouseover", this.polygonEditLayer, this._theOnEditMouseover), this._map.off("mouseleave", this.polygonEditLayer, this._theOnEditMouseleave), void this._map.off("mousedown", this.polygonEditLayer, this._theOnEditMousedown);
            this._isDrawing = !1, this._clearEditShap(), this._clearEndVertex();
            var t = this._currentPolygonFeature.geometry.coordinates[0];
            this._isClickVertexSwitch || (t.splice(1, 1), this._map.getSource(this.polygonDrawLayer).setData({
              type: "FeatureCollection",
              features: this._drawFeaturesList
            })), t.length < 4 ? (this._drawFeaturesList.pop(), this._map.getSource(this.polygonDrawLayer).setData({
              type: "FeatureCollection",
              features: this._drawFeaturesList
            })) : this._currentPolygonFeature && (this._featuresStroke.push({
              type: "Feature",
              geometry: {
                type: "LineString",
                coordinates: t
              },
              properties: this._currentPolygonFeature.properties
            }), this._map.getSource(this.polygonLineDrawLayer).setData({
              type: "FeatureCollection",
              features: this._featuresStroke
            })), this._currentDrawId && this.options.enableEdit && (this._editFeatureById(this._currentDrawId), this._currentDrawId = null), this._map.off("click", this._theOnClick), this._map.off("mousemove", this._theOnMouseMove), this.fire("draw.polygon.end", {
              feature: t.length < 4 ? "" : wo(this._currentPolygonFeature),
              lastPoint: wo(this._lastPoint),
              currentPoint: wo(this._currentPoint)
            }), this._container.style.cursor = "", this._map.dragPan.enable(), setTimeout(function () {
              this._map.doubleClickZoom.enable();
            }.bind(this), 5), this._currentPolygonFeature = void 0, this._lastPoint = void 0, this._currentPoint = void 0;
          }, r.prototype._onEditMouseover = function (t) {
            var e = this._map.queryRenderedFeatures(t.point)[0];
            e.source === this.polygonEditVertexLayer || e.source === this.polygonEditMidleVertexLayer ? this._container.style.cursor = "pointer" : e.source !== this.polygonEditLayer && e.source !== this.polygonLineEditLayer || (this._container.style.cursor = "move");
          }, r.prototype._onEditMouseleave = function () {
            this._container.style.cursor = "";
          }, r.prototype._onEditMousedown = function (t) {
            this._map.queryRenderedFeatures(t.point)[0].source === this.polygonEditLayer && (t.preventDefault(), this.startPos = [t.lngLat.lng, t.lngLat.lat], this._theOnEditMousemove = this._onEditMousemove.bind(this), this._map.on("mousemove", this._theOnEditMousemove), this._theOnEditMouseup = this._onEditMouseup.bind(this), this._map.on("mouseup", this._theOnEditMouseup));
          }, r.prototype._onEditMousemove = function (t) {
            var e = this,
              r = this._map.project(this.startPos),
              i = this._map.project([t.lngLat.lng, t.lngLat.lat]),
              n = [i.x - r.x, i.y - r.y];
            this._container.style.cursor = "move", this.tempEditFeaturesList = wo(this._editFeaturesList), this.tempEditFeaturesStroke = wo(this._editFeaturesStroke), this.tempEditVertexList = wo(this._editVertexList), this.tempEditMidleVertexList = wo(this._editMidleVertexList), this.tempEditFeaturesList[0].geometry.coordinates[0].map(function (t) {
              var r = e._map.project(t);
              r.x += n[0], r.y += n[1];
              var i = e._map.unproject([r.x, r.y]);
              t[0] = i.lng, t[1] = i.lat;
            }), this.tempEditFeaturesStroke[0].geometry.coordinates.map(function (t) {
              var r = e._map.project(t);
              r.x += n[0], r.y += n[1];
              var i = e._map.unproject([r.x, r.y]);
              t[0] = i.lng, t[1] = i.lat;
            }), this.tempEditVertexList.map(function (t) {
              var r = e._map.project(t.geometry.coordinates);
              r.x += n[0], r.y += n[1];
              var i = e._map.unproject([r.x, r.y]);
              t.geometry.coordinates[0] = i.lng, t.geometry.coordinates[1] = i.lat;
            }), this.tempEditMidleVertexList.map(function (t) {
              var r = e._map.project(t.geometry.coordinates);
              r.x += n[0], r.y += n[1];
              var i = e._map.unproject([r.x, r.y]);
              t.geometry.coordinates[0] = i.lng, t.geometry.coordinates[1] = i.lat;
            }), this._map.getSource(this.polygonEditLayer).setData({
              type: "FeatureCollection",
              features: this.tempEditFeaturesList
            }), this._map.getSource(this.polygonLineEditLayer).setData({
              type: "FeatureCollection",
              features: this.tempEditFeaturesStroke
            }), this._map.getSource(this.polygonEditVertexLayer).setData({
              type: "FeatureCollection",
              features: this.tempEditVertexList
            }), this._map.getSource(this.polygonEditMidleVertexLayer).setData({
              type: "FeatureCollection",
              features: this.tempEditMidleVertexList
            });
          }, r.prototype._onEditMouseup = function () {
            this._map.off("mousemove", this._theOnEditMousemove), this._map.off("mouseup", this._theOnEditMouseup), this.tempEditFeaturesList && 0 != this.tempEditFeaturesList.length && (this._editFeaturesList = this.tempEditFeaturesList, this._editFeaturesStroke = this.tempEditFeaturesStroke, this._editVertexList = this.tempEditVertexList, this._editMidleVertexList = this.tempEditMidleVertexList, this.fire("edit.polygon.change", {
              editFeature: wo(this._editFeaturesList[0])
            }));
          }, r.prototype._midPoi = function (t, e) {
            var r = this._map.project([t[0], t[1]]),
              i = this._map.project([e[0], e[1]]),
              n = this._map.unproject([(r.x + i.x) / 2, (r.y + i.y) / 2]);
            return [n.lng, n.lat]
          }, r.prototype._stopEdit = function () {
            if (this._editFeaturesList && 0 != this._editFeaturesList.length) {
              var t = this._editFeaturesList.splice(0, 1),
                e = this._editFeaturesStroke.splice(0, 1);
              this._drawFeaturesList.push(t[0]), this._featuresStroke.push(e[0]), this._map.getSource(this.polygonDrawLayer).setData({
                type: "FeatureCollection",
                features: this._drawFeaturesList
              }), this._map.getSource(this.polygonLineDrawLayer).setData({
                type: "FeatureCollection",
                features: this._featuresStroke
              }), this._map.getSource(this.polygonEditLayer).setData({
                type: "FeatureCollection",
                features: this._editFeaturesList
              }), this._editFeaturesStroke = [], this._map.getSource(this.polygonLineEditLayer).setData({
                type: "FeatureCollection",
                features: this._editFeaturesStroke
              }), this._editVertexList = [], this._map.getSource(this.polygonEditVertexLayer).setData({
                type: "FeatureCollection",
                features: this._editVertexList
              }), this._editMidleVertexList = [], this._map.getSource(this.polygonEditMidleVertexLayer).setData({
                type: "FeatureCollection",
                features: this._editMidleVertexList
              });
            }
          }, r.prototype._onSelectEditMidVertex = function (t) {
            var e = this._map.queryRenderedFeatures(t.point, {
              layers: [this.polygonEditMidleVertexLayer]
            });
            if (e.length > 0) {
              var r, i = e[0].properties.id,
                n = this._editMidleVertexList.findIndex(function (t) {
                  return t.properties.id === i
                }),
                o = this._editMidleVertexList.splice(n, 1);
              this._editVertexList.splice(n + 1, 0, o[0]), this._editMidleVertexList = [];
              for (var s = 0; s <= this._editVertexList.length; s++) 0 != s && this._editMidleVertexList.push({
                type: "Feature",
                geometry: {
                  type: "Point",
                  coordinates: this._midPoi(r, this._editVertexList[s] && this._editVertexList[s].geometry.coordinates || this._editVertexList[0].geometry.coordinates)
                },
                properties: {
                  id: this._getUniqueId()
                }
              }), r = this._editVertexList[s] && this._editVertexList[s].geometry.coordinates || null;
              this._map.getSource(this.polygonEditVertexLayer).setData({
                type: "FeatureCollection",
                features: this._editVertexList
              }), this._map.getSource(this.polygonEditMidleVertexLayer).setData({
                type: "FeatureCollection",
                features: this._editMidleVertexList
              });
            }
          }, r.prototype._onEditVertexMousedown = function (t) {
            t.preventDefault();
            var e = this._map.queryRenderedFeatures(t.point, {
              layers: [this.polygonEditVertexLayer]
            })[0];
            if (e) {
              for (var r = e.properties.id, i = 0; i < this._editVertexList.length; i++)
                if (this._editVertexList[i].properties.id === r) {
                  this._dragIndex = i;
                  break
                } if (null === this._dragIndex) return;
              this._theOnEditVertexMousemove = this._onEditVertexMousemove.bind(this), this._map.on("mousemove", this._theOnEditVertexMousemove), this._theOnEditVertexMouseup = this._onEditVertexMouseup.bind(this), this._map.on("mouseup", this._theOnEditVertexMouseup);
            }
          }, r.prototype._onEditVertexMousemove = function (t) {
            var e = this._dragIndex;
            this._vertexIsMoving = !0, this._editVertexList[e].geometry.coordinates[0] = t.lngLat.lng, this._editVertexList[e].geometry.coordinates[1] = t.lngLat.lat;
            var r = e - 1 == -1 ? this._editVertexList.length - 1 : e - 1,
              i = e + 1 == this._editVertexList.length ? 0 : e + 1;
            this._editVertexList[r] && (this._editMidleVertexList[r].geometry.coordinates = this._midPoi(this._editVertexList[r].geometry.coordinates, this._editVertexList[e].geometry.coordinates)), this._editVertexList[i] && (this._editMidleVertexList[e].geometry.coordinates = this._midPoi(this._editVertexList[e].geometry.coordinates, this._editVertexList[i].geometry.coordinates)), this._refreshEditLine();
          }, r.prototype._onEditVertexMouseup = function (t) {
            this._vertexIsMoving = !1, this._map.off("mousemove", this._theOnEditVertexMousemove), this._map.off("mouseup", this._theOnEditVertexMouseup), this.fire("edit.polygon.change", {
              editFeature: wo(this._editFeaturesList[0])
            }), this._dragIndex = null;
          }, r.prototype._refreshEditLine = function () {
            this._map.getSource(this.polygonEditVertexLayer).setData({
              type: "FeatureCollection",
              features: this._editVertexList
            }), this._map.getSource(this.polygonEditMidleVertexLayer).setData({
              type: "FeatureCollection",
              features: this._editMidleVertexList
            }), this._editFeaturesList[0].geometry.coordinates[0] = [], this._editFeaturesStroke[0].geometry.coordinates = [];
            for (var t = 0, e = this._editVertexList; t < e.length; t += 1) {
              var r = e[t];
              this._editFeaturesList[0].geometry.coordinates[0].push(r.geometry.coordinates), this._editFeaturesStroke[0].geometry.coordinates.push(r.geometry.coordinates);
            }
            this._editFeaturesList[0].geometry.coordinates[0].push(this._editFeaturesList[0].geometry.coordinates[0][0]), this._map.getSource(this.polygonEditLayer).setData({
              type: "FeatureCollection",
              features: this._editFeaturesList
            }), this._editFeaturesStroke[0].geometry.coordinates.push(this._editFeaturesStroke[0].geometry.coordinates[0]), this._map.getSource(this.polygonLineEditLayer).setData({
              type: "FeatureCollection",
              features: this._editFeaturesStroke
            });
          }, r.prototype._drawShape = function (t, e) {
            var r = this._currentPolygonFeature.geometry.coordinates[0];
            0 == r.length ? (r.push([t, e]), r.push([t, e])) : r.splice(1, 0, [t, e]), this._map.getSource(this.polygonDrawLayer).setData({
              type: "FeatureCollection",
              features: this._drawFeaturesList
            });
            for (var i = [], n = 0; n < 2; n++)
              if (r[n]) {
                var o = {
                  type: "Feature",
                  geometry: {
                    type: "Point",
                    coordinates: r[n]
                  }
                };
                i.push(o);
              } this._map.getSource(this.polygonDrawVertexLayer).setData({
              type: "FeatureCollection",
              features: i
            });
          }, r.prototype._drawEditShape = function (t, e) {
            this._editingLineData = {
              type: "FeatureCollection",
              features: [{
                type: "Feature",
                geometry: {
                  type: "LineString",
                  coordinates: this._currentPolygonFeature.geometry.coordinates[0]
                }
              }]
            }, this._map.getSource(this.polygonDrawActiveLayer).setData(this._editingLineData);
          }, r.prototype._clearEditShap = function () {
            this._editingLineData = {
              type: "FeatureCollection",
              features: []
            }, this._map.getSource(this.polygonDrawActiveLayer).setData(this._editingLineData);
          }, r.prototype._clearEndVertex = function () {
            this._endVertexData = {
              type: "FeatureCollection",
              features: []
            }, this._map.getSource(this.polygonDrawVertexLayer).setData(this._endVertexData);
          }, r.prototype._onClick = function (t) {
            this._isClickVertex(t) || (this._clearEditShap(), this._currentPoint && this._currentPoint.length ? this._lastPoint = [this._currentPoint[0], this._currentPoint[1]] : this._lastPoint = [t.lngLat.lng, t.lngLat.lat], this._currentPoint = [t.lngLat.lng, t.lngLat.lat], this._drawShape(t.lngLat.lng, t.lngLat.lat), this.fire("draw.polygon.addPoint", {
              lastPoint: wo(this._lastPoint),
              currentPoint: wo(this._currentPoint)
            }));
          }, r.prototype._onMouseMove = function (t) {
            if (0 !== this._currentPolygonFeature.geometry.coordinates[0].length) {
              var e = this._currentPolygonFeature.geometry.coordinates[0],
                r = t.lngLat.lng,
                i = t.lngLat.lat;
              e.length < 3 ? e.splice(1, 0, [r, i]) : e.splice(1, 1, [r, i]), this._map.getSource(this.polygonDrawLayer).setData({
                type: "FeatureCollection",
                features: this._drawFeaturesList
              }), this._editingLineData = {
                type: "FeatureCollection",
                features: [{
                  type: "Feature",
                  geometry: {
                    type: "LineString",
                    coordinates: this._currentPolygonFeature.geometry.coordinates[0]
                  }
                }]
              }, this._map.getSource(this.polygonDrawActiveLayer).setData(this._editingLineData);
            }
          }, r.prototype._isClickVertex = function (t) {
            var e = this._map.queryRenderedFeatures(t.point, {
              layers: [this.polygonDrawVertexLayer]
            });
            e.length > 0 && (this._isClickVertexSwitch = !0, this._currentPolygonFeature.geometry.coordinates[0].splice(1, 1), this._map.getSource(this.polygonDrawLayer).setData({
              type: "FeatureCollection",
              features: this._drawFeaturesList
            }), this.endDraw());
            return e.length
          }, r.prototype.remove = function () {
            this.endDraw(), this._map.off("click", this._theOnSelect), this._map.off("click", this.polygonEditMidleVertexLayer, this._theOnSelectEditMidVertex), this._map.off("mouseover", this.polygonEditLayer, this._theOnEditMouseover), this._map.off("mouseleave", this.polygonEditLayer, this._theOnEditMouseleave), this._map.off("mousedown", this.polygonEditLayer, this._theOnEditMousedown), this._map.removeLayer(this.polygonDrawLayer), this._map.removeLayer(this.polygonDrawActiveLayer), this._map.removeLayer(this.polygonLineDrawLayer), this._map.removeLayer(this.polygonDrawVertexLayer), this._map.removeSource(this.polygonDrawLayer), this._map.removeSource(this.polygonDrawActiveLayer), this._map.removeSource(this.polygonLineDrawLayer), this._map.removeSource(this.polygonDrawVertexLayer), this._map.off("mouseover", this.polygonDrawLayer, this._theOnDrawLineMouseover), this._map.off("mouseout", this.polygonDrawLayer, this._theOnDrawLineMouseout), this.options.enableEdit && (this._map.removeLayer(this.polygonEditLayer), this._map.removeLayer(this.polygonEditVertexLayer), this._map.removeLayer(this.polygonLineEditLayer), this._map.removeLayer(this.polygonEditMidleVertexLayer), this._map.removeSource(this.polygonEditLayer), this._map.removeSource(this.polygonEditVertexLayer), this._map.removeSource(this.polygonLineEditLayer), this._map.removeSource(this.polygonEditMidleVertexLayer), this._map.off("click", this._theOnSelect), this._map.on("mousedown", this.polygonEditVertexLayer, this._theOnEditVertexMousedown));
          }, r.prototype.clearData = function () {
            if (this._editFeaturesList.length) {
              var t = this._editFeaturesList[0].properties.id;
              return this._stopEdit(), void this.clearDataById(t)
            }
            this._isDrawing || this._stopEdit(), this._map.getSource(this.polygonDrawLayer).setData({
              type: "FeatureCollection",
              features: []
            }), this._map.getSource(this.polygonLineDrawLayer).setData({
              type: "FeatureCollection",
              features: []
            }), this._drawFeaturesList = [], this._featuresStroke = [];
          }, r.prototype.clearDataById = function (t) {
            for (var e, r = 0; r < this._drawFeaturesList.length; r++) this._drawFeaturesList[r].properties.id == t && (e = r);
            var i = this._drawFeaturesList.splice(e, 1);
            return this._featuresStroke.splice(e, 1), this._map.getSource(this.polygonDrawLayer).setData({
              type: "FeatureCollection",
              features: this._drawFeaturesList
            }), this._map.getSource(this.polygonLineDrawLayer).setData({
              type: "FeatureCollection",
              features: this._featuresStroke
            }), i
          }, r.prototype._getUniqueId = function () {
            return this._uniqueId = null != this._uniqueId ? this._uniqueId + 1 : 2, "drawPolygonId_" + (new Date).getTime() + this._uniqueId
          }, r
        }(t.Evented),
        Lo = {
          enableEdit: !0,
          drawColor: "#3b89ca",
          editColor: "#fdc204"
        };
  
      function So(t) {
        return JSON.parse(JSON.stringify(t))
      }
  
      function Co() {
        return "pointLayer_" + Math.random().toString(16).substr(2)
      }
      var Io = function (e) {
          function r(r) {
            e.call(this), this.options = t.extend({}, Lo, r), this._map = this.options.map, this._container = this._map.getCanvasContainer(), this._isDrawing = !1, this._drawFeaturesList = this.options.featuresList || [], this._editFeaturesList = [], this.pointDrawLayer = Co(), this.pointEditLayer = Co(), this._map.getLayer(this.pointDrawLayer) || (this._map.addLayer({
              id: this.pointDrawLayer,
              type: "circle",
              source: {
                type: "geojson",
                data: {
                  type: "FeatureCollection",
                  features: [{
                    type: "Feature",
                    geometry: {
                      type: "Point",
                      coordinates: []
                    }
                  }]
                }
              },
              paint: {
                "circle-color": this.options.drawColor,
                "circle-radius": 8,
                "circle-opacity": .7,
                "circle-stroke-width": 3,
                "circle-stroke-color": "#ffffff"
              }
            }), this._theHoverDrawMouseover = this._hoverDrawMouseover.bind(this), this._map.on("mouseover", this.pointDrawLayer, this._theHoverDrawMouseover), this._theHoverDrawMouseout = this._hoverDrawMouseover.bind(this, !1), this._map.on("mouseout", this.pointDrawLayer, this._theHoverDrawMouseout)), this.options.enableEdit && (this._map.getLayer(this.pointEditLayer) || this._map.addLayer({
              id: this.pointEditLayer,
              type: "circle",
              source: {
                type: "geojson",
                data: {
                  type: "FeatureCollection",
                  features: [{
                    type: "Feature",
                    geometry: {
                      type: "Point",
                      coordinates: []
                    }
                  }]
                }
              },
              paint: {
                "circle-color": this.options.editColor,
                "circle-radius": 8,
                "circle-opacity": .9,
                "circle-stroke-width": 3,
                "circle-stroke-color": "#ffffff"
              }
            }), this._theOnSelect = this._onSelect.bind(this), this._map.on("click", this._theOnSelect), this._theOnEditMousedown = this._onEditMousedown.bind(this), this._map.on("mousedown", this.pointEditLayer, this._theOnEditMousedown), this._theHoverEditMouseover = this._hoverEditMouseover.bind(this), this._map.on("mouseover", this.pointEditLayer, this._theHoverEditMouseover), this._theHoverEditMouseout = this._hoverEditMouseover.bind(this, !1), this._map.on("mouseout", this.pointEditLayer, this._theHoverEditMouseout), this._drawFeaturesList.length > 0 && this._map.getSource(this.pointDrawLayer).setData({
              type: "FeatureCollection",
              features: this._drawFeaturesList
            }));
          }
          return e && (r.__proto__ = e), r.prototype = Object.create(e && e.prototype), r.prototype.constructor = r, r.prototype._onSelect = function (t) {
            if (!this._isDrawing) {
              var e = this._map.queryRenderedFeatures(t.point)[0];
              if (e.source !== this.pointEditLayer) {
                if (this._editFeaturesList.length && this.fire("edit.point.end", {
                    editFeature: So(this._editFeaturesList[0])
                  }), this._stopEdit(), e.source === this.pointDrawLayer) {
                  this._container.style.cursor = "move";
                  var r = e.properties.id;
                  this.fire("edit.point.start", {
                    currentID: r
                  }), this.fire("point.changeStatus", {
                    status: "edit"
                  });
                  for (var i = 0; i < this._drawFeaturesList.length; i++)
                    if (this._drawFeaturesList[i].properties.id == r) {
                      this._editFeaturesList = this._drawFeaturesList.splice(i, 1), this._map.getSource(this.pointEditLayer).setData({
                        type: "FeatureCollection",
                        features: this._editFeaturesList
                      }), this._map.getSource(this.pointDrawLayer).setData({
                        type: "FeatureCollection",
                        features: this._drawFeaturesList
                      }), this._map.moveLayer(this.pointEditLayer);
                      break
                    }
                }
                "epgis" === e.source && this.fire("point.changeStatus", {
                  status: "compelete"
                });
              }
            }
          }, r.prototype._stopEdit = function () {
            if (this._editFeaturesList && 0 != this._editFeaturesList.length) {
              var t = this._editFeaturesList.splice(0, 1);
              this._drawFeaturesList.push(t[0]), this._map.getSource(this.pointDrawLayer).setData({
                type: "FeatureCollection",
                features: this._drawFeaturesList
              }), this._map.getSource(this.pointEditLayer).setData({
                type: "FeatureCollection",
                features: this._editFeaturesList
              });
            }
          }, r.prototype._onEditMousedown = function (t) {
            t.preventDefault(), this.startPos = [t.lngLat.lng, t.lngLat.lat], this._theOnEditMousemove = this._onEditMousemove.bind(this), this._map.on("mousemove", this._theOnEditMousemove), this._theOnEditMouseup = this._onEditMouseup.bind(this), this._map.on("mouseup", this._theOnEditMouseup);
          }, r.prototype._onEditMousemove = function (t) {
            this._IsMoving = !0;
            var e = this._map.project(this.startPos),
              r = this._map.project([t.lngLat.lng, t.lngLat.lat]),
              i = [r.x - e.x, r.y - e.y];
            this.tempEditFeaturesList = So(this._editFeaturesList);
            var n = this.tempEditFeaturesList[0].geometry.coordinates,
              o = this._map.project([n[0], n[1]]);
            o.x += i[0], o.y += i[1];
            var s = this._map.unproject([o.x, o.y]);
            n[0] = s.lng, n[1] = s.lat, this._map.getSource(this.pointEditLayer).setData({
              type: "FeatureCollection",
              features: this.tempEditFeaturesList
            });
          }, r.prototype._onEditMouseup = function (t) {
            this._map.off("mousemove", this._theOnEditMousemove), this._map.off("mouseup", this._theOnEditMouseup), this.tempEditFeaturesList && 0 !== this.tempEditFeaturesList.length && (this._editFeaturesList = this.tempEditFeaturesList, this.tempEditFeaturesList = [], this.fire("edit.point.change", {
              editFeature: So(this._editFeaturesList[0])
            }), this._IsMoving = !1);
          }, r.prototype._onClick = function (t) {
            this._currentFeature.geometry.coordinates = [t.lngLat.lng, t.lngLat.lat], this.fire("draw.point.addPoint", {
              point: So(this._currentFeature)
            }), this.endDraw();
          }, r.prototype.startDraw = function () {
            this._isDrawing || (this._isDrawing = !0, this._stopEdit(), this._container.style.cursor = "crosshair", this._theOnClick = this._onClick.bind(this), this._map.on("click", this._theOnClick), this._currentFeature = {
              type: "Feature",
              geometry: {
                type: "Point",
                coordinates: []
              },
              properties: {
                id: this._getUniqueId()
              }
            }, this._drawFeaturesList = this._drawFeaturesList || [], this.fire("draw.point.start"));
          }, r.prototype.endDraw = function () {
            this._isDrawing = !1, this._map.off("click", this._theOnClick), this.fire("draw.point.end", {
              feature: So(this._currentFeature)
            }), this.options.enableEdit ? (this._editFeaturesList.push(this._currentFeature), this._map.getSource(this.pointEditLayer).setData({
              type: "FeatureCollection",
              features: this._editFeaturesList
            }), this._container.style.cursor = "move") : (this._drawFeaturesList.push(this._currentFeature), this._map.getSource(this.pointDrawLayer).setData({
              type: "FeatureCollection",
              features: this._drawFeaturesList
            }), this._container.style.cursor = "");
          }, r.prototype.getFeatures = function () {
            var t;
            return So((t = this._drawFeaturesList).concat.apply(t, this._editFeaturesList.concat(this._currentFeature)))
          }, r.prototype.setFeatures = function (t) {
            t instanceof Array && t.length > 0 && (this._drawFeaturesList = t, this._map.getSource(this.pointDrawLayer).setData({
              type: "FeatureCollection",
              features: this._drawFeaturesList
            }));
          }, r.prototype.getActive = function () {
            return this._IsMoving
          }, r.prototype._hoverDrawMouseover = function (t) {
            void 0 === t && (t = !0), this._isDrawing || this._IsMoving || (this._container.style.cursor = t ? "pointer" : "");
          }, r.prototype._hoverEditMouseover = function (t) {
            void 0 === t && (t = !0), this._isDrawing || this._IsMoving || (this._container.style.cursor = t ? "move" : "");
          }, r.prototype.remove = function () {
            this._isDrawing || (this._map.off("click", this._theOnSelect), this._map.off("mouseover", this.pointDrawLayer, this._theHoverDrawMouseover), this._map.off("mouseout", this.pointDrawLayer, this._theHoverDrawMouseout), this._map.removeLayer(this.pointDrawLayer), this._map.removeSource(this.pointDrawLayer), this.options.enableEdit && (this._map.off("mousedown", this.pointEditLayer, this._theOnEditMousedown), this._map.off("mouseover", this.pointEditLayer, this._theHoverEditMouseover), this._map.off("mouseout", this.pointEditLayer, this._theHoverEditMouseout), this._map.removeLayer(this.pointEditLayer), this._map.removeSource(this.pointEditLayer)));
          }, r.prototype.clearData = function () {
            if (this._editFeaturesList.length) {
              var t = this._editFeaturesList[0].properties.id;
              return this._stopEdit(), void this.clearDataById(t)
            }
            this._map.getSource(this.pointDrawLayer).setData({
              type: "FeatureCollection",
              features: []
            }), this._drawFeaturesList = [];
          }, r.prototype.clearDataById = function (t) {
            var e;
            for (var r in this._drawFeaturesList) this._drawFeaturesList[r].properties.id == t && (e = r);
            var i = this._drawFeaturesList.splice(e, 1);
            return this._map.getSource(this.pointDrawLayer).setData({
              type: "FeatureCollection",
              features: this._drawFeaturesList
            }), i
          }, r.prototype._getUniqueId = function () {
            return this._uniqueId = null != this._uniqueId ? this._uniqueId + 1 : 2, "drawPointId_" + (new Date).getTime() + this._uniqueId
          }, r
        }(t.Evented),
        Mo = [2, 3, 0, 1],
        To = {
          enableEdit: !0,
          drawColor: "#3b89ca",
          editColor: "#fdc204"
        };
  
      function Po(t) {
        return JSON.parse(JSON.stringify(t))
      }
  
      function Do(t) {
        return void 0 === t && (t = "rectangleDrawLayer"), t + "_" + Math.random().toString(16).substr(2)
      }
      var No = function (e) {
          function r(e) {
            if (this.options = t.extend({}, To, e), this._map = this.options.map, this._container = this._map.getCanvasContainer(), this._isDrawing = !1, this._startPoint = [], this._endPoint = [], this._dragIndex = null, this._drawFeaturesList = this.options.featuresList || [], this._featuresStroke = [], this._editFeaturesList = [], this._editFeaturesStroke, this._editVertexList, this.rectangleDrawLayer = Do(), this.rectangleLineDrawLayer = Do("rectangleLineDrawLayer"), this.rectangleDrawActiveLayer = Do("rectangleDrawActiveLayer"), this.rectangleDrawVertexLayer = Do("rectangleDrawVertexLayer"), this.rectangleEditLayer = Do("rectangleEditLayer"), this.rectangleLineEditLayer = Do("rectangleLineEditLayer"), this.rectangleEditVertexLayer = Do("rectangleEditVertexLayer"), this._map.getLayer(this.rectangleDrawLayer) || (this._map.addLayer({
                id: this.rectangleDrawLayer,
                type: "fill",
                source: {
                  type: "geojson",
                  data: {
                    type: "FeatureCollection",
                    features: []
                  }
                },
                paint: {
                  "fill-color": this.options.drawColor,
                  "fill-opacity": .4
                }
              }), this._map.addLayer({
                id: this.rectangleDrawActiveLayer,
                type: "line",
                source: {
                  type: "geojson",
                  data: {
                    type: "FeatureCollection",
                    features: []
                  }
                },
                paint: {
                  "line-color": this.options.drawColor,
                  "line-width": 3,
                  "line-opacity": .8,
                  "line-dasharray": [1, 2]
                }
              }), this._map.addLayer({
                id: this.rectangleLineDrawLayer,
                type: "line",
                source: {
                  type: "geojson",
                  data: {
                    type: "FeatureCollection",
                    features: []
                  }
                },
                paint: {
                  "line-color": this.options.drawColor,
                  "line-width": 3,
                  "line-opacity": .8
                }
              }), this._map.addLayer({
                id: this.rectangleDrawVertexLayer,
                type: "circle",
                source: {
                  type: "geojson",
                  data: {
                    type: "FeatureCollection",
                    features: [{
                      type: "Feature",
                      geometry: {
                        type: "Point",
                        coordinates: []
                      }
                    }]
                  }
                },
                paint: {
                  "circle-color": this.options.drawColor,
                  "circle-radius": 5,
                  "circle-opacity": .7,
                  "circle-stroke-width": 3,
                  "circle-stroke-color": "#ffffff"
                }
              })), this.options.enableEdit && (this._map.getLayer(this.rectangleEditLayer) || (this._map.addLayer({
                id: this.rectangleEditLayer,
                type: "fill",
                source: {
                  type: "geojson",
                  data: {
                    type: "FeatureCollection",
                    features: []
                  }
                },
                paint: {
                  "fill-color": this.options.editColor,
                  "fill-opacity": .4
                }
              }), this._map.addLayer({
                id: this.rectangleLineEditLayer,
                type: "line",
                source: {
                  type: "geojson",
                  data: {
                    type: "FeatureCollection",
                    features: []
                  }
                },
                paint: {
                  "line-color": this.options.editColor,
                  "line-width": 3,
                  "line-opacity": .8,
                  "line-dasharray": [1, 2]
                }
              }), this._map.addLayer({
                id: this.rectangleEditVertexLayer,
                type: "circle",
                source: {
                  type: "geojson",
                  data: {
                    type: "FeatureCollection",
                    features: [{
                      type: "Feature",
                      geometry: {
                        type: "Point",
                        coordinates: []
                      }
                    }]
                  }
                },
                paint: {
                  "circle-color": this.options.editColor,
                  "circle-radius": 5,
                  "circle-opacity": .9,
                  "circle-stroke-width": 3,
                  "circle-stroke-color": "#ffffff"
                }
              })), this._theOnSelect = this._onSelect.bind(this), this._map.on("click", this._theOnSelect), this._theOnEditVertexMousedown = this._onEditVertexMousedown.bind(this), this._map.on("mousedown", this.rectangleEditVertexLayer, this._theOnEditVertexMousedown), this._theOnEditMouseover = this._onEditMouseover.bind(this), this._map.on("mouseover", this.rectangleEditLayer, this._theOnEditMouseover), this._theOnEditMouseleave = this._onEditMouseleave.bind(this), this._map.on("mouseleave", this.rectangleEditLayer, this._theOnEditMouseleave), this._theOnEditMousedown = this._onEditMousedown.bind(this), this._map.on("mousedown", this.rectangleEditLayer, this._theOnEditMousedown), this._drawFeaturesList.length > 0)) {
              this._map.getSource(this.rectangleDrawLayer).setData({
                type: "FeatureCollection",
                features: this._drawFeaturesList
              });
              for (var r = 0, i = this._drawFeaturesList; r < i.length; r += 1) {
                var n = i[r];
                this._featuresStroke.push({
                  type: "Feature",
                  geometry: {
                    type: "LineString",
                    coordinates: n.geometry.coordinates[0]
                  },
                  properties: n.properties
                });
              }
              this._map.getSource(this.rectangleLineDrawLayer).setData({
                type: "FeatureCollection",
                features: this._featuresStroke
              });
            }
          }
          return e && (r.__proto__ = e), r.prototype = Object.create(e && e.prototype), r.prototype.constructor = r, r.prototype.getFeatures = function () {
            var t;
            return Po((t = this._drawFeaturesList).concat.apply(t, this._editFeaturesList))
          }, r.prototype.setFeatures = function (t) {
            if (t instanceof Array && t.length > 0) {
              this._drawFeaturesList = t, this._featuresStroke = [], this._map.getSource(this.rectangleDrawLayer).setData({
                type: "FeatureCollection",
                features: this._drawFeaturesList
              });
              for (var e = 0, r = this._drawFeaturesList; e < r.length; e += 1) {
                var i = r[e];
                this._featuresStroke.push({
                  type: "Feature",
                  geometry: {
                    type: "LineString",
                    coordinates: i.geometry.coordinates[0]
                  },
                  properties: i.properties
                });
              }
              this._map.getSource(this.rectangleLineDrawLayer).setData({
                type: "FeatureCollection",
                features: this._featuresStroke
              });
            }
          }, r.prototype._editFeatureById = function (t) {
            for (var e = 0; e < this._drawFeaturesList.length; e++)
              if (this._drawFeaturesList[e].properties.id === t) {
                this._editFeaturesList = this._drawFeaturesList.splice(e, 1), this._editFeaturesStroke = this._featuresStroke.splice(e, 1), this._map.getSource(this.rectangleEditLayer).setData({
                  type: "FeatureCollection",
                  features: this._editFeaturesList
                }), this._map.getSource(this.rectangleLineEditLayer).setData({
                  type: "FeatureCollection",
                  features: this._editFeaturesStroke
                });
                var r = this._editFeaturesList[0].geometry.coordinates[0];
                this._editVertexList = [];
                for (var i = 0; i < r.length; i++) {
                  var n = {
                    type: "Feature",
                    geometry: {
                      type: "Point",
                      coordinates: r[i]
                    },
                    properties: {
                      id: this._getUniqueId()
                    }
                  };
                  this._editVertexList.push(n);
                }
                this._editVertexList.pop(), this._map.getSource(this.rectangleEditVertexLayer).setData({
                  type: "FeatureCollection",
                  features: this._editVertexList
                }), this._map.getSource(this.rectangleDrawLayer).setData({
                  type: "FeatureCollection",
                  features: this._drawFeaturesList
                }), this._map.getSource(this.rectangleLineDrawLayer).setData({
                  type: "FeatureCollection",
                  features: this._featuresStroke
                }), this._map.moveLayer(this.rectangleEditLayer), this._map.moveLayer(this.rectangleLineEditLayer), this._map.moveLayer(this.rectangleEditVertexLayer);
                break
              }
          }, r.prototype._onSelect = function (t) {
            if (!this._isDrawing) {
              var e = this._map.queryRenderedFeatures(t.point)[0];
              if (e.source !== this.rectangleEditVertexLayer && this._vertexIsMoving) return this._vertexIsMoving = !1, void this._map.off("mousemove", this._theVertexMoving);
              if (e.source !== this.rectangleEditVertexLayer && e.source !== this.rectangleEditLayer) {
                if (this._editFeaturesList.length && this.fire("edit.rectangle.end", {
                    editFeature: Po(this._editFeaturesList[0])
                  }), this._stopEdit(), e.source === this.rectangleDrawLayer) {
                  this._container.style.cursor = "move";
                  var r = e.properties.id;
                  this.fire("edit.rectangle.start", {
                    currentID: r
                  }), this.fire("rectangle.changeStatus", {
                    status: "edit"
                  }), this._editFeatureById(r);
                }
                "epgis" === e.source && this.fire("rectangle.changeStatus", {
                  status: "compelete"
                });
              }
            }
          }, r.prototype.startDraw = function () {
            this._isDrawing || this._vertexIsMoving || (this._isDrawing = !0, this._isClickVertexSwitch = !1, this._container.style.cursor = "crosshair", this._map.doubleClickZoom.disable(), this._map.dragPan.disable(), this._theOnClick = this._onClick.bind(this), this._theOnMouseMove = this._onMouseMove.bind(this), this._map.on("click", this._theOnClick), this._map.on("mousemove", this._theOnMouseMove), this._currentDrawId = this._getUniqueId(), this._currentPolygonFeature = {
              type: "Feature",
              geometry: {
                type: "Polygon",
                coordinates: [
                  []
                ]
              },
              properties: {
                id: this._currentDrawId
              }
            }, this._drawFeaturesList = this._drawFeaturesList || [], this._drawFeaturesList.push(this._currentPolygonFeature), this._featuresStroke = this._featuresStroke || [], this._map.getSource(this.rectangleDrawLayer).setData({
              type: "FeatureCollection",
              features: this._drawFeaturesList
            }), this.fire("draw.rectangle.start"));
          }, r.prototype.endDraw = function () {
            if (!this._isDrawing) return this._stopEdit(), this.fire("rectangle.changeStatus", {
              status: "compelete"
            }), this._map.off("mouseover", this.rectangleEditLayer, this._theOnEditMouseover), this._map.off("mouseleave", this.rectangleEditLayer, this._theOnEditMouseleave), void this._map.off("mousedown", this.rectangleEditLayer, this._theOnEditMousedown);
            this._isDrawing = !1, this._clearEditShap(), this._clearEndVertex();
            var t = this._currentPolygonFeature.geometry.coordinates[0];
            this._currentPolygonFeature && (this._featuresStroke.push({
              type: "Feature",
              geometry: {
                type: "LineString",
                coordinates: t
              },
              properties: this._currentPolygonFeature.properties
            }), this._map.getSource(this.rectangleLineDrawLayer).setData({
              type: "FeatureCollection",
              features: this._featuresStroke
            })), this._currentDrawId && this.options.enableEdit && (this._editFeatureById(this._currentDrawId), this._currentDrawId = null), this._map.off("click", this._theOnClick), this._map.off("mousemove", this._theOnMouseMove), this.fire("draw.rectangle.end", {
              feature: t.length < 4 ? "" : Po(this._currentPolygonFeature),
              lastPoint: Po(this._startPoint),
              currentPoint: Po(this._endPoint)
            }), this._container.style.cursor = "", this._map.dragPan.enable(), setTimeout(function () {
              this._map.doubleClickZoom.enable();
            }.bind(this), 5), this._currentPolygonFeature = void 0, this._startPoint = void 0, this._endPoint = void 0;
          }, r.prototype._onEditMouseover = function (t) {
            var e = this._map.queryRenderedFeatures(t.point)[0];
            e.source === this.rectangleEditVertexLayer ? this._container.style.cursor = "pointer" : e.source !== this.rectangleEditLayer && e.source !== this.rectangleLineEditLayer || (this._container.style.cursor = "move");
          }, r.prototype._onEditMouseleave = function () {
            this._container.style.cursor = "";
          }, r.prototype._onEditMousedown = function (t) {
            this._map.queryRenderedFeatures(t.point)[0].source === this.rectangleEditLayer && (t.preventDefault(), this.startPos = [t.lngLat.lng, t.lngLat.lat], this._theOnEditMousemove = this._onEditMousemove.bind(this), this._map.on("mousemove", this._theOnEditMousemove), this._theOnEditMouseup = this._onEditMouseup.bind(this), this._map.on("mouseup", this._theOnEditMouseup));
          }, r.prototype._onEditMousemove = function (t) {
            var e = this,
              r = this._map.project(this.startPos),
              i = this._map.project([t.lngLat.lng, t.lngLat.lat]),
              n = [i.x - r.x, i.y - r.y];
            this._container.style.cursor = "move", this.tempEditFeaturesList = Po(this._editFeaturesList), this.tempEditFeaturesStroke = Po(this._editFeaturesStroke), this.tempEditVertexList = Po(this._editVertexList), this.tempEditFeaturesList[0].geometry.coordinates[0].map(function (t) {
              var r = e._map.project(t);
              r.x += n[0], r.y += n[1];
              var i = e._map.unproject([r.x, r.y]);
              t[0] = i.lng, t[1] = i.lat;
            }), this.tempEditFeaturesStroke[0].geometry.coordinates.map(function (t) {
              var r = e._map.project(t);
              r.x += n[0], r.y += n[1];
              var i = e._map.unproject([r.x, r.y]);
              t[0] = i.lng, t[1] = i.lat;
            }), this.tempEditVertexList.map(function (t) {
              var r = e._map.project(t.geometry.coordinates);
              r.x += n[0], r.y += n[1];
              var i = e._map.unproject([r.x, r.y]);
              t.geometry.coordinates[0] = i.lng, t.geometry.coordinates[1] = i.lat;
            }), this._map.getSource(this.rectangleEditLayer).setData({
              type: "FeatureCollection",
              features: this.tempEditFeaturesList
            }), this._map.getSource(this.rectangleLineEditLayer).setData({
              type: "FeatureCollection",
              features: this.tempEditFeaturesStroke
            }), this._map.getSource(this.rectangleEditVertexLayer).setData({
              type: "FeatureCollection",
              features: this.tempEditVertexList
            });
          }, r.prototype._onEditMouseup = function () {
            this._map.off("mousemove", this._theOnEditMousemove), this._map.off("mouseup", this._theOnEditMouseup), this.tempEditFeaturesList && 0 != this.tempEditFeaturesList.length && (this._editFeaturesList = this.tempEditFeaturesList, this._editFeaturesStroke = this.tempEditFeaturesStroke, this._editVertexList = this.tempEditVertexList, this.fire("edit.rectangle.change", {
              editFeature: Po(this._editFeaturesList[0])
            }));
          }, r.prototype._stopEdit = function () {
            if (this._editFeaturesList && 0 != this._editFeaturesList.length) {
              var t = this._editFeaturesList.splice(0, 1),
                e = this._editFeaturesStroke.splice(0, 1);
              this._drawFeaturesList.push(t[0]), this._featuresStroke.push(e[0]), this._map.getSource(this.rectangleDrawLayer).setData({
                type: "FeatureCollection",
                features: this._drawFeaturesList
              }), this._map.getSource(this.rectangleLineDrawLayer).setData({
                type: "FeatureCollection",
                features: this._featuresStroke
              }), this._map.getSource(this.rectangleEditLayer).setData({
                type: "FeatureCollection",
                features: this._editFeaturesList
              }), this._editFeaturesStroke = [], this._map.getSource(this.rectangleLineEditLayer).setData({
                type: "FeatureCollection",
                features: this._editFeaturesStroke
              }), this._editVertexList = [], this._map.getSource(this.rectangleEditVertexLayer).setData({
                type: "FeatureCollection",
                features: this._editVertexList
              });
            }
          }, r.prototype._onEditVertexMousedown = function (t) {
            t.preventDefault();
            var e = this._map.queryRenderedFeatures(t.point, {
              layers: [this.rectangleEditVertexLayer]
            })[0];
            if (e) {
              for (var r = e.properties.id, i = 0; i < this._editVertexList.length; i++)
                if (this._editVertexList[i].properties.id === r) {
                  this._dragIndex = i;
                  break
                } if (null === this._dragIndex) return;
              this._theOnEditVertexMousemove = this._onEditVertexMousemove.bind(this), this._map.on("mousemove", this._theOnEditVertexMousemove), this._theOnEditVertexMouseup = this._onEditVertexMouseup.bind(this), this._map.on("mouseup", this._theOnEditVertexMouseup);
            }
          }, r.prototype._onEditVertexMousemove = function (t) {
            var e = this._dragIndex;
            this._vertexIsMoving = !0, !this._diagonalPoi && (this._diagonalPoi = this._editVertexList[Mo[e]].geometry.coordinates);
            for (var r = this._limitPoint(this._diagonalPoi, [t.lngLat.lng, t.lngLat.lat]), i = 0; i < this._editVertexList.length; i++) this._editVertexList[i].geometry.coordinates = r.point[i];
            this._editFeaturesList[0].geometry.coordinates[0] = r.line, this._editFeaturesStroke[0].geometry.coordinates = r.line, this._map.getSource(this.rectangleEditVertexLayer).setData({
              type: "FeatureCollection",
              features: this._editVertexList
            }), this._map.getSource(this.rectangleEditLayer).setData({
              type: "FeatureCollection",
              features: this._editFeaturesList
            }), this._map.getSource(this.rectangleLineEditLayer).setData({
              type: "FeatureCollection",
              features: this._editFeaturesStroke
            });
          }, r.prototype._onEditVertexMouseup = function (t) {
            this._vertexIsMoving = !1, this._map.off("mousemove", this._theOnEditVertexMousemove), this._map.off("mouseup", this._theOnEditVertexMouseup), this.fire("edit.rectangle.change", {
              editFeature: Po(this._editFeaturesList[0])
            }), this._dragIndex = null, this._diagonalPoi = null;
          }, r.prototype._drawShape = function (t, e) {
            var r = this._currentPolygonFeature.geometry.coordinates[0];
            0 == r.length ? (r.push([t, e]), r.push([t, e])) : r.splice(1, 0, [t, e]), this._map.getSource(this.rectangleDrawLayer).setData({
              type: "FeatureCollection",
              features: this._drawFeaturesList
            });
            for (var i = [], n = 0; n < 2; n++)
              if (r[n]) {
                var o = {
                  type: "Feature",
                  geometry: {
                    type: "Point",
                    coordinates: r[n]
                  }
                };
                i.push(o);
              } this._map.getSource(this.rectangleDrawVertexLayer).setData({
              type: "FeatureCollection",
              features: i
            });
          }, r.prototype._clearEditShap = function () {
            this._editingLineData = {
              type: "FeatureCollection",
              features: []
            }, this._map.getSource(this.rectangleDrawActiveLayer).setData(this._editingLineData);
          }, r.prototype._clearEndVertex = function () {
            this._endVertexData = {
              type: "FeatureCollection",
              features: []
            }, this._map.getSource(this.rectangleDrawVertexLayer).setData(this._endVertexData);
          }, r.prototype._onClick = function (t) {
            if (!this._isClickVertex(t)) {
              if (this._endPoint && this._endPoint.length) return this._startPoint = [this._endPoint[0], this._endPoint[1]], this._endPoint = [t.lngLat.lng, t.lngLat.lat], void this.endDraw();
              this._startPoint = [t.lngLat.lng, t.lngLat.lat], this._drawShape(t.lngLat.lng, t.lngLat.lat), this._endPoint = [t.lngLat.lng, t.lngLat.lat], this.fire("draw.rectangle.addPoint", {
                lastPoint: Po(this._startPoint),
                currentPoint: Po(this._endPoint)
              });
            }
          }, r.prototype._limitPoint = function (t, e) {
            var r = Math.min(t[0], e[0]),
              i = Math.max(t[1], e[1]),
              n = Math.max(t[0], e[0]),
              o = Math.min(t[1], e[1]);
            return {
              point: [
                [r, i],
                [n, i],
                [n, o],
                [r, o]
              ],
              line: [
                [r, i],
                [n, i],
                [n, o],
                [r, o],
                [r, i]
              ]
            }
          }, r.prototype._onMouseMove = function (t) {
            if (0 != this._currentPolygonFeature.geometry.coordinates[0].length) {
              var e = this._currentPolygonFeature.geometry.coordinates;
              this._currentPolygonFeature.geometry.coordinates[0] = this._limitPoint(this._endPoint, [t.lngLat.lng, t.lngLat.lat]).line, this._map.getSource(this.rectangleDrawLayer).setData({
                type: "FeatureCollection",
                features: this._drawFeaturesList
              }), this._editingLineData = {
                type: "FeatureCollection",
                features: [{
                  type: "Feature",
                  geometry: {
                    type: "LineString",
                    coordinates: e[0]
                  }
                }]
              }, this._map.getSource(this.rectangleDrawActiveLayer).setData(this._editingLineData);
            }
          }, r.prototype._isClickVertex = function (t) {
            var e = this._map.queryRenderedFeatures(t.point, {
              layers: [this.rectangleDrawVertexLayer]
            });
            return e.length > 0 && this.endDraw(), e.length
          }, r.prototype.remove = function () {
            this.endDraw(), this._map.off("click", this._theOnSelect), this._map.off("mouseover", this.rectangleEditLayer, this._theOnEditMouseover), this._map.off("mouseleave", this.rectangleEditLayer, this._theOnEditMouseleave), this._map.off("mousedown", this.rectangleEditLayer, this._theOnEditMousedown), this._map.removeLayer(this.rectangleDrawLayer), this._map.removeLayer(this.rectangleDrawActiveLayer), this._map.removeLayer(this.rectangleLineDrawLayer), this._map.removeLayer(this.rectangleDrawVertexLayer), this._map.removeSource(this.rectangleDrawLayer), this._map.removeSource(this.rectangleDrawActiveLayer), this._map.removeSource(this.rectangleLineDrawLayer), this._map.removeSource(this.rectangleDrawVertexLayer), this._map.off("mouseover", this.rectangleDrawLayer, this._theOnDrawLineMouseover), this._map.off("mouseout", this.rectangleDrawLayer, this._theOnDrawLineMouseout), this.options.enableEdit && (this._map.removeLayer(this.rectangleEditLayer), this._map.removeLayer(this.rectangleEditVertexLayer), this._map.removeLayer(this.rectangleLineEditLayer), this._map.removeSource(this.rectangleEditLayer), this._map.removeSource(this.rectangleEditVertexLayer), this._map.removeSource(this.rectangleLineEditLayer), this._map.off("click", this._theOnSelect), this._map.off("click", this.rectangleEditVertexLayer, this._theOnSelectEditMidVertex));
          }, r.prototype.clearData = function () {
            if (this._editFeaturesList.length) {
              var t = this._editFeaturesList[0].properties.id;
              return this._stopEdit(), void this.clearDataById(t)
            }
            this._isDrawing || this._stopEdit(), this._map.getSource(this.rectangleDrawLayer).setData({
              type: "FeatureCollection",
              features: []
            }), this._map.getSource(this.rectangleLineDrawLayer).setData({
              type: "FeatureCollection",
              features: []
            }), this._drawFeaturesList = [], this._featuresStroke = [];
          }, r.prototype.clearDataById = function (t) {
            for (var e, r = 0; r < this._drawFeaturesList.length; r++) this._drawFeaturesList[r].properties.id == t && (e = r);
            var i = this._drawFeaturesList.splice(e, 1);
            return this._featuresStroke.splice(e, 1), this._map.getSource(this.rectangleDrawLayer).setData({
              type: "FeatureCollection",
              features: this._drawFeaturesList
            }), this._map.getSource(this.rectangleLineDrawLayer).setData({
              type: "FeatureCollection",
              features: this._featuresStroke
            }), i
          }, r.prototype._getUniqueId = function () {
            return this._uniqueId = null != this._uniqueId ? this._uniqueId + 1 : 2, "drawRectangleId_" + (new Date).getTime() + this._uniqueId
          }, r
        }(t.Evented),
        Ro = {
          enableEdit: !0,
          drawColor: "#3b89ca",
          editColor: "#fdc204"
        };
  
      function Oo(t) {
        return JSON.parse(JSON.stringify(t))
      }
  
      function Ao(t) {
        return void 0 === t && (t = "circleDrawLayer"), t + "_" + Math.random().toString(16).substr(2)
      }
      var Fo = function (e) {
          function r(e) {
            if (this.options = t.extend({}, Ro, e), this._map = this.options.map, this._container = this._map.getCanvasContainer(), this._isDrawing = !1, this._currentPoint = [], this.zoom = this._map.getZoom(), this._drawFeaturesList = this.options.featuresList || [], this._featuresStroke = [], this._editFeaturesList = [], this._editFeaturesStroke = [], this._editVertexList = [], this.circleDrawLayer = Ao("circleDrawLayer"), this.circleLineDrawLayer = Ao("circleLineDrawLayer"), this.circleDrawVertexLayer = Ao("circleDrawVertexLayer"), this.circleDrawActiveLayer = Ao("circleDrawActiveLayer"), this.circleEditLayer = Ao("circleEditLayer"), this.circleLineEditLayer = Ao("circleLineEditLayer"), this.circleEditVertexLayer = Ao("circleEditVertexLayer"), this.circleEditCenterLayer = Ao("circleEditCenterLayer"), this._map.getLayer(this.circleDrawLayer) || (this._map.addLayer({
                id: this.circleDrawLayer,
                type: "fill",
                source: {
                  type: "geojson",
                  data: {
                    type: "FeatureCollection",
                    features: []
                  }
                },
                paint: {
                  "fill-color": this.options.drawColor,
                  "fill-opacity": .4
                }
              }), this._map.addLayer({
                id: this.circleLineDrawLayer,
                type: "line",
                source: {
                  type: "geojson",
                  data: {
                    type: "FeatureCollection",
                    features: []
                  }
                },
                paint: {
                  "line-color": this.options.drawColor,
                  "line-width": 3,
                  "line-opacity": .8
                }
              }), this._map.addLayer({
                id: this.circleDrawActiveLayer,
                type: "line",
                source: {
                  type: "geojson",
                  data: {
                    type: "FeatureCollection",
                    features: []
                  }
                },
                paint: {
                  "line-color": this.options.drawColor,
                  "line-width": 3,
                  "line-opacity": .8,
                  "line-dasharray": [1, 2]
                }
              }), this._map.addLayer({
                id: this.circleDrawVertexLayer,
                type: "circle",
                source: {
                  type: "geojson",
                  data: {
                    type: "FeatureCollection",
                    features: [{
                      type: "Feature",
                      geometry: {
                        type: "Point",
                        coordinates: []
                      }
                    }]
                  }
                },
                paint: {
                  "circle-color": this.options.drawColor,
                  "circle-radius": 5,
                  "circle-opacity": .7,
                  "circle-stroke-width": 3,
                  "circle-stroke-color": "#ffffff"
                }
              })), this.options.enableEdit && (this._map.getLayer(this.circleEditLayer) || (this._map.addLayer({
                id: this.circleEditLayer,
                type: "fill",
                source: {
                  type: "geojson",
                  data: {
                    type: "FeatureCollection",
                    features: []
                  }
                },
                paint: {
                  "fill-color": this.options.editColor,
                  "fill-opacity": .4
                }
              }), this._map.addLayer({
                id: this.circleLineEditLayer,
                type: "line",
                source: {
                  type: "geojson",
                  data: {
                    type: "FeatureCollection",
                    features: []
                  }
                },
                paint: {
                  "line-color": this.options.editColor,
                  "line-width": 3,
                  "line-opacity": .8,
                  "line-dasharray": [1, 2]
                }
              }), this._map.addLayer({
                id: this.circleEditVertexLayer,
                type: "circle",
                source: {
                  type: "geojson",
                  data: {
                    type: "FeatureCollection",
                    features: [{
                      type: "Feature",
                      geometry: {
                        type: "Point",
                        coordinates: []
                      }
                    }]
                  }
                },
                paint: {
                  "circle-color": this.options.editColor,
                  "circle-radius": 5,
                  "circle-opacity": .9,
                  "circle-stroke-width": 3,
                  "circle-stroke-color": "#ffffff"
                }
              }), this._map.addLayer({
                id: this.circleEditCenterLayer,
                type: "circle",
                source: {
                  type: "geojson",
                  data: {
                    type: "FeatureCollection",
                    features: [{
                      type: "Feature",
                      geometry: {
                        type: "Point",
                        coordinates: []
                      }
                    }]
                  }
                },
                paint: {
                  "circle-color": this.options.editColor,
                  "circle-radius": 5,
                  "circle-opacity": .9,
                  "circle-stroke-width": 3,
                  "circle-stroke-color": "#ffffff"
                }
              })), this._theOnSelect = this._onSelect.bind(this), this._map.on("click", this._theOnSelect), this._theOnEditVertexMousedown = this._onEditVertexMousedown.bind(this), this._map.on("mousedown", this.circleEditVertexLayer, this._theOnEditVertexMousedown), this._theOnEditMouseover = this._onEditMouseover.bind(this), this._map.on("mouseover", this.circleEditVertexLayer, this._theOnEditMouseover), this._theOnEditMouseleave = this._onEditMouseleave.bind(this), this._map.on("mouseleave", this.circleEditVertexLayer, this._theOnEditMouseleave), this._theOnEditMouseover = this._onEditMouseover.bind(this), this._map.on("mouseover", this.circleEditCenterLayer, this._theOnEditMouseover), this._theOnEditMouseleave = this._onEditMouseleave.bind(this), this._map.on("mouseleave", this.circleEditCenterLayer, this._theOnEditMouseleave), this._theOnEditMousedown = this._onEditMousedown.bind(this), this._map.on("mousedown", this.circleEditCenterLayer, this._theOnEditMousedown), this._drawFeaturesList.length > 0)) {
              this._map.getSource(this.circleDrawLayer).setData({
                type: "FeatureCollection",
                features: this._drawFeaturesList
              });
              for (var r = 0, i = this._drawFeaturesList; r < i.length; r += 1) {
                var n = i[r];
                this._featuresStroke.push({
                  type: "Feature",
                  geometry: {
                    type: "LineString",
                    coordinates: n.geometry.coordinates[0]
                  },
                  properties: n.properties
                });
              }
              this._map.getSource(this.circleLineDrawLayer).setData({
                type: "FeatureCollection",
                features: this._featuresStroke
              });
            }
          }
          return e && (r.__proto__ = e), r.prototype = Object.create(e && e.prototype), r.prototype.constructor = r, r.prototype._editFeatureById = function (t) {
            for (var e = 0; e < this._drawFeaturesList.length; e++)
              if (this._drawFeaturesList[e].properties.id === t) {
                this._editFeaturesList = this._drawFeaturesList.splice(e, 1), this._editFeaturesStroke = this._featuresStroke.splice(e, 1), this._editCircleCenter = [{
                  type: "Feature",
                  geometry: {
                    type: "Point",
                    coordinates: this._editFeaturesList[0].properties.centerPoint
                  }
                }], this._map.getSource(this.circleEditLayer).setData({
                  type: "FeatureCollection",
                  features: this._editFeaturesList
                }), this._map.getSource(this.circleLineEditLayer).setData({
                  type: "FeatureCollection",
                  features: this._editFeaturesStroke
                });
                var r = this._editFeaturesList[0].geometry.coordinates[0],
                  i = r.length;
                this._editVertexList = [], this._editVertexList.push({
                  type: "Feature",
                  geometry: {
                    type: "Point",
                    coordinates: r[Math.floor(i / 4)]
                  }
                }), this._map.getSource(this.circleEditVertexLayer).setData({
                  type: "FeatureCollection",
                  features: this._editVertexList
                }), this._map.getSource(this.circleEditCenterLayer).setData({
                  type: "FeatureCollection",
                  features: this._editCircleCenter
                }), this._map.getSource(this.circleDrawLayer).setData({
                  type: "FeatureCollection",
                  features: this._drawFeaturesList
                }), this._map.getSource(this.circleLineDrawLayer).setData({
                  type: "FeatureCollection",
                  features: this._featuresStroke
                }), this._map.moveLayer(this.circleEditLayer), this._map.moveLayer(this.circleLineEditLayer), this._map.moveLayer(this.circleEditVertexLayer), this._map.moveLayer(this.circleEditCenterLayer);
                break
              }
          }, r.prototype._onSelect = function (t) {
            if (!this._isDrawing) {
              var e = this._map.queryRenderedFeatures(t.point)[0];
              if (e.source !== this.circleEditVertexLayer && this._vertexIsMoving) return this._vertexIsMoving = !1, this._map.off("mousemove", this._theVertexMoving), void this.fire("edit.circle.change", {
                feature: Oo(this._editFeaturesList[0])
              });
              if (e.source !== this.circleEditVertexLayer && e.source !== this.circleEditLayer && e.source !== this.circleEditCenterLayer) {
                if (this._editFeaturesList.length && this.fire("edit.circle.end", {
                    editFeature: Oo(this._editFeaturesList[0])
                  }), this._stopEdit(), e.source === this.circleDrawLayer) {
                  var r = e.properties.id;
                  this.fire("edit.circle.start", {
                    currentID: r
                  }), this.fire("circle.changeStatus", {
                    status: "edit"
                  }), this._editFeatureById(r);
                }
                "epgis" === e.source && this.fire("circle.changeStatus", {
                  status: "compelete"
                });
              }
            }
          }, r.prototype.getFeatures = function () {
            var t;
            return Oo((t = this._drawFeaturesList).concat.apply(t, this._editFeaturesList))
          }, r.prototype.setFeatures = function (t) {
            if (t instanceof Array && t.length > 0) {
              this._drawFeaturesList = t, this._featuresStroke = [], this._map.getSource(this.circleDrawLayer).setData({
                type: "FeatureCollection",
                features: this._drawFeaturesList
              });
              for (var e = 0, r = this._drawFeaturesList; e < r.length; e += 1) {
                var i = r[e];
                this._featuresStroke.push({
                  type: "Feature",
                  geometry: {
                    type: "LineString",
                    coordinates: i.geometry.coordinates[0]
                  },
                  properties: i.properties
                });
              }
              this._map.getSource(this.circleLineDrawLayer).setData({
                type: "FeatureCollection",
                features: this._featuresStroke
              });
            }
          }, r.prototype.startDraw = function () {
            this._isDrawing || this._ve || (this._isDrawing = !0, this._isClickVertexSwitch = !1, this._container.style.cursor = "crosshair", this._map.doubleClickZoom.disable(), this._map.dragPan.disable(), this._theOnClick = this._onClick.bind(this), this._theOnMouseMove = this._onMouseMove.bind(this), this._map.on("click", this._theOnClick), this._map.on("mousemove", this._theOnMouseMove), this._currentDrawId = this._getUniqueId(), this._currentPolygonFeature = {
              type: "Feature",
              geometry: {
                type: "Polygon",
                coordinates: [
                  []
                ]
              },
              properties: {
                id: this._currentDrawId
              }
            }, this._drawFeaturesList = this._drawFeaturesList || [], this._drawFeaturesList.push(this._currentPolygonFeature), this._featuresStroke = this._featuresStroke || [], this._map.getSource(this.circleDrawLayer).setData({
              type: "FeatureCollection",
              features: this._drawFeaturesList
            }), this.fire("draw.circle.start"));
          }, r.prototype.endDraw = function () {
            if (!this._isDrawing) return this._stopEdit(), this.fire("circle.changeStatus", {
              status: "compelete"
            }), this._map.off("mouseover", this.circleEditLayer, this._theOnEditMouseover), this._map.off("mouseleave", this.circleEditLayer, this._theOnEditMouseleave), void this._map.off("mousedown", this.circleEditLayer, this._theOnEditMousedown);
            this._isDrawing = !1, this._clearEndVertex(), this._clearEditShap();
            var t = this._currentPolygonFeature.geometry.coordinates[0];
            this._currentPolygonFeature && (this._featuresStroke.push({
              type: "Feature",
              geometry: {
                type: "LineString",
                coordinates: t
              },
              properties: this._currentPolygonFeature.properties
            }), this._map.getSource(this.circleLineDrawLayer).setData({
              type: "FeatureCollection",
              features: this._featuresStroke
            })), this._currentDrawId && this.options.enableEdit && (this._editFeatureById(this._currentDrawId), this._currentDrawId = null), this._map.off("click", this._theOnClick), this._map.off("mousemove", this._theOnMouseMove), this._container.style.cursor = "", this._map.dragPan.enable(), setTimeout(function () {
              this._map.doubleClickZoom.enable();
            }.bind(this), 5), this._currentPolygonFeature = void 0, this._currentPoint = void 0;
          }, r.prototype._onEditMouseover = function (t) {
            var e = this._map.queryRenderedFeatures(t.point)[0];
            e.source === this.circleEditVertexLayer ? this._container.style.cursor = "pointer" : e.source === this.circleEditCenterLayer && (this._container.style.cursor = "move");
          }, r.prototype._onEditMouseleave = function () {
            this._container.style.cursor = "";
          }, r.prototype._onEditMousedown = function (t) {
            t.preventDefault(), this.startPos = [t.lngLat.lng, t.lngLat.lat], this._theOnEditMousemove = this._onEditMousemove.bind(this), this._map.on("mousemove", this._theOnEditMousemove), this._theOnEditMouseup = this._onEditMouseup.bind(this), this._map.on("mouseup", this._theOnEditMouseup);
          }, r.prototype._onEditMousemove = function (t) {
            var e = this,
              r = this._map.project(this.startPos),
              i = this._map.project([t.lngLat.lng, t.lngLat.lat]),
              n = [i.x - r.x, i.y - r.y];
            this._container.style.cursor = "move", this.tempEditFeaturesList = Oo(this._editFeaturesList), this.tempEditFeaturesStroke = Oo(this._editFeaturesStroke), this.tempEditVertexList = Oo(this._editVertexList), this.tempEditCircleCenter = Oo(this._editCircleCenter), this.tempEditFeaturesList[0].geometry.coordinates[0].map(function (t) {
              var r = e._map.project(t);
              r.x += n[0], r.y += n[1];
              var i = e._map.unproject([r.x, r.y]);
              t[0] = i.lng, t[1] = i.lat;
            }), this.tempEditFeaturesStroke[0].geometry.coordinates.map(function (t) {
              var r = e._map.project(t);
              r.x += n[0], r.y += n[1];
              var i = e._map.unproject([r.x, r.y]);
              t[0] = i.lng, t[1] = i.lat;
            }), this.tempEditVertexList.map(function (t) {
              var r = e._map.project(t.geometry.coordinates);
              r.x += n[0], r.y += n[1];
              var i = e._map.unproject([r.x, r.y]);
              t.geometry.coordinates[0] = i.lng, t.geometry.coordinates[1] = i.lat;
            }), this.tempEditCircleCenter.map(function (t) {
              var r = e._map.project(t.geometry.coordinates);
              r.x += n[0], r.y += n[1];
              var i = e._map.unproject([r.x, r.y]);
              t.geometry.coordinates[0] = i.lng, t.geometry.coordinates[1] = i.lat;
            }), this._map.getSource(this.circleEditLayer).setData({
              type: "FeatureCollection",
              features: this.tempEditFeaturesList
            }), this._map.getSource(this.circleLineEditLayer).setData({
              type: "FeatureCollection",
              features: this.tempEditFeaturesStroke
            }), this._map.getSource(this.circleEditVertexLayer).setData({
              type: "FeatureCollection",
              features: this.tempEditVertexList
            }), this._map.getSource(this.circleEditCenterLayer).setData({
              type: "FeatureCollection",
              features: this.tempEditCircleCenter
            });
          }, r.prototype._onEditMouseup = function () {
            this._map.off("mousemove", this._theOnEditMousemove), this._map.off("mouseup", this._theOnEditMouseup), this.tempEditFeaturesList && 0 != this.tempEditFeaturesList.length && (this._editFeaturesList = this.tempEditFeaturesList, this._editFeaturesStroke = this.tempEditFeaturesStroke, this._editVertexList = this.tempEditVertexList, this._editCircleCenter = this.tempEditCircleCenter, this.fire("edit.circle.change", {
              feature: Oo(this._editFeaturesList[0])
            }));
          }, r.prototype._stopEdit = function () {
            if (this._editFeaturesList && 0 != this._editFeaturesList.length) {
              var t = this._editFeaturesList.splice(0, 1),
                e = this._editFeaturesStroke.splice(0, 1),
                r = this._editCircleCenter.splice(0, 1);
              t[0].properties.centerPoint = r[0].geometry.coordinates, this._drawFeaturesList.push(t[0]), e[0].properties.centerPoint = r[0].geometry.coordinates, this._featuresStroke.push(e[0]), this._map.getSource(this.circleDrawLayer).setData({
                type: "FeatureCollection",
                features: this._drawFeaturesList
              }), this._map.getSource(this.circleLineDrawLayer).setData({
                type: "FeatureCollection",
                features: this._featuresStroke
              }), this._map.getSource(this.circleEditLayer).setData({
                type: "FeatureCollection",
                features: this._editFeaturesList
              }), this._editCircleCenter = [], this._map.getSource(this.circleEditCenterLayer).setData({
                type: "FeatureCollection",
                features: this._editCircleCenter
              }), this._editFeaturesStroke = [], this._map.getSource(this.circleLineEditLayer).setData({
                type: "FeatureCollection",
                features: this._editFeaturesStroke
              }), this._editVertexList = [], this._map.getSource(this.circleEditVertexLayer).setData({
                type: "FeatureCollection",
                features: this._editVertexList
              });
            }
          }, r.prototype._onEditVertexMousedown = function (t) {
            t.preventDefault(), this._map.queryRenderedFeatures(t.point, {
              layers: [this.circleEditVertexLayer]
            })[0] && (this._theOnEditVertexMousemove = this._onEditVertexMousemove.bind(this), this._map.on("mousemove", this._theOnEditVertexMousemove), this._theOnEditVertexMouseup = this._onEditVertexMouseup.bind(this), this._map.on("mouseup", this._theOnEditVertexMouseup));
          }, r.prototype._onEditVertexMousemove = function (t) {
            this._vertexIsMoving = !0;
            var e = this._countCircle(this._distance(this._editCircleCenter[0].geometry.coordinates, [t.lngLat.lng, t.lngLat.lat]), this._editCircleCenter[0].geometry.coordinates, 72);
            this._editVertexList[0].geometry.coordinates = e[0][Math.floor(e[0].length / 4)], this._editFeaturesList[0].geometry.coordinates = e, this._editFeaturesStroke[0].geometry.coordinates = e[0], this._map.getSource(this.circleEditVertexLayer).setData({
              type: "FeatureCollection",
              features: this._editVertexList
            }), this._map.getSource(this.circleEditLayer).setData({
              type: "FeatureCollection",
              features: this._editFeaturesList
            }), this._map.getSource(this.circleLineEditLayer).setData({
              type: "FeatureCollection",
              features: this._editFeaturesStroke
            });
          }, r.prototype._onEditVertexMouseup = function (t) {
            this._vertexIsMoving = !1, this._map.off("mousemove", this._theOnEditVertexMousemove), this._map.off("mouseup", this._theOnEditVertexMouseup), this.fire("edit.circle.change", {
              feature: Oo(this._editFeaturesList[0])
            });
          }, r.prototype._drawShape = function (t, e) {
            var r = this._currentPolygonFeature.geometry.coordinates[0];
            r.push([t, e]), this._map.getSource(this.circleDrawVertexLayer).setData({
              type: "FeatureCollection",
              features: [{
                type: "Feature",
                geometry: {
                  type: "Point",
                  coordinates: r[0]
                }
              }]
            });
          }, r.prototype._clearEndVertex = function () {
            this._endVertexData = {
              type: "FeatureCollection",
              features: []
            }, this._map.getSource(this.circleDrawVertexLayer).setData(this._endVertexData);
          }, r.prototype._clearEditShap = function () {
            this._editingLineData = {
              type: "FeatureCollection",
              features: []
            }, this._map.getSource(this.circleDrawActiveLayer).setData(this._editingLineData);
          }, r.prototype._onClick = function (t) {
            if (!this._isClickVertex(t)) {
              if (this._currentPoint && this._currentPoint.length) return this._currentPolygonFeature.properties.radius = this.radius || 0, this.fire("draw.circle.end", {
                feature: Oo(this._currentPolygonFeature)
              }), void this.endDraw();
              this._currentPoint = [t.lngLat.lng, t.lngLat.lat], this._currentPolygonFeature.properties.centerPoint = [t.lngLat.lng, t.lngLat.lat], this._drawShape(t.lngLat.lng, t.lngLat.lat), this.fire("draw.circle.addPoint", {
                feature: {
                  type: "Feature",
                  geometry: {
                    type: "Point",
                    coordinates: Oo(this._currentPoint)
                  },
                  properties: {
                    radius: this.radius,
                    centerPoint: Oo(this._currentPoint)
                  }
                }
              });
            }
          }, r.prototype._countCircle = function (t, e, r) {
            for (var i = t / 6378137, n = [e[0], e[1]], o = [this._numberToRadius(n[1]), this._numberToRadius(n[0])], s = (r = r || 15, []), a = 0; a < r; a++) {
              var u = 2 * Math.PI * a / r,
                c = Math.asin(Math.sin(o[0]) * Math.cos(i) + Math.cos(o[0]) * Math.sin(i) * Math.cos(u)),
                h = o[1] + Math.atan2(Math.sin(u) * Math.sin(i) * Math.cos(o[0]), Math.cos(i) - Math.sin(o[0]) * Math.sin(c));
              s.push([this._numberToDegree(h), this._numberToDegree(c)]);
            }
            return s.push(s[0]), [s]
          }, r.prototype._numberToRadius = function (t) {
            return t * Math.PI / 180
          }, r.prototype._numberToDegree = function (t) {
            return 180 * t / Math.PI
          }, r.prototype._distance = function (t, e) {
            var r = Math.PI / 180,
              i = t[1] * r,
              n = e[1] * r,
              o = Math.sin(i) * Math.sin(n) + Math.cos(i) * Math.cos(n) * Math.cos((e[0] - t[0]) * r);
            return 6371e3 * Math.acos(Math.min(o, 1))
          }, r.prototype._onMouseMove = function (t) {
            if (0 !== this._currentPolygonFeature.geometry.coordinates[0].length) {
              this.radius = this._distance(this._currentPoint, [t.lngLat.lng, t.lngLat.lat]);
              var e = this._countCircle(this.radius, this._currentPoint, 72);
              this._currentPolygonFeature.geometry.coordinates[0] = e[0], this._map.getSource(this.circleDrawLayer).setData({
                type: "FeatureCollection",
                features: this._drawFeaturesList
              }), this._editingLineData = {
                type: "FeatureCollection",
                features: [{
                  type: "Feature",
                  geometry: {
                    type: "LineString",
                    coordinates: e[0]
                  }
                }]
              }, this._map.getSource(this.circleDrawActiveLayer).setData(this._editingLineData);
            }
          }, r.prototype._isClickVertex = function (t) {
            var e = this._map.queryRenderedFeatures(t.point, {
              layers: [this.circleDrawVertexLayer]
            });
            return e.length > 0 && this.endDraw(), e.length
          }, r.prototype.remove = function () {
            this.endDraw(), this._map.off("click", this._theOnSelect), this._map.off("mouseover", this.circleEditVertexLayer, this._theOnEditMouseover), this._map.off("mouseleave", this.circleEditVertexLayer, this._theOnEditMouseleave), this._map.off("mouseover", this.circleEditCenterLayer, this._theOnEditMouseover), this._map.off("mouseleave", this.circleEditCenterLayer, this._theOnEditMouseleave), this._map.off("mousedown", this.circleEditCenterLayer, this._theOnEditMousedown), this._map.removeLayer(this.circleDrawLayer), this._map.removeLayer(this.circleLineDrawLayer), this._map.removeLayer(this.circleDrawVertexLayer), this._map.removeLayer(this.circleDrawActiveLayer), this._map.removeSource(this.circleDrawLayer), this._map.removeSource(this.circleLineDrawLayer), this._map.removeSource(this.circleDrawVertexLayer), this._map.removeSource(this.circleDrawActiveLayer), this._map.off("mouseover", this.circleDrawLayer, this._theOnDrawLineMouseover), this._map.off("mouseout", this.circleDrawLayer, this._theOnDrawLineMouseout), this.options.enableEdit && (this._map.removeLayer(this.circleEditLayer), this._map.removeLayer(this.circleEditVertexLayer), this._map.removeLayer(this.circleLineEditLayer), this._map.removeLayer(this.circleEditCenterLayer), this._map.removeSource(this.circleEditLayer), this._map.removeSource(this.circleEditVertexLayer), this._map.removeSource(this.circleLineEditLayer), this._map.removeSource(this.circleEditCenterLayer), this._map.off("click", this._theOnSelect), this._map.off("click", this.circleEditVertexLayer, this._theOnSelectEditVertex), this._map.off("mousedown", this.circleEditVertexLayer, this._theOnEditVertexMousedown));
          }, r.prototype.clearData = function () {
            if (this._editFeaturesList.length) {
              var t = this._editFeaturesList[0].properties.id;
              return this._stopEdit(), void this.clearDataById(t)
            }
            this._isDrawing || this._stopEdit(), this._map.getSource(this.circleDrawLayer).setData({
              type: "FeatureCollection",
              features: []
            }), this._map.getSource(this.circleLineDrawLayer).setData({
              type: "FeatureCollection",
              features: []
            }), this._drawFeaturesList = [], this._featuresStroke = [];
          }, r.prototype.clearDataById = function (t) {
            for (var e, r = 0; r < this._drawFeaturesList.length; r++) this._drawFeaturesList[r].properties.id == t && (e = r);
            var i = this._drawFeaturesList.splice(e, 1);
            return this._featuresStroke.splice(e, 1), this._map.getSource(this.circleDrawLayer).setData({
              type: "FeatureCollection",
              features: this._drawFeaturesList
            }), this._map.getSource(this.circleLineDrawLayer).setData({
              type: "FeatureCollection",
              features: this._featuresStroke
            }), i
          }, r.prototype._getUniqueId = function () {
            return this._uniqueId = null != this._uniqueId ? this._uniqueId + 1 : 2, "drawCircleId_" + (new Date).getTime() + this._uniqueId
          }, r
        }(t.Evented),
        ko = function (t) {
          this._map = t.target, this._url = t.url, this._layerId = t.layerId || "dynamicLayer", this._isMercator = t.isMercator || !1, this._interval = t.interval || 300, this._layerArray = [this._layerId + "red", this._layerId + "black"];
        };
      ko.prototype.addLayer = function () {
        return this._map.setPitch(0), this._map.setBearing(0), this._map.dragRotate.disable(), this._theOnMoveEnd = this._onDynamicMoveEnd.bind(this), this._map.on("moveend", this._theOnMoveEnd), this._theOnMoveEnd(), this
      }, ko.prototype.removeLayer = function () {
        for (var t in this._map.dragRotate.enable(), this._map.off("moveend", this._theOnMoveEnd), this._map.getLayer(this._layerId) && (this._map.removeLayer(this._layerId), this._map.removeSource(this._layerId)), this._layerArray) this._map.removeSource(this._layerArray[t]), this._map.removeLayer(this._layerArray[t]);
      }, ko.prototype._countBound = function (t) {
        var e = t._sw,
          r = t._ne,
          i = Math.max(e.lng, r.lng),
          n = Math.max(e.lat, r.lat),
          o = Math.min(e.lng, r.lng),
          s = Math.min(e.lat, r.lat);
        return [
          [o, n],
          [i, n],
          [i, s],
          [o, s]
        ]
      }, ko.prototype._getBbox = function (t) {
        var e = this._countBound(t)[3],
          r = this._countBound(t)[1],
          i = this._project({
            lng: e[0],
            lat: e[1]
          }),
          n = this._project({
            lng: r[0],
            lat: r[1]
          });
        return this._isMercator ? i.x + "," + i.y + "," + n.x + "," + n.y : e.join(",") + "," + r.join(",")
      }, ko.prototype._onDynamicMoveEnd = function () {
        var t = (new Date).getTime();
        if (!(t - this._lastTime < this._interval)) {
          this._lastTime = t;
          var e = this._map.getBounds(),
            r = [this._map.getCanvas().clientWidth, this._map.getCanvas().clientHeight].join(","),
            i = this._getBbox(e);
          if (this._actualUrl = this._url.replace(/{bbox}/g, i).replace(/{size}/g, r), this._map.getLayer(this._layerArray[0])) {
            var n = this._layerArray.shift();
            this._layerArray.push(n), this._map.removeLayer(n), this._map.removeSource(n), this._map.addLayer({
              id: n,
              source: {
                type: "image",
                url: this._actualUrl,
                coordinates: this._countBound(e)
              },
              type: "raster",
              minzoom: 0,
              maxzoom: 20
            });
          } else this._map.addLayer({
            id: this._layerArray[0],
            source: {
              type: "image",
              url: this._actualUrl,
              coordinates: this._countBound(e)
            },
            type: "raster",
            minzoom: 0,
            maxzoom: 20
          }), this._map.addLayer({
            id: this._layerArray[1],
            source: {
              type: "image",
              url: this._actualUrl,
              coordinates: this._countBound(e)
            },
            type: "raster",
            minzoom: 0,
            maxzoom: 20
          });
        }
      }, ko.prototype._onDynamicMoveEnd2 = function () {
        var t = (new Date).getTime();
        if (!(t - this._lastTime < 300)) {
          this._lastTime = t, this._count = this._count + 1, this._map.addSource(this._layerId + "_last" + this._count, {
            type: "image",
            url: this._url,
            coordinates: this._countBound(this._lastBound || this._map.getBounds())
          }), this._map.addLayer({
            id: this._layerId + "_last" + this._count,
            source: this._layerId + "_last" + this._count,
            type: "raster",
            minzoom: 0,
            maxzoom: 20
          }), this._map.getLayer(this._layerId) && (this._map.removeLayer(this._layerId), this._map.removeSource(this._layerId)), this._lastBound = this._map.getBounds(), this._map.addSource(this._layerId, {
            type: "image",
            url: this._url,
            coordinates: this._countBound(this._map.getBounds())
          }), this._map.addLayer({
            id: this._layerId,
            source: this._layerId,
            type: "raster",
            minzoom: 0,
            maxzoom: 20
          });
          var e = this._layerId + "_last" + this._count;
          setTimeout(function (t) {
            this._map.getLayer(t) && (this._map.removeLayer(t), this._map.removeSource(t));
          }.bind(this, e), 5e3);
        }
      }, ko.prototype._project = function (t) {
        var e = 6378137,
          r = Math.PI / 180,
          i = 85.0511287798,
          n = Math.max(Math.min(i, t.lat), -i),
          o = Math.sin(n * r);
        return {
          x: e * t.lng * r,
          y: e * Math.log((1 + o) / (1 - o)) / 2
        }
      };
      var Bo = function (t) {
        this._map = t.target, this._url = t.url, this._layerId = t.layerId || "dynamicLayer", this._isMercator = t.isMercator || !1, this._interval = t.interval || 300, this._minzoom = t.minzoom || 0, this._maxzoom = t.maxzoom || 24, this._layerArray = [this._layerId + "red", this._layerId + "black"], this._serviceTask = new Hn;
      };
      Bo.prototype.addLayer = function () {
        return this._map.setPitch(0), this._map.setBearing(0), this._map.dragRotate.disable(), this._theOnMoveEnd = this._onDynamicMoveEnd.bind(this), this._map.on("moveend", this._theOnMoveEnd), this._theOnMoveEnd(), this
      }, Bo.prototype.removeLayer = function () {
        for (var t in this._map.dragRotate.enable(), this._map.off("moveend", this._theOnMoveEnd), this._map.getLayer(this._layerId) && (this._map.removeLayer(this._layerId), this._map.removeSource(this._layerId)), this._layerArray) this._map.getLayer(this._layerArray[t]) && (this._map.removeLayer(this._layerArray[t]), this._map.removeSource(this._layerArray[t]));
      }, Bo.prototype.setMinZoom = function (t) {
        this._minzoom = t || 0;
      }, Bo.prototype.getMinZoom = function () {
        return this._minzoom
      }, Bo.prototype.setMaxZoom = function (t) {
        this._maxzoom = t || 24;
      }, Bo.prototype.getMaxZoom = function () {
        return this._maxzoom
      }, Bo.prototype._countBound = function (t) {
        var e = t._sw,
          r = t._ne,
          i = Math.max(e.lng, r.lng),
          n = Math.max(e.lat, r.lat),
          o = Math.min(e.lng, r.lng),
          s = Math.min(e.lat, r.lat);
        return [
          [o, n],
          [i, n],
          [i, s],
          [o, s]
        ]
      }, Bo.prototype._getBbox = function (t) {
        var e = this._countBound(t)[3],
          r = this._countBound(t)[1],
          i = this._project({
            lng: e[0],
            lat: e[1]
          }),
          n = this._project({
            lng: r[0],
            lat: r[1]
          });
        return this._isMercator ? i.x + "," + i.y + "," + n.x + "," + n.y : e.join(",") + "," + r.join(",")
      }, Bo.prototype._onDynamicMoveEnd = function () {
        var t = (new Date).getTime();
        if (!(t - this._lastTime < this._interval)) {
          this._lastTime = t;
          var e = this._map.getBounds(),
            r = [this._map.getCanvas().clientWidth, this._map.getCanvas().clientHeight].join(","),
            i = this._getBbox(e);
          this._actualUrl = this._url.replace(/{bbox}/g, i).replace(/{size}/g, r), this._map.getLayer(this._layerArray[0]) || this._map.getLayer(this._layerArray[1]) ? this._getIamgeArrayBuffer(this._actualUrl).then(function (t) {
            var r = this._layerArray.shift();
            this._layerArray.push(r), this._map.addLayer({
              id: r,
              source: {
                type: "image",
                url: t,
                coordinates: this._countBound(e)
              },
              type: "raster",
              minzoom: this._minzoom,
              maxzoom: this._maxzoom,
              style: {
                transition: {
                  duration: 0,
                  delay: 0
                }
              }
            }), this._map.getLayer(this._layerArray[0]) && setTimeout(function () {
              this._map.removeLayer(this._layerArray[0]), this._map.removeSource(this._layerArray[0]);
            }.bind(this), 400);
          }.bind(this)) : this._getIamgeArrayBuffer(this._actualUrl).then(function (t) {
            this._map.addLayer({
              id: this._layerArray[1],
              source: {
                type: "image",
                url: t,
                coordinates: this._countBound(e)
              },
              type: "raster",
              minzoom: this._minzoom,
              maxzoom: this._maxzoom,
              style: {
                transition: {
                  duration: 0,
                  delay: 0
                }
              }
            });
          }.bind(this));
        }
      }, Bo.prototype._getIamgeArrayBuffer = function (t) {
        for (var e = t.split("?")[1].split("&"), r = {}, i = 0; i < e.length; i++) {
          var n = e[i].split("=");
          r[n[0]] = n[1];
        }
        return this._serviceTask.ajax({
          url: t.split("?")[0],
          method: "POST",
          data: r
        }).then(function (t) {
          return "data:image/gif;base64," + t.resultValue
        })
      }, Bo.prototype._project = function (t) {
        var e = 6378137,
          r = Math.PI / 180,
          i = 85.0511287798,
          n = Math.max(Math.min(i, t.lat), -i),
          o = Math.sin(n * r);
        return {
          x: e * t.lng * r,
          y: e * Math.log((1 + o) / (1 - o)) / 2
        }
      };
      var zo = function () {
        ! function (t) {
          function e(i) {
            if (r[i]) return r[i].exports;
            var n = r[i] = {
              i: i,
              l: !1,
              exports: {}
            };
            return t[i].call(n.exports, n, n.exports, e), n.l = !0, n.exports
          }
          var r = {};
          e.m = t, e.c = r, e.i = function (t) {
            return t
          }, e.d = function (t, r, i) {
            e.o(t, r) || Object.defineProperty(t, r, {
              configurable: !1,
              enumerable: !0,
              get: i
            });
          }, e.n = function (t) {
            var r = t && t.__esModule ? function () {
              return t.default
            } : function () {
              return t
            };
            return e.d(r, "a", r), r
          }, e.o = function (t, e) {
            return Object.prototype.hasOwnProperty.call(t, e)
          }, e.p = "", e(e.s = 100);
        }({
          100: function (t, e, r) {
            (function (t) {
              var e = r(5);
              try {
                t.Promise = e, window.Promise = e;
              } catch (t) {}
            }).call(e, r(2));
          },
          2: function (t, e) {
            var r;
            r = function () {
              return this
            }();
            try {
              r = r || Function("return this")() || (0, eval)("this");
            } catch (t) {
              "object" == typeof window && (r = window);
            }
            t.exports = r;
          },
          5: function (e, r, i) {
            (function (r) {
              ! function () {
                function i() {
                  return et[z][U] || q
                }
  
                function n(t) {
                  return t && "object" == typeof t
                }
  
                function o(t) {
                  return "function" == typeof t
                }
  
                function s(t, e) {
                  return t instanceof e
                }
  
                function a(t, e, r) {
                  if (!e(t)) throw p(r)
                }
  
                function u() {
                  try {
                    return S.apply(C, arguments)
                  } catch (t) {
                    return Q.e = t, Q
                  }
                }
  
                function c(t, e) {
                  return S = t, C = e, u
                }
  
                function h(t, e) {
                  function r() {
                    for (var r = 0; r < n;) e(i[r], i[r + 1]), i[r++] = L, i[r++] = L;
                    n = 0, i.length > t && (i.length = t);
                  }
                  var i = O(t),
                    n = 0;
                  return function (t, e) {
                    i[n++] = t, i[n++] = e, 2 === n && et.nextTick(r);
                  }
                }
  
                function l(t, e) {
                  var r, i, n, a, u = 0;
                  if (!t) throw p(Y);
                  var h = t[et[z][V]];
                  if (o(h)) i = h.call(t);
                  else {
                    if (!o(t.next)) {
                      if (s(t, O)) {
                        for (r = t.length; u < r;) e(t[u], u++);
                        return u
                      }
                      throw p(Y)
                    }
                    i = t;
                  }
                  for (; !(n = i.next()).done;)
                    if ((a = c(e)(n.value, u++)) === Q) throw o(i[j]) && i[j](), a.e;
                  return u
                }
  
                function p(t) {
                  return new TypeError(t)
                }
  
                function f(t) {
                  return (t ? "" : W) + (new A).stack
                }
  
                function d(t, e) {
                  var r = "on" + t.toLowerCase(),
                    i = T[r];
                  D && D.listeners(t).length ? t === J ? D.emit(t, e._v, e) : D.emit(t, e) : i ? i({
                    reason: e._v,
                    promise: e
                  }) : et[t](e._v, e);
                }
  
                function g(t) {
                  return t && t._s
                }
  
                function _(t) {
                  return g(t) ? new t($) : (e = new t(function (t, n) {
                    if (e) throw p();
                    r = t, i = n;
                  }), a(r, o), a(i, o), e);
                  var e, r, i;
                }
  
                function y(t, e) {
                  var r = !1;
                  return function (i) {
                    r || (r = !0, R && (t[Z] = f(!0)), e === k ? w(t, i) : x(t, e, i));
                  }
                }
  
                function m(t, e) {
                  function r(t) {
                    return i.push(t.replace(/^\s+|\s+$/g, ""))
                  }
                  var i = [];
                  return R && (e[Z] && r(e[Z]), function t(e) {
                    e && X in e && (t(e._next), r(e[X] + ""), t(e._p));
                  }(e)), (t && t.stack ? t.stack : t) + ("\n" + i.join("\n")).replace(tt, "")
                }
  
                function v(t, e) {
                  return t(e)
                }
  
                function x(t, e, r) {
                  var i = 0,
                    n = t._c;
                  if (t._s === B)
                    for (t._s = e, t._v = r, e === F && (R && function (t) {
                        return s(t, A)
                      }(r) && (r.longStack = m(r, t)), it(t)); i < n;) rt(t, t[i++]);
                  return t
                }
  
                function w(t, e) {
                  if (e === t && e) return x(t, F, p(H)), t;
                  if (e !== I && (o(e) || n(e))) {
                    var r = c(b)(e);
                    if (r === Q) return x(t, F, r.e), t;
                    o(r) ? (R && g(e) && (t._next = e), g(e) ? E(t, e, r) : et.nextTick(function () {
                      E(t, e, r);
                    })) : x(t, k, e);
                  } else x(t, k, e);
                  return t
                }
  
                function b(t) {
                  return t.then
                }
  
                function E(t, e, r) {
                  var i = c(r, e)(function (r) {
                    e && (e = I, w(t, r));
                  }, function (r) {
                    e && (e = I, x(t, F, r));
                  });
                  i === Q && e && (x(t, F, i.e), e = I);
                }
                var L, S, C, I = null,
                  M = "object" == typeof t.window,
                  T = M ? t.window : r,
                  P = T.Promise,
                  D = T.process,
                  N = T.console,
                  R = !1,
                  O = Array,
                  A = Error,
                  F = 1,
                  k = 2,
                  B = 3,
                  z = "Symbol",
                  V = "iterator",
                  U = "species",
                  q = z + "(" + U + ")",
                  j = "return",
                  G = "_uh",
                  X = "_pt",
                  Z = "_st",
                  Y = "Invalid argument",
                  W = "\nFrom previous ",
                  H = "Chaining cycle detected for promise",
                  K = "rejectionHandled",
                  J = "unhandledRejection",
                  Q = {
                    e: I
                  },
                  $ = function () {},
                  tt = /^.+\/node_modules\/yaku\/.+\n?/gm,
                  et = function (t) {
                    var e, r = this;
                    if (!n(r) || r._s !== L) throw p("Invalid this");
                    if (r._s = B, R && (r[X] = f()), t !== $) {
                      if (!o(t)) throw p(Y);
                      (e = c(t)(y(r, k), y(r, F))) === Q && x(r, F, e.e);
                    }
                  };
                et.default = et,
                  function (t, e) {
                    for (var r in e) t[r] = e[r];
                  }(et.prototype, {
                    then: function (t, e) {
                      if (void 0 === this._s) throw p();
                      return function (t, e, r, i) {
                        return o(r) && (e._onFulfilled = r), o(i) && (t[G] && d(K, t), e._onRejected = i), R && (e._p = t), t[t._c++] = e, t._s !== B && rt(t, e), e
                      }(this, _(et.speciesConstructor(this, et)), t, e)
                    },
                    catch: function (t) {
                      return this.then(L, t)
                    },
                    finally: function (t) {
                      return this.then(function (e) {
                        return et.resolve(t()).then(function () {
                          return e
                        })
                      }, function (e) {
                        return et.resolve(t()).then(function () {
                          throw e
                        })
                      })
                    },
                    _c: 0,
                    _p: I
                  }), et.resolve = function (t) {
                    return g(t) ? t : w(_(this), t)
                  }, et.reject = function (t) {
                    return x(_(this), F, t)
                  }, et.race = function (t) {
                    var e = this,
                      r = _(e),
                      i = function (t) {
                        x(r, k, t);
                      },
                      n = function (t) {
                        x(r, F, t);
                      },
                      o = c(l)(t, function (t) {
                        e.resolve(t).then(i, n);
                      });
                    return o === Q ? e.reject(o.e) : r
                  }, et.all = function (t) {
                    function e(t) {
                      x(n, F, t);
                    }
                    var r, i = this,
                      n = _(i),
                      o = [];
                    return (r = c(l)(t, function (t, s) {
                      i.resolve(t).then(function (t) {
                        o[s] = t, --r || x(n, k, o);
                      }, e);
                    })) === Q ? i.reject(r.e) : (r || x(n, k, []), n)
                  }, et.Symbol = T[z] || {}, c(function () {
                    Object.defineProperty(et, i(), {
                      get: function () {
                        return this
                      }
                    });
                  })(), et.speciesConstructor = function (t, e) {
                    var r = t.constructor;
                    return r && r[i()] || e
                  }, et.unhandledRejection = function (t, e) {
                    N && N.error("Uncaught (in promise)", R ? e.longStack : m(t, e));
                  }, et.rejectionHandled = $, et.enableLongStackTrace = function () {
                    R = !0;
                  }, et.nextTick = M ? function (t) {
                    P ? new P(function (t) {
                      t();
                    }).then(t) : setTimeout(t);
                  } : D.nextTick, et._s = 1;
                var rt = h(999, function (t, e) {
                    var r, i;
                    return (i = t._s !== F ? e._onFulfilled : e._onRejected) === L ? void x(e, t._s, t._v) : (r = c(v)(i, t._v)) === Q ? void x(e, F, r.e) : void w(e, r)
                  }),
                  it = h(9, function (t) {
                    (function t(e) {
                      if (e._umark) return !0;
                      e._umark = !0;
                      for (var r, i = 0, n = e._c; i < n;)
                        if ((r = e[i++])._onRejected || t(r)) return !0
                    })(t) || (t[G] = 1, d(J, t));
                  });
                try {
                  e.exports = et;
                } catch (t) {
                  T.Yaku = et;
                }
              }();
            }).call(r, i(2));
          }
        });
      };
      var Vo = function () {};
      Vo.getDistance = function (e, r) {
        e = t.LngLat.convert(e), r = t.LngLat.convert(r);
        var i = Math.PI / 180,
          n = e.lat * i,
          o = r.lat * i,
          s = Math.sin(n) * Math.sin(o) + Math.cos(n) * Math.cos(o) * Math.cos((r.lng - e.lng) * i);
        return 6371e3 * Math.acos(Math.min(s, 1))
      };
      var Uo = t.createCommonjsModule(function (t, e) {
          ! function (t) {
            function e(t, e, r) {
              if (!L(r = r || {})) throw new Error("options is invalid");
              var i = r.bbox,
                n = r.id;
              if (void 0 === t) throw new Error("geometry is required");
              if (e && e.constructor !== Object) throw new Error("properties must be an Object");
              i && S(i), n && C(n);
              var o = {
                type: "Feature"
              };
              return n && (o.id = n), i && (o.bbox = i), o.properties = e || {}, o.geometry = t, o
            }
  
            function r(t, e, r) {
              if (!L(r = r || {})) throw new Error("options is invalid");
              var n, s = r.bbox;
              if (!t) throw new Error("type is required");
              if (!e) throw new Error("coordinates is required");
              if (!Array.isArray(e)) throw new Error("coordinates must be an Array");
              switch (s && S(s), t) {
                case "Point":
                  n = i(e).geometry;
                  break;
                case "LineString":
                  n = a(e).geometry;
                  break;
                case "Polygon":
                  n = o(e).geometry;
                  break;
                case "MultiPoint":
                  n = l(e).geometry;
                  break;
                case "MultiLineString":
                  n = h(e).geometry;
                  break;
                case "MultiPolygon":
                  n = p(e).geometry;
                  break;
                default:
                  throw new Error(t + " is invalid")
              }
              return s && (n.bbox = s), n
            }
  
            function i(t, r, i) {
              if (!t) throw new Error("coordinates is required");
              if (!Array.isArray(t)) throw new Error("coordinates must be an Array");
              if (t.length < 2) throw new Error("coordinates must be at least 2 numbers long");
              if (!E(t[0]) || !E(t[1])) throw new Error("coordinates must contain numbers");
              return e({
                type: "Point",
                coordinates: t
              }, r, i)
            }
  
            function n(t, e, r) {
              if (!t) throw new Error("coordinates is required");
              if (!Array.isArray(t)) throw new Error("coordinates must be an Array");
              return c(t.map(function (t) {
                return i(t, e)
              }), r)
            }
  
            function o(t, r, i) {
              if (!t) throw new Error("coordinates is required");
              for (var n = 0; n < t.length; n++) {
                var o = t[n];
                if (o.length < 4) throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");
                for (var s = 0; s < o[o.length - 1].length; s++) {
                  if (0 === n && 0 === s && !E(o[0][0]) || !E(o[0][1])) throw new Error("coordinates must contain numbers");
                  if (o[o.length - 1][s] !== o[0][s]) throw new Error("First and last Position are not equivalent.")
                }
              }
              return e({
                type: "Polygon",
                coordinates: t
              }, r, i)
            }
  
            function s(t, e, r) {
              if (!t) throw new Error("coordinates is required");
              if (!Array.isArray(t)) throw new Error("coordinates must be an Array");
              return c(t.map(function (t) {
                return o(t, e)
              }), r)
            }
  
            function a(t, r, i) {
              if (!t) throw new Error("coordinates is required");
              if (t.length < 2) throw new Error("coordinates must be an array of two or more positions");
              if (!E(t[0][1]) || !E(t[0][1])) throw new Error("coordinates must contain numbers");
              return e({
                type: "LineString",
                coordinates: t
              }, r, i)
            }
  
            function u(t, e, r) {
              if (!t) throw new Error("coordinates is required");
              if (!Array.isArray(t)) throw new Error("coordinates must be an Array");
              return c(t.map(function (t) {
                return a(t, e)
              }), r)
            }
  
            function c(t, e) {
              if (!L(e = e || {})) throw new Error("options is invalid");
              var r = e.bbox,
                i = e.id;
              if (!t) throw new Error("No features passed");
              if (!Array.isArray(t)) throw new Error("features must be an Array");
              r && S(r), i && C(i);
              var n = {
                type: "FeatureCollection"
              };
              return i && (n.id = i), r && (n.bbox = r), n.features = t, n
            }
  
            function h(t, r, i) {
              if (!t) throw new Error("coordinates is required");
              return e({
                type: "MultiLineString",
                coordinates: t
              }, r, i)
            }
  
            function l(t, r, i) {
              if (!t) throw new Error("coordinates is required");
              return e({
                type: "MultiPoint",
                coordinates: t
              }, r, i)
            }
  
            function p(t, r, i) {
              if (!t) throw new Error("coordinates is required");
              return e({
                type: "MultiPolygon",
                coordinates: t
              }, r, i)
            }
  
            function f(t, r, i) {
              if (!t) throw new Error("geometries is required");
              if (!Array.isArray(t)) throw new Error("geometries must be an Array");
              return e({
                type: "GeometryCollection",
                geometries: t
              }, r, i)
            }
  
            function d(t, e) {
              if (null == t || isNaN(t)) throw new Error("num is required");
              if (e && !(e >= 0)) throw new Error("precision must be a positive number");
              var r = Math.pow(10, e || 0);
              return Math.round(t * r) / r
            }
  
            function g(t, e) {
              if (null == t) throw new Error("radians is required");
              if (e && "string" != typeof e) throw new Error("units must be a string");
              var r = Eo[e || "kilometers"];
              if (!r) throw new Error(e + " units is invalid");
              return t * r
            }
  
            function _(t, e) {
              if (null == t) throw new Error("distance is required");
              if (e && "string" != typeof e) throw new Error("units must be a string");
              var r = Eo[e || "kilometers"];
              if (!r) throw new Error(e + " units is invalid");
              return t / r
            }
  
            function y(t, e) {
              return v(_(t, e))
            }
  
            function m(t) {
              if (null == t) throw new Error("bearing is required");
              var e = t % 360;
              return e < 0 && (e += 360), e
            }
  
            function v(t) {
              if (null == t) throw new Error("radians is required");
              return t % (2 * Math.PI) * 180 / Math.PI
            }
  
            function x(t) {
              if (null == t) throw new Error("degrees is required");
              return t % 360 * Math.PI / 180
            }
  
            function w(t, e, r) {
              if (null == t) throw new Error("length is required");
              if (!(t >= 0)) throw new Error("length must be a positive number");
              return g(_(t, e), r || "kilometers")
            }
  
            function b(t, e, r) {
              if (null == t) throw new Error("area is required");
              if (!(t >= 0)) throw new Error("area must be a positive number");
              var i = So[e || "meters"];
              if (!i) throw new Error("invalid original units");
              var n = So[r || "kilometers"];
              if (!n) throw new Error("invalid final units");
              return t / i * n
            }
  
            function E(t) {
              return !isNaN(t) && null !== t && !Array.isArray(t)
            }
  
            function L(t) {
              return !!t && t.constructor === Object
            }
  
            function S(t) {
              if (!t) throw new Error("bbox is required");
              if (!Array.isArray(t)) throw new Error("bbox must be an Array");
              if (4 !== t.length && 6 !== t.length) throw new Error("bbox must be an Array of 4 or 6 numbers");
              t.forEach(function (t) {
                if (!E(t)) throw new Error("bbox must only contain numbers")
              });
            }
  
            function C(t) {
              if (!t) throw new Error("id is required");
              if (-1 === ["string", "number"].indexOf(typeof t)) throw new Error("id must be a number or a string")
            }
  
            function I(t, e, r) {
              if (null !== t)
                for (var i, n, o, s, a, u, c, h, l = 0, p = 0, f = t.type, d = "FeatureCollection" === f, g = "Feature" === f, _ = d ? t.features.length : 1, y = 0; y < _; y++) {
                  a = (h = !!(c = d ? t.features[y].geometry : g ? t.geometry : t) && "GeometryCollection" === c.type) ? c.geometries.length : 1;
                  for (var m = 0; m < a; m++) {
                    var v = 0,
                      x = 0;
                    if (null !== (s = h ? c.geometries[m] : c)) {
                      u = s.coordinates;
                      var w = s.type;
                      switch (l = !r || "Polygon" !== w && "MultiPolygon" !== w ? 0 : 1, w) {
                        case null:
                          break;
                        case "Point":
                          e(u, p, y, v, x), p++, v++;
                          break;
                        case "LineString":
                        case "MultiPoint":
                          for (i = 0; i < u.length; i++) e(u[i], p, y, v, x), p++, "MultiPoint" === w && v++;
                          "LineString" === w && v++;
                          break;
                        case "Polygon":
                        case "MultiLineString":
                          for (i = 0; i < u.length; i++) {
                            for (n = 0; n < u[i].length - l; n++) e(u[i][n], p, y, v, x), p++;
                            "MultiLineString" === w && v++, "Polygon" === w && x++;
                          }
                          "Polygon" === w && v++;
                          break;
                        case "MultiPolygon":
                          for (i = 0; i < u.length; i++) {
                            for ("MultiPolygon" === w && (x = 0), n = 0; n < u[i].length; n++) {
                              for (o = 0; o < u[i][n].length - l; o++) e(u[i][n][o], p, y, v, x), p++;
                              x++;
                            }
                            v++;
                          }
                          break;
                        case "GeometryCollection":
                          for (i = 0; i < s.geometries.length; i++) I(s.geometries[i], e, r);
                          break;
                        default:
                          throw new Error("Unknown Geometry Type")
                      }
                    }
                  }
                }
            }
  
            function M(t, e, r, i) {
              var n = r;
              return I(t, function (t, i, o, s, a) {
                n = 0 === i && void 0 === r ? t : e(n, t, i, o, s, a);
              }, i), n
            }
  
            function T(t, e) {
              var r;
              switch (t.type) {
                case "FeatureCollection":
                  for (r = 0; r < t.features.length; r++) e(t.features[r].properties, r);
                  break;
                case "Feature":
                  e(t.properties, 0);
              }
            }
  
            function P(t, e, r) {
              var i = r;
              return T(t, function (t, n) {
                i = 0 === n && void 0 === r ? t : e(i, t, n);
              }), i
            }
  
            function D(t, e) {
              if ("Feature" === t.type) e(t, 0);
              else if ("FeatureCollection" === t.type)
                for (var r = 0; r < t.features.length; r++) e(t.features[r], r);
            }
  
            function N(t, e, r) {
              var i = r;
              return D(t, function (t, n) {
                i = 0 === n && void 0 === r ? t : e(i, t, n);
              }), i
            }
  
            function R(t) {
              var e = [];
              return I(t, function (t) {
                e.push(t);
              }), e
            }
  
            function O(t, e) {
              var r, i, n, o, s, a, u, c, h, l, p = 0,
                f = "FeatureCollection" === t.type,
                d = "Feature" === t.type,
                g = f ? t.features.length : 1;
              for (r = 0; r < g; r++) {
                for (a = f ? t.features[r].geometry : d ? t.geometry : t, c = f ? t.features[r].properties : d ? t.properties : {}, h = f ? t.features[r].bbox : d ? t.bbox : void 0, l = f ? t.features[r].id : d ? t.id : void 0, s = (u = !!a && "GeometryCollection" === a.type) ? a.geometries.length : 1, n = 0; n < s; n++)
                  if (null !== (o = u ? a.geometries[n] : a)) switch (o.type) {
                    case "Point":
                    case "LineString":
                    case "MultiPoint":
                    case "Polygon":
                    case "MultiLineString":
                    case "MultiPolygon":
                      e(o, p, c, h, l);
                      break;
                    case "GeometryCollection":
                      for (i = 0; i < o.geometries.length; i++) e(o.geometries[i], p, c, h, l);
                      break;
                    default:
                      throw new Error("Unknown Geometry Type")
                  } else e(null, p, c, h, l);
                p++;
              }
            }
  
            function A(t, e, r) {
              var i = r;
              return O(t, function (t, n, o, s, a) {
                i = 0 === n && void 0 === r ? t : e(i, t, n, o, s, a);
              }), i
            }
  
            function F(t, r) {
              O(t, function (t, i, n, o, s) {
                var a, u = null === t ? null : t.type;
                switch (u) {
                  case null:
                  case "Point":
                  case "LineString":
                  case "Polygon":
                    return void r(e(t, n, {
                      bbox: o,
                      id: s
                    }), i, 0)
                }
                switch (u) {
                  case "MultiPoint":
                    a = "Point";
                    break;
                  case "MultiLineString":
                    a = "LineString";
                    break;
                  case "MultiPolygon":
                    a = "Polygon";
                }
                t.coordinates.forEach(function (t, o) {
                  r(e({
                    type: a,
                    coordinates: t
                  }, n), i, o);
                });
              });
            }
  
            function k(t, e, r) {
              var i = r;
              return F(t, function (t, n, o) {
                i = 0 === n && 0 === o && void 0 === r ? t : e(i, t, n, o);
              }), i
            }
  
            function B(t, e) {
              F(t, function (t, r, i) {
                var n = 0;
                if (t.geometry) {
                  var o = t.geometry.type;
                  "Point" !== o && "MultiPoint" !== o && M(t, function (o, s, u, c, h, l) {
                    var p = a([o, s], t.properties);
                    return e(p, r, i, l, n), n++, s
                  });
                }
              });
            }
  
            function z(t, e, r) {
              var i = r,
                n = !1;
              return B(t, function (t, o, s, a, u) {
                i = !1 === n && void 0 === r ? t : e(i, t, o, s, a, u), n = !0;
              }), i
            }
  
            function V(t, e) {
              if (!t) throw new Error("geojson is required");
              F(t, function (t, r, i) {
                if (null !== t.geometry) {
                  var n = t.geometry.type,
                    o = t.geometry.coordinates;
                  switch (n) {
                    case "LineString":
                      e(t, r, i, 0, 0);
                      break;
                    case "Polygon":
                      for (var s = 0; s < o.length; s++) e(a(o[s], t.properties), r, i, s);
                  }
                }
              });
            }
  
            function U(t, e, r) {
              var i = r;
              return V(t, function (t, n, o, s) {
                i = 0 === n && void 0 === r ? t : e(i, t, n, o, s);
              }), i
            }
  
            function q(t) {
              var e = [1 / 0, 1 / 0, -1 / 0, -1 / 0];
              return I(t, function (t) {
                e[0] > t[0] && (e[0] = t[0]), e[1] > t[1] && (e[1] = t[1]), e[2] < t[0] && (e[2] = t[0]), e[3] < t[1] && (e[3] = t[1]);
              }), e
            }
  
            function j(t) {
              if (!t) throw new Error("obj is required");
              var e = G(t);
              if (e.length > 1 && E(e[0]) && E(e[1])) return e;
              throw new Error("Coordinate is not a valid Point")
            }
  
            function G(t) {
              if (!t) throw new Error("obj is required");
              var e;
              if (t.length ? e = t : t.coordinates ? e = t.coordinates : t.geometry && t.geometry.coordinates && (e = t.geometry.coordinates), e) return X(e), e;
              throw new Error("No valid coordinates")
            }
  
            function X(t) {
              if (t.length > 1 && E(t[0]) && E(t[1])) return !0;
              if (Array.isArray(t[0]) && t[0].length) return X(t[0]);
              throw new Error("coordinates must only contain numbers")
            }
  
            function Z(t, e, r) {
              if (!e || !r) throw new Error("type and name required");
              if (!t || t.type !== e) throw new Error("Invalid input to " + r + ": must be a " + e + ", given " + t.type)
            }
  
            function Y(t, e, r) {
              if (!t) throw new Error("No feature passed");
              if (!r) throw new Error(".featureOf() requires a name");
              if (!t || "Feature" !== t.type || !t.geometry) throw new Error("Invalid input to " + r + ", Feature with geometry required");
              if (!t.geometry || t.geometry.type !== e) throw new Error("Invalid input to " + r + ": must be a " + e + ", given " + t.geometry.type)
            }
  
            function W(t, e, r) {
              if (!t) throw new Error("No featureCollection passed");
              if (!r) throw new Error(".collectionOf() requires a name");
              if (!t || "FeatureCollection" !== t.type) throw new Error("Invalid input to " + r + ", FeatureCollection required");
              for (var i = 0; i < t.features.length; i++) {
                var n = t.features[i];
                if (!n || "Feature" !== n.type || !n.geometry) throw new Error("Invalid input to " + r + ", Feature with geometry required");
                if (!n.geometry || n.geometry.type !== e) throw new Error("Invalid input to " + r + ": must be a " + e + ", given " + n.geometry.type)
              }
            }
  
            function H(t) {
              if (!t) throw new Error("geojson is required");
              if (void 0 !== t.geometry) return t.geometry;
              if (t.coordinates || t.geometries) return t;
              throw new Error("geojson must be a valid Feature or Geometry Object")
            }
  
            function K() {
              throw new Error("invariant.getGeomType has been deprecated in v5.0 in favor of invariant.getType")
            }
  
            function J(t, e) {
              if (!t) throw new Error((e || "geojson") + " is required");
              if (t.geometry && t.geometry.type) return t.geometry.type;
              if (t.type) return t.type;
              throw new Error((e || "geojson") + " is invalid")
            }
  
            function Q(t, e, r) {
              r = r || {};
              for (var i = Object.keys(To), n = 0; n < i.length; n++) {
                var o = i[n],
                  s = r[o];
                s = null != s ? s : To[o], Po[o] = s;
              }
              Po.verbose && console.log("MarchingSquaresJS-isoContours: computing isocontour for " + e);
              var a = function (t) {
                var e = [],
                  r = 0;
                return t.rows, t.cols, t.cells.forEach(function (i, n) {
                  i.forEach(function (i, o) {
                    if (void 0 !== i && ! function (t) {
                        return 5 === t.cval || 10 === t.cval
                      }(i) && !tt(i)) {
                      var s = function (t, e, r) {
                          var i, n, o, s = t.length,
                            a = [],
                            u = [0, 0, 1, 1, 0, 0, 0, 0, -1, 0, 1, 1, -1, 0, -1, 0],
                            c = [0, -1, 0, 0, 1, 1, 1, 1, 0, -1, 0, 0, 0, -1, 0, 0],
                            h = ["none", "bottom", "right", "right", "top", "top", "top", "top", "left", "bottom", "right", "right", "left", "bottom", "left", "none"],
                            l = (t[e][r], t[e][r]),
                            p = l.cval,
                            f = rt(l, o = ["none", "left", "bottom", "left", "right", "none", "bottom", "left", "top", "top", "none", "top", "right", "right", "bottom", "none"][p]);
                          a.push([r + f[0], e + f[1]]), f = rt(l, o = h[p]), a.push([r + f[0], e + f[1]]), et(l);
                          for (var d = r + u[p], g = e + c[p], _ = p; d >= 0 && g >= 0 && g < s && (d != r || g != e) && void 0 !== (l = t[g][d]);) {
                            if (0 === (p = l.cval) || 15 === p) return {
                              path: a,
                              info: "mergeable"
                            };
                            o = h[p], i = u[p], n = c[p], 5 !== p && 10 !== p || (5 === p ? l.flipped ? -1 === c[_] ? (o = "left", i = -1, n = 0) : (o = "right", i = 1, n = 0) : -1 === u[_] && (o = "bottom", i = 0, n = -1) : 10 === p && (l.flipped ? -1 === u[_] ? (o = "top", i = 0, n = 1) : (o = "bottom", i = 0, n = -1) : 1 === c[_] && (o = "left", i = -1, n = 0))), f = rt(l, o), a.push([d + f[0], g + f[1]]), et(l), d += i, g += n, _ = p;
                          }
                          return {
                            path: a,
                            info: "closed"
                          }
                        }(t.cells, n, o),
                        a = !1;
                      if ("mergeable" === s.info)
                        for (var u = s.path[s.path.length - 1][0], c = s.path[s.path.length - 1][1], h = r - 1; h >= 0; h--)
                          if (Math.abs(e[h][0][0] - u) <= 1e-7 && Math.abs(e[h][0][1] - c) <= 1e-7) {
                            for (var l = s.path.length - 2; l >= 0; --l) e[h].unshift(s.path[l]);
                            a = !0;
                            break
                          } a || (e[r++] = s.path);
                    }
                  });
                }), e
              }(function (t, e) {
                for (var r = t.length - 1, i = t[0].length - 1, n = {
                    rows: r,
                    cols: i,
                    cells: []
                  }, o = 0; o < r; ++o) {
                  n.cells[o] = [];
                  for (var s = 0; s < i; ++s) {
                    var a = 0,
                      u = t[o + 1][s],
                      c = t[o + 1][s + 1],
                      h = t[o][s + 1],
                      l = t[o][s];
                    if (!(isNaN(u) || isNaN(c) || isNaN(h) || isNaN(l))) {
                      a |= u >= e ? 8 : 0, a |= c >= e ? 4 : 0, a |= h >= e ? 2 : 0;
                      var p, f, d, g, _ = !1;
                      if (5 == (a |= l >= e ? 1 : 0) || 10 === a) {
                        var y = (u + c + h + l) / 4;
                        5 === a && y < e ? (a = 10, _ = !0) : 10 === a && y < e && (a = 5, _ = !0);
                      }
                      0 !== a && 15 !== a && (p = f = d = g = .5, 1 === a ? (d = 1 - $(e, u, l), f = 1 - $(e, h, l)) : 2 === a ? (f = $(e, l, h), g = 1 - $(e, c, h)) : 3 === a ? (d = 1 - $(e, u, l), g = 1 - $(e, c, h)) : 4 === a ? (p = $(e, u, c), g = $(e, h, c)) : 5 === a ? (p = $(e, u, c), g = $(e, h, c), f = 1 - $(e, h, l), d = 1 - $(e, u, l)) : 6 === a ? (f = $(e, l, h), p = $(e, u, c)) : 7 === a ? (d = 1 - $(e, u, l), p = $(e, u, c)) : 8 === a ? (d = $(e, l, u), p = 1 - $(e, c, u)) : 9 === a ? (f = 1 - $(e, h, l), p = 1 - $(e, c, u)) : 10 === a ? (p = 1 - $(e, c, u), g = 1 - $(e, c, h), f = $(e, l, h), d = $(e, l, u)) : 11 === a ? (p = 1 - $(e, c, u), g = 1 - $(e, c, h)) : 12 === a ? (d = $(e, l, u), g = $(e, h, c)) : 13 === a ? (f = 1 - $(e, h, l), g = $(e, h, c)) : 14 === a ? (d = $(e, l, u), f = $(e, l, h)) : console.log("MarchingSquaresJS-isoContours: Illegal cval detected: " + a), n.cells[o][s] = {
                        cval: a,
                        flipped: _,
                        top: p,
                        right: g,
                        bottom: f,
                        left: d
                      });
                    }
                  }
                }
                return n
              }(t, e));
              return "function" == typeof Po.successCallback && Po.successCallback(a), a
            }
  
            function $(t, e, r) {
              return (t - e) / (r - e)
            }
  
            function tt(t) {
              return 0 === t.cval || 15 === t.cval
            }
  
            function et(t) {
              tt(t) || 5 === t.cval || 10 === t.cval || (t.cval = 15);
            }
  
            function rt(t, e) {
              return "top" === e ? [t.top, 1] : "bottom" === e ? [t.bottom, 0] : "right" === e ? [1, t.right] : "left" === e ? [0, t.left] : void 0
            }
  
            function it(t, e, r) {
              var i = t[e];
              t[e] = t[r], t[r] = i;
            }
  
            function nt(t, e) {
              if (!(this instanceof nt)) return new nt(t, e);
              this._maxEntries = Math.max(4, t || 9), this._minEntries = Math.max(2, Math.ceil(.4 * this._maxEntries)), e && this._initFormat(e), this.clear();
            }
  
            function ot(t, e) {
              st(t, 0, t.children.length, e, t);
            }
  
            function st(t, e, r, i, n) {
              n || (n = dt(null)), n.minX = 1 / 0, n.minY = 1 / 0, n.maxX = -1 / 0, n.maxY = -1 / 0;
              for (var o, s = e; s < r; s++) o = t.children[s], at(n, t.leaf ? i(o) : o);
              return n
            }
  
            function at(t, e) {
              return t.minX = Math.min(t.minX, e.minX), t.minY = Math.min(t.minY, e.minY), t.maxX = Math.max(t.maxX, e.maxX), t.maxY = Math.max(t.maxY, e.maxY), t
            }
  
            function ut(t, e) {
              return t.minX - e.minX
            }
  
            function ct(t, e) {
              return t.minY - e.minY
            }
  
            function ht(t) {
              return (t.maxX - t.minX) * (t.maxY - t.minY)
            }
  
            function lt(t) {
              return t.maxX - t.minX + (t.maxY - t.minY)
            }
  
            function pt(t, e) {
              return t.minX <= e.minX && t.minY <= e.minY && e.maxX <= t.maxX && e.maxY <= t.maxY
            }
  
            function ft(t, e) {
              return e.minX <= t.maxX && e.minY <= t.maxY && e.maxX >= t.minX && e.maxY >= t.minY
            }
  
            function dt(t) {
              return {
                children: t,
                height: 1,
                leaf: !0,
                minX: 1 / 0,
                minY: 1 / 0,
                maxX: -1 / 0,
                maxY: -1 / 0
              }
            }
  
            function gt(t, e, r, i, n) {
              for (var o, s = [e, r]; s.length;)(r = s.pop()) - (e = s.pop()) <= i || (o = e + Math.ceil((r - e) / i / 2) * i, Do(t, o, e, r, n), s.push(e, o, o, r));
            }
  
            function _t(t, e) {
              return t(e = {
                exports: {}
              }, e.exports), e.exports
            }
  
            function yt(t, e) {
              if (!(this instanceof yt)) return new yt(t, e);
              if (this.data = t || [], this.length = this.data.length, this.compare = e || function (t, e) {
                  return t < e ? -1 : t > e ? 1 : 0
                }, this.length > 0)
                for (var r = (this.length >> 1) - 1; r >= 0; r--) this._down(r);
            }
  
            function mt(t, e, r) {
              e = Math.max(0, void 0 === e ? 2 : e), r = r || 0;
              for (var i, n = function (t) {
                  for (var e = t[0], r = t[0], i = t[0], n = t[0], o = 0; o < t.length; o++) {
                    var s = t[o];
                    s[0] < e[0] && (e = s), s[0] > i[0] && (i = s), s[1] < r[1] && (r = s), s[1] > n[1] && (n = s);
                  }
                  var a = [e, r, i, n],
                    u = a.slice();
                  for (o = 0; o < t.length; o++) Go(t[o], a) || u.push(t[o]);
                  var c = Vo(u),
                    h = [];
                  for (o = 0; o < c.length; o++) h.push(u[c[o]]);
                  return h
                }(t), o = No(16, ["[0]", "[1]", "[0]", "[1]"]).load(t), s = [], a = 0; a < n.length; a++) {
                var u = n[a];
                o.remove(u), i = Et(u, i), s.push(i);
              }
              var c = No(16);
              for (a = 0; a < s.length; a++) c.insert(bt(s[a]));
              for (var h = e * e, l = r * r; s.length;) {
                var p = s.shift(),
                  f = p.p,
                  d = p.next.p,
                  g = Lt(f, d);
                if (!(g < l)) {
                  var _ = g / h;
                  (u = function (t, e, r, i, n, o, s) {
                    for (var a = new qo(null, vt), u = t.data; u;) {
                      for (var c = 0; c < u.children.length; c++) {
                        var h = u.children[c],
                          l = u.leaf ? St(h, r, i) : function (t, e, r) {
                            if (xt(t, r) || xt(e, r)) return 0;
                            var i = Ct(t[0], t[1], e[0], e[1], r.minX, r.minY, r.maxX, r.minY);
                            if (0 === i) return 0;
                            var n = Ct(t[0], t[1], e[0], e[1], r.minX, r.minY, r.minX, r.maxY);
                            if (0 === n) return 0;
                            var o = Ct(t[0], t[1], e[0], e[1], r.maxX, r.minY, r.maxX, r.maxY);
                            if (0 === o) return 0;
                            var s = Ct(t[0], t[1], e[0], e[1], r.minX, r.maxY, r.maxX, r.maxY);
                            return 0 === s ? 0 : Math.min(i, n, o, s)
                          }(r, i, h);
                        l > o || a.push({
                          node: h,
                          dist: l
                        });
                      }
                      for (; a.length && !a.peek().node.children;) {
                        var p = a.pop(),
                          f = p.node,
                          d = St(f, e, r),
                          g = St(f, i, n);
                        if (p.dist < d && p.dist < g && wt(r, f, s) && wt(i, f, s)) return f
                      }(u = a.pop()) && (u = u.node);
                    }
                    return null
                  }(o, p.prev.p, f, d, p.next.next.p, _, c)) && Math.min(Lt(u, f), Lt(u, d)) <= _ && (s.push(p), s.push(Et(u, p)), o.remove(u), c.remove(p), c.insert(bt(p)), c.insert(bt(p.next)));
                }
              }
              p = i;
              var y = [];
              do {
                y.push(p.p), p = p.next;
              } while (p !== i);
              return y.push(p.p), y
            }
  
            function vt(t, e) {
              return t.dist - e.dist
            }
  
            function xt(t, e) {
              return t[0] >= e.minX && t[0] <= e.maxX && t[1] >= e.minY && t[1] <= e.maxY
            }
  
            function wt(t, e, r) {
              for (var i = Math.min(t[0], e[0]), n = Math.min(t[1], e[1]), o = Math.max(t[0], e[0]), s = Math.max(t[1], e[1]), a = r.search({
                  minX: i,
                  minY: n,
                  maxX: o,
                  maxY: s
                }), u = 0; u < a.length; u++)
                if (function (t, e, r, i) {
                    return t !== i && e !== r && Xo(t, e, r) > 0 != Xo(t, e, i) > 0 && Xo(r, i, t) > 0 != Xo(r, i, e) > 0
                  }(a[u].p, a[u].next.p, t, e)) return !1;
              return !0
            }
  
            function bt(t) {
              var e = t.p,
                r = t.next.p;
              return t.minX = Math.min(e[0], r[0]), t.minY = Math.min(e[1], r[1]), t.maxX = Math.max(e[0], r[0]), t.maxY = Math.max(e[1], r[1]), t
            }
  
            function Et(t, e) {
              var r = {
                p: t,
                prev: null,
                next: null,
                minX: 0,
                minY: 0,
                maxX: 0,
                maxY: 0
              };
              return e ? (r.next = e.next, r.prev = e, e.next.prev = r, e.next = r) : (r.prev = r, r.next = r), r
            }
  
            function Lt(t, e) {
              var r = t[0] - e[0],
                i = t[1] - e[1];
              return r * r + i * i
            }
  
            function St(t, e, r) {
              var i = e[0],
                n = e[1],
                o = r[0] - i,
                s = r[1] - n;
              if (0 !== o || 0 !== s) {
                var a = ((t[0] - i) * o + (t[1] - n) * s) / (o * o + s * s);
                a > 1 ? (i = r[0], n = r[1]) : a > 0 && (i += o * a, n += s * a);
              }
              return (o = t[0] - i) * o + (s = t[1] - n) * s
            }
  
            function Ct(t, e, r, i, n, o, s, a) {
              var u, c, h, l, p = r - t,
                f = i - e,
                d = s - n,
                g = a - o,
                _ = t - n,
                y = e - o,
                m = p * p + f * f,
                v = p * d + f * g,
                x = d * d + g * g,
                w = p * _ + f * y,
                b = d * _ + g * y,
                E = m * x - v * v,
                L = E,
                S = E;
              0 === E ? (c = 0, L = 1, l = b, S = x) : (l = m * b - v * w, (c = v * b - x * w) < 0 ? (c = 0, l = b, S = x) : c > L && (c = L, l = b + v, S = x)), l < 0 ? (l = 0, -w < 0 ? c = 0 : -w > m ? c = L : (c = -w, L = m)) : l > S && (l = S, -w + v < 0 ? c = 0 : -w + v > m ? c = L : (c = -w + v, L = m));
              var C = (1 - (h = 0 === l ? 0 : l / S)) * n + h * s - ((1 - (u = 0 === c ? 0 : c / L)) * t + u * r),
                I = (1 - h) * o + h * a - ((1 - u) * e + u * i);
              return C * C + I * I
            }
  
            function It(t, e) {
              if (!L(e = e || {})) throw new Error("options is invalid");
              var r = e.concavity || 1 / 0,
                i = [];
              if (I(t, function (t) {
                  i.push([t[0], t[1]]);
                }), !i.length) return null;
              var n = Zo(i, r);
              return n.length > 3 ? o([n]) : null
            }
  
            function Mt(t, e, r) {
              if ("object" != typeof (r = r || {})) throw new Error("options is invalid");
              var i = r.ignoreBoundary;
              if (!t) throw new Error("point is required");
              if (!e) throw new Error("polygon is required");
              var n = j(t),
                o = G(e),
                s = e.geometry ? e.geometry.type : e.type,
                a = e.bbox;
              if (a && !1 === function (t, e) {
                  return e[0] <= t[0] && e[1] <= t[1] && e[2] >= t[0] && e[3] >= t[1]
                }(n, a)) return !1;
              "Polygon" === s && (o = [o]);
              for (var u = 0, c = !1; u < o.length && !c; u++)
                if (Tt(n, o[u][0], i)) {
                  for (var h = !1, l = 1; l < o[u].length && !h;) Tt(n, o[u][l], !i) && (h = !0), l++;
                  h || (c = !0);
                } return c
            }
  
            function Tt(t, e, r) {
              var i = !1;
              e[0][0] === e[e.length - 1][0] && e[0][1] === e[e.length - 1][1] && (e = e.slice(0, e.length - 1));
              for (var n = 0, o = e.length - 1; n < e.length; o = n++) {
                var s = e[n][0],
                  a = e[n][1],
                  u = e[o][0],
                  c = e[o][1];
                if (t[1] * (s - u) + a * (u - t[0]) + c * (t[0] - s) == 0 && (s - t[0]) * (u - t[0]) <= 0 && (a - t[1]) * (c - t[1]) <= 0) return !r;
                a > t[1] != c > t[1] && t[0] < (u - s) * (t[1] - a) / (c - a) + s && (i = !i);
              }
              return i
            }
  
            function Pt(t, e) {
              var r = [];
              return O(e, function (e) {
                D(t, function (t) {
                  Mt(t, e) && r.push(t);
                });
              }), c(r)
            }
  
            function Dt(t, e) {
              if ("FeatureCollection" !== t.type) throw new Error("points must be a FeatureCollection");
              var r = !1;
              return c(function (t) {
                if (t.length < 3) return [];
                t.sort(Rt);
                for (var e, r, i, n, o, s, a = t.length - 1, u = t[a].x, c = t[0].x, h = t[a].y, l = h; a--;) t[a].y < h && (h = t[a].y), t[a].y > l && (l = t[a].y);
                var p, f = c - u,
                  d = l - h,
                  g = f > d ? f : d,
                  _ = .5 * (c + u),
                  y = .5 * (l + h),
                  m = [new Nt({
                    x: _ - 20 * g,
                    y: y - g,
                    __sentinel: !0
                  }, {
                    x: _,
                    y: y + 20 * g,
                    __sentinel: !0
                  }, {
                    x: _ + 20 * g,
                    y: y - g,
                    __sentinel: !0
                  })],
                  v = [],
                  x = [];
                for (a = t.length; a--;) {
                  for (x.length = 0, p = m.length; p--;)(f = t[a].x - m[p].x) > 0 && f * f > m[p].r ? (v.push(m[p]), m.splice(p, 1)) : f * f + (d = t[a].y - m[p].y) * d > m[p].r || (x.push(m[p].a, m[p].b, m[p].b, m[p].c, m[p].c, m[p].a), m.splice(p, 1));
                  for (Ot(x), p = x.length; p;) r = x[--p], e = x[--p], i = t[a], n = r.x - e.x, o = r.y - e.y, s = 2 * (n * (i.y - r.y) - o * (i.x - r.x)), Math.abs(s) > 1e-12 && m.push(new Nt(e, r, i));
                }
                for (Array.prototype.push.apply(v, m), a = v.length; a--;)(v[a].a.__sentinel || v[a].b.__sentinel || v[a].c.__sentinel) && v.splice(a, 1);
                return v
              }(t.features.map(function (t) {
                var i = {
                  x: t.geometry.coordinates[0],
                  y: t.geometry.coordinates[1]
                };
                return e ? i.z = t.properties[e] : 3 === t.geometry.coordinates.length && (r = !0, i.z = t.geometry.coordinates[2]), i
              })).map(function (t) {
                var e = [t.a.x, t.a.y],
                  i = [t.b.x, t.b.y],
                  n = [t.c.x, t.c.y],
                  s = {};
                return r ? (e.push(t.a.z), i.push(t.b.z), n.push(t.c.z)) : s = {
                  a: t.a.z,
                  b: t.b.z,
                  c: t.c.z
                }, o([
                  [e, i, n, e]
                ], s)
              }))
            }
  
            function Nt(t, e, r) {
              this.a = t, this.b = e, this.c = r;
              var i, n, o = e.x - t.x,
                s = e.y - t.y,
                a = r.x - t.x,
                u = r.y - t.y,
                c = o * (t.x + e.x) + s * (t.y + e.y),
                h = a * (t.x + r.x) + u * (t.y + r.y),
                l = 2 * (o * (r.y - e.y) - s * (r.x - e.x));
              this.x = (u * c - s * h) / l, this.y = (o * h - a * c) / l, i = this.x - t.x, n = this.y - t.y, this.r = i * i + n * n;
            }
  
            function Rt(t, e) {
              return e.x - t.x
            }
  
            function Ot(t) {
              var e, r, i, n, o, s = t.length;
              t: for (; s;)
                for (r = t[--s], e = t[--s], i = s; i;)
                  if (o = t[--i], e === (n = t[--i]) && r === o || e === o && r === n) {
                    t.splice(s, 2), t.splice(i, 2), s -= 2;
                    continue t
                  }
            }
  
            function At(t, e, r) {
              if (!L(r = r || {})) throw new Error("options is invalid");
              var i = r.units,
                n = j(t),
                o = j(e),
                s = x(o[1] - n[1]),
                a = x(o[0] - n[0]),
                u = x(n[1]),
                c = x(o[1]),
                h = Math.pow(Math.sin(s / 2), 2) + Math.pow(Math.sin(a / 2), 2) * Math.cos(u) * Math.cos(c);
              return g(2 * Math.atan2(Math.sqrt(h), Math.sqrt(1 - h)), i)
            }
  
            function Ft(t) {
              if (!t) throw new Error("geojson is required");
              switch (t.type) {
                case "Feature":
                  return kt(t);
                case "FeatureCollection":
                  return function (t) {
                    var e = {
                      type: "FeatureCollection"
                    };
                    return Object.keys(t).forEach(function (r) {
                      switch (r) {
                        case "type":
                        case "features":
                          return;
                        default:
                          e[r] = t[r];
                      }
                    }), e.features = t.features.map(function (t) {
                      return kt(t)
                    }), e
                  }(t);
                case "Point":
                case "LineString":
                case "Polygon":
                case "MultiPoint":
                case "MultiLineString":
                case "MultiPolygon":
                case "GeometryCollection":
                  return Bt(t);
                default:
                  throw new Error("unknown GeoJSON type")
              }
            }
  
            function kt(t) {
              var e = {
                type: "Feature"
              };
              return Object.keys(t).forEach(function (r) {
                switch (r) {
                  case "type":
                  case "properties":
                  case "geometry":
                    return;
                  default:
                    e[r] = t[r];
                }
              }), e.properties = function t(e) {
                var r = {};
                return e ? (Object.keys(e).forEach(function (i) {
                  var n = e[i];
                  "object" == typeof n ? null === n ? r[i] = null : n.length ? r[i] = n.map(function (t) {
                    return t
                  }) : r[i] = t(n) : r[i] = n;
                }), r) : r
              }(t.properties), e.geometry = Bt(t.geometry), e
            }
  
            function Bt(t) {
              var e = {
                type: t.type
              };
              return t.bbox && (e.bbox = t.bbox), "GeometryCollection" === t.type ? (e.geometries = t.geometries.map(function (t) {
                return Bt(t)
              }), e) : (e.coordinates = function t(e) {
                return "object" != typeof e[0] ? e.slice() : e.map(function (e) {
                  return t(e)
                })
              }(t.coordinates), e)
            }
  
            function zt(t, e) {
              function r(t, e) {
                e.length && e.pop();
                for (var r = u[t < 0 ? ~t : t], i = 0, n = r.length; i < n; ++i) e.push(a(r[i], i));
                t < 0 && Ko(e, n);
              }
  
              function i(t) {
                return a(t)
              }
  
              function n(t) {
                for (var e = [], i = 0, n = t.length; i < n; ++i) r(t[i], e);
                return e.length < 2 && e.push(e[0]), e
              }
  
              function o(t) {
                for (var e = n(t); e.length < 4;) e.push(e[0]);
                return e
              }
  
              function s(t) {
                return t.map(o)
              }
              var a = Ho(t.transform),
                u = t.arcs;
              return function t(e) {
                var r, o = e.type;
                switch (o) {
                  case "GeometryCollection":
                    return {
                      type: o, geometries: e.geometries.map(t)
                    };
                  case "Point":
                    r = i(e.coordinates);
                    break;
                  case "MultiPoint":
                    r = e.coordinates.map(i);
                    break;
                  case "LineString":
                    r = n(e.arcs);
                    break;
                  case "MultiLineString":
                    r = e.arcs.map(n);
                    break;
                  case "Polygon":
                    r = s(e.arcs);
                    break;
                  case "MultiPolygon":
                    r = e.arcs.map(s);
                    break;
                  default:
                    return null
                }
                return {
                  type: o,
                  coordinates: r
                }
              }(e)
            }
  
            function Vt(t, e) {
              function r(t) {
                t.forEach(function (e) {
                  e.forEach(function (e) {
                    (n[e = e < 0 ? ~e : e] || (n[e] = [])).push(t);
                  });
                }), o.push(t);
              }
  
              function i(e) {
                return function (t) {
                  for (var e, r = -1, i = t.length, n = t[i - 1], o = 0; ++r < i;) e = n, n = t[r], o += e[0] * n[1] - e[1] * n[0];
                  return Math.abs(o)
                }(zt(t, {
                  type: "Polygon",
                  arcs: [e]
                }).coordinates[0])
              }
              var n = {},
                o = [],
                s = [];
              return e.forEach(function t(e) {
                switch (e.type) {
                  case "GeometryCollection":
                    e.geometries.forEach(t);
                    break;
                  case "Polygon":
                    r(e.arcs);
                    break;
                  case "MultiPolygon":
                    e.arcs.forEach(r);
                }
              }), o.forEach(function (t) {
                if (!t._) {
                  var e = [],
                    r = [t];
                  for (t._ = 1, s.push(e); t = r.pop();) e.push(t), t.forEach(function (t) {
                    t.forEach(function (t) {
                      n[t < 0 ? ~t : t].forEach(function (t) {
                        t._ || (t._ = 1, r.push(t));
                      });
                    });
                  });
                }
              }), o.forEach(function (t) {
                delete t._;
              }), {
                type: "MultiPolygon",
                arcs: s.map(function (e) {
                  var r, o = [];
                  if (e.forEach(function (t) {
                      t.forEach(function (t) {
                        t.forEach(function (t) {
                          n[t < 0 ? ~t : t].length < 2 && o.push(t);
                        });
                      });
                    }), (r = (o = Jo(t, o)).length) > 1)
                    for (var s, a, u = 1, c = i(o[0]); u < r; ++u)(s = i(o[u])) > c && (a = o[0], o[0] = o[u], o[u] = a, c = s);
                  return o
                })
              }
            }
  
            function Ut(t, e, r) {
              for (var i, n = e + (r-- - e >> 1); e < n; ++e, --r) i = t[e], t[e] = t[r], t[r] = i;
            }
  
            function qt(t) {
              return null == t ? {
                type: null
              } : ("FeatureCollection" === t.type ? function (t) {
                var e = {
                  type: "GeometryCollection",
                  geometries: t.features.map(jt)
                };
                return null != t.bbox && (e.bbox = t.bbox), e
              } : "Feature" === t.type ? jt : Gt)(t)
            }
  
            function jt(t) {
              var e, r = Gt(t.geometry);
              for (e in null != t.id && (r.id = t.id), null != t.bbox && (r.bbox = t.bbox), t.properties) {
                r.properties = t.properties;
                break
              }
              return r
            }
  
            function Gt(t) {
              if (null == t) return {
                type: null
              };
              var e = "GeometryCollection" === t.type ? {
                type: "GeometryCollection",
                geometries: t.geometries.map(Gt)
              } : "Point" === t.type || "MultiPoint" === t.type ? {
                type: t.type,
                coordinates: t.coordinates
              } : {
                type: t.type,
                arcs: t.coordinates
              };
              return null != t.bbox && (e.bbox = t.bbox), e
            }
  
            function Xt(t) {
              var e, r = t[0],
                i = t[1];
              return i < r && (e = r, r = i, i = e), r + 31 * i
            }
  
            function Zt(t, e) {
              var r, i = t[0],
                n = t[1],
                o = e[0],
                s = e[1];
              return n < i && (r = i, i = n, n = r), s < o && (r = o, o = s, s = r), i === o && n === s
            }
  
            function Yt(t) {
              return t[0].toString() + "," + t[1].toString()
            }
  
            function Wt(t, e) {
              if (!L(e = e || {})) throw new Error("options is invalid");
              var r = e.mutate;
              if ("FeatureCollection" !== J(t)) throw new Error("geojson must be a FeatureCollection");
              if (!t.features.length) throw new Error("geojson is empty");
              !1 !== r && void 0 !== r || (t = Ft(t));
              var i = function (t) {
                var e = {};
                F(t, function (t) {
                  e[t.geometry.type] = !0;
                });
                var r = Object.keys(e);
                return 1 === r.length ? r[0] : null
              }(t);
              if (!i) throw new Error("geojson must be homogenous");
              switch (i) {
                case "LineString":
                  return function (t, e) {
                    if (!L(e = e || {})) throw new Error("options is invalid");
                    var r = e.mutate;
                    if ("FeatureCollection" !== J(t)) throw new Error("geojson must be a FeatureCollection");
                    if (!t.features.length) throw new Error("geojson is empty");
                    !1 !== r && void 0 !== r || (t = Ft(t));
                    var i = [],
                      n = U(t, function (t, e) {
                        return function (t, e) {
                          var r, i = t.geometry.coordinates,
                            n = e.geometry.coordinates,
                            o = Yt(i[0]),
                            s = Yt(i[i.length - 1]),
                            u = Yt(n[0]),
                            c = Yt(n[n.length - 1]);
                          if (o === c) r = n.concat(i.slice(1));
                          else if (u === s) r = i.concat(n.slice(1));
                          else if (o === u) r = i.slice(1).reverse().concat(n);
                          else {
                            if (s !== c) return null;
                            r = i.concat(n.reverse().slice(1));
                          }
                          return a(r)
                        }(t, e) || (i.push(t), e)
                      });
                    return n && i.push(n), i.length ? 1 === i.length ? i[0] : h(i.map(function (t) {
                      return t.coordinates
                    })) : null
                  }(t, e);
                case "Polygon":
                  return function (t, e) {
                    if (!L(e = e || {})) throw new Error("options is invalid");
                    var r = e.mutate;
                    if ("FeatureCollection" !== J(t)) throw new Error("geojson must be a FeatureCollection");
                    if (!t.features.length) throw new Error("geojson is empty");
                    !1 !== r && void 0 !== r || (t = Ft(t));
                    var i = [];
                    F(t, function (t) {
                      i.push(t.geometry);
                    });
                    var n = ss({
                      geoms: f(i).geometry
                    });
                    return Qo(n, n.objects.geoms.geometries)
                  }(t, e);
                default:
                  throw new Error(i + " is not supported")
              }
            }
  
            function Ht(t, r) {
              var i = "object" == typeof r ? r.mutate : r;
              if (!t) throw new Error("geojson is required");
              var n = J(t),
                o = [];
              switch (n) {
                case "LineString":
                  o = Kt(t);
                  break;
                case "MultiLineString":
                case "Polygon":
                  G(t).forEach(function (t) {
                    o.push(Kt(t));
                  });
                  break;
                case "MultiPolygon":
                  G(t).forEach(function (t) {
                    var e = [];
                    t.forEach(function (t) {
                      e.push(Kt(t));
                    }), o.push(e);
                  });
                  break;
                case "Point":
                  return t;
                case "MultiPoint":
                  var s = {};
                  G(t).forEach(function (t) {
                    var e = t.join("-");
                    s.hasOwnProperty(e) || (o.push(t), s[e] = !0);
                  });
                  break;
                default:
                  throw new Error(n + " geometry not supported")
              }
              return t.coordinates ? !0 === i ? (t.coordinates = o, t) : {
                type: n,
                coordinates: o
              } : !0 === i ? (t.geometry.coordinates = o, t) : e({
                type: n,
                coordinates: o
              }, t.properties, t.bbox, t.id)
            }
  
            function Kt(t) {
              var e = G(t);
              if (2 === e.length && ! function (t, e) {
                  return t[0] === e[0] && t[1] === e[1]
                }(e[0], e[1])) return e;
              var r, i, n, o = [],
                s = e.length - 1;
              o.push(e[0]);
              for (var a = 1; a < s; a++) r = e[a - 1], i = e[a],
                function (t, e, r) {
                  var i = r[0],
                    n = r[1],
                    o = t[0],
                    s = t[1],
                    a = e[0],
                    u = e[1],
                    c = a - o,
                    h = u - s;
                  return (i - o) * h - (n - s) * c == 0 && (Math.abs(c) >= Math.abs(h) ? c > 0 ? o <= i && i <= a : a <= i && i <= o : h > 0 ? s <= n && n <= u : u <= n && n <= s)
                }(r, n = e[a + 1], i) || o.push(i);
              return o.push(n), o
            }
  
            function Jt(t, e) {
              var r = t.x - e.x,
                i = t.y - e.y;
              return r * r + i * i
            }
  
            function Qt(t, e, r) {
              var i = e.x,
                n = e.y,
                o = r.x - i,
                s = r.y - n;
              if (0 !== o || 0 !== s) {
                var a = ((t.x - i) * o + (t.y - n) * s) / (o * o + s * s);
                a > 1 ? (i = r.x, n = r.y) : a > 0 && (i += o * a, n += s * a);
              }
              return (o = t.x - i) * o + (s = t.y - n) * s
            }
  
            function $t(t, e, r) {
              if (t.length <= 2) return t;
              var i = void 0 !== e ? e * e : 1;
              return function (t, e) {
                var r = t.length - 1,
                  i = [t[0]];
                return function t(e, r, i, n, o) {
                  for (var s, a = n, u = r + 1; u < i; u++) {
                    var c = Qt(e[u], e[r], e[i]);
                    c > a && (s = u, a = c);
                  }
                  a > n && (s - r > 1 && t(e, r, s, n, o), o.push(e[s]), i - s > 1 && t(e, s, i, n, o));
                }(t, 0, r, e, i), i.push(t[r]), i
              }(t = r ? t : function (t, e) {
                for (var r, i = t[0], n = [i], o = 1, s = t.length; o < s; o++) Jt(r = t[o], i) > e && (n.push(r), i = r);
                return i !== r && n.push(r), n
              }(t, i), i)
            }
  
            function te(t, e, r) {
              return $t(t.map(function (t) {
                return {
                  x: t[0],
                  y: t[1],
                  z: t[2]
                }
              }), e, r).map(function (t) {
                return t.z ? [t.x, t.y, t.z] : [t.x, t.y]
              })
            }
  
            function ee(t, e, r) {
              return t.map(function (t) {
                var i = t.map(function (t) {
                  return {
                    x: t[0],
                    y: t[1]
                  }
                });
                if (i.length < 4) throw new Error("invalid polygon");
                for (var n = $t(i, e, r).map(function (t) {
                    return [t.x, t.y]
                  }); ! function (t) {
                    return !(t.length < 3 || 3 === t.length && t[2][0] === t[0][0] && t[2][1] === t[0][1])
                  }(n);) n = $t(i, e -= .01 * e, r).map(function (t) {
                  return [t.x, t.y]
                });
                return n[n.length - 1][0] === n[0][0] && n[n.length - 1][1] === n[0][1] || n.push(n[0]), n
              })
            }
  
            function re(t, e) {
              if (!L(e = e || {})) throw new Error("options is invalid");
              var r = e.resolution || 1e4,
                i = e.sharpness || .85;
              if (!t) throw new Error("line is required");
              if (!E(r)) throw new Error("resolution must be an number");
              if (!E(i)) throw new Error("sharpness must be an number");
              for (var n = [], o = new as({
                  points: H(t).coordinates.map(function (t) {
                    return {
                      x: t[0],
                      y: t[1]
                    }
                  }),
                  duration: r,
                  sharpness: i
                }), s = 0; s < o.duration; s += 10) {
                var u = o.pos(s);
                Math.floor(s / 100) % 2 == 0 && n.push([u.x, u.y]);
              }
              return a(n, t.properties)
            }
  
            function ie(t) {
              S(t);
              var e = Number(t[0]),
                r = Number(t[1]),
                i = Number(t[2]),
                n = Number(t[3]);
              if (6 === t.length) throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");
              var s = [e, r];
              return o([
                [s, [i, r],
                  [i, n],
                  [e, n], s
                ]
              ])
            }
  
            function ne(t) {
              return ie(q(t))
            }
  
            function oe(t) {
              var e = t[0],
                r = t[1],
                i = t[2],
                n = t[3];
              if (At(t.slice(0, 2), [i, r]) >= At(t.slice(0, 2), [e, n])) {
                var o = (r + n) / 2;
                return [e, o - (i - e) / 2, i, o + (i - e) / 2]
              }
              var s = (e + i) / 2;
              return [s - (n - r) / 2, r, s + (n - r) / 2, n]
            }
  
            function se(t, e, r, n) {
              if (!L(n = n || {})) throw new Error("options is invalid");
              var o = n.units,
                s = n.properties,
                a = j(t),
                u = x(a[0]),
                c = x(a[1]),
                h = x(r),
                l = _(e, o),
                p = Math.asin(Math.sin(c) * Math.cos(l) + Math.cos(c) * Math.sin(l) * Math.cos(h));
              return i([v(u + Math.atan2(Math.sin(h) * Math.sin(l) * Math.cos(c), Math.cos(l) - Math.sin(c) * Math.sin(p))), v(p)], s)
            }
  
            function ae(t, e, r) {
              var i = (r = r || {}).steps || 64,
                n = r.properties;
              if (!t) throw new Error("center is required");
              if (!e) throw new Error("radius is required");
              if ("object" != typeof r) throw new Error("options must be an object");
              if ("number" != typeof i) throw new Error("steps must be a number");
              i = i || 64, n = n || t.properties || {};
              for (var s = [], a = 0; a < i; a++) s.push(se(t, e, -360 * a / i, r).geometry.coordinates);
              return s.push(s[0]), o([s], n)
            }
  
            function ue(t, e, r) {
              if (!L(r = r || {})) throw new Error("options is invalid");
              if (!0 === r.final) return function (t, e) {
                var r = ue(e, t);
                return (r + 180) % 360
              }(t, e);
              var i = j(t),
                n = j(e),
                o = x(i[0]),
                s = x(n[0]),
                a = x(i[1]),
                u = x(n[1]),
                c = Math.sin(s - o) * Math.cos(u),
                h = Math.cos(a) * Math.sin(u) - Math.sin(a) * Math.cos(u) * Math.cos(s - o);
              return v(Math.atan2(c, h))
            }
  
            function ce(t, e) {
              if (!L(e = e || {})) throw new Error("options is invalid");
              var r = e.properties;
              if (!t) throw new Error("geojson is required");
              var n = q(t);
              return i([(n[0] + n[2]) / 2, (n[1] + n[3]) / 2], r)
            }
  
            function he(t, e) {
              var r = 0,
                n = 0,
                o = 0;
              return I(t, function (t) {
                r += t[0], n += t[1], o++;
              }, !0), i([r / o, n / o], e)
            }
  
            function le(t) {
              var e = [];
              return "FeatureCollection" === t.type ? D(t, function (t) {
                I(t, function (r) {
                  e.push(i(r, t.properties));
                });
              }) : I(t, function (r) {
                e.push(i(r, t.properties));
              }), c(e)
            }
  
            function pe(t, e, r) {
              r = r || 2;
              var i, n, o, s, a, u, c, h = e && e.length,
                l = h ? e[0] * r : t.length,
                p = fe(t, 0, l, r, !0),
                f = [];
              if (!p) return f;
              if (h && (p = function (t, e, r, i) {
                  var n, o, s, a = [];
                  for (n = 0, o = e.length; n < o; n++)(s = fe(t, e[n] * i, n < o - 1 ? e[n + 1] * i : t.length, i, !1)) === s.next && (s.steiner = !0), a.push(function (t) {
                    var e = t,
                      r = t;
                    do {
                      e.x < r.x && (r = e), e = e.next;
                    } while (e !== t);
                    return r
                  }(s));
                  for (a.sort(ge), n = 0; n < a.length; n++) ! function (t, e) {
                    if (e = function (t, e) {
                        var r, i = e,
                          n = t.x,
                          o = t.y,
                          s = -1 / 0;
                        do {
                          if (o <= i.y && o >= i.next.y && i.next.y !== i.y) {
                            var a = i.x + (o - i.y) * (i.next.x - i.x) / (i.next.y - i.y);
                            if (a <= n && a > s) {
                              if (s = a, a === n) {
                                if (o === i.y) return i;
                                if (o === i.next.y) return i.next
                              }
                              r = i.x < i.next.x ? i : i.next;
                            }
                          }
                          i = i.next;
                        } while (i !== e);
                        if (!r) return null;
                        if (n === s) return r.prev;
                        var u, c = r,
                          h = r.x,
                          l = r.y,
                          p = 1 / 0;
                        for (i = r.next; i !== c;) n >= i.x && i.x >= h && n !== i.x && ye(o < l ? n : s, o, h, l, o < l ? s : n, o, i.x, i.y) && ((u = Math.abs(o - i.y) / (n - i.x)) < p || u === p && i.x > r.x) && we(i, t) && (r = i, p = u), i = i.next;
                        return r
                      }(t, e)) {
                      var r = be(e, t);
                      de(r, r.next);
                    }
                  }(a[n], r), r = de(r, r.next);
                  return r
                }(t, e, p, r)), t.length > 80 * r) {
                i = o = t[0], n = s = t[1];
                for (var d = r; d < l; d += r)(a = t[d]) < i && (i = a), (u = t[d + 1]) < n && (n = u), a > o && (o = a), u > s && (s = u);
                c = 0 !== (c = Math.max(o - i, s - n)) ? 1 / c : 0;
              }
              return function t(e, r, i, n, o, s, a) {
                if (e) {
                  !a && s && function (t, e, r, i) {
                    var n = t;
                    do {
                      null === n.z && (n.z = _e(n.x, n.y, e, r, i)), n.prevZ = n.prev, n.nextZ = n.next, n = n.next;
                    } while (n !== t);
                    n.prevZ.nextZ = null, n.prevZ = null,
                      function (t) {
                        var e, r, i, n, o, s, a, u, c = 1;
                        do {
                          for (r = t, t = null, o = null, s = 0; r;) {
                            for (s++, i = r, a = 0, e = 0; e < c && (a++, i = i.nextZ); e++);
                            for (u = c; a > 0 || u > 0 && i;) 0 !== a && (0 === u || !i || r.z <= i.z) ? (n = r, r = r.nextZ, a--) : (n = i, i = i.nextZ, u--), o ? o.nextZ = n : t = n, n.prevZ = o, o = n;
                            r = i;
                          }
                          o.nextZ = null, c *= 2;
                        } while (s > 1)
                      }(n);
                  }(e, n, o, s);
                  for (var u, c, h = e; e.prev !== e.next;)
                    if (u = e.prev, c = e.next, s ? function (t, e, r, i) {
                        var n = t.prev,
                          o = t,
                          s = t.next;
                        if (me(n, o, s) >= 0) return !1;
                        for (var a = n.x < o.x ? n.x < s.x ? n.x : s.x : o.x < s.x ? o.x : s.x, u = n.y < o.y ? n.y < s.y ? n.y : s.y : o.y < s.y ? o.y : s.y, c = n.x > o.x ? n.x > s.x ? n.x : s.x : o.x > s.x ? o.x : s.x, h = n.y > o.y ? n.y > s.y ? n.y : s.y : o.y > s.y ? o.y : s.y, l = _e(a, u, e, r, i), p = _e(c, h, e, r, i), f = t.nextZ; f && f.z <= p;) {
                          if (f !== t.prev && f !== t.next && ye(n.x, n.y, o.x, o.y, s.x, s.y, f.x, f.y) && me(f.prev, f, f.next) >= 0) return !1;
                          f = f.nextZ;
                        }
                        for (f = t.prevZ; f && f.z >= l;) {
                          if (f !== t.prev && f !== t.next && ye(n.x, n.y, o.x, o.y, s.x, s.y, f.x, f.y) && me(f.prev, f, f.next) >= 0) return !1;
                          f = f.prevZ;
                        }
                        return !0
                      }(e, n, o, s) : function (t) {
                        var e = t.prev,
                          r = t,
                          i = t.next;
                        if (me(e, r, i) >= 0) return !1;
                        for (var n = t.next.next; n !== t.prev;) {
                          if (ye(e.x, e.y, r.x, r.y, i.x, i.y, n.x, n.y) && me(n.prev, n, n.next) >= 0) return !1;
                          n = n.next;
                        }
                        return !0
                      }(e)) r.push(u.i / i), r.push(e.i / i), r.push(c.i / i), Le(e), e = c.next, h = c.next;
                    else if ((e = c) === h) {
                    a ? 1 === a ? t(e = function (t, e, r) {
                      var i = t;
                      do {
                        var n = i.prev,
                          o = i.next.next;
                        !ve(n, o) && xe(n, i, i.next, o) && we(n, o) && we(o, n) && (e.push(n.i / r), e.push(i.i / r), e.push(o.i / r), Le(i), Le(i.next), i = t = o), i = i.next;
                      } while (i !== t);
                      return i
                    }(e, r, i), r, i, n, o, s, 2) : 2 === a && function (e, r, i, n, o, s) {
                      var a = e;
                      do {
                        for (var u = a.next.next; u !== a.prev;) {
                          if (a.i !== u.i && function (t, e) {
                              return t.next.i !== e.i && t.prev.i !== e.i && ! function (t, e) {
                                var r = t;
                                do {
                                  if (r.i !== t.i && r.next.i !== t.i && r.i !== e.i && r.next.i !== e.i && xe(r, r.next, t, e)) return !0;
                                  r = r.next;
                                } while (r !== t);
                                return !1
                              }(t, e) && we(t, e) && we(e, t) && function (t, e) {
                                var r = t,
                                  i = !1,
                                  n = (t.x + e.x) / 2,
                                  o = (t.y + e.y) / 2;
                                do {
                                  r.y > o != r.next.y > o && r.next.y !== r.y && n < (r.next.x - r.x) * (o - r.y) / (r.next.y - r.y) + r.x && (i = !i), r = r.next;
                                } while (r !== t);
                                return i
                              }(t, e)
                            }(a, u)) {
                            var c = be(a, u);
                            return a = de(a, a.next), c = de(c, c.next), t(a, r, i, n, o, s), void t(c, r, i, n, o, s)
                          }
                          u = u.next;
                        }
                        a = a.next;
                      } while (a !== e)
                    }(e, r, i, n, o, s) : t(de(e), r, i, n, o, s, 1);
                    break
                  }
                }
              }(p, f, r, i, n, c), f
            }
  
            function fe(t, e, r, i, n) {
              var o, s;
              if (n === Ce(t, e, r, i) > 0)
                for (o = e; o < r; o += i) s = Ee(o, t[o], t[o + 1], s);
              else
                for (o = r - i; o >= e; o -= i) s = Ee(o, t[o], t[o + 1], s);
              return s && ve(s, s.next) && (Le(s), s = s.next), s
            }
  
            function de(t, e) {
              if (!t) return t;
              e || (e = t);
              var r, i = t;
              do {
                if (r = !1, i.steiner || !ve(i, i.next) && 0 !== me(i.prev, i, i.next)) i = i.next;
                else {
                  if (Le(i), (i = e = i.prev) === i.next) break;
                  r = !0;
                }
              } while (r || i !== e);
              return e
            }
  
            function ge(t, e) {
              return t.x - e.x
            }
  
            function _e(t, e, r, i, n) {
              return (t = 1431655765 & ((t = 858993459 & ((t = 252645135 & ((t = 16711935 & ((t = 32767 * (t - r) * n) | t << 8)) | t << 4)) | t << 2)) | t << 1)) | (e = 1431655765 & ((e = 858993459 & ((e = 252645135 & ((e = 16711935 & ((e = 32767 * (e - i) * n) | e << 8)) | e << 4)) | e << 2)) | e << 1)) << 1
            }
  
            function ye(t, e, r, i, n, o, s, a) {
              return (n - s) * (e - a) - (t - s) * (o - a) >= 0 && (t - s) * (i - a) - (r - s) * (e - a) >= 0 && (r - s) * (o - a) - (n - s) * (i - a) >= 0
            }
  
            function me(t, e, r) {
              return (e.y - t.y) * (r.x - e.x) - (e.x - t.x) * (r.y - e.y)
            }
  
            function ve(t, e) {
              return t.x === e.x && t.y === e.y
            }
  
            function xe(t, e, r, i) {
              return !!(ve(t, e) && ve(r, i) || ve(t, i) && ve(r, e)) || me(t, e, r) > 0 != me(t, e, i) > 0 && me(r, i, t) > 0 != me(r, i, e) > 0
            }
  
            function we(t, e) {
              return me(t.prev, t, t.next) < 0 ? me(t, e, t.next) >= 0 && me(t, t.prev, e) >= 0 : me(t, e, t.prev) < 0 || me(t, t.next, e) < 0
            }
  
            function be(t, e) {
              var r = new Se(t.i, t.x, t.y),
                i = new Se(e.i, e.x, e.y),
                n = t.next,
                o = e.prev;
              return t.next = e, e.prev = t, r.next = n, n.prev = r, i.next = r, r.prev = i, o.next = i, i.prev = o, i
            }
  
            function Ee(t, e, r, i) {
              var n = new Se(t, e, r);
              return i ? (n.next = i.next, n.prev = i, i.next.prev = n, i.next = n) : (n.prev = n, n.next = n), n
            }
  
            function Le(t) {
              t.next.prev = t.prev, t.prev.next = t.next, t.prevZ && (t.prevZ.nextZ = t.nextZ), t.nextZ && (t.nextZ.prevZ = t.prevZ);
            }
  
            function Se(t, e, r) {
              this.i = t, this.x = e, this.y = r, this.prev = null, this.next = null, this.z = null, this.prevZ = null, this.nextZ = null, this.steiner = !1;
            }
  
            function Ce(t, e, r, i) {
              for (var n = 0, o = e, s = r - i; o < r; o += i) n += (t[s] - t[o]) * (t[o + 1] + t[s + 1]), s = o;
              return n
            }
  
            function Ie(t) {
              var e = function (t) {
                  for (var e = t[0][0].length, r = {
                      vertices: [],
                      holes: [],
                      dimensions: e
                    }, i = 0, n = 0; n < t.length; n++) {
                    for (var o = 0; o < t[n].length; o++)
                      for (var s = 0; s < e; s++) r.vertices.push(t[n][o][s]);
                    n > 0 && (i += t[n - 1].length, r.holes.push(i));
                  }
                  return r
                }(t),
                r = us(e.vertices, e.holes, 2),
                i = [],
                n = [];
              r.forEach(function (t, i) {
                var o = r[i];
                n.push([e.vertices[2 * o], e.vertices[2 * o + 1]]);
              });
              for (var s = 0; s < n.length; s += 3) {
                var a = n.slice(s, s + 3);
                a.push(n[s]), i.push(o([a]));
              }
              return i
            }
  
            function Me(t, e) {
              if (!t) throw new Error("targetPoint is required");
              if (!e) throw new Error("points is required");
              var r, i = 1 / 0;
              return D(e, function (e, n) {
                var o = At(t, e);
                o < i && ((r = Ft(e)).properties.featureIndex = n, r.properties.distanceToPoint = o, i = o);
              }), r
            }
  
            function Te(t, e, r, i, n) {
              ! function t(e, r, i, n, o) {
                for (; n > i;) {
                  if (n - i > 600) {
                    var s = n - i + 1,
                      a = r - i + 1,
                      u = Math.log(s),
                      c = .5 * Math.exp(2 * u / 3),
                      h = .5 * Math.sqrt(u * c * (s - c) / s) * (a - s / 2 < 0 ? -1 : 1);
                    t(e, r, Math.max(i, Math.floor(r - a * c / s + h)), Math.min(n, Math.floor(r + (s - a) * c / s + h)), o);
                  }
                  var l = e[r],
                    p = i,
                    f = n;
                  for (Pe(e, i, r), o(e[n], l) > 0 && Pe(e, i, n); p < f;) {
                    for (Pe(e, p, f), p++, f--; o(e[p], l) < 0;) p++;
                    for (; o(e[f], l) > 0;) f--;
                  }
                  0 === o(e[i], l) ? Pe(e, i, f) : Pe(e, ++f, n), f <= r && (i = f + 1), r <= f && (n = f - 1);
                }
              }(t, e, r || 0, i || t.length - 1, n || function (t, e) {
                return t < e ? -1 : t > e ? 1 : 0
              });
            }
  
            function Pe(t, e, r) {
              var i = t[e];
              t[e] = t[r], t[r] = i;
            }
  
            function De(t, e) {
              if (!(this instanceof De)) return new De(t, e);
              this._maxEntries = Math.max(4, t || 9), this._minEntries = Math.max(2, Math.ceil(.4 * this._maxEntries)), e && this._initFormat(e), this.clear();
            }
  
            function Ne(t, e) {
              Re(t, 0, t.children.length, e, t);
            }
  
            function Re(t, e, r, i, n) {
              n || (n = Ue(null)), n.minX = 1 / 0, n.minY = 1 / 0, n.maxX = -1 / 0, n.maxY = -1 / 0;
              for (var o, s = e; s < r; s++) o = t.children[s], Oe(n, t.leaf ? i(o) : o);
              return n
            }
  
            function Oe(t, e) {
              return t.minX = Math.min(t.minX, e.minX), t.minY = Math.min(t.minY, e.minY), t.maxX = Math.max(t.maxX, e.maxX), t.maxY = Math.max(t.maxY, e.maxY), t
            }
  
            function Ae(t, e) {
              return t.minX - e.minX
            }
  
            function Fe(t, e) {
              return t.minY - e.minY
            }
  
            function ke(t) {
              return (t.maxX - t.minX) * (t.maxY - t.minY)
            }
  
            function Be(t) {
              return t.maxX - t.minX + (t.maxY - t.minY)
            }
  
            function ze(t, e) {
              return t.minX <= e.minX && t.minY <= e.minY && e.maxX <= t.maxX && e.maxY <= t.maxY
            }
  
            function Ve(t, e) {
              return e.minX <= t.maxX && e.minY <= t.maxY && e.maxX >= t.minX && e.maxY >= t.minY
            }
  
            function Ue(t) {
              return {
                children: t,
                height: 1,
                leaf: !0,
                minX: 1 / 0,
                minY: 1 / 0,
                maxX: -1 / 0,
                maxY: -1 / 0
              }
            }
  
            function qe(t, e, r, i, n) {
              for (var o, s = [e, r]; s.length;)(r = s.pop()) - (e = s.pop()) <= i || (Te(t, o = e + Math.ceil((r - e) / i / 2) * i, e, r, n), s.push(e, o, o, r));
            }
  
            function je(t) {
              var e = De(t);
              return e.insert = function (t) {
                if (Array.isArray(t)) {
                  var e = t;
                  (t = Ge(e)).bbox = e;
                } else t.bbox = t.bbox ? t.bbox : Xe(t);
                return De.prototype.insert.call(this, t)
              }, e.load = function (t) {
                var e = [];
                return Array.isArray(t) ? t.forEach(function (t) {
                  var r = Ge(t);
                  r.bbox = t, e.push(r);
                }) : D(t, function (t) {
                  t.bbox = t.bbox ? t.bbox : Xe(t), e.push(t);
                }), De.prototype.load.call(this, e)
              }, e.remove = function (t) {
                if (Array.isArray(t)) {
                  var e = t;
                  (t = Ge(e)).bbox = e;
                }
                return De.prototype.remove.call(this, t)
              }, e.clear = function () {
                return De.prototype.clear.call(this)
              }, e.search = function (t) {
                return {
                  type: "FeatureCollection",
                  features: De.prototype.search.call(this, this.toBBox(t))
                }
              }, e.collides = function (t) {
                return De.prototype.collides.call(this, this.toBBox(t))
              }, e.all = function () {
                return {
                  type: "FeatureCollection",
                  features: De.prototype.all.call(this)
                }
              }, e.toJSON = function () {
                return De.prototype.toJSON.call(this)
              }, e.fromJSON = function (t) {
                return De.prototype.fromJSON.call(this, t)
              }, e.toBBox = function (t) {
                var e;
                return {
                  minX: (e = t.bbox ? t.bbox : Array.isArray(t) && 4 === t.length ? t : Xe(t))[0],
                  minY: e[1],
                  maxX: e[2],
                  maxY: e[3]
                }
              }, e
            }
  
            function Ge(t) {
              var e = [t[0], t[1]],
                r = [t[0], t[3]],
                i = [t[2], t[3]];
              return {
                type: "Feature",
                bbox: t,
                properties: {},
                geometry: {
                  type: "Polygon",
                  coordinates: [
                    [e, [t[2], t[1]], i, r, e]
                  ]
                }
              }
            }
  
            function Xe(t) {
              var e = [1 / 0, 1 / 0, -1 / 0, -1 / 0];
              return I(t, function (t) {
                e[0] > t[0] && (e[0] = t[0]), e[1] > t[1] && (e[1] = t[1]), e[2] < t[0] && (e[2] = t[0]), e[3] < t[1] && (e[3] = t[1]);
              }), e
            }
  
            function Ze(t) {
              if (!t) throw new Error("geojson is required");
              var e = [];
              return F(t, function (t) {
                ! function (t, e) {
                  var r = [],
                    i = t.geometry;
                  switch (i.type) {
                    case "Polygon":
                      r = G(i);
                      break;
                    case "LineString":
                      r = [G(i)];
                  }
                  r.forEach(function (r) {
                    (function (t, e) {
                      var r = [];
                      return t.reduce(function (t, i) {
                        var n = a([t, i], e);
                        return n.bbox = function (t, e) {
                          var r = t[0],
                            i = t[1],
                            n = e[0],
                            o = e[1];
                          return [r < n ? r : n, i < o ? i : o, r > n ? r : n, i > o ? i : o]
                        }(t, i), r.push(n), i
                      }), r
                    })(r, t.properties).forEach(function (t) {
                      t.id = e.length, e.push(t);
                    });
                  });
                }(t, e);
              }), c(e)
            }
  
            function Ye(t, r) {
              var i = {},
                n = [];
              if ("LineString" === t.type && (t = e(t)), "LineString" === r.type && (r = e(r)), "Feature" === t.type && "Feature" === r.type && "LineString" === t.geometry.type && "LineString" === r.geometry.type && 2 === t.geometry.coordinates.length && 2 === r.geometry.coordinates.length) {
                var o = We(t, r);
                return o && n.push(o), c(n)
              }
              var s = je();
              return s.load(Ze(r)), D(Ze(t), function (t) {
                D(s.search(t), function (e) {
                  var r = We(t, e);
                  if (r) {
                    var o = G(r).join(",");
                    i[o] || (i[o] = !0, n.push(r));
                  }
                });
              }), c(n)
            }
  
            function We(t, e) {
              var r = G(t),
                n = G(e);
              if (2 !== r.length) throw new Error("<intersects> line1 must only contain 2 coordinates");
              if (2 !== n.length) throw new Error("<intersects> line2 must only contain 2 coordinates");
              var o = r[0][0],
                s = r[0][1],
                a = r[1][0],
                u = r[1][1],
                c = n[0][0],
                h = n[0][1],
                l = n[1][0],
                p = n[1][1],
                f = (p - h) * (a - o) - (l - c) * (u - s);
              if (0 === f) return null;
              var d = ((l - c) * (s - h) - (p - h) * (o - c)) / f,
                g = ((a - o) * (s - h) - (u - s) * (o - c)) / f;
              return d >= 0 && d <= 1 && g >= 0 && g <= 1 ? i([o + d * (a - o), s + d * (u - s)]) : null
            }
  
            function He(t, e, r) {
              if (!L(r = r || {})) throw new Error("options is invalid");
              var n = t.geometry ? t.geometry.type : t.type;
              if ("LineString" !== n && "MultiLineString" !== n) throw new Error("lines must be LineString or MultiLineString");
              var o = i([1 / 0, 1 / 0], {
                  dist: 1 / 0
                }),
                s = 0;
              return F(t, function (t) {
                for (var n = G(t), u = 0; u < n.length - 1; u++) {
                  var c = i(n[u]);
                  c.properties.dist = At(e, c, r);
                  var h = i(n[u + 1]);
                  h.properties.dist = At(e, h, r);
                  var l = At(c, h, r),
                    p = Math.max(c.properties.dist, h.properties.dist),
                    f = ue(c, h),
                    d = se(e, p, f + 90, r),
                    g = se(e, p, f - 90, r),
                    _ = Ye(a([d.geometry.coordinates, g.geometry.coordinates]), a([c.geometry.coordinates, h.geometry.coordinates])),
                    y = null;
                  _.features.length > 0 && ((y = _.features[0]).properties.dist = At(e, y, r), y.properties.location = s + At(c, y, r)), c.properties.dist < o.properties.dist && ((o = c).properties.index = u, o.properties.location = s), h.properties.dist < o.properties.dist && ((o = h).properties.index = u + 1, o.properties.location = s + l), y && y.properties.dist < o.properties.dist && ((o = y).properties.index = u), s += l;
                }
              }), o
            }
  
            function Ke(t, e, r) {
              if (!L(r = r || {})) throw new Error("options is invalid");
              var i, n = r.final;
              if (!t) throw new Error("start point is required");
              if (!e) throw new Error("end point is required");
              return (i = n ? Je(j(e), j(t)) : Je(j(t), j(e))) > 180 ? -(360 - i) : i
            }
  
            function Je(t, e) {
              var r = x(t[1]),
                i = x(e[1]),
                n = x(e[0] - t[0]);
              n > Math.PI && (n -= 2 * Math.PI), n < -Math.PI && (n += 2 * Math.PI);
              var o = Math.log(Math.tan(i / 2 + Math.PI / 4) / Math.tan(r / 2 + Math.PI / 4));
              return (v(Math.atan2(n, o)) + 360) % 360
            }
  
            function Qe(t, e, r) {
              if (!L(r = r || {})) throw new Error("options is invalid");
              var i = r.units;
              if (!t) throw new Error("from point is required");
              if (!e) throw new Error("to point is required");
              var n = j(t),
                o = j(e);
              return o[0] += o[0] - n[0] > 180 ? -360 : n[0] - o[0] > 180 ? 360 : 0, w(function (t, e, r) {
                var i = r = void 0 === r ? bo : Number(r),
                  n = t[1] * Math.PI / 180,
                  o = e[1] * Math.PI / 180,
                  s = o - n,
                  a = Math.abs(e[0] - t[0]) * Math.PI / 180;
                a > Math.PI && (a -= 2 * Math.PI);
                var u = Math.log(Math.tan(o / 2 + Math.PI / 4) / Math.tan(n / 2 + Math.PI / 4)),
                  c = Math.abs(u) > 1e-11 ? s / u : Math.cos(n);
                return Math.sqrt(s * s + c * c * a * a) * i
              }(n, o), "meters", i)
            }
  
            function $e(t, e) {
              return er(t, "mercator", e)
            }
  
            function tr(t, e) {
              return er(t, "wgs84", e)
            }
  
            function er(t, e, r) {
              if (!L(r = r || {})) throw new Error("options is invalid");
              var i = r.mutate;
              if (!t) throw new Error("geojson is required");
              return Array.isArray(t) && E(t[0]) ? t = "mercator" === e ? rr(t) : ir(t) : (!0 !== i && (t = Ft(t)), I(t, function (t) {
                var r = "mercator" === e ? rr(t) : ir(t);
                t[0] = r[0], t[1] = r[1];
              })), t
            }
  
            function rr(t) {
              var e = Math.PI / 180,
                r = 20037508.342789244,
                i = [6378137 * (Math.abs(t[0]) <= 180 ? t[0] : t[0] - 360 * function (t) {
                  return t < 0 ? -1 : t > 0 ? 1 : 0
                }(t[0])) * e, 6378137 * Math.log(Math.tan(.25 * Math.PI + .5 * t[1] * e))];
              return i[0] > r && (i[0] = r), i[0] < -r && (i[0] = -r), i[1] > r && (i[1] = r), i[1] < -r && (i[1] = -r), i
            }
  
            function ir(t) {
              var e = 180 / Math.PI;
              return [t[0] * e / 6378137, (.5 * Math.PI - 2 * Math.atan(Math.exp(-t[1] / 6378137))) * e]
            }
  
            function nr(t, r, n) {
              if (!L(n = n || {})) throw new Error("options is invalid");
              if (!t) throw new Error("pt is required");
              if (Array.isArray(t) ? t = i(t) : "Point" === t.type ? t = e(t) : Y(t, "Point", "point"), !r) throw new Error("line is required");
              Array.isArray(r) ? r = a(r) : "LineString" === r.type ? r = e(r) : Y(r, "LineString", "line");
              var o = 1 / 0,
                s = t.geometry.coordinates;
              return B(r, function (t) {
                var e = t.geometry.coordinates[0],
                  r = t.geometry.coordinates[1],
                  a = function (t, e, r, n) {
                    var o = n.mercator,
                      s = !0 !== o ? At(e, t, n) : or(e, t, n),
                      a = m(!0 !== o ? ue(e, t) : Ke(e, t)),
                      u = m(!0 !== o ? ue(e, r) : Ke(e, r)),
                      c = Math.abs(a - u);
                    if (c > 90) return s;
                    var h = (u + 180) % 360,
                      l = m(!0 !== o ? ue(r, t) : Ke(r, t)),
                      p = Math.abs(l - h);
                    return p > 180 && (p = Math.abs(p - 360)), p > 90 ? !0 !== o ? At(t, r, n) : or(t, r, n) : !0 !== o ? s * Math.sin(x(c)) : function (t, e, r, n) {
                      var o = 0;
                      (Math.abs(t[0]) >= 180 || Math.abs(e[0]) >= 180 || Math.abs(r[0]) >= 180) && (o = t[0] > 0 || e[0] > 0 || r[0] > 0 ? -180 : 180);
                      var s = i(r),
                        a = tr(function (t, e, r) {
                          var i = t[0],
                            n = t[1],
                            o = e[0] - i,
                            s = e[1] - n,
                            a = ((r[0] - i) * o + (r[1] - n) * s) / (o * o + s * s);
                          return [i + a * o, n + a * s]
                        }($e([t[0] + o, t[1]]), $e([e[0] + o, e[1]]), $e([r[0] + o, r[1]])));
                      return 0 !== o && (a[0] -= o), Qe(s, a, n)
                    }(e, r, t, n)
                  }(s, e, r, n);
                o > a && (o = a);
              }), o
            }
  
            function or(t, e, r) {
              var i = r.units,
                n = 0;
              Math.abs(t[0]) >= 180 && (n = t[0] > 0 ? -180 : 180), Math.abs(e[0]) >= 180 && (n = e[0] > 0 ? -180 : 180);
              var o = $e([t[0] + n, t[1]]),
                s = $e([e[0] + n, e[1]]),
                a = function (t) {
                  return t * t
                },
                u = a(o[0] - s[0]) + a(o[1] - s[1]);
              return w(Math.sqrt(u), "meters", i)
            }
  
            function sr(t) {
              for (var r = function (t) {
                  return "FeatureCollection" !== t.type ? "Feature" !== t.type ? c([e(t)]) : c([t]) : t
                }(t), n = ce(r), o = !1, s = 0; !o && s < r.features.length;) {
                var a, u = r.features[s].geometry,
                  h = !1;
                if ("Point" === u.type) n.geometry.coordinates[0] === u.coordinates[0] && n.geometry.coordinates[1] === u.coordinates[1] && (o = !0);
                else if ("MultiPoint" === u.type) {
                  var l = !1;
                  for (a = 0; !l && a < u.coordinates.length;) n.geometry.coordinates[0] === u.coordinates[a][0] && n.geometry.coordinates[1] === u.coordinates[a][1] && (o = !0, l = !0), a++;
                } else if ("LineString" === u.type)
                  for (a = 0; !h && a < u.coordinates.length - 1;) ar(n.geometry.coordinates[0], n.geometry.coordinates[1], u.coordinates[a][0], u.coordinates[a][1], u.coordinates[a + 1][0], u.coordinates[a + 1][1]) && (h = !0, o = !0), a++;
                else if ("MultiLineString" === u.type)
                  for (var p = 0; p < u.coordinates.length;) {
                    h = !1, a = 0;
                    for (var f = u.coordinates[p]; !h && a < f.length - 1;) ar(n.geometry.coordinates[0], n.geometry.coordinates[1], f[a][0], f[a][1], f[a + 1][0], f[a + 1][1]) && (h = !0, o = !0), a++;
                    p++;
                  } else "Polygon" !== u.type && "MultiPolygon" !== u.type || Mt(n, u) && (o = !0);
                s++;
              }
              if (o) return n;
              var d = c([]);
              for (s = 0; s < r.features.length; s++) d.features = d.features.concat(le(r.features[s]).features);
              return i(Me(n, d).geometry.coordinates)
            }
  
            function ar(t, e, r, i, n, o) {
              return Math.sqrt((n - r) * (n - r) + (o - i) * (o - i)) === Math.sqrt((t - r) * (t - r) + (e - i) * (e - i)) + Math.sqrt((n - t) * (n - t) + (o - e) * (o - e))
            }
  
            function ur(t) {
              return A(t, function (t, e) {
                return t + function t(e) {
                  var r, i = 0;
                  switch (e.type) {
                    case "Polygon":
                      return cr(e.coordinates);
                    case "MultiPolygon":
                      for (r = 0; r < e.coordinates.length; r++) i += cr(e.coordinates[r]);
                      return i;
                    case "Point":
                    case "MultiPoint":
                    case "LineString":
                    case "MultiLineString":
                      return 0;
                    case "GeometryCollection":
                      for (r = 0; r < e.geometries.length; r++) i += t(e.geometries[r]);
                      return i
                  }
                }(e)
              }, 0)
            }
  
            function cr(t) {
              var e = 0;
              if (t && t.length > 0) {
                e += Math.abs(hr(t[0]));
                for (var r = 1; r < t.length; r++) e -= Math.abs(hr(t[r]));
              }
              return e
            }
  
            function hr(t) {
              var e, r, i, n, o, s, a = 0,
                u = t.length;
              if (u > 2) {
                for (s = 0; s < u; s++) s === u - 2 ? (i = u - 2, n = u - 1, o = 0) : s === u - 1 ? (i = u - 1, n = 0, o = 1) : (i = s, n = s + 1, o = s + 2), e = t[i], r = t[n], a += (lr(t[o][0]) - lr(e[0])) * Math.sin(lr(r[1]));
                a = a * ls * ls / 2;
              }
              return a
            }
  
            function lr(t) {
              return t * Math.PI / 180
            }
  
            function pr(t, e) {
              if (!L(e = e || {})) throw new Error("options is invalid");
              if (!t) throw new Error("geojson is required");
              return z(t, function (t, r) {
                var i = r.geometry.coordinates;
                return t + At(i[0], i[1], e)
              }, 0)
            }
  
            function fr(t, e, r, i) {
              if (!L(i = i || {})) throw new Error("options is invalid");
              var n, o = [];
              if ("Feature" === t.type) n = t.geometry.coordinates;
              else {
                if ("LineString" !== t.type) throw new Error("input must be a LineString Feature or Geometry");
                n = t.coordinates;
              }
              for (var s, u, c, h = 0, l = 0; l < n.length && !(e >= h && l === n.length - 1); l++) {
                if (h > e && 0 === o.length) {
                  if (!(s = e - h)) return o.push(n[l]), a(o);
                  u = ue(n[l], n[l - 1]) - 180, c = se(n[l], s, u, i), o.push(c.geometry.coordinates);
                }
                if (h >= r) return (s = r - h) ? (u = ue(n[l], n[l - 1]) - 180, c = se(n[l], s, u, i), o.push(c.geometry.coordinates), a(o)) : (o.push(n[l]), a(o));
                if (h >= e && o.push(n[l]), l === n.length - 1) return a(o);
                h += At(n[l], n[l + 1], i);
              }
              return a(n[n.length - 1])
            }
  
            function dr(t, e, r) {
              var i = (r = r || {}).ignoreEndVertices;
              if (!L(r)) throw new Error("invalid options");
              if (!t) throw new Error("pt is required");
              if (!e) throw new Error("line is required");
              for (var n = j(t), o = G(e), s = 0; s < o.length - 1; s++) {
                var a = !1;
                if (i && (0 === s && (a = "start"), s === o.length - 2 && (a = "end"), 0 === s && s + 1 === o.length - 1 && (a = "both")), function (t, e, r, i) {
                    var n = r[0],
                      o = r[1],
                      s = t[0],
                      a = t[1],
                      u = e[0],
                      c = e[1],
                      h = u - s,
                      l = c - a;
                    return (r[0] - s) * l - (r[1] - a) * h == 0 && (i ? "start" === i ? Math.abs(h) >= Math.abs(l) ? h > 0 ? s < n && n <= u : u <= n && n < s : l > 0 ? a < o && o <= c : c <= o && o < a : "end" === i ? Math.abs(h) >= Math.abs(l) ? h > 0 ? s <= n && n < u : u < n && n <= s : l > 0 ? a <= o && o < c : c < o && o <= a : "both" === i ? Math.abs(h) >= Math.abs(l) ? h > 0 ? s < n && n < u : u < n && n < s : l > 0 ? a < o && o < c : c < o && o < a : void 0 : Math.abs(h) >= Math.abs(l) ? h > 0 ? s <= n && n <= u : u <= n && n <= s : l > 0 ? a <= o && o <= c : c <= o && o <= a)
                  }(o[s], o[s + 1], n, a)) return !0
              }
              return !1
            }
  
            function gr(t, e) {
              var r = J(t),
                i = J(e),
                n = H(t),
                o = H(e);
              switch (r) {
                case "Point":
                  switch (i) {
                    case "MultiPoint":
                      return function (t, e) {
                        var r, i = !1;
                        for (r = 0; r < e.coordinates.length; r++)
                          if (yr(e.coordinates[r], t.coordinates)) {
                            i = !0;
                            break
                          } return i
                      }(n, o);
                    case "LineString":
                      return dr(n, o, {
                        ignoreEndVertices: !0
                      });
                    case "Polygon":
                      return Mt(n, o, {
                        ignoreBoundary: !0
                      });
                    default:
                      throw new Error("feature2 " + i + " geometry not supported")
                  }
                  case "MultiPoint":
                    switch (i) {
                      case "MultiPoint":
                        return function (t, e) {
                          for (var r = 0; r < t.coordinates.length; r++) {
                            for (var i = !1, n = 0; n < e.coordinates.length; n++) yr(t.coordinates[r], e.coordinates[n]) && (i = !0);
                            if (!i) return !1
                          }
                          return !0
                        }(n, o);
                      case "LineString":
                        return function (t, e) {
                          for (var r = !1, i = 0; i < t.coordinates.length; i++) {
                            if (!dr(t.coordinates[i], e)) return !1;
                            r || (r = dr(t.coordinates[i], e, {
                              ignoreEndVertices: !0
                            }));
                          }
                          return r
                        }(n, o);
                      case "Polygon":
                        return function (t, e) {
                          for (var r = !0, i = 0; i < t.coordinates.length; i++) {
                            var n = Mt(t.coordinates[1], e);
                            if (!n) {
                              r = !1;
                              break
                            }
                            n = Mt(t.coordinates[1], e, {
                              ignoreBoundary: !0
                            });
                          }
                          return r && n
                        }(n, o);
                      default:
                        throw new Error("feature2 " + i + " geometry not supported")
                    }
                    case "LineString":
                      switch (i) {
                        case "LineString":
                          return function (t, e) {
                            for (var r = 0; r < t.coordinates.length; r++)
                              if (!dr(t.coordinates[r], e)) return !1;
                            return !0
                          }(n, o);
                        case "Polygon":
                          return function (t, e) {
                            if (!_r(q(e), q(t))) return !1;
                            for (var r = !1, i = 0; i < t.coordinates.length - 1; i++) {
                              if (!Mt(t.coordinates[i], e)) return !1;
                              r || (r = Mt(t.coordinates[i], e, {
                                ignoreBoundary: !0
                              })), r || (r = Mt(function (t, e) {
                                return [(t[0] + e[0]) / 2, (t[1] + e[1]) / 2]
                              }(t.coordinates[i], t.coordinates[i + 1]), e, {
                                ignoreBoundary: !0
                              }));
                            }
                            return r
                          }(n, o);
                        default:
                          throw new Error("feature2 " + i + " geometry not supported")
                      }
                      case "Polygon":
                        switch (i) {
                          case "Polygon":
                            return function (t, e) {
                              var r = q(t);
                              if (!_r(q(e), r)) return !1;
                              for (var i = 0; i < t.coordinates[0].length; i++)
                                if (!Mt(t.coordinates[0][i], e)) return !1;
                              return !0
                            }(n, o);
                          default:
                            throw new Error("feature2 " + i + " geometry not supported")
                        }
                        default:
                          throw new Error("feature1 " + r + " geometry not supported")
              }
            }
  
            function _r(t, e) {
              return !(t[0] > e[0] || t[2] < e[2] || t[1] > e[1] || t[3] < e[3])
            }
  
            function yr(t, e) {
              return t[0] === e[0] && t[1] === e[1]
            }
  
            function mr(t, e, r) {
              if (!L(r = r || {})) throw new Error("options is invalid");
              var n = r.mask,
                o = r.properties,
                s = [];
              if (null == e) throw new Error("cellSide is required");
              if (!E(e)) throw new Error("cellSide is invalid");
              if (!t) throw new Error("bbox is required");
              if (!Array.isArray(t)) throw new Error("bbox must be array");
              if (4 !== t.length) throw new Error("bbox must contain 4 numbers");
              if (n && -1 === ["Polygon", "MultiPolygon"].indexOf(J(n))) throw new Error("options.mask must be a (Multi)Polygon");
              for (var a = t[0], u = t[1], h = t[2], l = t[3], p = e / At([a, u], [h, u], r) * (h - a), f = e / At([a, u], [a, l], r) * (l - u), d = h - a, g = l - u, _ = Math.floor(d / p), y = (g - Math.floor(g / f) * f) / 2, m = a + (d - _ * p) / 2; m <= h;) {
                for (var v = u + y; v <= l;) {
                  var x = i([m, v], o);
                  n ? gr(x, n) && s.push(x) : s.push(x), v += f;
                }
                m += p;
              }
              return c(s)
            }
  
            function vr(t, e) {
              if (!L(e = e || {})) throw new Error("options is invalid");
              var r = e.precision,
                i = e.coordinates,
                n = e.mutate;
              if (r = null == r || isNaN(r) ? 6 : r, i = null == i || isNaN(i) ? 3 : i, !t) throw new Error("<geojson> is required");
              if ("number" != typeof r) throw new Error("<precision> must be a number");
              if ("number" != typeof i) throw new Error("<coordinates> must be a number");
              !1 !== n && void 0 !== n || (t = JSON.parse(JSON.stringify(t)));
              var o = Math.pow(10, r);
              return I(t, function (t) {
                ! function (t, e, r) {
                  t.length > r && t.splice(r, t.length);
                  for (var i = 0; i < t.length; i++) t[i] = Math.round(t[i] * e) / e;
                }(t, o, i);
              }), t
            }
  
            function xr(t, e) {
              if (!t || !e) return !1;
              if (t.length !== e.length) return !1;
              for (var r = 0, i = t.length; r < i; r++)
                if (t[r] instanceof Array && e[r] instanceof Array) {
                  if (!xr(t[r], e[r])) return !1
                } else if (t[r] !== e[r]) return !1;
              return !0
            }
  
            function wr(t, e) {
              if (void 0 === e && (e = !0), 3 != t.length) throw new Error("This function requires an array of three points [x,y]");
              return (t[1][0] - t[0][0]) * (t[2][1] - t[0][1]) - (t[1][1] - t[0][1]) * (t[2][0] - t[0][0]) >= 0 == e
            }
  
            function br(t, e) {
              if (!t || !e) return !1;
              if (t.length != e.length) return !1;
              for (var r = 0, i = t.length; r < i; r++)
                if (t[r] instanceof Array && e[r] instanceof Array) {
                  if (!br(t[r], e[r])) return !1
                } else if (t[r] != e[r]) return !1;
              return !0
            }
  
            function Er(t, e) {
              var r = [],
                i = je();
              return F(e, function (e) {
                if (r.forEach(function (t, e) {
                    t.id = e;
                  }), r.length) {
                  var n = i.search(e);
                  if (n.features.length) {
                    var o = Sr(e, n);
                    r = r.filter(function (t) {
                      return t.id !== o.id
                    }), i.remove(o), D(Lr(o, e), function (t) {
                      r.push(t), i.insert(t);
                    });
                  }
                } else(r = Lr(t, e).features).forEach(function (t) {
                  t.bbox || (t.bbox = oe(q(t)));
                }), i.load(c(r));
              }), c(r)
            }
  
            function Lr(t, e) {
              var r = [],
                i = G(t)[0],
                n = G(t)[t.geometry.coordinates.length - 1];
              if (Cr(i, j(e)) || Cr(n, j(e))) return c([t]);
              var o = je(),
                s = Ze(t);
              o.load(s);
              var u = o.search(e);
              if (!u.features.length) return c([t]);
              var h = Sr(e, u),
                l = N(s, function (t, i, n) {
                  var o = G(i)[1],
                    s = j(e);
                  return n === h.id ? (t.push(s), r.push(a(t)), Cr(s, o) ? [s] : [s, o]) : (t.push(o), t)
                }, [i]);
              return l.length > 1 && r.push(a(l)), c(r)
            }
  
            function Sr(t, e) {
              if (!e.features.length) throw new Error("lines must contain features");
              if (1 === e.features.length) return e.features[0];
              var r, i = 1 / 0;
              return D(e, function (e) {
                var n = He(e, t).properties.dist;
                n < i && (r = e, i = n);
              }), r
            }
  
            function Cr(t, e) {
              return t[0] === e[0] && t[1] === e[1]
            }
  
            function Ir(t, e, r, i, n) {
              if (!L(n = n || {})) throw new Error("options is invalid");
              var o = n.steps,
                s = n.units;
              if (!t) throw new Error("center is required");
              if (!e) throw new Error("radius is required");
              if (null == r) throw new Error("bearing1 is required");
              if (null == i) throw new Error("bearing2 is required");
              if ("object" != typeof n) throw new Error("options must be an object");
              o = o || 64;
              var u = Mr(r),
                c = Mr(i),
                h = t.properties;
              if (u === c) return a(ae(t, e, n).geometry.coordinates[0], h);
              for (var l = u, p = u < c ? c : c + 360, f = l, d = [], g = 0; f < p;) d.push(se(t, e, f, s).geometry.coordinates), f = l + 360 * ++g / o;
              return f > p && d.push(se(t, e, p, s).geometry.coordinates), a(d, h)
            }
  
            function Mr(t) {
              var e = t % 360;
              return e < 0 && (e += 360), e
            }
  
            function Tr(t, e) {
              if (!L(e = e || {})) throw new Error("options is invalid");
              var r = e.properties,
                i = J(t),
                n = G(t);
              if (r = r || t.properties || {}, !n.length) throw new Error("polygon must contain coordinates");
              switch (i) {
                case "Polygon":
                  return Pr(n, r);
                case "MultiPolygon":
                  var o = [];
                  return n.forEach(function (t) {
                    o.push(Pr(t, r));
                  }), c(o);
                default:
                  throw new Error("geom " + i + " not supported")
              }
            }
  
            function Pr(t, e) {
              return t.length > 1 ? h(t, e) : a(t[0], e)
            }
  
            function Dr(t, e) {
              if (!L(e = e || {})) throw new Error("options is invalid");
              var r = e.properties,
                i = e.autoComplete,
                n = e.orderCoords;
              if (!t) throw new Error("lines is required");
              switch (i = void 0 === i || i, n = void 0 === n || n, J(t)) {
                case "FeatureCollection":
                case "GeometryCollection":
                  var o = [];
                  return (t.features ? t.features : t.geometries).forEach(function (t) {
                    o.push(G(Nr(t, {}, i, n)));
                  }), p(o, r)
              }
              return Nr(t, r, i, n)
            }
  
            function Nr(t, e, r, i) {
              e = e || t.properties || {};
              var n = G(t),
                s = J(t);
              if (!n.length) throw new Error("line must contain coordinates");
              switch (s) {
                case "LineString":
                  return r && (n = Rr(n)), o([n], e);
                case "MultiLineString":
                  var u = [],
                    c = 0;
                  return n.forEach(function (t) {
                    if (r && (t = Rr(t)), i) {
                      var e = function (t) {
                        var e = t[0],
                          r = t[1],
                          i = t[2],
                          n = t[3];
                        return Math.abs(e - i) * Math.abs(r - n)
                      }(q(a(t)));
                      e > c ? (u.unshift(t), c = e) : u.push(t);
                    } else u.push(t);
                  }), o(u, e);
                default:
                  throw new Error("geometry type " + s + " is not supported")
              }
            }
  
            function Rr(t) {
              var e = t[0],
                r = e[0],
                i = e[1],
                n = t[t.length - 1],
                o = n[0],
                s = n[1];
              return r === o && i === s || t.push(e), t
            }
  
            function Or(t, e, r) {
              var i, n, o, s, a, u = t.length,
                c = Fr(t[0], e),
                h = [];
              for (r || (r = []), i = 1; i < u; i++) {
                for (n = t[i - 1], s = a = Fr(o = t[i], e);;) {
                  if (!(c | s)) {
                    h.push(n), s !== a ? (h.push(o), i < u - 1 && (r.push(h), h = [])) : i === u - 1 && h.push(o);
                    break
                  }
                  if (c & s) break;
                  c ? c = Fr(n = Ar(n, o, c, e), e) : s = Fr(o = Ar(n, o, s, e), e);
                }
                c = a;
              }
              return h.length && r.push(h), r
            }
  
            function Ar(t, e, r, i) {
              return 8 & r ? [t[0] + (e[0] - t[0]) * (i[3] - t[1]) / (e[1] - t[1]), i[3]] : 4 & r ? [t[0] + (e[0] - t[0]) * (i[1] - t[1]) / (e[1] - t[1]), i[1]] : 2 & r ? [i[2], t[1] + (e[1] - t[1]) * (i[2] - t[0]) / (e[0] - t[0])] : 1 & r ? [i[0], t[1] + (e[1] - t[1]) * (i[0] - t[0]) / (e[0] - t[0])] : null
            }
  
            function Fr(t, e) {
              var r = 0;
              return t[0] < e[0] ? r |= 1 : t[0] > e[2] && (r |= 2), t[1] < e[1] ? r |= 4 : t[1] > e[3] && (r |= 8), r
            }
  
            function kr(t, e) {
              for (var r = [], i = 0; i < t.length; i++) {
                var n = ws.polygon(t[i], e);
                n.length > 0 && (n[0][0] === n[n.length - 1][0] && n[0][1] === n[n.length - 1][1] || n.push(n[0]), n.length >= 4 && r.push(n));
              }
              return r
            }
  
            function Br(t) {
              return "[object Arguments]" === Object.prototype.toString.call(t)
            }
  
            function zr(t, e, r) {
              return r || (r = {}), t === e || (t instanceof Date && e instanceof Date ? t.getTime() === e.getTime() : !t || !e || "object" != typeof t && "object" != typeof e ? (r.strict, t === e) : function (t, e, r) {
                var i, n;
                if (Vr(t) || Vr(e)) return !1;
                if (t.prototype !== e.prototype) return !1;
                if (Br(t)) return !!Br(e) && zr(t = bs.call(t), e = bs.call(e), r);
                if (Ur(t)) {
                  if (!Ur(e)) return !1;
                  if (t.length !== e.length) return !1;
                  for (i = 0; i < t.length; i++)
                    if (t[i] !== e[i]) return !1;
                  return !0
                }
                try {
                  var o = Object.keys(t),
                    s = Object.keys(e);
                } catch (t) {
                  return !1
                }
                if (o.length !== s.length) return !1;
                for (o.sort(), s.sort(), i = o.length - 1; i >= 0; i--)
                  if (o[i] !== s[i]) return !1;
                for (i = o.length - 1; i >= 0; i--)
                  if (!zr(t[n = o[i]], e[n], r)) return !1;
                return typeof t == typeof e
              }(t, e, r))
            }
  
            function Vr(t) {
              return null == t
            }
  
            function Ur(t) {
              return !(!t || "object" != typeof t || "number" != typeof t.length || "function" != typeof t.copy || "function" != typeof t.slice || t.length > 0 && "number" != typeof t[0])
            }
  
            function qr(t, e, r) {
              if (!L(r = r || {})) throw new Error("options is invalid");
              var i, n = r.tolerance || 0,
                o = [],
                s = je();
              return s.load(Ze(t)), B(e, function (t) {
                var e = !1;
                D(s.search(t), function (r) {
                  if (!1 === e) {
                    var o = G(t).sort(),
                      s = G(r).sort();
                    zr(o, s) ? (e = !0, i = i ? jr(i, t) : t) : (0 === n ? dr(o[0], r) && dr(o[1], r) : He(r, o[0]).properties.dist <= n && He(r, o[1]).properties.dist <= n) ? (e = !0, i = i ? jr(i, t) : t) : (0 === n ? dr(s[0], t) && dr(s[1], t) : He(t, s[0]).properties.dist <= n && He(t, s[1]).properties.dist <= n) && (i = i ? jr(i, r) : r);
                  }
                }), !1 === e && i && (o.push(i), i = void 0);
              }), i && o.push(i), c(o)
            }
  
            function jr(t, e) {
              var r = G(e),
                i = G(t),
                n = i[0],
                o = i[i.length - 1],
                s = t.geometry.coordinates;
              return zr(r[0], n) ? s.unshift(r[1]) : zr(r[0], o) ? s.push(r[1]) : zr(r[1], n) ? s.unshift(r[0]) : zr(r[1], o) && s.push(r[0]), t
            }
  
            function Gr(t) {
              var e = t % 360;
              return e < 0 && (e += 360), e
            }
  
            function Xr(t, e, r, n) {
              if (!L(n = n || {})) throw new Error("options is invalid");
              var o = n.units,
                s = n.properties;
              if (!t) throw new Error("origin is required");
              if (null == e) throw new Error("distance is required");
              if (null == r) throw new Error("bearing is required");
              if (!(e >= 0)) throw new Error("distance must be greater than 0");
              var a = w(e, o, "meters"),
                u = j(t),
                c = function (t, e, r, i) {
                  var n = e / (i = void 0 === i ? bo : Number(i)),
                    o = t[0] * Math.PI / 180,
                    s = x(t[1]),
                    a = x(r),
                    u = n * Math.cos(a),
                    c = s + u;
                  Math.abs(c) > Math.PI / 2 && (c = c > 0 ? Math.PI - c : -Math.PI - c);
                  var h = Math.log(Math.tan(c / 2 + Math.PI / 4) / Math.tan(s / 2 + Math.PI / 4)),
                    l = Math.abs(h) > 1e-11 ? u / h : Math.cos(s);
                  return [(180 * (o + n * Math.sin(a) / l) / Math.PI + 540) % 360 - 180, 180 * c / Math.PI]
                }(u, a, r);
              return c[0] += c[0] - u[0] > 180 ? -360 : u[0] - c[0] > 180 ? 360 : 0, i(c, s)
            }
  
            function Zr(t, e, r, i, n, o) {
              for (var s = 0; s < t.length; s++) {
                var a = t[s],
                  u = t[s + 1];
                s === t.length - 1 && (u = t[0]), i = Yr(a, u, e), r <= 0 && i > 0 ? function (t, e, r) {
                  return Yr(t, a, n) < 0
                }(e) || (n = a) : r > 0 && i <= 0 && (function (t, e, r) {
                  return Yr(t, a, o) > 0
                }(e) || (o = a)), r = i;
              }
              return [n, o]
            }
  
            function Yr(t, e, r) {
              return (e[0] - t[0]) * (r[1] - t[1]) - (r[0] - t[0]) * (e[1] - t[1])
            }
  
            function Wr(t) {
              if (!t) throw new Error("line is required");
              var e = t.geometry ? t.geometry.type : t.type;
              if (!Array.isArray(t) && "LineString" !== e) throw new Error("geometry must be a LineString");
              for (var r, i, n = G(t), o = 0, s = 1; s < n.length;) r = i || n[0], o += ((i = n[s])[0] - r[0]) * (i[1] + r[1]), s++;
              return o > 0
            }
  
            function Hr(t, e) {
              switch ("Feature" === t.type ? t.geometry.type : t.type) {
                case "GeometryCollection":
                  return O(t, function (t) {
                    Hr(t, e);
                  }), t;
                case "LineString":
                  return Kr(G(t), e), t;
                case "Polygon":
                  return Jr(G(t), e), t;
                case "MultiLineString":
                  return G(t).forEach(function (t) {
                    Kr(t, e);
                  }), t;
                case "MultiPolygon":
                  return G(t).forEach(function (t) {
                    Jr(t, e);
                  }), t;
                case "Point":
                case "MultiPoint":
                  return t
              }
            }
  
            function Kr(t, e) {
              Wr(t) === e && t.reverse();
            }
  
            function Jr(t, e) {
              Wr(t[0]) !== e && t[0].reverse();
              for (var r = 1; r < t.length; r++) Wr(t[r]) === e && t[r].reverse();
            }
  
            function Qr(t, e, r, i) {
              i = i || {};
              for (var n = Object.keys(Es), o = 0; o < n.length; o++) {
                var s = n[o],
                  a = i[s];
                a = null != a ? a : Es[s], Ls[s] = a;
              }
              Ls.verbose && console.log("MarchingSquaresJS-isoBands: computing isobands for [" + e + ":" + (e + r) + "]");
              var u, c = function (t, e, r) {
                for (var i = t.length - 1, n = t[0].length - 1, o = {
                    rows: i,
                    cols: n,
                    cells: []
                  }, s = e + Math.abs(r), a = 0; a < i; ++a) {
                  o.cells[a] = [];
                  for (var u = 0; u < n; ++u) {
                    var c = 0,
                      h = t[a + 1][u],
                      l = t[a + 1][u + 1],
                      p = t[a][u + 1],
                      f = t[a][u];
                    if (!(isNaN(h) || isNaN(l) || isNaN(p) || isNaN(f))) {
                      c |= h < e ? 0 : h > s ? 128 : 64, c |= l < e ? 0 : l > s ? 32 : 16, c |= p < e ? 0 : p > s ? 8 : 4;
                      var d = +(c |= f < e ? 0 : f > s ? 2 : 1),
                        g = 0;
                      if (17 === c || 18 === c || 33 === c || 34 === c || 38 === c || 68 === c || 72 === c || 98 === c || 102 === c || 132 === c || 136 === c || 137 === c || 152 === c || 153 === c) {
                        var _ = (h + l + p + f) / 4;
                        g = _ > s ? 2 : _ < e ? 0 : 1, 34 === c ? 1 === g ? c = 35 : 0 === g && (c = 136) : 136 === c ? 1 === g ? (c = 35, g = 4) : 0 === g && (c = 34) : 17 === c ? 1 === g ? (c = 155, g = 4) : 0 === g && (c = 153) : 68 === c ? 1 === g ? (c = 103, g = 4) : 0 === g && (c = 102) : 153 === c ? 1 === g && (c = 155) : 102 === c ? 1 === g && (c = 103) : 152 === c ? g < 2 && (c = 156, g = 1) : 137 === c ? g < 2 && (c = 139, g = 1) : 98 === c ? g < 2 && (c = 99, g = 1) : 38 === c ? g < 2 && (c = 39, g = 1) : 18 === c ? g > 0 ? (c = 156, g = 4) : c = 152 : 33 === c ? g > 0 ? (c = 139, g = 4) : c = 137 : 72 === c ? g > 0 ? (c = 99, g = 4) : c = 98 : 132 === c && (g > 0 ? (c = 39, g = 4) : c = 38);
                      }
                      if (0 != c && 170 != c) {
                        var y, m, v, x, w, b, E, L;
                        y = m = v = x = w = b = E = L = .5;
                        var S = [];
                        1 === c ? (v = 1 - $r(e, p, f), L = 1 - $r(e, h, f), S.push(ha[c])) : 169 === c ? (v = $r(s, f, p), L = $r(s, f, h), S.push(ha[c])) : 4 === c ? (b = 1 - $r(e, l, p), x = $r(e, f, p), S.push(ua[c])) : 166 === c ? (b = $r(s, p, l), x = 1 - $r(s, p, f), S.push(ua[c])) : 16 === c ? (w = $r(e, p, l), m = $r(e, h, l), S.push(aa[c])) : 154 === c ? (w = 1 - $r(s, l, p), m = 1 - $r(s, l, h), S.push(aa[c])) : 64 === c ? (E = $r(e, f, h), y = 1 - $r(e, l, h), S.push(pa[c])) : 106 === c ? (E = 1 - $r(s, h, f), y = $r(s, h, l), S.push(pa[c])) : 168 === c ? (x = $r(s, f, p), v = $r(e, f, p), L = $r(e, f, h), E = $r(s, f, h), S.push(ca[c]), S.push(ha[c])) : 2 === c ? (x = 1 - $r(e, p, f), v = 1 - $r(s, p, f), L = 1 - $r(s, h, f), E = 1 - $r(e, h, f), S.push(ca[c]), S.push(ha[c])) : 162 === c ? (w = $r(s, p, l), b = $r(e, p, l), x = 1 - $r(e, p, f), v = 1 - $r(s, p, f), S.push(ca[c]), S.push(ha[c])) : 8 === c ? (w = 1 - $r(e, l, p), b = 1 - $r(s, l, p), x = $r(s, f, p), v = $r(e, f, p), S.push(aa[c]), S.push(ua[c])) : 138 === c ? (w = 1 - $r(e, l, p), b = 1 - $r(s, l, p), y = 1 - $r(s, l, h), m = 1 - $r(e, l, h), S.push(aa[c]), S.push(ua[c])) : 32 === c ? (w = $r(s, p, l), b = $r(e, p, l), y = $r(e, h, l), m = $r(s, h, l), S.push(aa[c]), S.push(ua[c])) : 42 === c ? (L = 1 - $r(s, h, f), E = 1 - $r(e, h, f), y = $r(e, h, l), m = $r(s, h, l), S.push(la[c]), S.push(pa[c])) : 128 === c && (L = $r(e, f, h), E = $r(s, f, h), y = 1 - $r(s, l, h), m = 1 - $r(e, l, h), S.push(la[c]), S.push(pa[c])), 5 === c ? (b = 1 - $r(e, l, p), L = 1 - $r(e, h, f), S.push(ua[c])) : 165 === c ? (b = $r(s, p, l), L = $r(s, f, h), S.push(ua[c])) : 20 === c ? (x = $r(e, f, p), m = $r(e, h, l), S.push(ca[c])) : 150 === c ? (x = 1 - $r(s, p, f), m = 1 - $r(s, l, h), S.push(ca[c])) : 80 === c ? (w = $r(e, p, l), E = $r(e, f, h), S.push(aa[c])) : 90 === c ? (w = 1 - $r(s, l, p), E = 1 - $r(s, h, f), S.push(aa[c])) : 65 === c ? (v = 1 - $r(e, p, f), y = 1 - $r(e, l, h), S.push(ha[c])) : 105 === c ? (v = $r(s, f, p), y = $r(s, h, l), S.push(ha[c])) : 160 === c ? (w = $r(s, p, l), b = $r(e, p, l), L = $r(e, f, h), E = $r(s, f, h), S.push(aa[c]), S.push(ua[c])) : 10 === c ? (w = 1 - $r(e, l, p), b = 1 - $r(s, l, p), L = 1 - $r(s, h, f), E = 1 - $r(e, h, f), S.push(aa[c]), S.push(ua[c])) : 130 === c ? (x = 1 - $r(e, p, f), v = 1 - $r(s, p, f), y = 1 - $r(s, l, h), m = 1 - $r(e, l, h), S.push(ca[c]), S.push(ha[c])) : 40 === c ? (x = $r(s, f, p), v = $r(e, f, p), y = $r(e, h, l), m = $r(s, h, l), S.push(ca[c]), S.push(ha[c])) : 101 === c ? (b = $r(s, p, l), y = $r(s, h, l), S.push(ua[c])) : 69 === c ? (b = 1 - $r(e, l, p), y = 1 - $r(e, l, h), S.push(ua[c])) : 149 === c ? (L = $r(s, f, h), m = 1 - $r(s, l, h), S.push(la[c])) : 21 === c ? (L = 1 - $r(e, h, f), m = $r(e, h, l), S.push(la[c])) : 86 === c ? (x = 1 - $r(s, p, f), E = 1 - $r(s, h, f), S.push(ca[c])) : 84 === c ? (x = $r(e, f, p), E = $r(e, f, h), S.push(ca[c])) : 89 === c ? (w = 1 - $r(s, l, p), v = $r(s, f, p), S.push(ha[c])) : 81 === c ? (w = $r(e, p, l), v = 1 - $r(e, p, f), S.push(ha[c])) : 96 === c ? (w = $r(s, p, l), b = $r(e, p, l), E = $r(e, f, h), y = $r(s, h, l), S.push(aa[c]), S.push(ua[c])) : 74 === c ? (w = 1 - $r(e, l, p), b = 1 - $r(s, l, p), E = 1 - $r(s, h, f), y = 1 - $r(e, l, h), S.push(aa[c]), S.push(ua[c])) : 24 === c ? (w = 1 - $r(s, l, p), x = $r(s, f, p), v = $r(e, f, p), m = $r(e, h, l), S.push(aa[c]), S.push(ha[c])) : 146 === c ? (w = $r(e, p, l), x = 1 - $r(e, p, f), v = 1 - $r(s, p, f), m = 1 - $r(s, l, h), S.push(aa[c]), S.push(ha[c])) : 6 === c ? (b = 1 - $r(e, l, p), x = 1 - $r(s, p, f), L = 1 - $r(s, h, f), E = 1 - $r(e, h, f), S.push(ua[c]), S.push(ca[c])) : 164 === c ? (b = $r(s, p, l), x = $r(e, f, p), L = $r(e, f, h), E = $r(s, f, h), S.push(ua[c]), S.push(ca[c])) : 129 === c ? (v = 1 - $r(e, p, f), L = $r(s, f, h), y = 1 - $r(s, l, h), m = 1 - $r(e, l, h), S.push(ha[c]), S.push(la[c])) : 41 === c ? (v = $r(s, f, p), L = 1 - $r(e, h, f), y = $r(e, h, l), m = $r(s, h, l), S.push(ha[c]), S.push(la[c])) : 66 === c ? (x = 1 - $r(e, p, f), v = 1 - $r(s, p, f), E = 1 - $r(s, h, f), y = 1 - $r(e, l, h), S.push(ca[c]), S.push(ha[c])) : 104 === c ? (x = $r(s, f, p), v = $r(e, f, p), E = $r(e, f, h), y = $r(s, h, l), S.push(ha[c]), S.push(fa[c])) : 144 === c ? (w = $r(e, p, l), L = $r(e, f, h), E = $r(s, f, h), m = 1 - $r(s, l, h), S.push(aa[c]), S.push(pa[c])) : 26 === c ? (w = 1 - $r(s, l, p), L = 1 - $r(s, h, f), E = 1 - $r(e, h, f), m = $r(e, h, l), S.push(aa[c]), S.push(pa[c])) : 36 === c ? (b = $r(s, p, l), x = $r(e, f, p), y = $r(e, h, l), m = $r(s, h, l), S.push(ua[c]), S.push(ca[c])) : 134 === c ? (b = 1 - $r(e, l, p), x = 1 - $r(s, p, f), y = 1 - $r(s, l, h), m = 1 - $r(e, l, h), S.push(ua[c]), S.push(ca[c])) : 9 === c ? (w = 1 - $r(e, l, p), b = 1 - $r(s, l, p), v = $r(s, f, p), L = 1 - $r(e, h, f), S.push(aa[c]), S.push(ua[c])) : 161 === c ? (w = $r(s, p, l), b = $r(e, p, l), v = 1 - $r(e, p, f), L = $r(s, f, h), S.push(aa[c]), S.push(ua[c])) : 37 === c ? (b = $r(s, p, l), L = 1 - $r(e, h, f), y = $r(e, h, l), m = $r(s, h, l), S.push(ua[c]), S.push(la[c])) : 133 === c ? (b = 1 - $r(e, l, p), L = $r(s, f, h), y = 1 - $r(s, l, h), m = 1 - $r(e, l, h), S.push(ua[c]), S.push(la[c])) : 148 === c ? (x = $r(e, f, p), L = $r(e, f, h), E = $r(s, f, h), m = 1 - $r(s, l, h), S.push(ca[c]), S.push(pa[c])) : 22 === c ? (x = 1 - $r(s, p, f), L = 1 - $r(s, h, f), E = 1 - $r(e, h, f), m = $r(e, h, l), S.push(ca[c]), S.push(pa[c])) : 82 === c ? (w = $r(e, p, l), x = 1 - $r(e, p, f), v = 1 - $r(s, p, f), E = 1 - $r(s, h, f), S.push(aa[c]), S.push(ha[c])) : 88 === c ? (w = 1 - $r(s, l, p), x = $r(s, f, p), v = $r(e, f, p), E = $r(e, f, h), S.push(aa[c]), S.push(ha[c])) : 73 === c ? (w = 1 - $r(e, l, p), b = 1 - $r(s, l, p), v = $r(s, f, p), y = 1 - $r(e, l, h), S.push(aa[c]), S.push(ua[c])) : 97 === c ? (w = $r(s, p, l), b = $r(e, p, l), v = 1 - $r(e, p, f), y = $r(s, h, l), S.push(aa[c]), S.push(ua[c])) : 145 === c ? (w = $r(e, p, l), v = 1 - $r(e, p, f), L = $r(s, f, h), m = 1 - $r(s, l, h), S.push(aa[c]), S.push(la[c])) : 25 === c ? (w = 1 - $r(s, l, p), v = $r(s, f, p), L = 1 - $r(e, h, f), m = $r(e, h, l), S.push(aa[c]), S.push(la[c])) : 70 === c ? (b = 1 - $r(e, l, p), x = 1 - $r(s, p, f), E = 1 - $r(s, h, f), y = 1 - $r(e, l, h), S.push(ua[c]), S.push(ca[c])) : 100 === c ? (b = $r(s, p, l), x = $r(e, f, p), E = $r(e, f, h), y = $r(s, h, l), S.push(ua[c]), S.push(ca[c])) : 34 === c ? (0 === g ? (w = 1 - $r(e, l, p), b = 1 - $r(s, l, p), x = $r(s, f, p), v = $r(e, f, p), L = $r(e, f, h), E = $r(s, f, h), y = 1 - $r(s, l, h), m = 1 - $r(e, l, h)) : (w = $r(s, p, l), b = $r(e, p, l), x = 1 - $r(e, p, f), v = 1 - $r(s, p, f), L = 1 - $r(s, h, f), E = 1 - $r(e, h, f), y = $r(e, h, l), m = $r(s, h, l)), S.push(aa[c]), S.push(ua[c]), S.push(la[c]), S.push(pa[c])) : 35 === c ? (4 === g ? (w = 1 - $r(e, l, p), b = 1 - $r(s, l, p), x = $r(s, f, p), v = $r(e, f, p), L = $r(e, f, h), E = $r(s, f, h), y = 1 - $r(s, l, h), m = 1 - $r(e, l, h)) : (w = $r(s, p, l), b = $r(e, p, l), x = 1 - $r(e, p, f), v = 1 - $r(s, p, f), L = 1 - $r(s, h, f), E = 1 - $r(e, h, f), y = $r(e, h, l), m = $r(s, h, l)), S.push(aa[c]), S.push(ua[c]), S.push(ha[c]), S.push(pa[c])) : 136 === c ? (0 === g ? (w = $r(s, p, l), b = $r(e, p, l), x = 1 - $r(e, p, f), v = 1 - $r(s, p, f), L = 1 - $r(s, h, f), E = 1 - $r(e, h, f), y = $r(e, h, l), m = $r(s, h, l)) : (w = 1 - $r(e, l, p), b = 1 - $r(s, l, p), x = $r(s, f, p), v = $r(e, f, p), L = $r(e, f, h), E = $r(s, f, h), y = 1 - $r(s, l, h), m = 1 - $r(e, l, h)), S.push(aa[c]), S.push(ua[c]), S.push(la[c]), S.push(pa[c])) : 153 === c ? (0 === g ? (w = $r(e, p, l), v = 1 - $r(e, p, f), L = 1 - $r(e, h, f), m = $r(e, h, l)) : (w = 1 - $r(s, l, p), v = $r(s, f, p), L = $r(s, f, h), m = 1 - $r(s, l, h)), S.push(aa[c]), S.push(ha[c])) : 102 === c ? (0 === g ? (b = 1 - $r(e, l, p), x = $r(e, f, p), E = $r(e, f, h), y = 1 - $r(e, l, h)) : (b = $r(s, p, l), x = 1 - $r(s, p, f), E = 1 - $r(s, h, f), y = $r(s, h, l)), S.push(ua[c]), S.push(pa[c])) : 155 === c ? (4 === g ? (w = $r(e, p, l), v = 1 - $r(e, p, f), L = 1 - $r(e, h, f), m = $r(e, h, l)) : (w = 1 - $r(s, l, p), v = $r(s, f, p), L = $r(s, f, h), m = 1 - $r(s, l, h)), S.push(aa[c]), S.push(la[c])) : 103 === c ? (4 === g ? (b = 1 - $r(e, l, p), x = $r(e, f, p), E = $r(e, f, h), y = 1 - $r(e, l, h)) : (b = $r(s, p, l), x = 1 - $r(s, p, f), E = 1 - $r(s, h, f), y = $r(s, h, l)), S.push(ua[c]), S.push(ca[c])) : 152 === c ? (0 === g ? (w = $r(e, p, l), x = 1 - $r(e, p, f), v = 1 - $r(s, p, f), L = 1 - $r(s, h, f), E = 1 - $r(e, h, f), m = $r(e, h, l)) : (w = 1 - $r(s, l, p), x = $r(s, f, p), v = $r(e, f, p), L = $r(e, f, h), E = $r(s, f, h), m = 1 - $r(s, l, h)), S.push(aa[c]), S.push(ca[c]), S.push(ha[c])) : 156 === c ? (4 === g ? (w = $r(e, p, l), x = 1 - $r(e, p, f), v = 1 - $r(s, p, f), L = 1 - $r(s, h, f), E = 1 - $r(e, h, f), m = $r(e, h, l)) : (w = 1 - $r(s, l, p), x = $r(s, f, p), v = $r(e, f, p), L = $r(e, f, h), E = $r(s, f, h), m = 1 - $r(s, l, h)), S.push(aa[c]), S.push(ha[c]), S.push(pa[c])) : 137 === c ? (0 === g ? (w = $r(s, p, l), b = $r(e, p, l), v = 1 - $r(e, p, f), L = 1 - $r(e, h, f), y = $r(e, h, l), m = $r(s, h, l)) : (w = 1 - $r(e, l, p), b = 1 - $r(s, l, p), v = $r(s, f, p), L = $r(s, f, h), y = 1 - $r(s, l, h), m = 1 - $r(e, l, h)), S.push(aa[c]), S.push(ua[c]), S.push(ha[c])) : 139 === c ? (4 === g ? (w = $r(s, p, l), b = $r(e, p, l), v = 1 - $r(e, p, f), L = 1 - $r(e, h, f), y = $r(e, h, l), m = $r(s, h, l)) : (w = 1 - $r(e, l, p), b = 1 - $r(s, l, p), v = $r(s, f, p), L = $r(s, f, h), y = 1 - $r(s, l, h), m = 1 - $r(e, l, h)), S.push(aa[c]), S.push(ua[c]), S.push(la[c])) : 98 === c ? (0 === g ? (w = 1 - $r(e, l, p), b = 1 - $r(s, l, p), x = $r(s, f, p), v = $r(e, f, p), E = $r(e, f, h), y = 1 - $r(e, l, h)) : (w = $r(s, p, l), b = $r(e, p, l), x = 1 - $r(e, p, f), v = 1 - $r(s, p, f), E = 1 - $r(s, h, f), y = $r(s, h, l)), S.push(aa[c]), S.push(ua[c]), S.push(pa[c])) : 99 === c ? (4 === g ? (w = 1 - $r(e, l, p), b = 1 - $r(s, l, p), x = $r(s, f, p), v = $r(e, f, p), E = $r(e, f, h), y = 1 - $r(e, l, h)) : (w = $r(s, p, l), b = $r(e, p, l), x = 1 - $r(e, p, f), v = 1 - $r(s, p, f), E = 1 - $r(s, h, f), y = $r(s, h, l)), S.push(aa[c]), S.push(ua[c]), S.push(ha[c])) : 38 === c ? (0 === g ? (b = 1 - $r(e, l, p), x = $r(e, f, p), L = $r(e, f, h), E = $r(s, f, h), y = 1 - $r(s, l, h), m = 1 - $r(e, l, h)) : (b = $r(s, p, l), x = 1 - $r(s, p, f), L = 1 - $r(s, h, f), E = 1 - $r(e, h, f), y = $r(e, h, l), m = $r(s, h, l)), S.push(ua[c]), S.push(la[c]), S.push(pa[c])) : 39 === c ? (4 === g ? (b = 1 - $r(e, l, p), x = $r(e, f, p), L = $r(e, f, h), E = $r(s, f, h), y = 1 - $r(s, l, h), m = 1 - $r(e, l, h)) : (b = $r(s, p, l), x = 1 - $r(s, p, f), L = 1 - $r(s, h, f), E = 1 - $r(e, h, f), y = $r(e, h, l), m = $r(s, h, l)), S.push(ua[c]), S.push(ca[c]), S.push(pa[c])) : 85 === c && (w = 1, b = 0, x = 1, v = 0, L = 0, E = 1, y = 0, m = 1), (y < 0 || y > 1 || m < 0 || m > 1 || w < 0 || w > 1 || x < 0 || x > 1 || L < 0 || L > 1 || E < 0 || E > 1) && console.log("MarchingSquaresJS-isoBands: " + c + " " + d + " " + h + "," + l + "," + p + "," + f + " " + g + " " + y + " " + m + " " + w + " " + b + " " + x + " " + v + " " + L + " " + E), o.cells[a][u] = {
                          cval: c,
                          cval_real: d,
                          flipped: g,
                          topleft: y,
                          topright: m,
                          righttop: w,
                          rightbottom: b,
                          bottomright: x,
                          bottomleft: v,
                          leftbottom: L,
                          lefttop: E,
                          edges: S
                        };
                      }
                    }
                  }
                }
                return o
              }(t, e, r);
              return Ls.polygons ? (Ls.verbose && console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"), u = function (t) {
                var e = [],
                  r = 0;
                return c.cells.forEach(function (t, i) {
                  t.forEach(function (t, n) {
                    if (void 0 !== t) {
                      var o = ga[t.cval](t);
                      "object" == typeof o && ti(o) ? "object" == typeof o[0] && ti(o[0]) ? "object" == typeof o[0][0] && ti(o[0][0]) ? o.forEach(function (t) {
                        t.forEach(function (t) {
                          t[0] += n, t[1] += i;
                        }), e[r++] = t;
                      }) : (o.forEach(function (t) {
                        t[0] += n, t[1] += i;
                      }), e[r++] = o) : console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates") : console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates");
                    }
                  });
                }), e
              }()) : (Ls.verbose && console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"), u = function (t) {
                for (var e = [], r = t.rows, i = t.cols, n = [], o = 0; o < r; o++)
                  for (var s = 0; s < i; s++)
                    if (void 0 !== t.cells[o][s] && t.cells[o][s].edges.length > 0) {
                      var a = function (t) {
                          if (t.edges.length > 0) {
                            var e = t.edges[t.edges.length - 1],
                              r = t.cval_real;
                            switch (e) {
                              case 0:
                                return r & Cs ? {
                                  p: [1, t.righttop],
                                  x: -1,
                                  y: 0,
                                  o: 1
                                } : {
                                  p: [t.topleft, 1],
                                  x: 0,
                                  y: -1,
                                  o: 0
                                };
                              case 1:
                                return r & Is ? {
                                  p: [t.topleft, 1],
                                  x: 0,
                                  y: -1,
                                  o: 0
                                } : {
                                  p: [1, t.rightbottom],
                                  x: -1,
                                  y: 0,
                                  o: 0
                                };
                              case 2:
                                return r & Is ? {
                                  p: [t.bottomright, 0],
                                  x: 0,
                                  y: 1,
                                  o: 1
                                } : {
                                  p: [t.topleft, 1],
                                  x: 0,
                                  y: -1,
                                  o: 0
                                };
                              case 3:
                                return r & Ms ? {
                                  p: [t.topleft, 1],
                                  x: 0,
                                  y: -1,
                                  o: 0
                                } : {
                                  p: [t.bottomleft, 0],
                                  x: 0,
                                  y: 1,
                                  o: 0
                                };
                              case 4:
                                return r & Cs ? {
                                  p: [1, t.righttop],
                                  x: -1,
                                  y: 0,
                                  o: 1
                                } : {
                                  p: [t.topright, 1],
                                  x: 0,
                                  y: -1,
                                  o: 1
                                };
                              case 5:
                                return r & Is ? {
                                  p: [t.topright, 1],
                                  x: 0,
                                  y: -1,
                                  o: 1
                                } : {
                                  p: [1, t.rightbottom],
                                  x: -1,
                                  y: 0,
                                  o: 0
                                };
                              case 6:
                                return r & Is ? {
                                  p: [t.bottomright, 0],
                                  x: 0,
                                  y: 1,
                                  o: 1
                                } : {
                                  p: [t.topright, 1],
                                  x: 0,
                                  y: -1,
                                  o: 1
                                };
                              case 7:
                                return r & Ms ? {
                                  p: [t.topright, 1],
                                  x: 0,
                                  y: -1,
                                  o: 1
                                } : {
                                  p: [t.bottomleft, 0],
                                  x: 0,
                                  y: 1,
                                  o: 0
                                };
                              case 8:
                                return r & Is ? {
                                  p: [t.bottomright, 0],
                                  x: 0,
                                  y: 1,
                                  o: 1
                                } : {
                                  p: [1, t.righttop],
                                  x: -1,
                                  y: 0,
                                  o: 1
                                };
                              case 9:
                                return r & Ms ? {
                                  p: [1, t.righttop],
                                  x: -1,
                                  y: 0,
                                  o: 1
                                } : {
                                  p: [t.bottomleft, 0],
                                  x: 0,
                                  y: 1,
                                  o: 0
                                };
                              case 10:
                                return r & Ms ? {
                                  p: [0, t.leftbottom],
                                  x: 1,
                                  y: 0,
                                  o: 0
                                } : {
                                  p: [1, t.righttop],
                                  x: -1,
                                  y: 0,
                                  o: 1
                                };
                              case 11:
                                return r & Ss ? {
                                  p: [1, t.righttop],
                                  x: -1,
                                  y: 0,
                                  o: 1
                                } : {
                                  p: [0, t.lefttop],
                                  x: 1,
                                  y: 0,
                                  o: 1
                                };
                              case 12:
                                return r & Is ? {
                                  p: [t.bottomright, 0],
                                  x: 0,
                                  y: 1,
                                  o: 1
                                } : {
                                  p: [1, t.rightbottom],
                                  x: -1,
                                  y: 0,
                                  o: 0
                                };
                              case 13:
                                return r & Ms ? {
                                  p: [1, t.rightbottom],
                                  x: -1,
                                  y: 0,
                                  o: 0
                                } : {
                                  p: [t.bottomleft, 0],
                                  x: 0,
                                  y: 1,
                                  o: 0
                                };
                              case 14:
                                return r & Ms ? {
                                  p: [0, t.leftbottom],
                                  x: 1,
                                  y: 0,
                                  o: 0
                                } : {
                                  p: [1, t.rightbottom],
                                  x: -1,
                                  y: 0,
                                  o: 0
                                };
                              case 15:
                                return r & Ss ? {
                                  p: [1, t.rightbottom],
                                  x: -1,
                                  y: 0,
                                  o: 0
                                } : {
                                  p: [0, t.lefttop],
                                  x: 1,
                                  y: 0,
                                  o: 1
                                };
                              case 16:
                                return r & Is ? {
                                  p: [t.bottomright, 0],
                                  x: 0,
                                  y: 1,
                                  o: 1
                                } : {
                                  p: [0, t.leftbottom],
                                  x: 1,
                                  y: 0,
                                  o: 0
                                };
                              case 17:
                                return r & Ss ? {
                                  p: [t.bottomright, 0],
                                  x: 0,
                                  y: 1,
                                  o: 1
                                } : {
                                  p: [0, t.lefttop],
                                  x: 1,
                                  y: 0,
                                  o: 1
                                };
                              case 18:
                                return r & Ms ? {
                                  p: [0, t.leftbottom],
                                  x: 1,
                                  y: 0,
                                  o: 0
                                } : {
                                  p: [t.bottomleft, 0],
                                  x: 0,
                                  y: 1,
                                  o: 0
                                };
                              case 19:
                                return r & Ss ? {
                                  p: [t.bottomleft, 0],
                                  x: 0,
                                  y: 1,
                                  o: 0
                                } : {
                                  p: [0, t.lefttop],
                                  x: 1,
                                  y: 0,
                                  o: 1
                                };
                              case 20:
                                return r & Ss ? {
                                  p: [t.topleft, 1],
                                  x: 0,
                                  y: -1,
                                  o: 0
                                } : {
                                  p: [0, t.leftbottom],
                                  x: 1,
                                  y: 0,
                                  o: 0
                                };
                              case 21:
                                return r & Cs ? {
                                  p: [0, t.leftbottom],
                                  x: 1,
                                  y: 0,
                                  o: 0
                                } : {
                                  p: [t.topright, 1],
                                  x: 0,
                                  y: -1,
                                  o: 1
                                };
                              case 22:
                                return r & Ss ? {
                                  p: [t.topleft, 1],
                                  x: 0,
                                  y: -1,
                                  o: 0
                                } : {
                                  p: [0, t.lefttop],
                                  x: 1,
                                  y: 0,
                                  o: 1
                                };
                              case 23:
                                return r & Cs ? {
                                  p: [0, t.lefttop],
                                  x: 1,
                                  y: 0,
                                  o: 1
                                } : {
                                  p: [t.topright, 1],
                                  x: 0,
                                  y: -1,
                                  o: 1
                                };
                              default:
                                console.log("MarchingSquaresJS-isoBands: edge index out of range!"), console.log(t);
                            }
                          }
                          return null
                        }(t.cells[o][s]),
                        u = null,
                        c = s,
                        h = o;
                      null !== a && n.push([a.p[0] + c, a.p[1] + h]);
                      do {
                        if (null === (u = function (t, e, r, i) {
                            var n, o, s, a, u, c = t.cval;
                            switch (e) {
                              case -1:
                                switch (i) {
                                  case 0:
                                    n = ua[c], s = Bs[c], a = zs[c], u = Vs[c];
                                    break;
                                  default:
                                    n = aa[c], s = As[c], a = Fs[c], u = ks[c];
                                }
                                break;
                              case 1:
                                switch (i) {
                                  case 0:
                                    n = la[c], s = Ks[c], a = Js[c], u = Qs[c];
                                    break;
                                  default:
                                    n = pa[c], s = Ys[c], a = Ws[c], u = Hs[c];
                                }
                                break;
                              default:
                                switch (r) {
                                  case -1:
                                    switch (i) {
                                      case 0:
                                        n = fa[c], s = Ts[c], a = Ps[c], u = Ds[c];
                                        break;
                                      default:
                                        n = da[c], s = Ns[c], a = Rs[c], u = Os[c];
                                    }
                                    break;
                                  case 1:
                                    switch (i) {
                                      case 0:
                                        n = ha[c], s = Us[c], a = qs[c], u = js[c];
                                        break;
                                      default:
                                        n = ca[c], s = Gs[c], a = Xs[c], u = Zs[c];
                                    }
                                }
                            }
                            if (o = t.edges.indexOf(n), void 0 === t.edges[o]) return null;
                            switch (function (t, e) {
                              delete t.edges[e];
                              for (var r = e + 1; r < t.edges.length; r++) t.edges[r - 1] = t.edges[r];
                              t.edges.pop();
                            }(t, o), c = t.cval_real, n) {
                              case 0:
                                c & Cs ? (e = t.topleft, r = 1) : (e = 1, r = t.righttop);
                                break;
                              case 1:
                                c & Is ? (e = 1, r = t.rightbottom) : (e = t.topleft, r = 1);
                                break;
                              case 2:
                                c & Is ? (e = t.topleft, r = 1) : (e = t.bottomright, r = 0);
                                break;
                              case 3:
                                c & Ms ? (e = t.bottomleft, r = 0) : (e = t.topleft, r = 1);
                                break;
                              case 4:
                                c & Cs ? (e = t.topright, r = 1) : (e = 1, r = t.righttop);
                                break;
                              case 5:
                                c & Is ? (e = 1, r = t.rightbottom) : (e = t.topright, r = 1);
                                break;
                              case 6:
                                c & Is ? (e = t.topright, r = 1) : (e = t.bottomright, r = 0);
                                break;
                              case 7:
                                c & Ms ? (e = t.bottomleft, r = 0) : (e = t.topright, r = 1);
                                break;
                              case 8:
                                c & Is ? (e = 1, r = t.righttop) : (e = t.bottomright, r = 0);
                                break;
                              case 9:
                                c & Ms ? (e = t.bottomleft, r = 0) : (e = 1, r = t.righttop);
                                break;
                              case 10:
                                c & Ms ? (e = 1, r = t.righttop) : (e = 0, r = t.leftbottom);
                                break;
                              case 11:
                                c & Ss ? (e = 0, r = t.lefttop) : (e = 1, r = t.righttop);
                                break;
                              case 12:
                                c & Is ? (e = 1, r = t.rightbottom) : (e = t.bottomright, r = 0);
                                break;
                              case 13:
                                c & Ms ? (e = t.bottomleft, r = 0) : (e = 1, r = t.rightbottom);
                                break;
                              case 14:
                                c & Ms ? (e = 1, r = t.rightbottom) : (e = 0, r = t.leftbottom);
                                break;
                              case 15:
                                c & Ss ? (e = 0, r = t.lefttop) : (e = 1, r = t.rightbottom);
                                break;
                              case 16:
                                c & Is ? (e = 0, r = t.leftbottom) : (e = t.bottomright, r = 0);
                                break;
                              case 17:
                                c & Ss ? (e = 0, r = t.lefttop) : (e = t.bottomright, r = 0);
                                break;
                              case 18:
                                c & Ms ? (e = t.bottomleft, r = 0) : (e = 0, r = t.leftbottom);
                                break;
                              case 19:
                                c & Ss ? (e = 0, r = t.lefttop) : (e = t.bottomleft, r = 0);
                                break;
                              case 20:
                                c & Ss ? (e = 0, r = t.leftbottom) : (e = t.topleft, r = 1);
                                break;
                              case 21:
                                c & Cs ? (e = t.topright, r = 1) : (e = 0, r = t.leftbottom);
                                break;
                              case 22:
                                c & Ss ? (e = 0, r = t.lefttop) : (e = t.topleft, r = 1);
                                break;
                              case 23:
                                c & Cs ? (e = t.topright, r = 1) : (e = 0, r = t.lefttop);
                                break;
                              default:
                                return console.log("MarchingSquaresJS-isoBands: edge index out of range!"), console.log(t), null
                            }
                            return void 0 !== e && void 0 !== r && void 0 !== s && void 0 !== a && void 0 !== u || (console.log("MarchingSquaresJS-isoBands: undefined value!"), console.log(t), console.log(e + " " + r + " " + s + " " + a + " " + u)), {
                              p: [e, r],
                              x: s,
                              y: a,
                              o: u
                            }
                          }(t.cells[h][c], a.x, a.y, a.o))) break;
                        if (n.push([u.p[0] + c, u.p[1] + h]), c += u.x, a = u, (h += u.y) < 0 || h >= r || c < 0 || c >= i || void 0 === t.cells[h][c]) {
                          var l = function (t, e, r, i, n, o) {
                            for (var s = t.cells[r][e], a = s.cval_real, u = e + i, c = r + n, h = [], l = !1; !l;) {
                              if (void 0 === t.cells[c] || void 0 === t.cells[c][u])
                                if (c -= n, u -= i, a = (s = t.cells[c][u]).cval_real, -1 === n)
                                  if (0 === o)
                                    if (a & Ms) h.push([u, c]), i = -1, n = 0, o = 0;
                                    else {
                                      if (!(a & Is)) {
                                        h.push([u + s.bottomright, c]), i = 0, n = 1, o = 1, l = !0;
                                        break
                                      }
                                      h.push([u + 1, c]), i = 1, n = 0, o = 0;
                                    }
                              else {
                                if (!(a & Ms)) {
                                  if (a & Is) {
                                    h.push([u + s.bottomright, c]), i = 0, n = 1, o = 1, l = !0;
                                    break
                                  }
                                  h.push([u + s.bottomleft, c]), i = 0, n = 1, o = 0, l = !0;
                                  break
                                }
                                h.push([u, c]), i = -1, n = 0, o = 0;
                              } else if (1 === n)
                                if (0 === o) {
                                  if (!(a & Cs)) {
                                    if (a & Ss) {
                                      h.push([u + s.topleft, c + 1]), i = 0, n = -1, o = 0, l = !0;
                                      break
                                    }
                                    h.push([u + s.topright, c + 1]), i = 0, n = -1, o = 1, l = !0;
                                    break
                                  }
                                  h.push([u + 1, c + 1]), i = 1, n = 0, o = 1;
                                } else h.push([u + 1, c + 1]), i = 1, n = 0, o = 1;
                              else if (-1 === i)
                                if (0 === o) {
                                  if (!(a & Ss)) {
                                    if (a & Ms) {
                                      h.push([u, c + s.leftbottom]), i = 1, n = 0, o = 0, l = !0;
                                      break
                                    }
                                    h.push([u, c + s.lefttop]), i = 1, n = 0, o = 1, l = !0;
                                    break
                                  }
                                  h.push([u, c + 1]), i = 0, n = 1, o = 0;
                                } else {
                                  if (!(a & Ss)) {
                                    console.log("MarchingSquaresJS-isoBands: wtf");
                                    break
                                  }
                                  h.push([u, c + 1]), i = 0, n = 1, o = 0;
                                }
                              else {
                                if (1 !== i) {
                                  console.log("MarchingSquaresJS-isoBands: we came from nowhere!");
                                  break
                                }
                                if (0 === o) {
                                  if (!(a & Is)) {
                                    h.push([u + 1, c + s.rightbottom]), i = -1, n = 0, o = 0, l = !0;
                                    break
                                  }
                                  h.push([u + 1, c]), i = 0, n = -1, o = 1;
                                } else {
                                  if (!(a & Is)) {
                                    if (a & Cs) {
                                      h.push([u + 1, c + s.righttop]), i = -1, n = 0, o = 1;
                                      break
                                    }
                                    h.push([u + 1, c + s.rightbottom]), i = -1, n = 0, o = 0, l = !0;
                                    break
                                  }
                                  h.push([u + 1, c]), i = 0, n = -1, o = 1;
                                }
                              } else if (a = (s = t.cells[c][u]).cval_real, -1 === i)
                                if (0 === o)
                                  if (void 0 !== t.cells[c - 1] && void 0 !== t.cells[c - 1][u]) i = 0, n = -1, o = 1;
                                  else {
                                    if (!(a & Ms)) {
                                      h.push([u + s.bottomright, c]), i = 0, n = 1, o = 1, l = !0;
                                      break
                                    }
                                    h.push([u, c]);
                                  }
                              else {
                                if (!(a & Ss)) {
                                  console.log("MarchingSquaresJS-isoBands: found entry from top at " + u + "," + c);
                                  break
                                }
                                console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!");
                              } else if (1 === i) {
                                if (0 === o) {
                                  console.log("MarchingSquaresJS-isoBands: wtf");
                                  break
                                }
                                if (void 0 !== t.cells[c + 1] && void 0 !== t.cells[c + 1][u]) i = 0, n = 1, o = 0;
                                else {
                                  if (!(a & Cs)) {
                                    h.push([u + s.topleft, c + 1]), i = 0, n = -1, o = 0, l = !0;
                                    break
                                  }
                                  h.push([u + 1, c + 1]), i = 1, n = 0, o = 1;
                                }
                              } else if (-1 === n) {
                                if (1 !== o) {
                                  console.log("MarchingSquaresJS-isoBands: wtf");
                                  break
                                }
                                if (void 0 !== t.cells[c][u + 1]) i = 1, n = 0, o = 1;
                                else {
                                  if (!(a & Is)) {
                                    h.push([u + 1, c + s.righttop]), i = -1, n = 0, o = 1, l = !0;
                                    break
                                  }
                                  h.push([u + 1, c]), i = 0, n = -1, o = 1;
                                }
                              } else {
                                if (1 !== n) {
                                  console.log("MarchingSquaresJS-isoBands: where did we came from???");
                                  break
                                }
                                if (0 !== o) {
                                  console.log("MarchingSquaresJS-isoBands: wtf");
                                  break
                                }
                                if (void 0 !== t.cells[c][u - 1]) i = -1, n = 0, o = 0;
                                else {
                                  if (!(a & Ss)) {
                                    h.push([u, c + s.leftbottom]), i = 1, n = 0, o = 0, l = !0;
                                    break
                                  }
                                  h.push([u, c + 1]), i = 0, n = 1, o = 0;
                                }
                              }
                              if (c += n, (u += i) === e && c === r) break
                            }
                            return {
                              path: h,
                              i: u,
                              j: c,
                              x: i,
                              y: n,
                              o: o
                            }
                          }(t, c -= u.x, h -= u.y, u.x, u.y, u.o);
                          if (null === l) break;
                          l.path.forEach(function (t) {
                            n.push(t);
                          }), c = l.i, h = l.j, a = l;
                        }
                      } while (void 0 !== t.cells[h][c] && t.cells[h][c].edges.length > 0);
                      e.push(n), n = [], t.cells[o][s].edges.length > 0 && s--;
                    } return e
              }(c)), "function" == typeof Ls.successCallback && Ls.successCallback(u), u
            }
  
            function $r(t, e, r) {
              return (t - e) / (r - e)
            }
  
            function ti(t) {
              return t.constructor.toString().indexOf("Array") > -1
            }
  
            function ei(t, e, r) {
              if (!L(r = r || {})) throw new Error("options is invalid");
              var i = r.pivot,
                n = r.mutate;
              if (!t) throw new Error("geojson is required");
              if (null == e || isNaN(e)) throw new Error("angle is required");
              return 0 === e ? t : (i || (i = he(t)), !1 !== n && void 0 !== n || (t = Ft(t)), I(t, function (t) {
                var r = Ke(i, t) + e,
                  n = Qe(i, t),
                  o = G(Xr(i, n, r));
                t[0] = o[0], t[1] = o[1];
              }), t)
            }
  
            function ri(t, e, r) {
              if (!L(r = r || {})) throw new Error("options is invalid");
              var i = r.origin,
                n = r.mutate;
              if (!t) throw new Error("geojson required");
              if ("number" != typeof e || 0 === e) throw new Error("invalid factor");
              var o = Array.isArray(i) || "object" == typeof i;
              return !0 !== n && (t = Ft(t)), "FeatureCollection" !== t.type || o ? ii(t, e, i) : (D(t, function (r, n) {
                t.features[n] = ii(r, e, i);
              }), t)
            }
  
            function ii(t, e, r) {
              var n = "Point" === J(t);
              return r = function (t, e) {
                if (null != e || (e = "centroid"), Array.isArray(e) || "object" == typeof e) return j(e);
                var r = t.bbox ? t.bbox : q(t),
                  n = r[0],
                  o = r[1],
                  s = r[2],
                  a = r[3];
                switch (e) {
                  case "sw":
                  case "southwest":
                  case "westsouth":
                  case "bottomleft":
                    return i([n, o]);
                  case "se":
                  case "southeast":
                  case "eastsouth":
                  case "bottomright":
                    return i([s, o]);
                  case "nw":
                  case "northwest":
                  case "westnorth":
                  case "topleft":
                    return i([n, a]);
                  case "ne":
                  case "northeast":
                  case "eastnorth":
                  case "topright":
                    return i([s, a]);
                  case "center":
                    return ce(t);
                  case void 0:
                  case null:
                  case "centroid":
                    return he(t);
                  default:
                    throw new Error("invalid origin")
                }
              }(t, r), 1 === e || n ? t : (I(t, function (t) {
                var i = Qe(r, t),
                  n = Ke(r, t),
                  o = G(Xr(r, i * e, n));
                t[0] = o[0], t[1] = o[1], 3 === t.length && (t[2] *= e);
              }), t)
            }
  
            function ni(t) {
              var e = t[0],
                r = t[1];
              return [r[0] - e[0], r[1] - e[1]]
            }
  
            function oi(t, e) {
              return t[0] * e[1] - e[0] * t[1]
            }
  
            function si(t, e, r) {
              var i = [],
                n = y(e, r),
                o = G(t),
                s = [];
              return o.forEach(function (t, e) {
                if (e !== o.length - 1) {
                  var r = function (t, e, r) {
                    var i = Math.sqrt((t[0] - e[0]) * (t[0] - e[0]) + (t[1] - e[1]) * (t[1] - e[1])),
                      n = t[0] + r * (e[1] - t[1]) / i,
                      o = e[0] + r * (e[1] - t[1]) / i;
                    return [
                      [n, t[1] + r * (t[0] - e[0]) / i],
                      [o, e[1] + r * (t[0] - e[0]) / i]
                    ]
                  }(t, o[e + 1], n);
                  if (i.push(r), e > 0) {
                    var a = i[e - 1],
                      u = function (t, e) {
                        return ! function (t, e) {
                          return 0 === oi(ni(t), ni(e))
                        }(t, e) && function (t, e) {
                          var r = t[0],
                            i = ni(t),
                            n = e[0],
                            o = ni(e),
                            s = oi(i, o);
                          return function (t, e) {
                            return [t[0] + e[0], t[1] + e[1]]
                          }(r, function (t, e) {
                            return [t * e[0], t * e[1]]
                          }(oi(function (t, e) {
                            return [t[0] - e[0], t[1] - e[1]]
                          }(n, r), o) / s, i))
                        }(t, e)
                      }(r, a);
                    !1 !== u && (a[1] = u, r[0] = u), s.push(a[0]), e === o.length - 2 && (s.push(r[0]), s.push(r[1]));
                  }
                  2 === o.length && (s.push(r[0]), s.push(r[1]));
                }
              }), a(s, t.properties)
            }
  
            function ai(t, e, r) {
              var i = e[0] - t[0],
                n = e[1] - t[1],
                o = r[0] - e[0],
                s = r[1] - e[1];
              return Math.sign(i * s - o * n)
            }
  
            function ui(t, e) {
              return e.geometry.coordinates[0].every(function (e) {
                return Mt(i(e), t)
              })
            }
  
            function ci(t, e) {
              for (var r = 0; r < t.coordinates.length - 1; r++)
                if (function (t, e, r) {
                    var i = r[0] - t[0],
                      n = r[1] - t[1],
                      o = e[0] - t[0],
                      s = e[1] - t[1];
                    return i * s - n * o == 0 && (Math.abs(o) >= Math.abs(s) ? o > 0 ? t[0] <= r[0] && r[0] <= e[0] : e[0] <= r[0] && r[0] <= t[0] : s > 0 ? t[1] <= r[1] && r[1] <= e[1] : e[1] <= r[1] && r[1] <= t[1])
                  }(t.coordinates[r], t.coordinates[r + 1], e.coordinates)) return !0;
              return !1
            }
  
            function hi(t, e) {
              return Ye(e, Tr(t)).features.length > 0
            }
  
            function li(t, e) {
              return !(t[0] > e[0] || t[2] < e[2] || t[1] > e[1] || t[3] < e[3])
            }
  
            function pi(t, e) {
              return t[0] === e[0] && t[1] === e[1]
            }
  
            function fi(t, e) {
              for (var r = !1, i = !1, n = t.coordinates.length, o = 0; o < n && !r && !i;) {
                for (var s = 0; s < e.coordinates.length - 1; s++) {
                  var a = !0;
                  0 !== s && s !== e.coordinates.length - 2 || (a = !1), _i(e.coordinates[s], e.coordinates[s + 1], t.coordinates[o], a) ? r = !0 : i = !0;
                }
                o++;
              }
              return r && i
            }
  
            function di(t, e) {
              return Ye(t, Tr(e)).features.length > 0
            }
  
            function gi(t, e) {
              for (var r = !1, n = !1, o = t.coordinates[0].length, s = 0; s < o && r && n;) Mt(i(t.coordinates[0][s]), e) ? r = !0 : n = !0, s++;
              return n && n
            }
  
            function _i(t, e, r, i) {
              var n = r[0] - t[0],
                o = r[1] - t[1],
                s = e[0] - t[0],
                a = e[1] - t[1];
              return 0 == n * a - o * s && (i ? Math.abs(s) >= Math.abs(a) ? s > 0 ? t[0] <= r[0] && r[0] <= e[0] : e[0] <= r[0] && r[0] <= t[0] : a > 0 ? t[1] <= r[1] && r[1] <= e[1] : e[1] <= r[1] && r[1] <= t[1] : Math.abs(s) >= Math.abs(a) ? s > 0 ? t[0] < r[0] && r[0] < e[0] : e[0] < r[0] && r[0] < t[0] : a > 0 ? t[1] < r[1] && r[1] < e[1] : e[1] < r[1] && r[1] < t[1])
            }
  
            function yi(t) {
              return t.coordinates.map(function (e) {
                return {
                  type: t.type.replace("Multi", ""),
                  coordinates: e
                }
              })
            }
  
            function mi(t, e) {
              return t.hasOwnProperty("coordinates") ? t.coordinates.length === e.coordinates.length : t.length === e.length
            }
  
            function vi(t, e) {
              return Ea(t, e, {
                strict: !0
              })
            }
  
            function xi(t, e) {
              if (!t) throw new Error("feature1 is required");
              if (!e) throw new Error("feature2 is required");
              var r = J(t);
              if (r !== J(e)) throw new Error("features must be of the same type");
              if ("Point" === r) throw new Error("Point geometry not supported");
              if (new Sa({
                  precision: 6
                }).compare(t, e)) return !1;
              var i = 0;
              switch (r) {
                case "MultiPoint":
                  var n = R(t),
                    o = R(e);
                  n.forEach(function (t) {
                    o.forEach(function (e) {
                      t[0] === e[0] && t[1] === e[1] && i++;
                    });
                  });
                  break;
                case "LineString":
                case "MultiLineString":
                  B(t, function (t) {
                    B(e, function (e) {
                      qr(t, e).features.length && i++;
                    });
                  });
                  break;
                case "Polygon":
                case "MultiPolygon":
                  B(t, function (t) {
                    B(e, function (e) {
                      Ye(t, e).features.length && i++;
                    });
                  });
              }
              return i > 0
            }
  
            function wi(t, e, r) {
              r = r || [];
              for (var i = 0; i < t; i++) r[i] = e;
              return r
            }
  
            function bi(t, e) {
              if (t.geometry && t.geometry.type) return t.geometry.type;
              if (t.type) return t.type;
              throw new Error("Invalid GeoJSON object for " + e)
            }
  
            function Ei(t) {
              for (var e = t, r = []; e.parent;) r.unshift(e), e = e.parent;
              return r
            }
  
            function Li(t, e) {
              e = e || {}, this.nodes = [], this.diagonal = !!e.diagonal, this.grid = [];
              for (var r = 0; r < t.length; r++) {
                this.grid[r] = [];
                for (var i = 0, n = t[r]; i < n.length; i++) {
                  var o = new Si(r, i, n[i]);
                  this.grid[r][i] = o, this.nodes.push(o);
                }
              }
              this.init();
            }
  
            function Si(t, e, r) {
              this.x = t, this.y = e, this.weight = r;
            }
  
            function Ci(t) {
              this.content = [], this.scoreFunction = t;
            }
  
            function Ii(t) {
              return t[0]
            }
  
            function Mi(t) {
              return t[1]
            }
  
            function Ti() {
              this._ = null;
            }
  
            function Pi(t) {
              t.U = t.C = t.L = t.R = t.P = t.N = null;
            }
  
            function Di(t, e) {
              var r = e,
                i = e.R,
                n = r.U;
              n ? n.L === r ? n.L = i : n.R = i : t._ = i, i.U = n, r.U = i, r.R = i.L, r.R && (r.R.U = r), i.L = r;
            }
  
            function Ni(t, e) {
              var r = e,
                i = e.L,
                n = r.U;
              n ? n.L === r ? n.L = i : n.R = i : t._ = i, i.U = n, r.U = i, r.L = i.R, r.L && (r.L.U = r), i.R = r;
            }
  
            function Ri(t) {
              for (; t.L;) t = t.L;
              return t
            }
  
            function Oi(t, e, r, i) {
              var n = [null, null],
                o = qa.push(n) - 1;
              return n.left = t, n.right = e, r && Fi(n, t, e, r), i && Fi(n, e, t, i), Va[t.index].halfedges.push(o), Va[e.index].halfedges.push(o), n
            }
  
            function Ai(t, e, r) {
              var i = [e, r];
              return i.left = t, i
            }
  
            function Fi(t, e, r, i) {
              t[0] || t[1] ? t.left === r ? t[1] = i : t[0] = i : (t[0] = i, t.left = e, t.right = r);
            }
  
            function ki(t, e, r, i, n) {
              var o, s = t[0],
                a = t[1],
                u = s[0],
                c = s[1],
                h = 0,
                l = 1,
                p = a[0] - u,
                f = a[1] - c;
              if (o = e - u, p || !(o > 0)) {
                if (o /= p, p < 0) {
                  if (o < h) return;
                  o < l && (l = o);
                } else if (p > 0) {
                  if (o > l) return;
                  o > h && (h = o);
                }
                if (o = i - u, p || !(o < 0)) {
                  if (o /= p, p < 0) {
                    if (o > l) return;
                    o > h && (h = o);
                  } else if (p > 0) {
                    if (o < h) return;
                    o < l && (l = o);
                  }
                  if (o = r - c, f || !(o > 0)) {
                    if (o /= f, f < 0) {
                      if (o < h) return;
                      o < l && (l = o);
                    } else if (f > 0) {
                      if (o > l) return;
                      o > h && (h = o);
                    }
                    if (o = n - c, f || !(o < 0)) {
                      if (o /= f, f < 0) {
                        if (o > l) return;
                        o > h && (h = o);
                      } else if (f > 0) {
                        if (o < h) return;
                        o < l && (l = o);
                      }
                      return !(h > 0 || l < 1) || (h > 0 && (t[0] = [u + h * p, c + h * f]), l < 1 && (t[1] = [u + l * p, c + l * f]), !0)
                    }
                  }
                }
              }
            }
  
            function Bi(t, e, r, i, n) {
              var o = t[1];
              if (o) return !0;
              var s, a, u = t[0],
                c = t.left,
                h = t.right,
                l = c[0],
                p = c[1],
                f = h[0],
                d = h[1],
                g = (l + f) / 2,
                _ = (p + d) / 2;
              if (d === p) {
                if (g < e || g >= i) return;
                if (l > f) {
                  if (u) {
                    if (u[1] >= n) return
                  } else u = [g, r];
                  o = [g, n];
                } else {
                  if (u) {
                    if (u[1] < r) return
                  } else u = [g, n];
                  o = [g, r];
                }
              } else if (a = _ - (s = (l - f) / (d - p)) * g, s < -1 || s > 1)
                if (l > f) {
                  if (u) {
                    if (u[1] >= n) return
                  } else u = [(r - a) / s, r];
                  o = [(n - a) / s, n];
                } else {
                  if (u) {
                    if (u[1] < r) return
                  } else u = [(n - a) / s, n];
                  o = [(r - a) / s, r];
                }
              else if (p < d) {
                if (u) {
                  if (u[0] >= i) return
                } else u = [e, s * e + a];
                o = [i, s * i + a];
              } else {
                if (u) {
                  if (u[0] < e) return
                } else u = [i, s * i + a];
                o = [e, s * e + a];
              }
              return t[0] = u, t[1] = o, !0
            }
  
            function zi(t, e) {
              var r = t.site,
                i = e.left,
                n = e.right;
              return r === n && (n = i, i = r), n ? Math.atan2(n[1] - i[1], n[0] - i[0]) : (r === i ? (i = e[1], n = e[0]) : (i = e[0], n = e[1]), Math.atan2(i[0] - n[0], n[1] - i[1]))
            }
  
            function Vi(t, e) {
              return e[+(e.left !== t.site)]
            }
  
            function Ui(t, e) {
              return e[+(e.left === t.site)]
            }
  
            function qi(t) {
              var e = t.P,
                r = t.N;
              if (e && r) {
                var i = e.site,
                  n = t.site,
                  o = r.site;
                if (i !== o) {
                  var s = n[0],
                    a = n[1],
                    u = i[0] - s,
                    c = i[1] - a,
                    h = o[0] - s,
                    l = o[1] - a,
                    p = 2 * (u * l - c * h);
                  if (!(p >= -Za)) {
                    var f = u * u + c * c,
                      d = h * h + l * l,
                      g = (l * f - c * d) / p,
                      _ = (u * d - h * f) / p,
                      y = ja.pop() || new function () {
                        Pi(this), this.x = this.y = this.arc = this.site = this.cy = null;
                      };
                    y.arc = t, y.site = n, y.x = g + s, y.y = (y.cy = _ + a) + Math.sqrt(g * g + _ * _), t.circle = y;
                    for (var m = null, v = Ua._; v;)
                      if (y.y < v.y || y.y === v.y && y.x <= v.x) {
                        if (!v.L) {
                          m = v.P;
                          break
                        }
                        v = v.L;
                      } else {
                        if (!v.R) {
                          m = v;
                          break
                        }
                        v = v.R;
                      } Ua.insert(m, y), m || (Ba = y);
                  }
                }
              }
            }
  
            function ji(t) {
              var e = t.circle;
              e && (e.P || (Ba = e.N), Ua.remove(e), ja.push(e), Pi(e), t.circle = null);
            }
  
            function Gi(t) {
              var e = Ga.pop() || new function () {
                Pi(this), this.edge = this.site = this.circle = null;
              };
              return e.site = t, e
            }
  
            function Xi(t) {
              ji(t), za.remove(t), Ga.push(t), Pi(t);
            }
  
            function Zi(t) {
              var e = t.circle,
                r = e.x,
                i = e.cy,
                n = [r, i],
                o = t.P,
                s = t.N,
                a = [t];
              Xi(t);
              for (var u = o; u.circle && Math.abs(r - u.circle.x) < Xa && Math.abs(i - u.circle.cy) < Xa;) o = u.P, a.unshift(u), Xi(u), u = o;
              a.unshift(u), ji(u);
              for (var c = s; c.circle && Math.abs(r - c.circle.x) < Xa && Math.abs(i - c.circle.cy) < Xa;) s = c.N, a.push(c), Xi(c), c = s;
              a.push(c), ji(c);
              var h, l = a.length;
              for (h = 1; h < l; ++h) c = a[h], u = a[h - 1], Fi(c.edge, u.site, c.site, n);
              u = a[0], (c = a[l - 1]).edge = Oi(u.site, c.site, null, n), qi(u), qi(c);
            }
  
            function Yi(t) {
              for (var e, r, i, n, o = t[0], s = t[1], a = za._; a;)
                if ((i = Wi(a, s) - o) > Xa) a = a.L;
                else {
                  if (!((n = o - function (t, e) {
                      var r = t.N;
                      if (r) return Wi(r, e);
                      var i = t.site;
                      return i[1] === e ? i[0] : 1 / 0
                    }(a, s)) > Xa)) {
                    i > -Xa ? (e = a.P, r = a) : n > -Xa ? (e = a, r = a.N) : e = r = a;
                    break
                  }
                  if (!a.R) {
                    e = a;
                    break
                  }
                  a = a.R;
                }!
              function (t) {
                Va[t.index] = {
                  site: t,
                  halfedges: []
                };
              }(t);
              var u = Gi(t);
              if (za.insert(e, u), e || r) {
                if (e === r) return ji(e), r = Gi(e.site), za.insert(u, r), u.edge = r.edge = Oi(e.site, u.site), qi(e), void qi(r);
                if (r) {
                  ji(e), ji(r);
                  var c = e.site,
                    h = c[0],
                    l = c[1],
                    p = t[0] - h,
                    f = t[1] - l,
                    d = r.site,
                    g = d[0] - h,
                    _ = d[1] - l,
                    y = 2 * (p * _ - f * g),
                    m = p * p + f * f,
                    v = g * g + _ * _,
                    x = [(_ * m - f * v) / y + h, (p * v - g * m) / y + l];
                  Fi(r.edge, c, d, x), u.edge = Oi(c, t, null, x), r.edge = Oi(t, d, null, x), qi(e), qi(r);
                } else u.edge = Oi(e.site, u.site);
              }
            }
  
            function Wi(t, e) {
              var r = t.site,
                i = r[0],
                n = r[1],
                o = n - e;
              if (!o) return i;
              var s = t.P;
              if (!s) return -1 / 0;
              var a = (r = s.site)[0],
                u = r[1],
                c = u - e;
              if (!c) return a;
              var h = a - i,
                l = 1 / o - 1 / c,
                p = h / c;
              return l ? (-p + Math.sqrt(p * p - 2 * l * (h * h / (-2 * c) - u + c / 2 + n - o / 2))) / l + i : (i + a) / 2
            }
  
            function Hi(t, e, r) {
              return (t[0] - r[0]) * (e[1] - t[1]) - (t[0] - e[0]) * (r[1] - t[1])
            }
  
            function Ki(t, e) {
              return e[1] - t[1] || e[0] - t[0]
            }
  
            function Ji(t, e) {
              var r, i, n, o = t.sort(Ki).pop();
              for (qa = [], Va = new Array(t.length), za = new Ti, Ua = new Ti;;)
                if (n = Ba, o && (!n || o[1] < n.y || o[1] === n.y && o[0] < n.x)) o[0] === r && o[1] === i || (Yi(o), r = o[0], i = o[1]), o = t.pop();
                else {
                  if (!n) break;
                  Zi(n.arc);
                } if (function () {
                  for (var t, e, r, i, n = 0, o = Va.length; n < o; ++n)
                    if ((t = Va[n]) && (i = (e = t.halfedges).length)) {
                      var s = new Array(i),
                        a = new Array(i);
                      for (r = 0; r < i; ++r) s[r] = r, a[r] = zi(t, qa[e[r]]);
                      for (s.sort(function (t, e) {
                          return a[e] - a[t]
                        }), r = 0; r < i; ++r) a[r] = e[s[r]];
                      for (r = 0; r < i; ++r) e[r] = a[r];
                    }
                }(), e) {
                var s = +e[0][0],
                  a = +e[0][1],
                  u = +e[1][0],
                  c = +e[1][1];
                ! function (t, e, r, i) {
                  for (var n, o = qa.length; o--;) Bi(n = qa[o], t, e, r, i) && ki(n, t, e, r, i) && (Math.abs(n[0][0] - n[1][0]) > Xa || Math.abs(n[0][1] - n[1][1]) > Xa) || delete qa[o];
                }(s, a, u, c),
                function (t, e, r, i) {
                  var n, o, s, a, u, c, h, l, p, f, d, g, _ = Va.length,
                    y = !0;
                  for (n = 0; n < _; ++n)
                    if (o = Va[n]) {
                      for (s = o.site, a = (u = o.halfedges).length; a--;) qa[u[a]] || u.splice(a, 1);
                      for (a = 0, c = u.length; a < c;) d = (f = Ui(o, qa[u[a]]))[0], g = f[1], l = (h = Vi(o, qa[u[++a % c]]))[0], p = h[1], (Math.abs(d - l) > Xa || Math.abs(g - p) > Xa) && (u.splice(a, 0, qa.push(Ai(s, f, Math.abs(d - t) < Xa && i - g > Xa ? [t, Math.abs(l - t) < Xa ? p : i] : Math.abs(g - i) < Xa && r - d > Xa ? [Math.abs(p - i) < Xa ? l : r, i] : Math.abs(d - r) < Xa && g - e > Xa ? [r, Math.abs(l - r) < Xa ? p : e] : Math.abs(g - e) < Xa && d - t > Xa ? [Math.abs(p - e) < Xa ? l : t, e] : null)) - 1), ++c);
                      c && (y = !1);
                    } if (y) {
                    var m, v, x, w = 1 / 0;
                    for (n = 0, y = null; n < _; ++n)(o = Va[n]) && (x = (m = (s = o.site)[0] - t) * m + (v = s[1] - e) * v) < w && (w = x, y = o);
                    if (y) {
                      var b = [t, e],
                        E = [t, i],
                        L = [r, i],
                        S = [r, e];
                      y.halfedges.push(qa.push(Ai(s = y.site, b, E)) - 1, qa.push(Ai(s, E, L)) - 1, qa.push(Ai(s, L, S)) - 1, qa.push(Ai(s, S, b)) - 1);
                    }
                  }
                  for (n = 0; n < _; ++n)(o = Va[n]) && (o.halfedges.length || delete Va[n]);
                }(s, a, u, c);
              }
              this.edges = qa, this.cells = Va, za = Ua = qa = Va = null;
            }
  
            function Qi(t) {
              return (t = t.slice()).push(t[0]), o([t])
            }
  
            function $i(t, e, r, i) {
              var n = (i = i || {}).steps || 64,
                s = i.units || "kilometers",
                a = i.angle || 0,
                u = i.pivot || t,
                c = i.properties || t.properties || {};
              if (!t) throw new Error("center is required");
              if (!e) throw new Error("xSemiAxis is required");
              if (!r) throw new Error("ySemiAxis is required");
              if (!L(i)) throw new Error("options must be an object");
              if (!E(n)) throw new Error("steps must be a number");
              if (!E(a)) throw new Error("angle must be a number");
              var h = j(t);
              if ("degrees" === s) var l = x(a);
              else e = Xr(t, e, 90, {
                units: s
              }), r = Xr(t, r, 0, {
                units: s
              }), e = j(e)[0] - h[0], r = j(r)[1] - h[1];
              for (var p = [], f = 0; f < n; f += 1) {
                var d = -360 * f / n,
                  g = e * r / Math.sqrt(Math.pow(r, 2) + Math.pow(e, 2) * Math.pow(tn(d), 2)),
                  _ = e * r / Math.sqrt(Math.pow(e, 2) + Math.pow(r, 2) / Math.pow(tn(d), 2));
                if (d < -90 && d >= -270 && (g = -g), d < -180 && d >= -360 && (_ = -_), "degrees" === s) {
                  var y = g * Math.cos(l) + _ * Math.sin(l),
                    m = _ * Math.cos(l) - g * Math.sin(l);
                  g = y, _ = m;
                }
                p.push([g + h[0], _ + h[1]]);
              }
              return p.push(p[0]), "degrees" === s ? o([p], c) : ei(o([p], c), a, {
                pivot: u
              })
            }
  
            function tn(t) {
              var e = t * Math.PI / 180;
              return Math.tan(e)
            }
  
            function en(t, e) {
              if (!L(e = e || {})) throw new Error("options is invalid");
              var r = e.properties,
                n = e.weight;
              if (!t) throw new Error("geojson is required");
              var o = 0,
                s = 0,
                a = 0;
              return O(t, function (t, e, r) {
                var i = r[n];
                if (!E(i = null == i ? 1 : i)) throw new Error("weight value must be a number for feature index " + e);
                (i = Number(i)) > 0 && I(t, function (t) {
                  o += t[0] * i, s += t[1] * i, a += i;
                });
              }), i([o / a, s / a], r)
            }
  
            function rn(t, e, r, n) {
              var o = r.properties.tolerance || .001,
                s = 0,
                a = 0,
                u = 0,
                c = 0;
              if (D(r, function (e) {
                  var r = e.properties.weight,
                    i = null == r ? 1 : r;
                  if (!E(i = Number(i))) throw new Error("weight value must be a number");
                  if (i > 0) {
                    c += 1;
                    var n = i * At(e, t);
                    0 === n && (n = 1);
                    var o = i / n;
                    s += e.geometry.coordinates[0] * o, a += e.geometry.coordinates[1] * o, u += o;
                  }
                }), c < 1) throw new Error("no features to measure");
              var h = s / u,
                l = a / u;
              return 1 === c || 0 === n || Math.abs(h - e[0]) < o && Math.abs(l - e[1]) < o ? i([h, l], {
                medianCandidates: r.properties.medianCandidates
              }) : (r.properties.medianCandidates.push([h, l]), rn([h, l], t, r, n - 1))
            }
  
            function nn(t, e) {
              return {
                x: t[0] - e[0],
                y: t[1] - e[1]
              }
            }
  
            function on(t) {
              if (L(t) && (t = t.bbox), t && !Array.isArray(t)) throw new Error("bbox is invalid");
              return t ? function (t) {
                return [Math.random() * (t[2] - t[0]) + t[0], Math.random() * (t[3] - t[1]) + t[1]]
              }(t) : [360 * cn(), 180 * cn()]
            }
  
            function sn(t, e) {
              if (!L(e = e || {})) throw new Error("options is invalid");
              var r = e.bbox;
              null != t || (t = 1);
              for (var n = [], o = 0; o < t; o++) n.push(i(on(r)));
              return c(n)
            }
  
            function an(t, e) {
              if (!L(e = e || {})) throw new Error("options is invalid");
              var r = e.bbox,
                i = e.num_vertices,
                n = e.max_radial_length;
              null != t || (t = 1), E(i) || (i = 10), E(n) || (n = 10);
              for (var s = [], a = 0; a < t; a++) {
                var u = [],
                  h = Array.apply(null, new Array(i + 1)).map(Math.random);
                h.forEach(function (t, e, r) {
                  r[e] = e > 0 ? t + r[e - 1] : t;
                }), h.forEach(function (t) {
                  t = 2 * t * Math.PI / h[h.length - 1];
                  var e = Math.random();
                  u.push([e * n * Math.sin(t), e * n * Math.cos(t)]);
                }), u[u.length - 1] = u[0], u = u.map(function (t) {
                  return function (e) {
                    return [e[0] + t[0], e[1] + t[1]]
                  }
                }(on(r))), s.push(o([u]));
              }
              return c(s)
            }
  
            function un(t, e) {
              if (!L(e = e || {})) throw new Error("options is invalid");
              var r = e.bbox,
                i = e.num_vertices,
                n = e.max_length,
                o = e.max_rotation;
              null != t || (t = 1), (!E(i) || i < 2) && (i = 10), E(n) || (n = 1e-4), E(o) || (o = Math.PI / 8);
              for (var s = [], u = 0; u < t; u++) {
                for (var h = [on(r)], l = 0; l < i - 1; l++) {
                  var p = (0 === l ? 2 * Math.random() * Math.PI : Math.tan((h[l][1] - h[l - 1][1]) / (h[l][0] - h[l - 1][0]))) + (Math.random() - .5) * o * 2,
                    f = Math.random() * n;
                  h.push([h[l][0] + f * Math.cos(p), h[l][1] + f * Math.sin(p)]);
                }
                s.push(a(h));
              }
              return c(s)
            }
  
            function cn() {
              return Math.random() - .5
            }
  
            function hn(t, e) {
              if (!t) throw new Error("geojson is required");
              if ("FeatureCollection" !== t.type) throw new Error("geojson must be a FeatureCollection");
              if (null == e) throw new Error("filter is required");
              var r = [];
              return D(t, function (t) {
                dn(t.properties, e) && r.push(t);
              }), c(r)
            }
  
            function ln(t, e, r) {
              if (!t) throw new Error("geojson is required");
              if ("FeatureCollection" !== t.type) throw new Error("geojson must be a FeatureCollection");
              if (null == e) throw new Error("property is required");
              for (var i = fn(t, e), n = Object.keys(i), o = 0; o < n.length; o++) {
                for (var s = n[o], a = i[s], u = [], h = 0; h < a.length; h++) u.push(t.features[a[h]]);
                r(c(u), s, o);
              }
            }
  
            function pn(t, e, r, i) {
              var n = i;
              return ln(t, e, function (t, e, o) {
                n = 0 === o && void 0 === i ? t : r(n, t, e, o);
              }), n
            }
  
            function fn(t, e) {
              var r = {};
              return D(t, function (t, i) {
                var n = t.properties || {};
                if (n.hasOwnProperty(e)) {
                  var o = n[e];
                  r.hasOwnProperty(o) ? r[o].push(i) : r[o] = [i];
                }
              }), r
            }
  
            function dn(t, e) {
              if (void 0 === t) return !1;
              var r = typeof e;
              if ("number" === r || "string" === r) return t.hasOwnProperty(e);
              if (Array.isArray(e)) {
                for (var i = 0; i < e.length; i++)
                  if (!dn(t, e[i])) return !1;
                return !0
              }
              return gn(t, e)
            }
  
            function gn(t, e) {
              for (var r = Object.keys(e), i = 0; i < r.length; i++) {
                var n = r[i];
                if (t[n] !== e[n]) return !1
              }
              return !0
            }
  
            function _n(t, e) {
              if (!e) return {};
              if (!e.length) return {};
              for (var r = {}, i = 0; i < e.length; i++) {
                var n = e[i];
                t.hasOwnProperty(n) && (r[n] = t[n]);
              }
              return r
            }
  
            function yn() {}
  
            function mn(t) {
              this.message = t || "";
            }
  
            function vn(t) {
              this.message = t || "";
            }
  
            function xn() {}
  
            function wn(t) {
              return null === t ? fc : t.color
            }
  
            function bn(t) {
              return null === t ? null : t.parent
            }
  
            function En(t, e) {
              null !== t && (t.color = e);
            }
  
            function Ln(t) {
              return null === t ? null : t.left
            }
  
            function Sn(t) {
              return null === t ? null : t.right
            }
  
            function Cn() {
              this.root_ = null, this.size_ = 0;
            }
  
            function In() {}
  
            function Mn() {
              this.array_ = [], arguments[0] instanceof Qu && this.addAll(arguments[0]);
            }
  
            function Tn() {}
  
            function Pn(t) {
              this.message = t || "";
            }
  
            function Dn() {
              this.array_ = [];
            }
  
            function Nn(t) {
              switch (t.type) {
                case "Polygon":
                  return ur(t) > 1 ? t : null;
                case "MultiPolygon":
                  var e = [];
                  if (F(t, function (t) {
                      ur(t) > 1 && e.push(t.geometry.coordinates);
                    }), e.length) return {
                    type: "MultiPolygon",
                    coordinates: e
                  }
              }
            }
  
            function Rn() {
              this.reset();
            }
  
            function On(t, e, r) {
              var i = t.s = e + r,
                n = i - e,
                o = i - n;
              t.t = e - o + (r - n);
            }
  
            function An(t) {
              return t > 1 ? vf : t < -1 ? -vf : Math.asin(t)
            }
  
            function Fn() {}
  
            function kn(t, e) {
              t && Of.hasOwnProperty(t.type) && Of[t.type](t, e);
            }
  
            function Bn(t, e, r) {
              var i, n = -1,
                o = t.length - r;
              for (e.lineStart(); ++n < o;) i = t[n], e.point(i[0], i[1], i[2]);
              e.lineEnd();
            }
  
            function zn(t, e) {
              var r = -1,
                i = t.length;
              for (e.polygonStart(); ++r < i;) Bn(t[r], e, 1);
              e.polygonEnd();
            }
  
            function Vn(t) {
              return [Cf(t[1], t[0]), An(t[2])]
            }
  
            function Un(t) {
              var e = t[0],
                r = t[1],
                i = If(r);
              return [i * If(e), i * Pf(e), Pf(r)]
            }
  
            function qn(t, e) {
              return t[0] * e[0] + t[1] * e[1] + t[2] * e[2]
            }
  
            function jn(t, e) {
              return [t[1] * e[2] - t[2] * e[1], t[2] * e[0] - t[0] * e[2], t[0] * e[1] - t[1] * e[0]]
            }
  
            function Gn(t, e) {
              t[0] += e[0], t[1] += e[1], t[2] += e[2];
            }
  
            function Xn(t, e) {
              return [t[0] * e, t[1] * e, t[2] * e]
            }
  
            function Zn(t) {
              var e = Df(t[0] * t[0] + t[1] * t[1] + t[2] * t[2]);
              t[0] /= e, t[1] /= e, t[2] /= e;
            }
  
            function Yn(t, e) {
              return [t > mf ? t - wf : t < -mf ? t + wf : t, e]
            }
  
            function Wn(t, e, r) {
              return (t %= wf) ? e || r ? Ff(Kn(t), Jn(e, r)) : Kn(t) : e || r ? Jn(e, r) : Yn
            }
  
            function Hn(t) {
              return function (e, r) {
                return [(e += t) > mf ? e - wf : e < -mf ? e + wf : e, r]
              }
            }
  
            function Kn(t) {
              var e = Hn(t);
              return e.invert = Hn(-t), e
            }
  
            function Jn(t, e) {
              function r(t, e) {
                var r = If(e),
                  a = If(t) * r,
                  u = Pf(t) * r,
                  c = Pf(e),
                  h = c * i + a * n;
                return [Cf(u * o - h * s, a * i - c * n), An(h * o + u * s)]
              }
              var i = If(t),
                n = Pf(t),
                o = If(e),
                s = Pf(e);
              return r.invert = function (t, e) {
                var r = If(e),
                  a = If(t) * r,
                  u = Pf(t) * r,
                  c = Pf(e),
                  h = c * o - u * s;
                return [Cf(u * o + c * s, a * i + h * n), An(h * i - a * n)]
              }, r
            }
  
            function Qn(t, e) {
              (e = Un(e))[0] -= t, Zn(e);
              var r = function (t) {
                return t > 1 ? 0 : t < -1 ? mf : Math.acos(t)
              }(-e[1]);
              return ((-e[2] < 0 ? -r : r) + wf - yf) % wf
            }
  
            function $n(t, e, r, i) {
              this.x = t, this.z = e, this.o = r, this.e = i, this.v = !1, this.n = this.p = null;
            }
  
            function to(t) {
              if (e = t.length) {
                for (var e, r, i = 0, n = t[0]; ++i < e;) n.n = r = t[i], r.p = n, n = r;
                n.n = r = t[0], r.p = n;
              }
            }
  
            function eo(t, e, r, i) {
              function n(n, o) {
                return t <= n && n <= r && e <= o && o <= i
              }
  
              function o(n, o, a, c) {
                var h = 0,
                  l = 0;
                if (null == n || (h = s(n, a)) !== (l = s(o, a)) || u(n, o) < 0 ^ a > 0)
                  do {
                    c.point(0 === h || 3 === h ? t : r, h > 1 ? i : e);
                  } while ((h = (h + a + 4) % 4) !== l);
                else c.point(o[0], o[1]);
              }
  
              function s(i, n) {
                return Lf(i[0] - t) < yf ? n > 0 ? 0 : 3 : Lf(i[0] - r) < yf ? n > 0 ? 2 : 1 : Lf(i[1] - e) < yf ? n > 0 ? 1 : 0 : n > 0 ? 3 : 2
              }
  
              function a(t, e) {
                return u(t.x, e.x)
              }
  
              function u(t, e) {
                var r = s(t, 1),
                  i = s(e, 1);
                return r !== i ? r - i : 0 === r ? e[1] - t[1] : 1 === r ? t[0] - e[0] : 2 === r ? t[1] - e[1] : e[0] - t[0]
              }
              return function (s) {
                function u(t, e) {
                  n(t, e) && w.point(t, e);
                }
  
                function c(o, s) {
                  var a = n(o, s);
                  if (l && p.push([o, s]), v) f = o, d = s, g = a, v = !1, a && (w.lineStart(), w.point(o, s));
                  else if (a && m) w.point(o, s);
                  else {
                    var u = [_ = Math.max(Xf, Math.min(Gf, _)), y = Math.max(Xf, Math.min(Gf, y))],
                      c = [o = Math.max(Xf, Math.min(Gf, o)), s = Math.max(Xf, Math.min(Gf, s))];
                    zf(u, c, t, e, r, i) ? (m || (w.lineStart(), w.point(u[0], u[1])), w.point(c[0], c[1]), a || w.lineEnd(), x = !1) : a && (w.lineStart(), w.point(o, s), x = !1);
                  }
                  _ = o, y = s, m = a;
                }
                var h, l, p, f, d, g, _, y, m, v, x, w = s,
                  b = Bf(),
                  E = {
                    point: u,
                    lineStart: function () {
                      E.point = c, l && l.push(p = []), v = !0, m = !1, _ = y = NaN;
                    },
                    lineEnd: function () {
                      h && (c(f, d), g && m && b.rejoin(), h.push(b.result())), E.point = u, m && w.lineEnd();
                    },
                    polygonStart: function () {
                      w = b, h = [], l = [], x = !0;
                    },
                    polygonEnd: function () {
                      var e = function () {
                          for (var e = 0, r = 0, n = l.length; r < n; ++r)
                            for (var o, s, a = l[r], u = 1, c = a.length, h = a[0], p = h[0], f = h[1]; u < c; ++u) o = p, s = f, p = (h = a[u])[0], f = h[1], s <= i ? f > i && (p - o) * (i - s) > (f - s) * (t - o) && ++e : f <= i && (p - o) * (i - s) < (f - s) * (t - o) && --e;
                          return e
                        }(),
                        r = x && e,
                        n = (h = jf(h)).length;
                      (r || n) && (s.polygonStart(), r && (s.lineStart(), o(null, null, 1, s), s.lineEnd()), n && Uf(h, a, e, o, s), s.polygonEnd()), w = s, h = l = p = null;
                    }
                  };
                return E
              }
            }
  
            function ro(t) {
              return t.length > 1
            }
  
            function io(t, e) {
              return ((t = t.x)[0] < 0 ? t[1] - vf - yf : vf - t[1]) - ((e = e.x)[0] < 0 ? e[1] - vf - yf : vf - e[1])
            }
  
            function no(t) {
              return function (e) {
                var r = new oo;
                for (var i in t) r[i] = t[i];
                return r.stream = e, r
              }
            }
  
            function oo() {}
  
            function so(t, e, r) {
              var i = e[1][0] - e[0][0],
                n = e[1][1] - e[0][1],
                o = t.clipExtent && t.clipExtent();
              t.scale(150).translate([0, 0]), null != o && t.clipExtent(null), Af(r, t.stream(Qf));
              var s = Qf.result(),
                a = Math.min(i / (s[1][0] - s[0][0]), n / (s[1][1] - s[0][1])),
                u = +e[0][0] + (i - a * (s[1][0] + s[0][0])) / 2,
                c = +e[0][1] + (n - a * (s[1][1] + s[0][1])) / 2;
              return null != o && t.clipExtent(o), t.scale(150 * a).translate([u, c])
            }
  
            function ao(t, e) {
              return [t, Tf(Nf((vf + e) / 2))]
            }
  
            function uo(t, e) {
              return [Tf(Nf((vf + e) / 2)), -t]
            }
  
            function co(t, r, i, n) {
              var o = t.properties || {},
                s = "Feature" === t.type ? t.geometry : t;
              if ("GeometryCollection" === s.type) {
                var a = [];
                return O(t, function (t) {
                  var e = co(t, r, i);
                  e && a.push(e);
                }), c(a)
              }
              var u, h = q(t),
                l = h[1] > 50 && h[3] > 50;
              u = l ? {
                type: s.type,
                coordinates: ho(s.coordinates, po(s))
              } : $e(s);
              var p, f = (new rh).read(u),
                d = g(_(r, i), "meters"),
                y = Yl.bufferOp(f, d);
              if (! function t(e) {
                  return Array.isArray(e[0]) ? t(e[0]) : isNaN(e[0])
                }((y = (new ih).write(y)).coordinates)) return (p = l ? {
                type: y.type,
                coordinates: lo(y.coordinates, po(s))
              } : tr(y)).geometry ? p : e(p, o)
            }
  
            function ho(t, e) {
              return "object" != typeof t[0] ? e(t) : t.map(function (t) {
                return ho(t, e)
              })
            }
  
            function lo(t, e) {
              return "object" != typeof t[0] ? e.invert(t) : t.map(function (t) {
                return lo(t, e)
              })
            }
  
            function po(t) {
              var e = ce(t).geometry.coordinates.reverse(),
                r = e.map(function (t) {
                  return -t
                });
              return sd().center(e).rotate(r).scale(bo)
            }
  
            function fo() {
              for (var t = arguments, e = new rh, r = e.read(JSON.stringify(arguments[0].geometry)), i = 1; i < arguments.length; i++) r = df.union(r, e.read(JSON.stringify(t[i].geometry)));
              return {
                type: "Feature",
                geometry: r = (new ih).write(r),
                properties: arguments[0].properties
              }
            }
  
            function go(t, r) {
              var i = H(t),
                n = H(r);
              if (Ht(vr(n, {
                  precision: 4
                })).coordinates[0].length < 4) return null;
              if (Ht(vr(i, {
                  precision: 4
                })).coordinates[0].length < 4) return null;
              var o = new rh,
                s = o.read(vr(i)),
                a = o.read(vr(n)),
                u = of .intersection(s, a);
              return u.isEmpty() ? null : e((new ih).write(u))
            }
  
            function _o(t, e) {
              return function (t, e, r) {
                var i, n;
                if (!Array.isArray(e)) throw new Error("Get closest expects an array as second argument");
                return e.forEach(function (e, r) {
                  var o = function (t, e) {
                    return t - e
                  }(e, t);
                  o >= 0 && (void 0 === n || o < n) && (n = o, i = r);
                }), i
              }(t, e)
            }
  
            function yo(t, e, r) {
              if (!L(r = r || {})) throw new Error("options is invalid");
              var i = r.properties || {},
                n = r.triangles,
                s = r.mask;
              if (null == e) throw new Error("cellSide is required");
              if (!E(e)) throw new Error("cellSide is invalid");
              if (!t) throw new Error("bbox is required");
              if (!Array.isArray(t)) throw new Error("bbox must be array");
              if (4 !== t.length) throw new Error("bbox must contain 4 numbers");
              if (s && -1 === ["Polygon", "MultiPolygon"].indexOf(J(s))) throw new Error("options.mask must be a (Multi)Polygon");
              var a = t[0],
                u = t[1],
                h = t[2],
                l = t[3],
                p = (u + l) / 2,
                f = (a + h) / 2,
                d = 2 * e / At([a, p], [h, p], r) * (h - a),
                g = 2 * e / At([f, u], [f, l], r) * (l - u),
                _ = d / 2,
                y = 2 * _,
                m = Math.sqrt(3) / 2 * g,
                v = h - a,
                x = l - u,
                w = .75 * y,
                b = m,
                S = (v - y) / (y - _ / 2),
                C = Math.floor(S),
                I = (C * w - _ / 2 - v) / 2 - _ / 2 + w / 2,
                M = Math.floor((x - m) / m),
                T = (x - M * m) / 2,
                P = M * m - x > m / 2;
              P && (T -= m / 4);
              for (var D = [], N = [], R = 0; R < 6; R++) {
                var O = 2 * Math.PI / 6 * R;
                D.push(Math.cos(O)), N.push(Math.sin(O));
              }
              for (var A = [], F = 0; F <= C; F++)
                for (var k = 0; k <= M; k++) {
                  var B = F % 2 == 1;
                  if (!(0 === k && B || 0 === k && P)) {
                    var z = F * w + a - I,
                      V = k * b + u + T;
                    if (B && (V -= m / 2), !0 === n)(function (t, e, r, i, n, s) {
                      for (var a = [], u = 0; u < 6; u++) {
                        var c = [];
                        c.push(t), c.push([t[0] + e * n[u], t[1] + r * s[u]]), c.push([t[0] + e * n[(u + 1) % 6], t[1] + r * s[(u + 1) % 6]]), c.push(t), a.push(o([c], i));
                      }
                      return a
                    })([z, V], d / 2, g / 2, i, D, N).forEach(function (t) {
                      s ? go(s, t) && A.push(t) : A.push(t);
                    });
                    else {
                      var U = function (t, e, r, i, n, s) {
                        for (var a = [], u = 0; u < 6; u++) {
                          var c = t[0] + e * n[u],
                            h = t[1] + r * s[u];
                          a.push([c, h]);
                        }
                        return a.push(a[0].slice()), o([a], i)
                      }([z, V], d / 2, g / 2, i, D, N);
                      s ? go(s, U) && A.push(U) : A.push(U);
                    }
                  }
                }
              return c(A)
            }
  
            function mo(t) {
              if (t.features.length <= 1) return t;
              var e = function (t) {
                  var e = No(),
                    r = [];
                  return F(t, function (t, e) {
                    var i = q(t);
                    r.push({
                      minX: i[0],
                      minY: i[1],
                      maxX: i[2],
                      maxY: i[3],
                      geojson: t,
                      index: e
                    });
                  }), e.load(r), e
                }(t),
                r = [],
                i = {};
              return F(t, function (t, n) {
                if (i[n]) return !0;
                for (e.remove({
                    index: n
                  }, vo), i[n] = !0;;) {
                  var o = q(t),
                    s = e.search({
                      minX: o[0],
                      minY: o[1],
                      maxX: o[2],
                      maxY: o[3]
                    });
                  if (s.length > 0) {
                    var a = s.map(function (t) {
                      return i[t.index] = !0, e.remove({
                        index: t.index
                      }, vo), t.geojson
                    });
                    a.push(t), t = fo.apply(this, a);
                  }
                  if (0 === s.length) break
                }
                r.push(t);
              }), c(r)
            }
  
            function vo(t, e) {
              return t.index === e.index
            }
  
            function xo(t, e, r) {
              if (!L(r = r || {})) throw new Error("options is invalid");
              var i = r.properties,
                n = r.mask,
                s = [];
              if (null == e) throw new Error("cellSide is required");
              if (!E(e)) throw new Error("cellSide is invalid");
              if (!t) throw new Error("bbox is required");
              if (!Array.isArray(t)) throw new Error("bbox must be array");
              if (4 !== t.length) throw new Error("bbox must contain 4 numbers");
              if (n && -1 === ["Polygon", "MultiPolygon"].indexOf(J(n))) throw new Error("options.mask must be a (Multi)Polygon");
              for (var a = t[0], u = t[1], h = t[2], l = t[3], p = e / At([a, u], [h, u], r) * (h - a), f = e / At([a, u], [a, l], r) * (l - u), d = h - a, g = l - u, _ = Math.floor(d / p), y = Math.floor(g / f), m = (g - y * f) / 2, v = a + (d - _ * p) / 2, x = 0; x < _; x++) {
                for (var w = u + m, b = 0; b < y; b++) {
                  var S = o([
                    [
                      [v, w],
                      [v, w + f],
                      [v + p, w + f],
                      [v + p, w],
                      [v, w]
                    ]
                  ], i);
                  n ? go(n, S) && s.push(S) : s.push(S), w += f;
                }
                v += p;
              }
              return c(s)
            }
  
            function wo(t, e, r) {
              if (!L(r = r || {})) throw new Error("options is invalid");
              var i = r.properties,
                n = r.mask,
                s = [];
              if (null == e) throw new Error("cellSide is required");
              if (!E(e)) throw new Error("cellSide is invalid");
              if (!t) throw new Error("bbox is required");
              if (!Array.isArray(t)) throw new Error("bbox must be array");
              if (4 !== t.length) throw new Error("bbox must contain 4 numbers");
              if (n && -1 === ["Polygon", "MultiPolygon"].indexOf(J(n))) throw new Error("options.mask must be a (Multi)Polygon");
              for (var a = e / At([t[0], t[1]], [t[2], t[1]], r) * (t[2] - t[0]), u = e / At([t[0], t[1]], [t[0], t[3]], r) * (t[3] - t[1]), h = 0, l = t[0]; l <= t[2];) {
                for (var p = 0, f = t[1]; f <= t[3];) {
                  var d = null,
                    g = null;
                  h % 2 == 0 && p % 2 == 0 ? (d = o([
                    [
                      [l, f],
                      [l, f + u],
                      [l + a, f],
                      [l, f]
                    ]
                  ], i), g = o([
                    [
                      [l, f + u],
                      [l + a, f + u],
                      [l + a, f],
                      [l, f + u]
                    ]
                  ], i)) : h % 2 == 0 && p % 2 == 1 ? (d = o([
                    [
                      [l, f],
                      [l + a, f + u],
                      [l + a, f],
                      [l, f]
                    ]
                  ], i), g = o([
                    [
                      [l, f],
                      [l, f + u],
                      [l + a, f + u],
                      [l, f]
                    ]
                  ], i)) : p % 2 == 0 && h % 2 == 1 ? (d = o([
                    [
                      [l, f],
                      [l, f + u],
                      [l + a, f + u],
                      [l, f]
                    ]
                  ], i), g = o([
                    [
                      [l, f],
                      [l + a, f + u],
                      [l + a, f],
                      [l, f]
                    ]
                  ], i)) : p % 2 == 1 && h % 2 == 1 && (d = o([
                    [
                      [l, f],
                      [l, f + u],
                      [l + a, f],
                      [l, f]
                    ]
                  ], i), g = o([
                    [
                      [l, f + u],
                      [l + a, f + u],
                      [l + a, f],
                      [l, f + u]
                    ]
                  ], i)), n ? (go(n, d) && s.push(d), go(n, g) && s.push(g)) : (s.push(d), s.push(g)), f += u, p++;
                }
                h++, l += a;
              }
              return c(s)
            }
            var bo = 6371008.8,
              Eo = {
                meters: bo,
                metres: bo,
                millimeters: 1e3 * bo,
                millimetres: 1e3 * bo,
                centimeters: 100 * bo,
                centimetres: 100 * bo,
                kilometers: bo / 1e3,
                kilometres: bo / 1e3,
                miles: bo / 1609.344,
                nauticalmiles: bo / 1852,
                inches: 39.37 * bo,
                yards: bo / 1.0936,
                feet: 3.28084 * bo,
                radians: 1,
                degrees: bo / 111325
              },
              Lo = {
                meters: 1,
                metres: 1,
                millimeters: 1e3,
                millimetres: 1e3,
                centimeters: 100,
                centimetres: 100,
                kilometers: .001,
                kilometres: .001,
                miles: 1 / 1609.344,
                nauticalmiles: 1 / 1852,
                inches: 39.37,
                yards: 1 / 1.0936,
                feet: 3.28084,
                radians: 1 / bo,
                degrees: 1 / 111325
              },
              So = {
                meters: 1,
                metres: 1,
                millimeters: 1e6,
                millimetres: 1e6,
                centimeters: 1e4,
                centimetres: 1e4,
                kilometers: 1e-6,
                kilometres: 1e-6,
                acres: 247105e-9,
                miles: 386e-9,
                yards: 1.195990046,
                feet: 10.763910417,
                inches: 1550.003100006
              },
              Co = Object.freeze({
                earthRadius: bo,
                factors: Eo,
                unitsFactors: Lo,
                areaFactors: So,
                feature: e,
                geometry: r,
                point: i,
                points: n,
                polygon: o,
                polygons: s,
                lineString: a,
                lineStrings: u,
                featureCollection: c,
                multiLineString: h,
                multiPoint: l,
                multiPolygon: p,
                geometryCollection: f,
                round: d,
                radiansToLength: g,
                lengthToRadians: _,
                lengthToDegrees: y,
                bearingToAzimuth: m,
                radiansToDegrees: v,
                degreesToRadians: x,
                convertLength: w,
                convertArea: b,
                isNumber: E,
                isObject: L,
                validateBBox: S,
                validateId: C,
                radians2degrees: function () {
                  throw new Error("method has been renamed to `radiansToDegrees`")
                },
                degrees2radians: function () {
                  throw new Error("method has been renamed to `degreesToRadians`")
                },
                distanceToDegrees: function () {
                  throw new Error("method has been renamed to `lengthToDegrees`")
                },
                distanceToRadians: function () {
                  throw new Error("method has been renamed to `lengthToRadians`")
                },
                radiansToDistance: function () {
                  throw new Error("method has been renamed to `radiansToLength`")
                },
                bearingToAngle: function () {
                  throw new Error("method has been renamed to `bearingToAzimuth`")
                },
                convertDistance: function () {
                  throw new Error("method has been renamed to `convertLength`")
                }
              }),
              Io = Object.freeze({
                coordEach: I,
                coordReduce: M,
                propEach: T,
                propReduce: P,
                featureEach: D,
                featureReduce: N,
                coordAll: R,
                geomEach: O,
                geomReduce: A,
                flattenEach: F,
                flattenReduce: k,
                segmentEach: B,
                segmentReduce: z,
                lineEach: V,
                lineReduce: U
              }),
              Mo = Object.freeze({
                getCoord: j,
                getCoords: G,
                containsNumber: X,
                geojsonType: Z,
                featureOf: Y,
                collectionOf: W,
                getGeom: H,
                getGeomType: K,
                getType: J
              }),
              To = {
                successCallback: null,
                verbose: !1
              },
              Po = {},
              Do = function t(e, r, i, n, o) {
                for (i = i || 0, n = n || e.length - 1, o = o || function (t, e) {
                    return t < e ? -1 : t > e ? 1 : 0
                  }; n > i;) {
                  if (n - i > 600) {
                    var s = n - i + 1,
                      a = r - i + 1,
                      u = Math.log(s),
                      c = .5 * Math.exp(2 * u / 3),
                      h = .5 * Math.sqrt(u * c * (s - c) / s) * (a - s / 2 < 0 ? -1 : 1);
                    t(e, r, Math.max(i, Math.floor(r - a * c / s + h)), Math.min(n, Math.floor(r + (s - a) * c / s + h)), o);
                  }
                  var l = e[r],
                    p = i,
                    f = n;
                  for (it(e, i, r), o(e[n], l) > 0 && it(e, i, n); p < f;) {
                    for (it(e, p, f), p++, f--; o(e[p], l) < 0;) p++;
                    for (; o(e[f], l) > 0;) f--;
                  }
                  0 === o(e[i], l) ? it(e, i, f) : it(e, ++f, n), f <= r && (i = f + 1), r <= f && (n = f - 1);
                }
              },
              No = nt;
            nt.prototype = {
              all: function () {
                return this._all(this.data, [])
              },
              search: function (t) {
                var e = this.data,
                  r = [],
                  i = this.toBBox;
                if (!ft(t, e)) return r;
                for (var n, o, s, a, u = []; e;) {
                  for (n = 0, o = e.children.length; n < o; n++) s = e.children[n], ft(t, a = e.leaf ? i(s) : s) && (e.leaf ? r.push(s) : pt(t, a) ? this._all(s, r) : u.push(s));
                  e = u.pop();
                }
                return r
              },
              collides: function (t) {
                var e = this.data,
                  r = this.toBBox;
                if (!ft(t, e)) return !1;
                for (var i, n, o, s, a = []; e;) {
                  for (i = 0, n = e.children.length; i < n; i++)
                    if (o = e.children[i], ft(t, s = e.leaf ? r(o) : o)) {
                      if (e.leaf || pt(t, s)) return !0;
                      a.push(o);
                    } e = a.pop();
                }
                return !1
              },
              load: function (t) {
                if (!t || !t.length) return this;
                if (t.length < this._minEntries) {
                  for (var e = 0, r = t.length; e < r; e++) this.insert(t[e]);
                  return this
                }
                var i = this._build(t.slice(), 0, t.length - 1, 0);
                if (this.data.children.length)
                  if (this.data.height === i.height) this._splitRoot(this.data, i);
                  else {
                    if (this.data.height < i.height) {
                      var n = this.data;
                      this.data = i, i = n;
                    }
                    this._insert(i, this.data.height - i.height - 1, !0);
                  }
                else this.data = i;
                return this
              },
              insert: function (t) {
                return t && this._insert(t, this.data.height - 1), this
              },
              clear: function () {
                return this.data = dt([]), this
              },
              remove: function (t, e) {
                if (!t) return this;
                for (var r, i, n, o, s = this.data, a = this.toBBox(t), u = [], c = []; s || u.length;) {
                  if (s || (s = u.pop(), i = u[u.length - 1], r = c.pop(), o = !0), s.leaf && -1 !== (n = function (t, e, r) {
                      if (!r) return e.indexOf(t);
                      for (var i = 0; i < e.length; i++)
                        if (r(t, e[i])) return i;
                      return -1
                    }(t, s.children, e))) return s.children.splice(n, 1), u.push(s), this._condense(u), this;
                  o || s.leaf || !pt(s, a) ? i ? (r++, s = i.children[r], o = !1) : s = null : (u.push(s), c.push(r), r = 0, i = s, s = s.children[0]);
                }
                return this
              },
              toBBox: function (t) {
                return t
              },
              compareMinX: ut,
              compareMinY: ct,
              toJSON: function () {
                return this.data
              },
              fromJSON: function (t) {
                return this.data = t, this
              },
              _all: function (t, e) {
                for (var r = []; t;) t.leaf ? e.push.apply(e, t.children) : r.push.apply(r, t.children), t = r.pop();
                return e
              },
              _build: function (t, e, r, i) {
                var n, o = r - e + 1,
                  s = this._maxEntries;
                if (o <= s) return ot(n = dt(t.slice(e, r + 1)), this.toBBox), n;
                i || (i = Math.ceil(Math.log(o) / Math.log(s)), s = Math.ceil(o / Math.pow(s, i - 1))), (n = dt([])).leaf = !1, n.height = i;
                var a, u, c, h, l = Math.ceil(o / s),
                  p = l * Math.ceil(Math.sqrt(s));
                for (gt(t, e, r, p, this.compareMinX), a = e; a <= r; a += p)
                  for (gt(t, a, c = Math.min(a + p - 1, r), l, this.compareMinY), u = a; u <= c; u += l) h = Math.min(u + l - 1, c), n.children.push(this._build(t, u, h, i - 1));
                return ot(n, this.toBBox), n
              },
              _chooseSubtree: function (t, e, r, i) {
                for (var n, o, s, a, u, c, h, l; i.push(e), !e.leaf && i.length - 1 !== r;) {
                  for (h = l = 1 / 0, n = 0, o = e.children.length; n < o; n++) u = ht(s = e.children[n]), (c = function (t, e) {
                    return (Math.max(e.maxX, t.maxX) - Math.min(e.minX, t.minX)) * (Math.max(e.maxY, t.maxY) - Math.min(e.minY, t.minY))
                  }(t, s) - u) < l ? (l = c, h = u < h ? u : h, a = s) : c === l && u < h && (h = u, a = s);
                  e = a || e.children[0];
                }
                return e
              },
              _insert: function (t, e, r) {
                var i = this.toBBox,
                  n = r ? t : i(t),
                  o = [],
                  s = this._chooseSubtree(n, this.data, e, o);
                for (s.children.push(t), at(s, n); e >= 0 && o[e].children.length > this._maxEntries;) this._split(o, e), e--;
                this._adjustParentBBoxes(n, o, e);
              },
              _split: function (t, e) {
                var r = t[e],
                  i = r.children.length,
                  n = this._minEntries;
                this._chooseSplitAxis(r, n, i);
                var o = this._chooseSplitIndex(r, n, i),
                  s = dt(r.children.splice(o, r.children.length - o));
                s.height = r.height, s.leaf = r.leaf, ot(r, this.toBBox), ot(s, this.toBBox), e ? t[e - 1].children.push(s) : this._splitRoot(r, s);
              },
              _splitRoot: function (t, e) {
                this.data = dt([t, e]), this.data.height = t.height + 1, this.data.leaf = !1, ot(this.data, this.toBBox);
              },
              _chooseSplitIndex: function (t, e, r) {
                var i, n, o, s, a, u, c, h;
                for (u = c = 1 / 0, i = e; i <= r - e; i++) s = function (t, e) {
                  var r = Math.max(t.minX, e.minX),
                    i = Math.max(t.minY, e.minY),
                    n = Math.min(t.maxX, e.maxX),
                    o = Math.min(t.maxY, e.maxY);
                  return Math.max(0, n - r) * Math.max(0, o - i)
                }(n = st(t, 0, i, this.toBBox), o = st(t, i, r, this.toBBox)), a = ht(n) + ht(o), s < u ? (u = s, h = i, c = a < c ? a : c) : s === u && a < c && (c = a, h = i);
                return h
              },
              _chooseSplitAxis: function (t, e, r) {
                var i = t.leaf ? this.compareMinX : ut,
                  n = t.leaf ? this.compareMinY : ct;
                this._allDistMargin(t, e, r, i) < this._allDistMargin(t, e, r, n) && t.children.sort(i);
              },
              _allDistMargin: function (t, e, r, i) {
                t.children.sort(i);
                var n, o, s = this.toBBox,
                  a = st(t, 0, e, s),
                  u = st(t, r - e, r, s),
                  c = lt(a) + lt(u);
                for (n = e; n < r - e; n++) o = t.children[n], at(a, t.leaf ? s(o) : o), c += lt(a);
                for (n = r - e - 1; n >= e; n--) o = t.children[n], at(u, t.leaf ? s(o) : o), c += lt(u);
                return c
              },
              _adjustParentBBoxes: function (t, e, r) {
                for (var i = r; i >= 0; i--) at(e[i], t);
              },
              _condense: function (t) {
                for (var e, r = t.length - 1; r >= 0; r--) 0 === t[r].children.length ? r > 0 ? (e = t[r - 1].children).splice(e.indexOf(t[r]), 1) : this.clear() : ot(t[r], this.toBBox);
              },
              _initFormat: function (t) {
                var e = ["return a", " - b", ";"];
                this.compareMinX = new Function("a", "b", e.join(t[0])), this.compareMinY = new Function("a", "b", e.join(t[1])), this.toBBox = new Function("a", "return {minX: a" + t[0] + ", minY: a" + t[1] + ", maxX: a" + t[2] + ", maxY: a" + t[3] + "};");
              }
            };
            var Ro = function (t, e, r) {
                var i = t * e,
                  n = Oo * t,
                  o = n - (n - t),
                  s = t - o,
                  a = Oo * e,
                  u = a - (a - e),
                  c = e - u,
                  h = s * c - (i - o * u - s * u - o * c);
                return r ? (r[0] = h, r[1] = i, r) : [h, i]
              },
              Oo = +(Math.pow(2, 27) + 1),
              Ao = function (t, e) {
                var r = 0 | t.length,
                  i = 0 | e.length;
                if (1 === r && 1 === i) return function (t, e) {
                  var r = t + e,
                    i = r - t,
                    n = t - (r - i) + (e - i);
                  return n ? [n, r] : [r]
                }(t[0], e[0]);
                var n, o, s = new Array(r + i),
                  a = 0,
                  u = 0,
                  c = 0,
                  h = Math.abs,
                  l = t[u],
                  p = h(l),
                  f = e[c],
                  d = h(f);
                p < d ? (o = l, (u += 1) < r && (p = h(l = t[u]))) : (o = f, (c += 1) < i && (d = h(f = e[c]))), u < r && p < d || c >= i ? (n = l, (u += 1) < r && (p = h(l = t[u]))) : (n = f, (c += 1) < i && (d = h(f = e[c])));
                for (var g, _, y = n + o, m = y - n, v = o - m, x = v, w = y; u < r && c < i;) p < d ? (n = l, (u += 1) < r && (p = h(l = t[u]))) : (n = f, (c += 1) < i && (d = h(f = e[c]))), (v = (o = x) - (m = (y = n + o) - n)) && (s[a++] = v), x = w - ((g = w + y) - (_ = g - w)) + (y - _), w = g;
                for (; u < r;)(v = (o = x) - (m = (y = (n = l) + o) - n)) && (s[a++] = v), x = w - ((g = w + y) - (_ = g - w)) + (y - _), w = g, (u += 1) < r && (l = t[u]);
                for (; c < i;)(v = (o = x) - (m = (y = (n = f) + o) - n)) && (s[a++] = v), x = w - ((g = w + y) - (_ = g - w)) + (y - _), w = g, (c += 1) < i && (f = e[c]);
                return x && (s[a++] = x), w && (s[a++] = w), a || (s[a++] = 0), s.length = a, s
              },
              Fo = function (t, e, r) {
                var i = t + e,
                  n = i - t,
                  o = e - n,
                  s = t - (i - n);
                return r ? (r[0] = s + o, r[1] = i, r) : [s + o, i]
              },
              ko = function (t, e) {
                var r = t.length;
                if (1 === r) {
                  var i = Ro(t[0], e);
                  return i[0] ? i : [i[1]]
                }
                var n = new Array(2 * r),
                  o = [.1, .1],
                  s = [.1, .1],
                  a = 0;
                Ro(t[0], e, o), o[0] && (n[a++] = o[0]);
                for (var u = 1; u < r; ++u) {
                  Ro(t[u], e, s);
                  var c = o[1];
                  Fo(c, s[0], o), o[0] && (n[a++] = o[0]);
                  var h = s[1],
                    l = o[1],
                    p = h + l,
                    f = l - (p - h);
                  o[1] = p, f && (n[a++] = f);
                }
                return o[1] && (n[a++] = o[1]), 0 === a && (n[a++] = 0), n.length = a, n
              },
              Bo = function (t, e) {
                var r = 0 | t.length,
                  i = 0 | e.length;
                if (1 === r && 1 === i) return function (t, e) {
                  var r = t + e,
                    i = r - t,
                    n = t - (r - i) + (e - i);
                  return n ? [n, r] : [r]
                }(t[0], -e[0]);
                var n, o, s = new Array(r + i),
                  a = 0,
                  u = 0,
                  c = 0,
                  h = Math.abs,
                  l = t[u],
                  p = h(l),
                  f = -e[c],
                  d = h(f);
                p < d ? (o = l, (u += 1) < r && (p = h(l = t[u]))) : (o = f, (c += 1) < i && (d = h(f = -e[c]))), u < r && p < d || c >= i ? (n = l, (u += 1) < r && (p = h(l = t[u]))) : (n = f, (c += 1) < i && (d = h(f = -e[c])));
                for (var g, _, y = n + o, m = y - n, v = o - m, x = v, w = y; u < r && c < i;) p < d ? (n = l, (u += 1) < r && (p = h(l = t[u]))) : (n = f, (c += 1) < i && (d = h(f = -e[c]))), (v = (o = x) - (m = (y = n + o) - n)) && (s[a++] = v), x = w - ((g = w + y) - (_ = g - w)) + (y - _), w = g;
                for (; u < r;)(v = (o = x) - (m = (y = (n = l) + o) - n)) && (s[a++] = v), x = w - ((g = w + y) - (_ = g - w)) + (y - _), w = g, (u += 1) < r && (l = t[u]);
                for (; c < i;)(v = (o = x) - (m = (y = (n = f) + o) - n)) && (s[a++] = v), x = w - ((g = w + y) - (_ = g - w)) + (y - _), w = g, (c += 1) < i && (f = -e[c]);
                return x && (s[a++] = x), w && (s[a++] = w), a || (s[a++] = 0), s.length = a, s
              },
              zo = _t(function (t) {
                function e(t, e) {
                  for (var r = new Array(t.length - 1), i = 1; i < t.length; ++i)
                    for (var n = r[i - 1] = new Array(t.length - 1), o = 0, s = 0; o < t.length; ++o) o !== e && (n[s++] = t[i][o]);
                  return r
                }
  
                function r(t) {
                  return 1 & t ? "-" : ""
                }
  
                function i(t) {
                  if (1 === t.length) return t[0];
                  if (2 === t.length) return ["sum(", t[0], ",", t[1], ")"].join("");
                  var e = t.length >> 1;
                  return ["sum(", i(t.slice(0, e)), ",", i(t.slice(e)), ")"].join("")
                }
  
                function n(t) {
                  if (2 === t.length) return [
                    ["sum(prod(", t[0][0], ",", t[1][1], "),prod(-", t[0][1], ",", t[1][0], "))"].join("")
                  ];
                  for (var o = [], s = 0; s < t.length; ++s) o.push(["scale(", i(n(e(t, s))), ",", r(s), t[0][s], ")"].join(""));
                  return o
                }
  
                function o(t) {
                  for (var r = [], o = [], s = function (t) {
                      for (var e = new Array(t), r = 0; r < t; ++r) {
                        e[r] = new Array(t);
                        for (var i = 0; i < t; ++i) e[r][i] = ["m", i, "[", t - r - 1, "]"].join("");
                      }
                      return e
                    }(t), a = [], u = 0; u < t; ++u) 0 == (1 & u) ? r.push.apply(r, n(e(s, u))) : o.push.apply(o, n(e(s, u))), a.push("m" + u);
                  var c = i(r),
                    h = i(o),
                    l = "orientation" + t + "Exact",
                    p = ["function ", l, "(", a.join(), "){var p=", c, ",n=", h, ",d=sub(p,n);return d[d.length-1];};return ", l].join("");
                  return new Function("sum", "prod", "scale", "sub", p)(Ao, Ro, ko, Bo)
                }
                var s = o(3),
                  a = o(4),
                  u = [function () {
                    return 0
                  }, function () {
                    return 0
                  }, function (t, e) {
                    return e[0] - t[0]
                  }, function (t, e, r) {
                    var i, n = (t[1] - r[1]) * (e[0] - r[0]),
                      o = (t[0] - r[0]) * (e[1] - r[1]),
                      a = n - o;
                    if (n > 0) {
                      if (o <= 0) return a;
                      i = n + o;
                    } else {
                      if (!(n < 0)) return a;
                      if (o >= 0) return a;
                      i = -(n + o);
                    }
                    var u = 33306690738754716e-32 * i;
                    return a >= u || a <= -u ? a : s(t, e, r)
                  }, function (t, e, r, i) {
                    var n = t[0] - i[0],
                      o = e[0] - i[0],
                      s = r[0] - i[0],
                      u = t[1] - i[1],
                      c = e[1] - i[1],
                      h = r[1] - i[1],
                      l = t[2] - i[2],
                      p = e[2] - i[2],
                      f = r[2] - i[2],
                      d = o * h,
                      g = s * c,
                      _ = s * u,
                      y = n * h,
                      m = n * c,
                      v = o * u,
                      x = l * (d - g) + p * (_ - y) + f * (m - v),
                      w = 7771561172376103e-31 * ((Math.abs(d) + Math.abs(g)) * Math.abs(l) + (Math.abs(_) + Math.abs(y)) * Math.abs(p) + (Math.abs(m) + Math.abs(v)) * Math.abs(f));
                    return x > w || -x > w ? x : a(t, e, r, i)
                  }];
                ! function () {
                  for (; u.length <= 5;) u.push(o(u.length));
                  for (var e = [], r = ["slow"], i = 0; i <= 5; ++i) e.push("a" + i), r.push("o" + i);
                  var n = ["function getOrientation(", e.join(), "){switch(arguments.length){case 0:case 1:return 0;"];
                  for (i = 2; i <= 5; ++i) n.push("case ", i, ":return o", i, "(", e.slice(0, i).join(), ");");
                  n.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"), r.push(n.join(""));
                  var s = Function.apply(void 0, r);
                  for (t.exports = s.apply(void 0, [function (t) {
                      var e = u[t.length];
                      return e || (e = u[t.length] = o(t.length)), e.apply(void 0, t)
                    }].concat(u)), i = 0; i <= 5; ++i) t.exports[i] = u[i];
                }();
              }),
              Vo = function (t) {
                var e = t.length;
                if (e < 3) {
                  for (var r = new Array(e), i = 0; i < e; ++i) r[i] = i;
                  return 2 === e && t[0][0] === t[1][0] && t[0][1] === t[1][1] ? [0] : r
                }
                var n = new Array(e);
                for (i = 0; i < e; ++i) n[i] = i;
                n.sort(function (e, r) {
                  return t[e][0] - t[r][0] || t[e][1] - t[r][1]
                });
                var o = [n[0], n[1]],
                  s = [n[0], n[1]];
                for (i = 2; i < e; ++i) {
                  for (var a = n[i], u = t[a], c = o.length; c > 1 && Uo(t[o[c - 2]], t[o[c - 1]], u) <= 0;) c -= 1, o.pop();
                  for (o.push(a), c = s.length; c > 1 && Uo(t[s[c - 2]], t[s[c - 1]], u) >= 0;) c -= 1, s.pop();
                  s.push(a);
                }
                r = new Array(s.length + o.length - 2);
                for (var h = 0, l = (i = 0, o.length); i < l; ++i) r[h++] = o[i];
                for (var p = s.length - 2; p > 0; --p) r[h++] = s[p];
                return r
              },
              Uo = zo[3],
              qo = yt,
              jo = yt;
            yt.prototype = {
              push: function (t) {
                this.data.push(t), this.length++, this._up(this.length - 1);
              },
              pop: function () {
                if (0 !== this.length) {
                  var t = this.data[0];
                  return this.length--, this.length > 0 && (this.data[0] = this.data[this.length], this._down(0)), this.data.pop(), t
                }
              },
              peek: function () {
                return this.data[0]
              },
              _up: function (t) {
                for (var e = this.data, r = this.compare, i = e[t]; t > 0;) {
                  var n = t - 1 >> 1,
                    o = e[n];
                  if (r(i, o) >= 0) break;
                  e[t] = o, t = n;
                }
                e[t] = i;
              },
              _down: function (t) {
                for (var e = this.data, r = this.compare, i = this.length >> 1, n = e[t]; t < i;) {
                  var o = 1 + (t << 1),
                    s = o + 1,
                    a = e[o];
                  if (s < this.length && r(e[s], a) < 0 && (o = s, a = e[s]), r(a, n) >= 0) break;
                  e[t] = a, t = o;
                }
                e[t] = n;
              }
            }, qo.default = jo;
            var Go = function (t, e) {
                for (var r = t[0], i = t[1], n = !1, o = 0, s = e.length - 1; o < e.length; s = o++) {
                  var a = e[o][0],
                    u = e[o][1],
                    c = e[s][0],
                    h = e[s][1];
                  u > i != h > i && r < (c - a) * (i - u) / (h - u) + a && (n = !n);
                }
                return n
              },
              Xo = zo[3],
              Zo = mt,
              Yo = mt;
            Zo.default = Yo;
            var Wo = function (t) {
                return t
              },
              Ho = function (t) {
                if (null == t) return Wo;
                var e, r, i = t.scale[0],
                  n = t.scale[1],
                  o = t.translate[0],
                  s = t.translate[1];
                return function (t, a) {
                  a || (e = r = 0);
                  var u = 2,
                    c = t.length,
                    h = new Array(c);
                  for (h[0] = (e += t[0]) * i + o, h[1] = (r += t[1]) * n + s; u < c;) h[u] = t[u], ++u;
                  return h
                }
              },
              Ko = function (t, e) {
                for (var r, i = t.length, n = i - e; n < --i;) r = t[n], t[n++] = t[i], t[i] = r;
              },
              Jo = function (t, e) {
                function r(t, e) {
                  for (var r in t) {
                    var n = t[r];
                    delete e[n.start], delete n.start, delete n.end, n.forEach(function (t) {
                      i[t < 0 ? ~t : t] = 1;
                    }), s.push(n);
                  }
                }
                var i = {},
                  n = {},
                  o = {},
                  s = [],
                  a = -1;
                return e.forEach(function (r, i) {
                  var n, o = t.arcs[r < 0 ? ~r : r];
                  o.length < 3 && !o[1][0] && !o[1][1] && (n = e[++a], e[a] = r, e[i] = n);
                }), e.forEach(function (e) {
                  var r, i, s = function (e) {
                      var r, i = t.arcs[e < 0 ? ~e : e],
                        n = i[0];
                      return t.transform ? (r = [0, 0], i.forEach(function (t) {
                        r[0] += t[0], r[1] += t[1];
                      })) : r = i[i.length - 1], e < 0 ? [r, n] : [n, r]
                    }(e),
                    a = s[0],
                    u = s[1];
                  if (r = o[a])
                    if (delete o[r.end], r.push(e), r.end = u, i = n[u]) {
                      delete n[i.start];
                      var c = i === r ? r : r.concat(i);
                      n[c.start = r.start] = o[c.end = i.end] = c;
                    } else n[r.start] = o[r.end] = r;
                  else if (r = n[u])
                    if (delete n[r.start], r.unshift(e), r.start = a, i = o[a]) {
                      delete o[i.end];
                      var h = i === r ? r : i.concat(r);
                      n[h.start = i.start] = o[h.end = r.end] = h;
                    } else n[r.start] = o[r.end] = r;
                  else n[(r = [e]).start = a] = o[r.end = u] = r;
                }), r(o, n), r(n, o), e.forEach(function (t) {
                  i[t < 0 ? ~t : t] || s.push([t]);
                }), s
              },
              Qo = function (t) {
                return zt(t, Vt.apply(this, arguments))
              },
              $o = function (t, e, r, i, n, o) {
                3 === arguments.length && (i = o = Array, n = null);
                for (var s = new i(t = 1 << Math.max(4, Math.ceil(Math.log(t) / Math.LN2))), a = new o(t), u = t - 1, c = 0; c < t; ++c) s[c] = n;
                return {
                  set: function (i, o) {
                    for (var c = e(i) & u, h = s[c], l = 0; h != n;) {
                      if (r(h, i)) return a[c] = o;
                      if (++l >= t) throw new Error("full hashmap");
                      h = s[c = c + 1 & u];
                    }
                    return s[c] = i, a[c] = o, o
                  },
                  maybeSet: function (i, o) {
                    for (var c = e(i) & u, h = s[c], l = 0; h != n;) {
                      if (r(h, i)) return a[c];
                      if (++l >= t) throw new Error("full hashmap");
                      h = s[c = c + 1 & u];
                    }
                    return s[c] = i, a[c] = o, o
                  },
                  get: function (i, o) {
                    for (var c = e(i) & u, h = s[c], l = 0; h != n;) {
                      if (r(h, i)) return a[c];
                      if (++l >= t) break;
                      h = s[c = c + 1 & u];
                    }
                    return o
                  },
                  keys: function () {
                    for (var t = [], e = 0, r = s.length; e < r; ++e) {
                      var i = s[e];
                      i != n && t.push(i);
                    }
                    return t
                  }
                }
              },
              ts = function (t, e) {
                return t[0] === e[0] && t[1] === e[1]
              },
              es = new ArrayBuffer(16),
              rs = new Float64Array(es),
              is = new Uint32Array(es),
              ns = function (t) {
                rs[0] = t[0], rs[1] = t[1];
                var e = is[0] ^ is[1];
                return 2147483647 & (e << 5 ^ e >> 7 ^ is[2] ^ is[3])
              },
              os = function (t) {
                var e, r, i, n = function (t) {
                    function e(t, e, r, i) {
                      if (p[r] !== t) {
                        p[r] = t;
                        var n = f[r];
                        if (n >= 0) {
                          var o = d[r];
                          n === e && o === i || n === i && o === e || (++_, g[r] = 1);
                        } else f[r] = e, d[r] = i;
                      }
                    }
  
                    function r(t) {
                      return ns(u[t])
                    }
  
                    function i(t, e) {
                      return ts(u[t], u[e])
                    }
                    var n, o, s, a, u = t.coordinates,
                      c = t.lines,
                      h = t.rings,
                      l = function () {
                        for (var t = $o(1.4 * u.length, r, i, Int32Array, -1, Int32Array), e = new Int32Array(u.length), n = 0, o = u.length; n < o; ++n) e[n] = t.maybeSet(n, n);
                        return e
                      }(),
                      p = new Int32Array(u.length),
                      f = new Int32Array(u.length),
                      d = new Int32Array(u.length),
                      g = new Int8Array(u.length),
                      _ = 0;
                    for (n = 0, o = u.length; n < o; ++n) p[n] = f[n] = d[n] = -1;
                    for (n = 0, o = c.length; n < o; ++n) {
                      var y = c[n],
                        m = y[0],
                        v = y[1];
                      for (s = l[m], a = l[++m], ++_, g[s] = 1; ++m <= v;) e(n, s, s = a, a = l[m]);
                      ++_, g[a] = 1;
                    }
                    for (n = 0, o = u.length; n < o; ++n) p[n] = -1;
                    for (n = 0, o = h.length; n < o; ++n) {
                      var x = h[n],
                        w = x[0] + 1,
                        b = x[1];
                      for (e(n, l[b - 1], s = l[w - 1], a = l[w]); ++w <= b;) e(n, s, s = a, a = l[w]);
                    }
                    p = f = d = null;
                    var E, L = function (t, e, r, i, n) {
                      3 === arguments.length && (i = Array, n = null);
                      for (var o = new i(t = 1 << Math.max(4, Math.ceil(Math.log(t) / Math.LN2))), s = t - 1, a = 0; a < t; ++a) o[a] = n;
                      return {
                        add: function (i) {
                          for (var a = e(i) & s, u = o[a], c = 0; u != n;) {
                            if (r(u, i)) return !0;
                            if (++c >= t) throw new Error("full hashset");
                            u = o[a = a + 1 & s];
                          }
                          return o[a] = i, !0
                        },
                        has: function (i) {
                          for (var a = e(i) & s, u = o[a], c = 0; u != n;) {
                            if (r(u, i)) return !0;
                            if (++c >= t) break;
                            u = o[a = a + 1 & s];
                          }
                          return !1
                        },
                        values: function () {
                          for (var t = [], e = 0, r = o.length; e < r; ++e) {
                            var i = o[e];
                            i != n && t.push(i);
                          }
                          return t
                        }
                      }
                    }(1.4 * _, ns, ts);
                    for (n = 0, o = u.length; n < o; ++n) g[E = l[n]] && L.add(u[E]);
                    return L
                  }(t),
                  o = t.coordinates,
                  s = t.lines,
                  a = t.rings;
                for (r = 0, i = s.length; r < i; ++r)
                  for (var u = s[r], c = u[0], h = u[1]; ++c < h;) n.has(o[c]) && (e = {
                    0: c,
                    1: u[1]
                  }, u[1] = c, u = u.next = e);
                for (r = 0, i = a.length; r < i; ++r)
                  for (var l = a[r], p = l[0], f = p, d = l[1], g = n.has(o[p]); ++f < d;) n.has(o[f]) && (g ? (e = {
                    0: f,
                    1: l[1]
                  }, l[1] = f, l = l.next = e) : (function (t, e, r, i) {
                    Ut(t, e, r), Ut(t, e, e + i), Ut(t, e + i, r);
                  }(o, p, d, d - f), o[d] = o[p], g = !0, f = p));
                return t
              },
              ss = function (t, e) {
                function r(t) {
                  t && h.hasOwnProperty(t.type) && h[t.type](t);
                }
  
                function i(t) {
                  var e = [];
                  do {
                    var r = c.get(t);
                    e.push(t[0] < t[1] ? r : ~r);
                  } while (t = t.next);
                  return e
                }
  
                function n(t) {
                  return t.map(i)
                }
                var o = function (t) {
                    function e(t) {
                      null != t && c.hasOwnProperty(t.type) && c[t.type](t);
                    }
  
                    function r(t) {
                      var e = t[0],
                        r = t[1];
                      e < o && (o = e), e > a && (a = e), r < s && (s = r), r > u && (u = r);
                    }
  
                    function i(t) {
                      t.forEach(r);
                    }
  
                    function n(t) {
                      t.forEach(i);
                    }
                    var o = 1 / 0,
                      s = 1 / 0,
                      a = -1 / 0,
                      u = -1 / 0,
                      c = {
                        GeometryCollection: function (t) {
                          t.geometries.forEach(e);
                        },
                        Point: function (t) {
                          r(t.coordinates);
                        },
                        MultiPoint: function (t) {
                          t.coordinates.forEach(r);
                        },
                        LineString: function (t) {
                          i(t.arcs);
                        },
                        MultiLineString: function (t) {
                          t.arcs.forEach(i);
                        },
                        Polygon: function (t) {
                          t.arcs.forEach(i);
                        },
                        MultiPolygon: function (t) {
                          t.arcs.forEach(n);
                        }
                      };
                    for (var h in t) e(t[h]);
                    return a >= o && u >= s ? [o, s, a, u] : void 0
                  }(t = function (t) {
                    var e, r = {};
                    for (e in t) r[e] = qt(t[e]);
                    return r
                  }(t)),
                  s = e > 0 && o && function (t, e, r) {
                    function i(t) {
                      return [Math.round((t[0] - c) * f), Math.round((t[1] - h) * d)]
                    }
  
                    function n(t, e) {
                      for (var r, i, n, o, s, a = -1, u = 0, l = t.length, p = new Array(l); ++a < l;) r = t[a], o = Math.round((r[0] - c) * f), s = Math.round((r[1] - h) * d), o === i && s === n || (p[u++] = [i = o, n = s]);
                      for (p.length = u; u < e;) u = p.push([p[0][0], p[0][1]]);
                      return p
                    }
  
                    function o(t) {
                      return n(t, 2)
                    }
  
                    function s(t) {
                      return n(t, 4)
                    }
  
                    function a(t) {
                      return t.map(s)
                    }
  
                    function u(t) {
                      null != t && g.hasOwnProperty(t.type) && g[t.type](t);
                    }
                    var c = e[0],
                      h = e[1],
                      l = e[2],
                      p = e[3],
                      f = l - c ? (r - 1) / (l - c) : 1,
                      d = p - h ? (r - 1) / (p - h) : 1,
                      g = {
                        GeometryCollection: function (t) {
                          t.geometries.forEach(u);
                        },
                        Point: function (t) {
                          t.coordinates = i(t.coordinates);
                        },
                        MultiPoint: function (t) {
                          t.coordinates = t.coordinates.map(i);
                        },
                        LineString: function (t) {
                          t.arcs = o(t.arcs);
                        },
                        MultiLineString: function (t) {
                          t.arcs = t.arcs.map(o);
                        },
                        Polygon: function (t) {
                          t.arcs = a(t.arcs);
                        },
                        MultiPolygon: function (t) {
                          t.arcs = t.arcs.map(a);
                        }
                      };
                    for (var _ in t) u(t[_]);
                    return {
                      scale: [1 / f, 1 / d],
                      translate: [c, h]
                    }
                  }(t, o, e),
                  a = function (t) {
                    function e(t) {
                      var e, r, i, n, o, s, a, u;
                      if (i = f.get(e = c[t[0]]))
                        for (a = 0, u = i.length; a < u; ++a)
                          if (function (t, e) {
                              var r = t[0],
                                i = e[0],
                                n = t[1];
                              if (r - n != i - e[1]) return !1;
                              for (; r <= n; ++r, ++i)
                                if (!ts(c[r], c[i])) return !1;
                              return !0
                            }(n = i[a], t)) return t[0] = n[0], void(t[1] = n[1]);
                      if (o = f.get(r = c[t[1]]))
                        for (a = 0, u = o.length; a < u; ++a)
                          if (function (t, e) {
                              var r = t[0],
                                i = e[0],
                                n = t[1],
                                o = e[1];
                              if (r - n != i - o) return !1;
                              for (; r <= n; ++r, --o)
                                if (!ts(c[r], c[o])) return !1;
                              return !0
                            }(s = o[a], t)) return t[1] = s[0], void(t[0] = s[1]);
                      i ? i.push(t) : f.set(e, [t]), o ? o.push(t) : f.set(r, [t]), d.push(t);
                    }
  
                    function r(t, e) {
                      var r = t[0],
                        i = e[0],
                        o = t[1] - r;
                      if (o !== e[1] - i) return !1;
                      for (var s = n(t), a = n(e), u = 0; u < o; ++u)
                        if (!ts(c[r + (u + s) % o], c[i + (u + a) % o])) return !1;
                      return !0
                    }
  
                    function i(t, e) {
                      var r = t[0],
                        i = e[0],
                        o = t[1],
                        s = e[1],
                        a = o - r;
                      if (a !== s - i) return !1;
                      for (var u = n(t), h = a - n(e), l = 0; l < a; ++l)
                        if (!ts(c[r + (l + u) % a], c[s - (l + h) % a])) return !1;
                      return !0
                    }
  
                    function n(t) {
                      for (var e = t[0], r = t[1], i = e, n = i, o = c[i]; ++i < r;) {
                        var s = c[i];
                        (s[0] < o[0] || s[0] === o[0] && s[1] < o[1]) && (n = i, o = s);
                      }
                      return n - e
                    }
                    var o, s, a, u, c = t.coordinates,
                      h = t.lines,
                      l = t.rings,
                      p = h.length + l.length;
                    for (delete t.lines, delete t.rings, a = 0, u = h.length; a < u; ++a)
                      for (o = h[a]; o = o.next;) ++p;
                    for (a = 0, u = l.length; a < u; ++a)
                      for (s = l[a]; s = s.next;) ++p;
                    var f = $o(2 * p * 1.4, ns, ts),
                      d = t.arcs = [];
                    for (a = 0, u = h.length; a < u; ++a) {
                      o = h[a];
                      do {
                        e(o);
                      } while (o = o.next)
                    }
                    for (a = 0, u = l.length; a < u; ++a)
                      if ((s = l[a]).next)
                        do {
                          e(s);
                        } while (s = s.next);
                      else ! function (t) {
                        var e, o, s, a, u;
                        if (o = f.get(c[t[0]]))
                          for (a = 0, u = o.length; a < u; ++a) {
                            if (r(s = o[a], t)) return t[0] = s[0], void(t[1] = s[1]);
                            if (i(s, t)) return t[0] = s[1], void(t[1] = s[0])
                          }
                        if (o = f.get(e = c[t[0] + n(t)]))
                          for (a = 0, u = o.length; a < u; ++a) {
                            if (r(s = o[a], t)) return t[0] = s[0], void(t[1] = s[1]);
                            if (i(s, t)) return t[0] = s[1], void(t[1] = s[0])
                          }
                        o ? o.push(t) : f.set(e, [t]), d.push(t);
                      }(s);
                    return t
                  }(os(function (t) {
                    function e(t) {
                      t && c.hasOwnProperty(t.type) && c[t.type](t);
                    }
  
                    function r(t) {
                      for (var e = 0, r = t.length; e < r; ++e) u[++o] = t[e];
                      var i = {
                        0: o - r + 1,
                        1: o
                      };
                      return s.push(i), i
                    }
  
                    function i(t) {
                      for (var e = 0, r = t.length; e < r; ++e) u[++o] = t[e];
                      var i = {
                        0: o - r + 1,
                        1: o
                      };
                      return a.push(i), i
                    }
  
                    function n(t) {
                      return t.map(i)
                    }
                    var o = -1,
                      s = [],
                      a = [],
                      u = [],
                      c = {
                        GeometryCollection: function (t) {
                          t.geometries.forEach(e);
                        },
                        LineString: function (t) {
                          t.arcs = r(t.arcs);
                        },
                        MultiLineString: function (t) {
                          t.arcs = t.arcs.map(r);
                        },
                        Polygon: function (t) {
                          t.arcs = t.arcs.map(i);
                        },
                        MultiPolygon: function (t) {
                          t.arcs = t.arcs.map(n);
                        }
                      };
                    for (var h in t) e(t[h]);
                    return {
                      type: "Topology",
                      coordinates: u,
                      lines: s,
                      rings: a,
                      objects: t
                    }
                  }(t))),
                  u = a.coordinates,
                  c = $o(1.4 * a.arcs.length, Xt, Zt);
                t = a.objects, a.bbox = o, a.arcs = a.arcs.map(function (t, e) {
                  return c.set(t, e), u.slice(t[0], t[1] + 1)
                }), delete a.coordinates, u = null;
                var h = {
                  GeometryCollection: function (t) {
                    t.geometries.forEach(r);
                  },
                  LineString: function (t) {
                    t.arcs = i(t.arcs);
                  },
                  MultiLineString: function (t) {
                    t.arcs = t.arcs.map(i);
                  },
                  Polygon: function (t) {
                    t.arcs = t.arcs.map(i);
                  },
                  MultiPolygon: function (t) {
                    t.arcs = t.arcs.map(n);
                  }
                };
                for (var l in t) r(t[l]);
                return s && (a.transform = s, a.arcs = function (t) {
                  for (var e = -1, r = t.length; ++e < r;) {
                    for (var i, n, o = t[e], s = 0, a = 1, u = o.length, c = o[0], h = c[0], l = c[1]; ++s < u;) i = (c = o[s])[0], n = c[1], i === h && n === l || (o[a++] = [i - h, n - l], h = i, l = n);
                    1 === a && (o[a++] = [0, 0]), o.length = a;
                  }
                  return t
                }(a.arcs)), a
              },
              as = function (t) {
                this.points = t.points || [], this.duration = t.duration || 1e4, this.sharpness = t.sharpness || .85, this.centers = [], this.controls = [], this.stepLength = t.stepLength || 60, this.length = this.points.length, this.delay = 0;
                for (var e = 0; e < this.length; e++) this.points[e].z = this.points[e].z || 0;
                for (e = 0; e < this.length - 1; e++) {
                  var r = this.points[e],
                    i = this.points[e + 1];
                  this.centers.push({
                    x: (r.x + i.x) / 2,
                    y: (r.y + i.y) / 2,
                    z: (r.z + i.z) / 2
                  });
                }
                for (this.controls.push([this.points[0], this.points[0]]), e = 0; e < this.centers.length - 1; e++) {
                  r = this.centers[e], i = this.centers[e + 1];
                  var n = this.points[e + 1].x - (this.centers[e].x + this.centers[e + 1].x) / 2,
                    o = this.points[e + 1].y - (this.centers[e].y + this.centers[e + 1].y) / 2,
                    s = this.points[e + 1].z - (this.centers[e].y + this.centers[e + 1].z) / 2;
                  this.controls.push([{
                    x: (1 - this.sharpness) * this.points[e + 1].x + this.sharpness * (this.centers[e].x + n),
                    y: (1 - this.sharpness) * this.points[e + 1].y + this.sharpness * (this.centers[e].y + o),
                    z: (1 - this.sharpness) * this.points[e + 1].z + this.sharpness * (this.centers[e].z + s)
                  }, {
                    x: (1 - this.sharpness) * this.points[e + 1].x + this.sharpness * (this.centers[e + 1].x + n),
                    y: (1 - this.sharpness) * this.points[e + 1].y + this.sharpness * (this.centers[e + 1].y + o),
                    z: (1 - this.sharpness) * this.points[e + 1].z + this.sharpness * (this.centers[e + 1].z + s)
                  }]);
                }
                return this.controls.push([this.points[this.length - 1], this.points[this.length - 1]]), this.steps = this.cacheSteps(this.stepLength), this
              };
            as.prototype.cacheSteps = function (t) {
              var e = [],
                r = this.pos(0);
              e.push(0);
              for (var i = 0; i < this.duration; i += 10) {
                var n = this.pos(i);
                Math.sqrt((n.x - r.x) * (n.x - r.x) + (n.y - r.y) * (n.y - r.y) + (n.z - r.z) * (n.z - r.z)) > t && (e.push(i), r = n);
              }
              return e
            }, as.prototype.vector = function (t) {
              var e = this.pos(t + 10),
                r = this.pos(t - 10);
              return {
                angle: 180 * Math.atan2(e.y - r.y, e.x - r.x) / 3.14,
                speed: Math.sqrt((r.x - e.x) * (r.x - e.x) + (r.y - e.y) * (r.y - e.y) + (r.z - e.z) * (r.z - e.z))
              }
            }, as.prototype.pos = function (t) {
              var e = t - this.delay;
              e < 0 && (e = 0), e > this.duration && (e = this.duration - 1);
              var r = e / this.duration;
              if (r >= 1) return this.points[this.length - 1];
              var i = Math.floor((this.points.length - 1) * r);
              return function (t, e, r, i, n) {
                var o = function (t) {
                  var e = t * t;
                  return [e * t, 3 * e * (1 - t), 3 * t * (1 - t) * (1 - t), (1 - t) * (1 - t) * (1 - t)]
                }(t);
                return {
                  x: n.x * o[0] + i.x * o[1] + r.x * o[2] + e.x * o[3],
                  y: n.y * o[0] + i.y * o[1] + r.y * o[2] + e.y * o[3],
                  z: n.z * o[0] + i.z * o[1] + r.z * o[2] + e.z * o[3]
                }
              }((this.length - 1) * r - i, this.points[i], this.controls[i][1], this.controls[i + 1][0], this.points[i + 1])
            };
            var us = pe,
              cs = pe;
            pe.deviation = function (t, e, r, i) {
              var n = e && e.length,
                o = n ? e[0] * r : t.length,
                s = Math.abs(Ce(t, 0, o, r));
              if (n)
                for (var a = 0, u = e.length; a < u; a++) {
                  var c = e[a] * r,
                    h = a < u - 1 ? e[a + 1] * r : t.length;
                  s -= Math.abs(Ce(t, c, h, r));
                }
              var l = 0;
              for (a = 0; a < i.length; a += 3) {
                var p = i[a] * r,
                  f = i[a + 1] * r,
                  d = i[a + 2] * r;
                l += Math.abs((t[p] - t[d]) * (t[f + 1] - t[p + 1]) - (t[p] - t[f]) * (t[d + 1] - t[p + 1]));
              }
              return 0 === s && 0 === l ? 0 : Math.abs((l - s) / s)
            }, pe.flatten = function (t) {
              for (var e = t[0][0].length, r = {
                  vertices: [],
                  holes: [],
                  dimensions: e
                }, i = 0, n = 0; n < t.length; n++) {
                for (var o = 0; o < t[n].length; o++)
                  for (var s = 0; s < e; s++) r.vertices.push(t[n][o][s]);
                n > 0 && (i += t[n - 1].length, r.holes.push(i));
              }
              return r
            }, us.default = cs, De.prototype = {
              all: function () {
                return this._all(this.data, [])
              },
              search: function (t) {
                var e = this.data,
                  r = [],
                  i = this.toBBox;
                if (!Ve(t, e)) return r;
                for (var n, o, s, a, u = []; e;) {
                  for (n = 0, o = e.children.length; n < o; n++) s = e.children[n], Ve(t, a = e.leaf ? i(s) : s) && (e.leaf ? r.push(s) : ze(t, a) ? this._all(s, r) : u.push(s));
                  e = u.pop();
                }
                return r
              },
              collides: function (t) {
                var e = this.data,
                  r = this.toBBox;
                if (!Ve(t, e)) return !1;
                for (var i, n, o, s, a = []; e;) {
                  for (i = 0, n = e.children.length; i < n; i++)
                    if (o = e.children[i], Ve(t, s = e.leaf ? r(o) : o)) {
                      if (e.leaf || ze(t, s)) return !0;
                      a.push(o);
                    } e = a.pop();
                }
                return !1
              },
              load: function (t) {
                if (!t || !t.length) return this;
                if (t.length < this._minEntries) {
                  for (var e = 0, r = t.length; e < r; e++) this.insert(t[e]);
                  return this
                }
                var i = this._build(t.slice(), 0, t.length - 1, 0);
                if (this.data.children.length)
                  if (this.data.height === i.height) this._splitRoot(this.data, i);
                  else {
                    if (this.data.height < i.height) {
                      var n = this.data;
                      this.data = i, i = n;
                    }
                    this._insert(i, this.data.height - i.height - 1, !0);
                  }
                else this.data = i;
                return this
              },
              insert: function (t) {
                return t && this._insert(t, this.data.height - 1), this
              },
              clear: function () {
                return this.data = Ue([]), this
              },
              remove: function (t, e) {
                if (!t) return this;
                for (var r, i, n, o, s = this.data, a = this.toBBox(t), u = [], c = []; s || u.length;) {
                  if (s || (s = u.pop(), i = u[u.length - 1], r = c.pop(), o = !0), s.leaf && -1 !== (n = function (t, e, r) {
                      if (!r) return e.indexOf(t);
                      for (var i = 0; i < e.length; i++)
                        if (r(t, e[i])) return i;
                      return -1
                    }(t, s.children, e))) return s.children.splice(n, 1), u.push(s), this._condense(u), this;
                  o || s.leaf || !ze(s, a) ? i ? (r++, s = i.children[r], o = !1) : s = null : (u.push(s), c.push(r), r = 0, i = s, s = s.children[0]);
                }
                return this
              },
              toBBox: function (t) {
                return t
              },
              compareMinX: Ae,
              compareMinY: Fe,
              toJSON: function () {
                return this.data
              },
              fromJSON: function (t) {
                return this.data = t, this
              },
              _all: function (t, e) {
                for (var r = []; t;) t.leaf ? e.push.apply(e, t.children) : r.push.apply(r, t.children), t = r.pop();
                return e
              },
              _build: function (t, e, r, i) {
                var n, o = r - e + 1,
                  s = this._maxEntries;
                if (o <= s) return Ne(n = Ue(t.slice(e, r + 1)), this.toBBox), n;
                i || (i = Math.ceil(Math.log(o) / Math.log(s)), s = Math.ceil(o / Math.pow(s, i - 1))), (n = Ue([])).leaf = !1, n.height = i;
                var a, u, c, h, l = Math.ceil(o / s),
                  p = l * Math.ceil(Math.sqrt(s));
                for (qe(t, e, r, p, this.compareMinX), a = e; a <= r; a += p)
                  for (qe(t, a, c = Math.min(a + p - 1, r), l, this.compareMinY), u = a; u <= c; u += l) h = Math.min(u + l - 1, c), n.children.push(this._build(t, u, h, i - 1));
                return Ne(n, this.toBBox), n
              },
              _chooseSubtree: function (t, e, r, i) {
                for (var n, o, s, a, u, c, h, l; i.push(e), !e.leaf && i.length - 1 !== r;) {
                  for (h = l = 1 / 0, n = 0, o = e.children.length; n < o; n++) u = ke(s = e.children[n]), (c = function (t, e) {
                    return (Math.max(e.maxX, t.maxX) - Math.min(e.minX, t.minX)) * (Math.max(e.maxY, t.maxY) - Math.min(e.minY, t.minY))
                  }(t, s) - u) < l ? (l = c, h = u < h ? u : h, a = s) : c === l && u < h && (h = u, a = s);
                  e = a || e.children[0];
                }
                return e
              },
              _insert: function (t, e, r) {
                var i = this.toBBox,
                  n = r ? t : i(t),
                  o = [],
                  s = this._chooseSubtree(n, this.data, e, o);
                for (s.children.push(t), Oe(s, n); e >= 0 && o[e].children.length > this._maxEntries;) this._split(o, e), e--;
                this._adjustParentBBoxes(n, o, e);
              },
              _split: function (t, e) {
                var r = t[e],
                  i = r.children.length,
                  n = this._minEntries;
                this._chooseSplitAxis(r, n, i);
                var o = this._chooseSplitIndex(r, n, i),
                  s = Ue(r.children.splice(o, r.children.length - o));
                s.height = r.height, s.leaf = r.leaf, Ne(r, this.toBBox), Ne(s, this.toBBox), e ? t[e - 1].children.push(s) : this._splitRoot(r, s);
              },
              _splitRoot: function (t, e) {
                this.data = Ue([t, e]), this.data.height = t.height + 1, this.data.leaf = !1, Ne(this.data, this.toBBox);
              },
              _chooseSplitIndex: function (t, e, r) {
                var i, n, o, s, a, u, c, h;
                for (u = c = 1 / 0, i = e; i <= r - e; i++) s = function (t, e) {
                  var r = Math.max(t.minX, e.minX),
                    i = Math.max(t.minY, e.minY),
                    n = Math.min(t.maxX, e.maxX),
                    o = Math.min(t.maxY, e.maxY);
                  return Math.max(0, n - r) * Math.max(0, o - i)
                }(n = Re(t, 0, i, this.toBBox), o = Re(t, i, r, this.toBBox)), a = ke(n) + ke(o), s < u ? (u = s, h = i, c = a < c ? a : c) : s === u && a < c && (c = a, h = i);
                return h
              },
              _chooseSplitAxis: function (t, e, r) {
                var i = t.leaf ? this.compareMinX : Ae,
                  n = t.leaf ? this.compareMinY : Fe;
                this._allDistMargin(t, e, r, i) < this._allDistMargin(t, e, r, n) && t.children.sort(i);
              },
              _allDistMargin: function (t, e, r, i) {
                t.children.sort(i);
                var n, o, s = this.toBBox,
                  a = Re(t, 0, e, s),
                  u = Re(t, r - e, r, s),
                  c = Be(a) + Be(u);
                for (n = e; n < r - e; n++) o = t.children[n], Oe(a, t.leaf ? s(o) : o), c += Be(a);
                for (n = r - e - 1; n >= e; n--) o = t.children[n], Oe(u, t.leaf ? s(o) : o), c += Be(u);
                return c
              },
              _adjustParentBBoxes: function (t, e, r) {
                for (var i = r; i >= 0; i--) Oe(e[i], t);
              },
              _condense: function (t) {
                for (var e, r = t.length - 1; r >= 0; r--) 0 === t[r].children.length ? r > 0 ? (e = t[r - 1].children).splice(e.indexOf(t[r]), 1) : this.clear() : Ne(t[r], this.toBBox);
              },
              _initFormat: function (t) {
                var e = ["return a", " - b", ";"];
                this.compareMinX = new Function("a", "b", e.join(t[0])), this.compareMinY = new Function("a", "b", e.join(t[1])), this.toBBox = new Function("a", "return {minX: a" + t[0] + ", minY: a" + t[1] + ", maxX: a" + t[2] + ", maxY: a" + t[3] + "};");
              }
            };
            var hs = Object.freeze({
                toMercator: $e,
                toWgs84: tr
              }),
              ls = 6378137,
              ps = function (t) {
                function e() {
                  for (var t = [], e = 0; e < d.features.length; e++) - 1 == d.features[e].properties.parent && t.push(e);
                  if (t.length > 1)
                    for (e = 0; e < t.length; e++) {
                      for (var r = -1, i = 0; i < d.features.length; i++) t[e] != i && Mt(d.features[t[e]].geometry.coordinates[0][0], d.features[i], {
                        ignoreBoundary: !0
                      }) && ur(d.features[i]) < 1 / 0 && (r = i);
                      d.features[t[e]].properties.parent = r;
                    }
                }
  
                function r() {
                  for (var t = 0; t < d.features.length; t++)
                    if (-1 == d.features[t].properties.parent) {
                      var e = d.features[t].properties.winding;
                      d.features[t].properties.netWinding = e, i(t, e);
                    }
                }
  
                function i(t, e) {
                  for (var r = 0; r < d.features.length; r++)
                    if (d.features[r].properties.parent == t) {
                      var n = e + d.features[r].properties.winding;
                      d.features[r].properties.netWinding = n, i(r, n);
                    }
                }
                if ("Feature" != t.type) throw new Error("The input must a geojson object of type Feature");
                if (void 0 === t.geometry || null == t.geometry) throw new Error("The input must a geojson object with a non-empty geometry");
                if ("Polygon" != t.geometry.type) throw new Error("The input must be a geojson Polygon");
                for (var n = t.geometry.coordinates.length, s = [], a = 0; a < n; a++) {
                  var u = t.geometry.coordinates[a];
                  br(u[0], u[u.length - 1]) || u.push(u[0]), s.push.apply(s, u.slice(0, u.length - 1));
                }
                if (! function (t) {
                    for (var e = {}, r = 1, i = 0, n = t.length; i < n; ++i) {
                      if (e.hasOwnProperty(t[i])) {
                        r = 0;
                        break
                      }
                      e[t[i]] = 1;
                    }
                    return r
                  }(s)) throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");
                var h = s.length,
                  l = function (t, e, r) {
                    function i(t, r, i, n) {
                      var u, c, h = o[t][r],
                        l = o[t][r + 1],
                        p = o[i][n],
                        f = o[i][n + 1],
                        d = function (t, e, r, i) {
                          if (xr(t, r) || xr(t, i) || xr(e, r) || xr(i, r)) return null;
                          var n = t[0],
                            o = t[1],
                            s = e[0],
                            a = e[1],
                            u = r[0],
                            c = r[1],
                            h = i[0],
                            l = i[1],
                            p = (n - s) * (c - l) - (o - a) * (u - h);
                          return 0 === p ? null : [((n * a - o * s) * (u - h) - (n - s) * (u * l - c * h)) / p, ((n * a - o * s) * (c - l) - (o - a) * (u * l - c * h)) / p]
                        }(h, l, p, f);
                      if (null !== d && (u = l[0] !== h[0] ? (d[0] - h[0]) / (l[0] - h[0]) : (d[1] - h[1]) / (l[1] - h[1]), c = f[0] !== p[0] ? (d[0] - p[0]) / (f[0] - p[0]) : (d[1] - p[1]) / (f[1] - p[1]), !(u >= 1 || u <= 0 || c >= 1 || c <= 0))) {
                        var g = d,
                          _ = !a[g];
                        _ && (a[g] = !0), e ? s.push(e(d, t, r, h, l, u, i, n, p, f, c, _)) : s.push(d);
                      }
                    }
  
                    function n(t, e) {
                      var r, i, n, s, a = o[t][e],
                        u = o[t][e + 1];
                      return a[0] < u[0] ? (r = a[0], i = u[0]) : (r = u[0], i = a[0]), a[1] < u[1] ? (n = a[1], s = u[1]) : (n = u[1], s = a[1]), {
                        minX: r,
                        minY: n,
                        maxX: i,
                        maxY: s,
                        ring: t,
                        edge: e
                      }
                    }
                    if ("Polygon" !== t.geometry.type) throw new Error("The input feature must be a Polygon");
                    void 0 === r && (r = 1);
                    var o = t.geometry.coordinates,
                      s = [],
                      a = {};
                    if (r) {
                      for (var u = [], c = 0; c < o.length; c++)
                        for (var h = 0; h < o[c].length - 1; h++) u.push(n(c, h));
                      var l = No();
                      l.load(u);
                    }
                    for (var p = 0; p < o.length; p++)
                      for (var f = 0; f < o[p].length - 1; f++)
                        if (r) l.search(n(p, f)).forEach(function (t) {
                          var e = t.ring,
                            r = t.edge;
                          i(p, f, e, r);
                        });
                        else
                          for (var d = 0; d < o.length; d++)
                            for (var g = 0; g < o[d].length - 1; g++) i(p, f, d, g);
                    return e || (s = {
                      type: "Feature",
                      geometry: {
                        type: "MultiPoint",
                        coordinates: s
                      }
                    }), s
                  }(t, function (t, e, r, i, n, o, s, a, u, c, h, l) {
                    return [t, e, r, i, n, o, s, a, u, c, h, l]
                  }),
                  p = l.length;
                if (0 == p) {
                  var f = [];
                  for (a = 0; a < n; a++) f.push(o([t.geometry.coordinates[a]], {
                    parent: -1,
                    winding: function (t) {
                      for (var e = 0, r = 0; r < t.length - 1; r++) t[r][0] < t[e][0] && (e = r);
                      if (wr([t[(e - 1).modulo(t.length - 1)], t[e], t[(e + 1).modulo(t.length - 1)]], !0)) var i = 1;
                      else i = -1;
                      return i
                    }(t.geometry.coordinates[a])
                  }));
                  var d = c(f);
                  return e(), r(), d
                }
                var g = [],
                  _ = [];
                for (a = 0; a < n; a++) {
                  g.push([]);
                  for (var y = 0; y < t.geometry.coordinates[a].length - 1; y++) g[a].push([new fs(t.geometry.coordinates[a][(y + 1).modulo(t.geometry.coordinates[a].length - 1)], 1, [a, y], [a, (y + 1).modulo(t.geometry.coordinates[a].length - 1)], void 0)]), _.push(new ds(t.geometry.coordinates[a][y], [a, (y - 1).modulo(t.geometry.coordinates[a].length - 1)], [a, y], void 0, void 0, !1, !0));
                }
                for (a = 0; a < p; a++) g[l[a][1]][l[a][2]].push(new fs(l[a][0], l[a][5], [l[a][1], l[a][2]], [l[a][6], l[a][7]], void 0)), l[a][11] && _.push(new ds(l[a][0], [l[a][1], l[a][2]], [l[a][6], l[a][7]], void 0, void 0, !0, !0));
                var m = _.length;
                for (a = 0; a < g.length; a++)
                  for (y = 0; y < g[a].length; y++) g[a][y].sort(function (t, e) {
                    return t.param < e.param ? -1 : 1
                  });
                var v = [];
                for (a = 0; a < m; a++) v.push({
                  minX: _[a].coord[0],
                  minY: _[a].coord[1],
                  maxX: _[a].coord[0],
                  maxY: _[a].coord[1],
                  index: a
                });
                var x = No();
                for (x.load(v), a = 0; a < g.length; a++)
                  for (y = 0; y < g[a].length; y++)
                    for (var w = 0; w < g[a][y].length; w++) {
                      E = w == g[a][y].length - 1 ? g[a][(y + 1).modulo(t.geometry.coordinates[a].length - 1)][0].coord : g[a][y][w + 1].coord;
                      var b = x.search({
                        minX: E[0],
                        minY: E[1],
                        maxX: E[0],
                        maxY: E[1]
                      })[0];
                      g[a][y][w].nxtIsectAlongEdgeIn = b.index;
                    }
                for (a = 0; a < g.length; a++)
                  for (y = 0; y < g[a].length; y++)
                    for (w = 0; w < g[a][y].length; w++) {
                      var E = g[a][y][w].coord,
                        L = (b = x.search({
                          minX: E[0],
                          minY: E[1],
                          maxX: E[0],
                          maxY: E[1]
                        })[0]).index;
                      L < h ? _[L].nxtIsectAlongRingAndEdge2 = g[a][y][w].nxtIsectAlongEdgeIn : br(_[L].ringAndEdge1, g[a][y][w].ringAndEdgeIn) ? _[L].nxtIsectAlongRingAndEdge1 = g[a][y][w].nxtIsectAlongEdgeIn : _[L].nxtIsectAlongRingAndEdge2 = g[a][y][w].nxtIsectAlongEdgeIn;
                    }
                var S = [];
                for (a = 0, y = 0; y < n; y++) {
                  var C = a;
                  for (w = 0; w < t.geometry.coordinates[y].length - 1; w++) _[a].coord[0] < _[C].coord[0] && (C = a), a++;
                  var I = _[C].nxtIsectAlongRingAndEdge2;
                  for (w = 0; w < _.length; w++)
                    if (_[w].nxtIsectAlongRingAndEdge1 == C || _[w].nxtIsectAlongRingAndEdge2 == C) {
                      var M = w;
                      break
                    } var T = wr([_[M].coord, _[C].coord, _[I].coord], !0) ? 1 : -1;
                  S.push({
                    isect: C,
                    parent: -1,
                    winding: T
                  });
                }
                for (S.sort(function (t, e) {
                    return _[t.isect].coord > _[e.isect].coord ? -1 : 1
                  }), f = []; S.length > 0;) {
                  var P = S.pop(),
                    D = P.isect,
                    N = P.parent,
                    R = P.winding,
                    O = f.length,
                    A = [_[D].coord],
                    F = D;
                  if (_[D].ringAndEdge1Walkable) var k = _[D].ringAndEdge1,
                    B = _[D].nxtIsectAlongRingAndEdge1;
                  else k = _[D].ringAndEdge2, B = _[D].nxtIsectAlongRingAndEdge2;
                  for (; !br(_[D].coord, _[B].coord);) {
                    A.push(_[B].coord);
                    var z = void 0;
                    for (a = 0; a < S.length; a++)
                      if (S[a].isect == B) {
                        z = a;
                        break
                      } if (null != z && S.splice(z, 1), br(k, _[B].ringAndEdge1)) {
                      if (k = _[B].ringAndEdge2, _[B].ringAndEdge2Walkable = !1, _[B].ringAndEdge1Walkable) {
                        var V = {
                          isect: B
                        };
                        wr([_[F].coord, _[B].coord, _[_[B].nxtIsectAlongRingAndEdge2].coord], 1 == R) ? (V.parent = N, V.winding = -R) : (V.parent = O, V.winding = R), S.push(V);
                      }
                      F = B, B = _[B].nxtIsectAlongRingAndEdge2;
                    } else k = _[B].ringAndEdge1, _[B].ringAndEdge1Walkable = !1, _[B].ringAndEdge2Walkable && (V = {
                      isect: B
                    }, wr([_[F].coord, _[B].coord, _[_[B].nxtIsectAlongRingAndEdge1].coord], 1 == R) ? (V.parent = N, V.winding = -R) : (V.parent = O, V.winding = R), S.push(V)), F = B, B = _[B].nxtIsectAlongRingAndEdge1;
                  }
                  A.push(_[B].coord), f.push(o([A], {
                    index: O,
                    parent: N,
                    winding: R,
                    netWinding: void 0
                  }));
                }
                return d = c(f), e(), r(), d
              },
              fs = function (t, e, r, i, n) {
                this.coord = t, this.param = e, this.ringAndEdgeIn = r, this.ringAndEdgeOut = i, this.nxtIsectAlongEdgeIn = n;
              },
              ds = function (t, e, r, i, n, o, s) {
                this.coord = t, this.ringAndEdge1 = e, this.ringAndEdge2 = r, this.nxtIsectAlongRingAndEdge1 = i, this.nxtIsectAlongRingAndEdge2 = n, this.ringAndEdge1Walkable = o, this.ringAndEdge2Walkable = s;
              };
            Number.prototype.modulo = function (t) {
              return (this % t + t) % t
            };
            var gs = Math.PI / 180,
              _s = 180 / Math.PI,
              ys = function (t, e) {
                this.lon = t, this.lat = e, this.x = gs * t, this.y = gs * e;
              };
            ys.prototype.view = function () {
              return String(this.lon).slice(0, 4) + "," + String(this.lat).slice(0, 4)
            }, ys.prototype.antipode = function () {
              var t = -1 * this.lat,
                e = this.lon < 0 ? 180 + this.lon : -1 * (180 - this.lon);
              return new ys(e, t)
            };
            var ms = function () {
              this.coords = [], this.length = 0;
            };
            ms.prototype.move_to = function (t) {
              this.length++, this.coords.push(t);
            };
            var vs = function (t) {
              this.properties = t || {}, this.geometries = [];
            };
            vs.prototype.json = function () {
              if (this.geometries.length <= 0) return {
                geometry: {
                  type: "LineString",
                  coordinates: null
                },
                type: "Feature",
                properties: this.properties
              };
              if (1 === this.geometries.length) return {
                geometry: {
                  type: "LineString",
                  coordinates: this.geometries[0].coords
                },
                type: "Feature",
                properties: this.properties
              };
              for (var t = [], e = 0; e < this.geometries.length; e++) t.push(this.geometries[e].coords);
              return {
                geometry: {
                  type: "MultiLineString",
                  coordinates: t
                },
                type: "Feature",
                properties: this.properties
              }
            }, vs.prototype.wkt = function () {
              for (var t = "", e = "LINESTRING(", r = function (t) {
                  e += t[0] + " " + t[1] + ",";
                }, i = 0; i < this.geometries.length; i++) {
                if (0 === this.geometries[i].coords.length) return "LINESTRING(empty)";
                this.geometries[i].coords.forEach(r), t += e.substring(0, e.length - 1) + ")";
              }
              return t
            };
            var xs = function (t, e, r) {
              if (!t || void 0 === t.x || void 0 === t.y) throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");
              if (!e || void 0 === e.x || void 0 === e.y) throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");
              this.start = new ys(t.x, t.y), this.end = new ys(e.x, e.y), this.properties = r || {};
              var i = this.start.x - this.end.x,
                n = this.start.y - this.end.y,
                o = Math.pow(Math.sin(n / 2), 2) + Math.cos(this.start.y) * Math.cos(this.end.y) * Math.pow(Math.sin(i / 2), 2);
              if (this.g = 2 * Math.asin(Math.sqrt(o)), this.g === Math.PI) throw new Error("it appears " + t.view() + " and " + e.view() + " are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");
              if (isNaN(this.g)) throw new Error("could not calculate great circle between " + t + " and " + e)
            };
            xs.prototype.interpolate = function (t) {
              var e = Math.sin((1 - t) * this.g) / Math.sin(this.g),
                r = Math.sin(t * this.g) / Math.sin(this.g),
                i = e * Math.cos(this.start.y) * Math.cos(this.start.x) + r * Math.cos(this.end.y) * Math.cos(this.end.x),
                n = e * Math.cos(this.start.y) * Math.sin(this.start.x) + r * Math.cos(this.end.y) * Math.sin(this.end.x),
                o = e * Math.sin(this.start.y) + r * Math.sin(this.end.y),
                s = _s * Math.atan2(o, Math.sqrt(Math.pow(i, 2) + Math.pow(n, 2)));
              return [_s * Math.atan2(n, i), s]
            }, xs.prototype.Arc = function (t, e) {
              var r = [];
              if (!t || t <= 2) r.push([this.start.lon, this.start.lat]), r.push([this.end.lon, this.end.lat]);
              else
                for (var i = 1 / (t - 1), n = 0; n < t; ++n) {
                  var o = i * n,
                    s = this.interpolate(o);
                  r.push(s);
                }
              for (var a = !1, u = 0, c = e && e.offset ? e.offset : 10, h = 180 - c, l = -180 + c, p = 360 - c, f = 1; f < r.length; ++f) {
                var d = r[f - 1][0],
                  g = r[f][0],
                  _ = Math.abs(g - d);
                _ > p && (g > h && d < l || d > h && g < l) ? a = !0 : _ > u && (u = _);
              }
              var y = [];
              if (a && u < c) {
                var m = [];
                y.push(m);
                for (var v = 0; v < r.length; ++v) {
                  var x = parseFloat(r[v][0]);
                  if (v > 0 && Math.abs(x - r[v - 1][0]) > p) {
                    var w = parseFloat(r[v - 1][0]),
                      b = parseFloat(r[v - 1][1]),
                      E = parseFloat(r[v][0]),
                      L = parseFloat(r[v][1]);
                    if (w > -180 && w < l && 180 === E && v + 1 < r.length && r[v - 1][0] > -180 && r[v - 1][0] < l) {
                      m.push([-180, r[v][1]]), v++, m.push([r[v][0], r[v][1]]);
                      continue
                    }
                    if (w > h && w < 180 && -180 === E && v + 1 < r.length && r[v - 1][0] > h && r[v - 1][0] < 180) {
                      m.push([180, r[v][1]]), v++, m.push([r[v][0], r[v][1]]);
                      continue
                    }
                    if (w < l && E > h) {
                      var S = w;
                      w = E, E = S;
                      var C = b;
                      b = L, L = C;
                    }
                    if (w > h && E < l && (E += 360), w <= 180 && E >= 180 && w < E) {
                      var I = (180 - w) / (E - w),
                        M = I * L + (1 - I) * b;
                      m.push([r[v - 1][0] > h ? 180 : -180, M]), (m = []).push([r[v - 1][0] > h ? -180 : 180, M]), y.push(m);
                    } else m = [], y.push(m);
                    m.push([x, r[v][1]]);
                  } else m.push([r[v][0], r[v][1]]);
                }
              } else {
                var T = [];
                y.push(T);
                for (var P = 0; P < r.length; ++P) T.push([r[P][0], r[P][1]]);
              }
              for (var D = new vs(this.properties), N = 0; N < y.length; ++N) {
                var R = new ms;
                D.geometries.push(R);
                for (var O = y[N], A = 0; A < O.length; ++A) R.move_to(O[A]);
              }
              return D
            };
            var ws = Or;
            Or.polyline = Or, Or.polygon = function (t, e) {
              var r, i, n, o, s, a, u;
              for (i = 1; i <= 8; i *= 2) {
                for (r = [], o = !(Fr(n = t[t.length - 1], e) & i), s = 0; s < t.length; s++)(u = !(Fr(a = t[s], e) & i)) !== o && r.push(Ar(n, a, i, e)), u && r.push(a), n = a, o = u;
                if (!(t = r).length) break
              }
              return r
            };
            var bs = Array.prototype.slice,
              Es = {
                successCallback: null,
                verbose: !1,
                polygons: !1
              },
              Ls = {},
              Ss = 64,
              Cs = 16,
              Is = 4,
              Ms = 1,
              Ts = [],
              Ps = [],
              Ds = [],
              Ns = [],
              Rs = [],
              Os = [],
              As = [],
              Fs = [],
              ks = [],
              Bs = [],
              zs = [],
              Vs = [],
              Us = [],
              qs = [],
              js = [],
              Gs = [],
              Xs = [],
              Zs = [],
              Ys = [],
              Ws = [],
              Hs = [],
              Ks = [],
              Js = [],
              Qs = [];
            As[85] = Bs[85] = -1, Fs[85] = zs[85] = 0, ks[85] = Vs[85] = 1, Ys[85] = Ks[85] = 1, Ws[85] = Js[85] = 0, Hs[85] = Qs[85] = 1, Ts[85] = Ns[85] = 0, Ps[85] = Rs[85] = -1, Ds[85] = js[85] = 0, Gs[85] = Us[85] = 0, Xs[85] = qs[85] = 1, Os[85] = Zs[85] = 1, Ks[1] = Ks[169] = 0, Js[1] = Js[169] = -1, Qs[1] = Qs[169] = 0, Us[1] = Us[169] = -1, qs[1] = qs[169] = 0, js[1] = js[169] = 0, Bs[4] = Bs[166] = 0, zs[4] = zs[166] = -1, Vs[4] = Vs[166] = 1, Gs[4] = Gs[166] = 1, Xs[4] = Xs[166] = 0, Zs[4] = Zs[166] = 0, As[16] = As[154] = 0, Fs[16] = Fs[154] = 1, ks[16] = ks[154] = 1, Ns[16] = Ns[154] = 1, Rs[16] = Rs[154] = 0, Os[16] = Os[154] = 1, Ys[64] = Ys[106] = 0, Ws[64] = Ws[106] = 1, Hs[64] = Hs[106] = 0, Ts[64] = Ts[106] = -1, Ps[64] = Ps[106] = 0, Ds[64] = Ds[106] = 1, Ys[2] = Ys[168] = 0, Ws[2] = Ws[168] = -1, Hs[2] = Hs[168] = 1, Ks[2] = Ks[168] = 0, Js[2] = Js[168] = -1, Qs[2] = Qs[168] = 0, Us[2] = Us[168] = -1, qs[2] = qs[168] = 0, js[2] = js[168] = 0, Gs[2] = Gs[168] = -1, Xs[2] = Xs[168] = 0, Zs[2] = Zs[168] = 1, As[8] = As[162] = 0, Fs[8] = Fs[162] = -1, ks[8] = ks[162] = 0, Bs[8] = Bs[162] = 0, zs[8] = zs[162] = -1, Vs[8] = Vs[162] = 1, Us[8] = Us[162] = 1, qs[8] = qs[162] = 0, js[8] = js[162] = 1, Gs[8] = Gs[162] = 1, Xs[8] = Xs[162] = 0, Zs[8] = Zs[162] = 0, As[32] = As[138] = 0, Fs[32] = Fs[138] = 1, ks[32] = ks[138] = 1, Bs[32] = Bs[138] = 0, zs[32] = zs[138] = 1, Vs[32] = Vs[138] = 0, Ts[32] = Ts[138] = 1, Ps[32] = Ps[138] = 0, Ds[32] = Ds[138] = 0, Ns[32] = Ns[138] = 1, Rs[32] = Rs[138] = 0, Os[32] = Os[138] = 1, Ks[128] = Ks[42] = 0, Js[128] = Js[42] = 1, Qs[128] = Qs[42] = 1, Ys[128] = Ys[42] = 0, Ws[128] = Ws[42] = 1, Hs[128] = Hs[42] = 0, Ts[128] = Ts[42] = -1, Ps[128] = Ps[42] = 0, Ds[128] = Ds[42] = 1, Ns[128] = Ns[42] = -1, Rs[128] = Rs[42] = 0, Os[128] = Os[42] = 0, Bs[5] = Bs[165] = -1, zs[5] = zs[165] = 0, Vs[5] = Vs[165] = 0, Ks[5] = Ks[165] = 1, Js[5] = Js[165] = 0, Qs[5] = Qs[165] = 0, Gs[20] = Gs[150] = 0, Xs[20] = Xs[150] = 1, Zs[20] = Zs[150] = 1, Ns[20] = Ns[150] = 0, Rs[20] = Rs[150] = -1, Os[20] = Os[150] = 1, As[80] = As[90] = -1, Fs[80] = Fs[90] = 0, ks[80] = ks[90] = 1, Ys[80] = Ys[90] = 1, Ws[80] = Ws[90] = 0, Hs[80] = Hs[90] = 1, Us[65] = Us[105] = 0, qs[65] = qs[105] = 1, js[65] = js[105] = 0, Ts[65] = Ts[105] = 0, Ps[65] = Ps[105] = -1, Ds[65] = Ds[105] = 0, As[160] = As[10] = -1, Fs[160] = Fs[10] = 0, ks[160] = ks[10] = 1, Bs[160] = Bs[10] = -1, zs[160] = zs[10] = 0, Vs[160] = Vs[10] = 0, Ks[160] = Ks[10] = 1, Js[160] = Js[10] = 0, Qs[160] = Qs[10] = 0, Ys[160] = Ys[10] = 1, Ws[160] = Ws[10] = 0, Hs[160] = Hs[10] = 1, Gs[130] = Gs[40] = 0, Xs[130] = Xs[40] = 1, Zs[130] = Zs[40] = 1, Us[130] = Us[40] = 0, qs[130] = qs[40] = 1, js[130] = js[40] = 0, Ts[130] = Ts[40] = 0, Ps[130] = Ps[40] = -1, Ds[130] = Ds[40] = 0, Ns[130] = Ns[40] = 0, Rs[130] = Rs[40] = -1, Os[130] = Os[40] = 1, Bs[37] = Bs[133] = 0, zs[37] = zs[133] = 1, Vs[37] = Vs[133] = 1, Ks[37] = Ks[133] = 0, Js[37] = Js[133] = 1, Qs[37] = Qs[133] = 0, Ts[37] = Ts[133] = -1, Ps[37] = Ps[133] = 0, Ds[37] = Ds[133] = 0, Ns[37] = Ns[133] = 1, Rs[37] = Rs[133] = 0, Os[37] = Os[133] = 0, Gs[148] = Gs[22] = -1, Xs[148] = Xs[22] = 0, Zs[148] = Zs[22] = 0, Ks[148] = Ks[22] = 0, Js[148] = Js[22] = -1, Qs[148] = Qs[22] = 1, Ys[148] = Ys[22] = 0, Ws[148] = Ws[22] = 1, Hs[148] = Hs[22] = 1, Ns[148] = Ns[22] = -1, Rs[148] = Rs[22] = 0, Os[148] = Os[22] = 1, As[82] = As[88] = 0, Fs[82] = Fs[88] = -1, ks[82] = ks[88] = 1, Gs[82] = Gs[88] = 1, Xs[82] = Xs[88] = 0, Zs[82] = Zs[88] = 1, Us[82] = Us[88] = -1, qs[82] = qs[88] = 0, js[82] = js[88] = 1, Ys[82] = Ys[88] = 0, Ws[82] = Ws[88] = -1, Hs[82] = Hs[88] = 0, As[73] = As[97] = 0, Fs[73] = Fs[97] = 1, ks[73] = ks[97] = 0, Bs[73] = Bs[97] = 0, zs[73] = zs[97] = -1, Vs[73] = Vs[97] = 0, Us[73] = Us[97] = 1, qs[73] = qs[97] = 0, js[73] = js[97] = 0, Ts[73] = Ts[97] = 1, Ps[73] = Ps[97] = 0, Ds[73] = Ds[97] = 1, As[145] = As[25] = 0, Fs[145] = Fs[25] = -1, ks[145] = ks[25] = 0, Us[145] = Us[25] = 1, qs[145] = qs[25] = 0, js[145] = js[25] = 1, Ks[145] = Ks[25] = 0, Js[145] = Js[25] = 1, Qs[145] = Qs[25] = 1, Ns[145] = Ns[25] = -1, Rs[145] = Rs[25] = 0, Os[145] = Os[25] = 0, Bs[70] = Bs[100] = 0, zs[70] = zs[100] = 1, Vs[70] = Vs[100] = 0, Gs[70] = Gs[100] = -1, Xs[70] = Xs[100] = 0, Zs[70] = Zs[100] = 1, Ys[70] = Ys[100] = 0, Ws[70] = Ws[100] = -1, Hs[70] = Hs[100] = 1, Ts[70] = Ts[100] = 1, Ps[70] = Ps[100] = 0, Ds[70] = Ds[100] = 0, Bs[101] = Bs[69] = 0, zs[101] = zs[69] = 1, Vs[101] = Vs[69] = 0, Ts[101] = Ts[69] = 1, Ps[101] = Ps[69] = 0, Ds[101] = Ds[69] = 0, Ks[149] = Ks[21] = 0, Js[149] = Js[21] = 1, Qs[149] = Qs[21] = 1, Ns[149] = Ns[21] = -1, Rs[149] = Rs[21] = 0, Os[149] = Os[21] = 0, Gs[86] = Gs[84] = -1, Xs[86] = Xs[84] = 0, Zs[86] = Zs[84] = 1, Ys[86] = Ys[84] = 0, Ws[86] = Ws[84] = -1, Hs[86] = Hs[84] = 1, As[89] = As[81] = 0, Fs[89] = Fs[81] = -1, ks[89] = ks[81] = 0, Us[89] = Us[81] = 1, qs[89] = qs[81] = 0, js[89] = js[81] = 1, As[96] = As[74] = 0, Fs[96] = Fs[74] = 1, ks[96] = ks[74] = 0, Bs[96] = Bs[74] = -1, zs[96] = zs[74] = 0, Vs[96] = Vs[74] = 1, Ys[96] = Ys[74] = 1, Ws[96] = Ws[74] = 0, Hs[96] = Hs[74] = 0, Ts[96] = Ts[74] = 1, Ps[96] = Ps[74] = 0, Ds[96] = Ds[74] = 1, As[24] = As[146] = 0, Fs[24] = Fs[146] = -1, ks[24] = ks[146] = 1, Gs[24] = Gs[146] = 1, Xs[24] = Xs[146] = 0, Zs[24] = Zs[146] = 1, Us[24] = Us[146] = 0, qs[24] = qs[146] = 1, js[24] = js[146] = 1, Ns[24] = Ns[146] = 0, Rs[24] = Rs[146] = -1, Os[24] = Os[146] = 0, Bs[6] = Bs[164] = -1, zs[6] = zs[164] = 0, Vs[6] = Vs[164] = 1, Gs[6] = Gs[164] = -1, Xs[6] = Xs[164] = 0, Zs[6] = Zs[164] = 0, Ks[6] = Ks[164] = 0, Js[6] = Js[164] = -1, Qs[6] = Qs[164] = 1, Ys[6] = Ys[164] = 1, Ws[6] = Ws[164] = 0, Hs[6] = Hs[164] = 0, Us[129] = Us[41] = 0, qs[129] = qs[41] = 1, js[129] = js[41] = 1, Ks[129] = Ks[41] = 0, Js[129] = Js[41] = 1, Qs[129] = Qs[41] = 0, Ts[129] = Ts[41] = -1, Ps[129] = Ps[41] = 0, Ds[129] = Ds[41] = 0, Ns[129] = Ns[41] = 0, Rs[129] = Rs[41] = -1, Os[129] = Os[41] = 0, Gs[66] = Gs[104] = 0, Xs[66] = Xs[104] = 1, Zs[66] = Zs[104] = 0, Us[66] = Us[104] = -1, qs[66] = qs[104] = 0, js[66] = js[104] = 1, Ys[66] = Ys[104] = 0, Ws[66] = Ws[104] = -1, Hs[66] = Hs[104] = 0, Ts[66] = Ts[104] = 0, Ps[66] = Ps[104] = -1, Ds[66] = Ds[104] = 1, As[144] = As[26] = -1, Fs[144] = Fs[26] = 0, ks[144] = ks[26] = 0, Ks[144] = Ks[26] = 1, Js[144] = Js[26] = 0, Qs[144] = Qs[26] = 1, Ys[144] = Ys[26] = 0, Ws[144] = Ws[26] = 1, Hs[144] = Hs[26] = 1, Ns[144] = Ns[26] = -1, Rs[144] = Rs[26] = 0, Os[144] = Os[26] = 1, Bs[36] = Bs[134] = 0, zs[36] = zs[134] = 1, Vs[36] = Vs[134] = 1, Gs[36] = Gs[134] = 0, Xs[36] = Xs[134] = 1, Zs[36] = Zs[134] = 0, Ts[36] = Ts[134] = 0, Ps[36] = Ps[134] = -1, Ds[36] = Ds[134] = 1, Ns[36] = Ns[134] = 1, Rs[36] = Rs[134] = 0, Os[36] = Os[134] = 0, As[9] = As[161] = -1, Fs[9] = Fs[161] = 0, ks[9] = ks[161] = 0, Bs[9] = Bs[161] = 0, zs[9] = zs[161] = -1, Vs[9] = Vs[161] = 0, Us[9] = Us[161] = 1, qs[9] = qs[161] = 0, js[9] = js[161] = 0, Ks[9] = Ks[161] = 1, Js[9] = Js[161] = 0, Qs[9] = Qs[161] = 1, As[136] = 0, Fs[136] = 1, ks[136] = 1, Bs[136] = 0, zs[136] = 1, Vs[136] = 0, Gs[136] = -1, Xs[136] = 0, Zs[136] = 1, Us[136] = -1, qs[136] = 0, js[136] = 0, Ks[136] = 0, Js[136] = -1, Qs[136] = 0, Ys[136] = 0, Ws[136] = -1, Hs[136] = 1, Ts[136] = 1, Ps[136] = 0, Ds[136] = 0, Ns[136] = 1, Rs[136] = 0, Os[136] = 1, As[34] = 0, Fs[34] = -1, ks[34] = 0, Bs[34] = 0, zs[34] = -1, Vs[34] = 1, Gs[34] = 1, Xs[34] = 0, Zs[34] = 0, Us[34] = 1, qs[34] = 0, js[34] = 1, Ks[34] = 0, Js[34] = 1, Qs[34] = 1, Ys[34] = 0, Ws[34] = 1, Hs[34] = 0, Ts[34] = -1, Ps[34] = 0, Ds[34] = 1, Ns[34] = -1, Rs[34] = 0, Os[34] = 0, As[35] = 0, Fs[35] = 1, ks[35] = 1, Bs[35] = 0, zs[35] = -1, Vs[35] = 1, Gs[35] = 1, Xs[35] = 0, Zs[35] = 0, Us[35] = -1, qs[35] = 0, js[35] = 0, Ks[35] = 0, Js[35] = -1, Qs[35] = 0, Ys[35] = 0, Ws[35] = 1, Hs[35] = 0, Ts[35] = -1, Ps[35] = 0, Ds[35] = 1, Ns[35] = 1, Rs[35] = 0, Os[35] = 1, As[153] = 0, Fs[153] = 1, ks[153] = 1, Us[153] = -1, qs[153] = 0, js[153] = 0, Ks[153] = 0, Js[153] = -1, Qs[153] = 0, Ns[153] = 1, Rs[153] = 0, Os[153] = 1, Bs[102] = 0, zs[102] = -1, Vs[102] = 1, Gs[102] = 1, Xs[102] = 0, Zs[102] = 0, Ys[102] = 0, Ws[102] = 1, Hs[102] = 0, Ts[102] = -1, Ps[102] = 0, Ds[102] = 1, As[155] = 0, Fs[155] = -1, ks[155] = 0, Us[155] = 1, qs[155] = 0, js[155] = 1, Ks[155] = 0, Js[155] = 1, Qs[155] = 1, Ns[155] = -1, Rs[155] = 0, Os[155] = 0, Bs[103] = 0, zs[103] = 1, Vs[103] = 0, Gs[103] = -1, Xs[103] = 0, Zs[103] = 1, Ys[103] = 0, Ws[103] = -1, Hs[103] = 1, Ts[103] = 1, Ps[103] = 0, Ds[103] = 0, As[152] = 0, Fs[152] = 1, ks[152] = 1, Gs[152] = -1, Xs[152] = 0, Zs[152] = 1, Us[152] = -1, qs[152] = 0, js[152] = 0, Ks[152] = 0, Js[152] = -1, Qs[152] = 0, Ys[152] = 0, Ws[152] = -1, Hs[152] = 1, Ns[152] = 1, Rs[152] = 0, Os[152] = 1, As[156] = 0, Fs[156] = -1, ks[156] = 1, Gs[156] = 1, Xs[156] = 0, Zs[156] = 1, Us[156] = -1, qs[156] = 0, js[156] = 0, Ks[156] = 0, Js[156] = -1, Qs[156] = 0, Ys[156] = 0, Ws[156] = 1, Hs[156] = 1, Ns[156] = -1, Rs[156] = 0, Os[156] = 1, As[137] = 0, Fs[137] = 1, ks[137] = 1, Bs[137] = 0, zs[137] = 1, Vs[137] = 0, Us[137] = -1, qs[137] = 0, js[137] = 0, Ks[137] = 0, Js[137] = -1, Qs[137] = 0, Ts[137] = 1, Ps[137] = 0, Ds[137] = 0, Ns[137] = 1, Rs[137] = 0, Os[137] = 1, As[139] = 0, Fs[139] = 1, ks[139] = 1, Bs[139] = 0, zs[139] = -1, Vs[139] = 0, Us[139] = 1, qs[139] = 0, js[139] = 0, Ks[139] = 0, Js[139] = 1, Qs[139] = 0, Ts[139] = -1, Ps[139] = 0, Ds[139] = 0, Ns[139] = 1, Rs[139] = 0, Os[139] = 1, As[98] = 0, Fs[98] = -1, ks[98] = 0, Bs[98] = 0, zs[98] = -1, Vs[98] = 1, Gs[98] = 1, Xs[98] = 0, Zs[98] = 0, Us[98] = 1, qs[98] = 0, js[98] = 1, Ys[98] = 0, Ws[98] = 1, Hs[98] = 0, Ts[98] = -1, Ps[98] = 0, Ds[98] = 1, As[99] = 0, Fs[99] = 1, ks[99] = 0, Bs[99] = 0, zs[99] = -1, Vs[99] = 1, Gs[99] = 1, Xs[99] = 0, Zs[99] = 0, Us[99] = -1, qs[99] = 0, js[99] = 1, Ys[99] = 0, Ws[99] = -1, Hs[99] = 0, Ts[99] = 1, Ps[99] = 0, Ds[99] = 1, Bs[38] = 0, zs[38] = -1, Vs[38] = 1, Gs[38] = 1, Xs[38] = 0, Zs[38] = 0, Ks[38] = 0, Js[38] = 1, Qs[38] = 1, Ys[38] = 0, Ws[38] = 1, Hs[38] = 0, Ts[38] = -1, Ps[38] = 0, Ds[38] = 1, Ns[38] = -1, Rs[38] = 0, Os[38] = 0, Bs[39] = 0, zs[39] = 1, Vs[39] = 1, Gs[39] = -1, Xs[39] = 0, Zs[39] = 0, Ks[39] = 0, Js[39] = -1, Qs[39] = 1, Ys[39] = 0, Ws[39] = 1, Hs[39] = 0, Ts[39] = -1, Ps[39] = 0, Ds[39] = 1, Ns[39] = 1, Rs[39] = 0, Os[39] = 0;
            var $s = function (t) {
                return [
                  [t.bottomleft, 0],
                  [0, 0],
                  [0, t.leftbottom]
                ]
              },
              ta = function (t) {
                return [
                  [1, t.rightbottom],
                  [1, 0],
                  [t.bottomright, 0]
                ]
              },
              ea = function (t) {
                return [
                  [t.topright, 1],
                  [1, 1],
                  [1, t.righttop]
                ]
              },
              ra = function (t) {
                return [
                  [0, t.lefttop],
                  [0, 1],
                  [t.topleft, 1]
                ]
              },
              ia = function (t) {
                return [
                  [t.bottomright, 0],
                  [t.bottomleft, 0],
                  [0, t.leftbottom],
                  [0, t.lefttop]
                ]
              },
              na = function (t) {
                return [
                  [t.bottomright, 0],
                  [t.bottomleft, 0],
                  [1, t.righttop],
                  [1, t.rightbottom]
                ]
              },
              oa = function (t) {
                return [
                  [1, t.righttop],
                  [1, t.rightbottom],
                  [t.topleft, 1],
                  [t.topright, 1]
                ]
              },
              sa = function (t) {
                return [
                  [0, t.leftbottom],
                  [0, t.lefttop],
                  [t.topleft, 1],
                  [t.topright, 1]
                ]
              },
              aa = [],
              ua = [],
              ca = [],
              ha = [],
              la = [],
              pa = [],
              fa = [],
              da = [];
            ha[1] = la[1] = 18, ha[169] = la[169] = 18, ca[4] = ua[4] = 12, ca[166] = ua[166] = 12, aa[16] = da[16] = 4, aa[154] = da[154] = 4, pa[64] = fa[64] = 22, pa[106] = fa[106] = 22, ca[2] = pa[2] = 17, ha[2] = la[2] = 18, ca[168] = pa[168] = 17, ha[168] = la[168] = 18, aa[8] = ha[8] = 9, ua[8] = ca[8] = 12, aa[162] = ha[162] = 9, ua[162] = ca[162] = 12, aa[32] = da[32] = 4, ua[32] = fa[32] = 1, aa[138] = da[138] = 4, ua[138] = fa[138] = 1, la[128] = da[128] = 21, pa[128] = fa[128] = 22, la[42] = da[42] = 21, pa[42] = fa[42] = 22, ua[5] = la[5] = 14, ua[165] = la[165] = 14, ca[20] = da[20] = 6, ca[150] = da[150] = 6, aa[80] = pa[80] = 11, aa[90] = pa[90] = 11, ha[65] = fa[65] = 3, ha[105] = fa[105] = 3, aa[160] = pa[160] = 11, ua[160] = la[160] = 14, aa[10] = pa[10] = 11, ua[10] = la[10] = 14, ca[130] = da[130] = 6, ha[130] = fa[130] = 3, ca[40] = da[40] = 6, ha[40] = fa[40] = 3, ua[101] = fa[101] = 1, ua[69] = fa[69] = 1, la[149] = da[149] = 21, la[21] = da[21] = 21, ca[86] = pa[86] = 17, ca[84] = pa[84] = 17, aa[89] = ha[89] = 9, aa[81] = ha[81] = 9, aa[96] = fa[96] = 0, ua[96] = pa[96] = 15, aa[74] = fa[74] = 0, ua[74] = pa[74] = 15, aa[24] = ca[24] = 8, ha[24] = da[24] = 7, aa[146] = ca[146] = 8, ha[146] = da[146] = 7, ua[6] = pa[6] = 15, ca[6] = la[6] = 16, ua[164] = pa[164] = 15, ca[164] = la[164] = 16, ha[129] = da[129] = 7, la[129] = fa[129] = 20, ha[41] = da[41] = 7, la[41] = fa[41] = 20, ca[66] = fa[66] = 2, ha[66] = pa[66] = 19, ca[104] = fa[104] = 2, ha[104] = pa[104] = 19, aa[144] = la[144] = 10, pa[144] = da[144] = 23, aa[26] = la[26] = 10, pa[26] = da[26] = 23, ua[36] = da[36] = 5, ca[36] = fa[36] = 2, ua[134] = da[134] = 5, ca[134] = fa[134] = 2, aa[9] = la[9] = 10, ua[9] = ha[9] = 13, aa[161] = la[161] = 10, ua[161] = ha[161] = 13, ua[37] = da[37] = 5, la[37] = fa[37] = 20, ua[133] = da[133] = 5, la[133] = fa[133] = 20, ca[148] = la[148] = 16, pa[148] = da[148] = 23, ca[22] = la[22] = 16, pa[22] = da[22] = 23, aa[82] = ca[82] = 8, ha[82] = pa[82] = 19, aa[88] = ca[88] = 8, ha[88] = pa[88] = 19, aa[73] = fa[73] = 0, ua[73] = ha[73] = 13, aa[97] = fa[97] = 0, ua[97] = ha[97] = 13, aa[145] = ha[145] = 9, la[145] = da[145] = 21, aa[25] = ha[25] = 9, la[25] = da[25] = 21, ua[70] = fa[70] = 1, ca[70] = pa[70] = 17, ua[100] = fa[100] = 1, ca[100] = pa[100] = 17, aa[34] = ha[34] = 9, ua[34] = ca[34] = 12, la[34] = da[34] = 21, pa[34] = fa[34] = 22, aa[136] = da[136] = 4, ua[136] = fa[136] = 1, ca[136] = pa[136] = 17, ha[136] = la[136] = 18, aa[35] = da[35] = 4, ua[35] = ca[35] = 12, ha[35] = la[35] = 18, pa[35] = fa[35] = 22, aa[153] = da[153] = 4, ha[153] = la[153] = 18, ua[102] = ca[102] = 12, pa[102] = fa[102] = 22, aa[155] = ha[155] = 9, la[155] = da[155] = 23, ua[103] = fa[103] = 1, ca[103] = pa[103] = 17, aa[152] = da[152] = 4, ca[152] = pa[152] = 17, ha[152] = la[152] = 18, aa[156] = ca[156] = 8, ha[156] = la[156] = 18, pa[156] = da[156] = 23, aa[137] = da[137] = 4, ua[137] = fa[137] = 1, ha[137] = la[137] = 18, aa[139] = da[139] = 4, ua[139] = ha[139] = 13, la[139] = fa[139] = 20, aa[98] = ha[98] = 9, ua[98] = ca[98] = 12, pa[98] = fa[98] = 22, aa[99] = fa[99] = 0, ua[99] = ca[99] = 12, ha[99] = pa[99] = 19, ua[38] = ca[38] = 12, la[38] = da[38] = 21, pa[38] = fa[38] = 22, ua[39] = da[39] = 5, ca[39] = la[39] = 16, pa[39] = fa[39] = 22;
            var ga = [];
            ga[1] = ga[169] = $s, ga[4] = ga[166] = ta, ga[16] = ga[154] = ea, ga[64] = ga[106] = ra, ga[168] = ga[2] = ia, ga[162] = ga[8] = na, ga[138] = ga[32] = oa, ga[42] = ga[128] = sa, ga[5] = ga[165] = function (t) {
              return [
                [0, 0],
                [0, t.leftbottom],
                [1, t.rightbottom],
                [1, 0]
              ]
            }, ga[20] = ga[150] = function (t) {
              return [
                [1, 0],
                [t.bottomright, 0],
                [t.topright, 1],
                [1, 1]
              ]
            }, ga[80] = ga[90] = function (t) {
              return [
                [1, 1],
                [1, t.righttop],
                [0, t.lefttop],
                [0, 1]
              ]
            }, ga[65] = ga[105] = function (t) {
              return [
                [t.bottomleft, 0],
                [0, 0],
                [0, 1],
                [t.topleft, 1]
              ]
            }, ga[160] = ga[10] = function (t) {
              return [
                [1, t.righttop],
                [1, t.rightbottom],
                [0, t.leftbottom],
                [0, t.lefttop]
              ]
            }, ga[130] = ga[40] = function (t) {
              return [
                [t.topleft, 1],
                [t.topright, 1],
                [t.bottomright, 0],
                [t.bottomleft, 0]
              ]
            }, ga[85] = function () {
              return [
                [0, 0],
                [0, 1],
                [1, 1],
                [1, 0]
              ]
            }, ga[101] = ga[69] = function (t) {
              return [
                [1, t.rightbottom],
                [1, 0],
                [0, 0],
                [0, 1],
                [t.topleft, 1]
              ]
            }, ga[149] = ga[21] = function (t) {
              return [
                [t.topright, 1],
                [1, 1],
                [1, 0],
                [0, 0],
                [0, t.leftbottom]
              ]
            }, ga[86] = ga[84] = function (t) {
              return [
                [1, 0],
                [t.bottomright, 0],
                [0, t.lefttop],
                [0, 1],
                [1, 1]
              ]
            }, ga[89] = ga[81] = function (t) {
              return [
                [1, 1],
                [1, t.righttop],
                [t.bottomleft, 0],
                [0, 0],
                [0, 1]
              ]
            }, ga[96] = ga[74] = function (t) {
              return [
                [1, t.righttop],
                [1, t.rightbottom],
                [0, t.lefttop],
                [0, 1],
                [t.topleft, 1]
              ]
            }, ga[24] = ga[146] = function (t) {
              return [
                [1, 1],
                [1, t.righttop],
                [t.bottomright, 0],
                [t.bottomleft, 0],
                [t.topright, 1]
              ]
            }, ga[6] = ga[164] = function (t) {
              return [
                [1, t.rightbottom],
                [1, 0],
                [t.bottomright, 0],
                [0, t.leftbottom],
                [0, t.lefttop]
              ]
            }, ga[129] = ga[41] = function (t) {
              return [
                [t.topright, 1],
                [t.bottomleft, 0],
                [0, 0],
                [0, t.leftbottom],
                [t.topleft, 1]
              ]
            }, ga[66] = ga[104] = function (t) {
              return [
                [t.bottomright, 0],
                [t.bottomleft, 0],
                [0, t.lefttop],
                [0, 1],
                [t.topleft, 1]
              ]
            }, ga[144] = ga[26] = function (t) {
              return [
                [1, 1],
                [1, t.righttop],
                [0, t.leftbottom],
                [0, t.lefttop],
                [t.topright, 1]
              ]
            }, ga[36] = ga[134] = function (t) {
              return [
                [1, t.rightbottom],
                [1, 0],
                [t.bottomright, 0],
                [t.topleft, 1],
                [t.topright, 1]
              ]
            }, ga[9] = ga[161] = function (t) {
              return [
                [1, t.righttop],
                [1, t.rightbottom],
                [t.bottomleft, 0],
                [0, 0],
                [0, t.leftbottom]
              ]
            }, ga[37] = ga[133] = function (t) {
              return [
                [1, t.rightbottom],
                [1, 0],
                [0, 0],
                [0, t.leftbottom],
                [t.topleft, 1],
                [t.topright, 1]
              ]
            }, ga[148] = ga[22] = function (t) {
              return [
                [1, 1],
                [1, 0],
                [t.bottomright, 0],
                [0, t.leftbottom],
                [0, t.lefttop],
                [t.topright, 1]
              ]
            }, ga[82] = ga[88] = function (t) {
              return [
                [1, 1],
                [1, t.righttop],
                [t.bottomright, 0],
                [t.bottomleft, 0],
                [0, t.lefttop],
                [0, 1]
              ]
            }, ga[73] = ga[97] = function (t) {
              return [
                [1, t.righttop],
                [1, t.rightbottom],
                [t.bottomleft, 0],
                [0, 0],
                [0, 1],
                [t.topleft, 1]
              ]
            }, ga[145] = ga[25] = function (t) {
              return [
                [1, 1],
                [1, t.righttop],
                [t.bottomleft, 0],
                [0, 0],
                [0, t.leftbottom],
                [t.topright, 1]
              ]
            }, ga[70] = ga[100] = function (t) {
              return [
                [1, t.rightbottom],
                [1, 0],
                [t.bottomright, 0],
                [0, t.lefttop],
                [0, 1],
                [t.topleft, 1]
              ]
            }, ga[34] = function (t) {
              return [sa(t), na(t)]
            }, ga[35] = function (t) {
              return [
                [1, t.righttop],
                [1, t.rightbottom],
                [t.bottomright, 0],
                [t.bottomleft, 0],
                [0, t.leftbottom],
                [0, t.lefttop],
                [t.topleft, 1],
                [t.topright, 1]
              ]
            }, ga[136] = function (t) {
              return [oa(t), ia(t)]
            }, ga[153] = function (t) {
              return [ea(t), $s(t)]
            }, ga[102] = function (t) {
              return [ta(t), ra(t)]
            }, ga[155] = function (t) {
              return [
                [1, 1],
                [1, t.righttop],
                [t.bottomleft, 0],
                [0, 0],
                [0, t.leftbottom],
                [t.topright, 1]
              ]
            }, ga[103] = function (t) {
              return [
                [1, t.rightbottom],
                [1, 0],
                [t.bottomright, 0],
                [0, t.lefttop],
                [0, 1],
                [t.topleft, 1]
              ]
            }, ga[152] = function (t) {
              return [ea(t), ia(t)]
            }, ga[156] = function (t) {
              return [
                [1, 1],
                [1, t.righttop],
                [t.bottomright, 0],
                [t.bottomleft, 0],
                [0, t.leftbottom],
                [0, t.lefttop],
                [t.topright, 1]
              ]
            }, ga[137] = function (t) {
              return [oa(t), $s(t)]
            }, ga[139] = function (t) {
              return [
                [1, t.righttop],
                [1, t.rightbottom],
                [t.bottomleft, 0],
                [0, 0],
                [0, t.leftbottom],
                [t.topleft, 1],
                [t.topright, 1]
              ]
            }, ga[98] = function (t) {
              return [na(t), ra(t)]
            }, ga[99] = function (t) {
              return [
                [1, t.righttop],
                [1, t.rightbottom],
                [t.bottomright, 0],
                [t.bottomleft, 0],
                [0, t.lefttop],
                [0, 1],
                [t.topleft, 1]
              ]
            }, ga[38] = function (t) {
              return [ta(t), sa(t)]
            }, ga[39] = function (t) {
              return [
                [1, t.rightbottom],
                [1, 0],
                [t.bottomright, 0],
                [0, t.leftbottom],
                [0, t.lefttop],
                [t.topleft, 1],
                [t.topright, 1]
              ]
            };
            var _a = function t(e) {
              this.id = t.buildId(e), this.coordinates = e, this.innerEdges = [], this.outerEdges = [], this.outerEdgesSorted = !1;
            };
            _a.buildId = function (t) {
              return t.join(",")
            }, _a.prototype.removeInnerEdge = function (t) {
              this.innerEdges = this.innerEdges.filter(function (e) {
                return e.from.id !== t.from.id
              });
            }, _a.prototype.removeOuterEdge = function (t) {
              this.outerEdges = this.outerEdges.filter(function (e) {
                return e.to.id !== t.to.id
              });
            }, _a.prototype.addOuterEdge = function (t) {
              this.outerEdges.push(t), this.outerEdgesSorted = !1;
            }, _a.prototype.sortOuterEdges = function () {
              var t = this;
              this.outerEdgesSorted || (this.outerEdges.sort(function (e, r) {
                var i = e.to,
                  n = r.to;
                if (i.coordinates[0] - t.coordinates[0] >= 0 && n.coordinates[0] - t.coordinates[0] < 0) return 1;
                if (i.coordinates[0] - t.coordinates[0] < 0 && n.coordinates[0] - t.coordinates[0] >= 0) return -1;
                if (i.coordinates[0] - t.coordinates[0] == 0 && n.coordinates[0] - t.coordinates[0] == 0) return i.coordinates[1] - t.coordinates[1] >= 0 || n.coordinates[1] - t.coordinates[1] >= 0 ? i.coordinates[1] - n.coordinates[1] : n.coordinates[1] - i.coordinates[1];
                var o = ai(t.coordinates, i.coordinates, n.coordinates);
                return o < 0 ? 1 : o > 0 ? -1 : Math.pow(i.coordinates[0] - t.coordinates[0], 2) + Math.pow(i.coordinates[1] - t.coordinates[1], 2) - (Math.pow(n.coordinates[0] - t.coordinates[0], 2) + Math.pow(n.coordinates[1] - t.coordinates[1], 2))
              }), this.outerEdgesSorted = !0);
            }, _a.prototype.getOuterEdges = function () {
              return this.sortOuterEdges(), this.outerEdges
            }, _a.prototype.getOuterEdge = function (t) {
              return this.sortOuterEdges(), this.outerEdges[t]
            }, _a.prototype.addInnerEdge = function (t) {
              this.innerEdges.push(t);
            };
            var ya = function (t, e) {
              this.from = t, this.to = e, this.next = void 0, this.label = void 0, this.symetric = void 0, this.ring = void 0, this.from.addOuterEdge(this), this.to.addInnerEdge(this);
            };
            ya.prototype.getSymetric = function () {
              return this.symetric || (this.symetric = new ya(this.to, this.from), this.symetric.symetric = this), this.symetric
            }, ya.prototype.deleteEdge = function () {
              this.from.removeOuterEdge(this), this.to.removeInnerEdge(this);
            }, ya.prototype.isEqual = function (t) {
              return this.from.id === t.from.id && this.to.id === t.to.id
            }, ya.prototype.toString = function () {
              return "Edge { " + this.from.id + " -> " + this.to.id + " }"
            }, ya.prototype.toLineString = function () {
              return a([this.from.coordinates, this.to.coordinates])
            }, ya.prototype.compareTo = function (t) {
              return ai(t.from.coordinates, t.to.coordinates, this.to.coordinates)
            };
            var ma = function () {
                this.edges = [], this.polygon = void 0, this.envelope = void 0;
              },
              va = {
                length: {
                  configurable: !0
                }
              };
            ma.prototype.push = function (t) {
              this[this.edges.length] = t, this.edges.push(t), this.polygon = this.envelope = void 0;
            }, ma.prototype.get = function (t) {
              return this.edges[t]
            }, va.length.get = function () {
              return this.edges.length
            }, ma.prototype.forEach = function (t) {
              this.edges.forEach(t);
            }, ma.prototype.map = function (t) {
              return this.edges.map(t)
            }, ma.prototype.some = function (t) {
              return this.edges.some(t)
            }, ma.prototype.isValid = function () {
              return !0
            }, ma.prototype.isHole = function () {
              var t = this,
                e = this.edges.reduce(function (e, r, i) {
                  return r.from.coordinates[1] > t.edges[e].from.coordinates[1] && (e = i), e
                }, 0),
                r = (0 === e ? this.length : e) - 1,
                i = (e + 1) % this.length,
                n = ai(this.edges[r].from.coordinates, this.edges[e].from.coordinates, this.edges[i].from.coordinates);
              return 0 === n ? this.edges[r].from.coordinates[0] > this.edges[i].from.coordinates[0] : n > 0
            }, ma.prototype.toMultiPoint = function () {
              return l(this.edges.map(function (t) {
                return t.from.coordinates
              }))
            }, ma.prototype.toPolygon = function () {
              if (this.polygon) return this.polygon;
              var t = this.edges.map(function (t) {
                return t.from.coordinates
              });
              return t.push(this.edges[0].from.coordinates), this.polygon = o([t])
            }, ma.prototype.getEnvelope = function () {
              return this.envelope ? this.envelope : this.envelope = ne(this.toPolygon())
            }, ma.findEdgeRingContaining = function (t, e) {
              var r, n, o = t.getEnvelope();
              return e.forEach(function (e) {
                var s = e.getEnvelope();
                if (n && (r = n.getEnvelope()), ! function (t, e) {
                    var r = t.geometry.coordinates.map(function (t) {
                        return t[0]
                      }),
                      i = t.geometry.coordinates.map(function (t) {
                        return t[1]
                      }),
                      n = e.geometry.coordinates.map(function (t) {
                        return t[0]
                      }),
                      o = e.geometry.coordinates.map(function (t) {
                        return t[1]
                      });
                    return Math.max(null, r) === Math.max(null, n) && Math.max(null, i) === Math.max(null, o) && Math.min(null, r) === Math.min(null, n) && Math.min(null, i) === Math.min(null, o)
                  }(s, o) && ui(s, o)) {
                  var a = t.map(function (t) {
                    return t.from.coordinates
                  }).find(function (t) {
                    return !e.some(function (e) {
                      return function (t, e) {
                        return t[0] === e[0] && t[1] === e[1]
                      }(t, e.from.coordinates)
                    })
                  });
                  a && e.inside(i(a)) && (n && !ui(r, s) || (n = e));
                }
              }), n
            }, ma.prototype.inside = function (t) {
              return Mt(t, this.toPolygon())
            }, Object.defineProperties(ma.prototype, va);
            var xa = function () {
              this.edges = [], this.nodes = {};
            };
            xa.fromGeoJson = function (t) {
              ! function (t) {
                if (!t) throw new Error("No geojson passed");
                if ("FeatureCollection" !== t.type && "GeometryCollection" !== t.type && "MultiLineString" !== t.type && "LineString" !== t.type && "Feature" !== t.type) throw new Error("Invalid input type '" + t.type + "'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")
              }(t);
              var e = new xa;
              return F(t, function (t) {
                Y(t, "LineString", "Graph::fromGeoJson"), M(t, function (t, r) {
                  if (t) {
                    var i = e.getNode(t),
                      n = e.getNode(r);
                    e.addEdge(i, n);
                  }
                  return r
                });
              }), e
            }, xa.prototype.getNode = function (t) {
              var e = _a.buildId(t),
                r = this.nodes[e];
              return r || (r = this.nodes[e] = new _a(t)), r
            }, xa.prototype.addEdge = function (t, e) {
              var r = new ya(t, e),
                i = r.getSymetric();
              this.edges.push(r), this.edges.push(i);
            }, xa.prototype.deleteDangles = function () {
              var t = this;
              Object.keys(this.nodes).map(function (e) {
                return t.nodes[e]
              }).forEach(function (e) {
                return t._removeIfDangle(e)
              });
            }, xa.prototype._removeIfDangle = function (t) {
              var e = this;
              if (t.innerEdges.length <= 1) {
                var r = t.getOuterEdges().map(function (t) {
                  return t.to
                });
                this.removeNode(t), r.forEach(function (t) {
                  return e._removeIfDangle(t)
                });
              }
            }, xa.prototype.deleteCutEdges = function () {
              var t = this;
              this._computeNextCWEdges(), this._findLabeledEdgeRings(), this.edges.forEach(function (e) {
                e.label === e.symetric.label && (t.removeEdge(e.symetric), t.removeEdge(e));
              });
            }, xa.prototype._computeNextCWEdges = function (t) {
              var e = this;
              void 0 === t ? Object.keys(this.nodes).forEach(function (t) {
                return e._computeNextCWEdges(e.nodes[t])
              }) : t.getOuterEdges().forEach(function (e, r) {
                t.getOuterEdge((0 === r ? t.getOuterEdges().length : r) - 1).symetric.next = e;
              });
            }, xa.prototype._computeNextCCWEdges = function (t, e) {
              for (var r, i, n = t.getOuterEdges(), o = n.length - 1; o >= 0; --o) {
                var s = n[o],
                  a = s.symetric,
                  u = void 0,
                  c = void 0;
                s.label === e && (u = s), a.label === e && (c = a), u && c && (c && (i = c), u && (i && (i.next = u, i = void 0), r || (r = u)));
              }
              i && (i.next = r);
            }, xa.prototype._findLabeledEdgeRings = function () {
              var t = [],
                e = 0;
              return this.edges.forEach(function (r) {
                if (!(r.label >= 0)) {
                  t.push(r);
                  var i = r;
                  do {
                    i.label = e, i = i.next;
                  } while (!r.isEqual(i));
                  e++;
                }
              }), t
            }, xa.prototype.getEdgeRings = function () {
              var t = this;
              this._computeNextCWEdges(), this.edges.forEach(function (t) {
                t.label = void 0;
              }), this._findLabeledEdgeRings().forEach(function (e) {
                t._findIntersectionNodes(e).forEach(function (r) {
                  t._computeNextCCWEdges(r, e.label);
                });
              });
              var e = [];
              return this.edges.forEach(function (r) {
                r.ring || e.push(t._findEdgeRing(r));
              }), e
            }, xa.prototype._findIntersectionNodes = function (t) {
              var e = [],
                r = t,
                i = function () {
                  var i = 0;
                  r.from.getOuterEdges().forEach(function (e) {
                    e.label === t.label && ++i;
                  }), i > 1 && e.push(r.from), r = r.next;
                };
              do {
                i();
              } while (!t.isEqual(r));
              return e
            }, xa.prototype._findEdgeRing = function (t) {
              var e = t,
                r = new ma;
              do {
                r.push(e), e.ring = r, e = e.next;
              } while (!t.isEqual(e));
              return r
            }, xa.prototype.removeNode = function (t) {
              var e = this;
              t.getOuterEdges().forEach(function (t) {
                return e.removeEdge(t)
              }), t.innerEdges.forEach(function (t) {
                return e.removeEdge(t)
              }), delete this.nodes[t.id];
            }, xa.prototype.removeEdge = function (t) {
              this.edges = this.edges.filter(function (e) {
                return !e.isEqual(t)
              }), t.deleteEdge();
            };
            var wa = _t(function (t, e) {
                function r(t) {
                  var e = [];
                  for (var r in t) e.push(r);
                  return e
                }(t.exports = "function" == typeof Object.keys ? Object.keys : r).shim = r;
              }),
              ba = (wa.shim, _t(function (t, e) {
                function r(t) {
                  return "[object Arguments]" == Object.prototype.toString.call(t)
                }
  
                function i(t) {
                  return t && "object" == typeof t && "number" == typeof t.length && Object.prototype.hasOwnProperty.call(t, "callee") && !Object.prototype.propertyIsEnumerable.call(t, "callee") || !1
                }
                var n = "[object Arguments]" == function () {
                  return Object.prototype.toString.call(arguments)
                }();
                (e = t.exports = n ? r : i).supported = r, e.unsupported = i;
              })),
              Ea = (ba.supported, ba.unsupported, _t(function (t) {
                function e(t) {
                  return null == t
                }
  
                function r(t) {
                  return !(!t || "object" != typeof t || "number" != typeof t.length || "function" != typeof t.copy || "function" != typeof t.slice || t.length > 0 && "number" != typeof t[0])
                }
                var i = Array.prototype.slice,
                  n = t.exports = function (t, o, s) {
                    return s || (s = {}), t === o || (t instanceof Date && o instanceof Date ? t.getTime() === o.getTime() : !t || !o || "object" != typeof t && "object" != typeof o ? s.strict ? t === o : t == o : function (t, o, s) {
                      var a, u;
                      if (e(t) || e(o)) return !1;
                      if (t.prototype !== o.prototype) return !1;
                      if (ba(t)) return !!ba(o) && (t = i.call(t), o = i.call(o), n(t, o, s));
                      if (r(t)) {
                        if (!r(o)) return !1;
                        if (t.length !== o.length) return !1;
                        for (a = 0; a < t.length; a++)
                          if (t[a] !== o[a]) return !1;
                        return !0
                      }
                      try {
                        var c = wa(t),
                          h = wa(o);
                      } catch (t) {
                        return !1
                      }
                      if (c.length != h.length) return !1;
                      for (c.sort(), h.sort(), a = c.length - 1; a >= 0; a--)
                        if (c[a] != h[a]) return !1;
                      for (a = c.length - 1; a >= 0; a--)
                        if (u = c[a], !n(t[u], o[u], s)) return !1;
                      return typeof t == typeof o
                    }(t, o, s))
                  };
              })),
              La = function (t) {
                this.precision = t && t.precision ? t.precision : 17, this.direction = !(!t || !t.direction) && t.direction, this.pseudoNode = !(!t || !t.pseudoNode) && t.pseudoNode, this.objectComparator = t && t.objectComparator ? t.objectComparator : vi;
              };
            La.prototype.compare = function (t, e) {
              if (t.type !== e.type || !mi(t, e)) return !1;
              switch (t.type) {
                case "Point":
                  return this.compareCoord(t.coordinates, e.coordinates);
                case "LineString":
                  return this.compareLine(t.coordinates, e.coordinates, 0, !1);
                case "Polygon":
                  return this.comparePolygon(t, e);
                case "Feature":
                  return this.compareFeature(t, e);
                default:
                  if (0 === t.type.indexOf("Multi")) {
                    var r = this,
                      i = yi(t),
                      n = yi(e);
                    return i.every(function (t) {
                      return this.some(function (e) {
                        return r.compare(t, e)
                      })
                    }, n)
                  }
              }
              return !1
            }, La.prototype.compareCoord = function (t, e) {
              if (t.length !== e.length) return !1;
              for (var r = 0; r < t.length; r++)
                if (t[r].toFixed(this.precision) !== e[r].toFixed(this.precision)) return !1;
              return !0
            }, La.prototype.compareLine = function (t, e, r, i) {
              if (!mi(t, e)) return !1;
              var n = this.pseudoNode ? t : this.removePseudo(t),
                o = this.pseudoNode ? e : this.removePseudo(e);
              if (!i || this.compareCoord(n[0], o[0]) || (o = this.fixStartIndex(o, n))) {
                var s = this.compareCoord(n[r], o[r]);
                return this.direction || s ? this.comparePath(n, o) : !!this.compareCoord(n[r], o[o.length - (1 + r)]) && this.comparePath(n.slice().reverse(), o)
              }
            }, La.prototype.fixStartIndex = function (t, e) {
              for (var r, i = -1, n = 0; n < t.length; n++)
                if (this.compareCoord(t[n], e[0])) {
                  i = n;
                  break
                } return i >= 0 && (r = [].concat(t.slice(i, t.length), t.slice(1, i + 1))), r
            }, La.prototype.comparePath = function (t, e) {
              var r = this;
              return t.every(function (t, e) {
                return r.compareCoord(t, this[e])
              }, e)
            }, La.prototype.comparePolygon = function (t, e) {
              if (this.compareLine(t.coordinates[0], e.coordinates[0], 1, !0)) {
                var r = t.coordinates.slice(1, t.coordinates.length),
                  i = e.coordinates.slice(1, e.coordinates.length),
                  n = this;
                return r.every(function (t) {
                  return this.some(function (e) {
                    return n.compareLine(t, e, 1, !0)
                  })
                }, i)
              }
              return !1
            }, La.prototype.compareFeature = function (t, e) {
              return !(t.id !== e.id || !this.objectComparator(t.properties, e.properties) || !this.compareBBox(t, e)) && this.compare(t.geometry, e.geometry)
            }, La.prototype.compareBBox = function (t, e) {
              return !!(!t.bbox && !e.bbox || t.bbox && e.bbox && this.compareCoord(t.bbox, e.bbox))
            }, La.prototype.removePseudo = function (t) {
              return t
            };
            var Sa = La,
              Ca = _t(function (t) {
                function e(t, e, r, i) {
                  this.dataset = [], this.epsilon = 1, this.minPts = 2, this.distance = this._euclideanDistance, this.clusters = [], this.noise = [], this._visited = [], this._assigned = [], this._datasetLength = 0, this._init(t, e, r, i);
                }
                e.prototype.run = function (t, e, r, i) {
                  this._init(t, e, r, i);
                  for (var n = 0; n < this._datasetLength; n++)
                    if (1 !== this._visited[n]) {
                      this._visited[n] = 1;
                      var o = this._regionQuery(n);
                      if (o.length < this.minPts) this.noise.push(n);
                      else {
                        var s = this.clusters.length;
                        this.clusters.push([]), this._addToCluster(n, s), this._expandCluster(s, o);
                      }
                    } return this.clusters
                }, e.prototype._init = function (t, e, r, i) {
                  if (t) {
                    if (!(t instanceof Array)) throw Error("Dataset must be of type array, " + typeof t + " given");
                    this.dataset = t, this.clusters = [], this.noise = [], this._datasetLength = t.length, this._visited = new Array(this._datasetLength), this._assigned = new Array(this._datasetLength);
                  }
                  e && (this.epsilon = e), r && (this.minPts = r), i && (this.distance = i);
                }, e.prototype._expandCluster = function (t, e) {
                  for (var r = 0; r < e.length; r++) {
                    var i = e[r];
                    if (1 !== this._visited[i]) {
                      this._visited[i] = 1;
                      var n = this._regionQuery(i);
                      n.length >= this.minPts && (e = this._mergeArrays(e, n));
                    }
                    1 !== this._assigned[i] && this._addToCluster(i, t);
                  }
                }, e.prototype._addToCluster = function (t, e) {
                  this.clusters[e].push(t), this._assigned[t] = 1;
                }, e.prototype._regionQuery = function (t) {
                  for (var e = [], r = 0; r < this._datasetLength; r++) this.distance(this.dataset[t], this.dataset[r]) < this.epsilon && e.push(r);
                  return e
                }, e.prototype._mergeArrays = function (t, e) {
                  for (var r = e.length, i = 0; i < r; i++) {
                    var n = e[i];
                    t.indexOf(n) < 0 && t.push(n);
                  }
                  return t
                }, e.prototype._euclideanDistance = function (t, e) {
                  for (var r = 0, i = Math.min(t.length, e.length); i--;) r += (t[i] - e[i]) * (t[i] - e[i]);
                  return Math.sqrt(r)
                }, t.exports && (t.exports = e);
              }),
              Ia = _t(function (t) {
                function e(t, e, r) {
                  this.k = 3, this.dataset = [], this.assignments = [], this.centroids = [], this.init(t, e, r);
                }
                e.prototype.init = function (t, e, r) {
                  this.assignments = [], this.centroids = [], void 0 !== t && (this.dataset = t), void 0 !== e && (this.k = e), void 0 !== r && (this.distance = r);
                }, e.prototype.run = function (t, e) {
                  this.init(t, e);
                  for (var r = this.dataset.length, i = 0; i < this.k; i++) this.centroids[i] = this.randomCentroid();
                  for (var n = !0; n;) {
                    n = this.assign();
                    for (var o = 0; o < this.k; o++) {
                      for (var s = new Array(h), a = 0, u = 0; u < h; u++) s[u] = 0;
                      for (var c = 0; c < r; c++) {
                        var h = this.dataset[c].length;
                        if (o === this.assignments[c]) {
                          for (u = 0; u < h; u++) s[u] += this.dataset[c][u];
                          a++;
                        }
                      }
                      if (a > 0) {
                        for (u = 0; u < h; u++) s[u] /= a;
                        this.centroids[o] = s;
                      } else this.centroids[o] = this.randomCentroid(), n = !0;
                    }
                  }
                  return this.getClusters()
                }, e.prototype.randomCentroid = function () {
                  var t, e, r = this.dataset.length - 1;
                  do {
                    e = Math.round(Math.random() * r), t = this.dataset[e];
                  } while (this.centroids.indexOf(t) >= 0);
                  return t
                }, e.prototype.assign = function () {
                  for (var t, e = !1, r = this.dataset.length, i = 0; i < r; i++)(t = this.argmin(this.dataset[i], this.centroids, this.distance)) != this.assignments[i] && (this.assignments[i] = t, e = !0);
                  return e
                }, e.prototype.getClusters = function () {
                  for (var t, e = new Array(this.k), r = 0; r < this.assignments.length; r++) void 0 === e[t = this.assignments[r]] && (e[t] = []), e[t].push(r);
                  return e
                }, e.prototype.argmin = function (t, e, r) {
                  for (var i, n = Number.MAX_VALUE, o = 0, s = e.length, a = 0; a < s; a++)(i = r(t, e[a])) < n && (n = i, o = a);
                  return o
                }, e.prototype.distance = function (t, e) {
                  for (var r = 0, i = Math.min(t.length, e.length); i--;) {
                    var n = t[i] - e[i];
                    r += n * n;
                  }
                  return Math.sqrt(r)
                }, t.exports && (t.exports = e);
              }),
              Ma = _t(function (t) {
                function e(t, e, r) {
                  this._queue = [], this._priorities = [], this._sorting = "desc", this._init(t, e, r);
                }
                e.prototype.insert = function (t, e) {
                  for (var r = this._queue.length, i = r; i--;) {
                    var n = this._priorities[i];
                    "desc" === this._sorting ? e > n && (r = i) : e < n && (r = i);
                  }
                  this._insertAt(t, e, r);
                }, e.prototype.remove = function (t) {
                  for (var e = this._queue.length; e--;)
                    if (t === this._queue[e]) {
                      this._queue.splice(e, 1), this._priorities.splice(e, 1);
                      break
                    }
                }, e.prototype.forEach = function (t) {
                  this._queue.forEach(t);
                }, e.prototype.getElements = function () {
                  return this._queue
                }, e.prototype.getElementPriority = function (t) {
                  return this._priorities[t]
                }, e.prototype.getPriorities = function () {
                  return this._priorities
                }, e.prototype.getElementsWithPriorities = function () {
                  for (var t = [], e = 0, r = this._queue.length; e < r; e++) t.push([this._queue[e], this._priorities[e]]);
                  return t
                }, e.prototype._init = function (t, e, r) {
                  if (t && e) {
                    if (this._queue = [], this._priorities = [], t.length !== e.length) throw new Error("Arrays must have the same length");
                    for (var i = 0; i < t.length; i++) this.insert(t[i], e[i]);
                  }
                  r && (this._sorting = r);
                }, e.prototype._insertAt = function (t, e, r) {
                  this._queue.length === r ? (this._queue.push(t), this._priorities.push(e)) : (this._queue.splice(r, 0, t), this._priorities.splice(r, 0, e));
                }, t.exports && (t.exports = e);
              }),
              Ta = _t(function (t) {
                function e(t, e, r, i) {
                  this.epsilon = 1, this.minPts = 1, this.distance = this._euclideanDistance, this._reachability = [], this._processed = [], this._coreDistance = 0, this._orderedList = [], this._init(t, e, r, i);
                }
                if (t.exports) var r = Ma;
                e.prototype.run = function (t, e, i, n) {
                  this._init(t, e, i, n);
                  for (var o = 0, s = this.dataset.length; o < s; o++)
                    if (1 !== this._processed[o]) {
                      this._processed[o] = 1, this.clusters.push([o]);
                      var a = this.clusters.length - 1;
                      this._orderedList.push(o);
                      var u = new r(null, null, "asc"),
                        c = this._regionQuery(o);
                      void 0 !== this._distanceToCore(o) && (this._updateQueue(o, c, u), this._expandCluster(a, u));
                    } return this.clusters
                }, e.prototype.getReachabilityPlot = function () {
                  for (var t = [], e = 0, r = this._orderedList.length; e < r; e++) {
                    var i = this._orderedList[e],
                      n = this._reachability[i];
                    t.push([i, n]);
                  }
                  return t
                }, e.prototype._init = function (t, e, r, i) {
                  if (t) {
                    if (!(t instanceof Array)) throw Error("Dataset must be of type array, " + typeof t + " given");
                    this.dataset = t, this.clusters = [], this._reachability = new Array(this.dataset.length), this._processed = new Array(this.dataset.length), this._coreDistance = 0, this._orderedList = [];
                  }
                  e && (this.epsilon = e), r && (this.minPts = r), i && (this.distance = i);
                }, e.prototype._updateQueue = function (t, e, r) {
                  var i = this;
                  this._coreDistance = this._distanceToCore(t), e.forEach(function (e) {
                    if (void 0 === i._processed[e]) {
                      var n = i.distance(i.dataset[t], i.dataset[e]),
                        o = Math.max(i._coreDistance, n);
                      void 0 === i._reachability[e] ? (i._reachability[e] = o, r.insert(e, o)) : o < i._reachability[e] && (i._reachability[e] = o, r.remove(e), r.insert(e, o));
                    }
                  });
                }, e.prototype._expandCluster = function (t, e) {
                  for (var r = e.getElements(), i = 0, n = r.length; i < n; i++) {
                    var o = r[i];
                    if (void 0 === this._processed[o]) {
                      var s = this._regionQuery(o);
                      this._processed[o] = 1, this.clusters[t].push(o), this._orderedList.push(o), void 0 !== this._distanceToCore(o) && (this._updateQueue(o, s, e), this._expandCluster(t, e));
                    }
                  }
                }, e.prototype._distanceToCore = function (t) {
                  for (var e = this.epsilon, r = 0; r < e; r++)
                    if (this._regionQuery(t, r).length >= this.minPts) return r
                }, e.prototype._regionQuery = function (t, e) {
                  e = e || this.epsilon;
                  for (var r = [], i = 0, n = this.dataset.length; i < n; i++) this.distance(this.dataset[t], this.dataset[i]) < e && r.push(i);
                  return r
                }, e.prototype._euclideanDistance = function (t, e) {
                  for (var r = 0, i = Math.min(t.length, e.length); i--;) r += (t[i] - e[i]) * (t[i] - e[i]);
                  return Math.sqrt(r)
                }, t.exports && (t.exports = e);
              }),
              Pa = _t(function (t) {
                t.exports && (t.exports = {
                  DBSCAN: Ca,
                  KMEANS: Ia,
                  OPTICS: Ta,
                  PriorityQueue: Ma
                });
              }),
              Da = (Pa.DBSCAN, Pa.KMEANS, Pa.OPTICS, Pa.PriorityQueue, function (t, e, r) {
                for (var i = t.length, n = 0, o = 0; o < i; o++) {
                  var s = (t[o] || 0) - (e[o] || 0);
                  n += s * s;
                }
                return r ? Math.sqrt(n) : n
              }),
              Na = Da,
              Ra = function (t, e, r) {
                var i = Math.abs(t - e);
                return r ? i : i * i
              },
              Oa = Da,
              Aa = function (t, e, r, i) {
                var n = [],
                  o = [],
                  s = [],
                  a = [],
                  u = !1,
                  c = i || 1e4,
                  h = t.length,
                  l = t[0].length,
                  p = l > 0,
                  f = [];
                if (r) n = "kmrand" == r ? function (t, e) {
                  for (var r = {}, i = [], n = e << 2, o = t.length, s = t[0].length > 0; i.length < e && n-- > 0;) {
                    var a = t[Math.floor(Math.random() * o)],
                      u = s ? a.join("_") : "" + a;
                    r[u] || (r[u] = !0, i.push(a));
                  }
                  if (i.length < e) throw new Error("Error initializating clusters");
                  return i
                }(t, e) : "kmpp" == r ? function (t, e) {
                  var r = t[0].length ? Na : Ra,
                    i = [],
                    n = t.length,
                    o = t[0].length > 0,
                    s = t[Math.floor(Math.random() * n)];
                  for (o && s.join("_"), i.push(s); i.length < e;) {
                    for (var a = [], u = i.length, c = 0, h = [], l = 0; l < n; l++) {
                      for (var p = 1 / 0, f = 0; f < u; f++) {
                        var d = r(t[l], i[f]);
                        d <= p && (p = d);
                      }
                      a[l] = p;
                    }
                    for (var g = 0; g < n; g++) c += a[g];
                    for (var _ = 0; _ < n; _++) h[_] = {
                      i: _,
                      v: t[_],
                      pr: a[_] / c,
                      cs: 0
                    };
                    h.sort(function (t, e) {
                      return t.pr - e.pr
                    }), h[0].cs = h[0].pr;
                    for (var y = 1; y < n; y++) h[y].cs = h[y - 1].cs + h[y].pr;
                    for (var m = Math.random(), v = 0; v < n - 1 && h[v++].cs < m;);
                    i.push(h[v - 1].v);
                  }
                  return i
                }(t, e) : r;
                else
                  for (var d = {}; n.length < e;) {
                    var g = Math.floor(Math.random() * h);
                    d[g] || (d[g] = !0, n.push(t[g]));
                  }
                do {
                  wi(e, 0, f);
                  for (var _ = 0; _ < h; _++) {
                    for (var y = 1 / 0, m = 0, v = 0; v < e; v++)(a = p ? Oa(t[_], n[v]) : Math.abs(t[_] - n[v])) <= y && (y = a, m = v);
                    s[_] = m, f[m]++;
                  }
                  for (var x = [], w = (o = [], 0); w < e; w++) x[w] = p ? wi(l, 0, x[w]) : 0, o[w] = n[w];
                  if (p) {
                    for (var b = 0; b < e; b++) n[b] = [];
                    for (var E = 0; E < h; E++)
                      for (var L = x[s[E]], S = t[E], C = 0; C < l; C++) L[C] += S[C];
                    u = !0;
                    for (var I = 0; I < e; I++) {
                      for (var M = n[I], T = x[I], P = o[I], D = f[I], N = 0; N < l; N++) M[N] = T[N] / D || 0;
                      if (u)
                        for (var R = 0; R < l; R++)
                          if (P[R] != M[R]) {
                            u = !1;
                            break
                          }
                    }
                  } else {
                    for (var O = 0; O < h; O++) x[s[O]] += t[O];
                    for (var A = 0; A < e; A++) n[A] = x[A] / f[A] || 0;
                    u = !0;
                    for (var F = 0; F < e; F++)
                      if (o[F] != n[F]) {
                        u = !1;
                        break
                      }
                  }
                  u = u || --c <= 0;
                } while (!u);
                return {
                  it: 1e4 - c,
                  k: e,
                  idxs: s,
                  centroids: n
                }
              },
              Fa = {
                search: function (t, e, r, i) {
                  t.cleanDirty();
                  var n = (i = i || {}).heuristic || Fa.heuristics.manhattan,
                    o = i.closest || !1,
                    s = new Ci(function (t) {
                      return t.f
                    }),
                    a = e;
                  for (e.h = n(e, r), s.push(e); s.size() > 0;) {
                    var u = s.pop();
                    if (u === r) return Ei(u);
                    u.closed = !0;
                    for (var c = t.neighbors(u), h = 0, l = c.length; h < l; ++h) {
                      var p = c[h];
                      if (!p.closed && !p.isWall()) {
                        var f = u.g + p.getCost(u),
                          d = p.visited;
                        (!d || f < p.g) && (p.visited = !0, p.parent = u, p.h = p.h || n(p, r), p.g = f, p.f = p.g + p.h, t.markDirty(p), o && (p.h < a.h || p.h === a.h && p.g < a.g) && (a = p), d ? s.rescoreElement(p) : s.push(p));
                      }
                    }
                  }
                  return o ? Ei(a) : []
                },
                heuristics: {
                  manhattan: function (t, e) {
                    return Math.abs(e.x - t.x) + Math.abs(e.y - t.y)
                  },
                  diagonal: function (t, e) {
                    var r = Math.sqrt(2),
                      i = Math.abs(e.x - t.x),
                      n = Math.abs(e.y - t.y);
                    return 1 * (i + n) + (r - 2) * Math.min(i, n)
                  }
                },
                cleanNode: function (t) {
                  t.f = 0, t.g = 0, t.h = 0, t.visited = !1, t.closed = !1, t.parent = null;
                }
              };
            Li.prototype.init = function () {
              this.dirtyNodes = [];
              for (var t = 0; t < this.nodes.length; t++) Fa.cleanNode(this.nodes[t]);
            }, Li.prototype.cleanDirty = function () {
              for (var t = 0; t < this.dirtyNodes.length; t++) Fa.cleanNode(this.dirtyNodes[t]);
              this.dirtyNodes = [];
            }, Li.prototype.markDirty = function (t) {
              this.dirtyNodes.push(t);
            }, Li.prototype.neighbors = function (t) {
              var e = [],
                r = t.x,
                i = t.y,
                n = this.grid;
              return n[r - 1] && n[r - 1][i] && e.push(n[r - 1][i]), n[r + 1] && n[r + 1][i] && e.push(n[r + 1][i]), n[r] && n[r][i - 1] && e.push(n[r][i - 1]), n[r] && n[r][i + 1] && e.push(n[r][i + 1]), this.diagonal && (n[r - 1] && n[r - 1][i - 1] && e.push(n[r - 1][i - 1]), n[r + 1] && n[r + 1][i - 1] && e.push(n[r + 1][i - 1]), n[r - 1] && n[r - 1][i + 1] && e.push(n[r - 1][i + 1]), n[r + 1] && n[r + 1][i + 1] && e.push(n[r + 1][i + 1])), e
            }, Li.prototype.toString = function () {
              for (var t, e, r, i, n = [], o = this.grid, s = 0, a = o.length; s < a; s++) {
                for (t = [], r = 0, i = (e = o[s]).length; r < i; r++) t.push(e[r].weight);
                n.push(t.join(" "));
              }
              return n.join("\n")
            }, Si.prototype.toString = function () {
              return "[" + this.x + " " + this.y + "]"
            }, Si.prototype.getCost = function (t) {
              return t && t.x !== this.x && t.y !== this.y ? 1.41421 * this.weight : this.weight
            }, Si.prototype.isWall = function () {
              return 0 === this.weight
            }, Ci.prototype = {
              push: function (t) {
                this.content.push(t), this.sinkDown(this.content.length - 1);
              },
              pop: function () {
                var t = this.content[0],
                  e = this.content.pop();
                return this.content.length > 0 && (this.content[0] = e, this.bubbleUp(0)), t
              },
              remove: function (t) {
                var e = this.content.indexOf(t),
                  r = this.content.pop();
                e !== this.content.length - 1 && (this.content[e] = r, this.scoreFunction(r) < this.scoreFunction(t) ? this.sinkDown(e) : this.bubbleUp(e));
              },
              size: function () {
                return this.content.length
              },
              rescoreElement: function (t) {
                this.sinkDown(this.content.indexOf(t));
              },
              sinkDown: function (t) {
                for (var e = this.content[t]; t > 0;) {
                  var r = (t + 1 >> 1) - 1,
                    i = this.content[r];
                  if (!(this.scoreFunction(e) < this.scoreFunction(i))) break;
                  this.content[r] = e, this.content[t] = i, t = r;
                }
              },
              bubbleUp: function (t) {
                for (var e = this.content.length, r = this.content[t], i = this.scoreFunction(r);;) {
                  var n, o = t + 1 << 1,
                    s = o - 1,
                    a = null;
                  if (s < e) {
                    var u = this.content[s];
                    (n = this.scoreFunction(u)) < i && (a = s);
                  }
                  if (o < e) {
                    var c = this.content[o];
                    this.scoreFunction(c) < (null === a ? i : n) && (a = o);
                  }
                  if (null === a) break;
                  this.content[t] = this.content[a], this.content[a] = r, t = a;
                }
              }
            };
            var ka = function (t) {
              return function () {
                return t
              }
            };
            Ti.prototype = {
              constructor: Ti,
              insert: function (t, e) {
                var r, i, n;
                if (t) {
                  if (e.P = t, e.N = t.N, t.N && (t.N.P = e), t.N = e, t.R) {
                    for (t = t.R; t.L;) t = t.L;
                    t.L = e;
                  } else t.R = e;
                  r = t;
                } else this._ ? (t = Ri(this._), e.P = null, e.N = t, t.P = t.L = e, r = t) : (e.P = e.N = null, this._ = e, r = null);
                for (e.L = e.R = null, e.U = r, e.C = !0, t = e; r && r.C;) r === (i = r.U).L ? (n = i.R) && n.C ? (r.C = n.C = !1, i.C = !0, t = i) : (t === r.R && (Di(this, r), r = (t = r).U), r.C = !1, i.C = !0, Ni(this, i)) : (n = i.L) && n.C ? (r.C = n.C = !1, i.C = !0, t = i) : (t === r.L && (Ni(this, r), r = (t = r).U), r.C = !1, i.C = !0, Di(this, i)), r = t.U;
                this._.C = !1;
              },
              remove: function (t) {
                t.N && (t.N.P = t.P), t.P && (t.P.N = t.N), t.N = t.P = null;
                var e, r, i, n = t.U,
                  o = t.L,
                  s = t.R;
                if (r = o ? s ? Ri(s) : o : s, n ? n.L === t ? n.L = r : n.R = r : this._ = r, o && s ? (i = r.C, r.C = t.C, r.L = o, o.U = r, r !== s ? (n = r.U, r.U = t.U, t = r.R, n.L = t, r.R = s, s.U = r) : (r.U = n, n = r, t = r.R)) : (i = t.C, t = r), t && (t.U = n), !i)
                  if (t && t.C) t.C = !1;
                  else {
                    do {
                      if (t === this._) break;
                      if (t === n.L) {
                        if ((e = n.R).C && (e.C = !1, n.C = !0, Di(this, n), e = n.R), e.L && e.L.C || e.R && e.R.C) {
                          e.R && e.R.C || (e.L.C = !1, e.C = !0, Ni(this, e), e = n.R), e.C = n.C, n.C = e.R.C = !1, Di(this, n), t = this._;
                          break
                        }
                      } else if ((e = n.L).C && (e.C = !1, n.C = !0, Ni(this, n), e = n.L), e.L && e.L.C || e.R && e.R.C) {
                        e.L && e.L.C || (e.R.C = !1, e.C = !0, Di(this, e), e = n.L), e.C = n.C, n.C = e.L.C = !1, Ni(this, n), t = this._;
                        break
                      }
                      e.C = !0, t = n, n = n.U;
                    } while (!t.C);
                    t && (t.C = !1);
                  }
              }
            };
            var Ba, za, Va, Ua, qa, ja = [],
              Ga = [],
              Xa = 1e-6,
              Za = 1e-12;
            Ji.prototype = {
              constructor: Ji,
              polygons: function () {
                var t = this.edges;
                return this.cells.map(function (e) {
                  var r = e.halfedges.map(function (r) {
                    return Vi(e, t[r])
                  });
                  return r.data = e.site.data, r
                })
              },
              triangles: function () {
                var t = [],
                  e = this.edges;
                return this.cells.forEach(function (r, i) {
                  if (o = (n = r.halfedges).length)
                    for (var n, o, s, a = r.site, u = -1, c = e[n[o - 1]], h = c.left === a ? c.right : c.left; ++u < o;) s = h, h = (c = e[n[u]]).left === a ? c.right : c.left, s && h && i < s.index && i < h.index && Hi(a, s, h) < 0 && t.push([a.data, s.data, h.data]);
                }), t
              },
              links: function () {
                return this.edges.filter(function (t) {
                  return t.right
                }).map(function (t) {
                  return {
                    source: t.left.data,
                    target: t.right.data
                  }
                })
              },
              find: function (t, e, r) {
                for (var i, n, o = this, s = o._found || 0, a = o.cells.length; !(n = o.cells[s]);)
                  if (++s >= a) return null;
                var u = t - n.site[0],
                  c = e - n.site[1],
                  h = u * u + c * c;
                do {
                  n = o.cells[i = s], s = null, n.halfedges.forEach(function (r) {
                    var i = o.edges[r],
                      a = i.left;
                    if (a !== n.site && a || (a = i.right)) {
                      var u = t - a[0],
                        c = e - a[1],
                        l = u * u + c * c;
                      l < h && (h = l, s = a.index);
                    }
                  });
                } while (null !== s);
                return o._found = i, null == r || h <= r * r ? n.site : null
              }
            };
            var Ya = Object.freeze({
                randomPosition: on,
                randomPoint: sn,
                randomPolygon: an,
                randomLineString: un
              }),
              Wa = Object.freeze({
                getCluster: hn,
                clusterEach: ln,
                clusterReduce: pn,
                createBins: fn,
                applyFilter: dn,
                propertiesContainsFilter: gn,
                filterProperties: _n
              });
            "fill" in Array.prototype || Object.defineProperty(Array.prototype, "fill", {
              configurable: !0,
              value: function (t) {
                if (null == this) throw new TypeError(this + " is not an object");
                var e = Object(this),
                  r = Math.max(Math.min(e.length, 9007199254740991), 0) || 0,
                  i = 1 in arguments && parseInt(Number(arguments[1]), 10) || 0;
                i = i < 0 ? Math.max(r + i, 0) : Math.min(i, r);
                var n = 2 in arguments && void 0 !== arguments[2] ? parseInt(Number(arguments[2]), 10) || 0 : r;
                for (n = n < 0 ? Math.max(r + arguments[2], 0) : Math.min(n, r); i < n;) e[i] = t, ++i;
                return e
              },
              writable: !0
            }), Number.isFinite = Number.isFinite || function (t) {
              return "number" == typeof t && isFinite(t)
            }, Number.isInteger = Number.isInteger || function (t) {
              return "number" == typeof t && isFinite(t) && Math.floor(t) === t
            }, Number.parseFloat = Number.parseFloat || parseFloat, Number.isNaN = Number.isNaN || function (t) {
              return t != t
            }, Math.trunc = Math.trunc || function (t) {
              return t < 0 ? Math.ceil(t) : Math.floor(t)
            };
            var Ha = function () {};
            Ha.prototype.interfaces_ = function () {
              return []
            }, Ha.prototype.getClass = function () {
              return Ha
            }, Ha.prototype.equalsWithTolerance = function (t, e, r) {
              return Math.abs(t - e) <= r
            };
            var Ka = function () {},
              Ja = function () {},
              Qa = {
                MAX_VALUE: {
                  configurable: !0
                }
              };
            Ja.isNaN = function (t) {
              return Number.isNaN(t)
            }, Ja.doubleToLongBits = function (t) {
              return t
            }, Ja.longBitsToDouble = function (t) {
              return t
            }, Ja.isInfinite = function (t) {
              return !Number.isFinite(t)
            }, Qa.MAX_VALUE.get = function () {
              return Number.MAX_VALUE
            }, Object.defineProperties(Ja, Qa);
            var $a = function () {},
              tu = function () {},
              eu = function () {},
              ru = function t() {
                if (this.x = null, this.y = null, this.z = null, 0 === arguments.length) this.x = 0, this.y = 0, this.z = t.NULL_ORDINATE;
                else if (1 === arguments.length) {
                  var e = arguments[0];
                  this.x = e.x, this.y = e.y, this.z = e.z;
                } else 2 === arguments.length ? (this.x = arguments[0], this.y = arguments[1], this.z = t.NULL_ORDINATE) : 3 === arguments.length && (this.x = arguments[0], this.y = arguments[1], this.z = arguments[2]);
              },
              iu = {
                DimensionalComparator: {
                  configurable: !0
                },
                serialVersionUID: {
                  configurable: !0
                },
                NULL_ORDINATE: {
                  configurable: !0
                },
                X: {
                  configurable: !0
                },
                Y: {
                  configurable: !0
                },
                Z: {
                  configurable: !0
                }
              };
            ru.prototype.setOrdinate = function (t, e) {
              switch (t) {
                case ru.X:
                  this.x = e;
                  break;
                case ru.Y:
                  this.y = e;
                  break;
                case ru.Z:
                  this.z = e;
                  break;
                default:
                  throw new Ka("Invalid ordinate index: " + t)
              }
            }, ru.prototype.equals2D = function () {
              if (1 === arguments.length) {
                var t = arguments[0];
                return this.x === t.x && this.y === t.y
              }
              if (2 === arguments.length) {
                var e = arguments[0],
                  r = arguments[1];
                return !!Ha.equalsWithTolerance(this.x, e.x, r) && !!Ha.equalsWithTolerance(this.y, e.y, r)
              }
            }, ru.prototype.getOrdinate = function (t) {
              switch (t) {
                case ru.X:
                  return this.x;
                case ru.Y:
                  return this.y;
                case ru.Z:
                  return this.z
              }
              throw new Ka("Invalid ordinate index: " + t)
            }, ru.prototype.equals3D = function (t) {
              return this.x === t.x && this.y === t.y && (this.z === t.z || Ja.isNaN(this.z)) && Ja.isNaN(t.z)
            }, ru.prototype.equals = function (t) {
              return t instanceof ru && this.equals2D(t)
            }, ru.prototype.equalInZ = function (t, e) {
              return Ha.equalsWithTolerance(this.z, t.z, e)
            }, ru.prototype.compareTo = function (t) {
              var e = t;
              return this.x < e.x ? -1 : this.x > e.x ? 1 : this.y < e.y ? -1 : this.y > e.y ? 1 : 0
            }, ru.prototype.clone = function () {}, ru.prototype.copy = function () {
              return new ru(this)
            }, ru.prototype.toString = function () {
              return "(" + this.x + ", " + this.y + ", " + this.z + ")"
            }, ru.prototype.distance3D = function (t) {
              var e = this.x - t.x,
                r = this.y - t.y,
                i = this.z - t.z;
              return Math.sqrt(e * e + r * r + i * i)
            }, ru.prototype.distance = function (t) {
              var e = this.x - t.x,
                r = this.y - t.y;
              return Math.sqrt(e * e + r * r)
            }, ru.prototype.hashCode = function () {
              var t = 17;
              return 37 * (t = 37 * t + ru.hashCode(this.x)) + ru.hashCode(this.y)
            }, ru.prototype.setCoordinate = function (t) {
              this.x = t.x, this.y = t.y, this.z = t.z;
            }, ru.prototype.interfaces_ = function () {
              return [$a, tu, yn]
            }, ru.prototype.getClass = function () {
              return ru
            }, ru.hashCode = function () {
              if (1 === arguments.length) {
                var t = arguments[0],
                  e = Ja.doubleToLongBits(t);
                return Math.trunc((e ^ e) >>> 32)
              }
            }, iu.DimensionalComparator.get = function () {
              return nu
            }, iu.serialVersionUID.get = function () {
              return 0x5cbf2c235c7e5800
            }, iu.NULL_ORDINATE.get = function () {
              return Ja.NaN
            }, iu.X.get = function () {
              return 0
            }, iu.Y.get = function () {
              return 1
            }, iu.Z.get = function () {
              return 2
            }, Object.defineProperties(ru, iu);
            var nu = function (t) {
              if (this._dimensionsToTest = 2, 0 === arguments.length);
              else if (1 === arguments.length) {
                var e = arguments[0];
                if (2 !== e && 3 !== e) throw new Ka("only 2 or 3 dimensions may be specified");
                this._dimensionsToTest = e;
              }
            };
            nu.prototype.compare = function (t, e) {
              var r = t,
                i = e,
                n = nu.compare(r.x, i.x);
              if (0 !== n) return n;
              var o = nu.compare(r.y, i.y);
              return 0 !== o ? o : this._dimensionsToTest <= 2 ? 0 : nu.compare(r.z, i.z)
            }, nu.prototype.interfaces_ = function () {
              return [eu]
            }, nu.prototype.getClass = function () {
              return nu
            }, nu.compare = function (t, e) {
              return t < e ? -1 : t > e ? 1 : Ja.isNaN(t) ? Ja.isNaN(e) ? 0 : -1 : Ja.isNaN(e) ? 1 : 0
            };
            var ou = function () {};
            ou.prototype.create = function () {}, ou.prototype.interfaces_ = function () {
              return []
            }, ou.prototype.getClass = function () {
              return ou
            };
            var su = function () {},
              au = {
                INTERIOR: {
                  configurable: !0
                },
                BOUNDARY: {
                  configurable: !0
                },
                EXTERIOR: {
                  configurable: !0
                },
                NONE: {
                  configurable: !0
                }
              };
            su.prototype.interfaces_ = function () {
              return []
            }, su.prototype.getClass = function () {
              return su
            }, su.toLocationSymbol = function (t) {
              switch (t) {
                case su.EXTERIOR:
                  return "e";
                case su.BOUNDARY:
                  return "b";
                case su.INTERIOR:
                  return "i";
                case su.NONE:
                  return "-"
              }
              throw new Ka("Unknown location value: " + t)
            }, au.INTERIOR.get = function () {
              return 0
            }, au.BOUNDARY.get = function () {
              return 1
            }, au.EXTERIOR.get = function () {
              return 2
            }, au.NONE.get = function () {
              return -1
            }, Object.defineProperties(su, au);
            var uu = function (t, e) {
                return t.interfaces_ && t.interfaces_().indexOf(e) > -1
              },
              cu = function () {},
              hu = {
                LOG_10: {
                  configurable: !0
                }
              };
            cu.prototype.interfaces_ = function () {
              return []
            }, cu.prototype.getClass = function () {
              return cu
            }, cu.log10 = function (t) {
              var e = Math.log(t);
              return Ja.isInfinite(e) ? e : Ja.isNaN(e) ? e : e / cu.LOG_10
            }, cu.min = function (t, e, r, i) {
              var n = t;
              return e < n && (n = e), r < n && (n = r), i < n && (n = i), n
            }, cu.clamp = function () {
              if ("number" == typeof arguments[2] && "number" == typeof arguments[0] && "number" == typeof arguments[1]) {
                var t = arguments[0],
                  e = arguments[1],
                  r = arguments[2];
                return t < e ? e : t > r ? r : t
              }
              if (Number.isInteger(arguments[2]) && Number.isInteger(arguments[0]) && Number.isInteger(arguments[1])) {
                var i = arguments[0],
                  n = arguments[1],
                  o = arguments[2];
                return i < n ? n : i > o ? o : i
              }
            }, cu.wrap = function (t, e) {
              return t < 0 ? e - -t % e : t % e
            }, cu.max = function () {
              if (3 === arguments.length) {
                var t = arguments[0],
                  e = arguments[1],
                  r = arguments[2],
                  i = t;
                return e > i && (i = e), r > i && (i = r), i
              }
              if (4 === arguments.length) {
                var n = arguments[0],
                  o = arguments[1],
                  s = arguments[2],
                  a = arguments[3],
                  u = n;
                return o > u && (u = o), s > u && (u = s), a > u && (u = a), u
              }
            }, cu.average = function (t, e) {
              return (t + e) / 2
            }, hu.LOG_10.get = function () {
              return Math.log(10)
            }, Object.defineProperties(cu, hu);
            var lu = function (t) {
              this.str = t;
            };
            lu.prototype.append = function (t) {
              this.str += t;
            }, lu.prototype.setCharAt = function (t, e) {
              this.str = this.str.substr(0, t) + e + this.str.substr(t + 1);
            }, lu.prototype.toString = function (t) {
              return this.str
            };
            var pu = function (t) {
              this.value = t;
            };
            pu.prototype.intValue = function () {
              return this.value
            }, pu.prototype.compareTo = function (t) {
              return this.value < t ? -1 : this.value > t ? 1 : 0
            }, pu.isNaN = function (t) {
              return Number.isNaN(t)
            };
            var fu = function () {};
            fu.isWhitespace = function (t) {
              return t <= 32 && t >= 0 || 127 === t
            }, fu.toUpperCase = function (t) {
              return t.toUpperCase()
            };
            var du = function t() {
                if (this._hi = 0, this._lo = 0, 0 === arguments.length) this.init(0);
                else if (1 === arguments.length) {
                  if ("number" == typeof arguments[0]) {
                    var e = arguments[0];
                    this.init(e);
                  } else if (arguments[0] instanceof t) {
                    var r = arguments[0];
                    this.init(r);
                  } else if ("string" == typeof arguments[0]) {
                    var i = arguments[0];
                    t.call(this, t.parse(i));
                  }
                } else if (2 === arguments.length) {
                  var n = arguments[0],
                    o = arguments[1];
                  this.init(n, o);
                }
              },
              gu = {
                PI: {
                  configurable: !0
                },
                TWO_PI: {
                  configurable: !0
                },
                PI_2: {
                  configurable: !0
                },
                E: {
                  configurable: !0
                },
                NaN: {
                  configurable: !0
                },
                EPS: {
                  configurable: !0
                },
                SPLIT: {
                  configurable: !0
                },
                MAX_PRINT_DIGITS: {
                  configurable: !0
                },
                TEN: {
                  configurable: !0
                },
                ONE: {
                  configurable: !0
                },
                SCI_NOT_EXPONENT_CHAR: {
                  configurable: !0
                },
                SCI_NOT_ZERO: {
                  configurable: !0
                }
              };
            du.prototype.le = function (t) {
              return (this._hi < t._hi || this._hi === t._hi) && this._lo <= t._lo
            }, du.prototype.extractSignificantDigits = function (t, e) {
              var r = this.abs(),
                i = du.magnitude(r._hi),
                n = du.TEN.pow(i);
              (r = r.divide(n)).gt(du.TEN) ? (r = r.divide(du.TEN), i += 1) : r.lt(du.ONE) && (r = r.multiply(du.TEN), i -= 1);
              for (var o = i + 1, s = new lu, a = du.MAX_PRINT_DIGITS - 1, u = 0; u <= a; u++) {
                t && u === o && s.append(".");
                var c = Math.trunc(r._hi);
                if (c < 0) break;
                var h = !1,
                  l = 0;
                c > 9 ? (h = !0, l = "9") : l = "0" + c, s.append(l), r = r.subtract(du.valueOf(c)).multiply(du.TEN), h && r.selfAdd(du.TEN);
                var p = !0,
                  f = du.magnitude(r._hi);
                if (f < 0 && Math.abs(f) >= a - u && (p = !1), !p) break
              }
              return e[0] = i, s.toString()
            }, du.prototype.sqr = function () {
              return this.multiply(this)
            }, du.prototype.doubleValue = function () {
              return this._hi + this._lo
            }, du.prototype.subtract = function () {
              if (arguments[0] instanceof du) {
                var t = arguments[0];
                return this.add(t.negate())
              }
              if ("number" == typeof arguments[0]) {
                var e = arguments[0];
                return this.add(-e)
              }
            }, du.prototype.equals = function () {
              if (1 === arguments.length) {
                var t = arguments[0];
                return this._hi === t._hi && this._lo === t._lo
              }
            }, du.prototype.isZero = function () {
              return 0 === this._hi && 0 === this._lo
            }, du.prototype.selfSubtract = function () {
              if (arguments[0] instanceof du) {
                var t = arguments[0];
                return this.isNaN() ? this : this.selfAdd(-t._hi, -t._lo)
              }
              if ("number" == typeof arguments[0]) {
                var e = arguments[0];
                return this.isNaN() ? this : this.selfAdd(-e, 0)
              }
            }, du.prototype.getSpecialNumberString = function () {
              return this.isZero() ? "0.0" : this.isNaN() ? "NaN " : null
            }, du.prototype.min = function (t) {
              return this.le(t) ? this : t
            }, du.prototype.selfDivide = function () {
              if (1 === arguments.length) {
                if (arguments[0] instanceof du) {
                  var t = arguments[0];
                  return this.selfDivide(t._hi, t._lo)
                }
                if ("number" == typeof arguments[0]) {
                  var e = arguments[0];
                  return this.selfDivide(e, 0)
                }
              } else if (2 === arguments.length) {
                var r = arguments[0],
                  i = arguments[1],
                  n = null,
                  o = null,
                  s = null,
                  a = null,
                  u = null,
                  c = null,
                  h = null,
                  l = null;
                return u = this._hi / r, l = (n = (c = du.SPLIT * u) - (n = c - u)) * (s = (l = du.SPLIT * r) - (s = l - r)) - (h = u * r) + n * (a = r - s) + (o = u - n) * s + o * a, l = u + (c = (this._hi - h - l + this._lo - u * i) / r), this._hi = l, this._lo = u - l + c, this
              }
            }, du.prototype.dump = function () {
              return "DD<" + this._hi + ", " + this._lo + ">"
            }, du.prototype.divide = function () {
              if (arguments[0] instanceof du) {
                var t = arguments[0],
                  e = null,
                  r = null,
                  i = null,
                  n = null,
                  o = null,
                  s = null,
                  a = null,
                  u = null;
                return r = (o = this._hi / t._hi) - (e = (s = du.SPLIT * o) - (e = s - o)), u = e * (i = (u = du.SPLIT * t._hi) - (i = u - t._hi)) - (a = o * t._hi) + e * (n = t._hi - i) + r * i + r * n, s = (this._hi - a - u + this._lo - o * t._lo) / t._hi, new du(u = o + s, o - u + s)
              }
              if ("number" == typeof arguments[0]) {
                var c = arguments[0];
                return Ja.isNaN(c) ? du.createNaN() : du.copy(this).selfDivide(c, 0)
              }
            }, du.prototype.ge = function (t) {
              return (this._hi > t._hi || this._hi === t._hi) && this._lo >= t._lo
            }, du.prototype.pow = function (t) {
              if (0 === t) return du.valueOf(1);
              var e = new du(this),
                r = du.valueOf(1),
                i = Math.abs(t);
              if (i > 1)
                for (; i > 0;) i % 2 == 1 && r.selfMultiply(e), (i /= 2) > 0 && (e = e.sqr());
              else r = e;
              return t < 0 ? r.reciprocal() : r
            }, du.prototype.ceil = function () {
              if (this.isNaN()) return du.NaN;
              var t = Math.ceil(this._hi),
                e = 0;
              return t === this._hi && (e = Math.ceil(this._lo)), new du(t, e)
            }, du.prototype.compareTo = function (t) {
              var e = t;
              return this._hi < e._hi ? -1 : this._hi > e._hi ? 1 : this._lo < e._lo ? -1 : this._lo > e._lo ? 1 : 0
            }, du.prototype.rint = function () {
              return this.isNaN() ? this : this.add(.5).floor()
            }, du.prototype.setValue = function () {
              if (arguments[0] instanceof du) {
                var t = arguments[0];
                return this.init(t), this
              }
              if ("number" == typeof arguments[0]) {
                var e = arguments[0];
                return this.init(e), this
              }
            }, du.prototype.max = function (t) {
              return this.ge(t) ? this : t
            }, du.prototype.sqrt = function () {
              if (this.isZero()) return du.valueOf(0);
              if (this.isNegative()) return du.NaN;
              var t = 1 / Math.sqrt(this._hi),
                e = this._hi * t,
                r = du.valueOf(e),
                i = this.subtract(r.sqr())._hi * (.5 * t);
              return r.add(i)
            }, du.prototype.selfAdd = function () {
              if (1 === arguments.length) {
                if (arguments[0] instanceof du) {
                  var t = arguments[0];
                  return this.selfAdd(t._hi, t._lo)
                }
                if ("number" == typeof arguments[0]) {
                  var e = arguments[0],
                    r = null,
                    i = null,
                    n = null,
                    o = null,
                    s = null,
                    a = null;
                  return o = (n = this._hi + e) - (s = n - this._hi), i = (a = (o = e - s + (this._hi - o)) + this._lo) + (n - (r = n + a)), this._hi = r + i, this._lo = i + (r - this._hi), this
                }
              } else if (2 === arguments.length) {
                var u = arguments[0],
                  c = arguments[1],
                  h = null,
                  l = null,
                  p = null,
                  f = null,
                  d = null,
                  g = null,
                  _ = null;
                f = this._hi + u, l = this._lo + c, d = f - (g = f - this._hi), p = l - (_ = l - this._lo);
                var y = (h = f + (g = (d = u - g + (this._hi - d)) + l)) + (g = (p = c - _ + (this._lo - p)) + (g + (f - h))),
                  m = g + (h - y);
                return this._hi = y, this._lo = m, this
              }
            }, du.prototype.selfMultiply = function () {
              if (1 === arguments.length) {
                if (arguments[0] instanceof du) {
                  var t = arguments[0];
                  return this.selfMultiply(t._hi, t._lo)
                }
                if ("number" == typeof arguments[0]) {
                  var e = arguments[0];
                  return this.selfMultiply(e, 0)
                }
              } else if (2 === arguments.length) {
                var r = arguments[0],
                  i = arguments[1],
                  n = null,
                  o = null,
                  s = null,
                  a = null,
                  u = null,
                  c = null;
                n = (u = du.SPLIT * this._hi) - this._hi, c = du.SPLIT * r, n = u - n, o = this._hi - n, s = c - r;
                var h = (u = this._hi * r) + (c = n * (s = c - s) - u + n * (a = r - s) + o * s + o * a + (this._hi * i + this._lo * r)),
                  l = c + (n = u - h);
                return this._hi = h, this._lo = l, this
              }
            }, du.prototype.selfSqr = function () {
              return this.selfMultiply(this)
            }, du.prototype.floor = function () {
              if (this.isNaN()) return du.NaN;
              var t = Math.floor(this._hi),
                e = 0;
              return t === this._hi && (e = Math.floor(this._lo)), new du(t, e)
            }, du.prototype.negate = function () {
              return this.isNaN() ? this : new du(-this._hi, -this._lo)
            }, du.prototype.clone = function () {}, du.prototype.multiply = function () {
              if (arguments[0] instanceof du) {
                var t = arguments[0];
                return t.isNaN() ? du.createNaN() : du.copy(this).selfMultiply(t)
              }
              if ("number" == typeof arguments[0]) {
                var e = arguments[0];
                return Ja.isNaN(e) ? du.createNaN() : du.copy(this).selfMultiply(e, 0)
              }
            }, du.prototype.isNaN = function () {
              return Ja.isNaN(this._hi)
            }, du.prototype.intValue = function () {
              return Math.trunc(this._hi)
            }, du.prototype.toString = function () {
              var t = du.magnitude(this._hi);
              return t >= -3 && t <= 20 ? this.toStandardNotation() : this.toSciNotation()
            }, du.prototype.toStandardNotation = function () {
              var t = this.getSpecialNumberString();
              if (null !== t) return t;
              var e = new Array(1).fill(null),
                r = this.extractSignificantDigits(!0, e),
                i = e[0] + 1,
                n = r;
              if ("." === r.charAt(0)) n = "0" + r;
              else if (i < 0) n = "0." + du.stringOfChar("0", -i) + r;
              else if (-1 === r.indexOf(".")) {
                var o = i - r.length;
                n = r + du.stringOfChar("0", o) + ".0";
              }
              return this.isNegative() ? "-" + n : n
            }, du.prototype.reciprocal = function () {
              var t, e, r, i, n = null,
                o = null,
                s = null,
                a = null;
              t = (r = 1 / this._hi) - (n = (s = du.SPLIT * r) - (n = s - r)), o = (a = du.SPLIT * this._hi) - this._hi;
              var u = r + (s = (1 - (i = r * this._hi) - (a = n * (o = a - o) - i + n * (e = this._hi - o) + t * o + t * e) - r * this._lo) / this._hi);
              return new du(u, r - u + s)
            }, du.prototype.toSciNotation = function () {
              if (this.isZero()) return du.SCI_NOT_ZERO;
              var t = this.getSpecialNumberString();
              if (null !== t) return t;
              var e = new Array(1).fill(null),
                r = this.extractSignificantDigits(!1, e),
                i = du.SCI_NOT_EXPONENT_CHAR + e[0];
              if ("0" === r.charAt(0)) throw new Error("Found leading zero: " + r);
              var n = "";
              r.length > 1 && (n = r.substring(1));
              var o = r.charAt(0) + "." + n;
              return this.isNegative() ? "-" + o + i : o + i
            }, du.prototype.abs = function () {
              return this.isNaN() ? du.NaN : this.isNegative() ? this.negate() : new du(this)
            }, du.prototype.isPositive = function () {
              return (this._hi > 0 || 0 === this._hi) && this._lo > 0
            }, du.prototype.lt = function (t) {
              return (this._hi < t._hi || this._hi === t._hi) && this._lo < t._lo
            }, du.prototype.add = function () {
              if (arguments[0] instanceof du) {
                var t = arguments[0];
                return du.copy(this).selfAdd(t)
              }
              if ("number" == typeof arguments[0]) {
                var e = arguments[0];
                return du.copy(this).selfAdd(e)
              }
            }, du.prototype.init = function () {
              if (1 === arguments.length) {
                if ("number" == typeof arguments[0]) {
                  var t = arguments[0];
                  this._hi = t, this._lo = 0;
                } else if (arguments[0] instanceof du) {
                  var e = arguments[0];
                  this._hi = e._hi, this._lo = e._lo;
                }
              } else if (2 === arguments.length) {
                var r = arguments[0],
                  i = arguments[1];
                this._hi = r, this._lo = i;
              }
            }, du.prototype.gt = function (t) {
              return (this._hi > t._hi || this._hi === t._hi) && this._lo > t._lo
            }, du.prototype.isNegative = function () {
              return (this._hi < 0 || 0 === this._hi) && this._lo < 0
            }, du.prototype.trunc = function () {
              return this.isNaN() ? du.NaN : this.isPositive() ? this.floor() : this.ceil()
            }, du.prototype.signum = function () {
              return this._hi > 0 ? 1 : this._hi < 0 ? -1 : this._lo > 0 ? 1 : this._lo < 0 ? -1 : 0
            }, du.prototype.interfaces_ = function () {
              return [yn, $a, tu]
            }, du.prototype.getClass = function () {
              return du
            }, du.sqr = function (t) {
              return du.valueOf(t).selfMultiply(t)
            }, du.valueOf = function () {
              if ("string" == typeof arguments[0]) {
                var t = arguments[0];
                return du.parse(t)
              }
              if ("number" == typeof arguments[0]) {
                var e = arguments[0];
                return new du(e)
              }
            }, du.sqrt = function (t) {
              return du.valueOf(t).sqrt()
            }, du.parse = function (t) {
              for (var e = 0, r = t.length; fu.isWhitespace(t.charAt(e));) e++;
              var i = !1;
              if (e < r) {
                var n = t.charAt(e);
                "-" !== n && "+" !== n || (e++, "-" === n && (i = !0));
              }
              for (var o = new du, s = 0, a = 0, u = 0; !(e >= r);) {
                var c = t.charAt(e);
                if (e++, fu.isDigit(c)) {
                  var h = c - "0";
                  o.selfMultiply(du.TEN), o.selfAdd(h), s++;
                } else {
                  if ("." !== c) {
                    if ("e" === c || "E" === c) {
                      var l = t.substring(e);
                      try {
                        u = pu.parseInt(l);
                      } catch (e) {
                        throw e instanceof Error ? new Error("Invalid exponent " + l + " in string " + t) : e
                      }
                      break
                    }
                    throw new Error("Unexpected character '" + c + "' at position " + e + " in string " + t)
                  }
                  a = s;
                }
              }
              var p = o,
                f = s - a - u;
              if (0 === f) p = o;
              else if (f > 0) {
                var d = du.TEN.pow(f);
                p = o.divide(d);
              } else if (f < 0) {
                var g = du.TEN.pow(-f);
                p = o.multiply(g);
              }
              return i ? p.negate() : p
            }, du.createNaN = function () {
              return new du(Ja.NaN, Ja.NaN)
            }, du.copy = function (t) {
              return new du(t)
            }, du.magnitude = function (t) {
              var e = Math.abs(t),
                r = Math.log(e) / Math.log(10),
                i = Math.trunc(Math.floor(r));
              return 10 * Math.pow(10, i) <= e && (i += 1), i
            }, du.stringOfChar = function (t, e) {
              for (var r = new lu, i = 0; i < e; i++) r.append(t);
              return r.toString()
            }, gu.PI.get = function () {
              return new du(3.141592653589793, 12246467991473532e-32)
            }, gu.TWO_PI.get = function () {
              return new du(6.283185307179586, 24492935982947064e-32)
            }, gu.PI_2.get = function () {
              return new du(1.5707963267948966, 6123233995736766e-32)
            }, gu.E.get = function () {
              return new du(2.718281828459045, 14456468917292502e-32)
            }, gu.NaN.get = function () {
              return new du(Ja.NaN, Ja.NaN)
            }, gu.EPS.get = function () {
              return 123259516440783e-46
            }, gu.SPLIT.get = function () {
              return 134217729
            }, gu.MAX_PRINT_DIGITS.get = function () {
              return 32
            }, gu.TEN.get = function () {
              return du.valueOf(10)
            }, gu.ONE.get = function () {
              return du.valueOf(1)
            }, gu.SCI_NOT_EXPONENT_CHAR.get = function () {
              return "E"
            }, gu.SCI_NOT_ZERO.get = function () {
              return "0.0E0"
            }, Object.defineProperties(du, gu);
            var _u = function () {},
              yu = {
                DP_SAFE_EPSILON: {
                  configurable: !0
                }
              };
            _u.prototype.interfaces_ = function () {
              return []
            }, _u.prototype.getClass = function () {
              return _u
            }, _u.orientationIndex = function (t, e, r) {
              var i = _u.orientationIndexFilter(t, e, r);
              if (i <= 1) return i;
              var n = du.valueOf(e.x).selfAdd(-t.x),
                o = du.valueOf(e.y).selfAdd(-t.y),
                s = du.valueOf(r.x).selfAdd(-e.x),
                a = du.valueOf(r.y).selfAdd(-e.y);
              return n.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()
            }, _u.signOfDet2x2 = function (t, e, r, i) {
              return t.multiply(i).selfSubtract(e.multiply(r)).signum()
            }, _u.intersection = function (t, e, r, i) {
              var n = du.valueOf(i.y).selfSubtract(r.y).selfMultiply(du.valueOf(e.x).selfSubtract(t.x)),
                o = du.valueOf(i.x).selfSubtract(r.x).selfMultiply(du.valueOf(e.y).selfSubtract(t.y)),
                s = n.subtract(o),
                a = du.valueOf(i.x).selfSubtract(r.x).selfMultiply(du.valueOf(t.y).selfSubtract(r.y)),
                u = du.valueOf(i.y).selfSubtract(r.y).selfMultiply(du.valueOf(t.x).selfSubtract(r.x)),
                c = a.subtract(u).selfDivide(s).doubleValue(),
                h = du.valueOf(t.x).selfAdd(du.valueOf(e.x).selfSubtract(t.x).selfMultiply(c)).doubleValue(),
                l = du.valueOf(e.x).selfSubtract(t.x).selfMultiply(du.valueOf(t.y).selfSubtract(r.y)),
                p = du.valueOf(e.y).selfSubtract(t.y).selfMultiply(du.valueOf(t.x).selfSubtract(r.x)),
                f = l.subtract(p).selfDivide(s).doubleValue(),
                d = du.valueOf(r.y).selfAdd(du.valueOf(i.y).selfSubtract(r.y).selfMultiply(f)).doubleValue();
              return new ru(h, d)
            }, _u.orientationIndexFilter = function (t, e, r) {
              var i = null,
                n = (t.x - r.x) * (e.y - r.y),
                o = (t.y - r.y) * (e.x - r.x),
                s = n - o;
              if (n > 0) {
                if (o <= 0) return _u.signum(s);
                i = n + o;
              } else {
                if (!(n < 0)) return _u.signum(s);
                if (o >= 0) return _u.signum(s);
                i = -n - o;
              }
              var a = _u.DP_SAFE_EPSILON * i;
              return s >= a || -s >= a ? _u.signum(s) : 2
            }, _u.signum = function (t) {
              return t > 0 ? 1 : t < 0 ? -1 : 0
            }, yu.DP_SAFE_EPSILON.get = function () {
              return 1e-15
            }, Object.defineProperties(_u, yu);
            var mu = function () {},
              vu = {
                X: {
                  configurable: !0
                },
                Y: {
                  configurable: !0
                },
                Z: {
                  configurable: !0
                },
                M: {
                  configurable: !0
                }
              };
            vu.X.get = function () {
              return 0
            }, vu.Y.get = function () {
              return 1
            }, vu.Z.get = function () {
              return 2
            }, vu.M.get = function () {
              return 3
            }, mu.prototype.setOrdinate = function (t, e, r) {}, mu.prototype.size = function () {}, mu.prototype.getOrdinate = function (t, e) {}, mu.prototype.getCoordinate = function () {}, mu.prototype.getCoordinateCopy = function (t) {}, mu.prototype.getDimension = function () {}, mu.prototype.getX = function (t) {}, mu.prototype.clone = function () {}, mu.prototype.expandEnvelope = function (t) {}, mu.prototype.copy = function () {}, mu.prototype.getY = function (t) {}, mu.prototype.toCoordinateArray = function () {}, mu.prototype.interfaces_ = function () {
              return [tu]
            }, mu.prototype.getClass = function () {
              return mu
            }, Object.defineProperties(mu, vu);
            var xu = function () {},
              wu = function (t) {
                function e() {
                  t.call(this, "Projective point not representable on the Cartesian plane.");
                }
                return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.interfaces_ = function () {
                  return []
                }, e.prototype.getClass = function () {
                  return e
                }, e
              }(xu),
              bu = function () {};
            bu.arraycopy = function (t, e, r, i, n) {
              for (var o = 0, s = e; s < e + n; s++) r[i + o] = t[s], o++;
            }, bu.getProperty = function (t) {
              return {
                "line.separator": "\n"
              } [t]
            };
            var Eu = function t() {
              if (this.x = null, this.y = null, this.w = null, 0 === arguments.length) this.x = 0, this.y = 0, this.w = 1;
              else if (1 === arguments.length) {
                var e = arguments[0];
                this.x = e.x, this.y = e.y, this.w = 1;
              } else if (2 === arguments.length) {
                if ("number" == typeof arguments[0] && "number" == typeof arguments[1]) {
                  var r = arguments[0],
                    i = arguments[1];
                  this.x = r, this.y = i, this.w = 1;
                } else if (arguments[0] instanceof t && arguments[1] instanceof t) {
                  var n = arguments[0],
                    o = arguments[1];
                  this.x = n.y * o.w - o.y * n.w, this.y = o.x * n.w - n.x * o.w, this.w = n.x * o.y - o.x * n.y;
                } else if (arguments[0] instanceof ru && arguments[1] instanceof ru) {
                  var s = arguments[0],
                    a = arguments[1];
                  this.x = s.y - a.y, this.y = a.x - s.x, this.w = s.x * a.y - a.x * s.y;
                }
              } else if (3 === arguments.length) {
                var u = arguments[0],
                  c = arguments[1],
                  h = arguments[2];
                this.x = u, this.y = c, this.w = h;
              } else if (4 === arguments.length) {
                var l = arguments[0],
                  p = arguments[1],
                  f = arguments[2],
                  d = arguments[3],
                  g = l.y - p.y,
                  _ = p.x - l.x,
                  y = l.x * p.y - p.x * l.y,
                  m = f.y - d.y,
                  v = d.x - f.x,
                  x = f.x * d.y - d.x * f.y;
                this.x = _ * x - v * y, this.y = m * y - g * x, this.w = g * v - m * _;
              }
            };
            Eu.prototype.getY = function () {
              var t = this.y / this.w;
              if (Ja.isNaN(t) || Ja.isInfinite(t)) throw new wu;
              return t
            }, Eu.prototype.getX = function () {
              var t = this.x / this.w;
              if (Ja.isNaN(t) || Ja.isInfinite(t)) throw new wu;
              return t
            }, Eu.prototype.getCoordinate = function () {
              var t = new ru;
              return t.x = this.getX(), t.y = this.getY(), t
            }, Eu.prototype.interfaces_ = function () {
              return []
            }, Eu.prototype.getClass = function () {
              return Eu
            }, Eu.intersection = function (t, e, r, i) {
              var n = t.y - e.y,
                o = e.x - t.x,
                s = t.x * e.y - e.x * t.y,
                a = r.y - i.y,
                u = i.x - r.x,
                c = r.x * i.y - i.x * r.y,
                h = n * u - a * o,
                l = (o * c - u * s) / h,
                p = (a * s - n * c) / h;
              if (Ja.isNaN(l) || Ja.isInfinite(l) || Ja.isNaN(p) || Ja.isInfinite(p)) throw new wu;
              return new ru(l, p)
            };
            var Lu = function t() {
                if (this._minx = null, this._maxx = null, this._miny = null, this._maxy = null, 0 === arguments.length) this.init();
                else if (1 === arguments.length) {
                  if (arguments[0] instanceof ru) {
                    var e = arguments[0];
                    this.init(e.x, e.x, e.y, e.y);
                  } else if (arguments[0] instanceof t) {
                    var r = arguments[0];
                    this.init(r);
                  }
                } else if (2 === arguments.length) {
                  var i = arguments[0],
                    n = arguments[1];
                  this.init(i.x, n.x, i.y, n.y);
                } else if (4 === arguments.length) {
                  var o = arguments[0],
                    s = arguments[1],
                    a = arguments[2],
                    u = arguments[3];
                  this.init(o, s, a, u);
                }
              },
              Su = {
                serialVersionUID: {
                  configurable: !0
                }
              };
            Lu.prototype.getArea = function () {
              return this.getWidth() * this.getHeight()
            }, Lu.prototype.equals = function (t) {
              if (!(t instanceof Lu)) return !1;
              var e = t;
              return this.isNull() ? e.isNull() : this._maxx === e.getMaxX() && this._maxy === e.getMaxY() && this._minx === e.getMinX() && this._miny === e.getMinY()
            }, Lu.prototype.intersection = function (t) {
              if (this.isNull() || t.isNull() || !this.intersects(t)) return new Lu;
              var e = this._minx > t._minx ? this._minx : t._minx,
                r = this._miny > t._miny ? this._miny : t._miny,
                i = this._maxx < t._maxx ? this._maxx : t._maxx,
                n = this._maxy < t._maxy ? this._maxy : t._maxy;
              return new Lu(e, i, r, n)
            }, Lu.prototype.isNull = function () {
              return this._maxx < this._minx
            }, Lu.prototype.getMaxX = function () {
              return this._maxx
            }, Lu.prototype.covers = function () {
              if (1 === arguments.length) {
                if (arguments[0] instanceof ru) {
                  var t = arguments[0];
                  return this.covers(t.x, t.y)
                }
                if (arguments[0] instanceof Lu) {
                  var e = arguments[0];
                  return !this.isNull() && !e.isNull() && e.getMinX() >= this._minx && e.getMaxX() <= this._maxx && e.getMinY() >= this._miny && e.getMaxY() <= this._maxy
                }
              } else if (2 === arguments.length) {
                var r = arguments[0],
                  i = arguments[1];
                return !this.isNull() && r >= this._minx && r <= this._maxx && i >= this._miny && i <= this._maxy
              }
            }, Lu.prototype.intersects = function () {
              if (1 === arguments.length) {
                if (arguments[0] instanceof Lu) {
                  var t = arguments[0];
                  return !this.isNull() && !t.isNull() && !(t._minx > this._maxx || t._maxx < this._minx || t._miny > this._maxy || t._maxy < this._miny)
                }
                if (arguments[0] instanceof ru) {
                  var e = arguments[0];
                  return this.intersects(e.x, e.y)
                }
              } else if (2 === arguments.length) {
                var r = arguments[0],
                  i = arguments[1];
                return !this.isNull() && !(r > this._maxx || r < this._minx || i > this._maxy || i < this._miny)
              }
            }, Lu.prototype.getMinY = function () {
              return this._miny
            }, Lu.prototype.getMinX = function () {
              return this._minx
            }, Lu.prototype.expandToInclude = function () {
              if (1 === arguments.length) {
                if (arguments[0] instanceof ru) {
                  var t = arguments[0];
                  this.expandToInclude(t.x, t.y);
                } else if (arguments[0] instanceof Lu) {
                  var e = arguments[0];
                  if (e.isNull()) return null;
                  this.isNull() ? (this._minx = e.getMinX(), this._maxx = e.getMaxX(), this._miny = e.getMinY(), this._maxy = e.getMaxY()) : (e._minx < this._minx && (this._minx = e._minx), e._maxx > this._maxx && (this._maxx = e._maxx), e._miny < this._miny && (this._miny = e._miny), e._maxy > this._maxy && (this._maxy = e._maxy));
                }
              } else if (2 === arguments.length) {
                var r = arguments[0],
                  i = arguments[1];
                this.isNull() ? (this._minx = r, this._maxx = r, this._miny = i, this._maxy = i) : (r < this._minx && (this._minx = r), r > this._maxx && (this._maxx = r), i < this._miny && (this._miny = i), i > this._maxy && (this._maxy = i));
              }
            }, Lu.prototype.minExtent = function () {
              if (this.isNull()) return 0;
              var t = this.getWidth(),
                e = this.getHeight();
              return t < e ? t : e
            }, Lu.prototype.getWidth = function () {
              return this.isNull() ? 0 : this._maxx - this._minx
            }, Lu.prototype.compareTo = function (t) {
              var e = t;
              return this.isNull() ? e.isNull() ? 0 : -1 : e.isNull() ? 1 : this._minx < e._minx ? -1 : this._minx > e._minx ? 1 : this._miny < e._miny ? -1 : this._miny > e._miny ? 1 : this._maxx < e._maxx ? -1 : this._maxx > e._maxx ? 1 : this._maxy < e._maxy ? -1 : this._maxy > e._maxy ? 1 : 0
            }, Lu.prototype.translate = function (t, e) {
              if (this.isNull()) return null;
              this.init(this.getMinX() + t, this.getMaxX() + t, this.getMinY() + e, this.getMaxY() + e);
            }, Lu.prototype.toString = function () {
              return "Env[" + this._minx + " : " + this._maxx + ", " + this._miny + " : " + this._maxy + "]"
            }, Lu.prototype.setToNull = function () {
              this._minx = 0, this._maxx = -1, this._miny = 0, this._maxy = -1;
            }, Lu.prototype.getHeight = function () {
              return this.isNull() ? 0 : this._maxy - this._miny
            }, Lu.prototype.maxExtent = function () {
              if (this.isNull()) return 0;
              var t = this.getWidth(),
                e = this.getHeight();
              return t > e ? t : e
            }, Lu.prototype.expandBy = function () {
              if (1 === arguments.length) {
                var t = arguments[0];
                this.expandBy(t, t);
              } else if (2 === arguments.length) {
                var e = arguments[0],
                  r = arguments[1];
                if (this.isNull()) return null;
                this._minx -= e, this._maxx += e, this._miny -= r, this._maxy += r, (this._minx > this._maxx || this._miny > this._maxy) && this.setToNull();
              }
            }, Lu.prototype.contains = function () {
              if (1 === arguments.length) {
                if (arguments[0] instanceof Lu) {
                  var t = arguments[0];
                  return this.covers(t)
                }
                if (arguments[0] instanceof ru) {
                  var e = arguments[0];
                  return this.covers(e)
                }
              } else if (2 === arguments.length) {
                var r = arguments[0],
                  i = arguments[1];
                return this.covers(r, i)
              }
            }, Lu.prototype.centre = function () {
              return this.isNull() ? null : new ru((this.getMinX() + this.getMaxX()) / 2, (this.getMinY() + this.getMaxY()) / 2)
            }, Lu.prototype.init = function () {
              if (0 === arguments.length) this.setToNull();
              else if (1 === arguments.length) {
                if (arguments[0] instanceof ru) {
                  var t = arguments[0];
                  this.init(t.x, t.x, t.y, t.y);
                } else if (arguments[0] instanceof Lu) {
                  var e = arguments[0];
                  this._minx = e._minx, this._maxx = e._maxx, this._miny = e._miny, this._maxy = e._maxy;
                }
              } else if (2 === arguments.length) {
                var r = arguments[0],
                  i = arguments[1];
                this.init(r.x, i.x, r.y, i.y);
              } else if (4 === arguments.length) {
                var n = arguments[0],
                  o = arguments[1],
                  s = arguments[2],
                  a = arguments[3];
                n < o ? (this._minx = n, this._maxx = o) : (this._minx = o, this._maxx = n), s < a ? (this._miny = s, this._maxy = a) : (this._miny = a, this._maxy = s);
              }
            }, Lu.prototype.getMaxY = function () {
              return this._maxy
            }, Lu.prototype.distance = function (t) {
              if (this.intersects(t)) return 0;
              var e = 0;
              this._maxx < t._minx ? e = t._minx - this._maxx : this._minx > t._maxx && (e = this._minx - t._maxx);
              var r = 0;
              return this._maxy < t._miny ? r = t._miny - this._maxy : this._miny > t._maxy && (r = this._miny - t._maxy), 0 === e ? r : 0 === r ? e : Math.sqrt(e * e + r * r)
            }, Lu.prototype.hashCode = function () {
              var t = 17;
              return 37 * (t = 37 * (t = 37 * (t = 37 * t + ru.hashCode(this._minx)) + ru.hashCode(this._maxx)) + ru.hashCode(this._miny)) + ru.hashCode(this._maxy)
            }, Lu.prototype.interfaces_ = function () {
              return [$a, yn]
            }, Lu.prototype.getClass = function () {
              return Lu
            }, Lu.intersects = function () {
              if (3 === arguments.length) {
                var t = arguments[0],
                  e = arguments[1],
                  r = arguments[2];
                return r.x >= (t.x < e.x ? t.x : e.x) && r.x <= (t.x > e.x ? t.x : e.x) && r.y >= (t.y < e.y ? t.y : e.y) && r.y <= (t.y > e.y ? t.y : e.y)
              }
              if (4 === arguments.length) {
                var i = arguments[0],
                  n = arguments[1],
                  o = arguments[2],
                  s = arguments[3],
                  a = Math.min(o.x, s.x),
                  u = Math.max(o.x, s.x),
                  c = Math.min(i.x, n.x),
                  h = Math.max(i.x, n.x);
                return !(c > u || h < a || (a = Math.min(o.y, s.y), u = Math.max(o.y, s.y), c = Math.min(i.y, n.y), h = Math.max(i.y, n.y), c > u || h < a))
              }
            }, Su.serialVersionUID.get = function () {
              return 0x51845cd552189800
            }, Object.defineProperties(Lu, Su);
            var Cu = {
                typeStr: /^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,
                emptyTypeStr: /^\s*(\w+)\s*EMPTY\s*$/,
                spaces: /\s+/,
                parenComma: /\)\s*,\s*\(/,
                doubleParenComma: /\)\s*\)\s*,\s*\(\s*\(/,
                trimParens: /^\s*\(?(.*?)\)?\s*$/
              },
              Iu = function (t) {
                this.geometryFactory = t || new Kc;
              };
            Iu.prototype.read = function (t) {
              var e, r, i;
              t = t.replace(/[\n\r]/g, " ");
              var n = Cu.typeStr.exec(t);
              if (-1 !== t.search("EMPTY") && ((n = Cu.emptyTypeStr.exec(t))[2] = void 0), n && (r = n[1].toLowerCase(), i = n[2], Tu[r] && (e = Tu[r].apply(this, [i]))), void 0 === e) throw new Error("Could not parse WKT " + t);
              return e
            }, Iu.prototype.write = function (t) {
              return this.extractGeometry(t)
            }, Iu.prototype.extractGeometry = function (t) {
              var e = t.getGeometryType().toLowerCase();
              if (!Mu[e]) return null;
              var r = e.toUpperCase();
              return t.isEmpty() ? r + " EMPTY" : r + "(" + Mu[e].apply(this, [t]) + ")"
            };
            var Mu = {
                coordinate: function (t) {
                  return t.x + " " + t.y
                },
                point: function (t) {
                  return Mu.coordinate.call(this, t._coordinates._coordinates[0])
                },
                multipoint: function (t) {
                  for (var e = [], r = 0, i = t._geometries.length; r < i; ++r) e.push("(" + Mu.point.apply(this, [t._geometries[r]]) + ")");
                  return e.join(",")
                },
                linestring: function (t) {
                  for (var e = [], r = 0, i = t._points._coordinates.length; r < i; ++r) e.push(Mu.coordinate.apply(this, [t._points._coordinates[r]]));
                  return e.join(",")
                },
                linearring: function (t) {
                  for (var e = [], r = 0, i = t._points._coordinates.length; r < i; ++r) e.push(Mu.coordinate.apply(this, [t._points._coordinates[r]]));
                  return e.join(",")
                },
                multilinestring: function (t) {
                  for (var e = [], r = 0, i = t._geometries.length; r < i; ++r) e.push("(" + Mu.linestring.apply(this, [t._geometries[r]]) + ")");
                  return e.join(",")
                },
                polygon: function (t) {
                  var e = [];
                  e.push("(" + Mu.linestring.apply(this, [t._shell]) + ")");
                  for (var r = 0, i = t._holes.length; r < i; ++r) e.push("(" + Mu.linestring.apply(this, [t._holes[r]]) + ")");
                  return e.join(",")
                },
                multipolygon: function (t) {
                  for (var e = [], r = 0, i = t._geometries.length; r < i; ++r) e.push("(" + Mu.polygon.apply(this, [t._geometries[r]]) + ")");
                  return e.join(",")
                },
                geometrycollection: function (t) {
                  for (var e = [], r = 0, i = t._geometries.length; r < i; ++r) e.push(this.extractGeometry(t._geometries[r]));
                  return e.join(",")
                }
              },
              Tu = {
                point: function (t) {
                  if (void 0 === t) return this.geometryFactory.createPoint();
                  var e = t.trim().split(Cu.spaces);
                  return this.geometryFactory.createPoint(new ru(Number.parseFloat(e[0]), Number.parseFloat(e[1])))
                },
                multipoint: function (t) {
                  if (void 0 === t) return this.geometryFactory.createMultiPoint();
                  for (var e, r = t.trim().split(","), i = [], n = 0, o = r.length; n < o; ++n) e = r[n].replace(Cu.trimParens, "$1"), i.push(Tu.point.apply(this, [e]));
                  return this.geometryFactory.createMultiPoint(i)
                },
                linestring: function (t) {
                  if (void 0 === t) return this.geometryFactory.createLineString();
                  for (var e, r = t.trim().split(","), i = [], n = 0, o = r.length; n < o; ++n) e = r[n].trim().split(Cu.spaces), i.push(new ru(Number.parseFloat(e[0]), Number.parseFloat(e[1])));
                  return this.geometryFactory.createLineString(i)
                },
                linearring: function (t) {
                  if (void 0 === t) return this.geometryFactory.createLinearRing();
                  for (var e, r = t.trim().split(","), i = [], n = 0, o = r.length; n < o; ++n) e = r[n].trim().split(Cu.spaces), i.push(new ru(Number.parseFloat(e[0]), Number.parseFloat(e[1])));
                  return this.geometryFactory.createLinearRing(i)
                },
                multilinestring: function (t) {
                  if (void 0 === t) return this.geometryFactory.createMultiLineString();
                  for (var e, r = t.trim().split(Cu.parenComma), i = [], n = 0, o = r.length; n < o; ++n) e = r[n].replace(Cu.trimParens, "$1"), i.push(Tu.linestring.apply(this, [e]));
                  return this.geometryFactory.createMultiLineString(i)
                },
                polygon: function (t) {
                  if (void 0 === t) return this.geometryFactory.createPolygon();
                  for (var e, r, i, n, o = t.trim().split(Cu.parenComma), s = [], a = 0, u = o.length; a < u; ++a) e = o[a].replace(Cu.trimParens, "$1"), r = Tu.linestring.apply(this, [e]), i = this.geometryFactory.createLinearRing(r._points), 0 === a ? n = i : s.push(i);
                  return this.geometryFactory.createPolygon(n, s)
                },
                multipolygon: function (t) {
                  if (void 0 === t) return this.geometryFactory.createMultiPolygon();
                  for (var e, r = t.trim().split(Cu.doubleParenComma), i = [], n = 0, o = r.length; n < o; ++n) e = r[n].replace(Cu.trimParens, "$1"), i.push(Tu.polygon.apply(this, [e]));
                  return this.geometryFactory.createMultiPolygon(i)
                },
                geometrycollection: function (t) {
                  if (void 0 === t) return this.geometryFactory.createGeometryCollection();
                  for (var e = (t = t.replace(/,\s*([A-Za-z])/g, "|$1")).trim().split("|"), r = [], i = 0, n = e.length; i < n; ++i) r.push(this.read(e[i]));
                  return this.geometryFactory.createGeometryCollection(r)
                }
              },
              Pu = function (t) {
                this.parser = new Iu(t);
              };
            Pu.prototype.write = function (t) {
              return this.parser.write(t)
            }, Pu.toLineString = function (t, e) {
              if (2 !== arguments.length) throw new Error("Not implemented");
              return "LINESTRING ( " + t.x + " " + t.y + ", " + e.x + " " + e.y + " )"
            };
            var Du = function (t) {
                function e(e) {
                  t.call(this, e), this.name = "RuntimeException", this.message = e, this.stack = (new t).stack;
                }
                return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e
              }(Error),
              Nu = function (t) {
                function e() {
                  if (t.call(this), 0 === arguments.length) t.call(this);
                  else if (1 === arguments.length) {
                    var e = arguments[0];
                    t.call(this, e);
                  }
                }
                return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.interfaces_ = function () {
                  return []
                }, e.prototype.getClass = function () {
                  return e
                }, e
              }(Du),
              Ru = function () {};
            Ru.prototype.interfaces_ = function () {
              return []
            }, Ru.prototype.getClass = function () {
              return Ru
            }, Ru.shouldNeverReachHere = function () {
              if (0 === arguments.length) Ru.shouldNeverReachHere(null);
              else if (1 === arguments.length) {
                var t = arguments[0];
                throw new Nu("Should never reach here" + (null !== t ? ": " + t : ""))
              }
            }, Ru.isTrue = function () {
              var t, e;
              if (1 === arguments.length) t = arguments[0], Ru.isTrue(t, null);
              else if (2 === arguments.length && (t = arguments[0], e = arguments[1], !t)) throw null === e ? new Nu : new Nu(e)
            }, Ru.equals = function () {
              var t, e, r;
              if (2 === arguments.length) t = arguments[0], e = arguments[1], Ru.equals(t, e, null);
              else if (3 === arguments.length && (t = arguments[0], e = arguments[1], r = arguments[2], !e.equals(t))) throw new Nu("Expected " + t + " but encountered " + e + (null !== r ? ": " + r : ""))
            };
            var Ou = function () {
                this._result = null, this._inputLines = Array(2).fill().map(function () {
                  return Array(2)
                }), this._intPt = new Array(2).fill(null), this._intLineIndex = null, this._isProper = null, this._pa = null, this._pb = null, this._precisionModel = null, this._intPt[0] = new ru, this._intPt[1] = new ru, this._pa = this._intPt[0], this._pb = this._intPt[1], this._result = 0;
              },
              Au = {
                DONT_INTERSECT: {
                  configurable: !0
                },
                DO_INTERSECT: {
                  configurable: !0
                },
                COLLINEAR: {
                  configurable: !0
                },
                NO_INTERSECTION: {
                  configurable: !0
                },
                POINT_INTERSECTION: {
                  configurable: !0
                },
                COLLINEAR_INTERSECTION: {
                  configurable: !0
                }
              };
            Ou.prototype.getIndexAlongSegment = function (t, e) {
              return this.computeIntLineIndex(), this._intLineIndex[t][e]
            }, Ou.prototype.getTopologySummary = function () {
              var t = new lu;
              return this.isEndPoint() && t.append(" endpoint"), this._isProper && t.append(" proper"), this.isCollinear() && t.append(" collinear"), t.toString()
            }, Ou.prototype.computeIntersection = function (t, e, r, i) {
              this._inputLines[0][0] = t, this._inputLines[0][1] = e, this._inputLines[1][0] = r, this._inputLines[1][1] = i, this._result = this.computeIntersect(t, e, r, i);
            }, Ou.prototype.getIntersectionNum = function () {
              return this._result
            }, Ou.prototype.computeIntLineIndex = function () {
              if (0 === arguments.length) null === this._intLineIndex && (this._intLineIndex = Array(2).fill().map(function () {
                return Array(2)
              }), this.computeIntLineIndex(0), this.computeIntLineIndex(1));
              else if (1 === arguments.length) {
                var t = arguments[0];
                this.getEdgeDistance(t, 0) > this.getEdgeDistance(t, 1) ? (this._intLineIndex[t][0] = 0, this._intLineIndex[t][1] = 1) : (this._intLineIndex[t][0] = 1, this._intLineIndex[t][1] = 0);
              }
            }, Ou.prototype.isProper = function () {
              return this.hasIntersection() && this._isProper
            }, Ou.prototype.setPrecisionModel = function (t) {
              this._precisionModel = t;
            }, Ou.prototype.isInteriorIntersection = function () {
              if (0 === arguments.length) return !!this.isInteriorIntersection(0) || !!this.isInteriorIntersection(1);
              if (1 === arguments.length) {
                for (var t = arguments[0], e = 0; e < this._result; e++)
                  if (!this._intPt[e].equals2D(this._inputLines[t][0]) && !this._intPt[e].equals2D(this._inputLines[t][1])) return !0;
                return !1
              }
            }, Ou.prototype.getIntersection = function (t) {
              return this._intPt[t]
            }, Ou.prototype.isEndPoint = function () {
              return this.hasIntersection() && !this._isProper
            }, Ou.prototype.hasIntersection = function () {
              return this._result !== Ou.NO_INTERSECTION
            }, Ou.prototype.getEdgeDistance = function (t, e) {
              return Ou.computeEdgeDistance(this._intPt[e], this._inputLines[t][0], this._inputLines[t][1])
            }, Ou.prototype.isCollinear = function () {
              return this._result === Ou.COLLINEAR_INTERSECTION
            }, Ou.prototype.toString = function () {
              return Pu.toLineString(this._inputLines[0][0], this._inputLines[0][1]) + " - " + Pu.toLineString(this._inputLines[1][0], this._inputLines[1][1]) + this.getTopologySummary()
            }, Ou.prototype.getEndpoint = function (t, e) {
              return this._inputLines[t][e]
            }, Ou.prototype.isIntersection = function (t) {
              for (var e = 0; e < this._result; e++)
                if (this._intPt[e].equals2D(t)) return !0;
              return !1
            }, Ou.prototype.getIntersectionAlongSegment = function (t, e) {
              return this.computeIntLineIndex(), this._intPt[this._intLineIndex[t][e]]
            }, Ou.prototype.interfaces_ = function () {
              return []
            }, Ou.prototype.getClass = function () {
              return Ou
            }, Ou.computeEdgeDistance = function (t, e, r) {
              var i = Math.abs(r.x - e.x),
                n = Math.abs(r.y - e.y),
                o = -1;
              if (t.equals(e)) o = 0;
              else if (t.equals(r)) o = i > n ? i : n;
              else {
                var s = Math.abs(t.x - e.x),
                  a = Math.abs(t.y - e.y);
                0 !== (o = i > n ? s : a) || t.equals(e) || (o = Math.max(s, a));
              }
              return Ru.isTrue(!(0 === o && !t.equals(e)), "Bad distance calculation"), o
            }, Ou.nonRobustComputeEdgeDistance = function (t, e, r) {
              var i = t.x - e.x,
                n = t.y - e.y,
                o = Math.sqrt(i * i + n * n);
              return Ru.isTrue(!(0 === o && !t.equals(e)), "Invalid distance calculation"), o
            }, Au.DONT_INTERSECT.get = function () {
              return 0
            }, Au.DO_INTERSECT.get = function () {
              return 1
            }, Au.COLLINEAR.get = function () {
              return 2
            }, Au.NO_INTERSECTION.get = function () {
              return 0
            }, Au.POINT_INTERSECTION.get = function () {
              return 1
            }, Au.COLLINEAR_INTERSECTION.get = function () {
              return 2
            }, Object.defineProperties(Ou, Au);
            var Fu = function (t) {
                function e() {
                  t.apply(this, arguments);
                }
                return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.isInSegmentEnvelopes = function (t) {
                  var e = new Lu(this._inputLines[0][0], this._inputLines[0][1]),
                    r = new Lu(this._inputLines[1][0], this._inputLines[1][1]);
                  return e.contains(t) && r.contains(t)
                }, e.prototype.computeIntersection = function () {
                  if (3 !== arguments.length) return t.prototype.computeIntersection.apply(this, arguments);
                  var e = arguments[0],
                    r = arguments[1],
                    i = arguments[2];
                  if (this._isProper = !1, Lu.intersects(r, i, e) && 0 === zu.orientationIndex(r, i, e) && 0 === zu.orientationIndex(i, r, e)) return this._isProper = !0, (e.equals(r) || e.equals(i)) && (this._isProper = !1), this._result = t.POINT_INTERSECTION, null;
                  this._result = t.NO_INTERSECTION;
                }, e.prototype.normalizeToMinimum = function (t, e, r, i, n) {
                  n.x = this.smallestInAbsValue(t.x, e.x, r.x, i.x), n.y = this.smallestInAbsValue(t.y, e.y, r.y, i.y), t.x -= n.x, t.y -= n.y, e.x -= n.x, e.y -= n.y, r.x -= n.x, r.y -= n.y, i.x -= n.x, i.y -= n.y;
                }, e.prototype.safeHCoordinateIntersection = function (t, r, i, n) {
                  var o = null;
                  try {
                    o = Eu.intersection(t, r, i, n);
                  } catch (s) {
                    if (!(s instanceof wu)) throw s;
                    o = e.nearestEndpoint(t, r, i, n);
                  }
                  return o
                }, e.prototype.intersection = function (t, r, i, n) {
                  var o = this.intersectionWithNormalization(t, r, i, n);
                  return this.isInSegmentEnvelopes(o) || (o = new ru(e.nearestEndpoint(t, r, i, n))), null !== this._precisionModel && this._precisionModel.makePrecise(o), o
                }, e.prototype.smallestInAbsValue = function (t, e, r, i) {
                  var n = t,
                    o = Math.abs(n);
                  return Math.abs(e) < o && (n = e, o = Math.abs(e)), Math.abs(r) < o && (n = r, o = Math.abs(r)), Math.abs(i) < o && (n = i), n
                }, e.prototype.checkDD = function (t, e, r, i, n) {
                  var o = _u.intersection(t, e, r, i),
                    s = this.isInSegmentEnvelopes(o);
                  bu.out.println("DD in env = " + s + "  --------------------- " + o), n.distance(o) > 1e-4 && bu.out.println("Distance = " + n.distance(o));
                }, e.prototype.intersectionWithNormalization = function (t, e, r, i) {
                  var n = new ru(t),
                    o = new ru(e),
                    s = new ru(r),
                    a = new ru(i),
                    u = new ru;
                  this.normalizeToEnvCentre(n, o, s, a, u);
                  var c = this.safeHCoordinateIntersection(n, o, s, a);
                  return c.x += u.x, c.y += u.y, c
                }, e.prototype.computeCollinearIntersection = function (e, r, i, n) {
                  var o = Lu.intersects(e, r, i),
                    s = Lu.intersects(e, r, n),
                    a = Lu.intersects(i, n, e),
                    u = Lu.intersects(i, n, r);
                  return o && s ? (this._intPt[0] = i, this._intPt[1] = n, t.COLLINEAR_INTERSECTION) : a && u ? (this._intPt[0] = e, this._intPt[1] = r, t.COLLINEAR_INTERSECTION) : o && a ? (this._intPt[0] = i, this._intPt[1] = e, !i.equals(e) || s || u ? t.COLLINEAR_INTERSECTION : t.POINT_INTERSECTION) : o && u ? (this._intPt[0] = i, this._intPt[1] = r, !i.equals(r) || s || a ? t.COLLINEAR_INTERSECTION : t.POINT_INTERSECTION) : s && a ? (this._intPt[0] = n, this._intPt[1] = e, !n.equals(e) || o || u ? t.COLLINEAR_INTERSECTION : t.POINT_INTERSECTION) : s && u ? (this._intPt[0] = n, this._intPt[1] = r, !n.equals(r) || o || a ? t.COLLINEAR_INTERSECTION : t.POINT_INTERSECTION) : t.NO_INTERSECTION
                }, e.prototype.normalizeToEnvCentre = function (t, e, r, i, n) {
                  var o = t.x < e.x ? t.x : e.x,
                    s = t.y < e.y ? t.y : e.y,
                    a = t.x > e.x ? t.x : e.x,
                    u = t.y > e.y ? t.y : e.y,
                    c = r.x < i.x ? r.x : i.x,
                    h = r.y < i.y ? r.y : i.y,
                    l = r.x > i.x ? r.x : i.x,
                    p = r.y > i.y ? r.y : i.y,
                    f = ((o > c ? o : c) + (a < l ? a : l)) / 2,
                    d = ((s > h ? s : h) + (u < p ? u : p)) / 2;
                  n.x = f, n.y = d, t.x -= n.x, t.y -= n.y, e.x -= n.x, e.y -= n.y, r.x -= n.x, r.y -= n.y, i.x -= n.x, i.y -= n.y;
                }, e.prototype.computeIntersect = function (e, r, i, n) {
                  if (this._isProper = !1, !Lu.intersects(e, r, i, n)) return t.NO_INTERSECTION;
                  var o = zu.orientationIndex(e, r, i),
                    s = zu.orientationIndex(e, r, n);
                  if (o > 0 && s > 0 || o < 0 && s < 0) return t.NO_INTERSECTION;
                  var a = zu.orientationIndex(i, n, e),
                    u = zu.orientationIndex(i, n, r);
                  return a > 0 && u > 0 || a < 0 && u < 0 ? t.NO_INTERSECTION : 0 === o && 0 === s && 0 === a && 0 === u ? this.computeCollinearIntersection(e, r, i, n) : (0 === o || 0 === s || 0 === a || 0 === u ? (this._isProper = !1, e.equals2D(i) || e.equals2D(n) ? this._intPt[0] = e : r.equals2D(i) || r.equals2D(n) ? this._intPt[0] = r : 0 === o ? this._intPt[0] = new ru(i) : 0 === s ? this._intPt[0] = new ru(n) : 0 === a ? this._intPt[0] = new ru(e) : 0 === u && (this._intPt[0] = new ru(r))) : (this._isProper = !0, this._intPt[0] = this.intersection(e, r, i, n)), t.POINT_INTERSECTION)
                }, e.prototype.interfaces_ = function () {
                  return []
                }, e.prototype.getClass = function () {
                  return e
                }, e.nearestEndpoint = function (t, e, r, i) {
                  var n = t,
                    o = zu.distancePointLine(t, r, i),
                    s = zu.distancePointLine(e, r, i);
                  return s < o && (o = s, n = e), (s = zu.distancePointLine(r, t, e)) < o && (o = s, n = r), (s = zu.distancePointLine(i, t, e)) < o && (o = s, n = i), n
                }, e
              }(Ou),
              ku = function () {};
            ku.prototype.interfaces_ = function () {
              return []
            }, ku.prototype.getClass = function () {
              return ku
            }, ku.orientationIndex = function (t, e, r) {
              var i = e.x - t.x,
                n = e.y - t.y,
                o = r.x - e.x,
                s = r.y - e.y;
              return ku.signOfDet2x2(i, n, o, s)
            }, ku.signOfDet2x2 = function (t, e, r, i) {
              var n = null,
                o = null,
                s = null;
              if (n = 1, 0 === t || 0 === i) return 0 === e || 0 === r ? 0 : e > 0 ? r > 0 ? -n : n : r > 0 ? n : -n;
              if (0 === e || 0 === r) return i > 0 ? t > 0 ? n : -n : t > 0 ? -n : n;
              if (e > 0 ? i > 0 ? e <= i || (n = -n, o = t, t = r, r = o, o = e, e = i, i = o) : e <= -i ? (n = -n, r = -r, i = -i) : (o = t, t = -r, r = o, o = e, e = -i, i = o) : i > 0 ? -e <= i ? (n = -n, t = -t, e = -e) : (o = -t, t = r, r = o, o = -e, e = i, i = o) : e >= i ? (t = -t, e = -e, r = -r, i = -i) : (n = -n, o = -t, t = -r, r = o, o = -e, e = -i, i = o), t > 0) {
                if (!(r > 0)) return n;
                if (!(t <= r)) return n
              } else {
                if (r > 0) return -n;
                if (!(t >= r)) return -n;
                n = -n, t = -t, r = -r;
              }
              for (;;) {
                if ((i -= (s = Math.floor(r / t)) * e) < 0) return -n;
                if (i > e) return n;
                if (t > (r -= s * t) + r) {
                  if (e < i + i) return n
                } else {
                  if (e > i + i) return -n;
                  r = t - r, i = e - i, n = -n;
                }
                if (0 === i) return 0 === r ? 0 : -n;
                if (0 === r) return n;
                if ((e -= (s = Math.floor(t / r)) * i) < 0) return n;
                if (e > i) return -n;
                if (r > (t -= s * r) + t) {
                  if (i < e + e) return -n
                } else {
                  if (i > e + e) return n;
                  t = r - t, e = i - e, n = -n;
                }
                if (0 === e) return 0 === t ? 0 : n;
                if (0 === t) return -n
              }
            };
            var Bu = function () {
              this._p = null, this._crossingCount = 0, this._isPointOnSegment = !1;
              var t = arguments[0];
              this._p = t;
            };
            Bu.prototype.countSegment = function (t, e) {
              if (t.x < this._p.x && e.x < this._p.x) return null;
              if (this._p.x === e.x && this._p.y === e.y) return this._isPointOnSegment = !0, null;
              if (t.y === this._p.y && e.y === this._p.y) {
                var r = t.x,
                  i = e.x;
                return r > i && (r = e.x, i = t.x), this._p.x >= r && this._p.x <= i && (this._isPointOnSegment = !0), null
              }
              if (t.y > this._p.y && e.y <= this._p.y || e.y > this._p.y && t.y <= this._p.y) {
                var n = t.x - this._p.x,
                  o = t.y - this._p.y,
                  s = e.x - this._p.x,
                  a = e.y - this._p.y,
                  u = ku.signOfDet2x2(n, o, s, a);
                if (0 === u) return this._isPointOnSegment = !0, null;
                a < o && (u = -u), u > 0 && this._crossingCount++;
              }
            }, Bu.prototype.isPointInPolygon = function () {
              return this.getLocation() !== su.EXTERIOR
            }, Bu.prototype.getLocation = function () {
              return this._isPointOnSegment ? su.BOUNDARY : this._crossingCount % 2 == 1 ? su.INTERIOR : su.EXTERIOR
            }, Bu.prototype.isOnSegment = function () {
              return this._isPointOnSegment
            }, Bu.prototype.interfaces_ = function () {
              return []
            }, Bu.prototype.getClass = function () {
              return Bu
            }, Bu.locatePointInRing = function () {
              if (arguments[0] instanceof ru && uu(arguments[1], mu)) {
                for (var t = arguments[0], e = arguments[1], r = new Bu(t), i = new ru, n = new ru, o = 1; o < e.size(); o++)
                  if (e.getCoordinate(o, i), e.getCoordinate(o - 1, n), r.countSegment(i, n), r.isOnSegment()) return r.getLocation();
                return r.getLocation()
              }
              if (arguments[0] instanceof ru && arguments[1] instanceof Array) {
                for (var s = arguments[0], a = arguments[1], u = new Bu(s), c = 1; c < a.length; c++) {
                  var h = a[c],
                    l = a[c - 1];
                  if (u.countSegment(h, l), u.isOnSegment()) return u.getLocation()
                }
                return u.getLocation()
              }
            };
            var zu = function () {},
              Vu = {
                CLOCKWISE: {
                  configurable: !0
                },
                RIGHT: {
                  configurable: !0
                },
                COUNTERCLOCKWISE: {
                  configurable: !0
                },
                LEFT: {
                  configurable: !0
                },
                COLLINEAR: {
                  configurable: !0
                },
                STRAIGHT: {
                  configurable: !0
                }
              };
            zu.prototype.interfaces_ = function () {
              return []
            }, zu.prototype.getClass = function () {
              return zu
            }, zu.orientationIndex = function (t, e, r) {
              return _u.orientationIndex(t, e, r)
            }, zu.signedArea = function () {
              if (arguments[0] instanceof Array) {
                var t = arguments[0];
                if (t.length < 3) return 0;
                for (var e = 0, r = t[0].x, i = 1; i < t.length - 1; i++) {
                  var n = t[i].x - r,
                    o = t[i + 1].y;
                  e += n * (t[i - 1].y - o);
                }
                return e / 2
              }
              if (uu(arguments[0], mu)) {
                var s = arguments[0],
                  a = s.size();
                if (a < 3) return 0;
                var u = new ru,
                  c = new ru,
                  h = new ru;
                s.getCoordinate(0, c), s.getCoordinate(1, h);
                var l = c.x;
                h.x -= l;
                for (var p = 0, f = 1; f < a - 1; f++) u.y = c.y, c.x = h.x, c.y = h.y, s.getCoordinate(f + 1, h), h.x -= l, p += c.x * (u.y - h.y);
                return p / 2
              }
            }, zu.distanceLineLine = function (t, e, r, i) {
              if (t.equals(e)) return zu.distancePointLine(t, r, i);
              if (r.equals(i)) return zu.distancePointLine(i, t, e);
              var n = !1;
              if (Lu.intersects(t, e, r, i)) {
                var o = (e.x - t.x) * (i.y - r.y) - (e.y - t.y) * (i.x - r.x);
                if (0 === o) n = !0;
                else {
                  var s = (t.y - r.y) * (i.x - r.x) - (t.x - r.x) * (i.y - r.y),
                    a = ((t.y - r.y) * (e.x - t.x) - (t.x - r.x) * (e.y - t.y)) / o,
                    u = s / o;
                  (u < 0 || u > 1 || a < 0 || a > 1) && (n = !0);
                }
              } else n = !0;
              return n ? cu.min(zu.distancePointLine(t, r, i), zu.distancePointLine(e, r, i), zu.distancePointLine(r, t, e), zu.distancePointLine(i, t, e)) : 0
            }, zu.isPointInRing = function (t, e) {
              return zu.locatePointInRing(t, e) !== su.EXTERIOR
            }, zu.computeLength = function (t) {
              var e = t.size();
              if (e <= 1) return 0;
              var r = 0,
                i = new ru;
              t.getCoordinate(0, i);
              for (var n = i.x, o = i.y, s = 1; s < e; s++) {
                t.getCoordinate(s, i);
                var a = i.x,
                  u = i.y,
                  c = a - n,
                  h = u - o;
                r += Math.sqrt(c * c + h * h), n = a, o = u;
              }
              return r
            }, zu.isCCW = function (t) {
              var e = t.length - 1;
              if (e < 3) throw new Ka("Ring has fewer than 4 points, so orientation cannot be determined");
              for (var r = t[0], i = 0, n = 1; n <= e; n++) {
                var o = t[n];
                o.y > r.y && (r = o, i = n);
              }
              var s = i;
              do {
                (s -= 1) < 0 && (s = e);
              } while (t[s].equals2D(r) && s !== i);
              var a = i;
              do {
                a = (a + 1) % e;
              } while (t[a].equals2D(r) && a !== i);
              var u = t[s],
                c = t[a];
              if (u.equals2D(r) || c.equals2D(r) || u.equals2D(c)) return !1;
              var h = zu.computeOrientation(u, r, c);
              return 0 === h ? u.x > c.x : h > 0
            }, zu.locatePointInRing = function (t, e) {
              return Bu.locatePointInRing(t, e)
            }, zu.distancePointLinePerpendicular = function (t, e, r) {
              var i = (r.x - e.x) * (r.x - e.x) + (r.y - e.y) * (r.y - e.y),
                n = ((e.y - t.y) * (r.x - e.x) - (e.x - t.x) * (r.y - e.y)) / i;
              return Math.abs(n) * Math.sqrt(i)
            }, zu.computeOrientation = function (t, e, r) {
              return zu.orientationIndex(t, e, r)
            }, zu.distancePointLine = function () {
              if (2 === arguments.length) {
                var t = arguments[0],
                  e = arguments[1];
                if (0 === e.length) throw new Ka("Line array must contain at least one vertex");
                for (var r = t.distance(e[0]), i = 0; i < e.length - 1; i++) {
                  var n = zu.distancePointLine(t, e[i], e[i + 1]);
                  n < r && (r = n);
                }
                return r
              }
              if (3 === arguments.length) {
                var o = arguments[0],
                  s = arguments[1],
                  a = arguments[2];
                if (s.x === a.x && s.y === a.y) return o.distance(s);
                var u = (a.x - s.x) * (a.x - s.x) + (a.y - s.y) * (a.y - s.y),
                  c = ((o.x - s.x) * (a.x - s.x) + (o.y - s.y) * (a.y - s.y)) / u;
                if (c <= 0) return o.distance(s);
                if (c >= 1) return o.distance(a);
                var h = ((s.y - o.y) * (a.x - s.x) - (s.x - o.x) * (a.y - s.y)) / u;
                return Math.abs(h) * Math.sqrt(u)
              }
            }, zu.isOnLine = function (t, e) {
              for (var r = new Fu, i = 1; i < e.length; i++) {
                var n = e[i - 1],
                  o = e[i];
                if (r.computeIntersection(t, n, o), r.hasIntersection()) return !0
              }
              return !1
            }, Vu.CLOCKWISE.get = function () {
              return -1
            }, Vu.RIGHT.get = function () {
              return zu.CLOCKWISE
            }, Vu.COUNTERCLOCKWISE.get = function () {
              return 1
            }, Vu.LEFT.get = function () {
              return zu.COUNTERCLOCKWISE
            }, Vu.COLLINEAR.get = function () {
              return 0
            }, Vu.STRAIGHT.get = function () {
              return zu.COLLINEAR
            }, Object.defineProperties(zu, Vu);
            var Uu = function () {};
            Uu.prototype.filter = function (t) {}, Uu.prototype.interfaces_ = function () {
              return []
            }, Uu.prototype.getClass = function () {
              return Uu
            };
            var qu = function () {
                var t = arguments[0];
                this._envelope = null, this._factory = null, this._SRID = null, this._userData = null, this._factory = t, this._SRID = t.getSRID();
              },
              ju = {
                serialVersionUID: {
                  configurable: !0
                },
                SORTINDEX_POINT: {
                  configurable: !0
                },
                SORTINDEX_MULTIPOINT: {
                  configurable: !0
                },
                SORTINDEX_LINESTRING: {
                  configurable: !0
                },
                SORTINDEX_LINEARRING: {
                  configurable: !0
                },
                SORTINDEX_MULTILINESTRING: {
                  configurable: !0
                },
                SORTINDEX_POLYGON: {
                  configurable: !0
                },
                SORTINDEX_MULTIPOLYGON: {
                  configurable: !0
                },
                SORTINDEX_GEOMETRYCOLLECTION: {
                  configurable: !0
                },
                geometryChangedFilter: {
                  configurable: !0
                }
              };
            qu.prototype.isGeometryCollection = function () {
              return this.getSortIndex() === qu.SORTINDEX_GEOMETRYCOLLECTION
            }, qu.prototype.getFactory = function () {
              return this._factory
            }, qu.prototype.getGeometryN = function (t) {
              return this
            }, qu.prototype.getArea = function () {
              return 0
            }, qu.prototype.isRectangle = function () {
              return !1
            }, qu.prototype.equals = function () {
              if (arguments[0] instanceof qu) {
                var t = arguments[0];
                return null !== t && this.equalsTopo(t)
              }
              if (arguments[0] instanceof Object) {
                var e = arguments[0];
                if (!(e instanceof qu)) return !1;
                var r = e;
                return this.equalsExact(r)
              }
            }, qu.prototype.equalsExact = function (t) {
              return this === t || this.equalsExact(t, 0)
            }, qu.prototype.geometryChanged = function () {
              this.apply(qu.geometryChangedFilter);
            }, qu.prototype.geometryChangedAction = function () {
              this._envelope = null;
            }, qu.prototype.equalsNorm = function (t) {
              return null !== t && this.norm().equalsExact(t.norm())
            }, qu.prototype.getLength = function () {
              return 0
            }, qu.prototype.getNumGeometries = function () {
              return 1
            }, qu.prototype.compareTo = function () {
              if (1 === arguments.length) {
                var t = arguments[0],
                  e = t;
                return this.getSortIndex() !== e.getSortIndex() ? this.getSortIndex() - e.getSortIndex() : this.isEmpty() && e.isEmpty() ? 0 : this.isEmpty() ? -1 : e.isEmpty() ? 1 : this.compareToSameClass(t)
              }
              if (2 === arguments.length) {
                var r = arguments[0],
                  i = arguments[1];
                return this.getSortIndex() !== r.getSortIndex() ? this.getSortIndex() - r.getSortIndex() : this.isEmpty() && r.isEmpty() ? 0 : this.isEmpty() ? -1 : r.isEmpty() ? 1 : this.compareToSameClass(r, i)
              }
            }, qu.prototype.getUserData = function () {
              return this._userData
            }, qu.prototype.getSRID = function () {
              return this._SRID
            }, qu.prototype.getEnvelope = function () {
              return this.getFactory().toGeometry(this.getEnvelopeInternal())
            }, qu.prototype.checkNotGeometryCollection = function (t) {
              if (t.getSortIndex() === qu.SORTINDEX_GEOMETRYCOLLECTION) throw new Ka("This method does not support GeometryCollection arguments")
            }, qu.prototype.equal = function (t, e, r) {
              return 0 === r ? t.equals(e) : t.distance(e) <= r
            }, qu.prototype.norm = function () {
              var t = this.copy();
              return t.normalize(), t
            }, qu.prototype.getPrecisionModel = function () {
              return this._factory.getPrecisionModel()
            }, qu.prototype.getEnvelopeInternal = function () {
              return null === this._envelope && (this._envelope = this.computeEnvelopeInternal()), new Lu(this._envelope)
            }, qu.prototype.setSRID = function (t) {
              this._SRID = t;
            }, qu.prototype.setUserData = function (t) {
              this._userData = t;
            }, qu.prototype.compare = function (t, e) {
              for (var r = t.iterator(), i = e.iterator(); r.hasNext() && i.hasNext();) {
                var n = r.next(),
                  o = i.next(),
                  s = n.compareTo(o);
                if (0 !== s) return s
              }
              return r.hasNext() ? 1 : i.hasNext() ? -1 : 0
            }, qu.prototype.hashCode = function () {
              return this.getEnvelopeInternal().hashCode()
            }, qu.prototype.isGeometryCollectionOrDerived = function () {
              return this.getSortIndex() === qu.SORTINDEX_GEOMETRYCOLLECTION || this.getSortIndex() === qu.SORTINDEX_MULTIPOINT || this.getSortIndex() === qu.SORTINDEX_MULTILINESTRING || this.getSortIndex() === qu.SORTINDEX_MULTIPOLYGON
            }, qu.prototype.interfaces_ = function () {
              return [tu, $a, yn]
            }, qu.prototype.getClass = function () {
              return qu
            }, qu.hasNonEmptyElements = function (t) {
              for (var e = 0; e < t.length; e++)
                if (!t[e].isEmpty()) return !0;
              return !1
            }, qu.hasNullElements = function (t) {
              for (var e = 0; e < t.length; e++)
                if (null === t[e]) return !0;
              return !1
            }, ju.serialVersionUID.get = function () {
              return 0x799ea46522854c00
            }, ju.SORTINDEX_POINT.get = function () {
              return 0
            }, ju.SORTINDEX_MULTIPOINT.get = function () {
              return 1
            }, ju.SORTINDEX_LINESTRING.get = function () {
              return 2
            }, ju.SORTINDEX_LINEARRING.get = function () {
              return 3
            }, ju.SORTINDEX_MULTILINESTRING.get = function () {
              return 4
            }, ju.SORTINDEX_POLYGON.get = function () {
              return 5
            }, ju.SORTINDEX_MULTIPOLYGON.get = function () {
              return 6
            }, ju.SORTINDEX_GEOMETRYCOLLECTION.get = function () {
              return 7
            }, ju.geometryChangedFilter.get = function () {
              return Gu
            }, Object.defineProperties(qu, ju);
            var Gu = function () {};
            Gu.interfaces_ = function () {
              return [Uu]
            }, Gu.filter = function (t) {
              t.geometryChangedAction();
            };
            var Xu = function () {};
            Xu.prototype.filter = function (t) {}, Xu.prototype.interfaces_ = function () {
              return []
            }, Xu.prototype.getClass = function () {
              return Xu
            };
            var Zu = function () {},
              Yu = {
                Mod2BoundaryNodeRule: {
                  configurable: !0
                },
                EndPointBoundaryNodeRule: {
                  configurable: !0
                },
                MultiValentEndPointBoundaryNodeRule: {
                  configurable: !0
                },
                MonoValentEndPointBoundaryNodeRule: {
                  configurable: !0
                },
                MOD2_BOUNDARY_RULE: {
                  configurable: !0
                },
                ENDPOINT_BOUNDARY_RULE: {
                  configurable: !0
                },
                MULTIVALENT_ENDPOINT_BOUNDARY_RULE: {
                  configurable: !0
                },
                MONOVALENT_ENDPOINT_BOUNDARY_RULE: {
                  configurable: !0
                },
                OGC_SFS_BOUNDARY_RULE: {
                  configurable: !0
                }
              };
            Zu.prototype.isInBoundary = function (t) {}, Zu.prototype.interfaces_ = function () {
              return []
            }, Zu.prototype.getClass = function () {
              return Zu
            }, Yu.Mod2BoundaryNodeRule.get = function () {
              return Wu
            }, Yu.EndPointBoundaryNodeRule.get = function () {
              return Hu
            }, Yu.MultiValentEndPointBoundaryNodeRule.get = function () {
              return Ku
            }, Yu.MonoValentEndPointBoundaryNodeRule.get = function () {
              return Ju
            }, Yu.MOD2_BOUNDARY_RULE.get = function () {
              return new Wu
            }, Yu.ENDPOINT_BOUNDARY_RULE.get = function () {
              return new Hu
            }, Yu.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get = function () {
              return new Ku
            }, Yu.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get = function () {
              return new Ju
            }, Yu.OGC_SFS_BOUNDARY_RULE.get = function () {
              return Zu.MOD2_BOUNDARY_RULE
            }, Object.defineProperties(Zu, Yu);
            var Wu = function () {};
            Wu.prototype.isInBoundary = function (t) {
              return t % 2 == 1
            }, Wu.prototype.interfaces_ = function () {
              return [Zu]
            }, Wu.prototype.getClass = function () {
              return Wu
            };
            var Hu = function () {};
            Hu.prototype.isInBoundary = function (t) {
              return t > 0
            }, Hu.prototype.interfaces_ = function () {
              return [Zu]
            }, Hu.prototype.getClass = function () {
              return Hu
            };
            var Ku = function () {};
            Ku.prototype.isInBoundary = function (t) {
              return t > 1
            }, Ku.prototype.interfaces_ = function () {
              return [Zu]
            }, Ku.prototype.getClass = function () {
              return Ku
            };
            var Ju = function () {};
            Ju.prototype.isInBoundary = function (t) {
              return 1 === t
            }, Ju.prototype.interfaces_ = function () {
              return [Zu]
            }, Ju.prototype.getClass = function () {
              return Ju
            };
            var Qu = function () {};
            Qu.prototype.add = function () {}, Qu.prototype.addAll = function () {}, Qu.prototype.isEmpty = function () {}, Qu.prototype.iterator = function () {}, Qu.prototype.size = function () {}, Qu.prototype.toArray = function () {}, Qu.prototype.remove = function () {};
            var $u = function (t) {
                function e(e) {
                  t.call(this), this.message = e || "";
                }
                t && (e.__proto__ = t), (e.prototype = Object.create(t && t.prototype)).constructor = e;
                var r = {
                  name: {
                    configurable: !0
                  }
                };
                return r.name.get = function () {
                  return "IndexOutOfBoundsException"
                }, Object.defineProperties(e, r), e
              }(Error),
              tc = function () {};
            tc.prototype.hasNext = function () {}, tc.prototype.next = function () {}, tc.prototype.remove = function () {};
            var ec = function (t) {
              function e() {
                t.apply(this, arguments);
              }
              return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.get = function () {}, e.prototype.set = function () {}, e.prototype.isEmpty = function () {}, e
            }(Qu);
            (mn.prototype = new Error).name = "NoSuchElementException";
            var rc = function (t) {
                function e() {
                  t.call(this), this.array_ = [], arguments[0] instanceof Qu && this.addAll(arguments[0]);
                }
                return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.ensureCapacity = function () {}, e.prototype.interfaces_ = function () {
                  return [t, Qu]
                }, e.prototype.add = function (t) {
                  return 1 === arguments.length ? this.array_.push(t) : this.array_.splice(arguments[0], arguments[1]), !0
                }, e.prototype.clear = function () {
                  this.array_ = [];
                }, e.prototype.addAll = function (t) {
                  for (var e = t.iterator(); e.hasNext();) this.add(e.next());
                  return !0
                }, e.prototype.set = function (t, e) {
                  var r = this.array_[t];
                  return this.array_[t] = e, r
                }, e.prototype.iterator = function () {
                  return new ic(this)
                }, e.prototype.get = function (t) {
                  if (t < 0 || t >= this.size()) throw new $u;
                  return this.array_[t]
                }, e.prototype.isEmpty = function () {
                  return 0 === this.array_.length
                }, e.prototype.size = function () {
                  return this.array_.length
                }, e.prototype.toArray = function () {
                  for (var t = [], e = 0, r = this.array_.length; e < r; e++) t.push(this.array_[e]);
                  return t
                }, e.prototype.remove = function (t) {
                  for (var e = !1, r = 0, i = this.array_.length; r < i; r++)
                    if (this.array_[r] === t) {
                      this.array_.splice(r, 1), e = !0;
                      break
                    } return e
                }, e
              }(ec),
              ic = function (t) {
                function e(e) {
                  t.call(this), this.arrayList_ = e, this.position_ = 0;
                }
                return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.next = function () {
                  if (this.position_ === this.arrayList_.size()) throw new mn;
                  return this.arrayList_.get(this.position_++)
                }, e.prototype.hasNext = function () {
                  return this.position_ < this.arrayList_.size()
                }, e.prototype.set = function (t) {
                  return this.arrayList_.set(this.position_ - 1, t)
                }, e.prototype.remove = function () {
                  this.arrayList_.remove(this.arrayList_.get(this.position_));
                }, e
              }(tc),
              nc = function (t) {
                function e() {
                  if (t.call(this), 0 === arguments.length);
                  else if (1 === arguments.length) {
                    var e = arguments[0];
                    this.ensureCapacity(e.length), this.add(e, !0);
                  } else if (2 === arguments.length) {
                    var r = arguments[0],
                      i = arguments[1];
                    this.ensureCapacity(r.length), this.add(r, i);
                  }
                }
                t && (e.__proto__ = t), (e.prototype = Object.create(t && t.prototype)).constructor = e;
                var r = {
                  coordArrayType: {
                    configurable: !0
                  }
                };
                return r.coordArrayType.get = function () {
                  return new Array(0).fill(null)
                }, e.prototype.getCoordinate = function (t) {
                  return this.get(t)
                }, e.prototype.addAll = function () {
                  if (2 === arguments.length) {
                    for (var e = arguments[0], r = arguments[1], i = !1, n = e.iterator(); n.hasNext();) this.add(n.next(), r), i = !0;
                    return i
                  }
                  return t.prototype.addAll.apply(this, arguments)
                }, e.prototype.clone = function () {
                  for (var e = t.prototype.clone.call(this), r = 0; r < this.size(); r++) e.add(r, this.get(r).copy());
                  return e
                }, e.prototype.toCoordinateArray = function () {
                  return this.toArray(e.coordArrayType)
                }, e.prototype.add = function () {
                  if (1 === arguments.length) {
                    var e = arguments[0];
                    t.prototype.add.call(this, e);
                  } else if (2 === arguments.length) {
                    if (arguments[0] instanceof Array && "boolean" == typeof arguments[1]) {
                      var r = arguments[0],
                        i = arguments[1];
                      return this.add(r, i, !0), !0
                    }
                    if (arguments[0] instanceof ru && "boolean" == typeof arguments[1]) {
                      var n = arguments[0];
                      if (!arguments[1] && this.size() >= 1 && this.get(this.size() - 1).equals2D(n)) return null;
                      t.prototype.add.call(this, n);
                    } else if (arguments[0] instanceof Object && "boolean" == typeof arguments[1]) {
                      var o = arguments[0],
                        s = arguments[1];
                      return this.add(o, s), !0
                    }
                  } else if (3 === arguments.length) {
                    if ("boolean" == typeof arguments[2] && arguments[0] instanceof Array && "boolean" == typeof arguments[1]) {
                      var a = arguments[0],
                        u = arguments[1];
                      if (arguments[2])
                        for (var c = 0; c < a.length; c++) this.add(a[c], u);
                      else
                        for (var h = a.length - 1; h >= 0; h--) this.add(a[h], u);
                      return !0
                    }
                    if ("boolean" == typeof arguments[2] && Number.isInteger(arguments[0]) && arguments[1] instanceof ru) {
                      var l = arguments[0],
                        p = arguments[1];
                      if (!arguments[2]) {
                        var f = this.size();
                        if (f > 0) {
                          if (l > 0 && this.get(l - 1).equals2D(p)) return null;
                          if (l < f && this.get(l).equals2D(p)) return null
                        }
                      }
                      t.prototype.add.call(this, l, p);
                    }
                  } else if (4 === arguments.length) {
                    var d = arguments[0],
                      g = arguments[1],
                      _ = arguments[2],
                      y = arguments[3],
                      m = 1;
                    _ > y && (m = -1);
                    for (var v = _; v !== y; v += m) this.add(d[v], g);
                    return !0
                  }
                }, e.prototype.closeRing = function () {
                  this.size() > 0 && this.add(new ru(this.get(0)), !1);
                }, e.prototype.interfaces_ = function () {
                  return []
                }, e.prototype.getClass = function () {
                  return e
                }, Object.defineProperties(e, r), e
              }(rc),
              oc = function () {},
              sc = {
                ForwardComparator: {
                  configurable: !0
                },
                BidirectionalComparator: {
                  configurable: !0
                },
                coordArrayType: {
                  configurable: !0
                }
              };
            sc.ForwardComparator.get = function () {
              return ac
            }, sc.BidirectionalComparator.get = function () {
              return uc
            }, sc.coordArrayType.get = function () {
              return new Array(0).fill(null)
            }, oc.prototype.interfaces_ = function () {
              return []
            }, oc.prototype.getClass = function () {
              return oc
            }, oc.isRing = function (t) {
              return !(t.length < 4 || !t[0].equals2D(t[t.length - 1]))
            }, oc.ptNotInList = function (t, e) {
              for (var r = 0; r < t.length; r++) {
                var i = t[r];
                if (oc.indexOf(i, e) < 0) return i
              }
              return null
            }, oc.scroll = function (t, e) {
              var r = oc.indexOf(e, t);
              if (r < 0) return null;
              var i = new Array(t.length).fill(null);
              bu.arraycopy(t, r, i, 0, t.length - r), bu.arraycopy(t, 0, i, t.length - r, r), bu.arraycopy(i, 0, t, 0, t.length);
            }, oc.equals = function () {
              if (2 === arguments.length) {
                var t = arguments[0],
                  e = arguments[1];
                if (t === e) return !0;
                if (null === t || null === e) return !1;
                if (t.length !== e.length) return !1;
                for (var r = 0; r < t.length; r++)
                  if (!t[r].equals(e[r])) return !1;
                return !0
              }
              if (3 === arguments.length) {
                var i = arguments[0],
                  n = arguments[1],
                  o = arguments[2];
                if (i === n) return !0;
                if (null === i || null === n) return !1;
                if (i.length !== n.length) return !1;
                for (var s = 0; s < i.length; s++)
                  if (0 !== o.compare(i[s], n[s])) return !1;
                return !0
              }
            }, oc.intersection = function (t, e) {
              for (var r = new nc, i = 0; i < t.length; i++) e.intersects(t[i]) && r.add(t[i], !0);
              return r.toCoordinateArray()
            }, oc.hasRepeatedPoints = function (t) {
              for (var e = 1; e < t.length; e++)
                if (t[e - 1].equals(t[e])) return !0;
              return !1
            }, oc.removeRepeatedPoints = function (t) {
              return oc.hasRepeatedPoints(t) ? new nc(t, !1).toCoordinateArray() : t
            }, oc.reverse = function (t) {
              for (var e = t.length - 1, r = Math.trunc(e / 2), i = 0; i <= r; i++) {
                var n = t[i];
                t[i] = t[e - i], t[e - i] = n;
              }
            }, oc.removeNull = function (t) {
              for (var e = 0, r = 0; r < t.length; r++) null !== t[r] && e++;
              var i = new Array(e).fill(null);
              if (0 === e) return i;
              for (var n = 0, o = 0; o < t.length; o++) null !== t[o] && (i[n++] = t[o]);
              return i
            }, oc.copyDeep = function () {
              if (1 === arguments.length) {
                for (var t = arguments[0], e = new Array(t.length).fill(null), r = 0; r < t.length; r++) e[r] = new ru(t[r]);
                return e
              }
              if (5 === arguments.length)
                for (var i = arguments[0], n = arguments[1], o = arguments[2], s = arguments[3], a = arguments[4], u = 0; u < a; u++) o[s + u] = new ru(i[n + u]);
            }, oc.isEqualReversed = function (t, e) {
              for (var r = 0; r < t.length; r++) {
                var i = t[r],
                  n = e[t.length - r - 1];
                if (0 !== i.compareTo(n)) return !1
              }
              return !0
            }, oc.envelope = function (t) {
              for (var e = new Lu, r = 0; r < t.length; r++) e.expandToInclude(t[r]);
              return e
            }, oc.toCoordinateArray = function (t) {
              return t.toArray(oc.coordArrayType)
            }, oc.atLeastNCoordinatesOrNothing = function (t, e) {
              return e.length >= t ? e : []
            }, oc.indexOf = function (t, e) {
              for (var r = 0; r < e.length; r++)
                if (t.equals(e[r])) return r;
              return -1
            }, oc.increasingDirection = function (t) {
              for (var e = 0; e < Math.trunc(t.length / 2); e++) {
                var r = t.length - 1 - e,
                  i = t[e].compareTo(t[r]);
                if (0 !== i) return i
              }
              return 1
            }, oc.compare = function (t, e) {
              for (var r = 0; r < t.length && r < e.length;) {
                var i = t[r].compareTo(e[r]);
                if (0 !== i) return i;
                r++;
              }
              return r < e.length ? -1 : r < t.length ? 1 : 0
            }, oc.minCoordinate = function (t) {
              for (var e = null, r = 0; r < t.length; r++)(null === e || e.compareTo(t[r]) > 0) && (e = t[r]);
              return e
            }, oc.extract = function (t, e, r) {
              e = cu.clamp(e, 0, t.length);
              var i = (r = cu.clamp(r, -1, t.length)) - e + 1;
              r < 0 && (i = 0), e >= t.length && (i = 0), r < e && (i = 0);
              var n = new Array(i).fill(null);
              if (0 === i) return n;
              for (var o = 0, s = e; s <= r; s++) n[o++] = t[s];
              return n
            }, Object.defineProperties(oc, sc);
            var ac = function () {};
            ac.prototype.compare = function (t, e) {
              return oc.compare(t, e)
            }, ac.prototype.interfaces_ = function () {
              return [eu]
            }, ac.prototype.getClass = function () {
              return ac
            };
            var uc = function () {};
            uc.prototype.compare = function (t, e) {
              var r = t,
                i = e;
              if (r.length < i.length) return -1;
              if (r.length > i.length) return 1;
              if (0 === r.length) return 0;
              var n = oc.compare(r, i);
              return oc.isEqualReversed(r, i) ? 0 : n
            }, uc.prototype.OLDcompare = function (t, e) {
              var r = t,
                i = e;
              if (r.length < i.length) return -1;
              if (r.length > i.length) return 1;
              if (0 === r.length) return 0;
              for (var n = oc.increasingDirection(r), o = oc.increasingDirection(i), s = n > 0 ? 0 : r.length - 1, a = o > 0 ? 0 : r.length - 1, u = 0; u < r.length; u++) {
                var c = r[s].compareTo(i[a]);
                if (0 !== c) return c;
                s += n, a += o;
              }
              return 0
            }, uc.prototype.interfaces_ = function () {
              return [eu]
            }, uc.prototype.getClass = function () {
              return uc
            };
            var cc = function () {};
            cc.prototype.get = function () {}, cc.prototype.put = function () {}, cc.prototype.size = function () {}, cc.prototype.values = function () {}, cc.prototype.entrySet = function () {};
            var hc = function (t) {
              function e() {
                t.apply(this, arguments);
              }
              return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e
            }(cc);
            (vn.prototype = new Error).name = "OperationNotSupported", (xn.prototype = new Qu).contains = function () {};
            var lc = function (t) {
                function e() {
                  t.call(this), this.array_ = [], arguments[0] instanceof Qu && this.addAll(arguments[0]);
                }
                return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.contains = function (t) {
                  for (var e = 0, r = this.array_.length; e < r; e++)
                    if (this.array_[e] === t) return !0;
                  return !1
                }, e.prototype.add = function (t) {
                  return !this.contains(t) && (this.array_.push(t), !0)
                }, e.prototype.addAll = function (t) {
                  for (var e = t.iterator(); e.hasNext();) this.add(e.next());
                  return !0
                }, e.prototype.remove = function (t) {
                  throw new Error
                }, e.prototype.size = function () {
                  return this.array_.length
                }, e.prototype.isEmpty = function () {
                  return 0 === this.array_.length
                }, e.prototype.toArray = function () {
                  for (var t = [], e = 0, r = this.array_.length; e < r; e++) t.push(this.array_[e]);
                  return t
                }, e.prototype.iterator = function () {
                  return new pc(this)
                }, e
              }(xn),
              pc = function (t) {
                function e(e) {
                  t.call(this), this.hashSet_ = e, this.position_ = 0;
                }
                return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.next = function () {
                  if (this.position_ === this.hashSet_.size()) throw new mn;
                  return this.hashSet_.array_[this.position_++]
                }, e.prototype.hasNext = function () {
                  return this.position_ < this.hashSet_.size()
                }, e.prototype.remove = function () {
                  throw new vn
                }, e
              }(tc),
              fc = 0;
            (Cn.prototype = new hc).get = function (t) {
              for (var e = this.root_; null !== e;) {
                var r = t.compareTo(e.key);
                if (r < 0) e = e.left;
                else {
                  if (!(r > 0)) return e.value;
                  e = e.right;
                }
              }
              return null
            }, Cn.prototype.put = function (t, e) {
              if (null === this.root_) return this.root_ = {
                key: t,
                value: e,
                left: null,
                right: null,
                parent: null,
                color: fc,
                getValue: function () {
                  return this.value
                },
                getKey: function () {
                  return this.key
                }
              }, this.size_ = 1, null;
              var r, i, n = this.root_;
              do {
                if (r = n, (i = t.compareTo(n.key)) < 0) n = n.left;
                else {
                  if (!(i > 0)) {
                    var o = n.value;
                    return n.value = e, o
                  }
                  n = n.right;
                }
              } while (null !== n);
              var s = {
                key: t,
                left: null,
                right: null,
                value: e,
                parent: r,
                color: fc,
                getValue: function () {
                  return this.value
                },
                getKey: function () {
                  return this.key
                }
              };
              return i < 0 ? r.left = s : r.right = s, this.fixAfterInsertion(s), this.size_++, null
            }, Cn.prototype.fixAfterInsertion = function (t) {
              for (t.color = 1; null != t && t !== this.root_ && 1 === t.parent.color;)
                if (bn(t) === Ln(bn(bn(t)))) {
                  var e = Sn(bn(bn(t)));
                  1 === wn(e) ? (En(bn(t), fc), En(e, fc), En(bn(bn(t)), 1), t = bn(bn(t))) : (t === Sn(bn(t)) && (t = bn(t), this.rotateLeft(t)), En(bn(t), fc), En(bn(bn(t)), 1), this.rotateRight(bn(bn(t))));
                } else {
                  var r = Ln(bn(bn(t)));
                  1 === wn(r) ? (En(bn(t), fc), En(r, fc), En(bn(bn(t)), 1), t = bn(bn(t))) : (t === Ln(bn(t)) && (t = bn(t), this.rotateRight(t)), En(bn(t), fc), En(bn(bn(t)), 1), this.rotateLeft(bn(bn(t))));
                } this.root_.color = fc;
            }, Cn.prototype.values = function () {
              var t = new rc,
                e = this.getFirstEntry();
              if (null !== e)
                for (t.add(e.value); null !== (e = Cn.successor(e));) t.add(e.value);
              return t
            }, Cn.prototype.entrySet = function () {
              var t = new lc,
                e = this.getFirstEntry();
              if (null !== e)
                for (t.add(e); null !== (e = Cn.successor(e));) t.add(e);
              return t
            }, Cn.prototype.rotateLeft = function (t) {
              if (null != t) {
                var e = t.right;
                t.right = e.left, null != e.left && (e.left.parent = t), e.parent = t.parent, null === t.parent ? this.root_ = e : t.parent.left === t ? t.parent.left = e : t.parent.right = e, e.left = t, t.parent = e;
              }
            }, Cn.prototype.rotateRight = function (t) {
              if (null != t) {
                var e = t.left;
                t.left = e.right, null != e.right && (e.right.parent = t), e.parent = t.parent, null === t.parent ? this.root_ = e : t.parent.right === t ? t.parent.right = e : t.parent.left = e, e.right = t, t.parent = e;
              }
            }, Cn.prototype.getFirstEntry = function () {
              var t = this.root_;
              if (null != t)
                for (; null != t.left;) t = t.left;
              return t
            }, Cn.successor = function (t) {
              if (null === t) return null;
              if (null !== t.right) {
                for (var e = t.right; null !== e.left;) e = e.left;
                return e
              }
              for (var r = t.parent, i = t; null !== r && i === r.right;) i = r, r = r.parent;
              return r
            }, Cn.prototype.size = function () {
              return this.size_
            };
            var dc = function () {};
            dc.prototype.interfaces_ = function () {
              return []
            }, dc.prototype.getClass = function () {
              return dc
            }, In.prototype = new xn, (Mn.prototype = new In).contains = function (t) {
              for (var e = 0, r = this.array_.length; e < r; e++)
                if (0 === this.array_[e].compareTo(t)) return !0;
              return !1
            }, Mn.prototype.add = function (t) {
              if (this.contains(t)) return !1;
              for (var e = 0, r = this.array_.length; e < r; e++)
                if (1 === this.array_[e].compareTo(t)) return this.array_.splice(e, 0, t), !0;
              return this.array_.push(t), !0
            }, Mn.prototype.addAll = function (t) {
              for (var e = t.iterator(); e.hasNext();) this.add(e.next());
              return !0
            }, Mn.prototype.remove = function (t) {
              throw new vn
            }, Mn.prototype.size = function () {
              return this.array_.length
            }, Mn.prototype.isEmpty = function () {
              return 0 === this.array_.length
            }, Mn.prototype.toArray = function () {
              for (var t = [], e = 0, r = this.array_.length; e < r; e++) t.push(this.array_[e]);
              return t
            }, Mn.prototype.iterator = function () {
              return new gc(this)
            };
            var gc = function (t) {
              this.treeSet_ = t, this.position_ = 0;
            };
            gc.prototype.next = function () {
              if (this.position_ === this.treeSet_.size()) throw new mn;
              return this.treeSet_.array_[this.position_++]
            }, gc.prototype.hasNext = function () {
              return this.position_ < this.treeSet_.size()
            }, gc.prototype.remove = function () {
              throw new vn
            };
            var _c = function () {};
            _c.sort = function () {
              var t, e, r, i, n = arguments[0];
              if (1 === arguments.length) i = function (t, e) {
                return t.compareTo(e)
              }, n.sort(i);
              else if (2 === arguments.length) r = arguments[1], i = function (t, e) {
                return r.compare(t, e)
              }, n.sort(i);
              else if (3 === arguments.length) {
                (e = n.slice(arguments[1], arguments[2])).sort();
                var o = n.slice(0, arguments[1]).concat(e, n.slice(arguments[2], n.length));
                for (n.splice(0, n.length), t = 0; t < o.length; t++) n.push(o[t]);
              } else if (4 === arguments.length)
                for (e = n.slice(arguments[1], arguments[2]), r = arguments[3], i = function (t, e) {
                    return r.compare(t, e)
                  }, e.sort(i), o = n.slice(0, arguments[1]).concat(e, n.slice(arguments[2], n.length)), n.splice(0, n.length), t = 0; t < o.length; t++) n.push(o[t]);
            }, _c.asList = function (t) {
              for (var e = new rc, r = 0, i = t.length; r < i; r++) e.add(t[r]);
              return e
            };
            var yc = function () {},
              mc = {
                P: {
                  configurable: !0
                },
                L: {
                  configurable: !0
                },
                A: {
                  configurable: !0
                },
                FALSE: {
                  configurable: !0
                },
                TRUE: {
                  configurable: !0
                },
                DONTCARE: {
                  configurable: !0
                },
                SYM_FALSE: {
                  configurable: !0
                },
                SYM_TRUE: {
                  configurable: !0
                },
                SYM_DONTCARE: {
                  configurable: !0
                },
                SYM_P: {
                  configurable: !0
                },
                SYM_L: {
                  configurable: !0
                },
                SYM_A: {
                  configurable: !0
                }
              };
            mc.P.get = function () {
              return 0
            }, mc.L.get = function () {
              return 1
            }, mc.A.get = function () {
              return 2
            }, mc.FALSE.get = function () {
              return -1
            }, mc.TRUE.get = function () {
              return -2
            }, mc.DONTCARE.get = function () {
              return -3
            }, mc.SYM_FALSE.get = function () {
              return "F"
            }, mc.SYM_TRUE.get = function () {
              return "T"
            }, mc.SYM_DONTCARE.get = function () {
              return "*"
            }, mc.SYM_P.get = function () {
              return "0"
            }, mc.SYM_L.get = function () {
              return "1"
            }, mc.SYM_A.get = function () {
              return "2"
            }, yc.prototype.interfaces_ = function () {
              return []
            }, yc.prototype.getClass = function () {
              return yc
            }, yc.toDimensionSymbol = function (t) {
              switch (t) {
                case yc.FALSE:
                  return yc.SYM_FALSE;
                case yc.TRUE:
                  return yc.SYM_TRUE;
                case yc.DONTCARE:
                  return yc.SYM_DONTCARE;
                case yc.P:
                  return yc.SYM_P;
                case yc.L:
                  return yc.SYM_L;
                case yc.A:
                  return yc.SYM_A
              }
              throw new Ka("Unknown dimension value: " + t)
            }, yc.toDimensionValue = function (t) {
              switch (fu.toUpperCase(t)) {
                case yc.SYM_FALSE:
                  return yc.FALSE;
                case yc.SYM_TRUE:
                  return yc.TRUE;
                case yc.SYM_DONTCARE:
                  return yc.DONTCARE;
                case yc.SYM_P:
                  return yc.P;
                case yc.SYM_L:
                  return yc.L;
                case yc.SYM_A:
                  return yc.A
              }
              throw new Ka("Unknown dimension symbol: " + t)
            }, Object.defineProperties(yc, mc);
            var vc = function () {};
            vc.prototype.filter = function (t) {}, vc.prototype.interfaces_ = function () {
              return []
            }, vc.prototype.getClass = function () {
              return vc
            };
            var xc = function () {};
            xc.prototype.filter = function (t, e) {}, xc.prototype.isDone = function () {}, xc.prototype.isGeometryChanged = function () {}, xc.prototype.interfaces_ = function () {
              return []
            }, xc.prototype.getClass = function () {
              return xc
            };
            var wc = function (t) {
                function e(e, r) {
                  if (t.call(this, r), this._geometries = e || [], t.hasNullElements(this._geometries)) throw new Ka("geometries must not contain null elements")
                }
                t && (e.__proto__ = t), (e.prototype = Object.create(t && t.prototype)).constructor = e;
                var r = {
                  serialVersionUID: {
                    configurable: !0
                  }
                };
                return e.prototype.computeEnvelopeInternal = function () {
                  for (var t = new Lu, e = 0; e < this._geometries.length; e++) t.expandToInclude(this._geometries[e].getEnvelopeInternal());
                  return t
                }, e.prototype.getGeometryN = function (t) {
                  return this._geometries[t]
                }, e.prototype.getSortIndex = function () {
                  return t.SORTINDEX_GEOMETRYCOLLECTION
                }, e.prototype.getCoordinates = function () {
                  for (var t = new Array(this.getNumPoints()).fill(null), e = -1, r = 0; r < this._geometries.length; r++)
                    for (var i = this._geometries[r].getCoordinates(), n = 0; n < i.length; n++) t[++e] = i[n];
                  return t
                }, e.prototype.getArea = function () {
                  for (var t = 0, e = 0; e < this._geometries.length; e++) t += this._geometries[e].getArea();
                  return t
                }, e.prototype.equalsExact = function () {
                  if (2 === arguments.length) {
                    var e = arguments[0],
                      r = arguments[1];
                    if (!this.isEquivalentClass(e)) return !1;
                    var i = e;
                    if (this._geometries.length !== i._geometries.length) return !1;
                    for (var n = 0; n < this._geometries.length; n++)
                      if (!this._geometries[n].equalsExact(i._geometries[n], r)) return !1;
                    return !0
                  }
                  return t.prototype.equalsExact.apply(this, arguments)
                }, e.prototype.normalize = function () {
                  for (var t = 0; t < this._geometries.length; t++) this._geometries[t].normalize();
                  _c.sort(this._geometries);
                }, e.prototype.getCoordinate = function () {
                  return this.isEmpty() ? null : this._geometries[0].getCoordinate()
                }, e.prototype.getBoundaryDimension = function () {
                  for (var t = yc.FALSE, e = 0; e < this._geometries.length; e++) t = Math.max(t, this._geometries[e].getBoundaryDimension());
                  return t
                }, e.prototype.getDimension = function () {
                  for (var t = yc.FALSE, e = 0; e < this._geometries.length; e++) t = Math.max(t, this._geometries[e].getDimension());
                  return t
                }, e.prototype.getLength = function () {
                  for (var t = 0, e = 0; e < this._geometries.length; e++) t += this._geometries[e].getLength();
                  return t
                }, e.prototype.getNumPoints = function () {
                  for (var t = 0, e = 0; e < this._geometries.length; e++) t += this._geometries[e].getNumPoints();
                  return t
                }, e.prototype.getNumGeometries = function () {
                  return this._geometries.length
                }, e.prototype.reverse = function () {
                  for (var t = this._geometries.length, e = new Array(t).fill(null), r = 0; r < this._geometries.length; r++) e[r] = this._geometries[r].reverse();
                  return this.getFactory().createGeometryCollection(e)
                }, e.prototype.compareToSameClass = function () {
                  if (1 === arguments.length) {
                    var t = arguments[0],
                      e = new Mn(_c.asList(this._geometries)),
                      r = new Mn(_c.asList(t._geometries));
                    return this.compare(e, r)
                  }
                  if (2 === arguments.length) {
                    for (var i = arguments[0], n = arguments[1], o = i, s = this.getNumGeometries(), a = o.getNumGeometries(), u = 0; u < s && u < a;) {
                      var c = this.getGeometryN(u),
                        h = o.getGeometryN(u),
                        l = c.compareToSameClass(h, n);
                      if (0 !== l) return l;
                      u++;
                    }
                    return u < s ? 1 : u < a ? -1 : 0
                  }
                }, e.prototype.apply = function () {
                  if (uu(arguments[0], Xu))
                    for (var t = arguments[0], e = 0; e < this._geometries.length; e++) this._geometries[e].apply(t);
                  else if (uu(arguments[0], xc)) {
                    var r = arguments[0];
                    if (0 === this._geometries.length) return null;
                    for (var i = 0; i < this._geometries.length && (this._geometries[i].apply(r), !r.isDone()); i++);
                    r.isGeometryChanged() && this.geometryChanged();
                  } else if (uu(arguments[0], vc)) {
                    var n = arguments[0];
                    n.filter(this);
                    for (var o = 0; o < this._geometries.length; o++) this._geometries[o].apply(n);
                  } else if (uu(arguments[0], Uu)) {
                    var s = arguments[0];
                    s.filter(this);
                    for (var a = 0; a < this._geometries.length; a++) this._geometries[a].apply(s);
                  }
                }, e.prototype.getBoundary = function () {
                  return this.checkNotGeometryCollection(this), Ru.shouldNeverReachHere(), null
                }, e.prototype.clone = function () {
                  var e = t.prototype.clone.call(this);
                  e._geometries = new Array(this._geometries.length).fill(null);
                  for (var r = 0; r < this._geometries.length; r++) e._geometries[r] = this._geometries[r].clone();
                  return e
                }, e.prototype.getGeometryType = function () {
                  return "GeometryCollection"
                }, e.prototype.copy = function () {
                  for (var t = new Array(this._geometries.length).fill(null), r = 0; r < t.length; r++) t[r] = this._geometries[r].copy();
                  return new e(t, this._factory)
                }, e.prototype.isEmpty = function () {
                  for (var t = 0; t < this._geometries.length; t++)
                    if (!this._geometries[t].isEmpty()) return !1;
                  return !0
                }, e.prototype.interfaces_ = function () {
                  return []
                }, e.prototype.getClass = function () {
                  return e
                }, r.serialVersionUID.get = function () {
                  return -0x4f07bcb1f857d800
                }, Object.defineProperties(e, r), e
              }(qu),
              bc = function (t) {
                function e() {
                  t.apply(this, arguments);
                }
                t && (e.__proto__ = t), (e.prototype = Object.create(t && t.prototype)).constructor = e;
                var r = {
                  serialVersionUID: {
                    configurable: !0
                  }
                };
                return e.prototype.getSortIndex = function () {
                  return qu.SORTINDEX_MULTILINESTRING
                }, e.prototype.equalsExact = function () {
                  if (2 === arguments.length) {
                    var e = arguments[0],
                      r = arguments[1];
                    return !!this.isEquivalentClass(e) && t.prototype.equalsExact.call(this, e, r)
                  }
                  return t.prototype.equalsExact.apply(this, arguments)
                }, e.prototype.getBoundaryDimension = function () {
                  return this.isClosed() ? yc.FALSE : 0
                }, e.prototype.isClosed = function () {
                  if (this.isEmpty()) return !1;
                  for (var t = 0; t < this._geometries.length; t++)
                    if (!this._geometries[t].isClosed()) return !1;
                  return !0
                }, e.prototype.getDimension = function () {
                  return 1
                }, e.prototype.reverse = function () {
                  for (var t = this._geometries.length, e = new Array(t).fill(null), r = 0; r < this._geometries.length; r++) e[t - 1 - r] = this._geometries[r].reverse();
                  return this.getFactory().createMultiLineString(e)
                }, e.prototype.getBoundary = function () {
                  return new Ec(this).getBoundary()
                }, e.prototype.getGeometryType = function () {
                  return "MultiLineString"
                }, e.prototype.copy = function () {
                  for (var t = new Array(this._geometries.length).fill(null), r = 0; r < t.length; r++) t[r] = this._geometries[r].copy();
                  return new e(t, this._factory)
                }, e.prototype.interfaces_ = function () {
                  return [dc]
                }, e.prototype.getClass = function () {
                  return e
                }, r.serialVersionUID.get = function () {
                  return 0x7155d2ab4afa8000
                }, Object.defineProperties(e, r), e
              }(wc),
              Ec = function () {
                if (this._geom = null, this._geomFact = null, this._bnRule = null, this._endpointMap = null, 1 === arguments.length) {
                  var t = arguments[0],
                    e = Zu.MOD2_BOUNDARY_RULE;
                  this._geom = t, this._geomFact = t.getFactory(), this._bnRule = e;
                } else if (2 === arguments.length) {
                  var r = arguments[0],
                    i = arguments[1];
                  this._geom = r, this._geomFact = r.getFactory(), this._bnRule = i;
                }
              };
            Ec.prototype.boundaryMultiLineString = function (t) {
              if (this._geom.isEmpty()) return this.getEmptyMultiPoint();
              var e = this.computeBoundaryCoordinates(t);
              return 1 === e.length ? this._geomFact.createPoint(e[0]) : this._geomFact.createMultiPointFromCoords(e)
            }, Ec.prototype.getBoundary = function () {
              return this._geom instanceof Mc ? this.boundaryLineString(this._geom) : this._geom instanceof bc ? this.boundaryMultiLineString(this._geom) : this._geom.getBoundary()
            }, Ec.prototype.boundaryLineString = function (t) {
              return this._geom.isEmpty() ? this.getEmptyMultiPoint() : t.isClosed() ? this._bnRule.isInBoundary(2) ? t.getStartPoint() : this._geomFact.createMultiPoint() : this._geomFact.createMultiPoint([t.getStartPoint(), t.getEndPoint()])
            }, Ec.prototype.getEmptyMultiPoint = function () {
              return this._geomFact.createMultiPoint()
            }, Ec.prototype.computeBoundaryCoordinates = function (t) {
              var e = new rc;
              this._endpointMap = new Cn;
              for (var r = 0; r < t.getNumGeometries(); r++) {
                var i = t.getGeometryN(r);
                0 !== i.getNumPoints() && (this.addEndpoint(i.getCoordinateN(0)), this.addEndpoint(i.getCoordinateN(i.getNumPoints() - 1)));
              }
              for (var n = this._endpointMap.entrySet().iterator(); n.hasNext();) {
                var o = n.next(),
                  s = o.getValue().count;
                this._bnRule.isInBoundary(s) && e.add(o.getKey());
              }
              return oc.toCoordinateArray(e)
            }, Ec.prototype.addEndpoint = function (t) {
              var e = this._endpointMap.get(t);
              null === e && (e = new Lc, this._endpointMap.put(t, e)), e.count++;
            }, Ec.prototype.interfaces_ = function () {
              return []
            }, Ec.prototype.getClass = function () {
              return Ec
            }, Ec.getBoundary = function () {
              if (1 === arguments.length) {
                var t = arguments[0];
                return new Ec(t).getBoundary()
              }
              if (2 === arguments.length) {
                var e = arguments[0],
                  r = arguments[1];
                return new Ec(e, r).getBoundary()
              }
            };
            var Lc = function () {
              this.count = null;
            };
            Lc.prototype.interfaces_ = function () {
              return []
            }, Lc.prototype.getClass = function () {
              return Lc
            };
            var Sc = function () {},
              Cc = {
                NEWLINE: {
                  configurable: !0
                },
                SIMPLE_ORDINATE_FORMAT: {
                  configurable: !0
                }
              };
            Sc.prototype.interfaces_ = function () {
              return []
            }, Sc.prototype.getClass = function () {
              return Sc
            }, Sc.chars = function (t, e) {
              for (var r = new Array(e).fill(null), i = 0; i < e; i++) r[i] = t;
              return String(r)
            }, Sc.getStackTrace = function () {
              if (1 === arguments.length) {
                var t = arguments[0],
                  e = new function () {},
                  r = new function () {}(e);
                return t.printStackTrace(r), e.toString()
              }
              if (2 === arguments.length) {
                for (var i = arguments[0], n = arguments[1], o = "", s = new function () {}(new function () {}(Sc.getStackTrace(i))), a = 0; a < n; a++) try {
                  o += s.readLine() + Sc.NEWLINE;
                } catch (t) {
                  if (!(t instanceof Tn)) throw t;
                  Ru.shouldNeverReachHere();
                }
                return o
              }
            }, Sc.split = function (t, e) {
              for (var r = e.length, i = new rc, n = "" + t, o = n.indexOf(e); o >= 0;) {
                var s = n.substring(0, o);
                i.add(s), o = (n = n.substring(o + r)).indexOf(e);
              }
              n.length > 0 && i.add(n);
              for (var a = new Array(i.size()).fill(null), u = 0; u < a.length; u++) a[u] = i.get(u);
              return a
            }, Sc.toString = function () {
              if (1 === arguments.length) {
                var t = arguments[0];
                return Sc.SIMPLE_ORDINATE_FORMAT.format(t)
              }
            }, Sc.spaces = function (t) {
              return Sc.chars(" ", t)
            }, Cc.NEWLINE.get = function () {
              return bu.getProperty("line.separator")
            }, Cc.SIMPLE_ORDINATE_FORMAT.get = function () {
              return new function () {}("0.#")
            }, Object.defineProperties(Sc, Cc);
            var Ic = function () {};
            Ic.prototype.interfaces_ = function () {
              return []
            }, Ic.prototype.getClass = function () {
              return Ic
            }, Ic.copyCoord = function (t, e, r, i) {
              for (var n = Math.min(t.getDimension(), r.getDimension()), o = 0; o < n; o++) r.setOrdinate(i, o, t.getOrdinate(e, o));
            }, Ic.isRing = function (t) {
              var e = t.size();
              return 0 === e || !(e <= 3) && t.getOrdinate(0, mu.X) === t.getOrdinate(e - 1, mu.X) && t.getOrdinate(0, mu.Y) === t.getOrdinate(e - 1, mu.Y)
            }, Ic.isEqual = function (t, e) {
              var r = t.size();
              if (r !== e.size()) return !1;
              for (var i = Math.min(t.getDimension(), e.getDimension()), n = 0; n < r; n++)
                for (var o = 0; o < i; o++) {
                  var s = t.getOrdinate(n, o),
                    a = e.getOrdinate(n, o);
                  if (!(t.getOrdinate(n, o) === e.getOrdinate(n, o) || Ja.isNaN(s) && Ja.isNaN(a))) return !1
                }
              return !0
            }, Ic.extend = function (t, e, r) {
              var i = t.create(r, e.getDimension()),
                n = e.size();
              if (Ic.copy(e, 0, i, 0, n), n > 0)
                for (var o = n; o < r; o++) Ic.copy(e, n - 1, i, o, 1);
              return i
            }, Ic.reverse = function (t) {
              for (var e = t.size() - 1, r = Math.trunc(e / 2), i = 0; i <= r; i++) Ic.swap(t, i, e - i);
            }, Ic.swap = function (t, e, r) {
              if (e === r) return null;
              for (var i = 0; i < t.getDimension(); i++) {
                var n = t.getOrdinate(e, i);
                t.setOrdinate(e, i, t.getOrdinate(r, i)), t.setOrdinate(r, i, n);
              }
            }, Ic.copy = function (t, e, r, i, n) {
              for (var o = 0; o < n; o++) Ic.copyCoord(t, e + o, r, i + o);
            }, Ic.toString = function () {
              if (1 === arguments.length) {
                var t = arguments[0],
                  e = t.size();
                if (0 === e) return "()";
                var r = t.getDimension(),
                  i = new lu;
                i.append("(");
                for (var n = 0; n < e; n++) {
                  n > 0 && i.append(" ");
                  for (var o = 0; o < r; o++) o > 0 && i.append(","), i.append(Sc.toString(t.getOrdinate(n, o)));
                }
                return i.append(")"), i.toString()
              }
            }, Ic.ensureValidRing = function (t, e) {
              var r = e.size();
              return 0 === r ? e : r <= 3 ? Ic.createClosedRing(t, e, 4) : e.getOrdinate(0, mu.X) === e.getOrdinate(r - 1, mu.X) && e.getOrdinate(0, mu.Y) === e.getOrdinate(r - 1, mu.Y) ? e : Ic.createClosedRing(t, e, r + 1)
            }, Ic.createClosedRing = function (t, e, r) {
              var i = t.create(r, e.getDimension()),
                n = e.size();
              Ic.copy(e, 0, i, 0, n);
              for (var o = n; o < r; o++) Ic.copy(e, 0, i, o, 1);
              return i
            };
            var Mc = function (t) {
                function e(e, r) {
                  t.call(this, r), this._points = null, this.init(e);
                }
                t && (e.__proto__ = t), (e.prototype = Object.create(t && t.prototype)).constructor = e;
                var r = {
                  serialVersionUID: {
                    configurable: !0
                  }
                };
                return e.prototype.computeEnvelopeInternal = function () {
                  return this.isEmpty() ? new Lu : this._points.expandEnvelope(new Lu)
                }, e.prototype.isRing = function () {
                  return this.isClosed() && this.isSimple()
                }, e.prototype.getSortIndex = function () {
                  return t.SORTINDEX_LINESTRING
                }, e.prototype.getCoordinates = function () {
                  return this._points.toCoordinateArray()
                }, e.prototype.equalsExact = function () {
                  if (2 === arguments.length) {
                    var e = arguments[0],
                      r = arguments[1];
                    if (!this.isEquivalentClass(e)) return !1;
                    var i = e;
                    if (this._points.size() !== i._points.size()) return !1;
                    for (var n = 0; n < this._points.size(); n++)
                      if (!this.equal(this._points.getCoordinate(n), i._points.getCoordinate(n), r)) return !1;
                    return !0
                  }
                  return t.prototype.equalsExact.apply(this, arguments)
                }, e.prototype.normalize = function () {
                  for (var t = 0; t < Math.trunc(this._points.size() / 2); t++) {
                    var e = this._points.size() - 1 - t;
                    if (!this._points.getCoordinate(t).equals(this._points.getCoordinate(e))) return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e)) > 0 && Ic.reverse(this._points), null
                  }
                }, e.prototype.getCoordinate = function () {
                  return this.isEmpty() ? null : this._points.getCoordinate(0)
                }, e.prototype.getBoundaryDimension = function () {
                  return this.isClosed() ? yc.FALSE : 0
                }, e.prototype.isClosed = function () {
                  return !this.isEmpty() && this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints() - 1))
                }, e.prototype.getEndPoint = function () {
                  return this.isEmpty() ? null : this.getPointN(this.getNumPoints() - 1)
                }, e.prototype.getDimension = function () {
                  return 1
                }, e.prototype.getLength = function () {
                  return zu.computeLength(this._points)
                }, e.prototype.getNumPoints = function () {
                  return this._points.size()
                }, e.prototype.reverse = function () {
                  var t = this._points.copy();
                  return Ic.reverse(t), this.getFactory().createLineString(t)
                }, e.prototype.compareToSameClass = function () {
                  if (1 === arguments.length) {
                    for (var t = arguments[0], e = 0, r = 0; e < this._points.size() && r < t._points.size();) {
                      var i = this._points.getCoordinate(e).compareTo(t._points.getCoordinate(r));
                      if (0 !== i) return i;
                      e++, r++;
                    }
                    return e < this._points.size() ? 1 : r < t._points.size() ? -1 : 0
                  }
                  if (2 === arguments.length) {
                    var n = arguments[0];
                    return arguments[1].compare(this._points, n._points)
                  }
                }, e.prototype.apply = function () {
                  if (uu(arguments[0], Xu))
                    for (var t = arguments[0], e = 0; e < this._points.size(); e++) t.filter(this._points.getCoordinate(e));
                  else if (uu(arguments[0], xc)) {
                    var r = arguments[0];
                    if (0 === this._points.size()) return null;
                    for (var i = 0; i < this._points.size() && (r.filter(this._points, i), !r.isDone()); i++);
                    r.isGeometryChanged() && this.geometryChanged();
                  } else uu(arguments[0], vc) ? arguments[0].filter(this) : uu(arguments[0], Uu) && arguments[0].filter(this);
                }, e.prototype.getBoundary = function () {
                  return new Ec(this).getBoundary()
                }, e.prototype.isEquivalentClass = function (t) {
                  return t instanceof e
                }, e.prototype.clone = function () {
                  var e = t.prototype.clone.call(this);
                  return e._points = this._points.clone(), e
                }, e.prototype.getCoordinateN = function (t) {
                  return this._points.getCoordinate(t)
                }, e.prototype.getGeometryType = function () {
                  return "LineString"
                }, e.prototype.copy = function () {
                  return new e(this._points.copy(), this._factory)
                }, e.prototype.getCoordinateSequence = function () {
                  return this._points
                }, e.prototype.isEmpty = function () {
                  return 0 === this._points.size()
                }, e.prototype.init = function (t) {
                  if (null === t && (t = this.getFactory().getCoordinateSequenceFactory().create([])), 1 === t.size()) throw new Ka("Invalid number of points in LineString (found " + t.size() + " - must be 0 or >= 2)");
                  this._points = t;
                }, e.prototype.isCoordinate = function (t) {
                  for (var e = 0; e < this._points.size(); e++)
                    if (this._points.getCoordinate(e).equals(t)) return !0;
                  return !1
                }, e.prototype.getStartPoint = function () {
                  return this.isEmpty() ? null : this.getPointN(0)
                }, e.prototype.getPointN = function (t) {
                  return this.getFactory().createPoint(this._points.getCoordinate(t))
                }, e.prototype.interfaces_ = function () {
                  return [dc]
                }, e.prototype.getClass = function () {
                  return e
                }, r.serialVersionUID.get = function () {
                  return 0x2b2b51ba435c8e00
                }, Object.defineProperties(e, r), e
              }(qu),
              Tc = function () {};
            Tc.prototype.interfaces_ = function () {
              return []
            }, Tc.prototype.getClass = function () {
              return Tc
            };
            var Pc = function (t) {
                function e(e, r) {
                  t.call(this, r), this._coordinates = e || null, this.init(this._coordinates);
                }
                t && (e.__proto__ = t), (e.prototype = Object.create(t && t.prototype)).constructor = e;
                var r = {
                  serialVersionUID: {
                    configurable: !0
                  }
                };
                return e.prototype.computeEnvelopeInternal = function () {
                  if (this.isEmpty()) return new Lu;
                  var t = new Lu;
                  return t.expandToInclude(this._coordinates.getX(0), this._coordinates.getY(0)), t
                }, e.prototype.getSortIndex = function () {
                  return t.SORTINDEX_POINT
                }, e.prototype.getCoordinates = function () {
                  return this.isEmpty() ? [] : [this.getCoordinate()]
                }, e.prototype.equalsExact = function () {
                  if (2 === arguments.length) {
                    var e = arguments[0],
                      r = arguments[1];
                    return !!this.isEquivalentClass(e) && (!(!this.isEmpty() || !e.isEmpty()) || this.isEmpty() === e.isEmpty() && this.equal(e.getCoordinate(), this.getCoordinate(), r))
                  }
                  return t.prototype.equalsExact.apply(this, arguments)
                }, e.prototype.normalize = function () {}, e.prototype.getCoordinate = function () {
                  return 0 !== this._coordinates.size() ? this._coordinates.getCoordinate(0) : null
                }, e.prototype.getBoundaryDimension = function () {
                  return yc.FALSE
                }, e.prototype.getDimension = function () {
                  return 0
                }, e.prototype.getNumPoints = function () {
                  return this.isEmpty() ? 0 : 1
                }, e.prototype.reverse = function () {
                  return this.copy()
                }, e.prototype.getX = function () {
                  if (null === this.getCoordinate()) throw new Error("getX called on empty Point");
                  return this.getCoordinate().x
                }, e.prototype.compareToSameClass = function () {
                  if (1 === arguments.length) {
                    var t = arguments[0];
                    return this.getCoordinate().compareTo(t.getCoordinate())
                  }
                  if (2 === arguments.length) {
                    var e = arguments[0];
                    return arguments[1].compare(this._coordinates, e._coordinates)
                  }
                }, e.prototype.apply = function () {
                  if (uu(arguments[0], Xu)) {
                    var t = arguments[0];
                    if (this.isEmpty()) return null;
                    t.filter(this.getCoordinate());
                  } else if (uu(arguments[0], xc)) {
                    var e = arguments[0];
                    if (this.isEmpty()) return null;
                    e.filter(this._coordinates, 0), e.isGeometryChanged() && this.geometryChanged();
                  } else uu(arguments[0], vc) ? arguments[0].filter(this) : uu(arguments[0], Uu) && arguments[0].filter(this);
                }, e.prototype.getBoundary = function () {
                  return this.getFactory().createGeometryCollection(null)
                }, e.prototype.clone = function () {
                  var e = t.prototype.clone.call(this);
                  return e._coordinates = this._coordinates.clone(), e
                }, e.prototype.getGeometryType = function () {
                  return "Point"
                }, e.prototype.copy = function () {
                  return new e(this._coordinates.copy(), this._factory)
                }, e.prototype.getCoordinateSequence = function () {
                  return this._coordinates
                }, e.prototype.getY = function () {
                  if (null === this.getCoordinate()) throw new Error("getY called on empty Point");
                  return this.getCoordinate().y
                }, e.prototype.isEmpty = function () {
                  return 0 === this._coordinates.size()
                }, e.prototype.init = function (t) {
                  null === t && (t = this.getFactory().getCoordinateSequenceFactory().create([])), Ru.isTrue(t.size() <= 1), this._coordinates = t;
                }, e.prototype.isSimple = function () {
                  return !0
                }, e.prototype.interfaces_ = function () {
                  return [Tc]
                }, e.prototype.getClass = function () {
                  return e
                }, r.serialVersionUID.get = function () {
                  return 0x44077bad161cbc00
                }, Object.defineProperties(e, r), e
              }(qu),
              Dc = function () {};
            Dc.prototype.interfaces_ = function () {
              return []
            }, Dc.prototype.getClass = function () {
              return Dc
            };
            var Nc = function (t) {
                function e(e, r, i) {
                  if (t.call(this, i), this._shell = null, this._holes = null, null === e && (e = this.getFactory().createLinearRing()), null === r && (r = []), t.hasNullElements(r)) throw new Ka("holes must not contain null elements");
                  if (e.isEmpty() && t.hasNonEmptyElements(r)) throw new Ka("shell is empty but holes are not");
                  this._shell = e, this._holes = r;
                }
                t && (e.__proto__ = t), (e.prototype = Object.create(t && t.prototype)).constructor = e;
                var r = {
                  serialVersionUID: {
                    configurable: !0
                  }
                };
                return e.prototype.computeEnvelopeInternal = function () {
                  return this._shell.getEnvelopeInternal()
                }, e.prototype.getSortIndex = function () {
                  return t.SORTINDEX_POLYGON
                }, e.prototype.getCoordinates = function () {
                  if (this.isEmpty()) return [];
                  for (var t = new Array(this.getNumPoints()).fill(null), e = -1, r = this._shell.getCoordinates(), i = 0; i < r.length; i++) t[++e] = r[i];
                  for (var n = 0; n < this._holes.length; n++)
                    for (var o = this._holes[n].getCoordinates(), s = 0; s < o.length; s++) t[++e] = o[s];
                  return t
                }, e.prototype.getArea = function () {
                  var t = 0;
                  t += Math.abs(zu.signedArea(this._shell.getCoordinateSequence()));
                  for (var e = 0; e < this._holes.length; e++) t -= Math.abs(zu.signedArea(this._holes[e].getCoordinateSequence()));
                  return t
                }, e.prototype.isRectangle = function () {
                  if (0 !== this.getNumInteriorRing()) return !1;
                  if (null === this._shell) return !1;
                  if (5 !== this._shell.getNumPoints()) return !1;
                  for (var t = this._shell.getCoordinateSequence(), e = this.getEnvelopeInternal(), r = 0; r < 5; r++) {
                    var i = t.getX(r);
                    if (i !== e.getMinX() && i !== e.getMaxX()) return !1;
                    var n = t.getY(r);
                    if (n !== e.getMinY() && n !== e.getMaxY()) return !1
                  }
                  for (var o = t.getX(0), s = t.getY(0), a = 1; a <= 4; a++) {
                    var u = t.getX(a),
                      c = t.getY(a);
                    if (u !== o == (c !== s)) return !1;
                    o = u, s = c;
                  }
                  return !0
                }, e.prototype.equalsExact = function () {
                  if (2 === arguments.length) {
                    var e = arguments[0],
                      r = arguments[1];
                    if (!this.isEquivalentClass(e)) return !1;
                    var i = e,
                      n = this._shell,
                      o = i._shell;
                    if (!n.equalsExact(o, r)) return !1;
                    if (this._holes.length !== i._holes.length) return !1;
                    for (var s = 0; s < this._holes.length; s++)
                      if (!this._holes[s].equalsExact(i._holes[s], r)) return !1;
                    return !0
                  }
                  return t.prototype.equalsExact.apply(this, arguments)
                }, e.prototype.normalize = function () {
                  if (0 === arguments.length) {
                    this.normalize(this._shell, !0);
                    for (var t = 0; t < this._holes.length; t++) this.normalize(this._holes[t], !1);
                    _c.sort(this._holes);
                  } else if (2 === arguments.length) {
                    var e = arguments[0],
                      r = arguments[1];
                    if (e.isEmpty()) return null;
                    var i = new Array(e.getCoordinates().length - 1).fill(null);
                    bu.arraycopy(e.getCoordinates(), 0, i, 0, i.length);
                    var n = oc.minCoordinate(e.getCoordinates());
                    oc.scroll(i, n), bu.arraycopy(i, 0, e.getCoordinates(), 0, i.length), e.getCoordinates()[i.length] = i[0], zu.isCCW(e.getCoordinates()) === r && oc.reverse(e.getCoordinates());
                  }
                }, e.prototype.getCoordinate = function () {
                  return this._shell.getCoordinate()
                }, e.prototype.getNumInteriorRing = function () {
                  return this._holes.length
                }, e.prototype.getBoundaryDimension = function () {
                  return 1
                }, e.prototype.getDimension = function () {
                  return 2
                }, e.prototype.getLength = function () {
                  var t = 0;
                  t += this._shell.getLength();
                  for (var e = 0; e < this._holes.length; e++) t += this._holes[e].getLength();
                  return t
                }, e.prototype.getNumPoints = function () {
                  for (var t = this._shell.getNumPoints(), e = 0; e < this._holes.length; e++) t += this._holes[e].getNumPoints();
                  return t
                }, e.prototype.reverse = function () {
                  var t = this.copy();
                  t._shell = this._shell.copy().reverse(), t._holes = new Array(this._holes.length).fill(null);
                  for (var e = 0; e < this._holes.length; e++) t._holes[e] = this._holes[e].copy().reverse();
                  return t
                }, e.prototype.convexHull = function () {
                  return this.getExteriorRing().convexHull()
                }, e.prototype.compareToSameClass = function () {
                  if (1 === arguments.length) {
                    var t = arguments[0],
                      e = this._shell,
                      r = t._shell;
                    return e.compareToSameClass(r)
                  }
                  if (2 === arguments.length) {
                    var i = arguments[0],
                      n = arguments[1],
                      o = i,
                      s = this._shell,
                      a = o._shell,
                      u = s.compareToSameClass(a, n);
                    if (0 !== u) return u;
                    for (var c = this.getNumInteriorRing(), h = o.getNumInteriorRing(), l = 0; l < c && l < h;) {
                      var p = this.getInteriorRingN(l),
                        f = o.getInteriorRingN(l),
                        d = p.compareToSameClass(f, n);
                      if (0 !== d) return d;
                      l++;
                    }
                    return l < c ? 1 : l < h ? -1 : 0
                  }
                }, e.prototype.apply = function (t) {
                  if (uu(t, Xu)) {
                    this._shell.apply(t);
                    for (var e = 0; e < this._holes.length; e++) this._holes[e].apply(t);
                  } else if (uu(t, xc)) {
                    if (this._shell.apply(t), !t.isDone())
                      for (var r = 0; r < this._holes.length && (this._holes[r].apply(t), !t.isDone()); r++);
                    t.isGeometryChanged() && this.geometryChanged();
                  } else if (uu(t, vc)) t.filter(this);
                  else if (uu(t, Uu)) {
                    t.filter(this), this._shell.apply(t);
                    for (var i = 0; i < this._holes.length; i++) this._holes[i].apply(t);
                  }
                }, e.prototype.getBoundary = function () {
                  if (this.isEmpty()) return this.getFactory().createMultiLineString();
                  var t = new Array(this._holes.length + 1).fill(null);
                  t[0] = this._shell;
                  for (var e = 0; e < this._holes.length; e++) t[e + 1] = this._holes[e];
                  return t.length <= 1 ? this.getFactory().createLinearRing(t[0].getCoordinateSequence()) : this.getFactory().createMultiLineString(t)
                }, e.prototype.clone = function () {
                  var e = t.prototype.clone.call(this);
                  e._shell = this._shell.clone(), e._holes = new Array(this._holes.length).fill(null);
                  for (var r = 0; r < this._holes.length; r++) e._holes[r] = this._holes[r].clone();
                  return e
                }, e.prototype.getGeometryType = function () {
                  return "Polygon"
                }, e.prototype.copy = function () {
                  for (var t = this._shell.copy(), r = new Array(this._holes.length).fill(null), i = 0; i < r.length; i++) r[i] = this._holes[i].copy();
                  return new e(t, r, this._factory)
                }, e.prototype.getExteriorRing = function () {
                  return this._shell
                }, e.prototype.isEmpty = function () {
                  return this._shell.isEmpty()
                }, e.prototype.getInteriorRingN = function (t) {
                  return this._holes[t]
                }, e.prototype.interfaces_ = function () {
                  return [Dc]
                }, e.prototype.getClass = function () {
                  return e
                }, r.serialVersionUID.get = function () {
                  return -0x307ffefd8dc97200
                }, Object.defineProperties(e, r), e
              }(qu),
              Rc = function (t) {
                function e() {
                  t.apply(this, arguments);
                }
                t && (e.__proto__ = t), (e.prototype = Object.create(t && t.prototype)).constructor = e;
                var r = {
                  serialVersionUID: {
                    configurable: !0
                  }
                };
                return e.prototype.getSortIndex = function () {
                  return qu.SORTINDEX_MULTIPOINT
                }, e.prototype.isValid = function () {
                  return !0
                }, e.prototype.equalsExact = function () {
                  if (2 === arguments.length) {
                    var e = arguments[0],
                      r = arguments[1];
                    return !!this.isEquivalentClass(e) && t.prototype.equalsExact.call(this, e, r)
                  }
                  return t.prototype.equalsExact.apply(this, arguments)
                }, e.prototype.getCoordinate = function () {
                  if (1 === arguments.length) {
                    var e = arguments[0];
                    return this._geometries[e].getCoordinate()
                  }
                  return t.prototype.getCoordinate.apply(this, arguments)
                }, e.prototype.getBoundaryDimension = function () {
                  return yc.FALSE
                }, e.prototype.getDimension = function () {
                  return 0
                }, e.prototype.getBoundary = function () {
                  return this.getFactory().createGeometryCollection(null)
                }, e.prototype.getGeometryType = function () {
                  return "MultiPoint"
                }, e.prototype.copy = function () {
                  for (var t = new Array(this._geometries.length).fill(null), r = 0; r < t.length; r++) t[r] = this._geometries[r].copy();
                  return new e(t, this._factory)
                }, e.prototype.interfaces_ = function () {
                  return [Tc]
                }, e.prototype.getClass = function () {
                  return e
                }, r.serialVersionUID.get = function () {
                  return -0x6fb1ed4162e0fc00
                }, Object.defineProperties(e, r), e
              }(wc),
              Oc = function (t) {
                function e(e, r) {
                  e instanceof ru && r instanceof Kc && (e = r.getCoordinateSequenceFactory().create(e)), t.call(this, e, r), this.validateConstruction();
                }
                t && (e.__proto__ = t), (e.prototype = Object.create(t && t.prototype)).constructor = e;
                var r = {
                  MINIMUM_VALID_SIZE: {
                    configurable: !0
                  },
                  serialVersionUID: {
                    configurable: !0
                  }
                };
                return e.prototype.getSortIndex = function () {
                  return qu.SORTINDEX_LINEARRING
                }, e.prototype.getBoundaryDimension = function () {
                  return yc.FALSE
                }, e.prototype.isClosed = function () {
                  return !!this.isEmpty() || t.prototype.isClosed.call(this)
                }, e.prototype.reverse = function () {
                  var t = this._points.copy();
                  return Ic.reverse(t), this.getFactory().createLinearRing(t)
                }, e.prototype.validateConstruction = function () {
                  if (!this.isEmpty() && !t.prototype.isClosed.call(this)) throw new Ka("Points of LinearRing do not form a closed linestring");
                  if (this.getCoordinateSequence().size() >= 1 && this.getCoordinateSequence().size() < e.MINIMUM_VALID_SIZE) throw new Ka("Invalid number of points in LinearRing (found " + this.getCoordinateSequence().size() + " - must be 0 or >= 4)")
                }, e.prototype.getGeometryType = function () {
                  return "LinearRing"
                }, e.prototype.copy = function () {
                  return new e(this._points.copy(), this._factory)
                }, e.prototype.interfaces_ = function () {
                  return []
                }, e.prototype.getClass = function () {
                  return e
                }, r.MINIMUM_VALID_SIZE.get = function () {
                  return 4
                }, r.serialVersionUID.get = function () {
                  return -0x3b229e262367a600
                }, Object.defineProperties(e, r), e
              }(Mc),
              Ac = function (t) {
                function e() {
                  t.apply(this, arguments);
                }
                t && (e.__proto__ = t), (e.prototype = Object.create(t && t.prototype)).constructor = e;
                var r = {
                  serialVersionUID: {
                    configurable: !0
                  }
                };
                return e.prototype.getSortIndex = function () {
                  return qu.SORTINDEX_MULTIPOLYGON
                }, e.prototype.equalsExact = function () {
                  if (2 === arguments.length) {
                    var e = arguments[0],
                      r = arguments[1];
                    return !!this.isEquivalentClass(e) && t.prototype.equalsExact.call(this, e, r)
                  }
                  return t.prototype.equalsExact.apply(this, arguments)
                }, e.prototype.getBoundaryDimension = function () {
                  return 1
                }, e.prototype.getDimension = function () {
                  return 2
                }, e.prototype.reverse = function () {
                  for (var t = this._geometries.length, e = new Array(t).fill(null), r = 0; r < this._geometries.length; r++) e[r] = this._geometries[r].reverse();
                  return this.getFactory().createMultiPolygon(e)
                }, e.prototype.getBoundary = function () {
                  if (this.isEmpty()) return this.getFactory().createMultiLineString();
                  for (var t = new rc, e = 0; e < this._geometries.length; e++)
                    for (var r = this._geometries[e].getBoundary(), i = 0; i < r.getNumGeometries(); i++) t.add(r.getGeometryN(i));
                  var n = new Array(t.size()).fill(null);
                  return this.getFactory().createMultiLineString(t.toArray(n))
                }, e.prototype.getGeometryType = function () {
                  return "MultiPolygon"
                }, e.prototype.copy = function () {
                  for (var t = new Array(this._geometries.length).fill(null), r = 0; r < t.length; r++) t[r] = this._geometries[r].copy();
                  return new e(t, this._factory)
                }, e.prototype.interfaces_ = function () {
                  return [Dc]
                }, e.prototype.getClass = function () {
                  return e
                }, r.serialVersionUID.get = function () {
                  return -0x7a5aa1369171980
                }, Object.defineProperties(e, r), e
              }(wc),
              Fc = function (t) {
                this._factory = t || null, this._isUserDataCopied = !1;
              },
              kc = {
                NoOpGeometryOperation: {
                  configurable: !0
                },
                CoordinateOperation: {
                  configurable: !0
                },
                CoordinateSequenceOperation: {
                  configurable: !0
                }
              };
            Fc.prototype.setCopyUserData = function (t) {
              this._isUserDataCopied = t;
            }, Fc.prototype.edit = function (t, e) {
              if (null === t) return null;
              var r = this.editInternal(t, e);
              return this._isUserDataCopied && r.setUserData(t.getUserData()), r
            }, Fc.prototype.editInternal = function (t, e) {
              return null === this._factory && (this._factory = t.getFactory()), t instanceof wc ? this.editGeometryCollection(t, e) : t instanceof Nc ? this.editPolygon(t, e) : t instanceof Pc ? e.edit(t, this._factory) : t instanceof Mc ? e.edit(t, this._factory) : (Ru.shouldNeverReachHere("Unsupported Geometry class: " + t.getClass().getName()), null)
            }, Fc.prototype.editGeometryCollection = function (t, e) {
              for (var r = e.edit(t, this._factory), i = new rc, n = 0; n < r.getNumGeometries(); n++) {
                var o = this.edit(r.getGeometryN(n), e);
                null === o || o.isEmpty() || i.add(o);
              }
              return r.getClass() === Rc ? this._factory.createMultiPoint(i.toArray([])) : r.getClass() === bc ? this._factory.createMultiLineString(i.toArray([])) : r.getClass() === Ac ? this._factory.createMultiPolygon(i.toArray([])) : this._factory.createGeometryCollection(i.toArray([]))
            }, Fc.prototype.editPolygon = function (t, e) {
              var r = e.edit(t, this._factory);
              if (null === r && (r = this._factory.createPolygon(null)), r.isEmpty()) return r;
              var i = this.edit(r.getExteriorRing(), e);
              if (null === i || i.isEmpty()) return this._factory.createPolygon();
              for (var n = new rc, o = 0; o < r.getNumInteriorRing(); o++) {
                var s = this.edit(r.getInteriorRingN(o), e);
                null === s || s.isEmpty() || n.add(s);
              }
              return this._factory.createPolygon(i, n.toArray([]))
            }, Fc.prototype.interfaces_ = function () {
              return []
            }, Fc.prototype.getClass = function () {
              return Fc
            }, Fc.GeometryEditorOperation = function () {}, kc.NoOpGeometryOperation.get = function () {
              return Bc
            }, kc.CoordinateOperation.get = function () {
              return zc
            }, kc.CoordinateSequenceOperation.get = function () {
              return Vc
            }, Object.defineProperties(Fc, kc);
            var Bc = function () {};
            Bc.prototype.edit = function (t, e) {
              return t
            }, Bc.prototype.interfaces_ = function () {
              return [Fc.GeometryEditorOperation]
            }, Bc.prototype.getClass = function () {
              return Bc
            };
            var zc = function () {};
            zc.prototype.edit = function (t, e) {
              var r = this.editCoordinates(t.getCoordinates(), t);
              return null === r ? t : t instanceof Oc ? e.createLinearRing(r) : t instanceof Mc ? e.createLineString(r) : t instanceof Pc ? r.length > 0 ? e.createPoint(r[0]) : e.createPoint() : t
            }, zc.prototype.interfaces_ = function () {
              return [Fc.GeometryEditorOperation]
            }, zc.prototype.getClass = function () {
              return zc
            };
            var Vc = function () {};
            Vc.prototype.edit = function (t, e) {
              return t instanceof Oc ? e.createLinearRing(this.edit(t.getCoordinateSequence(), t)) : t instanceof Mc ? e.createLineString(this.edit(t.getCoordinateSequence(), t)) : t instanceof Pc ? e.createPoint(this.edit(t.getCoordinateSequence(), t)) : t
            }, Vc.prototype.interfaces_ = function () {
              return [Fc.GeometryEditorOperation]
            }, Vc.prototype.getClass = function () {
              return Vc
            };
            var Uc = function () {
                if (this._dimension = 3, this._coordinates = null, 1 === arguments.length) {
                  if (arguments[0] instanceof Array) this._coordinates = arguments[0], this._dimension = 3;
                  else if (Number.isInteger(arguments[0])) {
                    var t = arguments[0];
                    this._coordinates = new Array(t).fill(null);
                    for (var e = 0; e < t; e++) this._coordinates[e] = new ru;
                  } else if (uu(arguments[0], mu)) {
                    var r = arguments[0];
                    if (null === r) return this._coordinates = new Array(0).fill(null), null;
                    this._dimension = r.getDimension(), this._coordinates = new Array(r.size()).fill(null);
                    for (var i = 0; i < this._coordinates.length; i++) this._coordinates[i] = r.getCoordinateCopy(i);
                  }
                } else if (2 === arguments.length)
                  if (arguments[0] instanceof Array && Number.isInteger(arguments[1])) {
                    var n = arguments[0],
                      o = arguments[1];
                    this._coordinates = n, this._dimension = o, null === n && (this._coordinates = new Array(0).fill(null));
                  } else if (Number.isInteger(arguments[0]) && Number.isInteger(arguments[1])) {
                  var s = arguments[0],
                    a = arguments[1];
                  this._coordinates = new Array(s).fill(null), this._dimension = a;
                  for (var u = 0; u < s; u++) this._coordinates[u] = new ru;
                }
              },
              qc = {
                serialVersionUID: {
                  configurable: !0
                }
              };
            Uc.prototype.setOrdinate = function (t, e, r) {
              switch (e) {
                case mu.X:
                  this._coordinates[t].x = r;
                  break;
                case mu.Y:
                  this._coordinates[t].y = r;
                  break;
                case mu.Z:
                  this._coordinates[t].z = r;
                  break;
                default:
                  throw new Ka("invalid ordinateIndex")
              }
            }, Uc.prototype.size = function () {
              return this._coordinates.length
            }, Uc.prototype.getOrdinate = function (t, e) {
              switch (e) {
                case mu.X:
                  return this._coordinates[t].x;
                case mu.Y:
                  return this._coordinates[t].y;
                case mu.Z:
                  return this._coordinates[t].z
              }
              return Ja.NaN
            }, Uc.prototype.getCoordinate = function () {
              if (1 === arguments.length) {
                var t = arguments[0];
                return this._coordinates[t]
              }
              if (2 === arguments.length) {
                var e = arguments[0],
                  r = arguments[1];
                r.x = this._coordinates[e].x, r.y = this._coordinates[e].y, r.z = this._coordinates[e].z;
              }
            }, Uc.prototype.getCoordinateCopy = function (t) {
              return new ru(this._coordinates[t])
            }, Uc.prototype.getDimension = function () {
              return this._dimension
            }, Uc.prototype.getX = function (t) {
              return this._coordinates[t].x
            }, Uc.prototype.clone = function () {
              for (var t = new Array(this.size()).fill(null), e = 0; e < this._coordinates.length; e++) t[e] = this._coordinates[e].clone();
              return new Uc(t, this._dimension)
            }, Uc.prototype.expandEnvelope = function (t) {
              for (var e = 0; e < this._coordinates.length; e++) t.expandToInclude(this._coordinates[e]);
              return t
            }, Uc.prototype.copy = function () {
              for (var t = new Array(this.size()).fill(null), e = 0; e < this._coordinates.length; e++) t[e] = this._coordinates[e].copy();
              return new Uc(t, this._dimension)
            }, Uc.prototype.toString = function () {
              if (this._coordinates.length > 0) {
                var t = new lu(17 * this._coordinates.length);
                t.append("("), t.append(this._coordinates[0]);
                for (var e = 1; e < this._coordinates.length; e++) t.append(", "), t.append(this._coordinates[e]);
                return t.append(")"), t.toString()
              }
              return "()"
            }, Uc.prototype.getY = function (t) {
              return this._coordinates[t].y
            }, Uc.prototype.toCoordinateArray = function () {
              return this._coordinates
            }, Uc.prototype.interfaces_ = function () {
              return [mu, yn]
            }, Uc.prototype.getClass = function () {
              return Uc
            }, qc.serialVersionUID.get = function () {
              return -0xcb44a778db18e00
            }, Object.defineProperties(Uc, qc);
            var jc = function () {},
              Gc = {
                serialVersionUID: {
                  configurable: !0
                },
                instanceObject: {
                  configurable: !0
                }
              };
            jc.prototype.readResolve = function () {
              return jc.instance()
            }, jc.prototype.create = function () {
              if (1 === arguments.length) {
                if (arguments[0] instanceof Array) {
                  var t = arguments[0];
                  return new Uc(t)
                }
                if (uu(arguments[0], mu)) {
                  var e = arguments[0];
                  return new Uc(e)
                }
              } else if (2 === arguments.length) {
                var r = arguments[0],
                  i = arguments[1];
                return i > 3 && (i = 3), i < 2 ? new Uc(r) : new Uc(r, i)
              }
            }, jc.prototype.interfaces_ = function () {
              return [ou, yn]
            }, jc.prototype.getClass = function () {
              return jc
            }, jc.instance = function () {
              return jc.instanceObject
            }, Gc.serialVersionUID.get = function () {
              return -0x38e49fa6cf6f2e00
            }, Gc.instanceObject.get = function () {
              return new jc
            }, Object.defineProperties(jc, Gc);
            var Xc = function (t) {
                function e() {
                  t.call(this), this.map_ = new Map;
                }
                return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.get = function (t) {
                  return this.map_.get(t) || null
                }, e.prototype.put = function (t, e) {
                  return this.map_.set(t, e), e
                }, e.prototype.values = function () {
                  for (var t = new rc, e = this.map_.values(), r = e.next(); !r.done;) t.add(r.value), r = e.next();
                  return t
                }, e.prototype.entrySet = function () {
                  var t = new lc;
                  return this.map_.entries().forEach(function (e) {
                    return t.add(e)
                  }), t
                }, e.prototype.size = function () {
                  return this.map_.size()
                }, e
              }(cc),
              Zc = function t() {
                if (this._modelType = null, this._scale = null, 0 === arguments.length) this._modelType = t.FLOATING;
                else if (1 === arguments.length)
                  if (arguments[0] instanceof Wc) {
                    var e = arguments[0];
                    this._modelType = e, e === t.FIXED && this.setScale(1);
                  } else if ("number" == typeof arguments[0]) {
                  var r = arguments[0];
                  this._modelType = t.FIXED, this.setScale(r);
                } else if (arguments[0] instanceof t) {
                  var i = arguments[0];
                  this._modelType = i._modelType, this._scale = i._scale;
                }
              },
              Yc = {
                serialVersionUID: {
                  configurable: !0
                },
                maximumPreciseValue: {
                  configurable: !0
                }
              };
            Zc.prototype.equals = function (t) {
              if (!(t instanceof Zc)) return !1;
              var e = t;
              return this._modelType === e._modelType && this._scale === e._scale
            }, Zc.prototype.compareTo = function (t) {
              var e = t,
                r = this.getMaximumSignificantDigits(),
                i = e.getMaximumSignificantDigits();
              return new pu(r).compareTo(new pu(i))
            }, Zc.prototype.getScale = function () {
              return this._scale
            }, Zc.prototype.isFloating = function () {
              return this._modelType === Zc.FLOATING || this._modelType === Zc.FLOATING_SINGLE
            }, Zc.prototype.getType = function () {
              return this._modelType
            }, Zc.prototype.toString = function () {
              var t = "UNKNOWN";
              return this._modelType === Zc.FLOATING ? t = "Floating" : this._modelType === Zc.FLOATING_SINGLE ? t = "Floating-Single" : this._modelType === Zc.FIXED && (t = "Fixed (Scale=" + this.getScale() + ")"), t
            }, Zc.prototype.makePrecise = function () {
              if ("number" == typeof arguments[0]) {
                var t = arguments[0];
                return Ja.isNaN(t) ? t : this._modelType === Zc.FLOATING_SINGLE ? t : this._modelType === Zc.FIXED ? Math.round(t * this._scale) / this._scale : t
              }
              if (arguments[0] instanceof ru) {
                var e = arguments[0];
                if (this._modelType === Zc.FLOATING) return null;
                e.x = this.makePrecise(e.x), e.y = this.makePrecise(e.y);
              }
            }, Zc.prototype.getMaximumSignificantDigits = function () {
              var t = 16;
              return this._modelType === Zc.FLOATING ? t = 16 : this._modelType === Zc.FLOATING_SINGLE ? t = 6 : this._modelType === Zc.FIXED && (t = 1 + Math.trunc(Math.ceil(Math.log(this.getScale()) / Math.log(10)))), t
            }, Zc.prototype.setScale = function (t) {
              this._scale = Math.abs(t);
            }, Zc.prototype.interfaces_ = function () {
              return [yn, $a]
            }, Zc.prototype.getClass = function () {
              return Zc
            }, Zc.mostPrecise = function (t, e) {
              return t.compareTo(e) >= 0 ? t : e
            }, Yc.serialVersionUID.get = function () {
              return 0x6bee6404e9a25c00
            }, Yc.maximumPreciseValue.get = function () {
              return 9007199254740992
            }, Object.defineProperties(Zc, Yc);
            var Wc = function t(e) {
                this._name = e || null, t.nameToTypeMap.put(e, this);
              },
              Hc = {
                serialVersionUID: {
                  configurable: !0
                },
                nameToTypeMap: {
                  configurable: !0
                }
              };
            Wc.prototype.readResolve = function () {
              return Wc.nameToTypeMap.get(this._name)
            }, Wc.prototype.toString = function () {
              return this._name
            }, Wc.prototype.interfaces_ = function () {
              return [yn]
            }, Wc.prototype.getClass = function () {
              return Wc
            }, Hc.serialVersionUID.get = function () {
              return -552860263173159e4
            }, Hc.nameToTypeMap.get = function () {
              return new Xc
            }, Object.defineProperties(Wc, Hc), Zc.Type = Wc, Zc.FIXED = new Wc("FIXED"), Zc.FLOATING = new Wc("FLOATING"), Zc.FLOATING_SINGLE = new Wc("FLOATING SINGLE");
            var Kc = function t() {
                this._precisionModel = new Zc, this._SRID = 0, this._coordinateSequenceFactory = t.getDefaultCoordinateSequenceFactory(), 0 === arguments.length || (1 === arguments.length ? uu(arguments[0], ou) ? this._coordinateSequenceFactory = arguments[0] : arguments[0] instanceof Zc && (this._precisionModel = arguments[0]) : 2 === arguments.length ? (this._precisionModel = arguments[0], this._SRID = arguments[1]) : 3 === arguments.length && (this._precisionModel = arguments[0], this._SRID = arguments[1], this._coordinateSequenceFactory = arguments[2]));
              },
              Jc = {
                serialVersionUID: {
                  configurable: !0
                }
              };
            Kc.prototype.toGeometry = function (t) {
              return t.isNull() ? this.createPoint(null) : t.getMinX() === t.getMaxX() && t.getMinY() === t.getMaxY() ? this.createPoint(new ru(t.getMinX(), t.getMinY())) : t.getMinX() === t.getMaxX() || t.getMinY() === t.getMaxY() ? this.createLineString([new ru(t.getMinX(), t.getMinY()), new ru(t.getMaxX(), t.getMaxY())]) : this.createPolygon(this.createLinearRing([new ru(t.getMinX(), t.getMinY()), new ru(t.getMinX(), t.getMaxY()), new ru(t.getMaxX(), t.getMaxY()), new ru(t.getMaxX(), t.getMinY()), new ru(t.getMinX(), t.getMinY())]), null)
            }, Kc.prototype.createLineString = function (t) {
              return t ? t instanceof Array ? new Mc(this.getCoordinateSequenceFactory().create(t), this) : uu(t, mu) ? new Mc(t, this) : void 0 : new Mc(this.getCoordinateSequenceFactory().create([]), this)
            }, Kc.prototype.createMultiLineString = function () {
              if (0 === arguments.length) return new bc(null, this);
              if (1 === arguments.length) {
                var t = arguments[0];
                return new bc(t, this)
              }
            }, Kc.prototype.buildGeometry = function (t) {
              for (var e = null, r = !1, i = !1, n = t.iterator(); n.hasNext();) {
                var o = n.next(),
                  s = o.getClass();
                null === e && (e = s), s !== e && (r = !0), o.isGeometryCollectionOrDerived() && (i = !0);
              }
              if (null === e) return this.createGeometryCollection();
              if (r || i) return this.createGeometryCollection(Kc.toGeometryArray(t));
              var a = t.iterator().next();
              if (t.size() > 1) {
                if (a instanceof Nc) return this.createMultiPolygon(Kc.toPolygonArray(t));
                if (a instanceof Mc) return this.createMultiLineString(Kc.toLineStringArray(t));
                if (a instanceof Pc) return this.createMultiPoint(Kc.toPointArray(t));
                Ru.shouldNeverReachHere("Unhandled class: " + a.getClass().getName());
              }
              return a
            }, Kc.prototype.createMultiPointFromCoords = function (t) {
              return this.createMultiPoint(null !== t ? this.getCoordinateSequenceFactory().create(t) : null)
            }, Kc.prototype.createPoint = function () {
              if (0 === arguments.length) return this.createPoint(this.getCoordinateSequenceFactory().create([]));
              if (1 === arguments.length) {
                if (arguments[0] instanceof ru) {
                  var t = arguments[0];
                  return this.createPoint(null !== t ? this.getCoordinateSequenceFactory().create([t]) : null)
                }
                if (uu(arguments[0], mu)) {
                  var e = arguments[0];
                  return new Pc(e, this)
                }
              }
            }, Kc.prototype.getCoordinateSequenceFactory = function () {
              return this._coordinateSequenceFactory
            }, Kc.prototype.createPolygon = function () {
              if (0 === arguments.length) return new Nc(null, null, this);
              if (1 === arguments.length) {
                if (uu(arguments[0], mu)) {
                  var t = arguments[0];
                  return this.createPolygon(this.createLinearRing(t))
                }
                if (arguments[0] instanceof Array) {
                  var e = arguments[0];
                  return this.createPolygon(this.createLinearRing(e))
                }
                if (arguments[0] instanceof Oc) {
                  var r = arguments[0];
                  return this.createPolygon(r, null)
                }
              } else if (2 === arguments.length) {
                var i = arguments[0],
                  n = arguments[1];
                return new Nc(i, n, this)
              }
            }, Kc.prototype.getSRID = function () {
              return this._SRID
            }, Kc.prototype.createGeometryCollection = function () {
              if (0 === arguments.length) return new wc(null, this);
              if (1 === arguments.length) {
                var t = arguments[0];
                return new wc(t, this)
              }
            }, Kc.prototype.createGeometry = function (t) {
              return new Fc(this).edit(t, {
                edit: function () {
                  if (2 === arguments.length) {
                    var t = arguments[0];
                    return this._coordinateSequenceFactory.create(t)
                  }
                }
              })
            }, Kc.prototype.getPrecisionModel = function () {
              return this._precisionModel
            }, Kc.prototype.createLinearRing = function () {
              if (0 === arguments.length) return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));
              if (1 === arguments.length) {
                if (arguments[0] instanceof Array) {
                  var t = arguments[0];
                  return this.createLinearRing(null !== t ? this.getCoordinateSequenceFactory().create(t) : null)
                }
                if (uu(arguments[0], mu)) {
                  var e = arguments[0];
                  return new Oc(e, this)
                }
              }
            }, Kc.prototype.createMultiPolygon = function () {
              if (0 === arguments.length) return new Ac(null, this);
              if (1 === arguments.length) {
                var t = arguments[0];
                return new Ac(t, this)
              }
            }, Kc.prototype.createMultiPoint = function () {
              if (0 === arguments.length) return new Rc(null, this);
              if (1 === arguments.length) {
                if (arguments[0] instanceof Array) {
                  var t = arguments[0];
                  return new Rc(t, this)
                }
                if (arguments[0] instanceof Array) {
                  var e = arguments[0];
                  return this.createMultiPoint(null !== e ? this.getCoordinateSequenceFactory().create(e) : null)
                }
                if (uu(arguments[0], mu)) {
                  var r = arguments[0];
                  if (null === r) return this.createMultiPoint(new Array(0).fill(null));
                  for (var i = new Array(r.size()).fill(null), n = 0; n < r.size(); n++) {
                    var o = this.getCoordinateSequenceFactory().create(1, r.getDimension());
                    Ic.copy(r, n, o, 0, 1), i[n] = this.createPoint(o);
                  }
                  return this.createMultiPoint(i)
                }
              }
            }, Kc.prototype.interfaces_ = function () {
              return [yn]
            }, Kc.prototype.getClass = function () {
              return Kc
            }, Kc.toMultiPolygonArray = function (t) {
              var e = new Array(t.size()).fill(null);
              return t.toArray(e)
            }, Kc.toGeometryArray = function (t) {
              if (null === t) return null;
              var e = new Array(t.size()).fill(null);
              return t.toArray(e)
            }, Kc.getDefaultCoordinateSequenceFactory = function () {
              return jc.instance()
            }, Kc.toMultiLineStringArray = function (t) {
              var e = new Array(t.size()).fill(null);
              return t.toArray(e)
            }, Kc.toLineStringArray = function (t) {
              var e = new Array(t.size()).fill(null);
              return t.toArray(e)
            }, Kc.toMultiPointArray = function (t) {
              var e = new Array(t.size()).fill(null);
              return t.toArray(e)
            }, Kc.toLinearRingArray = function (t) {
              var e = new Array(t.size()).fill(null);
              return t.toArray(e)
            }, Kc.toPointArray = function (t) {
              var e = new Array(t.size()).fill(null);
              return t.toArray(e)
            }, Kc.toPolygonArray = function (t) {
              var e = new Array(t.size()).fill(null);
              return t.toArray(e)
            }, Kc.createPointFromInternalCoord = function (t, e) {
              return e.getPrecisionModel().makePrecise(t), e.getFactory().createPoint(t)
            }, Jc.serialVersionUID.get = function () {
              return -0x5ea75f2051eeb400
            }, Object.defineProperties(Kc, Jc);
            var Qc = ["Point", "MultiPoint", "LineString", "MultiLineString", "Polygon", "MultiPolygon"],
              $c = function (t) {
                this.geometryFactory = t || new Kc;
              };
            $c.prototype.read = function (t) {
              var e, r = (e = "string" == typeof t ? JSON.parse(t) : t).type;
              if (!th[r]) throw new Error("Unknown GeoJSON type: " + e.type);
              return -1 !== Qc.indexOf(r) ? th[r].apply(this, [e.coordinates]) : "GeometryCollection" === r ? th[r].apply(this, [e.geometries]) : th[r].apply(this, [e])
            }, $c.prototype.write = function (t) {
              var e = t.getGeometryType();
              if (!eh[e]) throw new Error("Geometry is not supported");
              return eh[e].apply(this, [t])
            };
            var th = {
                Feature: function (t) {
                  var e = {};
                  for (var r in t) e[r] = t[r];
                  if (t.geometry) {
                    var i = t.geometry.type;
                    if (!th[i]) throw new Error("Unknown GeoJSON type: " + t.type);
                    e.geometry = this.read(t.geometry);
                  }
                  return t.bbox && (e.bbox = th.bbox.apply(this, [t.bbox])), e
                },
                FeatureCollection: function (t) {
                  var e = {};
                  if (t.features) {
                    e.features = [];
                    for (var r = 0; r < t.features.length; ++r) e.features.push(this.read(t.features[r]));
                  }
                  return t.bbox && (e.bbox = this.parse.bbox.apply(this, [t.bbox])), e
                },
                coordinates: function (t) {
                  for (var e = [], r = 0; r < t.length; ++r) {
                    var i = t[r];
                    e.push(new ru(i[0], i[1]));
                  }
                  return e
                },
                bbox: function (t) {
                  return this.geometryFactory.createLinearRing([new ru(t[0], t[1]), new ru(t[2], t[1]), new ru(t[2], t[3]), new ru(t[0], t[3]), new ru(t[0], t[1])])
                },
                Point: function (t) {
                  var e = new ru(t[0], t[1]);
                  return this.geometryFactory.createPoint(e)
                },
                MultiPoint: function (t) {
                  for (var e = [], r = 0; r < t.length; ++r) e.push(th.Point.apply(this, [t[r]]));
                  return this.geometryFactory.createMultiPoint(e)
                },
                LineString: function (t) {
                  var e = th.coordinates.apply(this, [t]);
                  return this.geometryFactory.createLineString(e)
                },
                MultiLineString: function (t) {
                  for (var e = [], r = 0; r < t.length; ++r) e.push(th.LineString.apply(this, [t[r]]));
                  return this.geometryFactory.createMultiLineString(e)
                },
                Polygon: function (t) {
                  for (var e = th.coordinates.apply(this, [t[0]]), r = this.geometryFactory.createLinearRing(e), i = [], n = 1; n < t.length; ++n) {
                    var o = t[n],
                      s = th.coordinates.apply(this, [o]),
                      a = this.geometryFactory.createLinearRing(s);
                    i.push(a);
                  }
                  return this.geometryFactory.createPolygon(r, i)
                },
                MultiPolygon: function (t) {
                  for (var e = [], r = 0; r < t.length; ++r) {
                    var i = t[r];
                    e.push(th.Polygon.apply(this, [i]));
                  }
                  return this.geometryFactory.createMultiPolygon(e)
                },
                GeometryCollection: function (t) {
                  for (var e = [], r = 0; r < t.length; ++r) {
                    var i = t[r];
                    e.push(this.read(i));
                  }
                  return this.geometryFactory.createGeometryCollection(e)
                }
              },
              eh = {
                coordinate: function (t) {
                  return [t.x, t.y]
                },
                Point: function (t) {
                  return {
                    type: "Point",
                    coordinates: eh.coordinate.apply(this, [t.getCoordinate()])
                  }
                },
                MultiPoint: function (t) {
                  for (var e = [], r = 0; r < t._geometries.length; ++r) {
                    var i = t._geometries[r],
                      n = eh.Point.apply(this, [i]);
                    e.push(n.coordinates);
                  }
                  return {
                    type: "MultiPoint",
                    coordinates: e
                  }
                },
                LineString: function (t) {
                  for (var e = [], r = t.getCoordinates(), i = 0; i < r.length; ++i) {
                    var n = r[i];
                    e.push(eh.coordinate.apply(this, [n]));
                  }
                  return {
                    type: "LineString",
                    coordinates: e
                  }
                },
                MultiLineString: function (t) {
                  for (var e = [], r = 0; r < t._geometries.length; ++r) {
                    var i = t._geometries[r],
                      n = eh.LineString.apply(this, [i]);
                    e.push(n.coordinates);
                  }
                  return {
                    type: "MultiLineString",
                    coordinates: e
                  }
                },
                Polygon: function (t) {
                  var e = [],
                    r = eh.LineString.apply(this, [t._shell]);
                  e.push(r.coordinates);
                  for (var i = 0; i < t._holes.length; ++i) {
                    var n = t._holes[i],
                      o = eh.LineString.apply(this, [n]);
                    e.push(o.coordinates);
                  }
                  return {
                    type: "Polygon",
                    coordinates: e
                  }
                },
                MultiPolygon: function (t) {
                  for (var e = [], r = 0; r < t._geometries.length; ++r) {
                    var i = t._geometries[r],
                      n = eh.Polygon.apply(this, [i]);
                    e.push(n.coordinates);
                  }
                  return {
                    type: "MultiPolygon",
                    coordinates: e
                  }
                },
                GeometryCollection: function (t) {
                  for (var e = [], r = 0; r < t._geometries.length; ++r) {
                    var i = t._geometries[r],
                      n = i.getGeometryType();
                    e.push(eh[n].apply(this, [i]));
                  }
                  return {
                    type: "GeometryCollection",
                    geometries: e
                  }
                }
              },
              rh = function (t) {
                this.geometryFactory = t || new Kc, this.precisionModel = this.geometryFactory.getPrecisionModel(), this.parser = new $c(this.geometryFactory);
              };
            rh.prototype.read = function (t) {
              var e = this.parser.read(t);
              return this.precisionModel.getType() === Zc.FIXED && this.reducePrecision(e), e
            }, rh.prototype.reducePrecision = function (t) {
              var e, r;
              if (t.coordinate) this.precisionModel.makePrecise(t.coordinate);
              else if (t.points)
                for (e = 0, r = t.points.length; e < r; e++) this.precisionModel.makePrecise(t.points[e]);
              else if (t.geometries)
                for (e = 0, r = t.geometries.length; e < r; e++) this.reducePrecision(t.geometries[e]);
            };
            var ih = function () {
              this.parser = new $c(this.geometryFactory);
            };
            ih.prototype.write = function (t) {
              return this.parser.write(t)
            };
            var nh = function () {},
              oh = {
                ON: {
                  configurable: !0
                },
                LEFT: {
                  configurable: !0
                },
                RIGHT: {
                  configurable: !0
                }
              };
            nh.prototype.interfaces_ = function () {
              return []
            }, nh.prototype.getClass = function () {
              return nh
            }, nh.opposite = function (t) {
              return t === nh.LEFT ? nh.RIGHT : t === nh.RIGHT ? nh.LEFT : t
            }, oh.ON.get = function () {
              return 0
            }, oh.LEFT.get = function () {
              return 1
            }, oh.RIGHT.get = function () {
              return 2
            }, Object.defineProperties(nh, oh), (Pn.prototype = new Error).name = "EmptyStackException", (Dn.prototype = new ec).add = function (t) {
              return this.array_.push(t), !0
            }, Dn.prototype.get = function (t) {
              if (t < 0 || t >= this.size()) throw new Error;
              return this.array_[t]
            }, Dn.prototype.push = function (t) {
              return this.array_.push(t), t
            }, Dn.prototype.pop = function (t) {
              if (0 === this.array_.length) throw new Pn;
              return this.array_.pop()
            }, Dn.prototype.peek = function () {
              if (0 === this.array_.length) throw new Pn;
              return this.array_[this.array_.length - 1]
            }, Dn.prototype.empty = function () {
              return 0 === this.array_.length
            }, Dn.prototype.isEmpty = function () {
              return this.empty()
            }, Dn.prototype.search = function (t) {
              return this.array_.indexOf(t)
            }, Dn.prototype.size = function () {
              return this.array_.length
            }, Dn.prototype.toArray = function () {
              for (var t = [], e = 0, r = this.array_.length; e < r; e++) t.push(this.array_[e]);
              return t
            };
            var sh = function () {
              this._minIndex = -1, this._minCoord = null, this._minDe = null, this._orientedDe = null;
            };
            sh.prototype.getCoordinate = function () {
              return this._minCoord
            }, sh.prototype.getRightmostSide = function (t, e) {
              var r = this.getRightmostSideOfSegment(t, e);
              return r < 0 && (r = this.getRightmostSideOfSegment(t, e - 1)), r < 0 && (this._minCoord = null, this.checkForRightmostCoordinate(t)), r
            }, sh.prototype.findRightmostEdgeAtVertex = function () {
              var t = this._minDe.getEdge().getCoordinates();
              Ru.isTrue(this._minIndex > 0 && this._minIndex < t.length, "rightmost point expected to be interior vertex of edge");
              var e = t[this._minIndex - 1],
                r = t[this._minIndex + 1],
                i = zu.computeOrientation(this._minCoord, r, e),
                n = !1;
              e.y < this._minCoord.y && r.y < this._minCoord.y && i === zu.COUNTERCLOCKWISE ? n = !0 : e.y > this._minCoord.y && r.y > this._minCoord.y && i === zu.CLOCKWISE && (n = !0), n && (this._minIndex = this._minIndex - 1);
            }, sh.prototype.getRightmostSideOfSegment = function (t, e) {
              var r = t.getEdge().getCoordinates();
              if (e < 0 || e + 1 >= r.length) return -1;
              if (r[e].y === r[e + 1].y) return -1;
              var i = nh.LEFT;
              return r[e].y < r[e + 1].y && (i = nh.RIGHT), i
            }, sh.prototype.getEdge = function () {
              return this._orientedDe
            }, sh.prototype.checkForRightmostCoordinate = function (t) {
              for (var e = t.getEdge().getCoordinates(), r = 0; r < e.length - 1; r++)(null === this._minCoord || e[r].x > this._minCoord.x) && (this._minDe = t, this._minIndex = r, this._minCoord = e[r]);
            }, sh.prototype.findRightmostEdgeAtNode = function () {
              var t = this._minDe.getNode().getEdges();
              this._minDe = t.getRightmostEdge(), this._minDe.isForward() || (this._minDe = this._minDe.getSym(), this._minIndex = this._minDe.getEdge().getCoordinates().length - 1);
            }, sh.prototype.findEdge = function (t) {
              for (var e = t.iterator(); e.hasNext();) {
                var r = e.next();
                r.isForward() && this.checkForRightmostCoordinate(r);
              }
              Ru.isTrue(0 !== this._minIndex || this._minCoord.equals(this._minDe.getCoordinate()), "inconsistency in rightmost processing"), 0 === this._minIndex ? this.findRightmostEdgeAtNode() : this.findRightmostEdgeAtVertex(), this._orientedDe = this._minDe, this.getRightmostSide(this._minDe, this._minIndex) === nh.LEFT && (this._orientedDe = this._minDe.getSym());
            }, sh.prototype.interfaces_ = function () {
              return []
            }, sh.prototype.getClass = function () {
              return sh
            };
            var ah = function (t) {
                function e(r, i) {
                  t.call(this, e.msgWithCoord(r, i)), this.pt = i ? new ru(i) : null, this.name = "TopologyException";
                }
                return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getCoordinate = function () {
                  return this.pt
                }, e.prototype.interfaces_ = function () {
                  return []
                }, e.prototype.getClass = function () {
                  return e
                }, e.msgWithCoord = function (t, e) {
                  return e ? t : t + " [ " + e + " ]"
                }, e
              }(Du),
              uh = function () {
                this.array_ = [];
              };
            uh.prototype.addLast = function (t) {
              this.array_.push(t);
            }, uh.prototype.removeFirst = function () {
              return this.array_.shift()
            }, uh.prototype.isEmpty = function () {
              return 0 === this.array_.length
            };
            var ch = function () {
              this._finder = null, this._dirEdgeList = new rc, this._nodes = new rc, this._rightMostCoord = null, this._env = null, this._finder = new sh;
            };
            ch.prototype.clearVisitedEdges = function () {
              for (var t = this._dirEdgeList.iterator(); t.hasNext();) t.next().setVisited(!1);
            }, ch.prototype.getRightmostCoordinate = function () {
              return this._rightMostCoord
            }, ch.prototype.computeNodeDepth = function (t) {
              for (var e = null, r = t.getEdges().iterator(); r.hasNext();) {
                var i = r.next();
                if (i.isVisited() || i.getSym().isVisited()) {
                  e = i;
                  break
                }
              }
              if (null === e) throw new ah("unable to find edge to compute depths at " + t.getCoordinate());
              t.getEdges().computeDepths(e);
              for (var n = t.getEdges().iterator(); n.hasNext();) {
                var o = n.next();
                o.setVisited(!0), this.copySymDepths(o);
              }
            }, ch.prototype.computeDepth = function (t) {
              this.clearVisitedEdges();
              var e = this._finder.getEdge();
              e.setEdgeDepths(nh.RIGHT, t), this.copySymDepths(e), this.computeDepths(e);
            }, ch.prototype.create = function (t) {
              this.addReachable(t), this._finder.findEdge(this._dirEdgeList), this._rightMostCoord = this._finder.getCoordinate();
            }, ch.prototype.findResultEdges = function () {
              for (var t = this._dirEdgeList.iterator(); t.hasNext();) {
                var e = t.next();
                e.getDepth(nh.RIGHT) >= 1 && e.getDepth(nh.LEFT) <= 0 && !e.isInteriorAreaEdge() && e.setInResult(!0);
              }
            }, ch.prototype.computeDepths = function (t) {
              var e = new lc,
                r = new uh,
                i = t.getNode();
              for (r.addLast(i), e.add(i), t.setVisited(!0); !r.isEmpty();) {
                var n = r.removeFirst();
                e.add(n), this.computeNodeDepth(n);
                for (var o = n.getEdges().iterator(); o.hasNext();) {
                  var s = o.next().getSym();
                  if (!s.isVisited()) {
                    var a = s.getNode();
                    e.contains(a) || (r.addLast(a), e.add(a));
                  }
                }
              }
            }, ch.prototype.compareTo = function (t) {
              var e = t;
              return this._rightMostCoord.x < e._rightMostCoord.x ? -1 : this._rightMostCoord.x > e._rightMostCoord.x ? 1 : 0
            }, ch.prototype.getEnvelope = function () {
              if (null === this._env) {
                for (var t = new Lu, e = this._dirEdgeList.iterator(); e.hasNext();)
                  for (var r = e.next().getEdge().getCoordinates(), i = 0; i < r.length - 1; i++) t.expandToInclude(r[i]);
                this._env = t;
              }
              return this._env
            }, ch.prototype.addReachable = function (t) {
              var e = new Dn;
              for (e.add(t); !e.empty();) {
                var r = e.pop();
                this.add(r, e);
              }
            }, ch.prototype.copySymDepths = function (t) {
              var e = t.getSym();
              e.setDepth(nh.LEFT, t.getDepth(nh.RIGHT)), e.setDepth(nh.RIGHT, t.getDepth(nh.LEFT));
            }, ch.prototype.add = function (t, e) {
              t.setVisited(!0), this._nodes.add(t);
              for (var r = t.getEdges().iterator(); r.hasNext();) {
                var i = r.next();
                this._dirEdgeList.add(i);
                var n = i.getSym().getNode();
                n.isVisited() || e.push(n);
              }
            }, ch.prototype.getNodes = function () {
              return this._nodes
            }, ch.prototype.getDirectedEdges = function () {
              return this._dirEdgeList
            }, ch.prototype.interfaces_ = function () {
              return [$a]
            }, ch.prototype.getClass = function () {
              return ch
            };
            var hh = function t() {
              if (this.location = null, 1 === arguments.length) {
                if (arguments[0] instanceof Array) {
                  var e = arguments[0];
                  this.init(e.length);
                } else if (Number.isInteger(arguments[0])) {
                  var r = arguments[0];
                  this.init(1), this.location[nh.ON] = r;
                } else if (arguments[0] instanceof t) {
                  var i = arguments[0];
                  if (this.init(i.location.length), null !== i)
                    for (var n = 0; n < this.location.length; n++) this.location[n] = i.location[n];
                }
              } else if (3 === arguments.length) {
                var o = arguments[0],
                  s = arguments[1],
                  a = arguments[2];
                this.init(3), this.location[nh.ON] = o, this.location[nh.LEFT] = s, this.location[nh.RIGHT] = a;
              }
            };
            hh.prototype.setAllLocations = function (t) {
              for (var e = 0; e < this.location.length; e++) this.location[e] = t;
            }, hh.prototype.isNull = function () {
              for (var t = 0; t < this.location.length; t++)
                if (this.location[t] !== su.NONE) return !1;
              return !0
            }, hh.prototype.setAllLocationsIfNull = function (t) {
              for (var e = 0; e < this.location.length; e++) this.location[e] === su.NONE && (this.location[e] = t);
            }, hh.prototype.isLine = function () {
              return 1 === this.location.length
            }, hh.prototype.merge = function (t) {
              if (t.location.length > this.location.length) {
                var e = new Array(3).fill(null);
                e[nh.ON] = this.location[nh.ON], e[nh.LEFT] = su.NONE, e[nh.RIGHT] = su.NONE, this.location = e;
              }
              for (var r = 0; r < this.location.length; r++) this.location[r] === su.NONE && r < t.location.length && (this.location[r] = t.location[r]);
            }, hh.prototype.getLocations = function () {
              return this.location
            }, hh.prototype.flip = function () {
              if (this.location.length <= 1) return null;
              var t = this.location[nh.LEFT];
              this.location[nh.LEFT] = this.location[nh.RIGHT], this.location[nh.RIGHT] = t;
            }, hh.prototype.toString = function () {
              var t = new lu;
              return this.location.length > 1 && t.append(su.toLocationSymbol(this.location[nh.LEFT])), t.append(su.toLocationSymbol(this.location[nh.ON])), this.location.length > 1 && t.append(su.toLocationSymbol(this.location[nh.RIGHT])), t.toString()
            }, hh.prototype.setLocations = function (t, e, r) {
              this.location[nh.ON] = t, this.location[nh.LEFT] = e, this.location[nh.RIGHT] = r;
            }, hh.prototype.get = function (t) {
              return t < this.location.length ? this.location[t] : su.NONE
            }, hh.prototype.isArea = function () {
              return this.location.length > 1
            }, hh.prototype.isAnyNull = function () {
              for (var t = 0; t < this.location.length; t++)
                if (this.location[t] === su.NONE) return !0;
              return !1
            }, hh.prototype.setLocation = function () {
              if (1 === arguments.length) {
                var t = arguments[0];
                this.setLocation(nh.ON, t);
              } else if (2 === arguments.length) {
                var e = arguments[0],
                  r = arguments[1];
                this.location[e] = r;
              }
            }, hh.prototype.init = function (t) {
              this.location = new Array(t).fill(null), this.setAllLocations(su.NONE);
            }, hh.prototype.isEqualOnSide = function (t, e) {
              return this.location[e] === t.location[e]
            }, hh.prototype.allPositionsEqual = function (t) {
              for (var e = 0; e < this.location.length; e++)
                if (this.location[e] !== t) return !1;
              return !0
            }, hh.prototype.interfaces_ = function () {
              return []
            }, hh.prototype.getClass = function () {
              return hh
            };
            var lh = function t() {
              if (this.elt = new Array(2).fill(null), 1 === arguments.length) {
                if (Number.isInteger(arguments[0])) {
                  var e = arguments[0];
                  this.elt[0] = new hh(e), this.elt[1] = new hh(e);
                } else if (arguments[0] instanceof t) {
                  var r = arguments[0];
                  this.elt[0] = new hh(r.elt[0]), this.elt[1] = new hh(r.elt[1]);
                }
              } else if (2 === arguments.length) {
                var i = arguments[0],
                  n = arguments[1];
                this.elt[0] = new hh(su.NONE), this.elt[1] = new hh(su.NONE), this.elt[i].setLocation(n);
              } else if (3 === arguments.length) {
                var o = arguments[0],
                  s = arguments[1],
                  a = arguments[2];
                this.elt[0] = new hh(o, s, a), this.elt[1] = new hh(o, s, a);
              } else if (4 === arguments.length) {
                var u = arguments[0],
                  c = arguments[1],
                  h = arguments[2],
                  l = arguments[3];
                this.elt[0] = new hh(su.NONE, su.NONE, su.NONE), this.elt[1] = new hh(su.NONE, su.NONE, su.NONE), this.elt[u].setLocations(c, h, l);
              }
            };
            lh.prototype.getGeometryCount = function () {
              var t = 0;
              return this.elt[0].isNull() || t++, this.elt[1].isNull() || t++, t
            }, lh.prototype.setAllLocations = function (t, e) {
              this.elt[t].setAllLocations(e);
            }, lh.prototype.isNull = function (t) {
              return this.elt[t].isNull()
            }, lh.prototype.setAllLocationsIfNull = function () {
              if (1 === arguments.length) {
                var t = arguments[0];
                this.setAllLocationsIfNull(0, t), this.setAllLocationsIfNull(1, t);
              } else if (2 === arguments.length) {
                var e = arguments[0],
                  r = arguments[1];
                this.elt[e].setAllLocationsIfNull(r);
              }
            }, lh.prototype.isLine = function (t) {
              return this.elt[t].isLine()
            }, lh.prototype.merge = function (t) {
              for (var e = 0; e < 2; e++) null === this.elt[e] && null !== t.elt[e] ? this.elt[e] = new hh(t.elt[e]) : this.elt[e].merge(t.elt[e]);
            }, lh.prototype.flip = function () {
              this.elt[0].flip(), this.elt[1].flip();
            }, lh.prototype.getLocation = function () {
              if (1 === arguments.length) {
                var t = arguments[0];
                return this.elt[t].get(nh.ON)
              }
              if (2 === arguments.length) {
                var e = arguments[0],
                  r = arguments[1];
                return this.elt[e].get(r)
              }
            }, lh.prototype.toString = function () {
              var t = new lu;
              return null !== this.elt[0] && (t.append("A:"), t.append(this.elt[0].toString())), null !== this.elt[1] && (t.append(" B:"), t.append(this.elt[1].toString())), t.toString()
            }, lh.prototype.isArea = function () {
              if (0 === arguments.length) return this.elt[0].isArea() || this.elt[1].isArea();
              if (1 === arguments.length) {
                var t = arguments[0];
                return this.elt[t].isArea()
              }
            }, lh.prototype.isAnyNull = function (t) {
              return this.elt[t].isAnyNull()
            }, lh.prototype.setLocation = function () {
              if (2 === arguments.length) {
                var t = arguments[0],
                  e = arguments[1];
                this.elt[t].setLocation(nh.ON, e);
              } else if (3 === arguments.length) {
                var r = arguments[0],
                  i = arguments[1],
                  n = arguments[2];
                this.elt[r].setLocation(i, n);
              }
            }, lh.prototype.isEqualOnSide = function (t, e) {
              return this.elt[0].isEqualOnSide(t.elt[0], e) && this.elt[1].isEqualOnSide(t.elt[1], e)
            }, lh.prototype.allPositionsEqual = function (t, e) {
              return this.elt[t].allPositionsEqual(e)
            }, lh.prototype.toLine = function (t) {
              this.elt[t].isArea() && (this.elt[t] = new hh(this.elt[t].location[0]));
            }, lh.prototype.interfaces_ = function () {
              return []
            }, lh.prototype.getClass = function () {
              return lh
            }, lh.toLineLabel = function (t) {
              for (var e = new lh(su.NONE), r = 0; r < 2; r++) e.setLocation(r, t.getLocation(r));
              return e
            };
            var ph = function () {
              this._startDe = null, this._maxNodeDegree = -1, this._edges = new rc, this._pts = new rc, this._label = new lh(su.NONE), this._ring = null, this._isHole = null, this._shell = null, this._holes = new rc, this._geometryFactory = null;
              var t = arguments[0],
                e = arguments[1];
              this._geometryFactory = e, this.computePoints(t), this.computeRing();
            };
            ph.prototype.computeRing = function () {
              if (null !== this._ring) return null;
              for (var t = new Array(this._pts.size()).fill(null), e = 0; e < this._pts.size(); e++) t[e] = this._pts.get(e);
              this._ring = this._geometryFactory.createLinearRing(t), this._isHole = zu.isCCW(this._ring.getCoordinates());
            }, ph.prototype.isIsolated = function () {
              return 1 === this._label.getGeometryCount()
            }, ph.prototype.computePoints = function (t) {
              this._startDe = t;
              var e = t,
                r = !0;
              do {
                if (null === e) throw new ah("Found null DirectedEdge");
                if (e.getEdgeRing() === this) throw new ah("Directed Edge visited twice during ring-building at " + e.getCoordinate());
                this._edges.add(e);
                var i = e.getLabel();
                Ru.isTrue(i.isArea()), this.mergeLabel(i), this.addPoints(e.getEdge(), e.isForward(), r), r = !1, this.setEdgeRing(e, this), e = this.getNext(e);
              } while (e !== this._startDe)
            }, ph.prototype.getLinearRing = function () {
              return this._ring
            }, ph.prototype.getCoordinate = function (t) {
              return this._pts.get(t)
            }, ph.prototype.computeMaxNodeDegree = function () {
              this._maxNodeDegree = 0;
              var t = this._startDe;
              do {
                var e = t.getNode().getEdges().getOutgoingDegree(this);
                e > this._maxNodeDegree && (this._maxNodeDegree = e), t = this.getNext(t);
              } while (t !== this._startDe);
              this._maxNodeDegree *= 2;
            }, ph.prototype.addPoints = function (t, e, r) {
              var i = t.getCoordinates();
              if (e) {
                var n = 1;
                r && (n = 0);
                for (var o = n; o < i.length; o++) this._pts.add(i[o]);
              } else {
                var s = i.length - 2;
                r && (s = i.length - 1);
                for (var a = s; a >= 0; a--) this._pts.add(i[a]);
              }
            }, ph.prototype.isHole = function () {
              return this._isHole
            }, ph.prototype.setInResult = function () {
              var t = this._startDe;
              do {
                t.getEdge().setInResult(!0), t = t.getNext();
              } while (t !== this._startDe)
            }, ph.prototype.containsPoint = function (t) {
              var e = this.getLinearRing();
              if (!e.getEnvelopeInternal().contains(t)) return !1;
              if (!zu.isPointInRing(t, e.getCoordinates())) return !1;
              for (var r = this._holes.iterator(); r.hasNext();)
                if (r.next().containsPoint(t)) return !1;
              return !0
            }, ph.prototype.addHole = function (t) {
              this._holes.add(t);
            }, ph.prototype.isShell = function () {
              return null === this._shell
            }, ph.prototype.getLabel = function () {
              return this._label
            }, ph.prototype.getEdges = function () {
              return this._edges
            }, ph.prototype.getMaxNodeDegree = function () {
              return this._maxNodeDegree < 0 && this.computeMaxNodeDegree(), this._maxNodeDegree
            }, ph.prototype.getShell = function () {
              return this._shell
            }, ph.prototype.mergeLabel = function () {
              if (1 === arguments.length) {
                var t = arguments[0];
                this.mergeLabel(t, 0), this.mergeLabel(t, 1);
              } else if (2 === arguments.length) {
                var e = arguments[0],
                  r = arguments[1],
                  i = e.getLocation(r, nh.RIGHT);
                if (i === su.NONE) return null;
                if (this._label.getLocation(r) === su.NONE) return this._label.setLocation(r, i), null
              }
            }, ph.prototype.setShell = function (t) {
              this._shell = t, null !== t && t.addHole(this);
            }, ph.prototype.toPolygon = function (t) {
              for (var e = new Array(this._holes.size()).fill(null), r = 0; r < this._holes.size(); r++) e[r] = this._holes.get(r).getLinearRing();
              return t.createPolygon(this.getLinearRing(), e)
            }, ph.prototype.interfaces_ = function () {
              return []
            }, ph.prototype.getClass = function () {
              return ph
            };
            var fh = function (t) {
                function e() {
                  var e = arguments[0],
                    r = arguments[1];
                  t.call(this, e, r);
                }
                return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.setEdgeRing = function (t, e) {
                  t.setMinEdgeRing(e);
                }, e.prototype.getNext = function (t) {
                  return t.getNextMin()
                }, e.prototype.interfaces_ = function () {
                  return []
                }, e.prototype.getClass = function () {
                  return e
                }, e
              }(ph),
              dh = function (t) {
                function e() {
                  var e = arguments[0],
                    r = arguments[1];
                  t.call(this, e, r);
                }
                return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.buildMinimalRings = function () {
                  var t = new rc,
                    e = this._startDe;
                  do {
                    if (null === e.getMinEdgeRing()) {
                      var r = new fh(e, this._geometryFactory);
                      t.add(r);
                    }
                    e = e.getNext();
                  } while (e !== this._startDe);
                  return t
                }, e.prototype.setEdgeRing = function (t, e) {
                  t.setEdgeRing(e);
                }, e.prototype.linkDirectedEdgesForMinimalEdgeRings = function () {
                  var t = this._startDe;
                  do {
                    t.getNode().getEdges().linkMinimalDirectedEdges(this), t = t.getNext();
                  } while (t !== this._startDe)
                }, e.prototype.getNext = function (t) {
                  return t.getNext()
                }, e.prototype.interfaces_ = function () {
                  return []
                }, e.prototype.getClass = function () {
                  return e
                }, e
              }(ph),
              gh = function () {
                if (this._label = null, this._isInResult = !1, this._isCovered = !1, this._isCoveredSet = !1, this._isVisited = !1, 0 === arguments.length);
                else if (1 === arguments.length) {
                  var t = arguments[0];
                  this._label = t;
                }
              };
            gh.prototype.setVisited = function (t) {
              this._isVisited = t;
            }, gh.prototype.setInResult = function (t) {
              this._isInResult = t;
            }, gh.prototype.isCovered = function () {
              return this._isCovered
            }, gh.prototype.isCoveredSet = function () {
              return this._isCoveredSet
            }, gh.prototype.setLabel = function (t) {
              this._label = t;
            }, gh.prototype.getLabel = function () {
              return this._label
            }, gh.prototype.setCovered = function (t) {
              this._isCovered = t, this._isCoveredSet = !0;
            }, gh.prototype.updateIM = function (t) {
              Ru.isTrue(this._label.getGeometryCount() >= 2, "found partial label"), this.computeIM(t);
            }, gh.prototype.isInResult = function () {
              return this._isInResult
            }, gh.prototype.isVisited = function () {
              return this._isVisited
            }, gh.prototype.interfaces_ = function () {
              return []
            }, gh.prototype.getClass = function () {
              return gh
            };
            var _h = function (t) {
                function e() {
                  t.call(this), this._coord = null, this._edges = null;
                  var e = arguments[0],
                    r = arguments[1];
                  this._coord = e, this._edges = r, this._label = new lh(0, su.NONE);
                }
                return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.isIncidentEdgeInResult = function () {
                  for (var t = this.getEdges().getEdges().iterator(); t.hasNext();)
                    if (t.next().getEdge().isInResult()) return !0;
                  return !1
                }, e.prototype.isIsolated = function () {
                  return 1 === this._label.getGeometryCount()
                }, e.prototype.getCoordinate = function () {
                  return this._coord
                }, e.prototype.print = function (t) {
                  t.println("node " + this._coord + " lbl: " + this._label);
                }, e.prototype.computeIM = function (t) {}, e.prototype.computeMergedLocation = function (t, e) {
                  var r = su.NONE;
                  if (r = this._label.getLocation(e), !t.isNull(e)) {
                    var i = t.getLocation(e);
                    r !== su.BOUNDARY && (r = i);
                  }
                  return r
                }, e.prototype.setLabel = function () {
                  if (2 !== arguments.length) return t.prototype.setLabel.apply(this, arguments);
                  var e = arguments[0],
                    r = arguments[1];
                  null === this._label ? this._label = new lh(e, r) : this._label.setLocation(e, r);
                }, e.prototype.getEdges = function () {
                  return this._edges
                }, e.prototype.mergeLabel = function () {
                  if (arguments[0] instanceof e) {
                    var t = arguments[0];
                    this.mergeLabel(t._label);
                  } else if (arguments[0] instanceof lh)
                    for (var r = arguments[0], i = 0; i < 2; i++) {
                      var n = this.computeMergedLocation(r, i);
                      this._label.getLocation(i) === su.NONE && this._label.setLocation(i, n);
                    }
                }, e.prototype.add = function (t) {
                  this._edges.insert(t), t.setNode(this);
                }, e.prototype.setLabelBoundary = function (t) {
                  if (null === this._label) return null;
                  var e = su.NONE;
                  null !== this._label && (e = this._label.getLocation(t));
                  var r = null;
                  switch (e) {
                    case su.BOUNDARY:
                      r = su.INTERIOR;
                      break;
                    case su.INTERIOR:
                    default:
                      r = su.BOUNDARY;
                  }
                  this._label.setLocation(t, r);
                }, e.prototype.interfaces_ = function () {
                  return []
                }, e.prototype.getClass = function () {
                  return e
                }, e
              }(gh),
              yh = function () {
                this.nodeMap = new Cn, this.nodeFact = null;
                var t = arguments[0];
                this.nodeFact = t;
              };
            yh.prototype.find = function (t) {
              return this.nodeMap.get(t)
            }, yh.prototype.addNode = function () {
              if (arguments[0] instanceof ru) {
                var t = arguments[0],
                  e = this.nodeMap.get(t);
                return null === e && (e = this.nodeFact.createNode(t), this.nodeMap.put(t, e)), e
              }
              if (arguments[0] instanceof _h) {
                var r = arguments[0],
                  i = this.nodeMap.get(r.getCoordinate());
                return null === i ? (this.nodeMap.put(r.getCoordinate(), r), r) : (i.mergeLabel(r), i)
              }
            }, yh.prototype.print = function (t) {
              for (var e = this.iterator(); e.hasNext();) e.next().print(t);
            }, yh.prototype.iterator = function () {
              return this.nodeMap.values().iterator()
            }, yh.prototype.values = function () {
              return this.nodeMap.values()
            }, yh.prototype.getBoundaryNodes = function (t) {
              for (var e = new rc, r = this.iterator(); r.hasNext();) {
                var i = r.next();
                i.getLabel().getLocation(t) === su.BOUNDARY && e.add(i);
              }
              return e
            }, yh.prototype.add = function (t) {
              var e = t.getCoordinate();
              this.addNode(e).add(t);
            }, yh.prototype.interfaces_ = function () {
              return []
            }, yh.prototype.getClass = function () {
              return yh
            };
            var mh = function () {},
              vh = {
                NE: {
                  configurable: !0
                },
                NW: {
                  configurable: !0
                },
                SW: {
                  configurable: !0
                },
                SE: {
                  configurable: !0
                }
              };
            mh.prototype.interfaces_ = function () {
              return []
            }, mh.prototype.getClass = function () {
              return mh
            }, mh.isNorthern = function (t) {
              return t === mh.NE || t === mh.NW
            }, mh.isOpposite = function (t, e) {
              return t !== e && 2 == (t - e + 4) % 4
            }, mh.commonHalfPlane = function (t, e) {
              if (t === e) return t;
              if (2 == (t - e + 4) % 4) return -1;
              var r = t < e ? t : e;
              return 0 === r && 3 === (t > e ? t : e) ? 3 : r
            }, mh.isInHalfPlane = function (t, e) {
              return e === mh.SE ? t === mh.SE || t === mh.SW : t === e || t === e + 1
            }, mh.quadrant = function () {
              if ("number" == typeof arguments[0] && "number" == typeof arguments[1]) {
                var t = arguments[0],
                  e = arguments[1];
                if (0 === t && 0 === e) throw new Ka("Cannot compute the quadrant for point ( " + t + ", " + e + " )");
                return t >= 0 ? e >= 0 ? mh.NE : mh.SE : e >= 0 ? mh.NW : mh.SW
              }
              if (arguments[0] instanceof ru && arguments[1] instanceof ru) {
                var r = arguments[0],
                  i = arguments[1];
                if (i.x === r.x && i.y === r.y) throw new Ka("Cannot compute the quadrant for two identical points " + r);
                return i.x >= r.x ? i.y >= r.y ? mh.NE : mh.SE : i.y >= r.y ? mh.NW : mh.SW
              }
            }, vh.NE.get = function () {
              return 0
            }, vh.NW.get = function () {
              return 1
            }, vh.SW.get = function () {
              return 2
            }, vh.SE.get = function () {
              return 3
            }, Object.defineProperties(mh, vh);
            var xh = function () {
              if (this._edge = null, this._label = null, this._node = null, this._p0 = null, this._p1 = null, this._dx = null, this._dy = null, this._quadrant = null, 1 === arguments.length) {
                var t = arguments[0];
                this._edge = t;
              } else if (3 === arguments.length) {
                var e = arguments[0],
                  r = arguments[1],
                  i = arguments[2];
                this._edge = e, this.init(r, i), this._label = null;
              } else if (4 === arguments.length) {
                var n = arguments[0],
                  o = arguments[1],
                  s = arguments[2],
                  a = arguments[3];
                this._edge = n, this.init(o, s), this._label = a;
              }
            };
            xh.prototype.compareDirection = function (t) {
              return this._dx === t._dx && this._dy === t._dy ? 0 : this._quadrant > t._quadrant ? 1 : this._quadrant < t._quadrant ? -1 : zu.computeOrientation(t._p0, t._p1, this._p1)
            }, xh.prototype.getDy = function () {
              return this._dy
            }, xh.prototype.getCoordinate = function () {
              return this._p0
            }, xh.prototype.setNode = function (t) {
              this._node = t;
            }, xh.prototype.print = function (t) {
              var e = Math.atan2(this._dy, this._dx),
                r = this.getClass().getName(),
                i = r.lastIndexOf("."),
                n = r.substring(i + 1);
              t.print("  " + n + ": " + this._p0 + " - " + this._p1 + " " + this._quadrant + ":" + e + "   " + this._label);
            }, xh.prototype.compareTo = function (t) {
              var e = t;
              return this.compareDirection(e)
            }, xh.prototype.getDirectedCoordinate = function () {
              return this._p1
            }, xh.prototype.getDx = function () {
              return this._dx
            }, xh.prototype.getLabel = function () {
              return this._label
            }, xh.prototype.getEdge = function () {
              return this._edge
            }, xh.prototype.getQuadrant = function () {
              return this._quadrant
            }, xh.prototype.getNode = function () {
              return this._node
            }, xh.prototype.toString = function () {
              var t = Math.atan2(this._dy, this._dx),
                e = this.getClass().getName(),
                r = e.lastIndexOf(".");
              return "  " + e.substring(r + 1) + ": " + this._p0 + " - " + this._p1 + " " + this._quadrant + ":" + t + "   " + this._label
            }, xh.prototype.computeLabel = function (t) {}, xh.prototype.init = function (t, e) {
              this._p0 = t, this._p1 = e, this._dx = e.x - t.x, this._dy = e.y - t.y, this._quadrant = mh.quadrant(this._dx, this._dy), Ru.isTrue(!(0 === this._dx && 0 === this._dy), "EdgeEnd with identical endpoints found");
            }, xh.prototype.interfaces_ = function () {
              return [$a]
            }, xh.prototype.getClass = function () {
              return xh
            };
            var wh = function (t) {
                function e() {
                  var e = arguments[0],
                    r = arguments[1];
                  if (t.call(this, e), this._isForward = null, this._isInResult = !1, this._isVisited = !1, this._sym = null, this._next = null, this._nextMin = null, this._edgeRing = null, this._minEdgeRing = null, this._depth = [0, -999, -999], this._isForward = r, r) this.init(e.getCoordinate(0), e.getCoordinate(1));
                  else {
                    var i = e.getNumPoints() - 1;
                    this.init(e.getCoordinate(i), e.getCoordinate(i - 1));
                  }
                  this.computeDirectedLabel();
                }
                return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getNextMin = function () {
                  return this._nextMin
                }, e.prototype.getDepth = function (t) {
                  return this._depth[t]
                }, e.prototype.setVisited = function (t) {
                  this._isVisited = t;
                }, e.prototype.computeDirectedLabel = function () {
                  this._label = new lh(this._edge.getLabel()), this._isForward || this._label.flip();
                }, e.prototype.getNext = function () {
                  return this._next
                }, e.prototype.setDepth = function (t, e) {
                  if (-999 !== this._depth[t] && this._depth[t] !== e) throw new ah("assigned depths do not match", this.getCoordinate());
                  this._depth[t] = e;
                }, e.prototype.isInteriorAreaEdge = function () {
                  for (var t = !0, e = 0; e < 2; e++) this._label.isArea(e) && this._label.getLocation(e, nh.LEFT) === su.INTERIOR && this._label.getLocation(e, nh.RIGHT) === su.INTERIOR || (t = !1);
                  return t
                }, e.prototype.setNextMin = function (t) {
                  this._nextMin = t;
                }, e.prototype.print = function (e) {
                  t.prototype.print.call(this, e), e.print(" " + this._depth[nh.LEFT] + "/" + this._depth[nh.RIGHT]), e.print(" (" + this.getDepthDelta() + ")"), this._isInResult && e.print(" inResult");
                }, e.prototype.setMinEdgeRing = function (t) {
                  this._minEdgeRing = t;
                }, e.prototype.isLineEdge = function () {
                  var t = this._label.isLine(0) || this._label.isLine(1),
                    e = !this._label.isArea(0) || this._label.allPositionsEqual(0, su.EXTERIOR),
                    r = !this._label.isArea(1) || this._label.allPositionsEqual(1, su.EXTERIOR);
                  return t && e && r
                }, e.prototype.setEdgeRing = function (t) {
                  this._edgeRing = t;
                }, e.prototype.getMinEdgeRing = function () {
                  return this._minEdgeRing
                }, e.prototype.getDepthDelta = function () {
                  var t = this._edge.getDepthDelta();
                  return this._isForward || (t = -t), t
                }, e.prototype.setInResult = function (t) {
                  this._isInResult = t;
                }, e.prototype.getSym = function () {
                  return this._sym
                }, e.prototype.isForward = function () {
                  return this._isForward
                }, e.prototype.getEdge = function () {
                  return this._edge
                }, e.prototype.printEdge = function (t) {
                  this.print(t), t.print(" "), this._isForward ? this._edge.print(t) : this._edge.printReverse(t);
                }, e.prototype.setSym = function (t) {
                  this._sym = t;
                }, e.prototype.setVisitedEdge = function (t) {
                  this.setVisited(t), this._sym.setVisited(t);
                }, e.prototype.setEdgeDepths = function (t, e) {
                  var r = this.getEdge().getDepthDelta();
                  this._isForward || (r = -r);
                  var i = 1;
                  t === nh.LEFT && (i = -1);
                  var n = nh.opposite(t),
                    o = e + r * i;
                  this.setDepth(t, e), this.setDepth(n, o);
                }, e.prototype.getEdgeRing = function () {
                  return this._edgeRing
                }, e.prototype.isInResult = function () {
                  return this._isInResult
                }, e.prototype.setNext = function (t) {
                  this._next = t;
                }, e.prototype.isVisited = function () {
                  return this._isVisited
                }, e.prototype.interfaces_ = function () {
                  return []
                }, e.prototype.getClass = function () {
                  return e
                }, e.depthFactor = function (t, e) {
                  return t === su.EXTERIOR && e === su.INTERIOR ? 1 : t === su.INTERIOR && e === su.EXTERIOR ? -1 : 0
                }, e
              }(xh),
              bh = function () {};
            bh.prototype.createNode = function (t) {
              return new _h(t, null)
            }, bh.prototype.interfaces_ = function () {
              return []
            }, bh.prototype.getClass = function () {
              return bh
            };
            var Eh = function () {
              if (this._edges = new rc, this._nodes = null, this._edgeEndList = new rc, 0 === arguments.length) this._nodes = new yh(new bh);
              else if (1 === arguments.length) {
                var t = arguments[0];
                this._nodes = new yh(t);
              }
            };
            Eh.prototype.printEdges = function (t) {
              t.println("Edges:");
              for (var e = 0; e < this._edges.size(); e++) {
                t.println("edge " + e + ":");
                var r = this._edges.get(e);
                r.print(t), r.eiList.print(t);
              }
            }, Eh.prototype.find = function (t) {
              return this._nodes.find(t)
            }, Eh.prototype.addNode = function () {
              if (arguments[0] instanceof _h) {
                var t = arguments[0];
                return this._nodes.addNode(t)
              }
              if (arguments[0] instanceof ru) {
                var e = arguments[0];
                return this._nodes.addNode(e)
              }
            }, Eh.prototype.getNodeIterator = function () {
              return this._nodes.iterator()
            }, Eh.prototype.linkResultDirectedEdges = function () {
              for (var t = this._nodes.iterator(); t.hasNext();) t.next().getEdges().linkResultDirectedEdges();
            }, Eh.prototype.debugPrintln = function (t) {
              bu.out.println(t);
            }, Eh.prototype.isBoundaryNode = function (t, e) {
              var r = this._nodes.find(e);
              if (null === r) return !1;
              var i = r.getLabel();
              return null !== i && i.getLocation(t) === su.BOUNDARY
            }, Eh.prototype.linkAllDirectedEdges = function () {
              for (var t = this._nodes.iterator(); t.hasNext();) t.next().getEdges().linkAllDirectedEdges();
            }, Eh.prototype.matchInSameDirection = function (t, e, r, i) {
              return !!t.equals(r) && zu.computeOrientation(t, e, i) === zu.COLLINEAR && mh.quadrant(t, e) === mh.quadrant(r, i)
            }, Eh.prototype.getEdgeEnds = function () {
              return this._edgeEndList
            }, Eh.prototype.debugPrint = function (t) {
              bu.out.print(t);
            }, Eh.prototype.getEdgeIterator = function () {
              return this._edges.iterator()
            }, Eh.prototype.findEdgeInSameDirection = function (t, e) {
              for (var r = 0; r < this._edges.size(); r++) {
                var i = this._edges.get(r),
                  n = i.getCoordinates();
                if (this.matchInSameDirection(t, e, n[0], n[1])) return i;
                if (this.matchInSameDirection(t, e, n[n.length - 1], n[n.length - 2])) return i
              }
              return null
            }, Eh.prototype.insertEdge = function (t) {
              this._edges.add(t);
            }, Eh.prototype.findEdgeEnd = function (t) {
              for (var e = this.getEdgeEnds().iterator(); e.hasNext();) {
                var r = e.next();
                if (r.getEdge() === t) return r
              }
              return null
            }, Eh.prototype.addEdges = function (t) {
              for (var e = t.iterator(); e.hasNext();) {
                var r = e.next();
                this._edges.add(r);
                var i = new wh(r, !0),
                  n = new wh(r, !1);
                i.setSym(n), n.setSym(i), this.add(i), this.add(n);
              }
            }, Eh.prototype.add = function (t) {
              this._nodes.add(t), this._edgeEndList.add(t);
            }, Eh.prototype.getNodes = function () {
              return this._nodes.values()
            }, Eh.prototype.findEdge = function (t, e) {
              for (var r = 0; r < this._edges.size(); r++) {
                var i = this._edges.get(r),
                  n = i.getCoordinates();
                if (t.equals(n[0]) && e.equals(n[1])) return i
              }
              return null
            }, Eh.prototype.interfaces_ = function () {
              return []
            }, Eh.prototype.getClass = function () {
              return Eh
            }, Eh.linkResultDirectedEdges = function (t) {
              for (var e = t.iterator(); e.hasNext();) e.next().getEdges().linkResultDirectedEdges();
            };
            var Lh = function () {
              this._geometryFactory = null, this._shellList = new rc;
              var t = arguments[0];
              this._geometryFactory = t;
            };
            Lh.prototype.sortShellsAndHoles = function (t, e, r) {
              for (var i = t.iterator(); i.hasNext();) {
                var n = i.next();
                n.isHole() ? r.add(n) : e.add(n);
              }
            }, Lh.prototype.computePolygons = function (t) {
              for (var e = new rc, r = t.iterator(); r.hasNext();) {
                var i = r.next().toPolygon(this._geometryFactory);
                e.add(i);
              }
              return e
            }, Lh.prototype.placeFreeHoles = function (t, e) {
              for (var r = e.iterator(); r.hasNext();) {
                var i = r.next();
                if (null === i.getShell()) {
                  var n = this.findEdgeRingContaining(i, t);
                  if (null === n) throw new ah("unable to assign hole to a shell", i.getCoordinate(0));
                  i.setShell(n);
                }
              }
            }, Lh.prototype.buildMinimalEdgeRings = function (t, e, r) {
              for (var i = new rc, n = t.iterator(); n.hasNext();) {
                var o = n.next();
                if (o.getMaxNodeDegree() > 2) {
                  o.linkDirectedEdgesForMinimalEdgeRings();
                  var s = o.buildMinimalRings(),
                    a = this.findShell(s);
                  null !== a ? (this.placePolygonHoles(a, s), e.add(a)) : r.addAll(s);
                } else i.add(o);
              }
              return i
            }, Lh.prototype.containsPoint = function (t) {
              for (var e = this._shellList.iterator(); e.hasNext();)
                if (e.next().containsPoint(t)) return !0;
              return !1
            }, Lh.prototype.buildMaximalEdgeRings = function (t) {
              for (var e = new rc, r = t.iterator(); r.hasNext();) {
                var i = r.next();
                if (i.isInResult() && i.getLabel().isArea() && null === i.getEdgeRing()) {
                  var n = new dh(i, this._geometryFactory);
                  e.add(n), n.setInResult();
                }
              }
              return e
            }, Lh.prototype.placePolygonHoles = function (t, e) {
              for (var r = e.iterator(); r.hasNext();) {
                var i = r.next();
                i.isHole() && i.setShell(t);
              }
            }, Lh.prototype.getPolygons = function () {
              return this.computePolygons(this._shellList)
            }, Lh.prototype.findEdgeRingContaining = function (t, e) {
              for (var r = t.getLinearRing(), i = r.getEnvelopeInternal(), n = r.getCoordinateN(0), o = null, s = null, a = e.iterator(); a.hasNext();) {
                var u = a.next(),
                  c = u.getLinearRing(),
                  h = c.getEnvelopeInternal();
                null !== o && (s = o.getLinearRing().getEnvelopeInternal());
                var l = !1;
                h.contains(i) && zu.isPointInRing(n, c.getCoordinates()) && (l = !0), l && (null === o || s.contains(h)) && (o = u);
              }
              return o
            }, Lh.prototype.findShell = function (t) {
              for (var e = 0, r = null, i = t.iterator(); i.hasNext();) {
                var n = i.next();
                n.isHole() || (r = n, e++);
              }
              return Ru.isTrue(e <= 1, "found two shells in MinimalEdgeRing list"), r
            }, Lh.prototype.add = function () {
              if (1 === arguments.length) {
                var t = arguments[0];
                this.add(t.getEdgeEnds(), t.getNodes());
              } else if (2 === arguments.length) {
                var e = arguments[0],
                  r = arguments[1];
                Eh.linkResultDirectedEdges(r);
                var i = this.buildMaximalEdgeRings(e),
                  n = new rc,
                  o = this.buildMinimalEdgeRings(i, this._shellList, n);
                this.sortShellsAndHoles(o, this._shellList, n), this.placeFreeHoles(this._shellList, n);
              }
            }, Lh.prototype.interfaces_ = function () {
              return []
            }, Lh.prototype.getClass = function () {
              return Lh
            };
            var Sh = function () {};
            Sh.prototype.getBounds = function () {}, Sh.prototype.interfaces_ = function () {
              return []
            }, Sh.prototype.getClass = function () {
              return Sh
            };
            var Ch = function () {
              this._bounds = null, this._item = null;
              var t = arguments[0],
                e = arguments[1];
              this._bounds = t, this._item = e;
            };
            Ch.prototype.getItem = function () {
              return this._item
            }, Ch.prototype.getBounds = function () {
              return this._bounds
            }, Ch.prototype.interfaces_ = function () {
              return [Sh, yn]
            }, Ch.prototype.getClass = function () {
              return Ch
            };
            var Ih = function () {
              this._size = null, this._items = null, this._size = 0, this._items = new rc, this._items.add(null);
            };
            Ih.prototype.poll = function () {
              if (this.isEmpty()) return null;
              var t = this._items.get(1);
              return this._items.set(1, this._items.get(this._size)), this._size -= 1, this.reorder(1), t
            }, Ih.prototype.size = function () {
              return this._size
            }, Ih.prototype.reorder = function (t) {
              for (var e = null, r = this._items.get(t); 2 * t <= this._size && ((e = 2 * t) !== this._size && this._items.get(e + 1).compareTo(this._items.get(e)) < 0 && e++, this._items.get(e).compareTo(r) < 0); t = e) this._items.set(t, this._items.get(e));
              this._items.set(t, r);
            }, Ih.prototype.clear = function () {
              this._size = 0, this._items.clear();
            }, Ih.prototype.isEmpty = function () {
              return 0 === this._size
            }, Ih.prototype.add = function (t) {
              this._items.add(null), this._size += 1;
              var e = this._size;
              for (this._items.set(0, t); t.compareTo(this._items.get(Math.trunc(e / 2))) < 0; e /= 2) this._items.set(e, this._items.get(Math.trunc(e / 2)));
              this._items.set(e, t);
            }, Ih.prototype.interfaces_ = function () {
              return []
            }, Ih.prototype.getClass = function () {
              return Ih
            };
            var Mh = function () {};
            Mh.prototype.visitItem = function (t) {}, Mh.prototype.interfaces_ = function () {
              return []
            }, Mh.prototype.getClass = function () {
              return Mh
            };
            var Th = function () {};
            Th.prototype.insert = function (t, e) {}, Th.prototype.remove = function (t, e) {}, Th.prototype.query = function () {}, Th.prototype.interfaces_ = function () {
              return []
            }, Th.prototype.getClass = function () {
              return Th
            };
            var Ph = function () {
                if (this._childBoundables = new rc, this._bounds = null, this._level = null, 0 === arguments.length);
                else if (1 === arguments.length) {
                  var t = arguments[0];
                  this._level = t;
                }
              },
              Dh = {
                serialVersionUID: {
                  configurable: !0
                }
              };
            Ph.prototype.getLevel = function () {
              return this._level
            }, Ph.prototype.size = function () {
              return this._childBoundables.size()
            }, Ph.prototype.getChildBoundables = function () {
              return this._childBoundables
            }, Ph.prototype.addChildBoundable = function (t) {
              Ru.isTrue(null === this._bounds), this._childBoundables.add(t);
            }, Ph.prototype.isEmpty = function () {
              return this._childBoundables.isEmpty()
            }, Ph.prototype.getBounds = function () {
              return null === this._bounds && (this._bounds = this.computeBounds()), this._bounds
            }, Ph.prototype.interfaces_ = function () {
              return [Sh, yn]
            }, Ph.prototype.getClass = function () {
              return Ph
            }, Dh.serialVersionUID.get = function () {
              return 0x5a1e55ec41369800
            }, Object.defineProperties(Ph, Dh);
            var Nh = function () {};
            Nh.reverseOrder = function () {
              return {
                compare: function (t, e) {
                  return e.compareTo(t)
                }
              }
            }, Nh.min = function (t) {
              return Nh.sort(t), t.get(0)
            }, Nh.sort = function (t, e) {
              var r = t.toArray();
              e ? _c.sort(r, e) : _c.sort(r);
              for (var i = t.iterator(), n = 0, o = r.length; n < o; n++) i.next(), i.set(r[n]);
            }, Nh.singletonList = function (t) {
              var e = new rc;
              return e.add(t), e
            };
            var Rh = function () {
              this._boundable1 = null, this._boundable2 = null, this._distance = null, this._itemDistance = null;
              var t = arguments[0],
                e = arguments[1],
                r = arguments[2];
              this._boundable1 = t, this._boundable2 = e, this._itemDistance = r, this._distance = this.distance();
            };
            Rh.prototype.expandToQueue = function (t, e) {
              var r = Rh.isComposite(this._boundable1),
                i = Rh.isComposite(this._boundable2);
              if (r && i) return Rh.area(this._boundable1) > Rh.area(this._boundable2) ? (this.expand(this._boundable1, this._boundable2, t, e), null) : (this.expand(this._boundable2, this._boundable1, t, e), null);
              if (r) return this.expand(this._boundable1, this._boundable2, t, e), null;
              if (i) return this.expand(this._boundable2, this._boundable1, t, e), null;
              throw new Ka("neither boundable is composite")
            }, Rh.prototype.isLeaves = function () {
              return !(Rh.isComposite(this._boundable1) || Rh.isComposite(this._boundable2))
            }, Rh.prototype.compareTo = function (t) {
              var e = t;
              return this._distance < e._distance ? -1 : this._distance > e._distance ? 1 : 0
            }, Rh.prototype.expand = function (t, e, r, i) {
              for (var n = t.getChildBoundables().iterator(); n.hasNext();) {
                var o = n.next(),
                  s = new Rh(o, e, this._itemDistance);
                s.getDistance() < i && r.add(s);
              }
            }, Rh.prototype.getBoundable = function (t) {
              return 0 === t ? this._boundable1 : this._boundable2
            }, Rh.prototype.getDistance = function () {
              return this._distance
            }, Rh.prototype.distance = function () {
              return this.isLeaves() ? this._itemDistance.distance(this._boundable1, this._boundable2) : this._boundable1.getBounds().distance(this._boundable2.getBounds())
            }, Rh.prototype.interfaces_ = function () {
              return [$a]
            }, Rh.prototype.getClass = function () {
              return Rh
            }, Rh.area = function (t) {
              return t.getBounds().getArea()
            }, Rh.isComposite = function (t) {
              return t instanceof Ph
            };
            var Oh = function t() {
                if (this._root = null, this._built = !1, this._itemBoundables = new rc, this._nodeCapacity = null, 0 === arguments.length) {
                  var e = t.DEFAULT_NODE_CAPACITY;
                  this._nodeCapacity = e;
                } else if (1 === arguments.length) {
                  var r = arguments[0];
                  Ru.isTrue(r > 1, "Node capacity must be greater than 1"), this._nodeCapacity = r;
                }
              },
              Ah = {
                IntersectsOp: {
                  configurable: !0
                },
                serialVersionUID: {
                  configurable: !0
                },
                DEFAULT_NODE_CAPACITY: {
                  configurable: !0
                }
              };
            Oh.prototype.getNodeCapacity = function () {
              return this._nodeCapacity
            }, Oh.prototype.lastNode = function (t) {
              return t.get(t.size() - 1)
            }, Oh.prototype.size = function () {
              if (0 === arguments.length) return this.isEmpty() ? 0 : (this.build(), this.size(this._root));
              if (1 === arguments.length) {
                for (var t = 0, e = arguments[0].getChildBoundables().iterator(); e.hasNext();) {
                  var r = e.next();
                  r instanceof Ph ? t += this.size(r) : r instanceof Ch && (t += 1);
                }
                return t
              }
            }, Oh.prototype.removeItem = function (t, e) {
              for (var r = null, i = t.getChildBoundables().iterator(); i.hasNext();) {
                var n = i.next();
                n instanceof Ch && n.getItem() === e && (r = n);
              }
              return null !== r && (t.getChildBoundables().remove(r), !0)
            }, Oh.prototype.itemsTree = function () {
              if (0 === arguments.length) {
                this.build();
                var t = this.itemsTree(this._root);
                return null === t ? new rc : t
              }
              if (1 === arguments.length) {
                for (var e = arguments[0], r = new rc, i = e.getChildBoundables().iterator(); i.hasNext();) {
                  var n = i.next();
                  if (n instanceof Ph) {
                    var o = this.itemsTree(n);
                    null !== o && r.add(o);
                  } else n instanceof Ch ? r.add(n.getItem()) : Ru.shouldNeverReachHere();
                }
                return r.size() <= 0 ? null : r
              }
            }, Oh.prototype.insert = function (t, e) {
              Ru.isTrue(!this._built, "Cannot insert items into an STR packed R-tree after it has been built."), this._itemBoundables.add(new Ch(t, e));
            }, Oh.prototype.boundablesAtLevel = function () {
              if (1 === arguments.length) {
                var t = arguments[0],
                  e = new rc;
                return this.boundablesAtLevel(t, this._root, e), e
              }
              if (3 === arguments.length) {
                var r = arguments[0],
                  i = arguments[1],
                  n = arguments[2];
                if (Ru.isTrue(r > -2), i.getLevel() === r) return n.add(i), null;
                for (var o = i.getChildBoundables().iterator(); o.hasNext();) {
                  var s = o.next();
                  s instanceof Ph ? this.boundablesAtLevel(r, s, n) : (Ru.isTrue(s instanceof Ch), -1 === r && n.add(s));
                }
                return null
              }
            }, Oh.prototype.query = function () {
              if (1 === arguments.length) {
                var t = arguments[0];
                this.build();
                var e = new rc;
                return this.isEmpty() ? e : (this.getIntersectsOp().intersects(this._root.getBounds(), t) && this.query(t, this._root, e), e)
              }
              if (2 === arguments.length) {
                var r = arguments[0],
                  i = arguments[1];
                if (this.build(), this.isEmpty()) return null;
                this.getIntersectsOp().intersects(this._root.getBounds(), r) && this.query(r, this._root, i);
              } else if (3 === arguments.length)
                if (uu(arguments[2], Mh) && arguments[0] instanceof Object && arguments[1] instanceof Ph)
                  for (var n = arguments[0], o = arguments[1], s = arguments[2], a = o.getChildBoundables(), u = 0; u < a.size(); u++) {
                    var c = a.get(u);
                    this.getIntersectsOp().intersects(c.getBounds(), n) && (c instanceof Ph ? this.query(n, c, s) : c instanceof Ch ? s.visitItem(c.getItem()) : Ru.shouldNeverReachHere());
                  } else if (uu(arguments[2], ec) && arguments[0] instanceof Object && arguments[1] instanceof Ph)
                    for (var h = arguments[0], l = arguments[1], p = arguments[2], f = l.getChildBoundables(), d = 0; d < f.size(); d++) {
                      var g = f.get(d);
                      this.getIntersectsOp().intersects(g.getBounds(), h) && (g instanceof Ph ? this.query(h, g, p) : g instanceof Ch ? p.add(g.getItem()) : Ru.shouldNeverReachHere());
                    }
            }, Oh.prototype.build = function () {
              if (this._built) return null;
              this._root = this._itemBoundables.isEmpty() ? this.createNode(0) : this.createHigherLevels(this._itemBoundables, -1), this._itemBoundables = null, this._built = !0;
            }, Oh.prototype.getRoot = function () {
              return this.build(), this._root
            }, Oh.prototype.remove = function () {
              if (2 === arguments.length) {
                var t = arguments[0],
                  e = arguments[1];
                return this.build(), !!this.getIntersectsOp().intersects(this._root.getBounds(), t) && this.remove(t, this._root, e)
              }
              if (3 === arguments.length) {
                var r = arguments[0],
                  i = arguments[1],
                  n = arguments[2],
                  o = this.removeItem(i, n);
                if (o) return !0;
                for (var s = null, a = i.getChildBoundables().iterator(); a.hasNext();) {
                  var u = a.next();
                  if (this.getIntersectsOp().intersects(u.getBounds(), r) && u instanceof Ph && (o = this.remove(r, u, n))) {
                    s = u;
                    break
                  }
                }
                return null !== s && s.getChildBoundables().isEmpty() && i.getChildBoundables().remove(s), o
              }
            }, Oh.prototype.createHigherLevels = function (t, e) {
              Ru.isTrue(!t.isEmpty());
              var r = this.createParentBoundables(t, e + 1);
              return 1 === r.size() ? r.get(0) : this.createHigherLevels(r, e + 1)
            }, Oh.prototype.depth = function () {
              if (0 === arguments.length) return this.isEmpty() ? 0 : (this.build(), this.depth(this._root));
              if (1 === arguments.length) {
                for (var t = 0, e = arguments[0].getChildBoundables().iterator(); e.hasNext();) {
                  var r = e.next();
                  if (r instanceof Ph) {
                    var i = this.depth(r);
                    i > t && (t = i);
                  }
                }
                return t + 1
              }
            }, Oh.prototype.createParentBoundables = function (t, e) {
              Ru.isTrue(!t.isEmpty());
              var r = new rc;
              r.add(this.createNode(e));
              var i = new rc(t);
              Nh.sort(i, this.getComparator());
              for (var n = i.iterator(); n.hasNext();) {
                var o = n.next();
                this.lastNode(r).getChildBoundables().size() === this.getNodeCapacity() && r.add(this.createNode(e)), this.lastNode(r).addChildBoundable(o);
              }
              return r
            }, Oh.prototype.isEmpty = function () {
              return this._built ? this._root.isEmpty() : this._itemBoundables.isEmpty()
            }, Oh.prototype.interfaces_ = function () {
              return [yn]
            }, Oh.prototype.getClass = function () {
              return Oh
            }, Oh.compareDoubles = function (t, e) {
              return t > e ? 1 : t < e ? -1 : 0
            }, Ah.IntersectsOp.get = function () {
              return Fh
            }, Ah.serialVersionUID.get = function () {
              return -0x35ef64c82d4c5400
            }, Ah.DEFAULT_NODE_CAPACITY.get = function () {
              return 10
            }, Object.defineProperties(Oh, Ah);
            var Fh = function () {},
              kh = function () {};
            kh.prototype.distance = function (t, e) {}, kh.prototype.interfaces_ = function () {
              return []
            }, kh.prototype.getClass = function () {
              return kh
            };
            var Bh = function (t) {
                function e(r) {
                  r = r || e.DEFAULT_NODE_CAPACITY, t.call(this, r);
                }
                t && (e.__proto__ = t), (e.prototype = Object.create(t && t.prototype)).constructor = e;
                var r = {
                  STRtreeNode: {
                    configurable: !0
                  },
                  serialVersionUID: {
                    configurable: !0
                  },
                  xComparator: {
                    configurable: !0
                  },
                  yComparator: {
                    configurable: !0
                  },
                  intersectsOp: {
                    configurable: !0
                  },
                  DEFAULT_NODE_CAPACITY: {
                    configurable: !0
                  }
                };
                return e.prototype.createParentBoundablesFromVerticalSlices = function (t, e) {
                  Ru.isTrue(t.length > 0);
                  for (var r = new rc, i = 0; i < t.length; i++) r.addAll(this.createParentBoundablesFromVerticalSlice(t[i], e));
                  return r
                }, e.prototype.createNode = function (t) {
                  return new zh(t)
                }, e.prototype.size = function () {
                  return 0 === arguments.length ? t.prototype.size.call(this) : t.prototype.size.apply(this, arguments)
                }, e.prototype.insert = function () {
                  if (2 !== arguments.length) return t.prototype.insert.apply(this, arguments);
                  var e = arguments[0],
                    r = arguments[1];
                  if (e.isNull()) return null;
                  t.prototype.insert.call(this, e, r);
                }, e.prototype.getIntersectsOp = function () {
                  return e.intersectsOp
                }, e.prototype.verticalSlices = function (t, e) {
                  for (var r = Math.trunc(Math.ceil(t.size() / e)), i = new Array(e).fill(null), n = t.iterator(), o = 0; o < e; o++) {
                    i[o] = new rc;
                    for (var s = 0; n.hasNext() && s < r;) {
                      var a = n.next();
                      i[o].add(a), s++;
                    }
                  }
                  return i
                }, e.prototype.query = function () {
                  if (1 === arguments.length) {
                    var e = arguments[0];
                    return t.prototype.query.call(this, e)
                  }
                  if (2 === arguments.length) {
                    var r = arguments[0],
                      i = arguments[1];
                    t.prototype.query.call(this, r, i);
                  } else if (3 === arguments.length)
                    if (uu(arguments[2], Mh) && arguments[0] instanceof Object && arguments[1] instanceof Ph) {
                      var n = arguments[0],
                        o = arguments[1],
                        s = arguments[2];
                      t.prototype.query.call(this, n, o, s);
                    } else if (uu(arguments[2], ec) && arguments[0] instanceof Object && arguments[1] instanceof Ph) {
                    var a = arguments[0],
                      u = arguments[1],
                      c = arguments[2];
                    t.prototype.query.call(this, a, u, c);
                  }
                }, e.prototype.getComparator = function () {
                  return e.yComparator
                }, e.prototype.createParentBoundablesFromVerticalSlice = function (e, r) {
                  return t.prototype.createParentBoundables.call(this, e, r)
                }, e.prototype.remove = function () {
                  if (2 === arguments.length) {
                    var e = arguments[0],
                      r = arguments[1];
                    return t.prototype.remove.call(this, e, r)
                  }
                  return t.prototype.remove.apply(this, arguments)
                }, e.prototype.depth = function () {
                  return 0 === arguments.length ? t.prototype.depth.call(this) : t.prototype.depth.apply(this, arguments)
                }, e.prototype.createParentBoundables = function (t, r) {
                  Ru.isTrue(!t.isEmpty());
                  var i = Math.trunc(Math.ceil(t.size() / this.getNodeCapacity())),
                    n = new rc(t);
                  Nh.sort(n, e.xComparator);
                  var o = this.verticalSlices(n, Math.trunc(Math.ceil(Math.sqrt(i))));
                  return this.createParentBoundablesFromVerticalSlices(o, r)
                }, e.prototype.nearestNeighbour = function () {
                  if (1 === arguments.length) {
                    if (uu(arguments[0], kh)) {
                      var t = arguments[0],
                        r = new Rh(this.getRoot(), this.getRoot(), t);
                      return this.nearestNeighbour(r)
                    }
                    if (arguments[0] instanceof Rh) {
                      var i = arguments[0];
                      return this.nearestNeighbour(i, Ja.POSITIVE_INFINITY)
                    }
                  } else if (2 === arguments.length) {
                    if (arguments[0] instanceof e && uu(arguments[1], kh)) {
                      var n = arguments[0],
                        o = arguments[1],
                        s = new Rh(this.getRoot(), n.getRoot(), o);
                      return this.nearestNeighbour(s)
                    }
                    if (arguments[0] instanceof Rh && "number" == typeof arguments[1]) {
                      var a = arguments[0],
                        u = arguments[1],
                        c = null,
                        h = new Ih;
                      for (h.add(a); !h.isEmpty() && u > 0;) {
                        var l = h.poll(),
                          p = l.getDistance();
                        if (p >= u) break;
                        l.isLeaves() ? (u = p, c = l) : l.expandToQueue(h, u);
                      }
                      return [c.getBoundable(0).getItem(), c.getBoundable(1).getItem()]
                    }
                  } else if (3 === arguments.length) {
                    var f = arguments[0],
                      d = arguments[1],
                      g = arguments[2],
                      _ = new Ch(f, d),
                      y = new Rh(this.getRoot(), _, g);
                    return this.nearestNeighbour(y)[0]
                  }
                }, e.prototype.interfaces_ = function () {
                  return [Th, yn]
                }, e.prototype.getClass = function () {
                  return e
                }, e.centreX = function (t) {
                  return e.avg(t.getMinX(), t.getMaxX())
                }, e.avg = function (t, e) {
                  return (t + e) / 2
                }, e.centreY = function (t) {
                  return e.avg(t.getMinY(), t.getMaxY())
                }, r.STRtreeNode.get = function () {
                  return zh
                }, r.serialVersionUID.get = function () {
                  return 0x39920f7d5f261e0
                }, r.xComparator.get = function () {
                  return {
                    interfaces_: function () {
                      return [eu]
                    },
                    compare: function (r, i) {
                      return t.compareDoubles(e.centreX(r.getBounds()), e.centreX(i.getBounds()))
                    }
                  }
                }, r.yComparator.get = function () {
                  return {
                    interfaces_: function () {
                      return [eu]
                    },
                    compare: function (r, i) {
                      return t.compareDoubles(e.centreY(r.getBounds()), e.centreY(i.getBounds()))
                    }
                  }
                }, r.intersectsOp.get = function () {
                  return {
                    interfaces_: function () {
                      return [t.IntersectsOp]
                    },
                    intersects: function (t, e) {
                      return t.intersects(e)
                    }
                  }
                }, r.DEFAULT_NODE_CAPACITY.get = function () {
                  return 10
                }, Object.defineProperties(e, r), e
              }(Oh),
              zh = function (t) {
                function e() {
                  var e = arguments[0];
                  t.call(this, e);
                }
                return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.computeBounds = function () {
                  for (var t = null, e = this.getChildBoundables().iterator(); e.hasNext();) {
                    var r = e.next();
                    null === t ? t = new Lu(r.getBounds()) : t.expandToInclude(r.getBounds());
                  }
                  return t
                }, e.prototype.interfaces_ = function () {
                  return []
                }, e.prototype.getClass = function () {
                  return e
                }, e
              }(Ph),
              Vh = function () {};
            Vh.prototype.interfaces_ = function () {
              return []
            }, Vh.prototype.getClass = function () {
              return Vh
            }, Vh.relativeSign = function (t, e) {
              return t < e ? -1 : t > e ? 1 : 0
            }, Vh.compare = function (t, e, r) {
              if (e.equals2D(r)) return 0;
              var i = Vh.relativeSign(e.x, r.x),
                n = Vh.relativeSign(e.y, r.y);
              switch (t) {
                case 0:
                  return Vh.compareValue(i, n);
                case 1:
                  return Vh.compareValue(n, i);
                case 2:
                  return Vh.compareValue(n, -i);
                case 3:
                  return Vh.compareValue(-i, n);
                case 4:
                  return Vh.compareValue(-i, -n);
                case 5:
                  return Vh.compareValue(-n, -i);
                case 6:
                  return Vh.compareValue(-n, i);
                case 7:
                  return Vh.compareValue(i, -n)
              }
              return Ru.shouldNeverReachHere("invalid octant value"), 0
            }, Vh.compareValue = function (t, e) {
              return t < 0 ? -1 : t > 0 ? 1 : e < 0 ? -1 : e > 0 ? 1 : 0
            };
            var Uh = function () {
              this._segString = null, this.coord = null, this.segmentIndex = null, this._segmentOctant = null, this._isInterior = null;
              var t = arguments[0],
                e = arguments[1],
                r = arguments[2],
                i = arguments[3];
              this._segString = t, this.coord = new ru(e), this.segmentIndex = r, this._segmentOctant = i, this._isInterior = !e.equals2D(t.getCoordinate(r));
            };
            Uh.prototype.getCoordinate = function () {
              return this.coord
            }, Uh.prototype.print = function (t) {
              t.print(this.coord), t.print(" seg # = " + this.segmentIndex);
            }, Uh.prototype.compareTo = function (t) {
              var e = t;
              return this.segmentIndex < e.segmentIndex ? -1 : this.segmentIndex > e.segmentIndex ? 1 : this.coord.equals2D(e.coord) ? 0 : Vh.compare(this._segmentOctant, this.coord, e.coord)
            }, Uh.prototype.isEndPoint = function (t) {
              return 0 === this.segmentIndex && !this._isInterior || this.segmentIndex === t
            }, Uh.prototype.isInterior = function () {
              return this._isInterior
            }, Uh.prototype.interfaces_ = function () {
              return [$a]
            }, Uh.prototype.getClass = function () {
              return Uh
            };
            var qh = function () {
              this._nodeMap = new Cn, this._edge = null;
              var t = arguments[0];
              this._edge = t;
            };
            qh.prototype.getSplitCoordinates = function () {
              var t = new nc;
              this.addEndpoints();
              for (var e = this.iterator(), r = e.next(); e.hasNext();) {
                var i = e.next();
                this.addEdgeCoordinates(r, i, t), r = i;
              }
              return t.toCoordinateArray()
            }, qh.prototype.addCollapsedNodes = function () {
              var t = new rc;
              this.findCollapsesFromInsertedNodes(t), this.findCollapsesFromExistingVertices(t);
              for (var e = t.iterator(); e.hasNext();) {
                var r = e.next().intValue();
                this.add(this._edge.getCoordinate(r), r);
              }
            }, qh.prototype.print = function (t) {
              t.println("Intersections:");
              for (var e = this.iterator(); e.hasNext();) e.next().print(t);
            }, qh.prototype.findCollapsesFromExistingVertices = function (t) {
              for (var e = 0; e < this._edge.size() - 2; e++) {
                var r = this._edge.getCoordinate(e),
                  i = this._edge.getCoordinate(e + 2);
                r.equals2D(i) && t.add(new pu(e + 1));
              }
            }, qh.prototype.addEdgeCoordinates = function (t, e, r) {
              var i = this._edge.getCoordinate(e.segmentIndex),
                n = e.isInterior() || !e.coord.equals2D(i);
              r.add(new ru(t.coord), !1);
              for (var o = t.segmentIndex + 1; o <= e.segmentIndex; o++) r.add(this._edge.getCoordinate(o));
              n && r.add(new ru(e.coord));
            }, qh.prototype.iterator = function () {
              return this._nodeMap.values().iterator()
            }, qh.prototype.addSplitEdges = function (t) {
              this.addEndpoints(), this.addCollapsedNodes();
              for (var e = this.iterator(), r = e.next(); e.hasNext();) {
                var i = e.next(),
                  n = this.createSplitEdge(r, i);
                t.add(n), r = i;
              }
            }, qh.prototype.findCollapseIndex = function (t, e, r) {
              if (!t.coord.equals2D(e.coord)) return !1;
              var i = e.segmentIndex - t.segmentIndex;
              return e.isInterior() || i--, 1 === i && (r[0] = t.segmentIndex + 1, !0)
            }, qh.prototype.findCollapsesFromInsertedNodes = function (t) {
              for (var e = new Array(1).fill(null), r = this.iterator(), i = r.next(); r.hasNext();) {
                var n = r.next();
                this.findCollapseIndex(i, n, e) && t.add(new pu(e[0])), i = n;
              }
            }, qh.prototype.getEdge = function () {
              return this._edge
            }, qh.prototype.addEndpoints = function () {
              var t = this._edge.size() - 1;
              this.add(this._edge.getCoordinate(0), 0), this.add(this._edge.getCoordinate(t), t);
            }, qh.prototype.createSplitEdge = function (t, e) {
              var r = e.segmentIndex - t.segmentIndex + 2,
                i = this._edge.getCoordinate(e.segmentIndex),
                n = e.isInterior() || !e.coord.equals2D(i);
              n || r--;
              var o = new Array(r).fill(null),
                s = 0;
              o[s++] = new ru(t.coord);
              for (var a = t.segmentIndex + 1; a <= e.segmentIndex; a++) o[s++] = this._edge.getCoordinate(a);
              return n && (o[s] = new ru(e.coord)), new Zh(o, this._edge.getData())
            }, qh.prototype.add = function (t, e) {
              var r = new Uh(this._edge, t, e, this._edge.getSegmentOctant(e)),
                i = this._nodeMap.get(r);
              return null !== i ? (Ru.isTrue(i.coord.equals2D(t), "Found equal nodes with different coordinates"), i) : (this._nodeMap.put(r, r), r)
            }, qh.prototype.checkSplitEdgesCorrectness = function (t) {
              var e = this._edge.getCoordinates(),
                r = t.get(0).getCoordinate(0);
              if (!r.equals2D(e[0])) throw new Du("bad split edge start point at " + r);
              var i = t.get(t.size() - 1).getCoordinates(),
                n = i[i.length - 1];
              if (!n.equals2D(e[e.length - 1])) throw new Du("bad split edge end point at " + n)
            }, qh.prototype.interfaces_ = function () {
              return []
            }, qh.prototype.getClass = function () {
              return qh
            };
            var jh = function () {};
            jh.prototype.interfaces_ = function () {
              return []
            }, jh.prototype.getClass = function () {
              return jh
            }, jh.octant = function () {
              if ("number" == typeof arguments[0] && "number" == typeof arguments[1]) {
                var t = arguments[0],
                  e = arguments[1];
                if (0 === t && 0 === e) throw new Ka("Cannot compute the octant for point ( " + t + ", " + e + " )");
                var r = Math.abs(t),
                  i = Math.abs(e);
                return t >= 0 ? e >= 0 ? r >= i ? 0 : 1 : r >= i ? 7 : 6 : e >= 0 ? r >= i ? 3 : 2 : r >= i ? 4 : 5
              }
              if (arguments[0] instanceof ru && arguments[1] instanceof ru) {
                var n = arguments[0],
                  o = arguments[1],
                  s = o.x - n.x,
                  a = o.y - n.y;
                if (0 === s && 0 === a) throw new Ka("Cannot compute the octant for two identical points " + n);
                return jh.octant(s, a)
              }
            };
            var Gh = function () {};
            Gh.prototype.getCoordinates = function () {}, Gh.prototype.size = function () {}, Gh.prototype.getCoordinate = function (t) {}, Gh.prototype.isClosed = function () {}, Gh.prototype.setData = function (t) {}, Gh.prototype.getData = function () {}, Gh.prototype.interfaces_ = function () {
              return []
            }, Gh.prototype.getClass = function () {
              return Gh
            };
            var Xh = function () {};
            Xh.prototype.addIntersection = function (t, e) {}, Xh.prototype.interfaces_ = function () {
              return [Gh]
            }, Xh.prototype.getClass = function () {
              return Xh
            };
            var Zh = function () {
              this._nodeList = new qh(this), this._pts = null, this._data = null;
              var t = arguments[0],
                e = arguments[1];
              this._pts = t, this._data = e;
            };
            Zh.prototype.getCoordinates = function () {
              return this._pts
            }, Zh.prototype.size = function () {
              return this._pts.length
            }, Zh.prototype.getCoordinate = function (t) {
              return this._pts[t]
            }, Zh.prototype.isClosed = function () {
              return this._pts[0].equals(this._pts[this._pts.length - 1])
            }, Zh.prototype.getSegmentOctant = function (t) {
              return t === this._pts.length - 1 ? -1 : this.safeOctant(this.getCoordinate(t), this.getCoordinate(t + 1))
            }, Zh.prototype.setData = function (t) {
              this._data = t;
            }, Zh.prototype.safeOctant = function (t, e) {
              return t.equals2D(e) ? 0 : jh.octant(t, e)
            }, Zh.prototype.getData = function () {
              return this._data
            }, Zh.prototype.addIntersection = function () {
              if (2 === arguments.length) {
                var t = arguments[0],
                  e = arguments[1];
                this.addIntersectionNode(t, e);
              } else if (4 === arguments.length) {
                var r = arguments[0],
                  i = arguments[1],
                  n = arguments[3],
                  o = new ru(r.getIntersection(n));
                this.addIntersection(o, i);
              }
            }, Zh.prototype.toString = function () {
              return Pu.toLineString(new Uc(this._pts))
            }, Zh.prototype.getNodeList = function () {
              return this._nodeList
            }, Zh.prototype.addIntersectionNode = function (t, e) {
              var r = e,
                i = r + 1;
              if (i < this._pts.length) {
                var n = this._pts[i];
                t.equals2D(n) && (r = i);
              }
              return this._nodeList.add(t, r)
            }, Zh.prototype.addIntersections = function (t, e, r) {
              for (var i = 0; i < t.getIntersectionNum(); i++) this.addIntersection(t, e, r, i);
            }, Zh.prototype.interfaces_ = function () {
              return [Xh]
            }, Zh.prototype.getClass = function () {
              return Zh
            }, Zh.getNodedSubstrings = function () {
              if (1 === arguments.length) {
                var t = arguments[0],
                  e = new rc;
                return Zh.getNodedSubstrings(t, e), e
              }
              if (2 === arguments.length)
                for (var r = arguments[0], i = arguments[1], n = r.iterator(); n.hasNext();) n.next().getNodeList().addSplitEdges(i);
            };
            var Yh = function () {
                if (this.p0 = null, this.p1 = null, 0 === arguments.length) this.p0 = new ru, this.p1 = new ru;
                else if (1 === arguments.length) {
                  var t = arguments[0];
                  this.p0 = new ru(t.p0), this.p1 = new ru(t.p1);
                } else if (2 === arguments.length) this.p0 = arguments[0], this.p1 = arguments[1];
                else if (4 === arguments.length) {
                  var e = arguments[0],
                    r = arguments[1],
                    i = arguments[2],
                    n = arguments[3];
                  this.p0 = new ru(e, r), this.p1 = new ru(i, n);
                }
              },
              Wh = {
                serialVersionUID: {
                  configurable: !0
                }
              };
            Yh.prototype.minX = function () {
              return Math.min(this.p0.x, this.p1.x)
            }, Yh.prototype.orientationIndex = function () {
              if (arguments[0] instanceof Yh) {
                var t = arguments[0],
                  e = zu.orientationIndex(this.p0, this.p1, t.p0),
                  r = zu.orientationIndex(this.p0, this.p1, t.p1);
                return e >= 0 && r >= 0 ? Math.max(e, r) : e <= 0 && r <= 0 ? Math.max(e, r) : 0
              }
              if (arguments[0] instanceof ru) {
                var i = arguments[0];
                return zu.orientationIndex(this.p0, this.p1, i)
              }
            }, Yh.prototype.toGeometry = function (t) {
              return t.createLineString([this.p0, this.p1])
            }, Yh.prototype.isVertical = function () {
              return this.p0.x === this.p1.x
            }, Yh.prototype.equals = function (t) {
              if (!(t instanceof Yh)) return !1;
              var e = t;
              return this.p0.equals(e.p0) && this.p1.equals(e.p1)
            }, Yh.prototype.intersection = function (t) {
              var e = new Fu;
              return e.computeIntersection(this.p0, this.p1, t.p0, t.p1), e.hasIntersection() ? e.getIntersection(0) : null
            }, Yh.prototype.project = function () {
              if (arguments[0] instanceof ru) {
                var t = arguments[0];
                if (t.equals(this.p0) || t.equals(this.p1)) return new ru(t);
                var e = this.projectionFactor(t),
                  r = new ru;
                return r.x = this.p0.x + e * (this.p1.x - this.p0.x), r.y = this.p0.y + e * (this.p1.y - this.p0.y), r
              }
              if (arguments[0] instanceof Yh) {
                var i = arguments[0],
                  n = this.projectionFactor(i.p0),
                  o = this.projectionFactor(i.p1);
                if (n >= 1 && o >= 1) return null;
                if (n <= 0 && o <= 0) return null;
                var s = this.project(i.p0);
                n < 0 && (s = this.p0), n > 1 && (s = this.p1);
                var a = this.project(i.p1);
                return o < 0 && (a = this.p0), o > 1 && (a = this.p1), new Yh(s, a)
              }
            }, Yh.prototype.normalize = function () {
              this.p1.compareTo(this.p0) < 0 && this.reverse();
            }, Yh.prototype.angle = function () {
              return Math.atan2(this.p1.y - this.p0.y, this.p1.x - this.p0.x)
            }, Yh.prototype.getCoordinate = function (t) {
              return 0 === t ? this.p0 : this.p1
            }, Yh.prototype.distancePerpendicular = function (t) {
              return zu.distancePointLinePerpendicular(t, this.p0, this.p1)
            }, Yh.prototype.minY = function () {
              return Math.min(this.p0.y, this.p1.y)
            }, Yh.prototype.midPoint = function () {
              return Yh.midPoint(this.p0, this.p1)
            }, Yh.prototype.projectionFactor = function (t) {
              if (t.equals(this.p0)) return 0;
              if (t.equals(this.p1)) return 1;
              var e = this.p1.x - this.p0.x,
                r = this.p1.y - this.p0.y,
                i = e * e + r * r;
              return i <= 0 ? Ja.NaN : ((t.x - this.p0.x) * e + (t.y - this.p0.y) * r) / i
            }, Yh.prototype.closestPoints = function (t) {
              var e = this.intersection(t);
              if (null !== e) return [e, e];
              var r = new Array(2).fill(null),
                i = Ja.MAX_VALUE,
                n = null,
                o = this.closestPoint(t.p0);
              i = o.distance(t.p0), r[0] = o, r[1] = t.p0;
              var s = this.closestPoint(t.p1);
              (n = s.distance(t.p1)) < i && (i = n, r[0] = s, r[1] = t.p1);
              var a = t.closestPoint(this.p0);
              (n = a.distance(this.p0)) < i && (i = n, r[0] = this.p0, r[1] = a);
              var u = t.closestPoint(this.p1);
              return (n = u.distance(this.p1)) < i && (i = n, r[0] = this.p1, r[1] = u), r
            }, Yh.prototype.closestPoint = function (t) {
              var e = this.projectionFactor(t);
              return e > 0 && e < 1 ? this.project(t) : this.p0.distance(t) < this.p1.distance(t) ? this.p0 : this.p1
            }, Yh.prototype.maxX = function () {
              return Math.max(this.p0.x, this.p1.x)
            }, Yh.prototype.getLength = function () {
              return this.p0.distance(this.p1)
            }, Yh.prototype.compareTo = function (t) {
              var e = t,
                r = this.p0.compareTo(e.p0);
              return 0 !== r ? r : this.p1.compareTo(e.p1)
            }, Yh.prototype.reverse = function () {
              var t = this.p0;
              this.p0 = this.p1, this.p1 = t;
            }, Yh.prototype.equalsTopo = function (t) {
              return this.p0.equals(t.p0) && (this.p1.equals(t.p1) || this.p0.equals(t.p1)) && this.p1.equals(t.p0)
            }, Yh.prototype.lineIntersection = function (t) {
              try {
                return Eu.intersection(this.p0, this.p1, t.p0, t.p1)
              } catch (t) {
                if (!(t instanceof wu)) throw t
              }
              return null
            }, Yh.prototype.maxY = function () {
              return Math.max(this.p0.y, this.p1.y)
            }, Yh.prototype.pointAlongOffset = function (t, e) {
              var r = this.p0.x + t * (this.p1.x - this.p0.x),
                i = this.p0.y + t * (this.p1.y - this.p0.y),
                n = this.p1.x - this.p0.x,
                o = this.p1.y - this.p0.y,
                s = Math.sqrt(n * n + o * o),
                a = 0,
                u = 0;
              if (0 !== e) {
                if (s <= 0) throw new Error("Cannot compute offset from zero-length line segment");
                a = e * n / s, u = e * o / s;
              }
              return new ru(r - u, i + a)
            }, Yh.prototype.setCoordinates = function () {
              if (1 === arguments.length) {
                var t = arguments[0];
                this.setCoordinates(t.p0, t.p1);
              } else if (2 === arguments.length) {
                var e = arguments[0],
                  r = arguments[1];
                this.p0.x = e.x, this.p0.y = e.y, this.p1.x = r.x, this.p1.y = r.y;
              }
            }, Yh.prototype.segmentFraction = function (t) {
              var e = this.projectionFactor(t);
              return e < 0 ? e = 0 : (e > 1 || Ja.isNaN(e)) && (e = 1), e
            }, Yh.prototype.toString = function () {
              return "LINESTRING( " + this.p0.x + " " + this.p0.y + ", " + this.p1.x + " " + this.p1.y + ")"
            }, Yh.prototype.isHorizontal = function () {
              return this.p0.y === this.p1.y
            }, Yh.prototype.distance = function () {
              if (arguments[0] instanceof Yh) {
                var t = arguments[0];
                return zu.distanceLineLine(this.p0, this.p1, t.p0, t.p1)
              }
              if (arguments[0] instanceof ru) {
                var e = arguments[0];
                return zu.distancePointLine(e, this.p0, this.p1)
              }
            }, Yh.prototype.pointAlong = function (t) {
              var e = new ru;
              return e.x = this.p0.x + t * (this.p1.x - this.p0.x), e.y = this.p0.y + t * (this.p1.y - this.p0.y), e
            }, Yh.prototype.hashCode = function () {
              var t = Ja.doubleToLongBits(this.p0.x);
              t ^= 31 * Ja.doubleToLongBits(this.p0.y);
              var e = Math.trunc(t) ^ Math.trunc(t >> 32),
                r = Ja.doubleToLongBits(this.p1.x);
              return r ^= 31 * Ja.doubleToLongBits(this.p1.y), e ^ Math.trunc(r) ^ Math.trunc(r >> 32)
            }, Yh.prototype.interfaces_ = function () {
              return [$a, yn]
            }, Yh.prototype.getClass = function () {
              return Yh
            }, Yh.midPoint = function (t, e) {
              return new ru((t.x + e.x) / 2, (t.y + e.y) / 2)
            }, Wh.serialVersionUID.get = function () {
              return 0x2d2172135f411c00
            }, Object.defineProperties(Yh, Wh);
            var Hh = function () {
              this.tempEnv1 = new Lu, this.tempEnv2 = new Lu, this._overlapSeg1 = new Yh, this._overlapSeg2 = new Yh;
            };
            Hh.prototype.overlap = function () {
              if (2 === arguments.length);
              else if (4 === arguments.length) {
                var t = arguments[0],
                  e = arguments[1],
                  r = arguments[2],
                  i = arguments[3];
                t.getLineSegment(e, this._overlapSeg1), r.getLineSegment(i, this._overlapSeg2), this.overlap(this._overlapSeg1, this._overlapSeg2);
              }
            }, Hh.prototype.interfaces_ = function () {
              return []
            }, Hh.prototype.getClass = function () {
              return Hh
            };
            var Kh = function () {
              this._pts = null, this._start = null, this._end = null, this._env = null, this._context = null, this._id = null;
              var t = arguments[0],
                e = arguments[1],
                r = arguments[2],
                i = arguments[3];
              this._pts = t, this._start = e, this._end = r, this._context = i;
            };
            Kh.prototype.getLineSegment = function (t, e) {
              e.p0 = this._pts[t], e.p1 = this._pts[t + 1];
            }, Kh.prototype.computeSelect = function (t, e, r, i) {
              var n = this._pts[e],
                o = this._pts[r];
              if (i.tempEnv1.init(n, o), r - e == 1) return i.select(this, e), null;
              if (!t.intersects(i.tempEnv1)) return null;
              var s = Math.trunc((e + r) / 2);
              e < s && this.computeSelect(t, e, s, i), s < r && this.computeSelect(t, s, r, i);
            }, Kh.prototype.getCoordinates = function () {
              for (var t = new Array(this._end - this._start + 1).fill(null), e = 0, r = this._start; r <= this._end; r++) t[e++] = this._pts[r];
              return t
            }, Kh.prototype.computeOverlaps = function (t, e) {
              this.computeOverlapsInternal(this._start, this._end, t, t._start, t._end, e);
            }, Kh.prototype.setId = function (t) {
              this._id = t;
            }, Kh.prototype.select = function (t, e) {
              this.computeSelect(t, this._start, this._end, e);
            }, Kh.prototype.getEnvelope = function () {
              if (null === this._env) {
                var t = this._pts[this._start],
                  e = this._pts[this._end];
                this._env = new Lu(t, e);
              }
              return this._env
            }, Kh.prototype.getEndIndex = function () {
              return this._end
            }, Kh.prototype.getStartIndex = function () {
              return this._start
            }, Kh.prototype.getContext = function () {
              return this._context
            }, Kh.prototype.getId = function () {
              return this._id
            }, Kh.prototype.computeOverlapsInternal = function (t, e, r, i, n, o) {
              var s = this._pts[t],
                a = this._pts[e],
                u = r._pts[i],
                c = r._pts[n];
              if (e - t == 1 && n - i == 1) return o.overlap(this, t, r, i), null;
              if (o.tempEnv1.init(s, a), o.tempEnv2.init(u, c), !o.tempEnv1.intersects(o.tempEnv2)) return null;
              var h = Math.trunc((t + e) / 2),
                l = Math.trunc((i + n) / 2);
              t < h && (i < l && this.computeOverlapsInternal(t, h, r, i, l, o), l < n && this.computeOverlapsInternal(t, h, r, l, n, o)), h < e && (i < l && this.computeOverlapsInternal(h, e, r, i, l, o), l < n && this.computeOverlapsInternal(h, e, r, l, n, o));
            }, Kh.prototype.interfaces_ = function () {
              return []
            }, Kh.prototype.getClass = function () {
              return Kh
            };
            var Jh = function () {};
            Jh.prototype.interfaces_ = function () {
              return []
            }, Jh.prototype.getClass = function () {
              return Jh
            }, Jh.getChainStartIndices = function (t) {
              var e = 0,
                r = new rc;
              r.add(new pu(e));
              do {
                var i = Jh.findChainEnd(t, e);
                r.add(new pu(i)), e = i;
              } while (e < t.length - 1);
              return Jh.toIntArray(r)
            }, Jh.findChainEnd = function (t, e) {
              for (var r = e; r < t.length - 1 && t[r].equals2D(t[r + 1]);) r++;
              if (r >= t.length - 1) return t.length - 1;
              for (var i = mh.quadrant(t[r], t[r + 1]), n = e + 1; n < t.length && (t[n - 1].equals2D(t[n]) || mh.quadrant(t[n - 1], t[n]) === i);) n++;
              return n - 1
            }, Jh.getChains = function () {
              if (1 === arguments.length) {
                var t = arguments[0];
                return Jh.getChains(t, null)
              }
              if (2 === arguments.length) {
                for (var e = arguments[0], r = arguments[1], i = new rc, n = Jh.getChainStartIndices(e), o = 0; o < n.length - 1; o++) {
                  var s = new Kh(e, n[o], n[o + 1], r);
                  i.add(s);
                }
                return i
              }
            }, Jh.toIntArray = function (t) {
              for (var e = new Array(t.size()).fill(null), r = 0; r < e.length; r++) e[r] = t.get(r).intValue();
              return e
            };
            var Qh = function () {};
            Qh.prototype.computeNodes = function (t) {}, Qh.prototype.getNodedSubstrings = function () {}, Qh.prototype.interfaces_ = function () {
              return []
            }, Qh.prototype.getClass = function () {
              return Qh
            };
            var $h = function () {
              if (this._segInt = null, 0 === arguments.length);
              else if (1 === arguments.length) {
                var t = arguments[0];
                this.setSegmentIntersector(t);
              }
            };
            $h.prototype.setSegmentIntersector = function (t) {
              this._segInt = t;
            }, $h.prototype.interfaces_ = function () {
              return [Qh]
            }, $h.prototype.getClass = function () {
              return $h
            };
            var tl = function (t) {
                function e(e) {
                  e ? t.call(this, e) : t.call(this), this._monoChains = new rc, this._index = new Bh, this._idCounter = 0, this._nodedSegStrings = null, this._nOverlaps = 0;
                }
                t && (e.__proto__ = t), (e.prototype = Object.create(t && t.prototype)).constructor = e;
                var r = {
                  SegmentOverlapAction: {
                    configurable: !0
                  }
                };
                return e.prototype.getMonotoneChains = function () {
                  return this._monoChains
                }, e.prototype.getNodedSubstrings = function () {
                  return Zh.getNodedSubstrings(this._nodedSegStrings)
                }, e.prototype.getIndex = function () {
                  return this._index
                }, e.prototype.add = function (t) {
                  for (var e = Jh.getChains(t.getCoordinates(), t).iterator(); e.hasNext();) {
                    var r = e.next();
                    r.setId(this._idCounter++), this._index.insert(r.getEnvelope(), r), this._monoChains.add(r);
                  }
                }, e.prototype.computeNodes = function (t) {
                  this._nodedSegStrings = t;
                  for (var e = t.iterator(); e.hasNext();) this.add(e.next());
                  this.intersectChains();
                }, e.prototype.intersectChains = function () {
                  for (var t = new el(this._segInt), e = this._monoChains.iterator(); e.hasNext();)
                    for (var r = e.next(), i = this._index.query(r.getEnvelope()).iterator(); i.hasNext();) {
                      var n = i.next();
                      if (n.getId() > r.getId() && (r.computeOverlaps(n, t), this._nOverlaps++), this._segInt.isDone()) return null
                    }
                }, e.prototype.interfaces_ = function () {
                  return []
                }, e.prototype.getClass = function () {
                  return e
                }, r.SegmentOverlapAction.get = function () {
                  return el
                }, Object.defineProperties(e, r), e
              }($h),
              el = function (t) {
                function e() {
                  t.call(this), this._si = null;
                  var e = arguments[0];
                  this._si = e;
                }
                return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.overlap = function () {
                  if (4 !== arguments.length) return t.prototype.overlap.apply(this, arguments);
                  var e = arguments[0],
                    r = arguments[1],
                    i = arguments[2],
                    n = arguments[3],
                    o = e.getContext(),
                    s = i.getContext();
                  this._si.processIntersections(o, r, s, n);
                }, e.prototype.interfaces_ = function () {
                  return []
                }, e.prototype.getClass = function () {
                  return e
                }, e
              }(Hh),
              rl = function t() {
                if (this._quadrantSegments = t.DEFAULT_QUADRANT_SEGMENTS, this._endCapStyle = t.CAP_ROUND, this._joinStyle = t.JOIN_ROUND, this._mitreLimit = t.DEFAULT_MITRE_LIMIT, this._isSingleSided = !1, this._simplifyFactor = t.DEFAULT_SIMPLIFY_FACTOR, 0 === arguments.length);
                else if (1 === arguments.length) {
                  var e = arguments[0];
                  this.setQuadrantSegments(e);
                } else if (2 === arguments.length) {
                  var r = arguments[0],
                    i = arguments[1];
                  this.setQuadrantSegments(r), this.setEndCapStyle(i);
                } else if (4 === arguments.length) {
                  var n = arguments[0],
                    o = arguments[1],
                    s = arguments[2],
                    a = arguments[3];
                  this.setQuadrantSegments(n), this.setEndCapStyle(o), this.setJoinStyle(s), this.setMitreLimit(a);
                }
              },
              il = {
                CAP_ROUND: {
                  configurable: !0
                },
                CAP_FLAT: {
                  configurable: !0
                },
                CAP_SQUARE: {
                  configurable: !0
                },
                JOIN_ROUND: {
                  configurable: !0
                },
                JOIN_MITRE: {
                  configurable: !0
                },
                JOIN_BEVEL: {
                  configurable: !0
                },
                DEFAULT_QUADRANT_SEGMENTS: {
                  configurable: !0
                },
                DEFAULT_MITRE_LIMIT: {
                  configurable: !0
                },
                DEFAULT_SIMPLIFY_FACTOR: {
                  configurable: !0
                }
              };
            rl.prototype.getEndCapStyle = function () {
              return this._endCapStyle
            }, rl.prototype.isSingleSided = function () {
              return this._isSingleSided
            }, rl.prototype.setQuadrantSegments = function (t) {
              this._quadrantSegments = t, 0 === this._quadrantSegments && (this._joinStyle = rl.JOIN_BEVEL), this._quadrantSegments < 0 && (this._joinStyle = rl.JOIN_MITRE, this._mitreLimit = Math.abs(this._quadrantSegments)), t <= 0 && (this._quadrantSegments = 1), this._joinStyle !== rl.JOIN_ROUND && (this._quadrantSegments = rl.DEFAULT_QUADRANT_SEGMENTS);
            }, rl.prototype.getJoinStyle = function () {
              return this._joinStyle
            }, rl.prototype.setJoinStyle = function (t) {
              this._joinStyle = t;
            }, rl.prototype.setSimplifyFactor = function (t) {
              this._simplifyFactor = t < 0 ? 0 : t;
            }, rl.prototype.getSimplifyFactor = function () {
              return this._simplifyFactor
            }, rl.prototype.getQuadrantSegments = function () {
              return this._quadrantSegments
            }, rl.prototype.setEndCapStyle = function (t) {
              this._endCapStyle = t;
            }, rl.prototype.getMitreLimit = function () {
              return this._mitreLimit
            }, rl.prototype.setMitreLimit = function (t) {
              this._mitreLimit = t;
            }, rl.prototype.setSingleSided = function (t) {
              this._isSingleSided = t;
            }, rl.prototype.interfaces_ = function () {
              return []
            }, rl.prototype.getClass = function () {
              return rl
            }, rl.bufferDistanceError = function (t) {
              var e = Math.PI / 2 / t;
              return 1 - Math.cos(e / 2)
            }, il.CAP_ROUND.get = function () {
              return 1
            }, il.CAP_FLAT.get = function () {
              return 2
            }, il.CAP_SQUARE.get = function () {
              return 3
            }, il.JOIN_ROUND.get = function () {
              return 1
            }, il.JOIN_MITRE.get = function () {
              return 2
            }, il.JOIN_BEVEL.get = function () {
              return 3
            }, il.DEFAULT_QUADRANT_SEGMENTS.get = function () {
              return 8
            }, il.DEFAULT_MITRE_LIMIT.get = function () {
              return 5
            }, il.DEFAULT_SIMPLIFY_FACTOR.get = function () {
              return .01
            }, Object.defineProperties(rl, il);
            var nl = function (t) {
                this._distanceTol = null, this._isDeleted = null, this._angleOrientation = zu.COUNTERCLOCKWISE, this._inputLine = t || null;
              },
              ol = {
                INIT: {
                  configurable: !0
                },
                DELETE: {
                  configurable: !0
                },
                KEEP: {
                  configurable: !0
                },
                NUM_PTS_TO_CHECK: {
                  configurable: !0
                }
              };
            nl.prototype.isDeletable = function (t, e, r, i) {
              var n = this._inputLine[t],
                o = this._inputLine[e],
                s = this._inputLine[r];
              return !!this.isConcave(n, o, s) && !!this.isShallow(n, o, s, i) && this.isShallowSampled(n, o, t, r, i)
            }, nl.prototype.deleteShallowConcavities = function () {
              for (var t = 1, e = this.findNextNonDeletedIndex(t), r = this.findNextNonDeletedIndex(e), i = !1; r < this._inputLine.length;) {
                var n = !1;
                this.isDeletable(t, e, r, this._distanceTol) && (this._isDeleted[e] = nl.DELETE, n = !0, i = !0), t = n ? r : e, e = this.findNextNonDeletedIndex(t), r = this.findNextNonDeletedIndex(e);
              }
              return i
            }, nl.prototype.isShallowConcavity = function (t, e, r, i) {
              return zu.computeOrientation(t, e, r) === this._angleOrientation && zu.distancePointLine(e, t, r) < i
            }, nl.prototype.isShallowSampled = function (t, e, r, i, n) {
              var o = Math.trunc((i - r) / nl.NUM_PTS_TO_CHECK);
              o <= 0 && (o = 1);
              for (var s = r; s < i; s += o)
                if (!this.isShallow(t, e, this._inputLine[s], n)) return !1;
              return !0
            }, nl.prototype.isConcave = function (t, e, r) {
              return zu.computeOrientation(t, e, r) === this._angleOrientation
            }, nl.prototype.simplify = function (t) {
              this._distanceTol = Math.abs(t), t < 0 && (this._angleOrientation = zu.CLOCKWISE), this._isDeleted = new Array(this._inputLine.length).fill(null);
              var e = !1;
              do {
                e = this.deleteShallowConcavities();
              } while (e);
              return this.collapseLine()
            }, nl.prototype.findNextNonDeletedIndex = function (t) {
              for (var e = t + 1; e < this._inputLine.length && this._isDeleted[e] === nl.DELETE;) e++;
              return e
            }, nl.prototype.isShallow = function (t, e, r, i) {
              return zu.distancePointLine(e, t, r) < i
            }, nl.prototype.collapseLine = function () {
              for (var t = new nc, e = 0; e < this._inputLine.length; e++) this._isDeleted[e] !== nl.DELETE && t.add(this._inputLine[e]);
              return t.toCoordinateArray()
            }, nl.prototype.interfaces_ = function () {
              return []
            }, nl.prototype.getClass = function () {
              return nl
            }, nl.simplify = function (t, e) {
              return new nl(t).simplify(e)
            }, ol.INIT.get = function () {
              return 0
            }, ol.DELETE.get = function () {
              return 1
            }, ol.KEEP.get = function () {
              return 1
            }, ol.NUM_PTS_TO_CHECK.get = function () {
              return 10
            }, Object.defineProperties(nl, ol);
            var sl = function () {
                this._ptList = null, this._precisionModel = null, this._minimimVertexDistance = 0, this._ptList = new rc;
              },
              al = {
                COORDINATE_ARRAY_TYPE: {
                  configurable: !0
                }
              };
            sl.prototype.getCoordinates = function () {
              return this._ptList.toArray(sl.COORDINATE_ARRAY_TYPE)
            }, sl.prototype.setPrecisionModel = function (t) {
              this._precisionModel = t;
            }, sl.prototype.addPt = function (t) {
              var e = new ru(t);
              if (this._precisionModel.makePrecise(e), this.isRedundant(e)) return null;
              this._ptList.add(e);
            }, sl.prototype.revere = function () {}, sl.prototype.addPts = function (t, e) {
              if (e)
                for (var r = 0; r < t.length; r++) this.addPt(t[r]);
              else
                for (var i = t.length - 1; i >= 0; i--) this.addPt(t[i]);
            }, sl.prototype.isRedundant = function (t) {
              if (this._ptList.size() < 1) return !1;
              var e = this._ptList.get(this._ptList.size() - 1);
              return t.distance(e) < this._minimimVertexDistance
            }, sl.prototype.toString = function () {
              return (new Kc).createLineString(this.getCoordinates()).toString()
            }, sl.prototype.closeRing = function () {
              if (this._ptList.size() < 1) return null;
              var t = new ru(this._ptList.get(0)),
                e = this._ptList.get(this._ptList.size() - 1);
              if (t.equals(e)) return null;
              this._ptList.add(t);
            }, sl.prototype.setMinimumVertexDistance = function (t) {
              this._minimimVertexDistance = t;
            }, sl.prototype.interfaces_ = function () {
              return []
            }, sl.prototype.getClass = function () {
              return sl
            }, al.COORDINATE_ARRAY_TYPE.get = function () {
              return new Array(0).fill(null)
            }, Object.defineProperties(sl, al);
            var ul = function () {},
              cl = {
                PI_TIMES_2: {
                  configurable: !0
                },
                PI_OVER_2: {
                  configurable: !0
                },
                PI_OVER_4: {
                  configurable: !0
                },
                COUNTERCLOCKWISE: {
                  configurable: !0
                },
                CLOCKWISE: {
                  configurable: !0
                },
                NONE: {
                  configurable: !0
                }
              };
            ul.prototype.interfaces_ = function () {
              return []
            }, ul.prototype.getClass = function () {
              return ul
            }, ul.toDegrees = function (t) {
              return 180 * t / Math.PI
            }, ul.normalize = function (t) {
              for (; t > Math.PI;) t -= ul.PI_TIMES_2;
              for (; t <= -Math.PI;) t += ul.PI_TIMES_2;
              return t
            }, ul.angle = function () {
              if (1 === arguments.length) {
                var t = arguments[0];
                return Math.atan2(t.y, t.x)
              }
              if (2 === arguments.length) {
                var e = arguments[0],
                  r = arguments[1],
                  i = r.x - e.x,
                  n = r.y - e.y;
                return Math.atan2(n, i)
              }
            }, ul.isAcute = function (t, e, r) {
              var i = t.x - e.x,
                n = t.y - e.y;
              return i * (r.x - e.x) + n * (r.y - e.y) > 0
            }, ul.isObtuse = function (t, e, r) {
              var i = t.x - e.x,
                n = t.y - e.y;
              return i * (r.x - e.x) + n * (r.y - e.y) < 0
            }, ul.interiorAngle = function (t, e, r) {
              var i = ul.angle(e, t),
                n = ul.angle(e, r);
              return Math.abs(n - i)
            }, ul.normalizePositive = function (t) {
              if (t < 0) {
                for (; t < 0;) t += ul.PI_TIMES_2;
                t >= ul.PI_TIMES_2 && (t = 0);
              } else {
                for (; t >= ul.PI_TIMES_2;) t -= ul.PI_TIMES_2;
                t < 0 && (t = 0);
              }
              return t
            }, ul.angleBetween = function (t, e, r) {
              var i = ul.angle(e, t),
                n = ul.angle(e, r);
              return ul.diff(i, n)
            }, ul.diff = function (t, e) {
              var r = null;
              return (r = t < e ? e - t : t - e) > Math.PI && (r = 2 * Math.PI - r), r
            }, ul.toRadians = function (t) {
              return t * Math.PI / 180
            }, ul.getTurn = function (t, e) {
              var r = Math.sin(e - t);
              return r > 0 ? ul.COUNTERCLOCKWISE : r < 0 ? ul.CLOCKWISE : ul.NONE
            }, ul.angleBetweenOriented = function (t, e, r) {
              var i = ul.angle(e, t),
                n = ul.angle(e, r) - i;
              return n <= -Math.PI ? n + ul.PI_TIMES_2 : n > Math.PI ? n - ul.PI_TIMES_2 : n
            }, cl.PI_TIMES_2.get = function () {
              return 2 * Math.PI
            }, cl.PI_OVER_2.get = function () {
              return Math.PI / 2
            }, cl.PI_OVER_4.get = function () {
              return Math.PI / 4
            }, cl.COUNTERCLOCKWISE.get = function () {
              return zu.COUNTERCLOCKWISE
            }, cl.CLOCKWISE.get = function () {
              return zu.CLOCKWISE
            }, cl.NONE.get = function () {
              return zu.COLLINEAR
            }, Object.defineProperties(ul, cl);
            var hl = function t() {
                this._maxCurveSegmentError = 0, this._filletAngleQuantum = null, this._closingSegLengthFactor = 1, this._segList = null, this._distance = 0, this._precisionModel = null, this._bufParams = null, this._li = null, this._s0 = null, this._s1 = null, this._s2 = null, this._seg0 = new Yh, this._seg1 = new Yh, this._offset0 = new Yh, this._offset1 = new Yh, this._side = 0, this._hasNarrowConcaveAngle = !1;
                var e = arguments[0],
                  r = arguments[1],
                  i = arguments[2];
                this._precisionModel = e, this._bufParams = r, this._li = new Fu, this._filletAngleQuantum = Math.PI / 2 / r.getQuadrantSegments(), r.getQuadrantSegments() >= 8 && r.getJoinStyle() === rl.JOIN_ROUND && (this._closingSegLengthFactor = t.MAX_CLOSING_SEG_LEN_FACTOR), this.init(i);
              },
              ll = {
                OFFSET_SEGMENT_SEPARATION_FACTOR: {
                  configurable: !0
                },
                INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR: {
                  configurable: !0
                },
                CURVE_VERTEX_SNAP_DISTANCE_FACTOR: {
                  configurable: !0
                },
                MAX_CLOSING_SEG_LEN_FACTOR: {
                  configurable: !0
                }
              };
            hl.prototype.addNextSegment = function (t, e) {
              if (this._s0 = this._s1, this._s1 = this._s2, this._s2 = t, this._seg0.setCoordinates(this._s0, this._s1), this.computeOffsetSegment(this._seg0, this._side, this._distance, this._offset0), this._seg1.setCoordinates(this._s1, this._s2), this.computeOffsetSegment(this._seg1, this._side, this._distance, this._offset1), this._s1.equals(this._s2)) return null;
              var r = zu.computeOrientation(this._s0, this._s1, this._s2),
                i = r === zu.CLOCKWISE && this._side === nh.LEFT || r === zu.COUNTERCLOCKWISE && this._side === nh.RIGHT;
              0 === r ? this.addCollinear(e) : i ? this.addOutsideTurn(r, e) : this.addInsideTurn(r, e);
            }, hl.prototype.addLineEndCap = function (t, e) {
              var r = new Yh(t, e),
                i = new Yh;
              this.computeOffsetSegment(r, nh.LEFT, this._distance, i);
              var n = new Yh;
              this.computeOffsetSegment(r, nh.RIGHT, this._distance, n);
              var o = e.x - t.x,
                s = e.y - t.y,
                a = Math.atan2(s, o);
              switch (this._bufParams.getEndCapStyle()) {
                case rl.CAP_ROUND:
                  this._segList.addPt(i.p1), this.addFilletArc(e, a + Math.PI / 2, a - Math.PI / 2, zu.CLOCKWISE, this._distance), this._segList.addPt(n.p1);
                  break;
                case rl.CAP_FLAT:
                  this._segList.addPt(i.p1), this._segList.addPt(n.p1);
                  break;
                case rl.CAP_SQUARE:
                  var u = new ru;
                  u.x = Math.abs(this._distance) * Math.cos(a), u.y = Math.abs(this._distance) * Math.sin(a);
                  var c = new ru(i.p1.x + u.x, i.p1.y + u.y),
                    h = new ru(n.p1.x + u.x, n.p1.y + u.y);
                  this._segList.addPt(c), this._segList.addPt(h);
              }
            }, hl.prototype.getCoordinates = function () {
              return this._segList.getCoordinates()
            }, hl.prototype.addMitreJoin = function (t, e, r, i) {
              var n = !0,
                o = null;
              try {
                o = Eu.intersection(e.p0, e.p1, r.p0, r.p1), (i <= 0 ? 1 : o.distance(t) / Math.abs(i)) > this._bufParams.getMitreLimit() && (n = !1);
              } catch (t) {
                if (!(t instanceof wu)) throw t;
                o = new ru(0, 0), n = !1;
              }
              n ? this._segList.addPt(o) : this.addLimitedMitreJoin(e, r, i, this._bufParams.getMitreLimit());
            }, hl.prototype.addFilletCorner = function (t, e, r, i, n) {
              var o = e.x - t.x,
                s = e.y - t.y,
                a = Math.atan2(s, o),
                u = r.x - t.x,
                c = r.y - t.y,
                h = Math.atan2(c, u);
              i === zu.CLOCKWISE ? a <= h && (a += 2 * Math.PI) : a >= h && (a -= 2 * Math.PI), this._segList.addPt(e), this.addFilletArc(t, a, h, i, n), this._segList.addPt(r);
            }, hl.prototype.addOutsideTurn = function (t, e) {
              if (this._offset0.p1.distance(this._offset1.p0) < this._distance * hl.OFFSET_SEGMENT_SEPARATION_FACTOR) return this._segList.addPt(this._offset0.p1), null;
              this._bufParams.getJoinStyle() === rl.JOIN_MITRE ? this.addMitreJoin(this._s1, this._offset0, this._offset1, this._distance) : this._bufParams.getJoinStyle() === rl.JOIN_BEVEL ? this.addBevelJoin(this._offset0, this._offset1) : (e && this._segList.addPt(this._offset0.p1), this.addFilletCorner(this._s1, this._offset0.p1, this._offset1.p0, t, this._distance), this._segList.addPt(this._offset1.p0));
            }, hl.prototype.createSquare = function (t) {
              this._segList.addPt(new ru(t.x + this._distance, t.y + this._distance)), this._segList.addPt(new ru(t.x + this._distance, t.y - this._distance)), this._segList.addPt(new ru(t.x - this._distance, t.y - this._distance)), this._segList.addPt(new ru(t.x - this._distance, t.y + this._distance)), this._segList.closeRing();
            }, hl.prototype.addSegments = function (t, e) {
              this._segList.addPts(t, e);
            }, hl.prototype.addFirstSegment = function () {
              this._segList.addPt(this._offset1.p0);
            }, hl.prototype.addLastSegment = function () {
              this._segList.addPt(this._offset1.p1);
            }, hl.prototype.initSideSegments = function (t, e, r) {
              this._s1 = t, this._s2 = e, this._side = r, this._seg1.setCoordinates(t, e), this.computeOffsetSegment(this._seg1, r, this._distance, this._offset1);
            }, hl.prototype.addLimitedMitreJoin = function (t, e, r, i) {
              var n = this._seg0.p1,
                o = ul.angle(n, this._seg0.p0),
                s = ul.angleBetweenOriented(this._seg0.p0, n, this._seg1.p1) / 2,
                a = ul.normalize(o + s),
                u = ul.normalize(a + Math.PI),
                c = i * r,
                h = r - c * Math.abs(Math.sin(s)),
                l = n.x + c * Math.cos(u),
                p = n.y + c * Math.sin(u),
                f = new ru(l, p),
                d = new Yh(n, f),
                g = d.pointAlongOffset(1, h),
                _ = d.pointAlongOffset(1, -h);
              this._side === nh.LEFT ? (this._segList.addPt(g), this._segList.addPt(_)) : (this._segList.addPt(_), this._segList.addPt(g));
            }, hl.prototype.computeOffsetSegment = function (t, e, r, i) {
              var n = e === nh.LEFT ? 1 : -1,
                o = t.p1.x - t.p0.x,
                s = t.p1.y - t.p0.y,
                a = Math.sqrt(o * o + s * s),
                u = n * r * o / a,
                c = n * r * s / a;
              i.p0.x = t.p0.x - c, i.p0.y = t.p0.y + u, i.p1.x = t.p1.x - c, i.p1.y = t.p1.y + u;
            }, hl.prototype.addFilletArc = function (t, e, r, i, n) {
              var o = i === zu.CLOCKWISE ? -1 : 1,
                s = Math.abs(e - r),
                a = Math.trunc(s / this._filletAngleQuantum + .5);
              if (a < 1) return null;
              for (var u = s / a, c = 0, h = new ru; c < s;) {
                var l = e + o * c;
                h.x = t.x + n * Math.cos(l), h.y = t.y + n * Math.sin(l), this._segList.addPt(h), c += u;
              }
            }, hl.prototype.addInsideTurn = function (t, e) {
              if (this._li.computeIntersection(this._offset0.p0, this._offset0.p1, this._offset1.p0, this._offset1.p1), this._li.hasIntersection()) this._segList.addPt(this._li.getIntersection(0));
              else if (this._hasNarrowConcaveAngle = !0, this._offset0.p1.distance(this._offset1.p0) < this._distance * hl.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR) this._segList.addPt(this._offset0.p1);
              else {
                if (this._segList.addPt(this._offset0.p1), this._closingSegLengthFactor > 0) {
                  var r = new ru((this._closingSegLengthFactor * this._offset0.p1.x + this._s1.x) / (this._closingSegLengthFactor + 1), (this._closingSegLengthFactor * this._offset0.p1.y + this._s1.y) / (this._closingSegLengthFactor + 1));
                  this._segList.addPt(r);
                  var i = new ru((this._closingSegLengthFactor * this._offset1.p0.x + this._s1.x) / (this._closingSegLengthFactor + 1), (this._closingSegLengthFactor * this._offset1.p0.y + this._s1.y) / (this._closingSegLengthFactor + 1));
                  this._segList.addPt(i);
                } else this._segList.addPt(this._s1);
                this._segList.addPt(this._offset1.p0);
              }
            }, hl.prototype.createCircle = function (t) {
              var e = new ru(t.x + this._distance, t.y);
              this._segList.addPt(e), this.addFilletArc(t, 0, 2 * Math.PI, -1, this._distance), this._segList.closeRing();
            }, hl.prototype.addBevelJoin = function (t, e) {
              this._segList.addPt(t.p1), this._segList.addPt(e.p0);
            }, hl.prototype.init = function (t) {
              this._distance = t, this._maxCurveSegmentError = t * (1 - Math.cos(this._filletAngleQuantum / 2)), this._segList = new sl, this._segList.setPrecisionModel(this._precisionModel), this._segList.setMinimumVertexDistance(t * hl.CURVE_VERTEX_SNAP_DISTANCE_FACTOR);
            }, hl.prototype.addCollinear = function (t) {
              this._li.computeIntersection(this._s0, this._s1, this._s1, this._s2), this._li.getIntersectionNum() >= 2 && (this._bufParams.getJoinStyle() === rl.JOIN_BEVEL || this._bufParams.getJoinStyle() === rl.JOIN_MITRE ? (t && this._segList.addPt(this._offset0.p1), this._segList.addPt(this._offset1.p0)) : this.addFilletCorner(this._s1, this._offset0.p1, this._offset1.p0, zu.CLOCKWISE, this._distance));
            }, hl.prototype.closeRing = function () {
              this._segList.closeRing();
            }, hl.prototype.hasNarrowConcaveAngle = function () {
              return this._hasNarrowConcaveAngle
            }, hl.prototype.interfaces_ = function () {
              return []
            }, hl.prototype.getClass = function () {
              return hl
            }, ll.OFFSET_SEGMENT_SEPARATION_FACTOR.get = function () {
              return .001
            }, ll.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get = function () {
              return .001
            }, ll.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get = function () {
              return 1e-6
            }, ll.MAX_CLOSING_SEG_LEN_FACTOR.get = function () {
              return 80
            }, Object.defineProperties(hl, ll);
            var pl = function () {
              this._distance = 0, this._precisionModel = null, this._bufParams = null;
              var t = arguments[0],
                e = arguments[1];
              this._precisionModel = t, this._bufParams = e;
            };
            pl.prototype.getOffsetCurve = function (t, e) {
              if (this._distance = e, 0 === e) return null;
              var r = e < 0,
                i = Math.abs(e),
                n = this.getSegGen(i);
              t.length <= 1 ? this.computePointCurve(t[0], n) : this.computeOffsetCurve(t, r, n);
              var o = n.getCoordinates();
              return r && oc.reverse(o), o
            }, pl.prototype.computeSingleSidedBufferCurve = function (t, e, r) {
              var i = this.simplifyTolerance(this._distance);
              if (e) {
                r.addSegments(t, !0);
                var n = nl.simplify(t, -i),
                  o = n.length - 1;
                r.initSideSegments(n[o], n[o - 1], nh.LEFT), r.addFirstSegment();
                for (var s = o - 2; s >= 0; s--) r.addNextSegment(n[s], !0);
              } else {
                r.addSegments(t, !1);
                var a = nl.simplify(t, i),
                  u = a.length - 1;
                r.initSideSegments(a[0], a[1], nh.LEFT), r.addFirstSegment();
                for (var c = 2; c <= u; c++) r.addNextSegment(a[c], !0);
              }
              r.addLastSegment(), r.closeRing();
            }, pl.prototype.computeRingBufferCurve = function (t, e, r) {
              var i = this.simplifyTolerance(this._distance);
              e === nh.RIGHT && (i = -i);
              var n = nl.simplify(t, i),
                o = n.length - 1;
              r.initSideSegments(n[o - 1], n[0], e);
              for (var s = 1; s <= o; s++) {
                var a = 1 !== s;
                r.addNextSegment(n[s], a);
              }
              r.closeRing();
            }, pl.prototype.computeLineBufferCurve = function (t, e) {
              var r = this.simplifyTolerance(this._distance),
                i = nl.simplify(t, r),
                n = i.length - 1;
              e.initSideSegments(i[0], i[1], nh.LEFT);
              for (var o = 2; o <= n; o++) e.addNextSegment(i[o], !0);
              e.addLastSegment(), e.addLineEndCap(i[n - 1], i[n]);
              var s = nl.simplify(t, -r),
                a = s.length - 1;
              e.initSideSegments(s[a], s[a - 1], nh.LEFT);
              for (var u = a - 2; u >= 0; u--) e.addNextSegment(s[u], !0);
              e.addLastSegment(), e.addLineEndCap(s[1], s[0]), e.closeRing();
            }, pl.prototype.computePointCurve = function (t, e) {
              switch (this._bufParams.getEndCapStyle()) {
                case rl.CAP_ROUND:
                  e.createCircle(t);
                  break;
                case rl.CAP_SQUARE:
                  e.createSquare(t);
              }
            }, pl.prototype.getLineCurve = function (t, e) {
              if (this._distance = e, e < 0 && !this._bufParams.isSingleSided()) return null;
              if (0 === e) return null;
              var r = Math.abs(e),
                i = this.getSegGen(r);
              if (t.length <= 1) this.computePointCurve(t[0], i);
              else if (this._bufParams.isSingleSided()) {
                var n = e < 0;
                this.computeSingleSidedBufferCurve(t, n, i);
              } else this.computeLineBufferCurve(t, i);
              return i.getCoordinates()
            }, pl.prototype.getBufferParameters = function () {
              return this._bufParams
            }, pl.prototype.simplifyTolerance = function (t) {
              return t * this._bufParams.getSimplifyFactor()
            }, pl.prototype.getRingCurve = function (t, e, r) {
              if (this._distance = r, t.length <= 2) return this.getLineCurve(t, r);
              if (0 === r) return pl.copyCoordinates(t);
              var i = this.getSegGen(r);
              return this.computeRingBufferCurve(t, e, i), i.getCoordinates()
            }, pl.prototype.computeOffsetCurve = function (t, e, r) {
              var i = this.simplifyTolerance(this._distance);
              if (e) {
                var n = nl.simplify(t, -i),
                  o = n.length - 1;
                r.initSideSegments(n[o], n[o - 1], nh.LEFT), r.addFirstSegment();
                for (var s = o - 2; s >= 0; s--) r.addNextSegment(n[s], !0);
              } else {
                var a = nl.simplify(t, i),
                  u = a.length - 1;
                r.initSideSegments(a[0], a[1], nh.LEFT), r.addFirstSegment();
                for (var c = 2; c <= u; c++) r.addNextSegment(a[c], !0);
              }
              r.addLastSegment();
            }, pl.prototype.getSegGen = function (t) {
              return new hl(this._precisionModel, this._bufParams, t)
            }, pl.prototype.interfaces_ = function () {
              return []
            }, pl.prototype.getClass = function () {
              return pl
            }, pl.copyCoordinates = function (t) {
              for (var e = new Array(t.length).fill(null), r = 0; r < e.length; r++) e[r] = new ru(t[r]);
              return e
            };
            var fl = function () {
                this._subgraphs = null, this._seg = new Yh, this._cga = new zu;
                var t = arguments[0];
                this._subgraphs = t;
              },
              dl = {
                DepthSegment: {
                  configurable: !0
                }
              };
            fl.prototype.findStabbedSegments = function () {
              if (1 === arguments.length) {
                for (var t = arguments[0], e = new rc, r = this._subgraphs.iterator(); r.hasNext();) {
                  var i = r.next(),
                    n = i.getEnvelope();
                  t.y < n.getMinY() || t.y > n.getMaxY() || this.findStabbedSegments(t, i.getDirectedEdges(), e);
                }
                return e
              }
              if (3 === arguments.length)
                if (uu(arguments[2], ec) && arguments[0] instanceof ru && arguments[1] instanceof wh) {
                  for (var o = arguments[0], s = arguments[1], a = arguments[2], u = s.getEdge().getCoordinates(), c = 0; c < u.length - 1; c++)
                    if (this._seg.p0 = u[c], this._seg.p1 = u[c + 1], this._seg.p0.y > this._seg.p1.y && this._seg.reverse(), !(Math.max(this._seg.p0.x, this._seg.p1.x) < o.x || this._seg.isHorizontal() || o.y < this._seg.p0.y || o.y > this._seg.p1.y || zu.computeOrientation(this._seg.p0, this._seg.p1, o) === zu.RIGHT)) {
                      var h = s.getDepth(nh.LEFT);
                      this._seg.p0.equals(u[c]) || (h = s.getDepth(nh.RIGHT));
                      var l = new gl(this._seg, h);
                      a.add(l);
                    }
                } else if (uu(arguments[2], ec) && arguments[0] instanceof ru && uu(arguments[1], ec))
                for (var p = arguments[0], f = arguments[1], d = arguments[2], g = f.iterator(); g.hasNext();) {
                  var _ = g.next();
                  _.isForward() && this.findStabbedSegments(p, _, d);
                }
            }, fl.prototype.getDepth = function (t) {
              var e = this.findStabbedSegments(t);
              return 0 === e.size() ? 0 : Nh.min(e)._leftDepth
            }, fl.prototype.interfaces_ = function () {
              return []
            }, fl.prototype.getClass = function () {
              return fl
            }, dl.DepthSegment.get = function () {
              return gl
            }, Object.defineProperties(fl, dl);
            var gl = function () {
              this._upwardSeg = null, this._leftDepth = null;
              var t = arguments[0],
                e = arguments[1];
              this._upwardSeg = new Yh(t), this._leftDepth = e;
            };
            gl.prototype.compareTo = function (t) {
              var e = t;
              if (this._upwardSeg.minX() >= e._upwardSeg.maxX()) return 1;
              if (this._upwardSeg.maxX() <= e._upwardSeg.minX()) return -1;
              var r = this._upwardSeg.orientationIndex(e._upwardSeg);
              return 0 !== r ? r : 0 != (r = -1 * e._upwardSeg.orientationIndex(this._upwardSeg)) ? r : this._upwardSeg.compareTo(e._upwardSeg)
            }, gl.prototype.compareX = function (t, e) {
              var r = t.p0.compareTo(e.p0);
              return 0 !== r ? r : t.p1.compareTo(e.p1)
            }, gl.prototype.toString = function () {
              return this._upwardSeg.toString()
            }, gl.prototype.interfaces_ = function () {
              return [$a]
            }, gl.prototype.getClass = function () {
              return gl
            };
            var _l = function (t, e, r) {
              this.p0 = t || null, this.p1 = e || null, this.p2 = r || null;
            };
            _l.prototype.area = function () {
              return _l.area(this.p0, this.p1, this.p2)
            }, _l.prototype.signedArea = function () {
              return _l.signedArea(this.p0, this.p1, this.p2)
            }, _l.prototype.interpolateZ = function (t) {
              if (null === t) throw new Ka("Supplied point is null.");
              return _l.interpolateZ(t, this.p0, this.p1, this.p2)
            }, _l.prototype.longestSideLength = function () {
              return _l.longestSideLength(this.p0, this.p1, this.p2)
            }, _l.prototype.isAcute = function () {
              return _l.isAcute(this.p0, this.p1, this.p2)
            }, _l.prototype.circumcentre = function () {
              return _l.circumcentre(this.p0, this.p1, this.p2)
            }, _l.prototype.area3D = function () {
              return _l.area3D(this.p0, this.p1, this.p2)
            }, _l.prototype.centroid = function () {
              return _l.centroid(this.p0, this.p1, this.p2)
            }, _l.prototype.inCentre = function () {
              return _l.inCentre(this.p0, this.p1, this.p2)
            }, _l.prototype.interfaces_ = function () {
              return []
            }, _l.prototype.getClass = function () {
              return _l
            }, _l.area = function (t, e, r) {
              return Math.abs(((r.x - t.x) * (e.y - t.y) - (e.x - t.x) * (r.y - t.y)) / 2)
            }, _l.signedArea = function (t, e, r) {
              return ((r.x - t.x) * (e.y - t.y) - (e.x - t.x) * (r.y - t.y)) / 2
            }, _l.det = function (t, e, r, i) {
              return t * i - e * r
            }, _l.interpolateZ = function (t, e, r, i) {
              var n = e.x,
                o = e.y,
                s = r.x - n,
                a = i.x - n,
                u = r.y - o,
                c = i.y - o,
                h = s * c - a * u,
                l = t.x - n,
                p = t.y - o,
                f = (c * l - a * p) / h,
                d = (-u * l + s * p) / h;
              return e.z + f * (r.z - e.z) + d * (i.z - e.z)
            }, _l.longestSideLength = function (t, e, r) {
              var i = t.distance(e),
                n = e.distance(r),
                o = r.distance(t),
                s = i;
              return n > s && (s = n), o > s && (s = o), s
            }, _l.isAcute = function (t, e, r) {
              return !!ul.isAcute(t, e, r) && !!ul.isAcute(e, r, t) && !!ul.isAcute(r, t, e)
            }, _l.circumcentre = function (t, e, r) {
              var i = r.x,
                n = r.y,
                o = t.x - i,
                s = t.y - n,
                a = e.x - i,
                u = e.y - n,
                c = 2 * _l.det(o, s, a, u),
                h = _l.det(s, o * o + s * s, u, a * a + u * u),
                l = _l.det(o, o * o + s * s, a, a * a + u * u);
              return new ru(i - h / c, n + l / c)
            }, _l.perpendicularBisector = function (t, e) {
              var r = e.x - t.x,
                i = e.y - t.y,
                n = new Eu(t.x + r / 2, t.y + i / 2, 1),
                o = new Eu(t.x - i + r / 2, t.y + r + i / 2, 1);
              return new Eu(n, o)
            }, _l.angleBisector = function (t, e, r) {
              var i = e.distance(t),
                n = i / (i + e.distance(r)),
                o = r.x - t.x,
                s = r.y - t.y;
              return new ru(t.x + n * o, t.y + n * s)
            }, _l.area3D = function (t, e, r) {
              var i = e.x - t.x,
                n = e.y - t.y,
                o = e.z - t.z,
                s = r.x - t.x,
                a = r.y - t.y,
                u = r.z - t.z,
                c = n * u - o * a,
                h = o * s - i * u,
                l = i * a - n * s,
                p = c * c + h * h + l * l;
              return Math.sqrt(p) / 2
            }, _l.centroid = function (t, e, r) {
              var i = (t.x + e.x + r.x) / 3,
                n = (t.y + e.y + r.y) / 3;
              return new ru(i, n)
            }, _l.inCentre = function (t, e, r) {
              var i = e.distance(r),
                n = t.distance(r),
                o = t.distance(e),
                s = i + n + o,
                a = (i * t.x + n * e.x + o * r.x) / s,
                u = (i * t.y + n * e.y + o * r.y) / s;
              return new ru(a, u)
            };
            var yl = function () {
              this._inputGeom = null, this._distance = null, this._curveBuilder = null, this._curveList = new rc;
              var t = arguments[0],
                e = arguments[1],
                r = arguments[2];
              this._inputGeom = t, this._distance = e, this._curveBuilder = r;
            };
            yl.prototype.addPoint = function (t) {
              if (this._distance <= 0) return null;
              var e = t.getCoordinates(),
                r = this._curveBuilder.getLineCurve(e, this._distance);
              this.addCurve(r, su.EXTERIOR, su.INTERIOR);
            }, yl.prototype.addPolygon = function (t) {
              var e = this._distance,
                r = nh.LEFT;
              this._distance < 0 && (e = -this._distance, r = nh.RIGHT);
              var i = t.getExteriorRing(),
                n = oc.removeRepeatedPoints(i.getCoordinates());
              if (this._distance < 0 && this.isErodedCompletely(i, this._distance)) return null;
              if (this._distance <= 0 && n.length < 3) return null;
              this.addPolygonRing(n, e, r, su.EXTERIOR, su.INTERIOR);
              for (var o = 0; o < t.getNumInteriorRing(); o++) {
                var s = t.getInteriorRingN(o),
                  a = oc.removeRepeatedPoints(s.getCoordinates());
                this._distance > 0 && this.isErodedCompletely(s, -this._distance) || this.addPolygonRing(a, e, nh.opposite(r), su.INTERIOR, su.EXTERIOR);
              }
            }, yl.prototype.isTriangleErodedCompletely = function (t, e) {
              var r = new _l(t[0], t[1], t[2]),
                i = r.inCentre();
              return zu.distancePointLine(i, r.p0, r.p1) < Math.abs(e)
            }, yl.prototype.addLineString = function (t) {
              if (this._distance <= 0 && !this._curveBuilder.getBufferParameters().isSingleSided()) return null;
              var e = oc.removeRepeatedPoints(t.getCoordinates()),
                r = this._curveBuilder.getLineCurve(e, this._distance);
              this.addCurve(r, su.EXTERIOR, su.INTERIOR);
            }, yl.prototype.addCurve = function (t, e, r) {
              if (null === t || t.length < 2) return null;
              var i = new Zh(t, new lh(0, su.BOUNDARY, e, r));
              this._curveList.add(i);
            }, yl.prototype.getCurves = function () {
              return this.add(this._inputGeom), this._curveList
            }, yl.prototype.addPolygonRing = function (t, e, r, i, n) {
              if (0 === e && t.length < Oc.MINIMUM_VALID_SIZE) return null;
              var o = i,
                s = n;
              t.length >= Oc.MINIMUM_VALID_SIZE && zu.isCCW(t) && (o = n, s = i, r = nh.opposite(r));
              var a = this._curveBuilder.getRingCurve(t, r, e);
              this.addCurve(a, o, s);
            }, yl.prototype.add = function (t) {
              if (t.isEmpty()) return null;
              t instanceof Nc ? this.addPolygon(t) : t instanceof Mc ? this.addLineString(t) : t instanceof Pc ? this.addPoint(t) : t instanceof Rc ? this.addCollection(t) : t instanceof bc ? this.addCollection(t) : t instanceof Ac ? this.addCollection(t) : t instanceof wc && this.addCollection(t);
            }, yl.prototype.isErodedCompletely = function (t, e) {
              var r = t.getCoordinates();
              if (r.length < 4) return e < 0;
              if (4 === r.length) return this.isTriangleErodedCompletely(r, e);
              var i = t.getEnvelopeInternal(),
                n = Math.min(i.getHeight(), i.getWidth());
              return e < 0 && 2 * Math.abs(e) > n
            }, yl.prototype.addCollection = function (t) {
              for (var e = 0; e < t.getNumGeometries(); e++) {
                var r = t.getGeometryN(e);
                this.add(r);
              }
            }, yl.prototype.interfaces_ = function () {
              return []
            }, yl.prototype.getClass = function () {
              return yl
            };
            var ml = function () {};
            ml.prototype.locate = function (t) {}, ml.prototype.interfaces_ = function () {
              return []
            }, ml.prototype.getClass = function () {
              return ml
            };
            var vl = function () {
              this._parent = null, this._atStart = null, this._max = null, this._index = null, this._subcollectionIterator = null;
              var t = arguments[0];
              this._parent = t, this._atStart = !0, this._index = 0, this._max = t.getNumGeometries();
            };
            vl.prototype.next = function () {
              if (this._atStart) return this._atStart = !1, vl.isAtomic(this._parent) && this._index++, this._parent;
              if (null !== this._subcollectionIterator) {
                if (this._subcollectionIterator.hasNext()) return this._subcollectionIterator.next();
                this._subcollectionIterator = null;
              }
              if (this._index >= this._max) throw new mn;
              var t = this._parent.getGeometryN(this._index++);
              return t instanceof wc ? (this._subcollectionIterator = new vl(t), this._subcollectionIterator.next()) : t
            }, vl.prototype.remove = function () {
              throw new Error(this.getClass().getName())
            }, vl.prototype.hasNext = function () {
              if (this._atStart) return !0;
              if (null !== this._subcollectionIterator) {
                if (this._subcollectionIterator.hasNext()) return !0;
                this._subcollectionIterator = null;
              }
              return !(this._index >= this._max)
            }, vl.prototype.interfaces_ = function () {
              return [tc]
            }, vl.prototype.getClass = function () {
              return vl
            }, vl.isAtomic = function (t) {
              return !(t instanceof wc)
            };
            var xl = function () {
              this._geom = null;
              var t = arguments[0];
              this._geom = t;
            };
            xl.prototype.locate = function (t) {
              return xl.locate(t, this._geom)
            }, xl.prototype.interfaces_ = function () {
              return [ml]
            }, xl.prototype.getClass = function () {
              return xl
            }, xl.isPointInRing = function (t, e) {
              return !!e.getEnvelopeInternal().intersects(t) && zu.isPointInRing(t, e.getCoordinates())
            }, xl.containsPointInPolygon = function (t, e) {
              if (e.isEmpty()) return !1;
              var r = e.getExteriorRing();
              if (!xl.isPointInRing(t, r)) return !1;
              for (var i = 0; i < e.getNumInteriorRing(); i++) {
                var n = e.getInteriorRingN(i);
                if (xl.isPointInRing(t, n)) return !1
              }
              return !0
            }, xl.containsPoint = function (t, e) {
              if (e instanceof Nc) return xl.containsPointInPolygon(t, e);
              if (e instanceof wc)
                for (var r = new vl(e); r.hasNext();) {
                  var i = r.next();
                  if (i !== e && xl.containsPoint(t, i)) return !0
                }
              return !1
            }, xl.locate = function (t, e) {
              return e.isEmpty() ? su.EXTERIOR : xl.containsPoint(t, e) ? su.INTERIOR : su.EXTERIOR
            };
            var wl = function () {
              this._edgeMap = new Cn, this._edgeList = null, this._ptInAreaLocation = [su.NONE, su.NONE];
            };
            wl.prototype.getNextCW = function (t) {
              this.getEdges();
              var e = this._edgeList.indexOf(t),
                r = e - 1;
              return 0 === e && (r = this._edgeList.size() - 1), this._edgeList.get(r)
            }, wl.prototype.propagateSideLabels = function (t) {
              for (var e = su.NONE, r = this.iterator(); r.hasNext();) {
                var i = r.next().getLabel();
                i.isArea(t) && i.getLocation(t, nh.LEFT) !== su.NONE && (e = i.getLocation(t, nh.LEFT));
              }
              if (e === su.NONE) return null;
              for (var n = e, o = this.iterator(); o.hasNext();) {
                var s = o.next(),
                  a = s.getLabel();
                if (a.getLocation(t, nh.ON) === su.NONE && a.setLocation(t, nh.ON, n), a.isArea(t)) {
                  var u = a.getLocation(t, nh.LEFT),
                    c = a.getLocation(t, nh.RIGHT);
                  if (c !== su.NONE) {
                    if (c !== n) throw new ah("side location conflict", s.getCoordinate());
                    u === su.NONE && Ru.shouldNeverReachHere("found single null side (at " + s.getCoordinate() + ")"), n = u;
                  } else Ru.isTrue(a.getLocation(t, nh.LEFT) === su.NONE, "found single null side"), a.setLocation(t, nh.RIGHT, n), a.setLocation(t, nh.LEFT, n);
                }
              }
            }, wl.prototype.getCoordinate = function () {
              var t = this.iterator();
              return t.hasNext() ? t.next().getCoordinate() : null
            }, wl.prototype.print = function (t) {
              bu.out.println("EdgeEndStar:   " + this.getCoordinate());
              for (var e = this.iterator(); e.hasNext();) e.next().print(t);
            }, wl.prototype.isAreaLabelsConsistent = function (t) {
              return this.computeEdgeEndLabels(t.getBoundaryNodeRule()), this.checkAreaLabelsConsistent(0)
            }, wl.prototype.checkAreaLabelsConsistent = function (t) {
              var e = this.getEdges();
              if (e.size() <= 0) return !0;
              var r = e.size() - 1,
                i = e.get(r).getLabel().getLocation(t, nh.LEFT);
              Ru.isTrue(i !== su.NONE, "Found unlabelled area edge");
              for (var n = i, o = this.iterator(); o.hasNext();) {
                var s = o.next().getLabel();
                Ru.isTrue(s.isArea(t), "Found non-area edge");
                var a = s.getLocation(t, nh.LEFT),
                  u = s.getLocation(t, nh.RIGHT);
                if (a === u) return !1;
                if (u !== n) return !1;
                n = a;
              }
              return !0
            }, wl.prototype.findIndex = function (t) {
              this.iterator();
              for (var e = 0; e < this._edgeList.size(); e++)
                if (this._edgeList.get(e) === t) return e;
              return -1
            }, wl.prototype.iterator = function () {
              return this.getEdges().iterator()
            }, wl.prototype.getEdges = function () {
              return null === this._edgeList && (this._edgeList = new rc(this._edgeMap.values())), this._edgeList
            }, wl.prototype.getLocation = function (t, e, r) {
              return this._ptInAreaLocation[t] === su.NONE && (this._ptInAreaLocation[t] = xl.locate(e, r[t].getGeometry())), this._ptInAreaLocation[t]
            }, wl.prototype.toString = function () {
              var t = new lu;
              t.append("EdgeEndStar:   " + this.getCoordinate()), t.append("\n");
              for (var e = this.iterator(); e.hasNext();) {
                var r = e.next();
                t.append(r), t.append("\n");
              }
              return t.toString()
            }, wl.prototype.computeEdgeEndLabels = function (t) {
              for (var e = this.iterator(); e.hasNext();) e.next().computeLabel(t);
            }, wl.prototype.computeLabelling = function (t) {
              this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()), this.propagateSideLabels(0), this.propagateSideLabels(1);
              for (var e = [!1, !1], r = this.iterator(); r.hasNext();)
                for (var i = r.next().getLabel(), n = 0; n < 2; n++) i.isLine(n) && i.getLocation(n) === su.BOUNDARY && (e[n] = !0);
              for (var o = this.iterator(); o.hasNext();)
                for (var s = o.next(), a = s.getLabel(), u = 0; u < 2; u++)
                  if (a.isAnyNull(u)) {
                    var c = su.NONE;
                    if (e[u]) c = su.EXTERIOR;
                    else {
                      var h = s.getCoordinate();
                      c = this.getLocation(u, h, t);
                    }
                    a.setAllLocationsIfNull(u, c);
                  }
            }, wl.prototype.getDegree = function () {
              return this._edgeMap.size()
            }, wl.prototype.insertEdgeEnd = function (t, e) {
              this._edgeMap.put(t, e), this._edgeList = null;
            }, wl.prototype.interfaces_ = function () {
              return []
            }, wl.prototype.getClass = function () {
              return wl
            };
            var bl = function (t) {
                function e() {
                  t.call(this), this._resultAreaEdgeList = null, this._label = null, this._SCANNING_FOR_INCOMING = 1, this._LINKING_TO_OUTGOING = 2;
                }
                return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.linkResultDirectedEdges = function () {
                  this.getResultAreaEdges();
                  for (var t = null, e = null, r = this._SCANNING_FOR_INCOMING, i = 0; i < this._resultAreaEdgeList.size(); i++) {
                    var n = this._resultAreaEdgeList.get(i),
                      o = n.getSym();
                    if (n.getLabel().isArea()) switch (null === t && n.isInResult() && (t = n), r) {
                      case this._SCANNING_FOR_INCOMING:
                        if (!o.isInResult()) continue;
                        e = o, r = this._LINKING_TO_OUTGOING;
                        break;
                      case this._LINKING_TO_OUTGOING:
                        if (!n.isInResult()) continue;
                        e.setNext(n), r = this._SCANNING_FOR_INCOMING;
                    }
                  }
                  if (r === this._LINKING_TO_OUTGOING) {
                    if (null === t) throw new ah("no outgoing dirEdge found", this.getCoordinate());
                    Ru.isTrue(t.isInResult(), "unable to link last incoming dirEdge"), e.setNext(t);
                  }
                }, e.prototype.insert = function (t) {
                  var e = t;
                  this.insertEdgeEnd(e, e);
                }, e.prototype.getRightmostEdge = function () {
                  var t = this.getEdges(),
                    e = t.size();
                  if (e < 1) return null;
                  var r = t.get(0);
                  if (1 === e) return r;
                  var i = t.get(e - 1),
                    n = r.getQuadrant(),
                    o = i.getQuadrant();
                  return mh.isNorthern(n) && mh.isNorthern(o) ? r : mh.isNorthern(n) || mh.isNorthern(o) ? 0 !== r.getDy() ? r : 0 !== i.getDy() ? i : (Ru.shouldNeverReachHere("found two horizontal edges incident on node"), null) : i
                }, e.prototype.print = function (t) {
                  bu.out.println("DirectedEdgeStar: " + this.getCoordinate());
                  for (var e = this.iterator(); e.hasNext();) {
                    var r = e.next();
                    t.print("out "), r.print(t), t.println(), t.print("in "), r.getSym().print(t), t.println();
                  }
                }, e.prototype.getResultAreaEdges = function () {
                  if (null !== this._resultAreaEdgeList) return this._resultAreaEdgeList;
                  this._resultAreaEdgeList = new rc;
                  for (var t = this.iterator(); t.hasNext();) {
                    var e = t.next();
                    (e.isInResult() || e.getSym().isInResult()) && this._resultAreaEdgeList.add(e);
                  }
                  return this._resultAreaEdgeList
                }, e.prototype.updateLabelling = function (t) {
                  for (var e = this.iterator(); e.hasNext();) {
                    var r = e.next().getLabel();
                    r.setAllLocationsIfNull(0, t.getLocation(0)), r.setAllLocationsIfNull(1, t.getLocation(1));
                  }
                }, e.prototype.linkAllDirectedEdges = function () {
                  this.getEdges();
                  for (var t = null, e = null, r = this._edgeList.size() - 1; r >= 0; r--) {
                    var i = this._edgeList.get(r),
                      n = i.getSym();
                    null === e && (e = n), null !== t && n.setNext(t), t = i;
                  }
                  e.setNext(t);
                }, e.prototype.computeDepths = function () {
                  if (1 === arguments.length) {
                    var t = arguments[0],
                      e = this.findIndex(t),
                      r = t.getDepth(nh.LEFT),
                      i = t.getDepth(nh.RIGHT),
                      n = this.computeDepths(e + 1, this._edgeList.size(), r);
                    if (this.computeDepths(0, e, n) !== i) throw new ah("depth mismatch at " + t.getCoordinate())
                  } else if (3 === arguments.length) {
                    for (var o = arguments[0], s = arguments[1], a = arguments[2], u = o; u < s; u++) {
                      var c = this._edgeList.get(u);
                      c.setEdgeDepths(nh.RIGHT, a), a = c.getDepth(nh.LEFT);
                    }
                    return a
                  }
                }, e.prototype.mergeSymLabels = function () {
                  for (var t = this.iterator(); t.hasNext();) {
                    var e = t.next();
                    e.getLabel().merge(e.getSym().getLabel());
                  }
                }, e.prototype.linkMinimalDirectedEdges = function (t) {
                  for (var e = null, r = null, i = this._SCANNING_FOR_INCOMING, n = this._resultAreaEdgeList.size() - 1; n >= 0; n--) {
                    var o = this._resultAreaEdgeList.get(n),
                      s = o.getSym();
                    switch (null === e && o.getEdgeRing() === t && (e = o), i) {
                      case this._SCANNING_FOR_INCOMING:
                        if (s.getEdgeRing() !== t) continue;
                        r = s, i = this._LINKING_TO_OUTGOING;
                        break;
                      case this._LINKING_TO_OUTGOING:
                        if (o.getEdgeRing() !== t) continue;
                        r.setNextMin(o), i = this._SCANNING_FOR_INCOMING;
                    }
                  }
                  i === this._LINKING_TO_OUTGOING && (Ru.isTrue(null !== e, "found null for first outgoing dirEdge"), Ru.isTrue(e.getEdgeRing() === t, "unable to link last incoming dirEdge"), r.setNextMin(e));
                }, e.prototype.getOutgoingDegree = function () {
                  if (0 === arguments.length) {
                    for (var t = 0, e = this.iterator(); e.hasNext();) e.next().isInResult() && t++;
                    return t
                  }
                  if (1 === arguments.length) {
                    for (var r = arguments[0], i = 0, n = this.iterator(); n.hasNext();) n.next().getEdgeRing() === r && i++;
                    return i
                  }
                }, e.prototype.getLabel = function () {
                  return this._label
                }, e.prototype.findCoveredLineEdges = function () {
                  for (var t = su.NONE, e = this.iterator(); e.hasNext();) {
                    var r = e.next(),
                      i = r.getSym();
                    if (!r.isLineEdge()) {
                      if (r.isInResult()) {
                        t = su.INTERIOR;
                        break
                      }
                      if (i.isInResult()) {
                        t = su.EXTERIOR;
                        break
                      }
                    }
                  }
                  if (t === su.NONE) return null;
                  for (var n = t, o = this.iterator(); o.hasNext();) {
                    var s = o.next(),
                      a = s.getSym();
                    s.isLineEdge() ? s.getEdge().setCovered(n === su.INTERIOR) : (s.isInResult() && (n = su.EXTERIOR), a.isInResult() && (n = su.INTERIOR));
                  }
                }, e.prototype.computeLabelling = function (e) {
                  t.prototype.computeLabelling.call(this, e), this._label = new lh(su.NONE);
                  for (var r = this.iterator(); r.hasNext();)
                    for (var i = r.next().getEdge().getLabel(), n = 0; n < 2; n++) {
                      var o = i.getLocation(n);
                      o !== su.INTERIOR && o !== su.BOUNDARY || this._label.setLocation(n, su.INTERIOR);
                    }
                }, e.prototype.interfaces_ = function () {
                  return []
                }, e.prototype.getClass = function () {
                  return e
                }, e
              }(wl),
              El = function (t) {
                function e() {
                  t.apply(this, arguments);
                }
                return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.createNode = function (t) {
                  return new _h(t, new bl)
                }, e.prototype.interfaces_ = function () {
                  return []
                }, e.prototype.getClass = function () {
                  return e
                }, e
              }(bh),
              Ll = function t() {
                this._pts = null, this._orientation = null;
                var e = arguments[0];
                this._pts = e, this._orientation = t.orientation(e);
              };
            Ll.prototype.compareTo = function (t) {
              var e = t;
              return Ll.compareOriented(this._pts, this._orientation, e._pts, e._orientation)
            }, Ll.prototype.interfaces_ = function () {
              return [$a]
            }, Ll.prototype.getClass = function () {
              return Ll
            }, Ll.orientation = function (t) {
              return 1 === oc.increasingDirection(t)
            }, Ll.compareOriented = function (t, e, r, i) {
              for (var n = e ? 1 : -1, o = i ? 1 : -1, s = e ? t.length : -1, a = i ? r.length : -1, u = e ? 0 : t.length - 1, c = i ? 0 : r.length - 1;;) {
                var h = t[u].compareTo(r[c]);
                if (0 !== h) return h;
                var l = (u += n) === s,
                  p = (c += o) === a;
                if (l && !p) return -1;
                if (!l && p) return 1;
                if (l && p) return 0
              }
            };
            var Sl = function () {
              this._edges = new rc, this._ocaMap = new Cn;
            };
            Sl.prototype.print = function (t) {
              t.print("MULTILINESTRING ( ");
              for (var e = 0; e < this._edges.size(); e++) {
                var r = this._edges.get(e);
                e > 0 && t.print(","), t.print("(");
                for (var i = r.getCoordinates(), n = 0; n < i.length; n++) n > 0 && t.print(","), t.print(i[n].x + " " + i[n].y);
                t.println(")");
              }
              t.print(")  ");
            }, Sl.prototype.addAll = function (t) {
              for (var e = t.iterator(); e.hasNext();) this.add(e.next());
            }, Sl.prototype.findEdgeIndex = function (t) {
              for (var e = 0; e < this._edges.size(); e++)
                if (this._edges.get(e).equals(t)) return e;
              return -1
            }, Sl.prototype.iterator = function () {
              return this._edges.iterator()
            }, Sl.prototype.getEdges = function () {
              return this._edges
            }, Sl.prototype.get = function (t) {
              return this._edges.get(t)
            }, Sl.prototype.findEqualEdge = function (t) {
              var e = new Ll(t.getCoordinates());
              return this._ocaMap.get(e)
            }, Sl.prototype.add = function (t) {
              this._edges.add(t);
              var e = new Ll(t.getCoordinates());
              this._ocaMap.put(e, t);
            }, Sl.prototype.interfaces_ = function () {
              return []
            }, Sl.prototype.getClass = function () {
              return Sl
            };
            var Cl = function () {};
            Cl.prototype.processIntersections = function (t, e, r, i) {}, Cl.prototype.isDone = function () {}, Cl.prototype.interfaces_ = function () {
              return []
            }, Cl.prototype.getClass = function () {
              return Cl
            };
            var Il = function () {
              this._hasIntersection = !1, this._hasProper = !1, this._hasProperInterior = !1, this._hasInterior = !1, this._properIntersectionPoint = null, this._li = null, this._isSelfIntersection = null, this.numIntersections = 0, this.numInteriorIntersections = 0, this.numProperIntersections = 0, this.numTests = 0;
              var t = arguments[0];
              this._li = t;
            };
            Il.prototype.isTrivialIntersection = function (t, e, r, i) {
              if (t === r && 1 === this._li.getIntersectionNum()) {
                if (Il.isAdjacentSegments(e, i)) return !0;
                if (t.isClosed()) {
                  var n = t.size() - 1;
                  if (0 === e && i === n || 0 === i && e === n) return !0
                }
              }
              return !1
            }, Il.prototype.getProperIntersectionPoint = function () {
              return this._properIntersectionPoint
            }, Il.prototype.hasProperInteriorIntersection = function () {
              return this._hasProperInterior
            }, Il.prototype.getLineIntersector = function () {
              return this._li
            }, Il.prototype.hasProperIntersection = function () {
              return this._hasProper
            }, Il.prototype.processIntersections = function (t, e, r, i) {
              if (t === r && e === i) return null;
              this.numTests++;
              var n = t.getCoordinates()[e],
                o = t.getCoordinates()[e + 1],
                s = r.getCoordinates()[i],
                a = r.getCoordinates()[i + 1];
              this._li.computeIntersection(n, o, s, a), this._li.hasIntersection() && (this.numIntersections++, this._li.isInteriorIntersection() && (this.numInteriorIntersections++, this._hasInterior = !0), this.isTrivialIntersection(t, e, r, i) || (this._hasIntersection = !0, t.addIntersections(this._li, e, 0), r.addIntersections(this._li, i, 1), this._li.isProper() && (this.numProperIntersections++, this._hasProper = !0, this._hasProperInterior = !0)));
            }, Il.prototype.hasIntersection = function () {
              return this._hasIntersection
            }, Il.prototype.isDone = function () {
              return !1
            }, Il.prototype.hasInteriorIntersection = function () {
              return this._hasInterior
            }, Il.prototype.interfaces_ = function () {
              return [Cl]
            }, Il.prototype.getClass = function () {
              return Il
            }, Il.isAdjacentSegments = function (t, e) {
              return 1 === Math.abs(t - e)
            };
            var Ml = function () {
              this.coord = null, this.segmentIndex = null, this.dist = null;
              var t = arguments[0],
                e = arguments[1],
                r = arguments[2];
              this.coord = new ru(t), this.segmentIndex = e, this.dist = r;
            };
            Ml.prototype.getSegmentIndex = function () {
              return this.segmentIndex
            }, Ml.prototype.getCoordinate = function () {
              return this.coord
            }, Ml.prototype.print = function (t) {
              t.print(this.coord), t.print(" seg # = " + this.segmentIndex), t.println(" dist = " + this.dist);
            }, Ml.prototype.compareTo = function (t) {
              var e = t;
              return this.compare(e.segmentIndex, e.dist)
            }, Ml.prototype.isEndPoint = function (t) {
              return 0 === this.segmentIndex && 0 === this.dist || this.segmentIndex === t
            }, Ml.prototype.toString = function () {
              return this.coord + " seg # = " + this.segmentIndex + " dist = " + this.dist
            }, Ml.prototype.getDistance = function () {
              return this.dist
            }, Ml.prototype.compare = function (t, e) {
              return this.segmentIndex < t ? -1 : this.segmentIndex > t ? 1 : this.dist < e ? -1 : this.dist > e ? 1 : 0
            }, Ml.prototype.interfaces_ = function () {
              return [$a]
            }, Ml.prototype.getClass = function () {
              return Ml
            };
            var Tl = function () {
              this._nodeMap = new Cn, this.edge = null;
              var t = arguments[0];
              this.edge = t;
            };
            Tl.prototype.print = function (t) {
              t.println("Intersections:");
              for (var e = this.iterator(); e.hasNext();) e.next().print(t);
            }, Tl.prototype.iterator = function () {
              return this._nodeMap.values().iterator()
            }, Tl.prototype.addSplitEdges = function (t) {
              this.addEndpoints();
              for (var e = this.iterator(), r = e.next(); e.hasNext();) {
                var i = e.next(),
                  n = this.createSplitEdge(r, i);
                t.add(n), r = i;
              }
            }, Tl.prototype.addEndpoints = function () {
              var t = this.edge.pts.length - 1;
              this.add(this.edge.pts[0], 0, 0), this.add(this.edge.pts[t], t, 0);
            }, Tl.prototype.createSplitEdge = function (t, e) {
              var r = e.segmentIndex - t.segmentIndex + 2,
                i = this.edge.pts[e.segmentIndex],
                n = e.dist > 0 || !e.coord.equals2D(i);
              n || r--;
              var o = new Array(r).fill(null),
                s = 0;
              o[s++] = new ru(t.coord);
              for (var a = t.segmentIndex + 1; a <= e.segmentIndex; a++) o[s++] = this.edge.pts[a];
              return n && (o[s] = e.coord), new Ol(o, new lh(this.edge._label))
            }, Tl.prototype.add = function (t, e, r) {
              var i = new Ml(t, e, r),
                n = this._nodeMap.get(i);
              return null !== n ? n : (this._nodeMap.put(i, i), i)
            }, Tl.prototype.isIntersection = function (t) {
              for (var e = this.iterator(); e.hasNext();)
                if (e.next().coord.equals(t)) return !0;
              return !1
            }, Tl.prototype.interfaces_ = function () {
              return []
            }, Tl.prototype.getClass = function () {
              return Tl
            };
            var Pl = function () {};
            Pl.prototype.getChainStartIndices = function (t) {
              var e = 0,
                r = new rc;
              r.add(new pu(e));
              do {
                var i = this.findChainEnd(t, e);
                r.add(new pu(i)), e = i;
              } while (e < t.length - 1);
              return Pl.toIntArray(r)
            }, Pl.prototype.findChainEnd = function (t, e) {
              for (var r = mh.quadrant(t[e], t[e + 1]), i = e + 1; i < t.length && mh.quadrant(t[i - 1], t[i]) === r;) i++;
              return i - 1
            }, Pl.prototype.interfaces_ = function () {
              return []
            }, Pl.prototype.getClass = function () {
              return Pl
            }, Pl.toIntArray = function (t) {
              for (var e = new Array(t.size()).fill(null), r = 0; r < e.length; r++) e[r] = t.get(r).intValue();
              return e
            };
            var Dl = function () {
              this.e = null, this.pts = null, this.startIndex = null, this.env1 = new Lu, this.env2 = new Lu;
              var t = arguments[0];
              this.e = t, this.pts = t.getCoordinates();
              var e = new Pl;
              this.startIndex = e.getChainStartIndices(this.pts);
            };
            Dl.prototype.getCoordinates = function () {
              return this.pts
            }, Dl.prototype.getMaxX = function (t) {
              var e = this.pts[this.startIndex[t]].x,
                r = this.pts[this.startIndex[t + 1]].x;
              return e > r ? e : r
            }, Dl.prototype.getMinX = function (t) {
              var e = this.pts[this.startIndex[t]].x,
                r = this.pts[this.startIndex[t + 1]].x;
              return e < r ? e : r
            }, Dl.prototype.computeIntersectsForChain = function () {
              if (4 === arguments.length) {
                var t = arguments[0],
                  e = arguments[1],
                  r = arguments[2],
                  i = arguments[3];
                this.computeIntersectsForChain(this.startIndex[t], this.startIndex[t + 1], e, e.startIndex[r], e.startIndex[r + 1], i);
              } else if (6 === arguments.length) {
                var n = arguments[0],
                  o = arguments[1],
                  s = arguments[2],
                  a = arguments[3],
                  u = arguments[4],
                  c = arguments[5],
                  h = this.pts[n],
                  l = this.pts[o],
                  p = s.pts[a],
                  f = s.pts[u];
                if (o - n == 1 && u - a == 1) return c.addIntersections(this.e, n, s.e, a), null;
                if (this.env1.init(h, l), this.env2.init(p, f), !this.env1.intersects(this.env2)) return null;
                var d = Math.trunc((n + o) / 2),
                  g = Math.trunc((a + u) / 2);
                n < d && (a < g && this.computeIntersectsForChain(n, d, s, a, g, c), g < u && this.computeIntersectsForChain(n, d, s, g, u, c)), d < o && (a < g && this.computeIntersectsForChain(d, o, s, a, g, c), g < u && this.computeIntersectsForChain(d, o, s, g, u, c));
              }
            }, Dl.prototype.getStartIndexes = function () {
              return this.startIndex
            }, Dl.prototype.computeIntersects = function (t, e) {
              for (var r = 0; r < this.startIndex.length - 1; r++)
                for (var i = 0; i < t.startIndex.length - 1; i++) this.computeIntersectsForChain(r, t, i, e);
            }, Dl.prototype.interfaces_ = function () {
              return []
            }, Dl.prototype.getClass = function () {
              return Dl
            };
            var Nl = function t() {
                this._depth = Array(2).fill().map(function () {
                  return Array(3)
                });
                for (var e = 0; e < 2; e++)
                  for (var r = 0; r < 3; r++) this._depth[e][r] = t.NULL_VALUE;
              },
              Rl = {
                NULL_VALUE: {
                  configurable: !0
                }
              };
            Nl.prototype.getDepth = function (t, e) {
              return this._depth[t][e]
            }, Nl.prototype.setDepth = function (t, e, r) {
              this._depth[t][e] = r;
            }, Nl.prototype.isNull = function () {
              if (0 === arguments.length) {
                for (var t = 0; t < 2; t++)
                  for (var e = 0; e < 3; e++)
                    if (this._depth[t][e] !== Nl.NULL_VALUE) return !1;
                return !0
              }
              if (1 === arguments.length) {
                var r = arguments[0];
                return this._depth[r][1] === Nl.NULL_VALUE
              }
              if (2 === arguments.length) {
                var i = arguments[0],
                  n = arguments[1];
                return this._depth[i][n] === Nl.NULL_VALUE
              }
            }, Nl.prototype.normalize = function () {
              for (var t = 0; t < 2; t++)
                if (!this.isNull(t)) {
                  var e = this._depth[t][1];
                  this._depth[t][2] < e && (e = this._depth[t][2]), e < 0 && (e = 0);
                  for (var r = 1; r < 3; r++) {
                    var i = 0;
                    this._depth[t][r] > e && (i = 1), this._depth[t][r] = i;
                  }
                }
            }, Nl.prototype.getDelta = function (t) {
              return this._depth[t][nh.RIGHT] - this._depth[t][nh.LEFT]
            }, Nl.prototype.getLocation = function (t, e) {
              return this._depth[t][e] <= 0 ? su.EXTERIOR : su.INTERIOR
            }, Nl.prototype.toString = function () {
              return "A: " + this._depth[0][1] + "," + this._depth[0][2] + " B: " + this._depth[1][1] + "," + this._depth[1][2]
            }, Nl.prototype.add = function () {
              if (1 === arguments.length)
                for (var t = arguments[0], e = 0; e < 2; e++)
                  for (var r = 1; r < 3; r++) {
                    var i = t.getLocation(e, r);
                    i !== su.EXTERIOR && i !== su.INTERIOR || (this.isNull(e, r) ? this._depth[e][r] = Nl.depthAtLocation(i) : this._depth[e][r] += Nl.depthAtLocation(i));
                  } else if (3 === arguments.length) {
                    var n = arguments[0],
                      o = arguments[1];
                    arguments[2] === su.INTERIOR && this._depth[n][o]++;
                  }
            }, Nl.prototype.interfaces_ = function () {
              return []
            }, Nl.prototype.getClass = function () {
              return Nl
            }, Nl.depthAtLocation = function (t) {
              return t === su.EXTERIOR ? 0 : t === su.INTERIOR ? 1 : Nl.NULL_VALUE
            }, Rl.NULL_VALUE.get = function () {
              return -1
            }, Object.defineProperties(Nl, Rl);
            var Ol = function (t) {
                function e() {
                  if (t.call(this), this.pts = null, this._env = null, this.eiList = new Tl(this), this._name = null, this._mce = null, this._isIsolated = !0, this._depth = new Nl, this._depthDelta = 0, 1 === arguments.length) {
                    var r = arguments[0];
                    e.call(this, r, null);
                  } else if (2 === arguments.length) {
                    var i = arguments[0],
                      n = arguments[1];
                    this.pts = i, this._label = n;
                  }
                }
                return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.getDepth = function () {
                  return this._depth
                }, e.prototype.getCollapsedEdge = function () {
                  var t = new Array(2).fill(null);
                  return t[0] = this.pts[0], t[1] = this.pts[1], new e(t, lh.toLineLabel(this._label))
                }, e.prototype.isIsolated = function () {
                  return this._isIsolated
                }, e.prototype.getCoordinates = function () {
                  return this.pts
                }, e.prototype.setIsolated = function (t) {
                  this._isIsolated = t;
                }, e.prototype.setName = function (t) {
                  this._name = t;
                }, e.prototype.equals = function (t) {
                  if (!(t instanceof e)) return !1;
                  var r = t;
                  if (this.pts.length !== r.pts.length) return !1;
                  for (var i = !0, n = !0, o = this.pts.length, s = 0; s < this.pts.length; s++)
                    if (this.pts[s].equals2D(r.pts[s]) || (i = !1), this.pts[s].equals2D(r.pts[--o]) || (n = !1), !i && !n) return !1;
                  return !0
                }, e.prototype.getCoordinate = function () {
                  if (0 === arguments.length) return this.pts.length > 0 ? this.pts[0] : null;
                  if (1 === arguments.length) {
                    var t = arguments[0];
                    return this.pts[t]
                  }
                }, e.prototype.print = function (t) {
                  t.print("edge " + this._name + ": "), t.print("LINESTRING (");
                  for (var e = 0; e < this.pts.length; e++) e > 0 && t.print(","), t.print(this.pts[e].x + " " + this.pts[e].y);
                  t.print(")  " + this._label + " " + this._depthDelta);
                }, e.prototype.computeIM = function (t) {
                  e.updateIM(this._label, t);
                }, e.prototype.isCollapsed = function () {
                  return !!this._label.isArea() && 3 === this.pts.length && !!this.pts[0].equals(this.pts[2])
                }, e.prototype.isClosed = function () {
                  return this.pts[0].equals(this.pts[this.pts.length - 1])
                }, e.prototype.getMaximumSegmentIndex = function () {
                  return this.pts.length - 1
                }, e.prototype.getDepthDelta = function () {
                  return this._depthDelta
                }, e.prototype.getNumPoints = function () {
                  return this.pts.length
                }, e.prototype.printReverse = function (t) {
                  t.print("edge " + this._name + ": ");
                  for (var e = this.pts.length - 1; e >= 0; e--) t.print(this.pts[e] + " ");
                  t.println("");
                }, e.prototype.getMonotoneChainEdge = function () {
                  return null === this._mce && (this._mce = new Dl(this)), this._mce
                }, e.prototype.getEnvelope = function () {
                  if (null === this._env) {
                    this._env = new Lu;
                    for (var t = 0; t < this.pts.length; t++) this._env.expandToInclude(this.pts[t]);
                  }
                  return this._env
                }, e.prototype.addIntersection = function (t, e, r, i) {
                  var n = new ru(t.getIntersection(i)),
                    o = e,
                    s = t.getEdgeDistance(r, i),
                    a = o + 1;
                  if (a < this.pts.length) {
                    var u = this.pts[a];
                    n.equals2D(u) && (o = a, s = 0);
                  }
                  this.eiList.add(n, o, s);
                }, e.prototype.toString = function () {
                  var t = new lu;
                  t.append("edge " + this._name + ": "), t.append("LINESTRING (");
                  for (var e = 0; e < this.pts.length; e++) e > 0 && t.append(","), t.append(this.pts[e].x + " " + this.pts[e].y);
                  return t.append(")  " + this._label + " " + this._depthDelta), t.toString()
                }, e.prototype.isPointwiseEqual = function (t) {
                  if (this.pts.length !== t.pts.length) return !1;
                  for (var e = 0; e < this.pts.length; e++)
                    if (!this.pts[e].equals2D(t.pts[e])) return !1;
                  return !0
                }, e.prototype.setDepthDelta = function (t) {
                  this._depthDelta = t;
                }, e.prototype.getEdgeIntersectionList = function () {
                  return this.eiList
                }, e.prototype.addIntersections = function (t, e, r) {
                  for (var i = 0; i < t.getIntersectionNum(); i++) this.addIntersection(t, e, r, i);
                }, e.prototype.interfaces_ = function () {
                  return []
                }, e.prototype.getClass = function () {
                  return e
                }, e.updateIM = function () {
                  if (2 !== arguments.length) return t.prototype.updateIM.apply(this, arguments);
                  var e = arguments[0],
                    r = arguments[1];
                  r.setAtLeastIfValid(e.getLocation(0, nh.ON), e.getLocation(1, nh.ON), 1), e.isArea() && (r.setAtLeastIfValid(e.getLocation(0, nh.LEFT), e.getLocation(1, nh.LEFT), 2), r.setAtLeastIfValid(e.getLocation(0, nh.RIGHT), e.getLocation(1, nh.RIGHT), 2));
                }, e
              }(gh),
              Al = function (t) {
                this._workingPrecisionModel = null, this._workingNoder = null, this._geomFact = null, this._graph = null, this._edgeList = new Sl, this._bufParams = t || null;
              };
            Al.prototype.setWorkingPrecisionModel = function (t) {
              this._workingPrecisionModel = t;
            }, Al.prototype.insertUniqueEdge = function (t) {
              var e = this._edgeList.findEqualEdge(t);
              if (null !== e) {
                var r = e.getLabel(),
                  i = t.getLabel();
                e.isPointwiseEqual(t) || (i = new lh(t.getLabel())).flip(), r.merge(i);
                var n = Al.depthDelta(i),
                  o = e.getDepthDelta() + n;
                e.setDepthDelta(o);
              } else this._edgeList.add(t), t.setDepthDelta(Al.depthDelta(t.getLabel()));
            }, Al.prototype.buildSubgraphs = function (t, e) {
              for (var r = new rc, i = t.iterator(); i.hasNext();) {
                var n = i.next(),
                  o = n.getRightmostCoordinate(),
                  s = new fl(r).getDepth(o);
                n.computeDepth(s), n.findResultEdges(), r.add(n), e.add(n.getDirectedEdges(), n.getNodes());
              }
            }, Al.prototype.createSubgraphs = function (t) {
              for (var e = new rc, r = t.getNodes().iterator(); r.hasNext();) {
                var i = r.next();
                if (!i.isVisited()) {
                  var n = new ch;
                  n.create(i), e.add(n);
                }
              }
              return Nh.sort(e, Nh.reverseOrder()), e
            }, Al.prototype.createEmptyResultGeometry = function () {
              return this._geomFact.createPolygon()
            }, Al.prototype.getNoder = function (t) {
              if (null !== this._workingNoder) return this._workingNoder;
              var e = new tl,
                r = new Fu;
              return r.setPrecisionModel(t), e.setSegmentIntersector(new Il(r)), e
            }, Al.prototype.buffer = function (t, e) {
              var r = this._workingPrecisionModel;
              null === r && (r = t.getPrecisionModel()), this._geomFact = t.getFactory();
              var i = new pl(r, this._bufParams),
                n = new yl(t, e, i).getCurves();
              if (n.size() <= 0) return this.createEmptyResultGeometry();
              this.computeNodedEdges(n, r), this._graph = new Eh(new El), this._graph.addEdges(this._edgeList.getEdges());
              var o = this.createSubgraphs(this._graph),
                s = new Lh(this._geomFact);
              this.buildSubgraphs(o, s);
              var a = s.getPolygons();
              return a.size() <= 0 ? this.createEmptyResultGeometry() : this._geomFact.buildGeometry(a)
            }, Al.prototype.computeNodedEdges = function (t, e) {
              var r = this.getNoder(e);
              r.computeNodes(t);
              for (var i = r.getNodedSubstrings().iterator(); i.hasNext();) {
                var n = i.next(),
                  o = n.getCoordinates();
                if (2 !== o.length || !o[0].equals2D(o[1])) {
                  var s = n.getData(),
                    a = new Ol(n.getCoordinates(), new lh(s));
                  this.insertUniqueEdge(a);
                }
              }
            }, Al.prototype.setNoder = function (t) {
              this._workingNoder = t;
            }, Al.prototype.interfaces_ = function () {
              return []
            }, Al.prototype.getClass = function () {
              return Al
            }, Al.depthDelta = function (t) {
              var e = t.getLocation(0, nh.LEFT),
                r = t.getLocation(0, nh.RIGHT);
              return e === su.INTERIOR && r === su.EXTERIOR ? 1 : e === su.EXTERIOR && r === su.INTERIOR ? -1 : 0
            }, Al.convertSegStrings = function (t) {
              for (var e = new Kc, r = new rc; t.hasNext();) {
                var i = t.next(),
                  n = e.createLineString(i.getCoordinates());
                r.add(n);
              }
              return e.buildGeometry(r)
            };
            var Fl = function () {
              if (this._noder = null, this._scaleFactor = null, this._offsetX = null, this._offsetY = null, this._isScaled = !1, 2 === arguments.length) {
                var t = arguments[0],
                  e = arguments[1];
                this._noder = t, this._scaleFactor = e, this._offsetX = 0, this._offsetY = 0, this._isScaled = !this.isIntegerPrecision();
              } else if (4 === arguments.length) {
                var r = arguments[0],
                  i = arguments[1],
                  n = arguments[2],
                  o = arguments[3];
                this._noder = r, this._scaleFactor = i, this._offsetX = n, this._offsetY = o, this._isScaled = !this.isIntegerPrecision();
              }
            };
            Fl.prototype.rescale = function () {
              if (uu(arguments[0], Qu))
                for (var t = arguments[0].iterator(); t.hasNext();) {
                  var e = t.next();
                  this.rescale(e.getCoordinates());
                } else if (arguments[0] instanceof Array) {
                  for (var r = arguments[0], i = 0; i < r.length; i++) r[i].x = r[i].x / this._scaleFactor + this._offsetX, r[i].y = r[i].y / this._scaleFactor + this._offsetY;
                  2 === r.length && r[0].equals2D(r[1]) && bu.out.println(r);
                }
            }, Fl.prototype.scale = function () {
              if (uu(arguments[0], Qu)) {
                for (var t = arguments[0], e = new rc, r = t.iterator(); r.hasNext();) {
                  var i = r.next();
                  e.add(new Zh(this.scale(i.getCoordinates()), i.getData()));
                }
                return e
              }
              if (arguments[0] instanceof Array) {
                for (var n = arguments[0], o = new Array(n.length).fill(null), s = 0; s < n.length; s++) o[s] = new ru(Math.round((n[s].x - this._offsetX) * this._scaleFactor), Math.round((n[s].y - this._offsetY) * this._scaleFactor), n[s].z);
                return oc.removeRepeatedPoints(o)
              }
            }, Fl.prototype.isIntegerPrecision = function () {
              return 1 === this._scaleFactor
            }, Fl.prototype.getNodedSubstrings = function () {
              var t = this._noder.getNodedSubstrings();
              return this._isScaled && this.rescale(t), t
            }, Fl.prototype.computeNodes = function (t) {
              var e = t;
              this._isScaled && (e = this.scale(t)), this._noder.computeNodes(e);
            }, Fl.prototype.interfaces_ = function () {
              return [Qh]
            }, Fl.prototype.getClass = function () {
              return Fl
            };
            var kl = function () {
                this._li = new Fu, this._segStrings = null;
                var t = arguments[0];
                this._segStrings = t;
              },
              Bl = {
                fact: {
                  configurable: !0
                }
              };
            kl.prototype.checkEndPtVertexIntersections = function () {
              if (0 === arguments.length)
                for (var t = this._segStrings.iterator(); t.hasNext();) {
                  var e = t.next().getCoordinates();
                  this.checkEndPtVertexIntersections(e[0], this._segStrings), this.checkEndPtVertexIntersections(e[e.length - 1], this._segStrings);
                } else if (2 === arguments.length)
                  for (var r = arguments[0], i = arguments[1].iterator(); i.hasNext();)
                    for (var n = i.next().getCoordinates(), o = 1; o < n.length - 1; o++)
                      if (n[o].equals(r)) throw new Du("found endpt/interior pt intersection at index " + o + " :pt " + r)
            }, kl.prototype.checkInteriorIntersections = function () {
              if (0 === arguments.length)
                for (var t = this._segStrings.iterator(); t.hasNext();)
                  for (var e = t.next(), r = this._segStrings.iterator(); r.hasNext();) {
                    var i = r.next();
                    this.checkInteriorIntersections(e, i);
                  } else if (2 === arguments.length)
                    for (var n = arguments[0], o = arguments[1], s = n.getCoordinates(), a = o.getCoordinates(), u = 0; u < s.length - 1; u++)
                      for (var c = 0; c < a.length - 1; c++) this.checkInteriorIntersections(n, u, o, c);
                  else if (4 === arguments.length) {
                var h = arguments[0],
                  l = arguments[1],
                  p = arguments[2],
                  f = arguments[3];
                if (h === p && l === f) return null;
                var d = h.getCoordinates()[l],
                  g = h.getCoordinates()[l + 1],
                  _ = p.getCoordinates()[f],
                  y = p.getCoordinates()[f + 1];
                if (this._li.computeIntersection(d, g, _, y), this._li.hasIntersection() && (this._li.isProper() || this.hasInteriorIntersection(this._li, d, g) || this.hasInteriorIntersection(this._li, _, y))) throw new Du("found non-noded intersection at " + d + "-" + g + " and " + _ + "-" + y)
              }
            }, kl.prototype.checkValid = function () {
              this.checkEndPtVertexIntersections(), this.checkInteriorIntersections(), this.checkCollapses();
            }, kl.prototype.checkCollapses = function () {
              if (0 === arguments.length)
                for (var t = this._segStrings.iterator(); t.hasNext();) {
                  var e = t.next();
                  this.checkCollapses(e);
                } else if (1 === arguments.length)
                  for (var r = arguments[0].getCoordinates(), i = 0; i < r.length - 2; i++) this.checkCollapse(r[i], r[i + 1], r[i + 2]);
            }, kl.prototype.hasInteriorIntersection = function (t, e, r) {
              for (var i = 0; i < t.getIntersectionNum(); i++) {
                var n = t.getIntersection(i);
                if (!n.equals(e) && !n.equals(r)) return !0
              }
              return !1
            }, kl.prototype.checkCollapse = function (t, e, r) {
              if (t.equals(r)) throw new Du("found non-noded collapse at " + kl.fact.createLineString([t, e, r]))
            }, kl.prototype.interfaces_ = function () {
              return []
            }, kl.prototype.getClass = function () {
              return kl
            }, Bl.fact.get = function () {
              return new Kc
            }, Object.defineProperties(kl, Bl);
            var zl = function () {
                this._li = null, this._pt = null, this._originalPt = null, this._ptScaled = null, this._p0Scaled = null, this._p1Scaled = null, this._scaleFactor = null, this._minx = null, this._maxx = null, this._miny = null, this._maxy = null, this._corner = new Array(4).fill(null), this._safeEnv = null;
                var t = arguments[0],
                  e = arguments[1],
                  r = arguments[2];
                if (this._originalPt = t, this._pt = t, this._scaleFactor = e, this._li = r, e <= 0) throw new Ka("Scale factor must be non-zero");
                1 !== e && (this._pt = new ru(this.scale(t.x), this.scale(t.y)), this._p0Scaled = new ru, this._p1Scaled = new ru), this.initCorners(this._pt);
              },
              Vl = {
                SAFE_ENV_EXPANSION_FACTOR: {
                  configurable: !0
                }
              };
            zl.prototype.intersectsScaled = function (t, e) {
              var r = Math.min(t.x, e.x),
                i = Math.max(t.x, e.x),
                n = Math.min(t.y, e.y),
                o = Math.max(t.y, e.y),
                s = this._maxx < r || this._minx > i || this._maxy < n || this._miny > o;
              if (s) return !1;
              var a = this.intersectsToleranceSquare(t, e);
              return Ru.isTrue(!(s && a), "Found bad envelope test"), a
            }, zl.prototype.initCorners = function (t) {
              this._minx = t.x - .5, this._maxx = t.x + .5, this._miny = t.y - .5, this._maxy = t.y + .5, this._corner[0] = new ru(this._maxx, this._maxy), this._corner[1] = new ru(this._minx, this._maxy), this._corner[2] = new ru(this._minx, this._miny), this._corner[3] = new ru(this._maxx, this._miny);
            }, zl.prototype.intersects = function (t, e) {
              return 1 === this._scaleFactor ? this.intersectsScaled(t, e) : (this.copyScaled(t, this._p0Scaled), this.copyScaled(e, this._p1Scaled), this.intersectsScaled(this._p0Scaled, this._p1Scaled))
            }, zl.prototype.scale = function (t) {
              return Math.round(t * this._scaleFactor)
            }, zl.prototype.getCoordinate = function () {
              return this._originalPt
            }, zl.prototype.copyScaled = function (t, e) {
              e.x = this.scale(t.x), e.y = this.scale(t.y);
            }, zl.prototype.getSafeEnvelope = function () {
              if (null === this._safeEnv) {
                var t = zl.SAFE_ENV_EXPANSION_FACTOR / this._scaleFactor;
                this._safeEnv = new Lu(this._originalPt.x - t, this._originalPt.x + t, this._originalPt.y - t, this._originalPt.y + t);
              }
              return this._safeEnv
            }, zl.prototype.intersectsPixelClosure = function (t, e) {
              return this._li.computeIntersection(t, e, this._corner[0], this._corner[1]), !!(this._li.hasIntersection() || (this._li.computeIntersection(t, e, this._corner[1], this._corner[2]), this._li.hasIntersection() || (this._li.computeIntersection(t, e, this._corner[2], this._corner[3]), this._li.hasIntersection() || (this._li.computeIntersection(t, e, this._corner[3], this._corner[0]), this._li.hasIntersection()))))
            }, zl.prototype.intersectsToleranceSquare = function (t, e) {
              var r = !1,
                i = !1;
              return this._li.computeIntersection(t, e, this._corner[0], this._corner[1]), !!(this._li.isProper() || (this._li.computeIntersection(t, e, this._corner[1], this._corner[2]), this._li.isProper() || (this._li.hasIntersection() && (r = !0), this._li.computeIntersection(t, e, this._corner[2], this._corner[3]), this._li.isProper() || (this._li.hasIntersection() && (i = !0), this._li.computeIntersection(t, e, this._corner[3], this._corner[0]), this._li.isProper() || r && i || t.equals(this._pt) || e.equals(this._pt)))))
            }, zl.prototype.addSnappedNode = function (t, e) {
              var r = t.getCoordinate(e),
                i = t.getCoordinate(e + 1);
              return !!this.intersects(r, i) && (t.addIntersection(this.getCoordinate(), e), !0)
            }, zl.prototype.interfaces_ = function () {
              return []
            }, zl.prototype.getClass = function () {
              return zl
            }, Vl.SAFE_ENV_EXPANSION_FACTOR.get = function () {
              return .75
            }, Object.defineProperties(zl, Vl);
            var Ul = function () {
              this.tempEnv1 = new Lu, this.selectedSegment = new Yh;
            };
            Ul.prototype.select = function () {
              if (1 === arguments.length);
              else if (2 === arguments.length) {
                var t = arguments[0],
                  e = arguments[1];
                t.getLineSegment(e, this.selectedSegment), this.select(this.selectedSegment);
              }
            }, Ul.prototype.interfaces_ = function () {
              return []
            }, Ul.prototype.getClass = function () {
              return Ul
            };
            var ql = function () {
                this._index = null;
                var t = arguments[0];
                this._index = t;
              },
              jl = {
                HotPixelSnapAction: {
                  configurable: !0
                }
              };
            ql.prototype.snap = function () {
              if (1 === arguments.length) {
                var t = arguments[0];
                return this.snap(t, null, -1)
              }
              if (3 === arguments.length) {
                var e = arguments[0],
                  r = arguments[1],
                  i = arguments[2],
                  n = e.getSafeEnvelope(),
                  o = new Gl(e, r, i);
                return this._index.query(n, {
                  interfaces_: function () {
                    return [Mh]
                  },
                  visitItem: function (t) {
                    t.select(n, o);
                  }
                }), o.isNodeAdded()
              }
            }, ql.prototype.interfaces_ = function () {
              return []
            }, ql.prototype.getClass = function () {
              return ql
            }, jl.HotPixelSnapAction.get = function () {
              return Gl
            }, Object.defineProperties(ql, jl);
            var Gl = function (t) {
                function e() {
                  t.call(this), this._hotPixel = null, this._parentEdge = null, this._hotPixelVertexIndex = null, this._isNodeAdded = !1;
                  var e = arguments[0],
                    r = arguments[1],
                    i = arguments[2];
                  this._hotPixel = e, this._parentEdge = r, this._hotPixelVertexIndex = i;
                }
                return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.isNodeAdded = function () {
                  return this._isNodeAdded
                }, e.prototype.select = function () {
                  if (2 !== arguments.length) return t.prototype.select.apply(this, arguments);
                  var e = arguments[0],
                    r = arguments[1],
                    i = e.getContext();
                  if (null !== this._parentEdge && i === this._parentEdge && r === this._hotPixelVertexIndex) return null;
                  this._isNodeAdded = this._hotPixel.addSnappedNode(i, r);
                }, e.prototype.interfaces_ = function () {
                  return []
                }, e.prototype.getClass = function () {
                  return e
                }, e
              }(Ul),
              Xl = function () {
                this._li = null, this._interiorIntersections = null;
                var t = arguments[0];
                this._li = t, this._interiorIntersections = new rc;
              };
            Xl.prototype.processIntersections = function (t, e, r, i) {
              if (t === r && e === i) return null;
              var n = t.getCoordinates()[e],
                o = t.getCoordinates()[e + 1],
                s = r.getCoordinates()[i],
                a = r.getCoordinates()[i + 1];
              if (this._li.computeIntersection(n, o, s, a), this._li.hasIntersection() && this._li.isInteriorIntersection()) {
                for (var u = 0; u < this._li.getIntersectionNum(); u++) this._interiorIntersections.add(this._li.getIntersection(u));
                t.addIntersections(this._li, e, 0), r.addIntersections(this._li, i, 1);
              }
            }, Xl.prototype.isDone = function () {
              return !1
            }, Xl.prototype.getInteriorIntersections = function () {
              return this._interiorIntersections
            }, Xl.prototype.interfaces_ = function () {
              return [Cl]
            }, Xl.prototype.getClass = function () {
              return Xl
            };
            var Zl = function () {
              this._pm = null, this._li = null, this._scaleFactor = null, this._noder = null, this._pointSnapper = null, this._nodedSegStrings = null;
              var t = arguments[0];
              this._pm = t, this._li = new Fu, this._li.setPrecisionModel(t), this._scaleFactor = t.getScale();
            };
            Zl.prototype.checkCorrectness = function (t) {
              var e = Zh.getNodedSubstrings(t),
                r = new kl(e);
              try {
                r.checkValid();
              } catch (t) {
                if (!(t instanceof xu)) throw t;
                t.printStackTrace();
              }
            }, Zl.prototype.getNodedSubstrings = function () {
              return Zh.getNodedSubstrings(this._nodedSegStrings)
            }, Zl.prototype.snapRound = function (t, e) {
              var r = this.findInteriorIntersections(t, e);
              this.computeIntersectionSnaps(r), this.computeVertexSnaps(t);
            }, Zl.prototype.findInteriorIntersections = function (t, e) {
              var r = new Xl(e);
              return this._noder.setSegmentIntersector(r), this._noder.computeNodes(t), r.getInteriorIntersections()
            }, Zl.prototype.computeVertexSnaps = function () {
              if (uu(arguments[0], Qu))
                for (var t = arguments[0].iterator(); t.hasNext();) {
                  var e = t.next();
                  this.computeVertexSnaps(e);
                } else if (arguments[0] instanceof Zh)
                  for (var r = arguments[0], i = r.getCoordinates(), n = 0; n < i.length; n++) {
                    var o = new zl(i[n], this._scaleFactor, this._li);
                    this._pointSnapper.snap(o, r, n) && r.addIntersection(i[n], n);
                  }
            }, Zl.prototype.computeNodes = function (t) {
              this._nodedSegStrings = t, this._noder = new tl, this._pointSnapper = new ql(this._noder.getIndex()), this.snapRound(t, this._li);
            }, Zl.prototype.computeIntersectionSnaps = function (t) {
              for (var e = t.iterator(); e.hasNext();) {
                var r = e.next(),
                  i = new zl(r, this._scaleFactor, this._li);
                this._pointSnapper.snap(i);
              }
            }, Zl.prototype.interfaces_ = function () {
              return [Qh]
            }, Zl.prototype.getClass = function () {
              return Zl
            };
            var Yl = function () {
                if (this._argGeom = null, this._distance = null, this._bufParams = new rl, this._resultGeometry = null, this._saveException = null, 1 === arguments.length) {
                  var t = arguments[0];
                  this._argGeom = t;
                } else if (2 === arguments.length) {
                  var e = arguments[0],
                    r = arguments[1];
                  this._argGeom = e, this._bufParams = r;
                }
              },
              Wl = {
                CAP_ROUND: {
                  configurable: !0
                },
                CAP_BUTT: {
                  configurable: !0
                },
                CAP_FLAT: {
                  configurable: !0
                },
                CAP_SQUARE: {
                  configurable: !0
                },
                MAX_PRECISION_DIGITS: {
                  configurable: !0
                }
              };
            Yl.prototype.bufferFixedPrecision = function (t) {
              var e = new Fl(new Zl(new Zc(1)), t.getScale()),
                r = new Al(this._bufParams);
              r.setWorkingPrecisionModel(t), r.setNoder(e), this._resultGeometry = r.buffer(this._argGeom, this._distance);
            }, Yl.prototype.bufferReducedPrecision = function () {
              var t = this;
              if (0 === arguments.length) {
                for (var e = Yl.MAX_PRECISION_DIGITS; e >= 0; e--) {
                  try {
                    t.bufferReducedPrecision(e);
                  } catch (e) {
                    if (!(e instanceof ah)) throw e;
                    t._saveException = e;
                  }
                  if (null !== t._resultGeometry) return null
                }
                throw this._saveException
              }
              if (1 === arguments.length) {
                var r = arguments[0],
                  i = Yl.precisionScaleFactor(this._argGeom, this._distance, r),
                  n = new Zc(i);
                this.bufferFixedPrecision(n);
              }
            }, Yl.prototype.computeGeometry = function () {
              if (this.bufferOriginalPrecision(), null !== this._resultGeometry) return null;
              var t = this._argGeom.getFactory().getPrecisionModel();
              t.getType() === Zc.FIXED ? this.bufferFixedPrecision(t) : this.bufferReducedPrecision();
            }, Yl.prototype.setQuadrantSegments = function (t) {
              this._bufParams.setQuadrantSegments(t);
            }, Yl.prototype.bufferOriginalPrecision = function () {
              try {
                var t = new Al(this._bufParams);
                this._resultGeometry = t.buffer(this._argGeom, this._distance);
              } catch (t) {
                if (!(t instanceof Du)) throw t;
                this._saveException = t;
              }
            }, Yl.prototype.getResultGeometry = function (t) {
              return this._distance = t, this.computeGeometry(), this._resultGeometry
            }, Yl.prototype.setEndCapStyle = function (t) {
              this._bufParams.setEndCapStyle(t);
            }, Yl.prototype.interfaces_ = function () {
              return []
            }, Yl.prototype.getClass = function () {
              return Yl
            }, Yl.bufferOp = function () {
              if (2 === arguments.length) {
                var t = arguments[0],
                  e = arguments[1];
                return new Yl(t).getResultGeometry(e)
              }
              if (3 === arguments.length) {
                if (Number.isInteger(arguments[2]) && arguments[0] instanceof qu && "number" == typeof arguments[1]) {
                  var r = arguments[0],
                    i = arguments[1],
                    n = arguments[2],
                    o = new Yl(r);
                  return o.setQuadrantSegments(n), o.getResultGeometry(i)
                }
                if (arguments[2] instanceof rl && arguments[0] instanceof qu && "number" == typeof arguments[1]) {
                  var s = arguments[0],
                    a = arguments[1],
                    u = arguments[2];
                  return new Yl(s, u).getResultGeometry(a)
                }
              } else if (4 === arguments.length) {
                var c = arguments[0],
                  h = arguments[1],
                  l = arguments[2],
                  p = arguments[3],
                  f = new Yl(c);
                return f.setQuadrantSegments(l), f.setEndCapStyle(p), f.getResultGeometry(h)
              }
            }, Yl.precisionScaleFactor = function (t, e, r) {
              var i = t.getEnvelopeInternal(),
                n = cu.max(Math.abs(i.getMaxX()), Math.abs(i.getMaxY()), Math.abs(i.getMinX()), Math.abs(i.getMinY())) + 2 * (e > 0 ? e : 0),
                o = r - Math.trunc(Math.log(n) / Math.log(10) + 1);
              return Math.pow(10, o)
            }, Wl.CAP_ROUND.get = function () {
              return rl.CAP_ROUND
            }, Wl.CAP_BUTT.get = function () {
              return rl.CAP_FLAT
            }, Wl.CAP_FLAT.get = function () {
              return rl.CAP_FLAT
            }, Wl.CAP_SQUARE.get = function () {
              return rl.CAP_SQUARE
            }, Wl.MAX_PRECISION_DIGITS.get = function () {
              return 12
            }, Object.defineProperties(Yl, Wl);
            var Hl = function () {
              this._pt = [new ru, new ru], this._distance = Ja.NaN, this._isNull = !0;
            };
            Hl.prototype.getCoordinates = function () {
              return this._pt
            }, Hl.prototype.getCoordinate = function (t) {
              return this._pt[t]
            }, Hl.prototype.setMinimum = function () {
              if (1 === arguments.length) {
                var t = arguments[0];
                this.setMinimum(t._pt[0], t._pt[1]);
              } else if (2 === arguments.length) {
                var e = arguments[0],
                  r = arguments[1];
                if (this._isNull) return this.initialize(e, r), null;
                var i = e.distance(r);
                i < this._distance && this.initialize(e, r, i);
              }
            }, Hl.prototype.initialize = function () {
              if (0 === arguments.length) this._isNull = !0;
              else if (2 === arguments.length) {
                var t = arguments[0],
                  e = arguments[1];
                this._pt[0].setCoordinate(t), this._pt[1].setCoordinate(e), this._distance = t.distance(e), this._isNull = !1;
              } else if (3 === arguments.length) {
                var r = arguments[0],
                  i = arguments[1],
                  n = arguments[2];
                this._pt[0].setCoordinate(r), this._pt[1].setCoordinate(i), this._distance = n, this._isNull = !1;
              }
            }, Hl.prototype.getDistance = function () {
              return this._distance
            }, Hl.prototype.setMaximum = function () {
              if (1 === arguments.length) {
                var t = arguments[0];
                this.setMaximum(t._pt[0], t._pt[1]);
              } else if (2 === arguments.length) {
                var e = arguments[0],
                  r = arguments[1];
                if (this._isNull) return this.initialize(e, r), null;
                var i = e.distance(r);
                i > this._distance && this.initialize(e, r, i);
              }
            }, Hl.prototype.interfaces_ = function () {
              return []
            }, Hl.prototype.getClass = function () {
              return Hl
            };
            var Kl = function () {};
            Kl.prototype.interfaces_ = function () {
              return []
            }, Kl.prototype.getClass = function () {
              return Kl
            }, Kl.computeDistance = function () {
              if (arguments[2] instanceof Hl && arguments[0] instanceof Mc && arguments[1] instanceof ru)
                for (var t = arguments[0], e = arguments[1], r = arguments[2], i = t.getCoordinates(), n = new Yh, o = 0; o < i.length - 1; o++) {
                  n.setCoordinates(i[o], i[o + 1]);
                  var s = n.closestPoint(e);
                  r.setMinimum(s, e);
                } else if (arguments[2] instanceof Hl && arguments[0] instanceof Nc && arguments[1] instanceof ru) {
                  var a = arguments[0],
                    u = arguments[1],
                    c = arguments[2];
                  Kl.computeDistance(a.getExteriorRing(), u, c);
                  for (var h = 0; h < a.getNumInteriorRing(); h++) Kl.computeDistance(a.getInteriorRingN(h), u, c);
                } else if (arguments[2] instanceof Hl && arguments[0] instanceof qu && arguments[1] instanceof ru) {
                var l = arguments[0],
                  p = arguments[1],
                  f = arguments[2];
                if (l instanceof Mc) Kl.computeDistance(l, p, f);
                else if (l instanceof Nc) Kl.computeDistance(l, p, f);
                else if (l instanceof wc)
                  for (var d = l, g = 0; g < d.getNumGeometries(); g++) {
                    var _ = d.getGeometryN(g);
                    Kl.computeDistance(_, p, f);
                  } else f.setMinimum(l.getCoordinate(), p);
              } else if (arguments[2] instanceof Hl && arguments[0] instanceof Yh && arguments[1] instanceof ru) {
                var y = arguments[0],
                  m = arguments[1],
                  v = arguments[2],
                  x = y.closestPoint(m);
                v.setMinimum(x, m);
              }
            };
            var Jl = function (t) {
                this._maxPtDist = new Hl, this._inputGeom = t || null;
              },
              Ql = {
                MaxPointDistanceFilter: {
                  configurable: !0
                },
                MaxMidpointDistanceFilter: {
                  configurable: !0
                }
              };
            Jl.prototype.computeMaxMidpointDistance = function (t) {
              var e = new tp(this._inputGeom);
              t.apply(e), this._maxPtDist.setMaximum(e.getMaxPointDistance());
            }, Jl.prototype.computeMaxVertexDistance = function (t) {
              var e = new $l(this._inputGeom);
              t.apply(e), this._maxPtDist.setMaximum(e.getMaxPointDistance());
            }, Jl.prototype.findDistance = function (t) {
              return this.computeMaxVertexDistance(t), this.computeMaxMidpointDistance(t), this._maxPtDist.getDistance()
            }, Jl.prototype.getDistancePoints = function () {
              return this._maxPtDist
            }, Jl.prototype.interfaces_ = function () {
              return []
            }, Jl.prototype.getClass = function () {
              return Jl
            }, Ql.MaxPointDistanceFilter.get = function () {
              return $l
            }, Ql.MaxMidpointDistanceFilter.get = function () {
              return tp
            }, Object.defineProperties(Jl, Ql);
            var $l = function (t) {
              this._maxPtDist = new Hl, this._minPtDist = new Hl, this._geom = t || null;
            };
            $l.prototype.filter = function (t) {
              this._minPtDist.initialize(), Kl.computeDistance(this._geom, t, this._minPtDist), this._maxPtDist.setMaximum(this._minPtDist);
            }, $l.prototype.getMaxPointDistance = function () {
              return this._maxPtDist
            }, $l.prototype.interfaces_ = function () {
              return [Xu]
            }, $l.prototype.getClass = function () {
              return $l
            };
            var tp = function (t) {
              this._maxPtDist = new Hl, this._minPtDist = new Hl, this._geom = t || null;
            };
            tp.prototype.filter = function (t, e) {
              if (0 === e) return null;
              var r = t.getCoordinate(e - 1),
                i = t.getCoordinate(e),
                n = new ru((r.x + i.x) / 2, (r.y + i.y) / 2);
              this._minPtDist.initialize(), Kl.computeDistance(this._geom, n, this._minPtDist), this._maxPtDist.setMaximum(this._minPtDist);
            }, tp.prototype.isDone = function () {
              return !1
            }, tp.prototype.isGeometryChanged = function () {
              return !1
            }, tp.prototype.getMaxPointDistance = function () {
              return this._maxPtDist
            }, tp.prototype.interfaces_ = function () {
              return [xc]
            }, tp.prototype.getClass = function () {
              return tp
            };
            var ep = function (t) {
              this._comps = t || null;
            };
            ep.prototype.filter = function (t) {
              t instanceof Nc && this._comps.add(t);
            }, ep.prototype.interfaces_ = function () {
              return [vc]
            }, ep.prototype.getClass = function () {
              return ep
            }, ep.getPolygons = function () {
              if (1 === arguments.length) {
                var t = arguments[0];
                return ep.getPolygons(t, new rc)
              }
              if (2 === arguments.length) {
                var e = arguments[0],
                  r = arguments[1];
                return e instanceof Nc ? r.add(e) : e instanceof wc && e.apply(new ep(r)), r
              }
            };
            var rp = function () {
              if (this._lines = null, this._isForcedToLineString = !1, 1 === arguments.length) {
                var t = arguments[0];
                this._lines = t;
              } else if (2 === arguments.length) {
                var e = arguments[0],
                  r = arguments[1];
                this._lines = e, this._isForcedToLineString = r;
              }
            };
            rp.prototype.filter = function (t) {
              if (this._isForcedToLineString && t instanceof Oc) {
                var e = t.getFactory().createLineString(t.getCoordinateSequence());
                return this._lines.add(e), null
              }
              t instanceof Mc && this._lines.add(t);
            }, rp.prototype.setForceToLineString = function (t) {
              this._isForcedToLineString = t;
            }, rp.prototype.interfaces_ = function () {
              return [Uu]
            }, rp.prototype.getClass = function () {
              return rp
            }, rp.getGeometry = function () {
              if (1 === arguments.length) {
                var t = arguments[0];
                return t.getFactory().buildGeometry(rp.getLines(t))
              }
              if (2 === arguments.length) {
                var e = arguments[0],
                  r = arguments[1];
                return e.getFactory().buildGeometry(rp.getLines(e, r))
              }
            }, rp.getLines = function () {
              if (1 === arguments.length) {
                var t = arguments[0];
                return rp.getLines(t, !1)
              }
              if (2 === arguments.length) {
                if (uu(arguments[0], Qu) && uu(arguments[1], Qu)) {
                  for (var e = arguments[0], r = arguments[1], i = e.iterator(); i.hasNext();) {
                    var n = i.next();
                    rp.getLines(n, r);
                  }
                  return r
                }
                if (arguments[0] instanceof qu && "boolean" == typeof arguments[1]) {
                  var o = arguments[0],
                    s = arguments[1],
                    a = new rc;
                  return o.apply(new rp(a, s)), a
                }
                if (arguments[0] instanceof qu && uu(arguments[1], Qu)) {
                  var u = arguments[0],
                    c = arguments[1];
                  return u instanceof Mc ? c.add(u) : u.apply(new rp(c)), c
                }
              } else if (3 === arguments.length) {
                if ("boolean" == typeof arguments[2] && uu(arguments[0], Qu) && uu(arguments[1], Qu)) {
                  for (var h = arguments[0], l = arguments[1], p = arguments[2], f = h.iterator(); f.hasNext();) {
                    var d = f.next();
                    rp.getLines(d, l, p);
                  }
                  return l
                }
                if ("boolean" == typeof arguments[2] && arguments[0] instanceof qu && uu(arguments[1], Qu)) {
                  var g = arguments[0],
                    _ = arguments[1],
                    y = arguments[2];
                  return g.apply(new rp(_, y)), _
                }
              }
            };
            var ip = function () {
              if (this._boundaryRule = Zu.OGC_SFS_BOUNDARY_RULE, this._isIn = null, this._numBoundaries = null, 0 === arguments.length);
              else if (1 === arguments.length) {
                var t = arguments[0];
                if (null === t) throw new Ka("Rule must be non-null");
                this._boundaryRule = t;
              }
            };
            ip.prototype.locateInternal = function () {
              if (arguments[0] instanceof ru && arguments[1] instanceof Nc) {
                var t = arguments[0],
                  e = arguments[1];
                if (e.isEmpty()) return su.EXTERIOR;
                var r = e.getExteriorRing(),
                  i = this.locateInPolygonRing(t, r);
                if (i === su.EXTERIOR) return su.EXTERIOR;
                if (i === su.BOUNDARY) return su.BOUNDARY;
                for (var n = 0; n < e.getNumInteriorRing(); n++) {
                  var o = e.getInteriorRingN(n),
                    s = this.locateInPolygonRing(t, o);
                  if (s === su.INTERIOR) return su.EXTERIOR;
                  if (s === su.BOUNDARY) return su.BOUNDARY
                }
                return su.INTERIOR
              }
              if (arguments[0] instanceof ru && arguments[1] instanceof Mc) {
                var a = arguments[0],
                  u = arguments[1];
                if (!u.getEnvelopeInternal().intersects(a)) return su.EXTERIOR;
                var c = u.getCoordinates();
                return u.isClosed() || !a.equals(c[0]) && !a.equals(c[c.length - 1]) ? zu.isOnLine(a, c) ? su.INTERIOR : su.EXTERIOR : su.BOUNDARY
              }
              if (arguments[0] instanceof ru && arguments[1] instanceof Pc) {
                var h = arguments[0];
                return arguments[1].getCoordinate().equals2D(h) ? su.INTERIOR : su.EXTERIOR
              }
            }, ip.prototype.locateInPolygonRing = function (t, e) {
              return e.getEnvelopeInternal().intersects(t) ? zu.locatePointInRing(t, e.getCoordinates()) : su.EXTERIOR
            }, ip.prototype.intersects = function (t, e) {
              return this.locate(t, e) !== su.EXTERIOR
            }, ip.prototype.updateLocationInfo = function (t) {
              t === su.INTERIOR && (this._isIn = !0), t === su.BOUNDARY && this._numBoundaries++;
            }, ip.prototype.computeLocation = function (t, e) {
              if (e instanceof Pc && this.updateLocationInfo(this.locateInternal(t, e)), e instanceof Mc) this.updateLocationInfo(this.locateInternal(t, e));
              else if (e instanceof Nc) this.updateLocationInfo(this.locateInternal(t, e));
              else if (e instanceof bc)
                for (var r = e, i = 0; i < r.getNumGeometries(); i++) {
                  var n = r.getGeometryN(i);
                  this.updateLocationInfo(this.locateInternal(t, n));
                } else if (e instanceof Ac)
                  for (var o = e, s = 0; s < o.getNumGeometries(); s++) {
                    var a = o.getGeometryN(s);
                    this.updateLocationInfo(this.locateInternal(t, a));
                  } else if (e instanceof wc)
                    for (var u = new vl(e); u.hasNext();) {
                      var c = u.next();
                      c !== e && this.computeLocation(t, c);
                    }
            }, ip.prototype.locate = function (t, e) {
              return e.isEmpty() ? su.EXTERIOR : e instanceof Mc ? this.locateInternal(t, e) : e instanceof Nc ? this.locateInternal(t, e) : (this._isIn = !1, this._numBoundaries = 0, this.computeLocation(t, e), this._boundaryRule.isInBoundary(this._numBoundaries) ? su.BOUNDARY : this._numBoundaries > 0 || this._isIn ? su.INTERIOR : su.EXTERIOR)
            }, ip.prototype.interfaces_ = function () {
              return []
            }, ip.prototype.getClass = function () {
              return ip
            };
            var np = function t() {
                if (this._component = null, this._segIndex = null, this._pt = null, 2 === arguments.length) {
                  var e = arguments[0],
                    r = arguments[1];
                  t.call(this, e, t.INSIDE_AREA, r);
                } else if (3 === arguments.length) {
                  var i = arguments[0],
                    n = arguments[1],
                    o = arguments[2];
                  this._component = i, this._segIndex = n, this._pt = o;
                }
              },
              op = {
                INSIDE_AREA: {
                  configurable: !0
                }
              };
            np.prototype.isInsideArea = function () {
              return this._segIndex === np.INSIDE_AREA
            }, np.prototype.getCoordinate = function () {
              return this._pt
            }, np.prototype.getGeometryComponent = function () {
              return this._component
            }, np.prototype.getSegmentIndex = function () {
              return this._segIndex
            }, np.prototype.interfaces_ = function () {
              return []
            }, np.prototype.getClass = function () {
              return np
            }, op.INSIDE_AREA.get = function () {
              return -1
            }, Object.defineProperties(np, op);
            var sp = function (t) {
              this._pts = t || null;
            };
            sp.prototype.filter = function (t) {
              t instanceof Pc && this._pts.add(t);
            }, sp.prototype.interfaces_ = function () {
              return [vc]
            }, sp.prototype.getClass = function () {
              return sp
            }, sp.getPoints = function () {
              if (1 === arguments.length) {
                var t = arguments[0];
                return t instanceof Pc ? Nh.singletonList(t) : sp.getPoints(t, new rc)
              }
              if (2 === arguments.length) {
                var e = arguments[0],
                  r = arguments[1];
                return e instanceof Pc ? r.add(e) : e instanceof wc && e.apply(new sp(r)), r
              }
            };
            var ap = function () {
              this._locations = null;
              var t = arguments[0];
              this._locations = t;
            };
            ap.prototype.filter = function (t) {
              (t instanceof Pc || t instanceof Mc || t instanceof Nc) && this._locations.add(new np(t, 0, t.getCoordinate()));
            }, ap.prototype.interfaces_ = function () {
              return [vc]
            }, ap.prototype.getClass = function () {
              return ap
            }, ap.getLocations = function (t) {
              var e = new rc;
              return t.apply(new ap(e)), e
            };
            var up = function () {
              if (this._geom = null, this._terminateDistance = 0, this._ptLocator = new ip, this._minDistanceLocation = null, this._minDistance = Ja.MAX_VALUE, 2 === arguments.length) {
                var t = arguments[0],
                  e = arguments[1];
                this._geom = [t, e], this._terminateDistance = 0;
              } else if (3 === arguments.length) {
                var r = arguments[0],
                  i = arguments[1],
                  n = arguments[2];
                this._geom = new Array(2).fill(null), this._geom[0] = r, this._geom[1] = i, this._terminateDistance = n;
              }
            };
            up.prototype.computeContainmentDistance = function () {
              if (0 === arguments.length) {
                var t = new Array(2).fill(null);
                if (this.computeContainmentDistance(0, t), this._minDistance <= this._terminateDistance) return null;
                this.computeContainmentDistance(1, t);
              } else if (2 === arguments.length) {
                var e = arguments[0],
                  r = arguments[1],
                  i = 1 - e,
                  n = ep.getPolygons(this._geom[e]);
                if (n.size() > 0) {
                  var o = ap.getLocations(this._geom[i]);
                  if (this.computeContainmentDistance(o, n, r), this._minDistance <= this._terminateDistance) return this._minDistanceLocation[i] = r[0], this._minDistanceLocation[e] = r[1], null
                }
              } else if (3 === arguments.length)
                if (arguments[2] instanceof Array && uu(arguments[0], ec) && uu(arguments[1], ec)) {
                  for (var s = arguments[0], a = arguments[1], u = arguments[2], c = 0; c < s.size(); c++)
                    for (var h = s.get(c), l = 0; l < a.size(); l++)
                      if (this.computeContainmentDistance(h, a.get(l), u), this._minDistance <= this._terminateDistance) return null
                } else if (arguments[2] instanceof Array && arguments[0] instanceof np && arguments[1] instanceof Nc) {
                var p = arguments[0],
                  f = arguments[1],
                  d = arguments[2],
                  g = p.getCoordinate();
                if (su.EXTERIOR !== this._ptLocator.locate(g, f)) return this._minDistance = 0, d[0] = p, d[1] = new np(f, g), null
              }
            }, up.prototype.computeMinDistanceLinesPoints = function (t, e, r) {
              for (var i = 0; i < t.size(); i++)
                for (var n = t.get(i), o = 0; o < e.size(); o++) {
                  var s = e.get(o);
                  if (this.computeMinDistance(n, s, r), this._minDistance <= this._terminateDistance) return null
                }
            }, up.prototype.computeFacetDistance = function () {
              var t = new Array(2).fill(null),
                e = rp.getLines(this._geom[0]),
                r = rp.getLines(this._geom[1]),
                i = sp.getPoints(this._geom[0]),
                n = sp.getPoints(this._geom[1]);
              return this.computeMinDistanceLines(e, r, t), this.updateMinDistance(t, !1), this._minDistance <= this._terminateDistance ? null : (t[0] = null, t[1] = null, this.computeMinDistanceLinesPoints(e, n, t), this.updateMinDistance(t, !1), this._minDistance <= this._terminateDistance ? null : (t[0] = null, t[1] = null, this.computeMinDistanceLinesPoints(r, i, t), this.updateMinDistance(t, !0), this._minDistance <= this._terminateDistance ? null : (t[0] = null, t[1] = null, this.computeMinDistancePoints(i, n, t), void this.updateMinDistance(t, !1))))
            }, up.prototype.nearestLocations = function () {
              return this.computeMinDistance(), this._minDistanceLocation
            }, up.prototype.updateMinDistance = function (t, e) {
              if (null === t[0]) return null;
              e ? (this._minDistanceLocation[0] = t[1], this._minDistanceLocation[1] = t[0]) : (this._minDistanceLocation[0] = t[0], this._minDistanceLocation[1] = t[1]);
            }, up.prototype.nearestPoints = function () {
              return this.computeMinDistance(), [this._minDistanceLocation[0].getCoordinate(), this._minDistanceLocation[1].getCoordinate()]
            }, up.prototype.computeMinDistance = function () {
              if (0 === arguments.length) {
                if (null !== this._minDistanceLocation) return null;
                if (this._minDistanceLocation = new Array(2).fill(null), this.computeContainmentDistance(), this._minDistance <= this._terminateDistance) return null;
                this.computeFacetDistance();
              } else if (3 === arguments.length)
                if (arguments[2] instanceof Array && arguments[0] instanceof Mc && arguments[1] instanceof Pc) {
                  var t = arguments[0],
                    e = arguments[1],
                    r = arguments[2];
                  if (t.getEnvelopeInternal().distance(e.getEnvelopeInternal()) > this._minDistance) return null;
                  for (var i = t.getCoordinates(), n = e.getCoordinate(), o = 0; o < i.length - 1; o++) {
                    var s = zu.distancePointLine(n, i[o], i[o + 1]);
                    if (s < this._minDistance) {
                      this._minDistance = s;
                      var a = new Yh(i[o], i[o + 1]).closestPoint(n);
                      r[0] = new np(t, o, a), r[1] = new np(e, 0, n);
                    }
                    if (this._minDistance <= this._terminateDistance) return null
                  }
                } else if (arguments[2] instanceof Array && arguments[0] instanceof Mc && arguments[1] instanceof Mc) {
                var u = arguments[0],
                  c = arguments[1],
                  h = arguments[2];
                if (u.getEnvelopeInternal().distance(c.getEnvelopeInternal()) > this._minDistance) return null;
                for (var l = u.getCoordinates(), p = c.getCoordinates(), f = 0; f < l.length - 1; f++)
                  for (var d = 0; d < p.length - 1; d++) {
                    var g = zu.distanceLineLine(l[f], l[f + 1], p[d], p[d + 1]);
                    if (g < this._minDistance) {
                      this._minDistance = g;
                      var _ = new Yh(l[f], l[f + 1]),
                        y = new Yh(p[d], p[d + 1]),
                        m = _.closestPoints(y);
                      h[0] = new np(u, f, m[0]), h[1] = new np(c, d, m[1]);
                    }
                    if (this._minDistance <= this._terminateDistance) return null
                  }
              }
            }, up.prototype.computeMinDistancePoints = function (t, e, r) {
              for (var i = 0; i < t.size(); i++)
                for (var n = t.get(i), o = 0; o < e.size(); o++) {
                  var s = e.get(o),
                    a = n.getCoordinate().distance(s.getCoordinate());
                  if (a < this._minDistance && (this._minDistance = a, r[0] = new np(n, 0, n.getCoordinate()), r[1] = new np(s, 0, s.getCoordinate())), this._minDistance <= this._terminateDistance) return null
                }
            }, up.prototype.distance = function () {
              if (null === this._geom[0] || null === this._geom[1]) throw new Ka("null geometries are not supported");
              return this._geom[0].isEmpty() || this._geom[1].isEmpty() ? 0 : (this.computeMinDistance(), this._minDistance)
            }, up.prototype.computeMinDistanceLines = function (t, e, r) {
              for (var i = 0; i < t.size(); i++)
                for (var n = t.get(i), o = 0; o < e.size(); o++) {
                  var s = e.get(o);
                  if (this.computeMinDistance(n, s, r), this._minDistance <= this._terminateDistance) return null
                }
            }, up.prototype.interfaces_ = function () {
              return []
            }, up.prototype.getClass = function () {
              return up
            }, up.distance = function (t, e) {
              return new up(t, e).distance()
            }, up.isWithinDistance = function (t, e, r) {
              return new up(t, e, r).distance() <= r
            }, up.nearestPoints = function (t, e) {
              return new up(t, e).nearestPoints()
            };
            var cp = function () {
              this._pt = [new ru, new ru], this._distance = Ja.NaN, this._isNull = !0;
            };
            cp.prototype.getCoordinates = function () {
              return this._pt
            }, cp.prototype.getCoordinate = function (t) {
              return this._pt[t]
            }, cp.prototype.setMinimum = function () {
              if (1 === arguments.length) {
                var t = arguments[0];
                this.setMinimum(t._pt[0], t._pt[1]);
              } else if (2 === arguments.length) {
                var e = arguments[0],
                  r = arguments[1];
                if (this._isNull) return this.initialize(e, r), null;
                var i = e.distance(r);
                i < this._distance && this.initialize(e, r, i);
              }
            }, cp.prototype.initialize = function () {
              if (0 === arguments.length) this._isNull = !0;
              else if (2 === arguments.length) {
                var t = arguments[0],
                  e = arguments[1];
                this._pt[0].setCoordinate(t), this._pt[1].setCoordinate(e), this._distance = t.distance(e), this._isNull = !1;
              } else if (3 === arguments.length) {
                var r = arguments[0],
                  i = arguments[1],
                  n = arguments[2];
                this._pt[0].setCoordinate(r), this._pt[1].setCoordinate(i), this._distance = n, this._isNull = !1;
              }
            }, cp.prototype.toString = function () {
              return Pu.toLineString(this._pt[0], this._pt[1])
            }, cp.prototype.getDistance = function () {
              return this._distance
            }, cp.prototype.setMaximum = function () {
              if (1 === arguments.length) {
                var t = arguments[0];
                this.setMaximum(t._pt[0], t._pt[1]);
              } else if (2 === arguments.length) {
                var e = arguments[0],
                  r = arguments[1];
                if (this._isNull) return this.initialize(e, r), null;
                var i = e.distance(r);
                i > this._distance && this.initialize(e, r, i);
              }
            }, cp.prototype.interfaces_ = function () {
              return []
            }, cp.prototype.getClass = function () {
              return cp
            };
            var hp = function () {};
            hp.prototype.interfaces_ = function () {
              return []
            }, hp.prototype.getClass = function () {
              return hp
            }, hp.computeDistance = function () {
              if (arguments[2] instanceof cp && arguments[0] instanceof Mc && arguments[1] instanceof ru)
                for (var t = arguments[0], e = arguments[1], r = arguments[2], i = new Yh, n = t.getCoordinates(), o = 0; o < n.length - 1; o++) {
                  i.setCoordinates(n[o], n[o + 1]);
                  var s = i.closestPoint(e);
                  r.setMinimum(s, e);
                } else if (arguments[2] instanceof cp && arguments[0] instanceof Nc && arguments[1] instanceof ru) {
                  var a = arguments[0],
                    u = arguments[1],
                    c = arguments[2];
                  hp.computeDistance(a.getExteriorRing(), u, c);
                  for (var h = 0; h < a.getNumInteriorRing(); h++) hp.computeDistance(a.getInteriorRingN(h), u, c);
                } else if (arguments[2] instanceof cp && arguments[0] instanceof qu && arguments[1] instanceof ru) {
                var l = arguments[0],
                  p = arguments[1],
                  f = arguments[2];
                if (l instanceof Mc) hp.computeDistance(l, p, f);
                else if (l instanceof Nc) hp.computeDistance(l, p, f);
                else if (l instanceof wc)
                  for (var d = l, g = 0; g < d.getNumGeometries(); g++) {
                    var _ = d.getGeometryN(g);
                    hp.computeDistance(_, p, f);
                  } else f.setMinimum(l.getCoordinate(), p);
              } else if (arguments[2] instanceof cp && arguments[0] instanceof Yh && arguments[1] instanceof ru) {
                var y = arguments[0],
                  m = arguments[1],
                  v = arguments[2],
                  x = y.closestPoint(m);
                v.setMinimum(x, m);
              }
            };
            var lp = function () {
                this._g0 = null, this._g1 = null, this._ptDist = new cp, this._densifyFrac = 0;
                var t = arguments[0],
                  e = arguments[1];
                this._g0 = t, this._g1 = e;
              },
              pp = {
                MaxPointDistanceFilter: {
                  configurable: !0
                },
                MaxDensifiedByFractionDistanceFilter: {
                  configurable: !0
                }
              };
            lp.prototype.getCoordinates = function () {
              return this._ptDist.getCoordinates()
            }, lp.prototype.setDensifyFraction = function (t) {
              if (t > 1 || t <= 0) throw new Ka("Fraction is not in range (0.0 - 1.0]");
              this._densifyFrac = t;
            }, lp.prototype.compute = function (t, e) {
              this.computeOrientedDistance(t, e, this._ptDist), this.computeOrientedDistance(e, t, this._ptDist);
            }, lp.prototype.distance = function () {
              return this.compute(this._g0, this._g1), this._ptDist.getDistance()
            }, lp.prototype.computeOrientedDistance = function (t, e, r) {
              var i = new fp(e);
              if (t.apply(i), r.setMaximum(i.getMaxPointDistance()), this._densifyFrac > 0) {
                var n = new dp(e, this._densifyFrac);
                t.apply(n), r.setMaximum(n.getMaxPointDistance());
              }
            }, lp.prototype.orientedDistance = function () {
              return this.computeOrientedDistance(this._g0, this._g1, this._ptDist), this._ptDist.getDistance()
            }, lp.prototype.interfaces_ = function () {
              return []
            }, lp.prototype.getClass = function () {
              return lp
            }, lp.distance = function () {
              if (2 === arguments.length) {
                var t = arguments[0],
                  e = arguments[1];
                return new lp(t, e).distance()
              }
              if (3 === arguments.length) {
                var r = arguments[0],
                  i = arguments[1],
                  n = arguments[2],
                  o = new lp(r, i);
                return o.setDensifyFraction(n), o.distance()
              }
            }, pp.MaxPointDistanceFilter.get = function () {
              return fp
            }, pp.MaxDensifiedByFractionDistanceFilter.get = function () {
              return dp
            }, Object.defineProperties(lp, pp);
            var fp = function () {
              this._maxPtDist = new cp, this._minPtDist = new cp, this._euclideanDist = new hp, this._geom = null;
              var t = arguments[0];
              this._geom = t;
            };
            fp.prototype.filter = function (t) {
              this._minPtDist.initialize(), hp.computeDistance(this._geom, t, this._minPtDist), this._maxPtDist.setMaximum(this._minPtDist);
            }, fp.prototype.getMaxPointDistance = function () {
              return this._maxPtDist
            }, fp.prototype.interfaces_ = function () {
              return [Xu]
            }, fp.prototype.getClass = function () {
              return fp
            };
            var dp = function () {
              this._maxPtDist = new cp, this._minPtDist = new cp, this._geom = null, this._numSubSegs = 0;
              var t = arguments[0],
                e = arguments[1];
              this._geom = t, this._numSubSegs = Math.trunc(Math.round(1 / e));
            };
            dp.prototype.filter = function (t, e) {
              if (0 === e) return null;
              for (var r = t.getCoordinate(e - 1), i = t.getCoordinate(e), n = (i.x - r.x) / this._numSubSegs, o = (i.y - r.y) / this._numSubSegs, s = 0; s < this._numSubSegs; s++) {
                var a = r.x + s * n,
                  u = r.y + s * o,
                  c = new ru(a, u);
                this._minPtDist.initialize(), hp.computeDistance(this._geom, c, this._minPtDist), this._maxPtDist.setMaximum(this._minPtDist);
              }
            }, dp.prototype.isDone = function () {
              return !1
            }, dp.prototype.isGeometryChanged = function () {
              return !1
            }, dp.prototype.getMaxPointDistance = function () {
              return this._maxPtDist
            }, dp.prototype.interfaces_ = function () {
              return [xc]
            }, dp.prototype.getClass = function () {
              return dp
            };
            var gp = function (t, e, r) {
                this._minValidDistance = null, this._maxValidDistance = null, this._minDistanceFound = null, this._maxDistanceFound = null, this._isValid = !0, this._errMsg = null, this._errorLocation = null, this._errorIndicator = null, this._input = t || null, this._bufDistance = e || null, this._result = r || null;
              },
              _p = {
                VERBOSE: {
                  configurable: !0
                },
                MAX_DISTANCE_DIFF_FRAC: {
                  configurable: !0
                }
              };
            gp.prototype.checkMaximumDistance = function (t, e, r) {
              var i = new lp(e, t);
              if (i.setDensifyFraction(.25), this._maxDistanceFound = i.orientedDistance(), this._maxDistanceFound > r) {
                this._isValid = !1;
                var n = i.getCoordinates();
                this._errorLocation = n[1], this._errorIndicator = t.getFactory().createLineString(n), this._errMsg = "Distance between buffer curve and input is too large (" + this._maxDistanceFound + " at " + Pu.toLineString(n[0], n[1]) + ")";
              }
            }, gp.prototype.isValid = function () {
              var t = Math.abs(this._bufDistance),
                e = gp.MAX_DISTANCE_DIFF_FRAC * t;
              return this._minValidDistance = t - e, this._maxValidDistance = t + e, !(!this._input.isEmpty() && !this._result.isEmpty()) || (this._bufDistance > 0 ? this.checkPositiveValid() : this.checkNegativeValid(), gp.VERBOSE && bu.out.println("Min Dist= " + this._minDistanceFound + "  err= " + (1 - this._minDistanceFound / this._bufDistance) + "  Max Dist= " + this._maxDistanceFound + "  err= " + (this._maxDistanceFound / this._bufDistance - 1)), this._isValid)
            }, gp.prototype.checkNegativeValid = function () {
              if (!(this._input instanceof Nc || this._input instanceof Ac || this._input instanceof wc)) return null;
              var t = this.getPolygonLines(this._input);
              if (this.checkMinimumDistance(t, this._result, this._minValidDistance), !this._isValid) return null;
              this.checkMaximumDistance(t, this._result, this._maxValidDistance);
            }, gp.prototype.getErrorIndicator = function () {
              return this._errorIndicator
            }, gp.prototype.checkMinimumDistance = function (t, e, r) {
              var i = new up(t, e, r);
              if (this._minDistanceFound = i.distance(), this._minDistanceFound < r) {
                this._isValid = !1;
                var n = i.nearestPoints();
                this._errorLocation = i.nearestPoints()[1], this._errorIndicator = t.getFactory().createLineString(n), this._errMsg = "Distance between buffer curve and input is too small (" + this._minDistanceFound + " at " + Pu.toLineString(n[0], n[1]) + " )";
              }
            }, gp.prototype.checkPositiveValid = function () {
              var t = this._result.getBoundary();
              if (this.checkMinimumDistance(this._input, t, this._minValidDistance), !this._isValid) return null;
              this.checkMaximumDistance(this._input, t, this._maxValidDistance);
            }, gp.prototype.getErrorLocation = function () {
              return this._errorLocation
            }, gp.prototype.getPolygonLines = function (t) {
              for (var e = new rc, r = new rp(e), i = ep.getPolygons(t).iterator(); i.hasNext();) i.next().apply(r);
              return t.getFactory().buildGeometry(e)
            }, gp.prototype.getErrorMessage = function () {
              return this._errMsg
            }, gp.prototype.interfaces_ = function () {
              return []
            }, gp.prototype.getClass = function () {
              return gp
            }, _p.VERBOSE.get = function () {
              return !1
            }, _p.MAX_DISTANCE_DIFF_FRAC.get = function () {
              return .012
            }, Object.defineProperties(gp, _p);
            var yp = function (t, e, r) {
                this._isValid = !0, this._errorMsg = null, this._errorLocation = null, this._errorIndicator = null, this._input = t || null, this._distance = e || null, this._result = r || null;
              },
              mp = {
                VERBOSE: {
                  configurable: !0
                },
                MAX_ENV_DIFF_FRAC: {
                  configurable: !0
                }
              };
            yp.prototype.isValid = function () {
              return this.checkPolygonal(), this._isValid ? (this.checkExpectedEmpty(), this._isValid ? (this.checkEnvelope(), this._isValid ? (this.checkArea(), this._isValid ? (this.checkDistance(), this._isValid) : this._isValid) : this._isValid) : this._isValid) : this._isValid
            }, yp.prototype.checkEnvelope = function () {
              if (this._distance < 0) return null;
              var t = this._distance * yp.MAX_ENV_DIFF_FRAC;
              0 === t && (t = .001);
              var e = new Lu(this._input.getEnvelopeInternal());
              e.expandBy(this._distance);
              var r = new Lu(this._result.getEnvelopeInternal());
              r.expandBy(t), r.contains(e) || (this._isValid = !1, this._errorMsg = "Buffer envelope is incorrect", this._errorIndicator = this._input.getFactory().toGeometry(r)), this.report("Envelope");
            }, yp.prototype.checkDistance = function () {
              var t = new gp(this._input, this._distance, this._result);
              t.isValid() || (this._isValid = !1, this._errorMsg = t.getErrorMessage(), this._errorLocation = t.getErrorLocation(), this._errorIndicator = t.getErrorIndicator()), this.report("Distance");
            }, yp.prototype.checkArea = function () {
              var t = this._input.getArea(),
                e = this._result.getArea();
              this._distance > 0 && t > e && (this._isValid = !1, this._errorMsg = "Area of positive buffer is smaller than input", this._errorIndicator = this._result), this._distance < 0 && t < e && (this._isValid = !1, this._errorMsg = "Area of negative buffer is larger than input", this._errorIndicator = this._result), this.report("Area");
            }, yp.prototype.checkPolygonal = function () {
              this._result instanceof Nc || this._result instanceof Ac || (this._isValid = !1), this._errorMsg = "Result is not polygonal", this._errorIndicator = this._result, this.report("Polygonal");
            }, yp.prototype.getErrorIndicator = function () {
              return this._errorIndicator
            }, yp.prototype.getErrorLocation = function () {
              return this._errorLocation
            }, yp.prototype.checkExpectedEmpty = function () {
              return this._input.getDimension() >= 2 ? null : this._distance > 0 ? null : (this._result.isEmpty() || (this._isValid = !1, this._errorMsg = "Result is non-empty", this._errorIndicator = this._result), void this.report("ExpectedEmpty"))
            }, yp.prototype.report = function (t) {
              if (!yp.VERBOSE) return null;
              bu.out.println("Check " + t + ": " + (this._isValid ? "passed" : "FAILED"));
            }, yp.prototype.getErrorMessage = function () {
              return this._errorMsg
            }, yp.prototype.interfaces_ = function () {
              return []
            }, yp.prototype.getClass = function () {
              return yp
            }, yp.isValidMsg = function (t, e, r) {
              var i = new yp(t, e, r);
              return i.isValid() ? null : i.getErrorMessage()
            }, yp.isValid = function (t, e, r) {
              return !!new yp(t, e, r).isValid()
            }, mp.VERBOSE.get = function () {
              return !1
            }, mp.MAX_ENV_DIFF_FRAC.get = function () {
              return .012
            }, Object.defineProperties(yp, mp);
            var vp = function () {
              this._pts = null, this._data = null;
              var t = arguments[0],
                e = arguments[1];
              this._pts = t, this._data = e;
            };
            vp.prototype.getCoordinates = function () {
              return this._pts
            }, vp.prototype.size = function () {
              return this._pts.length
            }, vp.prototype.getCoordinate = function (t) {
              return this._pts[t]
            }, vp.prototype.isClosed = function () {
              return this._pts[0].equals(this._pts[this._pts.length - 1])
            }, vp.prototype.getSegmentOctant = function (t) {
              return t === this._pts.length - 1 ? -1 : jh.octant(this.getCoordinate(t), this.getCoordinate(t + 1))
            }, vp.prototype.setData = function (t) {
              this._data = t;
            }, vp.prototype.getData = function () {
              return this._data
            }, vp.prototype.toString = function () {
              return Pu.toLineString(new Uc(this._pts))
            }, vp.prototype.interfaces_ = function () {
              return [Gh]
            }, vp.prototype.getClass = function () {
              return vp
            };
            var xp = function () {
              this._findAllIntersections = !1, this._isCheckEndSegmentsOnly = !1, this._li = null, this._interiorIntersection = null, this._intSegments = null, this._intersections = new rc, this._intersectionCount = 0, this._keepIntersections = !0;
              var t = arguments[0];
              this._li = t, this._interiorIntersection = null;
            };
            xp.prototype.getInteriorIntersection = function () {
              return this._interiorIntersection
            }, xp.prototype.setCheckEndSegmentsOnly = function (t) {
              this._isCheckEndSegmentsOnly = t;
            }, xp.prototype.getIntersectionSegments = function () {
              return this._intSegments
            }, xp.prototype.count = function () {
              return this._intersectionCount
            }, xp.prototype.getIntersections = function () {
              return this._intersections
            }, xp.prototype.setFindAllIntersections = function (t) {
              this._findAllIntersections = t;
            }, xp.prototype.setKeepIntersections = function (t) {
              this._keepIntersections = t;
            }, xp.prototype.processIntersections = function (t, e, r, i) {
              if (!this._findAllIntersections && this.hasIntersection()) return null;
              if (t === r && e === i) return null;
              if (this._isCheckEndSegmentsOnly && !this.isEndSegment(t, e) && !this.isEndSegment(r, i)) return null;
              var n = t.getCoordinates()[e],
                o = t.getCoordinates()[e + 1],
                s = r.getCoordinates()[i],
                a = r.getCoordinates()[i + 1];
              this._li.computeIntersection(n, o, s, a), this._li.hasIntersection() && this._li.isInteriorIntersection() && (this._intSegments = new Array(4).fill(null), this._intSegments[0] = n, this._intSegments[1] = o, this._intSegments[2] = s, this._intSegments[3] = a, this._interiorIntersection = this._li.getIntersection(0), this._keepIntersections && this._intersections.add(this._interiorIntersection), this._intersectionCount++);
            }, xp.prototype.isEndSegment = function (t, e) {
              return 0 === e || e >= t.size() - 2
            }, xp.prototype.hasIntersection = function () {
              return null !== this._interiorIntersection
            }, xp.prototype.isDone = function () {
              return !this._findAllIntersections && null !== this._interiorIntersection
            }, xp.prototype.interfaces_ = function () {
              return [Cl]
            }, xp.prototype.getClass = function () {
              return xp
            }, xp.createAllIntersectionsFinder = function (t) {
              var e = new xp(t);
              return e.setFindAllIntersections(!0), e
            }, xp.createAnyIntersectionFinder = function (t) {
              return new xp(t)
            }, xp.createIntersectionCounter = function (t) {
              var e = new xp(t);
              return e.setFindAllIntersections(!0), e.setKeepIntersections(!1), e
            };
            var wp = function () {
              this._li = new Fu, this._segStrings = null, this._findAllIntersections = !1, this._segInt = null, this._isValid = !0;
              var t = arguments[0];
              this._segStrings = t;
            };
            wp.prototype.execute = function () {
              if (null !== this._segInt) return null;
              this.checkInteriorIntersections();
            }, wp.prototype.getIntersections = function () {
              return this._segInt.getIntersections()
            }, wp.prototype.isValid = function () {
              return this.execute(), this._isValid
            }, wp.prototype.setFindAllIntersections = function (t) {
              this._findAllIntersections = t;
            }, wp.prototype.checkInteriorIntersections = function () {
              this._isValid = !0, this._segInt = new xp(this._li), this._segInt.setFindAllIntersections(this._findAllIntersections);
              var t = new tl;
              if (t.setSegmentIntersector(this._segInt), t.computeNodes(this._segStrings), this._segInt.hasIntersection()) return this._isValid = !1, null
            }, wp.prototype.checkValid = function () {
              if (this.execute(), !this._isValid) throw new ah(this.getErrorMessage(), this._segInt.getInteriorIntersection())
            }, wp.prototype.getErrorMessage = function () {
              if (this._isValid) return "no intersections found";
              var t = this._segInt.getIntersectionSegments();
              return "found non-noded intersection between " + Pu.toLineString(t[0], t[1]) + " and " + Pu.toLineString(t[2], t[3])
            }, wp.prototype.interfaces_ = function () {
              return []
            }, wp.prototype.getClass = function () {
              return wp
            }, wp.computeIntersections = function (t) {
              var e = new wp(t);
              return e.setFindAllIntersections(!0), e.isValid(), e.getIntersections()
            };
            var bp = function t() {
              this._nv = null;
              var e = arguments[0];
              this._nv = new wp(t.toSegmentStrings(e));
            };
            bp.prototype.checkValid = function () {
              this._nv.checkValid();
            }, bp.prototype.interfaces_ = function () {
              return []
            }, bp.prototype.getClass = function () {
              return bp
            }, bp.toSegmentStrings = function (t) {
              for (var e = new rc, r = t.iterator(); r.hasNext();) {
                var i = r.next();
                e.add(new vp(i.getCoordinates(), i));
              }
              return e
            }, bp.checkValid = function (t) {
              new bp(t).checkValid();
            };
            var Ep = function (t) {
              this._mapOp = t;
            };
            Ep.prototype.map = function (t) {
              for (var e = new rc, r = 0; r < t.getNumGeometries(); r++) {
                var i = this._mapOp.map(t.getGeometryN(r));
                i.isEmpty() || e.add(i);
              }
              return t.getFactory().createGeometryCollection(Kc.toGeometryArray(e))
            }, Ep.prototype.interfaces_ = function () {
              return []
            }, Ep.prototype.getClass = function () {
              return Ep
            }, Ep.map = function (t, e) {
              return new Ep(e).map(t)
            };
            var Lp = function () {
              this._op = null, this._geometryFactory = null, this._ptLocator = null, this._lineEdgesList = new rc, this._resultLineList = new rc;
              var t = arguments[0],
                e = arguments[1],
                r = arguments[2];
              this._op = t, this._geometryFactory = e, this._ptLocator = r;
            };
            Lp.prototype.collectLines = function (t) {
              for (var e = this._op.getGraph().getEdgeEnds().iterator(); e.hasNext();) {
                var r = e.next();
                this.collectLineEdge(r, t, this._lineEdgesList), this.collectBoundaryTouchEdge(r, t, this._lineEdgesList);
              }
            }, Lp.prototype.labelIsolatedLine = function (t, e) {
              var r = this._ptLocator.locate(t.getCoordinate(), this._op.getArgGeometry(e));
              t.getLabel().setLocation(e, r);
            }, Lp.prototype.build = function (t) {
              return this.findCoveredLineEdges(), this.collectLines(t), this.buildLines(t), this._resultLineList
            }, Lp.prototype.collectLineEdge = function (t, e, r) {
              var i = t.getLabel(),
                n = t.getEdge();
              t.isLineEdge() && (t.isVisited() || ! of .isResultOfOp(i, e) || n.isCovered() || (r.add(n), t.setVisitedEdge(!0)));
            }, Lp.prototype.findCoveredLineEdges = function () {
              for (var t = this._op.getGraph().getNodes().iterator(); t.hasNext();) t.next().getEdges().findCoveredLineEdges();
              for (var e = this._op.getGraph().getEdgeEnds().iterator(); e.hasNext();) {
                var r = e.next(),
                  i = r.getEdge();
                if (r.isLineEdge() && !i.isCoveredSet()) {
                  var n = this._op.isCoveredByA(r.getCoordinate());
                  i.setCovered(n);
                }
              }
            }, Lp.prototype.labelIsolatedLines = function (t) {
              for (var e = t.iterator(); e.hasNext();) {
                var r = e.next(),
                  i = r.getLabel();
                r.isIsolated() && (i.isNull(0) ? this.labelIsolatedLine(r, 0) : this.labelIsolatedLine(r, 1));
              }
            }, Lp.prototype.buildLines = function (t) {
              for (var e = this._lineEdgesList.iterator(); e.hasNext();) {
                var r = e.next(),
                  i = this._geometryFactory.createLineString(r.getCoordinates());
                this._resultLineList.add(i), r.setInResult(!0);
              }
            }, Lp.prototype.collectBoundaryTouchEdge = function (t, e, r) {
              var i = t.getLabel();
              return t.isLineEdge() ? null : t.isVisited() ? null : t.isInteriorAreaEdge() ? null : t.getEdge().isInResult() ? null : (Ru.isTrue(!(t.isInResult() || t.getSym().isInResult()) || !t.getEdge().isInResult()), void( of .isResultOfOp(i, e) && e === of .INTERSECTION && (r.add(t.getEdge()), t.setVisitedEdge(!0))))
            }, Lp.prototype.interfaces_ = function () {
              return []
            }, Lp.prototype.getClass = function () {
              return Lp
            };
            var Sp = function () {
              this._op = null, this._geometryFactory = null, this._resultPointList = new rc;
              var t = arguments[0],
                e = arguments[1];
              this._op = t, this._geometryFactory = e;
            };
            Sp.prototype.filterCoveredNodeToPoint = function (t) {
              var e = t.getCoordinate();
              if (!this._op.isCoveredByLA(e)) {
                var r = this._geometryFactory.createPoint(e);
                this._resultPointList.add(r);
              }
            }, Sp.prototype.extractNonCoveredResultNodes = function (t) {
              for (var e = this._op.getGraph().getNodes().iterator(); e.hasNext();) {
                var r = e.next();
                if (!(r.isInResult() || r.isIncidentEdgeInResult() || 0 !== r.getEdges().getDegree() && t !== of .INTERSECTION)) {
                  var i = r.getLabel(); of .isResultOfOp(i, t) && this.filterCoveredNodeToPoint(r);
                }
              }
            }, Sp.prototype.build = function (t) {
              return this.extractNonCoveredResultNodes(t), this._resultPointList
            }, Sp.prototype.interfaces_ = function () {
              return []
            }, Sp.prototype.getClass = function () {
              return Sp
            };
            var Cp = function () {
              this._inputGeom = null, this._factory = null, this._pruneEmptyGeometry = !0, this._preserveGeometryCollectionType = !0, this._preserveCollections = !1, this._preserveType = !1;
            };
            Cp.prototype.transformPoint = function (t, e) {
              return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(), t))
            }, Cp.prototype.transformPolygon = function (t, e) {
              var r = !0,
                i = this.transformLinearRing(t.getExteriorRing(), t);
              null !== i && i instanceof Oc && !i.isEmpty() || (r = !1);
              for (var n = new rc, o = 0; o < t.getNumInteriorRing(); o++) {
                var s = this.transformLinearRing(t.getInteriorRingN(o), t);
                null === s || s.isEmpty() || (s instanceof Oc || (r = !1), n.add(s));
              }
              if (r) return this._factory.createPolygon(i, n.toArray([]));
              var a = new rc;
              return null !== i && a.add(i), a.addAll(n), this._factory.buildGeometry(a)
            }, Cp.prototype.createCoordinateSequence = function (t) {
              return this._factory.getCoordinateSequenceFactory().create(t)
            }, Cp.prototype.getInputGeometry = function () {
              return this._inputGeom
            }, Cp.prototype.transformMultiLineString = function (t, e) {
              for (var r = new rc, i = 0; i < t.getNumGeometries(); i++) {
                var n = this.transformLineString(t.getGeometryN(i), t);
                null !== n && (n.isEmpty() || r.add(n));
              }
              return this._factory.buildGeometry(r)
            }, Cp.prototype.transformCoordinates = function (t, e) {
              return this.copy(t)
            }, Cp.prototype.transformLineString = function (t, e) {
              return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(), t))
            }, Cp.prototype.transformMultiPoint = function (t, e) {
              for (var r = new rc, i = 0; i < t.getNumGeometries(); i++) {
                var n = this.transformPoint(t.getGeometryN(i), t);
                null !== n && (n.isEmpty() || r.add(n));
              }
              return this._factory.buildGeometry(r)
            }, Cp.prototype.transformMultiPolygon = function (t, e) {
              for (var r = new rc, i = 0; i < t.getNumGeometries(); i++) {
                var n = this.transformPolygon(t.getGeometryN(i), t);
                null !== n && (n.isEmpty() || r.add(n));
              }
              return this._factory.buildGeometry(r)
            }, Cp.prototype.copy = function (t) {
              return t.copy()
            }, Cp.prototype.transformGeometryCollection = function (t, e) {
              for (var r = new rc, i = 0; i < t.getNumGeometries(); i++) {
                var n = this.transform(t.getGeometryN(i));
                null !== n && (this._pruneEmptyGeometry && n.isEmpty() || r.add(n));
              }
              return this._preserveGeometryCollectionType ? this._factory.createGeometryCollection(Kc.toGeometryArray(r)) : this._factory.buildGeometry(r)
            }, Cp.prototype.transform = function (t) {
              if (this._inputGeom = t, this._factory = t.getFactory(), t instanceof Pc) return this.transformPoint(t, null);
              if (t instanceof Rc) return this.transformMultiPoint(t, null);
              if (t instanceof Oc) return this.transformLinearRing(t, null);
              if (t instanceof Mc) return this.transformLineString(t, null);
              if (t instanceof bc) return this.transformMultiLineString(t, null);
              if (t instanceof Nc) return this.transformPolygon(t, null);
              if (t instanceof Ac) return this.transformMultiPolygon(t, null);
              if (t instanceof wc) return this.transformGeometryCollection(t, null);
              throw new Ka("Unknown Geometry subtype: " + t.getClass().getName())
            }, Cp.prototype.transformLinearRing = function (t, e) {
              var r = this.transformCoordinates(t.getCoordinateSequence(), t);
              if (null === r) return this._factory.createLinearRing(null);
              var i = r.size();
              return i > 0 && i < 4 && !this._preserveType ? this._factory.createLineString(r) : this._factory.createLinearRing(r)
            }, Cp.prototype.interfaces_ = function () {
              return []
            }, Cp.prototype.getClass = function () {
              return Cp
            };
            var Ip = function t() {
              if (this._snapTolerance = 0, this._srcPts = null, this._seg = new Yh, this._allowSnappingToSourceVertices = !1, this._isClosed = !1, arguments[0] instanceof Mc && "number" == typeof arguments[1]) {
                var e = arguments[0],
                  r = arguments[1];
                t.call(this, e.getCoordinates(), r);
              } else if (arguments[0] instanceof Array && "number" == typeof arguments[1]) {
                var i = arguments[0],
                  n = arguments[1];
                this._srcPts = i, this._isClosed = t.isClosed(i), this._snapTolerance = n;
              }
            };
            Ip.prototype.snapVertices = function (t, e) {
              for (var r = this._isClosed ? t.size() - 1 : t.size(), i = 0; i < r; i++) {
                var n = t.get(i),
                  o = this.findSnapForVertex(n, e);
                null !== o && (t.set(i, new ru(o)), 0 === i && this._isClosed && t.set(t.size() - 1, new ru(o)));
              }
            }, Ip.prototype.findSnapForVertex = function (t, e) {
              for (var r = 0; r < e.length; r++) {
                if (t.equals2D(e[r])) return null;
                if (t.distance(e[r]) < this._snapTolerance) return e[r]
              }
              return null
            }, Ip.prototype.snapTo = function (t) {
              var e = new nc(this._srcPts);
              return this.snapVertices(e, t), this.snapSegments(e, t), e.toCoordinateArray()
            }, Ip.prototype.snapSegments = function (t, e) {
              if (0 === e.length) return null;
              var r = e.length;
              e[0].equals2D(e[e.length - 1]) && (r = e.length - 1);
              for (var i = 0; i < r; i++) {
                var n = e[i],
                  o = this.findSegmentIndexToSnap(n, t);
                o >= 0 && t.add(o + 1, new ru(n), !1);
              }
            }, Ip.prototype.findSegmentIndexToSnap = function (t, e) {
              for (var r = Ja.MAX_VALUE, i = -1, n = 0; n < e.size() - 1; n++) {
                if (this._seg.p0 = e.get(n), this._seg.p1 = e.get(n + 1), this._seg.p0.equals2D(t) || this._seg.p1.equals2D(t)) {
                  if (this._allowSnappingToSourceVertices) continue;
                  return -1
                }
                var o = this._seg.distance(t);
                o < this._snapTolerance && o < r && (r = o, i = n);
              }
              return i
            }, Ip.prototype.setAllowSnappingToSourceVertices = function (t) {
              this._allowSnappingToSourceVertices = t;
            }, Ip.prototype.interfaces_ = function () {
              return []
            }, Ip.prototype.getClass = function () {
              return Ip
            }, Ip.isClosed = function (t) {
              return !(t.length <= 1) && t[0].equals2D(t[t.length - 1])
            };
            var Mp = function (t) {
                this._srcGeom = t || null;
              },
              Tp = {
                SNAP_PRECISION_FACTOR: {
                  configurable: !0
                }
              };
            Mp.prototype.snapTo = function (t, e) {
              var r = this.extractTargetCoordinates(t);
              return new Pp(e, r).transform(this._srcGeom)
            }, Mp.prototype.snapToSelf = function (t, e) {
              var r = this.extractTargetCoordinates(this._srcGeom),
                i = new Pp(t, r, !0).transform(this._srcGeom),
                n = i;
              return e && uu(n, Dc) && (n = i.buffer(0)), n
            }, Mp.prototype.computeSnapTolerance = function (t) {
              return this.computeMinimumSegmentLength(t) / 10
            }, Mp.prototype.extractTargetCoordinates = function (t) {
              for (var e = new Mn, r = t.getCoordinates(), i = 0; i < r.length; i++) e.add(r[i]);
              return e.toArray(new Array(0).fill(null))
            }, Mp.prototype.computeMinimumSegmentLength = function (t) {
              for (var e = Ja.MAX_VALUE, r = 0; r < t.length - 1; r++) {
                var i = t[r].distance(t[r + 1]);
                i < e && (e = i);
              }
              return e
            }, Mp.prototype.interfaces_ = function () {
              return []
            }, Mp.prototype.getClass = function () {
              return Mp
            }, Mp.snap = function (t, e, r) {
              var i = new Array(2).fill(null),
                n = new Mp(t);
              i[0] = n.snapTo(e, r);
              var o = new Mp(e);
              return i[1] = o.snapTo(i[0], r), i
            }, Mp.computeOverlaySnapTolerance = function () {
              if (1 === arguments.length) {
                var t = arguments[0],
                  e = Mp.computeSizeBasedSnapTolerance(t),
                  r = t.getPrecisionModel();
                if (r.getType() === Zc.FIXED) {
                  var i = 1 / r.getScale() * 2 / 1.415;
                  i > e && (e = i);
                }
                return e
              }
              if (2 === arguments.length) {
                var n = arguments[0],
                  o = arguments[1];
                return Math.min(Mp.computeOverlaySnapTolerance(n), Mp.computeOverlaySnapTolerance(o))
              }
            }, Mp.computeSizeBasedSnapTolerance = function (t) {
              var e = t.getEnvelopeInternal();
              return Math.min(e.getHeight(), e.getWidth()) * Mp.SNAP_PRECISION_FACTOR
            }, Mp.snapToSelf = function (t, e, r) {
              return new Mp(t).snapToSelf(e, r)
            }, Tp.SNAP_PRECISION_FACTOR.get = function () {
              return 1e-9
            }, Object.defineProperties(Mp, Tp);
            var Pp = function (t) {
                function e(e, r, i) {
                  t.call(this), this._snapTolerance = e || null, this._snapPts = r || null, this._isSelfSnap = void 0 !== i && i;
                }
                return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.snapLine = function (t, e) {
                  var r = new Ip(t, this._snapTolerance);
                  return r.setAllowSnappingToSourceVertices(this._isSelfSnap), r.snapTo(e)
                }, e.prototype.transformCoordinates = function (t, e) {
                  var r = t.toCoordinateArray(),
                    i = this.snapLine(r, this._snapPts);
                  return this._factory.getCoordinateSequenceFactory().create(i)
                }, e.prototype.interfaces_ = function () {
                  return []
                }, e.prototype.getClass = function () {
                  return e
                }, e
              }(Cp),
              Dp = function () {
                this._isFirst = !0, this._commonMantissaBitsCount = 53, this._commonBits = 0, this._commonSignExp = null;
              };
            Dp.prototype.getCommon = function () {
              return Ja.longBitsToDouble(this._commonBits)
            }, Dp.prototype.add = function (t) {
              var e = Ja.doubleToLongBits(t);
              return this._isFirst ? (this._commonBits = e, this._commonSignExp = Dp.signExpBits(this._commonBits), this._isFirst = !1, null) : Dp.signExpBits(e) !== this._commonSignExp ? (this._commonBits = 0, null) : (this._commonMantissaBitsCount = Dp.numCommonMostSigMantissaBits(this._commonBits, e), void(this._commonBits = Dp.zeroLowerBits(this._commonBits, 64 - (12 + this._commonMantissaBitsCount))))
            }, Dp.prototype.toString = function () {
              if (1 === arguments.length) {
                var t = arguments[0],
                  e = Ja.longBitsToDouble(t),
                  r = "0000000000000000000000000000000000000000000000000000000000000000" + Ja.toBinaryString(t),
                  i = r.substring(r.length - 64);
                return i.substring(0, 1) + "  " + i.substring(1, 12) + "(exp) " + i.substring(12) + " [ " + e + " ]"
              }
            }, Dp.prototype.interfaces_ = function () {
              return []
            }, Dp.prototype.getClass = function () {
              return Dp
            }, Dp.getBit = function (t, e) {
              return 0 != (t & 1 << e) ? 1 : 0
            }, Dp.signExpBits = function (t) {
              return t >> 52
            }, Dp.zeroLowerBits = function (t, e) {
              return t & ~((1 << e) - 1)
            }, Dp.numCommonMostSigMantissaBits = function (t, e) {
              for (var r = 0, i = 52; i >= 0; i--) {
                if (Dp.getBit(t, i) !== Dp.getBit(e, i)) return r;
                r++;
              }
              return 52
            };
            var Np = function () {
                this._commonCoord = null, this._ccFilter = new Op;
              },
              Rp = {
                CommonCoordinateFilter: {
                  configurable: !0
                },
                Translater: {
                  configurable: !0
                }
              };
            Np.prototype.addCommonBits = function (t) {
              var e = new Ap(this._commonCoord);
              t.apply(e), t.geometryChanged();
            }, Np.prototype.removeCommonBits = function (t) {
              if (0 === this._commonCoord.x && 0 === this._commonCoord.y) return t;
              var e = new ru(this._commonCoord);
              e.x = -e.x, e.y = -e.y;
              var r = new Ap(e);
              return t.apply(r), t.geometryChanged(), t
            }, Np.prototype.getCommonCoordinate = function () {
              return this._commonCoord
            }, Np.prototype.add = function (t) {
              t.apply(this._ccFilter), this._commonCoord = this._ccFilter.getCommonCoordinate();
            }, Np.prototype.interfaces_ = function () {
              return []
            }, Np.prototype.getClass = function () {
              return Np
            }, Rp.CommonCoordinateFilter.get = function () {
              return Op
            }, Rp.Translater.get = function () {
              return Ap
            }, Object.defineProperties(Np, Rp);
            var Op = function () {
              this._commonBitsX = new Dp, this._commonBitsY = new Dp;
            };
            Op.prototype.filter = function (t) {
              this._commonBitsX.add(t.x), this._commonBitsY.add(t.y);
            }, Op.prototype.getCommonCoordinate = function () {
              return new ru(this._commonBitsX.getCommon(), this._commonBitsY.getCommon())
            }, Op.prototype.interfaces_ = function () {
              return [Xu]
            }, Op.prototype.getClass = function () {
              return Op
            };
            var Ap = function () {
              this.trans = null;
              var t = arguments[0];
              this.trans = t;
            };
            Ap.prototype.filter = function (t, e) {
              var r = t.getOrdinate(e, 0) + this.trans.x,
                i = t.getOrdinate(e, 1) + this.trans.y;
              t.setOrdinate(e, 0, r), t.setOrdinate(e, 1, i);
            }, Ap.prototype.isDone = function () {
              return !1
            }, Ap.prototype.isGeometryChanged = function () {
              return !0
            }, Ap.prototype.interfaces_ = function () {
              return [xc]
            }, Ap.prototype.getClass = function () {
              return Ap
            };
            var Fp = function (t, e) {
              this._geom = new Array(2).fill(null), this._snapTolerance = null, this._cbr = null, this._geom[0] = t, this._geom[1] = e, this.computeSnapTolerance();
            };
            Fp.prototype.selfSnap = function (t) {
              return new Mp(t).snapTo(t, this._snapTolerance)
            }, Fp.prototype.removeCommonBits = function (t) {
              this._cbr = new Np, this._cbr.add(t[0]), this._cbr.add(t[1]);
              var e = new Array(2).fill(null);
              return e[0] = this._cbr.removeCommonBits(t[0].copy()), e[1] = this._cbr.removeCommonBits(t[1].copy()), e
            }, Fp.prototype.prepareResult = function (t) {
              return this._cbr.addCommonBits(t), t
            }, Fp.prototype.getResultGeometry = function (t) {
              var e = this.snap(this._geom),
                r = of .overlayOp(e[0], e[1], t);
              return this.prepareResult(r)
            }, Fp.prototype.checkValid = function (t) {
              t.isValid() || bu.out.println("Snapped geometry is invalid");
            }, Fp.prototype.computeSnapTolerance = function () {
              this._snapTolerance = Mp.computeOverlaySnapTolerance(this._geom[0], this._geom[1]);
            }, Fp.prototype.snap = function (t) {
              var e = this.removeCommonBits(t);
              return Mp.snap(e[0], e[1], this._snapTolerance)
            }, Fp.prototype.interfaces_ = function () {
              return []
            }, Fp.prototype.getClass = function () {
              return Fp
            }, Fp.overlayOp = function (t, e, r) {
              return new Fp(t, e).getResultGeometry(r)
            }, Fp.union = function (t, e) {
              return Fp.overlayOp(t, e, of .UNION)
            }, Fp.intersection = function (t, e) {
              return Fp.overlayOp(t, e, of .INTERSECTION)
            }, Fp.symDifference = function (t, e) {
              return Fp.overlayOp(t, e, of .SYMDIFFERENCE)
            }, Fp.difference = function (t, e) {
              return Fp.overlayOp(t, e, of .DIFFERENCE)
            };
            var kp = function (t, e) {
              this._geom = new Array(2).fill(null), this._geom[0] = t, this._geom[1] = e;
            };
            kp.prototype.getResultGeometry = function (t) {
              var e = null,
                r = !1,
                i = null;
              try {
                e = of .overlayOp(this._geom[0], this._geom[1], t), r = !0;
              } catch (t) {
                if (!(t instanceof Du)) throw t;
                i = t;
              }
              if (!r) try {
                e = Fp.overlayOp(this._geom[0], this._geom[1], t);
              } catch (t) {
                throw t instanceof Du ? i : t
              }
              return e
            }, kp.prototype.interfaces_ = function () {
              return []
            }, kp.prototype.getClass = function () {
              return kp
            }, kp.overlayOp = function (t, e, r) {
              return new kp(t, e).getResultGeometry(r)
            }, kp.union = function (t, e) {
              return kp.overlayOp(t, e, of .UNION)
            }, kp.intersection = function (t, e) {
              return kp.overlayOp(t, e, of .INTERSECTION)
            }, kp.symDifference = function (t, e) {
              return kp.overlayOp(t, e, of .SYMDIFFERENCE)
            }, kp.difference = function (t, e) {
              return kp.overlayOp(t, e, of .DIFFERENCE)
            };
            var Bp = function () {
              this.mce = null, this.chainIndex = null;
              var t = arguments[0],
                e = arguments[1];
              this.mce = t, this.chainIndex = e;
            };
            Bp.prototype.computeIntersections = function (t, e) {
              this.mce.computeIntersectsForChain(this.chainIndex, t.mce, t.chainIndex, e);
            }, Bp.prototype.interfaces_ = function () {
              return []
            }, Bp.prototype.getClass = function () {
              return Bp
            };
            var zp = function t() {
                if (this._label = null, this._xValue = null, this._eventType = null, this._insertEvent = null, this._deleteEventIndex = null, this._obj = null, 2 === arguments.length) {
                  var e = arguments[0],
                    r = arguments[1];
                  this._eventType = t.DELETE, this._xValue = e, this._insertEvent = r;
                } else if (3 === arguments.length) {
                  var i = arguments[0],
                    n = arguments[1],
                    o = arguments[2];
                  this._eventType = t.INSERT, this._label = i, this._xValue = n, this._obj = o;
                }
              },
              Vp = {
                INSERT: {
                  configurable: !0
                },
                DELETE: {
                  configurable: !0
                }
              };
            zp.prototype.isDelete = function () {
              return this._eventType === zp.DELETE
            }, zp.prototype.setDeleteEventIndex = function (t) {
              this._deleteEventIndex = t;
            }, zp.prototype.getObject = function () {
              return this._obj
            }, zp.prototype.compareTo = function (t) {
              var e = t;
              return this._xValue < e._xValue ? -1 : this._xValue > e._xValue ? 1 : this._eventType < e._eventType ? -1 : this._eventType > e._eventType ? 1 : 0
            }, zp.prototype.getInsertEvent = function () {
              return this._insertEvent
            }, zp.prototype.isInsert = function () {
              return this._eventType === zp.INSERT
            }, zp.prototype.isSameLabel = function (t) {
              return null !== this._label && this._label === t._label
            }, zp.prototype.getDeleteEventIndex = function () {
              return this._deleteEventIndex
            }, zp.prototype.interfaces_ = function () {
              return [$a]
            }, zp.prototype.getClass = function () {
              return zp
            }, Vp.INSERT.get = function () {
              return 1
            }, Vp.DELETE.get = function () {
              return 2
            }, Object.defineProperties(zp, Vp);
            var Up = function () {};
            Up.prototype.interfaces_ = function () {
              return []
            }, Up.prototype.getClass = function () {
              return Up
            };
            var qp = function () {
              this._hasIntersection = !1, this._hasProper = !1, this._hasProperInterior = !1, this._properIntersectionPoint = null, this._li = null, this._includeProper = null, this._recordIsolated = null, this._isSelfIntersection = null, this._numIntersections = 0, this.numTests = 0, this._bdyNodes = null, this._isDone = !1, this._isDoneWhenProperInt = !1;
              var t = arguments[0],
                e = arguments[1],
                r = arguments[2];
              this._li = t, this._includeProper = e, this._recordIsolated = r;
            };
            qp.prototype.isTrivialIntersection = function (t, e, r, i) {
              if (t === r && 1 === this._li.getIntersectionNum()) {
                if (qp.isAdjacentSegments(e, i)) return !0;
                if (t.isClosed()) {
                  var n = t.getNumPoints() - 1;
                  if (0 === e && i === n || 0 === i && e === n) return !0
                }
              }
              return !1
            }, qp.prototype.getProperIntersectionPoint = function () {
              return this._properIntersectionPoint
            }, qp.prototype.setIsDoneIfProperInt = function (t) {
              this._isDoneWhenProperInt = t;
            }, qp.prototype.hasProperInteriorIntersection = function () {
              return this._hasProperInterior
            }, qp.prototype.isBoundaryPointInternal = function (t, e) {
              for (var r = e.iterator(); r.hasNext();) {
                var i = r.next().getCoordinate();
                if (t.isIntersection(i)) return !0
              }
              return !1
            }, qp.prototype.hasProperIntersection = function () {
              return this._hasProper
            }, qp.prototype.hasIntersection = function () {
              return this._hasIntersection
            }, qp.prototype.isDone = function () {
              return this._isDone
            }, qp.prototype.isBoundaryPoint = function (t, e) {
              return !(null === e || !this.isBoundaryPointInternal(t, e[0]) && !this.isBoundaryPointInternal(t, e[1]))
            }, qp.prototype.setBoundaryNodes = function (t, e) {
              this._bdyNodes = new Array(2).fill(null), this._bdyNodes[0] = t, this._bdyNodes[1] = e;
            }, qp.prototype.addIntersections = function (t, e, r, i) {
              if (t === r && e === i) return null;
              this.numTests++;
              var n = t.getCoordinates()[e],
                o = t.getCoordinates()[e + 1],
                s = r.getCoordinates()[i],
                a = r.getCoordinates()[i + 1];
              this._li.computeIntersection(n, o, s, a), this._li.hasIntersection() && (this._recordIsolated && (t.setIsolated(!1), r.setIsolated(!1)), this._numIntersections++, this.isTrivialIntersection(t, e, r, i) || (this._hasIntersection = !0, !this._includeProper && this._li.isProper() || (t.addIntersections(this._li, e, 0), r.addIntersections(this._li, i, 1)), this._li.isProper() && (this._properIntersectionPoint = this._li.getIntersection(0).copy(), this._hasProper = !0, this._isDoneWhenProperInt && (this._isDone = !0), this.isBoundaryPoint(this._li, this._bdyNodes) || (this._hasProperInterior = !0))));
            }, qp.prototype.interfaces_ = function () {
              return []
            }, qp.prototype.getClass = function () {
              return qp
            }, qp.isAdjacentSegments = function (t, e) {
              return 1 === Math.abs(t - e)
            };
            var jp = function (t) {
                function e() {
                  t.call(this), this.events = new rc, this.nOverlaps = null;
                }
                return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.prepareEvents = function () {
                  Nh.sort(this.events);
                  for (var t = 0; t < this.events.size(); t++) {
                    var e = this.events.get(t);
                    e.isDelete() && e.getInsertEvent().setDeleteEventIndex(t);
                  }
                }, e.prototype.computeIntersections = function () {
                  if (1 === arguments.length) {
                    var t = arguments[0];
                    this.nOverlaps = 0, this.prepareEvents();
                    for (var e = 0; e < this.events.size(); e++) {
                      var r = this.events.get(e);
                      if (r.isInsert() && this.processOverlaps(e, r.getDeleteEventIndex(), r, t), t.isDone()) break
                    }
                  } else if (3 === arguments.length)
                    if (arguments[2] instanceof qp && uu(arguments[0], ec) && uu(arguments[1], ec)) {
                      var i = arguments[0],
                        n = arguments[1],
                        o = arguments[2];
                      this.addEdges(i, i), this.addEdges(n, n), this.computeIntersections(o);
                    } else if ("boolean" == typeof arguments[2] && uu(arguments[0], ec) && arguments[1] instanceof qp) {
                    var s = arguments[0],
                      a = arguments[1];
                    arguments[2] ? this.addEdges(s, null) : this.addEdges(s), this.computeIntersections(a);
                  }
                }, e.prototype.addEdge = function (t, e) {
                  for (var r = t.getMonotoneChainEdge(), i = r.getStartIndexes(), n = 0; n < i.length - 1; n++) {
                    var o = new Bp(r, n),
                      s = new zp(e, r.getMinX(n), o);
                    this.events.add(s), this.events.add(new zp(r.getMaxX(n), s));
                  }
                }, e.prototype.processOverlaps = function (t, e, r, i) {
                  for (var n = r.getObject(), o = t; o < e; o++) {
                    var s = this.events.get(o);
                    if (s.isInsert()) {
                      var a = s.getObject();
                      r.isSameLabel(s) || (n.computeIntersections(a, i), this.nOverlaps++);
                    }
                  }
                }, e.prototype.addEdges = function () {
                  if (1 === arguments.length)
                    for (var t = arguments[0].iterator(); t.hasNext();) {
                      var e = t.next();
                      this.addEdge(e, e);
                    } else if (2 === arguments.length)
                      for (var r = arguments[0], i = arguments[1], n = r.iterator(); n.hasNext();) {
                        var o = n.next();
                        this.addEdge(o, i);
                      }
                }, e.prototype.interfaces_ = function () {
                  return []
                }, e.prototype.getClass = function () {
                  return e
                }, e
              }(Up),
              Gp = function () {
                this._min = Ja.POSITIVE_INFINITY, this._max = Ja.NEGATIVE_INFINITY;
              },
              Xp = {
                NodeComparator: {
                  configurable: !0
                }
              };
            Gp.prototype.getMin = function () {
              return this._min
            }, Gp.prototype.intersects = function (t, e) {
              return !(this._min > e || this._max < t)
            }, Gp.prototype.getMax = function () {
              return this._max
            }, Gp.prototype.toString = function () {
              return Pu.toLineString(new ru(this._min, 0), new ru(this._max, 0))
            }, Gp.prototype.interfaces_ = function () {
              return []
            }, Gp.prototype.getClass = function () {
              return Gp
            }, Xp.NodeComparator.get = function () {
              return Zp
            }, Object.defineProperties(Gp, Xp);
            var Zp = function () {};
            Zp.prototype.compare = function (t, e) {
              var r = t,
                i = e,
                n = (r._min + r._max) / 2,
                o = (i._min + i._max) / 2;
              return n < o ? -1 : n > o ? 1 : 0
            }, Zp.prototype.interfaces_ = function () {
              return [eu]
            }, Zp.prototype.getClass = function () {
              return Zp
            };
            var Yp = function (t) {
                function e() {
                  t.call(this), this._item = null;
                  var e = arguments[0],
                    r = arguments[1],
                    i = arguments[2];
                  this._min = e, this._max = r, this._item = i;
                }
                return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.query = function (t, e, r) {
                  if (!this.intersects(t, e)) return null;
                  r.visitItem(this._item);
                }, e.prototype.interfaces_ = function () {
                  return []
                }, e.prototype.getClass = function () {
                  return e
                }, e
              }(Gp),
              Wp = function (t) {
                function e() {
                  t.call(this), this._node1 = null, this._node2 = null;
                  var e = arguments[0],
                    r = arguments[1];
                  this._node1 = e, this._node2 = r, this.buildExtent(this._node1, this._node2);
                }
                return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.buildExtent = function (t, e) {
                  this._min = Math.min(t._min, e._min), this._max = Math.max(t._max, e._max);
                }, e.prototype.query = function (t, e, r) {
                  if (!this.intersects(t, e)) return null;
                  null !== this._node1 && this._node1.query(t, e, r), null !== this._node2 && this._node2.query(t, e, r);
                }, e.prototype.interfaces_ = function () {
                  return []
                }, e.prototype.getClass = function () {
                  return e
                }, e
              }(Gp),
              Hp = function () {
                this._leaves = new rc, this._root = null, this._level = 0;
              };
            Hp.prototype.buildTree = function () {
              Nh.sort(this._leaves, new Gp.NodeComparator);
              for (var t = this._leaves, e = null, r = new rc;;) {
                if (this.buildLevel(t, r), 1 === r.size()) return r.get(0);
                e = t, t = r, r = e;
              }
            }, Hp.prototype.insert = function (t, e, r) {
              if (null !== this._root) throw new Error("Index cannot be added to once it has been queried");
              this._leaves.add(new Yp(t, e, r));
            }, Hp.prototype.query = function (t, e, r) {
              this.init(), this._root.query(t, e, r);
            }, Hp.prototype.buildRoot = function () {
              if (null !== this._root) return null;
              this._root = this.buildTree();
            }, Hp.prototype.printNode = function (t) {
              bu.out.println(Pu.toLineString(new ru(t._min, this._level), new ru(t._max, this._level)));
            }, Hp.prototype.init = function () {
              if (null !== this._root) return null;
              this.buildRoot();
            }, Hp.prototype.buildLevel = function (t, e) {
              this._level++, e.clear();
              for (var r = 0; r < t.size(); r += 2) {
                var i = t.get(r);
                if (null === (r + 1 < t.size() ? t.get(r) : null)) e.add(i);
                else {
                  var n = new Wp(t.get(r), t.get(r + 1));
                  e.add(n);
                }
              }
            }, Hp.prototype.interfaces_ = function () {
              return []
            }, Hp.prototype.getClass = function () {
              return Hp
            };
            var Kp = function () {
              this._items = new rc;
            };
            Kp.prototype.visitItem = function (t) {
              this._items.add(t);
            }, Kp.prototype.getItems = function () {
              return this._items
            }, Kp.prototype.interfaces_ = function () {
              return [Mh]
            }, Kp.prototype.getClass = function () {
              return Kp
            };
            var Jp = function () {
                this._index = null;
                var t = arguments[0];
                if (!uu(t, Dc)) throw new Ka("Argument must be Polygonal");
                this._index = new tf(t);
              },
              Qp = {
                SegmentVisitor: {
                  configurable: !0
                },
                IntervalIndexedGeometry: {
                  configurable: !0
                }
              };
            Jp.prototype.locate = function (t) {
              var e = new Bu(t),
                r = new $p(e);
              return this._index.query(t.y, t.y, r), e.getLocation()
            }, Jp.prototype.interfaces_ = function () {
              return [ml]
            }, Jp.prototype.getClass = function () {
              return Jp
            }, Qp.SegmentVisitor.get = function () {
              return $p
            }, Qp.IntervalIndexedGeometry.get = function () {
              return tf
            }, Object.defineProperties(Jp, Qp);
            var $p = function () {
              this._counter = null;
              var t = arguments[0];
              this._counter = t;
            };
            $p.prototype.visitItem = function (t) {
              var e = t;
              this._counter.countSegment(e.getCoordinate(0), e.getCoordinate(1));
            }, $p.prototype.interfaces_ = function () {
              return [Mh]
            }, $p.prototype.getClass = function () {
              return $p
            };
            var tf = function () {
              this._index = new Hp;
              var t = arguments[0];
              this.init(t);
            };
            tf.prototype.init = function (t) {
              for (var e = rp.getLines(t).iterator(); e.hasNext();) {
                var r = e.next().getCoordinates();
                this.addLine(r);
              }
            }, tf.prototype.addLine = function (t) {
              for (var e = 1; e < t.length; e++) {
                var r = new Yh(t[e - 1], t[e]),
                  i = Math.min(r.p0.y, r.p1.y),
                  n = Math.max(r.p0.y, r.p1.y);
                this._index.insert(i, n, r);
              }
            }, tf.prototype.query = function () {
              if (2 === arguments.length) {
                var t = arguments[0],
                  e = arguments[1],
                  r = new Kp;
                return this._index.query(t, e, r), r.getItems()
              }
              if (3 === arguments.length) {
                var i = arguments[0],
                  n = arguments[1],
                  o = arguments[2];
                this._index.query(i, n, o);
              }
            }, tf.prototype.interfaces_ = function () {
              return []
            }, tf.prototype.getClass = function () {
              return tf
            };
            var ef = function (t) {
                function e() {
                  if (t.call(this), this._parentGeom = null, this._lineEdgeMap = new Xc, this._boundaryNodeRule = null, this._useBoundaryDeterminationRule = !0, this._argIndex = null, this._boundaryNodes = null, this._hasTooFewPoints = !1, this._invalidPoint = null, this._areaPtLocator = null, this._ptLocator = new ip, 2 === arguments.length) {
                    var e = arguments[0],
                      r = arguments[1],
                      i = Zu.OGC_SFS_BOUNDARY_RULE;
                    this._argIndex = e, this._parentGeom = r, this._boundaryNodeRule = i, null !== r && this.add(r);
                  } else if (3 === arguments.length) {
                    var n = arguments[0],
                      o = arguments[1],
                      s = arguments[2];
                    this._argIndex = n, this._parentGeom = o, this._boundaryNodeRule = s, null !== o && this.add(o);
                  }
                }
                return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.insertBoundaryPoint = function (t, r) {
                  var i = this._nodes.addNode(r).getLabel(),
                    n = 1;
                  i.getLocation(t, nh.ON) === su.BOUNDARY && n++;
                  var o = e.determineBoundary(this._boundaryNodeRule, n);
                  i.setLocation(t, o);
                }, e.prototype.computeSelfNodes = function () {
                  if (2 === arguments.length) {
                    var t = arguments[0],
                      e = arguments[1];
                    return this.computeSelfNodes(t, e, !1)
                  }
                  if (3 === arguments.length) {
                    var r = arguments[0],
                      i = arguments[1],
                      n = arguments[2],
                      o = new qp(r, !0, !1);
                    o.setIsDoneIfProperInt(n);
                    var s = this.createEdgeSetIntersector(),
                      a = this._parentGeom instanceof Oc || this._parentGeom instanceof Nc || this._parentGeom instanceof Ac,
                      u = i || !a;
                    return s.computeIntersections(this._edges, o, u), this.addSelfIntersectionNodes(this._argIndex), o
                  }
                }, e.prototype.computeSplitEdges = function (t) {
                  for (var e = this._edges.iterator(); e.hasNext();) e.next().eiList.addSplitEdges(t);
                }, e.prototype.computeEdgeIntersections = function (t, e, r) {
                  var i = new qp(e, r, !0);
                  return i.setBoundaryNodes(this.getBoundaryNodes(), t.getBoundaryNodes()), this.createEdgeSetIntersector().computeIntersections(this._edges, t._edges, i), i
                }, e.prototype.getGeometry = function () {
                  return this._parentGeom
                }, e.prototype.getBoundaryNodeRule = function () {
                  return this._boundaryNodeRule
                }, e.prototype.hasTooFewPoints = function () {
                  return this._hasTooFewPoints
                }, e.prototype.addPoint = function () {
                  if (arguments[0] instanceof Pc) {
                    var t = arguments[0].getCoordinate();
                    this.insertPoint(this._argIndex, t, su.INTERIOR);
                  } else if (arguments[0] instanceof ru) {
                    var e = arguments[0];
                    this.insertPoint(this._argIndex, e, su.INTERIOR);
                  }
                }, e.prototype.addPolygon = function (t) {
                  this.addPolygonRing(t.getExteriorRing(), su.EXTERIOR, su.INTERIOR);
                  for (var e = 0; e < t.getNumInteriorRing(); e++) {
                    var r = t.getInteriorRingN(e);
                    this.addPolygonRing(r, su.INTERIOR, su.EXTERIOR);
                  }
                }, e.prototype.addEdge = function (t) {
                  this.insertEdge(t);
                  var e = t.getCoordinates();
                  this.insertPoint(this._argIndex, e[0], su.BOUNDARY), this.insertPoint(this._argIndex, e[e.length - 1], su.BOUNDARY);
                }, e.prototype.addLineString = function (t) {
                  var e = oc.removeRepeatedPoints(t.getCoordinates());
                  if (e.length < 2) return this._hasTooFewPoints = !0, this._invalidPoint = e[0], null;
                  var r = new Ol(e, new lh(this._argIndex, su.INTERIOR));
                  this._lineEdgeMap.put(t, r), this.insertEdge(r), Ru.isTrue(e.length >= 2, "found LineString with single point"), this.insertBoundaryPoint(this._argIndex, e[0]), this.insertBoundaryPoint(this._argIndex, e[e.length - 1]);
                }, e.prototype.getInvalidPoint = function () {
                  return this._invalidPoint
                }, e.prototype.getBoundaryPoints = function () {
                  for (var t = this.getBoundaryNodes(), e = new Array(t.size()).fill(null), r = 0, i = t.iterator(); i.hasNext();) {
                    var n = i.next();
                    e[r++] = n.getCoordinate().copy();
                  }
                  return e
                }, e.prototype.getBoundaryNodes = function () {
                  return null === this._boundaryNodes && (this._boundaryNodes = this._nodes.getBoundaryNodes(this._argIndex)), this._boundaryNodes
                }, e.prototype.addSelfIntersectionNode = function (t, e, r) {
                  if (this.isBoundaryNode(t, e)) return null;
                  r === su.BOUNDARY && this._useBoundaryDeterminationRule ? this.insertBoundaryPoint(t, e) : this.insertPoint(t, e, r);
                }, e.prototype.addPolygonRing = function (t, e, r) {
                  if (t.isEmpty()) return null;
                  var i = oc.removeRepeatedPoints(t.getCoordinates());
                  if (i.length < 4) return this._hasTooFewPoints = !0, this._invalidPoint = i[0], null;
                  var n = e,
                    o = r;
                  zu.isCCW(i) && (n = r, o = e);
                  var s = new Ol(i, new lh(this._argIndex, su.BOUNDARY, n, o));
                  this._lineEdgeMap.put(t, s), this.insertEdge(s), this.insertPoint(this._argIndex, i[0], su.BOUNDARY);
                }, e.prototype.insertPoint = function (t, e, r) {
                  var i = this._nodes.addNode(e),
                    n = i.getLabel();
                  null === n ? i._label = new lh(t, r) : n.setLocation(t, r);
                }, e.prototype.createEdgeSetIntersector = function () {
                  return new jp
                }, e.prototype.addSelfIntersectionNodes = function (t) {
                  for (var e = this._edges.iterator(); e.hasNext();)
                    for (var r = e.next(), i = r.getLabel().getLocation(t), n = r.eiList.iterator(); n.hasNext();) {
                      var o = n.next();
                      this.addSelfIntersectionNode(t, o.coord, i);
                    }
                }, e.prototype.add = function () {
                  if (1 !== arguments.length) return t.prototype.add.apply(this, arguments);
                  var e = arguments[0];
                  if (e.isEmpty()) return null;
                  if (e instanceof Ac && (this._useBoundaryDeterminationRule = !1), e instanceof Nc) this.addPolygon(e);
                  else if (e instanceof Mc) this.addLineString(e);
                  else if (e instanceof Pc) this.addPoint(e);
                  else if (e instanceof Rc) this.addCollection(e);
                  else if (e instanceof bc) this.addCollection(e);
                  else if (e instanceof Ac) this.addCollection(e);
                  else {
                    if (!(e instanceof wc)) throw new Error(e.getClass().getName());
                    this.addCollection(e);
                  }
                }, e.prototype.addCollection = function (t) {
                  for (var e = 0; e < t.getNumGeometries(); e++) {
                    var r = t.getGeometryN(e);
                    this.add(r);
                  }
                }, e.prototype.locate = function (t) {
                  return uu(this._parentGeom, Dc) && this._parentGeom.getNumGeometries() > 50 ? (null === this._areaPtLocator && (this._areaPtLocator = new Jp(this._parentGeom)), this._areaPtLocator.locate(t)) : this._ptLocator.locate(t, this._parentGeom)
                }, e.prototype.findEdge = function () {
                  if (1 === arguments.length) {
                    var e = arguments[0];
                    return this._lineEdgeMap.get(e)
                  }
                  return t.prototype.findEdge.apply(this, arguments)
                }, e.prototype.interfaces_ = function () {
                  return []
                }, e.prototype.getClass = function () {
                  return e
                }, e.determineBoundary = function (t, e) {
                  return t.isInBoundary(e) ? su.BOUNDARY : su.INTERIOR
                }, e
              }(Eh),
              rf = function () {
                if (this._li = new Fu, this._resultPrecisionModel = null, this._arg = null, 1 === arguments.length) {
                  var t = arguments[0];
                  this.setComputationPrecision(t.getPrecisionModel()), this._arg = new Array(1).fill(null), this._arg[0] = new ef(0, t);
                } else if (2 === arguments.length) {
                  var e = arguments[0],
                    r = arguments[1],
                    i = Zu.OGC_SFS_BOUNDARY_RULE;
                  e.getPrecisionModel().compareTo(r.getPrecisionModel()) >= 0 ? this.setComputationPrecision(e.getPrecisionModel()) : this.setComputationPrecision(r.getPrecisionModel()), this._arg = new Array(2).fill(null), this._arg[0] = new ef(0, e, i), this._arg[1] = new ef(1, r, i);
                } else if (3 === arguments.length) {
                  var n = arguments[0],
                    o = arguments[1],
                    s = arguments[2];
                  n.getPrecisionModel().compareTo(o.getPrecisionModel()) >= 0 ? this.setComputationPrecision(n.getPrecisionModel()) : this.setComputationPrecision(o.getPrecisionModel()), this._arg = new Array(2).fill(null), this._arg[0] = new ef(0, n, s), this._arg[1] = new ef(1, o, s);
                }
              };
            rf.prototype.getArgGeometry = function (t) {
              return this._arg[t].getGeometry()
            }, rf.prototype.setComputationPrecision = function (t) {
              this._resultPrecisionModel = t, this._li.setPrecisionModel(this._resultPrecisionModel);
            }, rf.prototype.interfaces_ = function () {
              return []
            }, rf.prototype.getClass = function () {
              return rf
            };
            var nf = function () {};
            nf.prototype.interfaces_ = function () {
              return []
            }, nf.prototype.getClass = function () {
              return nf
            }, nf.map = function () {
              if (arguments[0] instanceof qu && uu(arguments[1], nf.MapOp)) {
                for (var t = arguments[0], e = arguments[1], r = new rc, i = 0; i < t.getNumGeometries(); i++) {
                  var n = e.map(t.getGeometryN(i));
                  null !== n && r.add(n);
                }
                return t.getFactory().buildGeometry(r)
              }
              if (uu(arguments[0], Qu) && uu(arguments[1], nf.MapOp)) {
                for (var o = arguments[0], s = arguments[1], a = new rc, u = o.iterator(); u.hasNext();) {
                  var c = u.next(),
                    h = s.map(c);
                  null !== h && a.add(h);
                }
                return a
              }
            }, nf.MapOp = function () {};
            var of = function (t) {
              function e() {
                var e = arguments[0],
                  r = arguments[1];
                t.call(this, e, r), this._ptLocator = new ip, this._geomFact = null, this._resultGeom = null, this._graph = null, this._edgeList = new Sl, this._resultPolyList = new rc, this._resultLineList = new rc, this._resultPointList = new rc, this._graph = new Eh(new El), this._geomFact = e.getFactory();
              }
              return t && (e.__proto__ = t), e.prototype = Object.create(t && t.prototype), e.prototype.constructor = e, e.prototype.insertUniqueEdge = function (t) {
                var e = this._edgeList.findEqualEdge(t);
                if (null !== e) {
                  var r = e.getLabel(),
                    i = t.getLabel();
                  e.isPointwiseEqual(t) || (i = new lh(t.getLabel())).flip();
                  var n = e.getDepth();
                  n.isNull() && n.add(r), n.add(i), r.merge(i);
                } else this._edgeList.add(t);
              }, e.prototype.getGraph = function () {
                return this._graph
              }, e.prototype.cancelDuplicateResultEdges = function () {
                for (var t = this._graph.getEdgeEnds().iterator(); t.hasNext();) {
                  var e = t.next(),
                    r = e.getSym();
                  e.isInResult() && r.isInResult() && (e.setInResult(!1), r.setInResult(!1));
                }
              }, e.prototype.isCoveredByLA = function (t) {
                return !!this.isCovered(t, this._resultLineList) || !!this.isCovered(t, this._resultPolyList)
              }, e.prototype.computeGeometry = function (t, r, i, n) {
                var o = new rc;
                return o.addAll(t), o.addAll(r), o.addAll(i), o.isEmpty() ? e.createEmptyResult(n, this._arg[0].getGeometry(), this._arg[1].getGeometry(), this._geomFact) : this._geomFact.buildGeometry(o)
              }, e.prototype.mergeSymLabels = function () {
                for (var t = this._graph.getNodes().iterator(); t.hasNext();) t.next().getEdges().mergeSymLabels();
              }, e.prototype.isCovered = function (t, e) {
                for (var r = e.iterator(); r.hasNext();) {
                  var i = r.next();
                  if (this._ptLocator.locate(t, i) !== su.EXTERIOR) return !0
                }
                return !1
              }, e.prototype.replaceCollapsedEdges = function () {
                for (var t = new rc, e = this._edgeList.iterator(); e.hasNext();) {
                  var r = e.next();
                  r.isCollapsed() && (e.remove(), t.add(r.getCollapsedEdge()));
                }
                this._edgeList.addAll(t);
              }, e.prototype.updateNodeLabelling = function () {
                for (var t = this._graph.getNodes().iterator(); t.hasNext();) {
                  var e = t.next(),
                    r = e.getEdges().getLabel();
                  e.getLabel().merge(r);
                }
              }, e.prototype.getResultGeometry = function (t) {
                return this.computeOverlay(t), this._resultGeom
              }, e.prototype.insertUniqueEdges = function (t) {
                for (var e = t.iterator(); e.hasNext();) {
                  var r = e.next();
                  this.insertUniqueEdge(r);
                }
              }, e.prototype.computeOverlay = function (t) {
                this.copyPoints(0), this.copyPoints(1), this._arg[0].computeSelfNodes(this._li, !1), this._arg[1].computeSelfNodes(this._li, !1), this._arg[0].computeEdgeIntersections(this._arg[1], this._li, !0);
                var e = new rc;
                this._arg[0].computeSplitEdges(e), this._arg[1].computeSplitEdges(e), this.insertUniqueEdges(e), this.computeLabelsFromDepths(), this.replaceCollapsedEdges(), bp.checkValid(this._edgeList.getEdges()), this._graph.addEdges(this._edgeList.getEdges()), this.computeLabelling(), this.labelIncompleteNodes(), this.findResultAreaEdges(t), this.cancelDuplicateResultEdges();
                var r = new Lh(this._geomFact);
                r.add(this._graph), this._resultPolyList = r.getPolygons();
                var i = new Lp(this, this._geomFact, this._ptLocator);
                this._resultLineList = i.build(t);
                var n = new Sp(this, this._geomFact, this._ptLocator);
                this._resultPointList = n.build(t), this._resultGeom = this.computeGeometry(this._resultPointList, this._resultLineList, this._resultPolyList, t);
              }, e.prototype.labelIncompleteNode = function (t, e) {
                var r = this._ptLocator.locate(t.getCoordinate(), this._arg[e].getGeometry());
                t.getLabel().setLocation(e, r);
              }, e.prototype.copyPoints = function (t) {
                for (var e = this._arg[t].getNodeIterator(); e.hasNext();) {
                  var r = e.next();
                  this._graph.addNode(r.getCoordinate()).setLabel(t, r.getLabel().getLocation(t));
                }
              }, e.prototype.findResultAreaEdges = function (t) {
                for (var r = this._graph.getEdgeEnds().iterator(); r.hasNext();) {
                  var i = r.next(),
                    n = i.getLabel();
                  n.isArea() && !i.isInteriorAreaEdge() && e.isResultOfOp(n.getLocation(0, nh.RIGHT), n.getLocation(1, nh.RIGHT), t) && i.setInResult(!0);
                }
              }, e.prototype.computeLabelsFromDepths = function () {
                for (var t = this._edgeList.iterator(); t.hasNext();) {
                  var e = t.next(),
                    r = e.getLabel(),
                    i = e.getDepth();
                  if (!i.isNull()) {
                    i.normalize();
                    for (var n = 0; n < 2; n++) r.isNull(n) || !r.isArea() || i.isNull(n) || (0 === i.getDelta(n) ? r.toLine(n) : (Ru.isTrue(!i.isNull(n, nh.LEFT), "depth of LEFT side has not been initialized"), r.setLocation(n, nh.LEFT, i.getLocation(n, nh.LEFT)), Ru.isTrue(!i.isNull(n, nh.RIGHT), "depth of RIGHT side has not been initialized"), r.setLocation(n, nh.RIGHT, i.getLocation(n, nh.RIGHT))));
                  }
                }
              }, e.prototype.computeLabelling = function () {
                for (var t = this._graph.getNodes().iterator(); t.hasNext();) t.next().getEdges().computeLabelling(this._arg);
                this.mergeSymLabels(), this.updateNodeLabelling();
              }, e.prototype.labelIncompleteNodes = function () {
                for (var t = this._graph.getNodes().iterator(); t.hasNext();) {
                  var e = t.next(),
                    r = e.getLabel();
                  e.isIsolated() && (r.isNull(0) ? this.labelIncompleteNode(e, 0) : this.labelIncompleteNode(e, 1)), e.getEdges().updateLabelling(r);
                }
              }, e.prototype.isCoveredByA = function (t) {
                return !!this.isCovered(t, this._resultPolyList)
              }, e.prototype.interfaces_ = function () {
                return []
              }, e.prototype.getClass = function () {
                return e
              }, e
            }(rf); of .overlayOp = function (t, e, r) {
              return new of (t, e).getResultGeometry(r)
            }, of .intersection = function (t, e) {
              if (t.isEmpty() || e.isEmpty()) return of.createEmptyResult( of .INTERSECTION, t, e, t.getFactory());
              if (t.isGeometryCollection()) {
                var r = e;
                return Ep.map(t, {
                  interfaces_: function () {
                    return [nf.MapOp]
                  },
                  map: function (t) {
                    return t.intersection(r)
                  }
                })
              }
              return t.checkNotGeometryCollection(t), t.checkNotGeometryCollection(e), kp.overlayOp(t, e, of .INTERSECTION)
            }, of .symDifference = function (t, e) {
              if (t.isEmpty() || e.isEmpty()) {
                if (t.isEmpty() && e.isEmpty()) return of.createEmptyResult( of .SYMDIFFERENCE, t, e, t.getFactory());
                if (t.isEmpty()) return e.copy();
                if (e.isEmpty()) return t.copy()
              }
              return t.checkNotGeometryCollection(t), t.checkNotGeometryCollection(e), kp.overlayOp(t, e, of .SYMDIFFERENCE)
            }, of .resultDimension = function (t, e, r) {
              var i = e.getDimension(),
                n = r.getDimension(),
                o = -1;
              switch (t) {
                case of.INTERSECTION:
                  o = Math.min(i, n);
                  break;
                case of.UNION:
                  o = Math.max(i, n);
                  break;
                case of.DIFFERENCE:
                  o = i;
                  break;
                case of.SYMDIFFERENCE:
                  o = Math.max(i, n);
              }
              return o
            }, of .createEmptyResult = function (t, e, r, i) {
              var n = null;
              switch ( of .resultDimension(t, e, r)) {
                case -1:
                  n = i.createGeometryCollection(new Array(0).fill(null));
                  break;
                case 0:
                  n = i.createPoint();
                  break;
                case 1:
                  n = i.createLineString();
                  break;
                case 2:
                  n = i.createPolygon();
              }
              return n
            }, of .difference = function (t, e) {
              return t.isEmpty() ? of .createEmptyResult( of .DIFFERENCE, t, e, t.getFactory()) : e.isEmpty() ? t.copy() : (t.checkNotGeometryCollection(t), t.checkNotGeometryCollection(e), kp.overlayOp(t, e, of .DIFFERENCE))
            }, of .isResultOfOp = function () {
              if (2 === arguments.length) {
                var t = arguments[0],
                  e = arguments[1],
                  r = t.getLocation(0),
                  i = t.getLocation(1);
                return of.isResultOfOp(r, i, e)
              }
              if (3 === arguments.length) {
                var n = arguments[0],
                  o = arguments[1],
                  s = arguments[2];
                switch (n === su.BOUNDARY && (n = su.INTERIOR), o === su.BOUNDARY && (o = su.INTERIOR), s) {
                  case of.INTERSECTION:
                    return n === su.INTERIOR && o === su.INTERIOR;
                  case of.UNION:
                    return n === su.INTERIOR || o === su.INTERIOR;
                  case of.DIFFERENCE:
                    return n === su.INTERIOR && o !== su.INTERIOR;
                  case of.SYMDIFFERENCE:
                    return n === su.INTERIOR && o !== su.INTERIOR || n !== su.INTERIOR && o === su.INTERIOR
                }
                return !1
              }
            }, of .INTERSECTION = 1, of .UNION = 2, of .DIFFERENCE = 3, of .SYMDIFFERENCE = 4;
            var sf = function () {
              this._g = null, this._boundaryDistanceTolerance = null, this._linework = null, this._ptLocator = new ip, this._seg = new Yh;
              var t = arguments[0],
                e = arguments[1];
              this._g = t, this._boundaryDistanceTolerance = e, this._linework = this.extractLinework(t);
            };
            sf.prototype.isWithinToleranceOfBoundary = function (t) {
              for (var e = 0; e < this._linework.getNumGeometries(); e++)
                for (var r = this._linework.getGeometryN(e).getCoordinateSequence(), i = 0; i < r.size() - 1; i++)
                  if (r.getCoordinate(i, this._seg.p0), r.getCoordinate(i + 1, this._seg.p1), this._seg.distance(t) <= this._boundaryDistanceTolerance) return !0;
              return !1
            }, sf.prototype.getLocation = function (t) {
              return this.isWithinToleranceOfBoundary(t) ? su.BOUNDARY : this._ptLocator.locate(t, this._g)
            }, sf.prototype.extractLinework = function (t) {
              var e = new af;
              t.apply(e);
              var r = e.getLinework(),
                i = Kc.toLineStringArray(r);
              return t.getFactory().createMultiLineString(i)
            }, sf.prototype.interfaces_ = function () {
              return []
            }, sf.prototype.getClass = function () {
              return sf
            };
            var af = function () {
              this._linework = null, this._linework = new rc;
            };
            af.prototype.getLinework = function () {
              return this._linework
            }, af.prototype.filter = function (t) {
              if (t instanceof Nc) {
                var e = t;
                this._linework.add(e.getExteriorRing());
                for (var r = 0; r < e.getNumInteriorRing(); r++) this._linework.add(e.getInteriorRingN(r));
              }
            }, af.prototype.interfaces_ = function () {
              return [vc]
            }, af.prototype.getClass = function () {
              return af
            };
            var uf = function () {
              this._g = null, this._doLeft = !0, this._doRight = !0;
              var t = arguments[0];
              this._g = t;
            };
            uf.prototype.extractPoints = function (t, e, r) {
              for (var i = t.getCoordinates(), n = 0; n < i.length - 1; n++) this.computeOffsetPoints(i[n], i[n + 1], e, r);
            }, uf.prototype.setSidesToGenerate = function (t, e) {
              this._doLeft = t, this._doRight = e;
            }, uf.prototype.getPoints = function (t) {
              for (var e = new rc, r = rp.getLines(this._g).iterator(); r.hasNext();) {
                var i = r.next();
                this.extractPoints(i, t, e);
              }
              return e
            }, uf.prototype.computeOffsetPoints = function (t, e, r, i) {
              var n = e.x - t.x,
                o = e.y - t.y,
                s = Math.sqrt(n * n + o * o),
                a = r * n / s,
                u = r * o / s,
                c = (e.x + t.x) / 2,
                h = (e.y + t.y) / 2;
              if (this._doLeft) {
                var l = new ru(c - u, h + a);
                i.add(l);
              }
              if (this._doRight) {
                var p = new ru(c + u, h - a);
                i.add(p);
              }
            }, uf.prototype.interfaces_ = function () {
              return []
            }, uf.prototype.getClass = function () {
              return uf
            };
            var cf = function t() {
                this._geom = null, this._locFinder = null, this._location = new Array(3).fill(null), this._invalidLocation = null, this._boundaryDistanceTolerance = t.TOLERANCE, this._testCoords = new rc;
                var e = arguments[0],
                  r = arguments[1],
                  i = arguments[2];
                this._boundaryDistanceTolerance = t.computeBoundaryDistanceTolerance(e, r), this._geom = [e, r, i], this._locFinder = [new sf(this._geom[0], this._boundaryDistanceTolerance), new sf(this._geom[1], this._boundaryDistanceTolerance), new sf(this._geom[2], this._boundaryDistanceTolerance)];
              },
              hf = {
                TOLERANCE: {
                  configurable: !0
                }
              };
            cf.prototype.reportResult = function (t, e, r) {
              bu.out.println("Overlay result invalid - A:" + su.toLocationSymbol(e[0]) + " B:" + su.toLocationSymbol(e[1]) + " expected:" + (r ? "i" : "e") + " actual:" + su.toLocationSymbol(e[2]));
            }, cf.prototype.isValid = function (t) {
              return this.addTestPts(this._geom[0]), this.addTestPts(this._geom[1]), this.checkValid(t)
            }, cf.prototype.checkValid = function () {
              if (1 === arguments.length) {
                for (var t = arguments[0], e = 0; e < this._testCoords.size(); e++) {
                  var r = this._testCoords.get(e);
                  if (!this.checkValid(t, r)) return this._invalidLocation = r, !1
                }
                return !0
              }
              if (2 === arguments.length) {
                var i = arguments[0],
                  n = arguments[1];
                return this._location[0] = this._locFinder[0].getLocation(n), this._location[1] = this._locFinder[1].getLocation(n), this._location[2] = this._locFinder[2].getLocation(n), !!cf.hasLocation(this._location, su.BOUNDARY) || this.isValidResult(i, this._location)
              }
            }, cf.prototype.addTestPts = function (t) {
              var e = new uf(t);
              this._testCoords.addAll(e.getPoints(5 * this._boundaryDistanceTolerance));
            }, cf.prototype.isValidResult = function (t, e) {
              var r = of .isResultOfOp(e[0], e[1], t),
                i = !(r ^ e[2] === su.INTERIOR);
              return i || this.reportResult(t, e, r), i
            }, cf.prototype.getInvalidLocation = function () {
              return this._invalidLocation
            }, cf.prototype.interfaces_ = function () {
              return []
            }, cf.prototype.getClass = function () {
              return cf
            }, cf.hasLocation = function (t, e) {
              for (var r = 0; r < 3; r++)
                if (t[r] === e) return !0;
              return !1
            }, cf.computeBoundaryDistanceTolerance = function (t, e) {
              return Math.min(Mp.computeSizeBasedSnapTolerance(t), Mp.computeSizeBasedSnapTolerance(e))
            }, cf.isValid = function (t, e, r, i) {
              return new cf(t, e, i).isValid(r)
            }, hf.TOLERANCE.get = function () {
              return 1e-6
            }, Object.defineProperties(cf, hf);
            var lf = function t(e) {
              this._geomFactory = null, this._skipEmpty = !1, this._inputGeoms = null, this._geomFactory = t.extractFactory(e), this._inputGeoms = e;
            };
            lf.prototype.extractElements = function (t, e) {
              if (null === t) return null;
              for (var r = 0; r < t.getNumGeometries(); r++) {
                var i = t.getGeometryN(r);
                this._skipEmpty && i.isEmpty() || e.add(i);
              }
            }, lf.prototype.combine = function () {
              for (var t = new rc, e = this._inputGeoms.iterator(); e.hasNext();) {
                var r = e.next();
                this.extractElements(r, t);
              }
              return 0 === t.size() ? null !== this._geomFactory ? this._geomFactory.createGeometryCollection(null) : null : this._geomFactory.buildGeometry(t)
            }, lf.prototype.interfaces_ = function () {
              return []
            }, lf.prototype.getClass = function () {
              return lf
            }, lf.combine = function () {
              if (1 === arguments.length) {
                var t = arguments[0];
                return new lf(t).combine()
              }
              if (2 === arguments.length) {
                var e = arguments[0],
                  r = arguments[1];
                return new lf(lf.createList(e, r)).combine()
              }
              if (3 === arguments.length) {
                var i = arguments[0],
                  n = arguments[1],
                  o = arguments[2];
                return new lf(lf.createList(i, n, o)).combine()
              }
            }, lf.extractFactory = function (t) {
              return t.isEmpty() ? null : t.iterator().next().getFactory()
            }, lf.createList = function () {
              if (2 === arguments.length) {
                var t = arguments[0],
                  e = arguments[1],
                  r = new rc;
                return r.add(t), r.add(e), r
              }
              if (3 === arguments.length) {
                var i = arguments[0],
                  n = arguments[1],
                  o = arguments[2],
                  s = new rc;
                return s.add(i), s.add(n), s.add(o), s
              }
            };
            var pf = function () {
                this._inputPolys = null, this._geomFactory = null;
                var t = arguments[0];
                this._inputPolys = t, null === this._inputPolys && (this._inputPolys = new rc);
              },
              ff = {
                STRTREE_NODE_CAPACITY: {
                  configurable: !0
                }
              };
            pf.prototype.reduceToGeometries = function (t) {
              for (var e = new rc, r = t.iterator(); r.hasNext();) {
                var i = r.next(),
                  n = null;
                uu(i, ec) ? n = this.unionTree(i) : i instanceof qu && (n = i), e.add(n);
              }
              return e
            }, pf.prototype.extractByEnvelope = function (t, e, r) {
              for (var i = new rc, n = 0; n < e.getNumGeometries(); n++) {
                var o = e.getGeometryN(n);
                o.getEnvelopeInternal().intersects(t) ? i.add(o) : r.add(o);
              }
              return this._geomFactory.buildGeometry(i)
            }, pf.prototype.unionOptimized = function (t, e) {
              var r = t.getEnvelopeInternal(),
                i = e.getEnvelopeInternal();
              if (!r.intersects(i)) return lf.combine(t, e);
              if (t.getNumGeometries() <= 1 && e.getNumGeometries() <= 1) return this.unionActual(t, e);
              var n = r.intersection(i);
              return this.unionUsingEnvelopeIntersection(t, e, n)
            }, pf.prototype.union = function () {
              if (null === this._inputPolys) throw new Error("union() method cannot be called twice");
              if (this._inputPolys.isEmpty()) return null;
              this._geomFactory = this._inputPolys.iterator().next().getFactory();
              for (var t = new Bh(pf.STRTREE_NODE_CAPACITY), e = this._inputPolys.iterator(); e.hasNext();) {
                var r = e.next();
                t.insert(r.getEnvelopeInternal(), r);
              }
              this._inputPolys = null;
              var i = t.itemsTree();
              return this.unionTree(i)
            }, pf.prototype.binaryUnion = function () {
              if (1 === arguments.length) {
                var t = arguments[0];
                return this.binaryUnion(t, 0, t.size())
              }
              if (3 === arguments.length) {
                var e = arguments[0],
                  r = arguments[1],
                  i = arguments[2];
                if (i - r <= 1) {
                  var n = pf.getGeometry(e, r);
                  return this.unionSafe(n, null)
                }
                if (i - r == 2) return this.unionSafe(pf.getGeometry(e, r), pf.getGeometry(e, r + 1));
                var o = Math.trunc((i + r) / 2),
                  s = this.binaryUnion(e, r, o),
                  a = this.binaryUnion(e, o, i);
                return this.unionSafe(s, a)
              }
            }, pf.prototype.repeatedUnion = function (t) {
              for (var e = null, r = t.iterator(); r.hasNext();) {
                var i = r.next();
                e = null === e ? i.copy() : e.union(i);
              }
              return e
            }, pf.prototype.unionSafe = function (t, e) {
              return null === t && null === e ? null : null === t ? e.copy() : null === e ? t.copy() : this.unionOptimized(t, e)
            }, pf.prototype.unionActual = function (t, e) {
              return pf.restrictToPolygons(t.union(e))
            }, pf.prototype.unionTree = function (t) {
              var e = this.reduceToGeometries(t);
              return this.binaryUnion(e)
            }, pf.prototype.unionUsingEnvelopeIntersection = function (t, e, r) {
              var i = new rc,
                n = this.extractByEnvelope(r, t, i),
                o = this.extractByEnvelope(r, e, i),
                s = this.unionActual(n, o);
              return i.add(s), lf.combine(i)
            }, pf.prototype.bufferUnion = function () {
              if (1 === arguments.length) {
                var t = arguments[0];
                return t.get(0).getFactory().buildGeometry(t).buffer(0)
              }
              if (2 === arguments.length) {
                var e = arguments[0],
                  r = arguments[1];
                return e.getFactory().createGeometryCollection([e, r]).buffer(0)
              }
            }, pf.prototype.interfaces_ = function () {
              return []
            }, pf.prototype.getClass = function () {
              return pf
            }, pf.restrictToPolygons = function (t) {
              if (uu(t, Dc)) return t;
              var e = ep.getPolygons(t);
              return 1 === e.size() ? e.get(0) : t.getFactory().createMultiPolygon(Kc.toPolygonArray(e))
            }, pf.getGeometry = function (t, e) {
              return e >= t.size() ? null : t.get(e)
            }, pf.union = function (t) {
              return new pf(t).union()
            }, ff.STRTREE_NODE_CAPACITY.get = function () {
              return 4
            }, Object.defineProperties(pf, ff);
            var df = function () {};
            df.prototype.interfaces_ = function () {
              return []
            }, df.prototype.getClass = function () {
              return df
            }, df.union = function (t, e) {
              if (t.isEmpty() || e.isEmpty()) {
                if (t.isEmpty() && e.isEmpty()) return of.createEmptyResult( of .UNION, t, e, t.getFactory());
                if (t.isEmpty()) return e.copy();
                if (e.isEmpty()) return t.copy()
              }
              return t.checkNotGeometryCollection(t), t.checkNotGeometryCollection(e), kp.overlayOp(t, e, of .UNION)
            };
            var gf = function () {
              return new Rn
            };
            Rn.prototype = {
              constructor: Rn,
              reset: function () {
                this.s = this.t = 0;
              },
              add: function (t) {
                On(_f, t, this.t), On(this, _f.s, this.s), this.s ? this.t += _f.t : this.s = _f.t;
              },
              valueOf: function () {
                return this.s
              }
            };
            var _f = new Rn,
              yf = 1e-6,
              mf = Math.PI,
              vf = mf / 2,
              xf = mf / 4,
              wf = 2 * mf,
              bf = 180 / mf,
              Ef = mf / 180,
              Lf = Math.abs,
              Sf = Math.atan,
              Cf = Math.atan2,
              If = Math.cos,
              Mf = Math.exp,
              Tf = Math.log,
              Pf = Math.sin,
              Df = Math.sqrt,
              Nf = Math.tan,
              Rf = {
                Feature: function (t, e) {
                  kn(t.geometry, e);
                },
                FeatureCollection: function (t, e) {
                  for (var r = t.features, i = -1, n = r.length; ++i < n;) kn(r[i].geometry, e);
                }
              },
              Of = {
                Sphere: function (t, e) {
                  e.sphere();
                },
                Point: function (t, e) {
                  t = t.coordinates, e.point(t[0], t[1], t[2]);
                },
                MultiPoint: function (t, e) {
                  for (var r = t.coordinates, i = -1, n = r.length; ++i < n;) t = r[i], e.point(t[0], t[1], t[2]);
                },
                LineString: function (t, e) {
                  Bn(t.coordinates, e, 0);
                },
                MultiLineString: function (t, e) {
                  for (var r = t.coordinates, i = -1, n = r.length; ++i < n;) Bn(r[i], e, 0);
                },
                Polygon: function (t, e) {
                  zn(t.coordinates, e);
                },
                MultiPolygon: function (t, e) {
                  for (var r = t.coordinates, i = -1, n = r.length; ++i < n;) zn(r[i], e);
                },
                GeometryCollection: function (t, e) {
                  for (var r = t.geometries, i = -1, n = r.length; ++i < n;) kn(r[i], e);
                }
              },
              Af = function (t, e) {
                t && Rf.hasOwnProperty(t.type) ? Rf[t.type](t, e) : kn(t, e);
              },
              Ff = (gf(), gf(), gf(), function (t, e) {
                function r(r, i) {
                  return r = t(r, i), e(r[0], r[1])
                }
                return t.invert && e.invert && (r.invert = function (r, i) {
                  return (r = e.invert(r, i)) && t.invert(r[0], r[1])
                }), r
              });
            Yn.invert = Yn;
            var kf = function (t) {
                function e(e) {
                  return (e = t(e[0] * Ef, e[1] * Ef))[0] *= bf, e[1] *= bf, e
                }
                return t = Wn(t[0] * Ef, t[1] * Ef, t.length > 2 ? t[2] * Ef : 0), e.invert = function (e) {
                  return (e = t.invert(e[0] * Ef, e[1] * Ef))[0] *= bf, e[1] *= bf, e
                }, e
              },
              Bf = function () {
                var t, e = [];
                return {
                  point: function (e, r) {
                    t.push([e, r]);
                  },
                  lineStart: function () {
                    e.push(t = []);
                  },
                  lineEnd: Fn,
                  rejoin: function () {
                    e.length > 1 && e.push(e.pop().concat(e.shift()));
                  },
                  result: function () {
                    var r = e;
                    return e = [], t = null, r
                  }
                }
              },
              zf = function (t, e, r, i, n, o) {
                var s, a = t[0],
                  u = t[1],
                  c = 0,
                  h = 1,
                  l = e[0] - a,
                  p = e[1] - u;
                if (s = r - a, l || !(s > 0)) {
                  if (s /= l, l < 0) {
                    if (s < c) return;
                    s < h && (h = s);
                  } else if (l > 0) {
                    if (s > h) return;
                    s > c && (c = s);
                  }
                  if (s = n - a, l || !(s < 0)) {
                    if (s /= l, l < 0) {
                      if (s > h) return;
                      s > c && (c = s);
                    } else if (l > 0) {
                      if (s < c) return;
                      s < h && (h = s);
                    }
                    if (s = i - u, p || !(s > 0)) {
                      if (s /= p, p < 0) {
                        if (s < c) return;
                        s < h && (h = s);
                      } else if (p > 0) {
                        if (s > h) return;
                        s > c && (c = s);
                      }
                      if (s = o - u, p || !(s < 0)) {
                        if (s /= p, p < 0) {
                          if (s > h) return;
                          s > c && (c = s);
                        } else if (p > 0) {
                          if (s < c) return;
                          s < h && (h = s);
                        }
                        return c > 0 && (t[0] = a + c * l, t[1] = u + c * p), h < 1 && (e[0] = a + h * l, e[1] = u + h * p), !0
                      }
                    }
                  }
                }
              },
              Vf = function (t, e) {
                return Lf(t[0] - e[0]) < yf && Lf(t[1] - e[1]) < yf
              },
              Uf = function (t, e, r, i, n) {
                var o, s, a = [],
                  u = [];
                if (t.forEach(function (t) {
                    if (!((e = t.length - 1) <= 0)) {
                      var e, r, i = t[0],
                        s = t[e];
                      if (Vf(i, s)) {
                        for (n.lineStart(), o = 0; o < e; ++o) n.point((i = t[o])[0], i[1]);
                        n.lineEnd();
                      } else a.push(r = new $n(i, t, null, !0)), u.push(r.o = new $n(i, null, r, !1)), a.push(r = new $n(s, t, null, !1)), u.push(r.o = new $n(s, null, r, !0));
                    }
                  }), a.length) {
                  for (u.sort(e), to(a), to(u), o = 0, s = u.length; o < s; ++o) u[o].e = r = !r;
                  for (var c, h, l = a[0];;) {
                    for (var p = l, f = !0; p.v;)
                      if ((p = p.n) === l) return;
                    c = p.z, n.lineStart();
                    do {
                      if (p.v = p.o.v = !0, p.e) {
                        if (f)
                          for (o = 0, s = c.length; o < s; ++o) n.point((h = c[o])[0], h[1]);
                        else i(p.x, p.n.x, 1, n);
                        p = p.n;
                      } else {
                        if (f)
                          for (c = p.p.z, o = c.length - 1; o >= 0; --o) n.point((h = c[o])[0], h[1]);
                        else i(p.x, p.p.x, -1, n);
                        p = p.p;
                      }
                      c = (p = p.o).z, f = !f;
                    } while (!p.v);
                    n.lineEnd();
                  }
                }
              },
              qf = function (t, e) {
                return t < e ? -1 : t > e ? 1 : t >= e ? 0 : NaN
              },
              jf = (function (t) {
                1 === t.length && (t = function (t) {
                  return function (e, r) {
                    return qf(t(e), r)
                  }
                }(t));
              }(qf), function (t) {
                for (var e, r, i, n = t.length, o = -1, s = 0; ++o < n;) s += t[o].length;
                for (r = new Array(s); --n >= 0;)
                  for (e = (i = t[n]).length; --e >= 0;) r[--s] = i[e];
                return r
              }),
              Gf = 1e9,
              Xf = -Gf,
              Zf = gf(),
              Yf = (gf(), function (t) {
                return t
              }),
              Wf = (gf(), gf(), 1 / 0),
              Hf = Wf,
              Kf = -Wf,
              Jf = Kf,
              Qf = {
                point: function (t, e) {
                  t < Wf && (Wf = t), t > Kf && (Kf = t), e < Hf && (Hf = e), e > Jf && (Jf = e);
                },
                lineStart: Fn,
                lineEnd: Fn,
                polygonStart: Fn,
                polygonEnd: Fn,
                result: function () {
                  var t = [
                    [Wf, Hf],
                    [Kf, Jf]
                  ];
                  return Kf = Jf = -(Hf = Wf = 1 / 0), t
                }
              },
              $f = (gf(), function (t, e, r, i) {
                return function (n, o) {
                  function s(e, r) {
                    var i = n(e, r);
                    t(e = i[0], r = i[1]) && o.point(e, r);
                  }
  
                  function a(t, e) {
                    var r = n(t, e);
                    _.point(r[0], r[1]);
                  }
  
                  function u() {
                    w.point = a, _.lineStart();
                  }
  
                  function c() {
                    w.point = s, _.lineEnd();
                  }
  
                  function h(t, e) {
                    g.push([t, e]);
                    var r = n(t, e);
                    v.point(r[0], r[1]);
                  }
  
                  function l() {
                    v.lineStart(), g = [];
                  }
  
                  function p() {
                    h(g[0][0], g[0][1]), v.lineEnd();
                    var t, e, r, i, n = v.clean(),
                      s = m.result(),
                      a = s.length;
                    if (g.pop(), f.push(g), g = null, a)
                      if (1 & n) {
                        if ((e = (r = s[0]).length - 1) > 0) {
                          for (x || (o.polygonStart(), x = !0), o.lineStart(), t = 0; t < e; ++t) o.point((i = r[t])[0], i[1]);
                          o.lineEnd();
                        }
                      } else a > 1 && 2 & n && s.push(s.pop().concat(s.shift())), d.push(s.filter(ro));
                  }
                  var f, d, g, _ = e(o),
                    y = n.invert(i[0], i[1]),
                    m = Bf(),
                    v = e(m),
                    x = !1,
                    w = {
                      point: s,
                      lineStart: u,
                      lineEnd: c,
                      polygonStart: function () {
                        w.point = h, w.lineStart = l, w.lineEnd = p, d = [], f = [];
                      },
                      polygonEnd: function () {
                        w.point = s, w.lineStart = u, w.lineEnd = c, d = jf(d);
                        var t = function (t, e) {
                          var r = e[0],
                            i = e[1],
                            n = [Pf(r), -If(r), 0],
                            o = 0,
                            s = 0;
                          Zf.reset();
                          for (var a = 0, u = t.length; a < u; ++a)
                            if (h = (c = t[a]).length)
                              for (var c, h, l = c[h - 1], p = l[0], f = l[1] / 2 + xf, d = Pf(f), g = If(f), _ = 0; _ < h; ++_, p = m, d = x, g = w, l = y) {
                                var y = c[_],
                                  m = y[0],
                                  v = y[1] / 2 + xf,
                                  x = Pf(v),
                                  w = If(v),
                                  b = m - p,
                                  E = b >= 0 ? 1 : -1,
                                  L = E * b,
                                  S = L > mf,
                                  C = d * x;
                                if (Zf.add(Cf(C * E * Pf(L), g * w + C * If(L))), o += S ? b + E * wf : b, S ^ p >= r ^ m >= r) {
                                  var I = jn(Un(l), Un(y));
                                  Zn(I);
                                  var M = jn(n, I);
                                  Zn(M);
                                  var T = (S ^ b >= 0 ? -1 : 1) * An(M[2]);
                                  (i > T || i === T && (I[0] || I[1])) && (s += S ^ b >= 0 ? 1 : -1);
                                }
                              }
                          return (o < -yf || o < yf && Zf < -yf) ^ 1 & s
                        }(f, y);
                        d.length ? (x || (o.polygonStart(), x = !0), Uf(d, io, t, r, o)) : t && (x || (o.polygonStart(), x = !0), o.lineStart(), r(null, null, 1, o), o.lineEnd()), x && (o.polygonEnd(), x = !1), d = f = null;
                      },
                      sphere: function () {
                        o.polygonStart(), o.lineStart(), r(null, null, 1, o), o.lineEnd(), o.polygonEnd();
                      }
                    };
                  return w
                }
              }),
              td = $f(function () {
                return !0
              }, function (t) {
                var e, r = NaN,
                  i = NaN,
                  n = NaN;
                return {
                  lineStart: function () {
                    t.lineStart(), e = 1;
                  },
                  point: function (o, s) {
                    var a = o > 0 ? mf : -mf,
                      u = Lf(o - r);
                    Lf(u - mf) < yf ? (t.point(r, i = (i + s) / 2 > 0 ? vf : -vf), t.point(n, i), t.lineEnd(), t.lineStart(), t.point(a, i), t.point(o, i), e = 0) : n !== a && u >= mf && (Lf(r - n) < yf && (r -= n * yf), Lf(o - a) < yf && (o -= a * yf), i = function (t, e, r, i) {
                      var n, o, s = Pf(t - r);
                      return Lf(s) > yf ? Sf((Pf(e) * (o = If(i)) * Pf(r) - Pf(i) * (n = If(e)) * Pf(t)) / (n * o * s)) : (e + i) / 2
                    }(r, i, o, s), t.point(n, i), t.lineEnd(), t.lineStart(), t.point(a, i), e = 0), t.point(r = o, i = s), n = a;
                  },
                  lineEnd: function () {
                    t.lineEnd(), r = i = NaN;
                  },
                  clean: function () {
                    return 2 - e
                  }
                }
              }, function (t, e, r, i) {
                var n;
                if (null == t) n = r * vf, i.point(-mf, n), i.point(0, n), i.point(mf, n), i.point(mf, 0), i.point(mf, -n), i.point(0, -n), i.point(-mf, -n), i.point(-mf, 0), i.point(-mf, n);
                else if (Lf(t[0] - e[0]) > yf) {
                  var o = t[0] < e[0] ? mf : -mf;
                  n = r * o / 2, i.point(-o, n), i.point(0, n), i.point(o, n);
                } else i.point(e[0], e[1]);
              }, [-mf, -vf]),
              ed = function (t, e) {
                function r(t, e) {
                  return If(t) * If(e) > o
                }
  
                function i(t, e, r) {
                  var i = [1, 0, 0],
                    n = jn(Un(t), Un(e)),
                    s = qn(n, n),
                    a = n[0],
                    u = s - a * a;
                  if (!u) return !r && t;
                  var c = o * s / u,
                    h = -o * a / u,
                    l = jn(i, n),
                    p = Xn(i, c);
                  Gn(p, Xn(n, h));
                  var f = l,
                    d = qn(p, f),
                    g = qn(f, f),
                    _ = d * d - g * (qn(p, p) - 1);
                  if (!(_ < 0)) {
                    var y = Df(_),
                      m = Xn(f, (-d - y) / g);
                    if (Gn(m, p), m = Vn(m), !r) return m;
                    var v, x = t[0],
                      w = e[0],
                      b = t[1],
                      E = e[1];
                    w < x && (v = x, x = w, w = v);
                    var L = w - x,
                      S = Lf(L - mf) < yf;
                    if (!S && E < b && (v = b, b = E, E = v), S || L < yf ? S ? b + E > 0 ^ m[1] < (Lf(m[0] - x) < yf ? b : E) : b <= m[1] && m[1] <= E : L > mf ^ (x <= m[0] && m[0] <= w)) {
                      var C = Xn(f, (-d + y) / g);
                      return Gn(C, p), [m, Vn(C)]
                    }
                  }
                }
  
                function n(e, r) {
                  var i = s ? t : mf - t,
                    n = 0;
                  return e < -i ? n |= 1 : e > i && (n |= 2), r < -i ? n |= 4 : r > i && (n |= 8), n
                }
                var o = If(t),
                  s = o > 0,
                  a = Lf(o) > yf;
                return $f(r, function (t) {
                  var e, o, u, c, h;
                  return {
                    lineStart: function () {
                      c = u = !1, h = 1;
                    },
                    point: function (l, p) {
                      var f, d = [l, p],
                        g = r(l, p),
                        _ = s ? g ? 0 : n(l, p) : g ? n(l + (l < 0 ? mf : -mf), p) : 0;
                      if (!e && (c = u = g) && t.lineStart(), g !== u && (!(f = i(e, d)) || Vf(e, f) || Vf(d, f)) && (d[0] += yf, d[1] += yf, g = r(d[0], d[1])), g !== u) h = 0, g ? (t.lineStart(), f = i(d, e), t.point(f[0], f[1])) : (f = i(e, d), t.point(f[0], f[1]), t.lineEnd()), e = f;
                      else if (a && e && s ^ g) {
                        var y;
                        _ & o || !(y = i(d, e, !0)) || (h = 0, s ? (t.lineStart(), t.point(y[0][0], y[0][1]), t.point(y[1][0], y[1][1]), t.lineEnd()) : (t.point(y[1][0], y[1][1]), t.lineEnd(), t.lineStart(), t.point(y[0][0], y[0][1])));
                      }!g || e && Vf(e, d) || t.point(d[0], d[1]), e = d, u = g, o = _;
                    },
                    lineEnd: function () {
                      u && t.lineEnd(), e = null;
                    },
                    clean: function () {
                      return h | (c && u) << 1
                    }
                  }
                }, function (r, i, n, o) {
                  ! function (t, e, r, i, n, o) {
                    if (r) {
                      var s = If(e),
                        a = Pf(e),
                        u = i * r;
                      null == n ? (n = e + i * wf, o = e - u / 2) : (n = Qn(s, n), o = Qn(s, o), (i > 0 ? n < o : n > o) && (n += i * wf));
                      for (var c, h = n; i > 0 ? h > o : h < o; h -= u) c = Vn([s, -a * If(h), -a * Pf(h)]), t.point(c[0], c[1]);
                    }
                  }(o, t, e, n, r, i);
                }, s ? [0, -t] : [-mf, t - mf])
              };
            oo.prototype = {
              constructor: oo,
              point: function (t, e) {
                this.stream.point(t, e);
              },
              sphere: function () {
                this.stream.sphere();
              },
              lineStart: function () {
                this.stream.lineStart();
              },
              lineEnd: function () {
                this.stream.lineEnd();
              },
              polygonStart: function () {
                this.stream.polygonStart();
              },
              polygonEnd: function () {
                this.stream.polygonEnd();
              }
            };
            var rd = 16,
              id = If(30 * Ef),
              nd = function (t, e) {
                return +e ? function (t, e) {
                  function r(i, n, o, s, a, u, c, h, l, p, f, d, g, _) {
                    var y = c - i,
                      m = h - n,
                      v = y * y + m * m;
                    if (v > 4 * e && g--) {
                      var x = s + p,
                        w = a + f,
                        b = u + d,
                        E = Df(x * x + w * w + b * b),
                        L = An(b /= E),
                        S = Lf(Lf(b) - 1) < yf || Lf(o - l) < yf ? (o + l) / 2 : Cf(w, x),
                        C = t(S, L),
                        I = C[0],
                        M = C[1],
                        T = I - i,
                        P = M - n,
                        D = m * T - y * P;
                      (D * D / v > e || Lf((y * T + m * P) / v - .5) > .3 || s * p + a * f + u * d < id) && (r(i, n, o, s, a, u, I, M, S, x /= E, w /= E, b, g, _), _.point(I, M), r(I, M, S, x, w, b, c, h, l, p, f, d, g, _));
                    }
                  }
                  return function (e) {
                    function i(r, i) {
                      r = t(r, i), e.point(r[0], r[1]);
                    }
  
                    function n() {
                      y = NaN, b.point = o, e.lineStart();
                    }
  
                    function o(i, n) {
                      var o = Un([i, n]),
                        s = t(i, n);
                      r(y, m, _, v, x, w, y = s[0], m = s[1], _ = i, v = o[0], x = o[1], w = o[2], rd, e), e.point(y, m);
                    }
  
                    function s() {
                      b.point = i, e.lineEnd();
                    }
  
                    function a() {
                      n(), b.point = u, b.lineEnd = c;
                    }
  
                    function u(t, e) {
                      o(h = t, e), l = y, p = m, f = v, d = x, g = w, b.point = o;
                    }
  
                    function c() {
                      r(y, m, _, v, x, w, l, p, h, f, d, g, rd, e), b.lineEnd = s, s();
                    }
                    var h, l, p, f, d, g, _, y, m, v, x, w, b = {
                      point: i,
                      lineStart: n,
                      lineEnd: s,
                      polygonStart: function () {
                        e.polygonStart(), b.lineStart = a;
                      },
                      polygonEnd: function () {
                        e.polygonEnd(), b.lineStart = n;
                      }
                    };
                    return b
                  }
                }(t, e) : function (t) {
                  return no({
                    point: function (e, r) {
                      e = t(e, r), this.stream.point(e[0], e[1]);
                    }
                  })
                }(t)
              },
              od = no({
                point: function (t, e) {
                  this.stream.point(t * Ef, e * Ef);
                }
              });
            ao.invert = function (t, e) {
              return [t, 2 * Sf(Mf(e)) - vf]
            }, uo.invert = function (t, e) {
              return [-e, 2 * Sf(Mf(t)) - vf]
            };
            var sd = function () {
              var t = function (t) {
                  function e() {
                    var e = mf * a(),
                      s = o(kf(o.rotate()).invert([0, 0]));
                    return c(null == h ? [
                      [s[0] - e, s[1] - e],
                      [s[0] + e, s[1] + e]
                    ] : t === ao ? [
                      [Math.max(s[0] - e, h), r],
                      [Math.min(s[0] + e, i), n]
                    ] : [
                      [h, Math.max(s[1] - e, r)],
                      [i, Math.min(s[1] + e, n)]
                    ])
                  }
                  var r, i, n, o = function (t) {
                      return function (t) {
                        function e(t) {
                          return [(t = c(t[0] * Ef, t[1] * Ef))[0] * g + s, a - t[1] * g]
                        }
  
                        function r(t, e) {
                          return [(t = o(t, e))[0] * g + s, a - t[1] * g]
                        }
  
                        function i() {
                          c = Ff(u = Wn(x, w, b), o);
                          var t = o(m, v);
                          return s = _ - t[0] * g, a = y + t[1] * g, n()
                        }
  
                        function n() {
                          return f = d = null, e
                        }
                        var o, s, a, u, c, h, l, p, f, d, g = 150,
                          _ = 480,
                          y = 250,
                          m = 0,
                          v = 0,
                          x = 0,
                          w = 0,
                          b = 0,
                          E = null,
                          L = td,
                          S = null,
                          C = Yf,
                          I = .5,
                          M = nd(r, I);
                        return e.stream = function (t) {
                            return f && d === t ? f : f = od(L(u, M(C(d = t))))
                          }, e.clipAngle = function (t) {
                            return arguments.length ? (L = +t ? ed(E = t * Ef, 6 * Ef) : (E = null, td), n()) : E * bf
                          }, e.clipExtent = function (t) {
                            return arguments.length ? (C = null == t ? (S = h = l = p = null, Yf) : eo(S = +t[0][0], h = +t[0][1], l = +t[1][0], p = +t[1][1]), n()) : null == S ? null : [
                              [S, h],
                              [l, p]
                            ]
                          }, e.scale = function (t) {
                            return arguments.length ? (g = +t, i()) : g
                          }, e.translate = function (t) {
                            return arguments.length ? (_ = +t[0], y = +t[1], i()) : [_, y]
                          }, e.center = function (t) {
                            return arguments.length ? (m = t[0] % 360 * Ef, v = t[1] % 360 * Ef, i()) : [m * bf, v * bf]
                          }, e.rotate = function (t) {
                            return arguments.length ? (x = t[0] % 360 * Ef, w = t[1] % 360 * Ef, b = t.length > 2 ? t[2] % 360 * Ef : 0, i()) : [x * bf, w * bf, b * bf]
                          }, e.precision = function (t) {
                            return arguments.length ? (M = nd(r, I = t * t), n()) : Df(I)
                          }, e.fitExtent = function (t, r) {
                            return so(e, t, r)
                          }, e.fitSize = function (t, r) {
                            return function (t, e, r) {
                              return so(t, [
                                [0, 0], e
                              ], r)
                            }(e, t, r)
                          },
                          function () {
                            return o = t.apply(this, arguments), e.invert = o.invert && function (t) {
                              return (t = c.invert((t[0] - s) / g, (a - t[1]) / g)) && [t[0] * bf, t[1] * bf]
                            }, i()
                          }
                      }(function () {
                        return t
                      })()
                    }(t),
                    s = o.center,
                    a = o.scale,
                    u = o.translate,
                    c = o.clipExtent,
                    h = null;
                  return o.scale = function (t) {
                    return arguments.length ? (a(t), e()) : a()
                  }, o.translate = function (t) {
                    return arguments.length ? (u(t), e()) : u()
                  }, o.center = function (t) {
                    return arguments.length ? (s(t), e()) : s()
                  }, o.clipExtent = function (t) {
                    return arguments.length ? (null == t ? h = r = i = n = null : (h = +t[0][0], r = +t[0][1], i = +t[1][0], n = +t[1][1]), e()) : null == h ? null : [
                      [h, r],
                      [i, n]
                    ]
                  }, e()
                }(uo),
                e = t.center,
                r = t.rotate;
              return t.center = function (t) {
                return arguments.length ? e([-t[1], t[0]]) : [(t = e())[1], -t[0]]
              }, t.rotate = function (t) {
                return arguments.length ? r([t[0], t[1], t.length > 2 ? t[2] + 90 : 90]) : [(t = r())[0], t[1], t[2] - 90]
              }, r([0, 0, 90]).scale(159.155)
            };
            t.projection = hs, t.random = Ya, t.clusters = Wa, t.helpers = Co, t.invariant = Mo, t.meta = Io, t.isolines = function (t, e, r) {
              if (!L(r = r || {})) throw new Error("options is invalid");
              var i = r.zProperty || "elevation",
                n = r.commonProperties || {},
                o = r.breaksProperties || [];
              if (W(t, "Point", "Input must contain Points"), !e) throw new Error("breaks is required");
              if (!Array.isArray(e)) throw new Error("breaks must be an Array");
              if (!L(n)) throw new Error("commonProperties must be an Object");
              if (!Array.isArray(o)) throw new Error("breaksProperties must be an Array");
              var s = function (t, e) {
                if (!L(e = e || {})) throw new Error("options is invalid");
                var r = e.zProperty || "elevation",
                  i = e.flip,
                  n = e.flags;
                W(t, "Point", "input must contain Points");
                for (var o = function (t, e) {
                    var r = {};
                    return D(t, function (t) {
                      var e = G(t)[1];
                      r[e] || (r[e] = []), r[e].push(t);
                    }), Object.keys(r).map(function (t) {
                      return r[t].sort(function (t, e) {
                        return G(t)[0] - G(e)[0]
                      })
                    }).sort(function (t, r) {
                      return e ? G(t[0])[1] - G(r[0])[1] : G(r[0])[1] - G(t[0])[1]
                    })
                  }(t, i), s = [], a = 0; a < o.length; a++) {
                  for (var u = o[a], c = [], h = 0; h < u.length; h++) {
                    var l = u[h];
                    l.properties[r] ? c.push(l.properties[r]) : c.push(0), !0 === n && (l.properties.matrixPosition = [a, h]);
                  }
                  s.push(c);
                }
                return s
              }(t, {
                zProperty: i,
                flip: !0
              });
              return c(function (t, e, r) {
                var i = q(r),
                  n = i[2] - i[0],
                  o = i[3] - i[1],
                  s = i[0],
                  a = i[1],
                  u = e[0].length - 1,
                  c = e.length - 1,
                  h = n / u,
                  l = o / c,
                  p = function (t) {
                    t[0] = t[0] * h + s, t[1] = t[1] * l + a;
                  };
                return t.forEach(function (t) {
                  I(t, p);
                }), t
              }(function (t, e, r, i, n) {
                for (var o = [], s = 1; s < e.length; s++) {
                  var a = +e[s],
                    u = Object.assign({}, i, n[s]);
                  u[r] = a;
                  var c = h(Q(t, a), u);
                  o.push(c);
                }
                return o
              }(s, e, i, n, o), s, t))
            }, t.convex = It, t.pointsWithinPolygon = Pt, t.concave = function (t, r) {
              if (!L(r = r || {})) throw new Error("options is invalid");
              if (!t) throw new Error("points is required");
              var i = r.maxEdge || 1 / 0;
              if (!E(i)) throw new Error("maxEdge is invalid");
              var n = Dt(function (t) {
                var e = [],
                  r = {};
                return D(t, function (t) {
                  if (t.geometry) {
                    var i = t.geometry.coordinates.join("-");
                    r.hasOwnProperty(i) || (e.push(t), r[i] = !0);
                  }
                }), c(e)
              }(t));
              if (n.features = n.features.filter(function (t) {
                  var e = t.geometry.coordinates[0][0],
                    n = t.geometry.coordinates[0][1],
                    o = t.geometry.coordinates[0][2],
                    s = At(e, n, r),
                    a = At(n, o, r),
                    u = At(e, o, r);
                  return s <= i && a <= i && u <= i
                }), n.features.length < 1) return null;
              var o = Wt(n, r);
              return 1 === o.coordinates.length && (o.coordinates = o.coordinates[0], o.type = "Polygon"), e(o)
            }, t.collect = function (t, e, r, i) {
              var n = No(6),
                o = e.features.map(function (t) {
                  return {
                    minX: t.geometry.coordinates[0],
                    minY: t.geometry.coordinates[1],
                    maxX: t.geometry.coordinates[0],
                    maxY: t.geometry.coordinates[1],
                    property: t.properties[r]
                  }
                });
              return n.load(o), t.features.forEach(function (t) {
                t.properties || (t.properties = {});
                var e = q(t),
                  r = [];
                n.search({
                  minX: e[0],
                  minY: e[1],
                  maxX: e[2],
                  maxY: e[3]
                }).forEach(function (e) {
                  Mt([e.minX, e.minY], t) && r.push(e.property);
                }), t.properties[i] = r;
              }), t
            }, t.flip = function (t, e) {
              if (!L(e = e || {})) throw new Error("options is invalid");
              var r = e.mutate;
              if (!t) throw new Error("geojson is required");
              return !1 !== r && void 0 !== r || (t = Ft(t)), I(t, function (t) {
                var e = t[0],
                  r = t[1];
                t[0] = r, t[1] = e;
              }), t
            }, t.simplify = function (t, e) {
              if (!L(e = e || {})) throw new Error("options is invalid");
              var r = void 0 !== e.tolerance ? e.tolerance : 1,
                i = e.highQuality || !1,
                n = e.mutate || !1;
              if (!t) throw new Error("geojson is required");
              if (r && r < 0) throw new Error("invalid tolerance");
              return !0 !== n && (t = Ft(t)), O(t, function (t) {
                ! function (t, e, r) {
                  var i = t.type;
                  if ("Point" === i || "MultiPoint" === i) return t;
                  Ht(t, !0);
                  var n = t.coordinates;
                  switch (i) {
                    case "LineString":
                      t.coordinates = te(n, e, r);
                      break;
                    case "MultiLineString":
                      t.coordinates = n.map(function (t) {
                        return te(t, e, r)
                      });
                      break;
                    case "Polygon":
                      t.coordinates = ee(n, e, r);
                      break;
                    case "MultiPolygon":
                      t.coordinates = n.map(function (t) {
                        return ee(t, e, r)
                      });
                  }
                }(t, r, i);
              }), t
            }, t.bezierSpline = re, t.tag = function (t, e, r, i) {
              return t = Ft(t), e = Ft(e), D(t, function (t) {
                t.properties || (t.properties = {}), D(e, function (e) {
                  void 0 === t.properties[i] && Mt(t, e) && (t.properties[i] = e.properties[r]);
                });
              }), t
            }, t.sample = function (t, e) {
              if (!t) throw new Error("featurecollection is required");
              if (null == e) throw new Error("num is required");
              if ("number" != typeof e) throw new Error("num must be a number");
              return c(function (t, e) {
                for (var r, i, n = t.slice(0), o = t.length, s = o - e; o-- > s;) r = n[i = Math.floor((o + 1) * Math.random())], n[i] = n[o], n[o] = r;
                return n.slice(s)
              }(t.features, e))
            }, t.envelope = ne, t.square = oe, t.circle = ae, t.midpoint = function (t, e) {
              return se(t, At(t, e) / 2, ue(t, e))
            }, t.center = ce, t.centerOfMass = function t(e, r) {
              switch (J(e)) {
                case "Point":
                  return e;
                case "Polygon":
                  var n = [];
                  I(e, function (t) {
                    n.push(t);
                  });
                  var o, s, a, u, c, h, l, p, f = he(e, r),
                    d = f.geometry.coordinates,
                    g = 0,
                    _ = 0,
                    y = 0,
                    m = n.map(function (t) {
                      return [t[0] - d[0], t[1] - d[1]]
                    });
                  for (o = 0; o < n.length - 1; o++) u = (s = m[o])[0], h = s[1], c = (a = m[o + 1])[0], y += p = u * (l = a[1]) - c * h, g += (u + c) * p, _ += (h + l) * p;
                  if (0 === y) return f;
                  var v = 1 / (.5 * y * 6);
                  return i([d[0] + v * g, d[1] + v * _], r);
                default:
                  var x = It(e);
                  return x ? t(x, r) : he(e, r)
              }
            }, t.centroid = he, t.combine = function (t) {
              function r(t, e, r) {
                r ? i[e].coordinates = i[e].coordinates.concat(t.geometry.coordinates) : i[e].coordinates.push(t.geometry.coordinates), i[e].properties.push(t.properties);
              }
              var i = {
                  MultiPoint: {
                    coordinates: [],
                    properties: []
                  },
                  MultiLineString: {
                    coordinates: [],
                    properties: []
                  },
                  MultiPolygon: {
                    coordinates: [],
                    properties: []
                  }
                },
                n = Object.keys(i).reduce(function (t, e) {
                  return t[e.replace("Multi", "")] = e, t
                }, {});
              return D(t, function (t) {
                t.geometry && (i[t.geometry.type] ? r(t, t.geometry.type, !0) : n[t.geometry.type] && r(t, n[t.geometry.type], !1));
              }), c(Object.keys(i).filter(function (t) {
                return i[t].coordinates.length
              }).sort().map(function (t) {
                return e({
                  type: t,
                  coordinates: i[t].coordinates
                }, {
                  collectedProperties: i[t].properties
                })
              }))
            }, t.distance = At, t.explode = le, t.bbox = q, t.tesselate = function (t) {
              if (!t.geometry || "Polygon" !== t.geometry.type && "MultiPolygon" !== t.geometry.type) throw new Error("input must be a Polygon or MultiPolygon");
              var e = {
                type: "FeatureCollection",
                features: []
              };
              return "Polygon" === t.geometry.type ? e.features = Ie(t.geometry.coordinates) : t.geometry.coordinates.forEach(function (t) {
                e.features = e.features.concat(Ie(t));
              }), e
            }, t.bboxPolygon = ie, t.booleanPointInPolygon = Mt, t.nearestPoint = Me, t.nearestPointOnLine = He, t.nearestPointToLine = function (t, e, r) {
              if (!L(r = r || {})) throw new Error("options is invalid");
              var i = r.units,
                n = r.properties || {};
              if (!t) throw new Error("points is required");
              if (!(t = function (t) {
                  var e = [];
                  switch (t.geometry ? t.geometry.type : t.type) {
                    case "GeometryCollection":
                      return O(t, function (t) {
                        "Point" === t.type && e.push({
                          type: "Feature",
                          properties: {},
                          geometry: t
                        });
                      }), {
                        type: "FeatureCollection",
                        features: e
                      };
                    case "FeatureCollection":
                      return t.features = t.features.filter(function (t) {
                        return "Point" === t.geometry.type
                      }), t;
                    default:
                      throw new Error("points must be a Point Collection")
                  }
                }(t)).features.length) throw new Error("points must contain features");
              if (!e) throw new Error("line is required");
              if ("LineString" !== J(e)) throw new Error("line must be a LineString");
              var o = 1 / 0,
                s = null;
              return D(t, function (t) {
                var r = nr(t, e, {
                  units: i
                });
                r < o && (o = r, s = t);
              }), s && (s.properties = Object.assign({
                dist: o
              }, s.properties, n)), s
            }, t.planepoint = function (t, e) {
              var r = j(t),
                i = H(e).coordinates[0];
              if (i.length < 4) throw new Error("OuterRing of a Polygon must have 4 or more Positions.");
              var n = e.properties || {},
                o = n.a,
                s = n.b,
                a = n.c,
                u = r[0],
                c = r[1],
                h = i[0][0],
                l = i[0][1],
                p = void 0 !== o ? o : i[0][2],
                f = i[1][0],
                d = i[1][1],
                g = void 0 !== s ? s : i[1][2],
                _ = i[2][0],
                y = i[2][1],
                m = void 0 !== a ? a : i[2][2];
              return (m * (u - h) * (c - d) + p * (u - f) * (c - y) + g * (u - _) * (c - l) - g * (u - h) * (c - y) - m * (u - f) * (c - l) - p * (u - _) * (c - d)) / ((u - h) * (c - d) + (u - f) * (c - y) + (u - _) * (c - l) - (u - h) * (c - y) - (u - f) * (c - l) - (u - _) * (c - d))
            }, t.tin = Dt, t.bearing = ue, t.destination = se, t.kinks = function (t) {
              var e, r, n = {
                type: "FeatureCollection",
                features: []
              };
              if ("LineString" === (r = "Feature" === t.type ? t.geometry : t).type) e = [r.coordinates];
              else if ("MultiLineString" === r.type) e = r.coordinates;
              else if ("MultiPolygon" === r.type) e = [].concat.apply([], r.coordinates);
              else {
                if ("Polygon" !== r.type) throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");
                e = r.coordinates;
              }
              return e.forEach(function (t) {
                e.forEach(function (e) {
                  for (var r = 0; r < t.length - 1; r++)
                    for (var o = r; o < e.length - 1; o++) {
                      if (t === e) {
                        if (1 === Math.abs(r - o)) continue;
                        if (0 === r && o === t.length - 2 && t[r][0] === t[t.length - 1][0] && t[r][1] === t[t.length - 1][1]) continue
                      }
                      var s = function (t, e, r, i, n, o, s, a) {
                        var u, c, h, l, p = {
                          x: null,
                          y: null,
                          onLine1: !1,
                          onLine2: !1
                        };
                        return 0 == (u = (a - o) * (r - t) - (s - n) * (i - e)) ? null !== p.x && null !== p.y && p : (l = (r - t) * (c = e - o) - (i - e) * (h = t - n), c = ((s - n) * c - (a - o) * h) / u, h = l / u, p.x = t + c * (r - t), p.y = e + c * (i - e), c >= 0 && c <= 1 && (p.onLine1 = !0), h >= 0 && h <= 1 && (p.onLine2 = !0), !(!p.onLine1 || !p.onLine2) && [p.x, p.y])
                      }(t[r][0], t[r][1], t[r + 1][0], t[r + 1][1], e[o][0], e[o][1], e[o + 1][0], e[o + 1][1]);
                      s && n.features.push(i([s[0], s[1]]));
                    }
                });
              }), n
            }, t.pointOnFeature = sr, t.area = ur, t.along = function (t, e, r) {
              if (!L(r = r || {})) throw new Error("options is invalid");
              var n;
              if ("Feature" === t.type) n = t.geometry.coordinates;
              else {
                if ("LineString" !== t.type) throw new Error("input must be a LineString Feature or Geometry");
                n = t.coordinates;
              }
              if (!E(e)) throw new Error("distance must be a number");
              for (var o = 0, s = 0; s < n.length && !(e >= o && s === n.length - 1); s++) {
                if (o >= e) {
                  var a = e - o;
                  if (a) {
                    var u = ue(n[s], n[s - 1]) - 180;
                    return se(n[s], a, u, r)
                  }
                  return i(n[s])
                }
                o += At(n[s], n[s + 1], r);
              }
              return i(n[n.length - 1])
            }, t.length = pr, t.lineSlice = function (t, e, r) {
              var i = G(r);
              if ("LineString" !== J(r)) throw new Error("line must be a LineString");
              for (var n, o = He(r, t), s = He(r, e), u = [(n = o.properties.index <= s.properties.index ? [o, s] : [s, o])[0].geometry.coordinates], c = n[0].properties.index + 1; c < n[1].properties.index + 1; c++) u.push(i[c]);
              return u.push(n[1].geometry.coordinates), a(u, r.properties)
            }, t.lineSliceAlong = fr, t.pointGrid = mr, t.truncate = vr, t.flatten = function (t) {
              if (!t) throw new Error("geojson is required");
              var e = [];
              return F(t, function (t) {
                e.push(t);
              }), c(e)
            }, t.lineIntersect = Ye, t.lineChunk = function (t, e, r) {
              if (!L(r = r || {})) throw new Error("options is invalid");
              var i = r.units,
                n = r.reverse;
              if (!t) throw new Error("geojson is required");
              if (e <= 0) throw new Error("segmentLength must be greater than 0");
              var o = [];
              return F(t, function (t) {
                n && (t.geometry.coordinates = t.geometry.coordinates.reverse()),
                  function (t, e, r, i) {
                    var n = pr(t, {
                      units: r
                    });
                    if (n <= e) return i(t);
                    var o = n / e;
                    Number.isInteger(o) || (o = Math.floor(o) + 1);
                    for (var s = 0; s < o; s++) i(fr(t, e * s, e * (s + 1), {
                      units: r
                    }));
                  }(t, e, i, function (t) {
                    o.push(t);
                  });
              }), c(o)
            }, t.unkinkPolygon = function (t) {
              var e = [];
              return F(t, function (t) {
                "Polygon" === t.geometry.type && D(ps(t), function (r) {
                  e.push(o(r.geometry.coordinates, t.properties));
                });
              }), c(e)
            }, t.greatCircle = function (t, e, r) {
              if ("object" != typeof (r = r || {})) throw new Error("options is invalid");
              var i = r.properties,
                n = r.npoints,
                o = r.offset;
              return t = j(t), e = j(e), i = i || {}, n = n || 100, o = o || 10, new xs({
                x: t[0],
                y: t[1]
              }, {
                x: e[0],
                y: e[1]
              }, i).Arc(n, {
                offset: o
              }).json()
            }, t.lineSegment = Ze, t.lineSplit = function (t, e) {
              if (!t) throw new Error("line is required");
              if (!e) throw new Error("splitter is required");
              var r = J(t),
                i = J(e);
              if ("LineString" !== r) throw new Error("line must be LineString");
              if ("FeatureCollection" === i) throw new Error("splitter cannot be a FeatureCollection");
              if ("GeometryCollection" === i) throw new Error("splitter cannot be a GeometryCollection");
              var n = vr(e, {
                precision: 7
              });
              switch (i) {
                case "Point":
                  return Lr(t, n);
                case "MultiPoint":
                  return Er(t, n);
                case "LineString":
                case "MultiLineString":
                case "Polygon":
                case "MultiPolygon":
                  return Er(t, Ye(t, n))
              }
            }, t.lineArc = Ir, t.polygonToLine = Tr, t.lineToPolygon = Dr, t.bboxClip = function (t, e) {
              var r = function (t) {
                  return t.geometry ? t.geometry.type : t.type
                }(t),
                i = G(t),
                n = t.properties;
              switch (r) {
                case "LineString":
                case "MultiLineString":
                  var s = [];
                  return "LineString" === r && (i = [i]), i.forEach(function (t) {
                    ws(t, e, s);
                  }), 1 === s.length ? a(s[0], n) : h(s, n);
                case "Polygon":
                  return o(kr(i, e), n);
                case "MultiPolygon":
                  return p(i.map(function (t) {
                    return kr(t, e)
                  }), n);
                default:
                  throw new Error("geometry " + r + " not supported")
              }
            }, t.lineOverlap = qr, t.sector = function (t, e, r, i, n) {
              if (!L(n = n || {})) throw new Error("options is invalid");
              if (!t) throw new Error("center is required");
              if (null == r) throw new Error("bearing1 is required");
              if (null == i) throw new Error("bearing2 is required");
              if (!e) throw new Error("radius is required");
              if ("object" != typeof n) throw new Error("options must be an object");
              if (Gr(r) === Gr(i)) return ae(t, e, n);
              var s = G(t),
                a = [
                  [s]
                ];
              return I(Ir(t, e, r, i, n), function (t) {
                a[0].push(t);
              }), a[0].push(s), o(a)
            }, t.rhumbBearing = Ke, t.rhumbDistance = Qe, t.rhumbDestination = Xr, t.polygonTangents = function (t, e) {
              var r, n, o, s = G(t),
                a = G(e);
              switch (J(e)) {
                case "Polygon":
                  r = a[0][0], n = a[0][0], o = Yr(a[0][0], a[0][a[0].length - 1], s);
                  var u = Zr(a[0], s, o, void 0, r, n);
                  r = u[0], n = u[1];
                  break;
                case "MultiPolygon":
                  r = a[0][0][0], n = a[0][0][0], o = Yr(a[0][0][0], a[0][0][a[0][0].length - 1], s), a.forEach(function (t) {
                    var e = Zr(t[0], s, o, void 0, r, n);
                    r = e[0], n = e[1];
                  });
              }
              return c([i(r), i(n)])
            }, t.rewind = function (t, e) {
              if (!L(e = e || {})) throw new Error("options is invalid");
              var r = e.reverse || !1,
                i = e.mutate || !1;
              if (!t) throw new Error("<geojson> is required");
              if ("boolean" != typeof r) throw new Error("<reverse> must be a boolean");
              if ("boolean" != typeof i) throw new Error("<mutate> must be a boolean");
              !1 === i && (t = Ft(t));
              var n = [];
              switch (t.type) {
                case "GeometryCollection":
                  return O(t, function (t) {
                    Hr(t, r);
                  }), t;
                case "FeatureCollection":
                  return D(t, function (t) {
                    D(Hr(t, r), function (t) {
                      n.push(t);
                    });
                  }), c(n)
              }
              return Hr(t, r)
            }, t.isobands = function (t, e, r) {
              if (!L(r = r || {})) throw new Error("options is invalid");
              var i = r.zProperty || "elevation",
                n = r.commonProperties || {},
                s = r.breaksProperties || [];
              if (W(t, "Point", "Input must contain Points"), !e) throw new Error("breaks is required");
              if (!Array.isArray(e)) throw new Error("breaks is not an Array");
              if (!L(n)) throw new Error("commonProperties is not an Object");
              if (!Array.isArray(s)) throw new Error("breaksProperties is not an Array");
              var a = function (t, e) {
                  if (!L(e = e || {})) throw new Error("options is invalid");
                  var r = e.zProperty || "elevation",
                    i = e.flip,
                    n = e.flags;
                  W(t, "Point", "input must contain Points");
                  for (var o = function (t, e) {
                      var r = {};
                      return D(t, function (t) {
                        var e = G(t)[1];
                        r[e] || (r[e] = []), r[e].push(t);
                      }), Object.keys(r).map(function (t) {
                        return r[t].sort(function (t, e) {
                          return G(t)[0] - G(e)[0]
                        })
                      }).sort(function (t, r) {
                        return e ? G(t[0])[1] - G(r[0])[1] : G(r[0])[1] - G(t[0])[1]
                      })
                    }(t, i), s = [], a = 0; a < o.length; a++) {
                    for (var u = o[a], c = [], h = 0; h < u.length; h++) {
                      var l = u[h];
                      l.properties[r] ? c.push(l.properties[r]) : c.push(0), !0 === n && (l.properties.matrixPosition = [a, h]);
                    }
                    s.push(c);
                  }
                  return s
                }(t, {
                  zProperty: i,
                  flip: !0
                }),
                u = function (t, e, r) {
                  for (var i = [], n = 1; n < e.length; n++) {
                    var s = +e[n - 1],
                      a = +e[n],
                      u = Qr(t, s, a - s),
                      c = function (t) {
                        var e = [],
                          r = [];
                        u.forEach(function (t) {
                          var i = ur(o([t]));
                          r.push(i), e.push({
                            ring: t,
                            area: i
                          });
                        }), r.sort(function (t, e) {
                          return e - t
                        });
                        var i = [];
                        return r.forEach(function (t) {
                          for (var r = 0; r < e.length; r++)
                            if (e[r].area === t) {
                              i.push(e[r].ring), e.splice(r, 1);
                              break
                            }
                        }), i
                      }(),
                      h = function (t) {
                        for (var e = c.map(function (t) {
                            return {
                              lrCoordinates: t,
                              grouped: !1
                            }
                          }), r = []; ! function (t) {
                            for (var e = 0; e < t.length; e++)
                              if (!1 === t[e].grouped) return !1;
                            return !0
                          }(e);)
                          for (var i = 0; i < e.length; i++)
                            if (!e[i].grouped) {
                              var n = [];
                              n.push(e[i].lrCoordinates), e[i].grouped = !0;
                              for (var s = o([e[i].lrCoordinates]), a = i + 1; a < e.length; a++)
                                if (!e[a].grouped) {
                                  var u = o([e[a].lrCoordinates]);
                                  (function (t, e) {
                                    for (var r = le(u), i = 0; i < r.features.length; i++)
                                      if (!Mt(r.features[i], e)) return !1;
                                    return !0
                                  })(0, s) && (n.push(e[a].lrCoordinates), e[a].grouped = !0);
                                } r.push(n);
                            } return r
                      }(),
                      l = {};
                    l.groupedRings = h, l[r] = s + "-" + a, i.push(l);
                  }
                  return i
                }(a, e, i);
              return c((u = function (t, e, r) {
                var i = q(r),
                  n = i[2] - i[0],
                  o = i[3] - i[1],
                  s = i[0],
                  a = i[1],
                  u = e[0].length - 1,
                  c = e.length - 1,
                  h = n / u,
                  l = o / c,
                  p = function (t) {
                    t[0] = t[0] * h + s, t[1] = t[1] * l + a;
                  };
                return t.forEach(function (t) {
                  t.groupedRings.forEach(function (t) {
                    t.forEach(function (t) {
                      t.forEach(p);
                    });
                  });
                }), t
              }(u, a, t)).map(function (t, e) {
                if (s[e] && !L(s[e])) throw new Error("Each mappedProperty is required to be an Object");
                var r = Object.assign({}, n, s[e]);
                return r[i] = t[i], p(t.groupedRings, r)
              }))
            }, t.transformRotate = ei, t.transformScale = ri, t.transformTranslate = function (t, e, r, i) {
              if (!L(i = i || {})) throw new Error("options is invalid");
              var n = i.units,
                o = i.zTranslation,
                s = i.mutate;
              if (!t) throw new Error("geojson is required");
              if (null == e || isNaN(e)) throw new Error("distance is required");
              if (o && "number" != typeof o && isNaN(o)) throw new Error("zTranslation is not a number");
              if (o = void 0 !== o ? o : 0, 0 === e && 0 === o) return t;
              if (null == r || isNaN(r)) throw new Error("direction is required");
              return e < 0 && (e = -e, r = -r), !1 !== s && void 0 !== s || (t = Ft(t)), I(t, function (t) {
                var i = G(Xr(t, e, r, {
                  units: n
                }));
                t[0] = i[0], t[1] = i[1], o && 3 === t.length && (t[2] += o);
              }), t
            }, t.lineOffset = function (t, e, r) {
              if (!L(r = r || {})) throw new Error("options is invalid");
              var i = r.units;
              if (!t) throw new Error("geojson is required");
              if (null == e || isNaN(e)) throw new Error("distance is required");
              var n = J(t),
                o = t.properties;
              switch (n) {
                case "LineString":
                  return si(t, e, i);
                case "MultiLineString":
                  var s = [];
                  return F(t, function (t) {
                    s.push(si(t, e, i).geometry.coordinates);
                  }), h(s, o);
                default:
                  throw new Error("geometry " + n + " is not supported")
              }
            }, t.polygonize = function (t) {
              var e = xa.fromGeoJson(t);
              e.deleteDangles(), e.deleteCutEdges();
              var r = [],
                i = [];
              return e.getEdgeRings().filter(function (t) {
                return t.isValid()
              }).forEach(function (t) {
                t.isHole() ? r.push(t) : i.push(t);
              }), r.forEach(function (t) {
                ma.findEdgeRingContaining(t, i) && i.push(t);
              }), c(i.map(function (t) {
                return t.toPolygon()
              }))
            }, t.booleanDisjoint = function (t, e) {
              var r;
              return F(t, function (t) {
                F(e, function (e) {
                  if (!1 === r) return !1;
                  r = function (t, e) {
                    switch (t.type) {
                      case "Point":
                        switch (e.type) {
                          case "Point":
                            return ! function (t, e) {
                              return t[0] === e[0] && t[1] === e[1]
                            }(t.coordinates, e.coordinates);
                          case "LineString":
                            return !ci(e, t);
                          case "Polygon":
                            return !Mt(t, e)
                        }
                        break;
                      case "LineString":
                        switch (e.type) {
                          case "Point":
                            return !ci(t, e);
                          case "LineString":
                            return ! function (t, e) {
                              return Ye(t, e).features.length > 0
                            }(t, e);
                          case "Polygon":
                            return !hi(e, t)
                        }
                        break;
                      case "Polygon":
                        switch (e.type) {
                          case "Point":
                            return !Mt(e, t);
                          case "LineString":
                            return !hi(t, e);
                          case "Polygon":
                            return ! function (t, e) {
                              for (var r = 0; r < t.coordinates[0].length; r++)
                                if (Mt(t.coordinates[0][r], e)) return !0;
                              for (var i = 0; i < e.coordinates[0].length; i++)
                                if (Mt(e.coordinates[0][i], t)) return !0;
                              return !1
                            }(e, t)
                        }
                    }
                  }(t.geometry, e.geometry);
                });
              }), r
            }, t.booleanContains = function (t, e) {
              var r = J(t),
                i = J(e),
                n = H(t),
                o = H(e),
                s = G(t),
                a = G(e);
              switch (r) {
                case "Point":
                  switch (i) {
                    case "Point":
                      return pi(s, a);
                    default:
                      throw new Error("feature2 " + i + " geometry not supported")
                  }
                  case "MultiPoint":
                    switch (i) {
                      case "Point":
                        return function (t, e) {
                          var r, i = !1;
                          for (r = 0; r < t.coordinates.length; r++)
                            if (pi(t.coordinates[r], e.coordinates)) {
                              i = !0;
                              break
                            } return i
                        }(n, o);
                      case "MultiPoint":
                        return function (t, e) {
                          for (var r = 0; r < e.coordinates.length; r++) {
                            for (var i = !1, n = 0; n < t.coordinates.length; n++)
                              if (pi(e.coordinates[r], t.coordinates[n])) {
                                i = !0;
                                break
                              } if (!i) return !1
                          }
                          return !0
                        }(n, o);
                      default:
                        throw new Error("feature2 " + i + " geometry not supported")
                    }
                    case "LineString":
                      switch (i) {
                        case "Point":
                          return dr(o, n, {
                            ignoreEndVertices: !0
                          });
                        case "LineString":
                          return function (t, e) {
                            for (var r = !1, i = 0; i < e.coordinates.length; i++)
                              if (dr({
                                  type: "Point",
                                  coordinates: e.coordinates[i]
                                }, t, {
                                  ignoreEndVertices: !0
                                }) && (r = !0), !dr({
                                  type: "Point",
                                  coordinates: e.coordinates[i]
                                }, t, {
                                  ignoreEndVertices: !1
                                })) return !1;
                            return r
                          }(n, o);
                        case "MultiPoint":
                          return function (t, e) {
                            for (var r = !1, i = 0; i < e.coordinates.length; i++)
                              if (dr(e.coordinates[i], t, {
                                  ignoreEndVertices: !0
                                }) && (r = !0), !dr(e.coordinates[i], t)) return !1;
                            return !!r
                          }(n, o);
                        default:
                          throw new Error("feature2 " + i + " geometry not supported")
                      }
                      case "Polygon":
                        switch (i) {
                          case "Point":
                            return Mt(o, n, {
                              ignoreBoundary: !0
                            });
                          case "LineString":
                            return function (t, e) {
                              var r = !1,
                                i = 0;
                              if (!li(q(t), q(e))) return !1;
                              for (; i < e.coordinates.length - 1; i++)
                                if (Mt({
                                    type: "Point",
                                    coordinates: function (t, e) {
                                      return [(t[0] + e[0]) / 2, (t[1] + e[1]) / 2]
                                    }(e.coordinates[i], e.coordinates[i + 1])
                                  }, t, {
                                    ignoreBoundary: !0
                                  })) {
                                  r = !0;
                                  break
                                } return r
                            }(n, o);
                          case "Polygon":
                            return function (t, e) {
                              if (!li(q(t), q(e))) return !1;
                              for (var r = 0; r < e.coordinates[0].length; r++)
                                if (!Mt(e.coordinates[0][r], t)) return !1;
                              return !0
                            }(n, o);
                          case "MultiPoint":
                            return function (t, e) {
                              for (var r = 0; r < e.coordinates.length; r++)
                                if (!Mt(e.coordinates[r], t, {
                                    ignoreBoundary: !0
                                  })) return !1;
                              return !0
                            }(n, o);
                          default:
                            throw new Error("feature2 " + i + " geometry not supported")
                        }
                        default:
                          throw new Error("feature1 " + r + " geometry not supported")
              }
            }, t.booleanCrosses = function (t, e) {
              var r = J(t),
                i = J(e),
                n = H(t),
                o = H(e);
              switch (r) {
                case "MultiPoint":
                  switch (i) {
                    case "LineString":
                      return fi(n, o);
                    case "Polygon":
                      return gi(n, o);
                    default:
                      throw new Error("feature2 " + i + " geometry not supported")
                  }
                  case "LineString":
                    switch (i) {
                      case "MultiPoint":
                        return fi(o, n);
                      case "LineString":
                        return function (t, e) {
                          if (Ye(t, e).features.length > 0)
                            for (var r = 0; r < t.coordinates.length - 1; r++)
                              for (var i = 0; i < e.coordinates.length - 1; i++) {
                                var n = !0;
                                if (0 !== i && i !== e.coordinates.length - 2 || (n = !1), _i(t.coordinates[r], t.coordinates[r + 1], e.coordinates[i], n)) return !0
                              }
                          return !1
                        }(n, o);
                      case "Polygon":
                        return di(n, o);
                      default:
                        throw new Error("feature2 " + i + " geometry not supported")
                    }
                    case "Polygon":
                      switch (i) {
                        case "MultiPoint":
                          return gi(o, n);
                        case "LineString":
                          return di(o, n);
                        default:
                          throw new Error("feature2 " + i + " geometry not supported")
                      }
                      default:
                        throw new Error("feature1 " + r + " geometry not supported")
              }
            }, t.booleanClockwise = Wr, t.booleanOverlap = xi, t.booleanPointOnLine = dr, t.booleanEqual = function (t, e) {
              if (!t) throw new Error("feature1 is required");
              if (!e) throw new Error("feature2 is required");
              return J(t) === J(e) && new Sa({
                precision: 6
              }).compare(Ht(t), Ht(e))
            }, t.booleanWithin = gr, t.clone = Ft, t.cleanCoords = Ht, t.clustersDbscan = function (t, e, r) {
              if ("object" != typeof (r = r || {})) throw new Error("options is invalid");
              var i = r.minPoints,
                n = r.units;
              if (W(t, "Point", "Input must contain Points"), null == e) throw new Error("maxDistance is required");
              if (!(Math.sign(e) > 0)) throw new Error("Invalid maxDistance");
              if (!(null == i || Math.sign(i) > 0)) throw new Error("Invalid minPoints");
              t = Ft(t), i = i || 3;
              var o = new Pa.DBSCAN,
                s = -1;
              return o.run(R(t), w(e, n), i, At).forEach(function (e) {
                s++, e.forEach(function (e) {
                  var r = t.features[e];
                  r.properties || (r.properties = {}), r.properties.cluster = s, r.properties.dbscan = "core";
                });
              }), o.noise.forEach(function (e) {
                var r = t.features[e];
                r.properties || (r.properties = {}), r.properties.cluster ? r.properties.dbscan = "edge" : r.properties.dbscan = "noise";
              }), t
            }, t.clustersKmeans = function (t, e) {
              if ("object" != typeof (e = e || {})) throw new Error("options is invalid");
              var r = e.numberOfClusters,
                i = e.mutate;
              W(t, "Point", "Input must contain Points");
              var n = t.features.length;
              (r = r || Math.round(Math.sqrt(n / 2))) > n && (r = n), !1 !== i && void 0 !== i || (t = Ft(t));
              var o = R(t),
                s = o.slice(0, r),
                a = Aa(o, r, s),
                u = {};
              return a.centroids.forEach(function (t, e) {
                u[e] = t;
              }), D(t, function (t, e) {
                var r = a.idxs[e];
                t.properties.cluster = r, t.properties.centroid = u[r];
              }), t
            }, t.pointToLineDistance = nr, t.booleanParallel = function (t, e) {
              if (!t) throw new Error("line1 is required");
              if (!e) throw new Error("line2 is required");
              if ("LineString" !== bi(t, "line1")) throw new Error("line1 must be a LineString");
              if ("LineString" !== bi(e, "line2")) throw new Error("line2 must be a LineString");
              for (var r = Ze(Ht(t)).features, i = Ze(Ht(e)).features, n = 0; n < r.length; n++) {
                var o = r[n].geometry.coordinates;
                if (!i[n]) break;
                if (! function (t, e) {
                    return m(Ke(t[0], t[1])) === m(Ke(e[0], e[1]))
                  }(o, i[n].geometry.coordinates)) return !1
              }
              return !0
            }, t.shortestPath = function (t, r, n) {
              if (!L(n = n || {})) throw new Error("options is invalid");
              var o = n.resolution,
                s = n.minDistance,
                u = n.obstacles || c([]);
              if (!t) throw new Error("start is required");
              if (!r) throw new Error("end is required");
              if (o && !E(o) || o <= 0) throw new Error("options.resolution must be a number, greater than 0");
              if (s) throw new Error("options.minDistance is not yet implemented");
              var h = j(t),
                l = j(r);
              switch (t = i(h), r = i(l), J(u)) {
                case "FeatureCollection":
                  if (0 === u.features.length) return a([h, l]);
                  break;
                case "Polygon":
                  u = c([e(H(u))]);
                  break;
                default:
                  throw new Error("invalid obstacles")
              }
              var p = u;
              p.features.push(t), p.features.push(r);
              var f = q(ri(ie(q(p)), 1.15));
              o || (o = At([f[0], f[1]], [f[2], f[1]], n) / 100), p.features.pop(), p.features.pop();
              for (var d = f[0], g = f[1], _ = f[2], y = f[3], m = o / At([d, g], [_, g], n) * (_ - d), v = o / At([d, g], [d, y], n) * (y - g), x = _ - d, w = y - g, b = (x - Math.floor(x / m) * m) / 2, S = [], C = [], I = [], M = [], T = 1 / 0, P = 1 / 0, D = y - (w - Math.floor(w / v) * v) / 2, N = 0; D >= g;) {
                for (var R = [], O = [], A = d + b, F = 0; A <= _;) {
                  var k = i([A, D]),
                    B = function (t, e) {
                      for (var r = 0; r < e.features.length; r++)
                        if (Mt(t, e.features[r])) return !0;
                      return !1
                    }(k, u);
                  R.push(B ? 0 : 1), O.push(A + "|" + D);
                  var z = At(k, t);
                  !B && z < T && (T = z, I = {
                    x: F,
                    y: N
                  });
                  var V = At(k, r);
                  !B && V < P && (P = V, M = {
                    x: F,
                    y: N
                  }), A += m, F++;
                }
                C.push(R), S.push(O), D -= v, N++;
              }
              var U = new Li(C, {
                  diagonal: !0
                }),
                G = U.grid[I.y][I.x],
                X = U.grid[M.y][M.x],
                Z = [h];
              return Fa.search(U, G, X).forEach(function (t) {
                var e = S[t.x][t.y].split("|");
                Z.push([+e[0], +e[1]]);
              }), Z.push(l), Ht(a(Z))
            }, t.voronoi = function (t, e) {
              if (!L(e = e || {})) throw new Error("options is invalid");
              var r = e.bbox || [-180, -85, 180, 85];
              if (!t) throw new Error("points is required");
              if (!Array.isArray(r)) throw new Error("bbox is invalid");
              return W(t, "Point", "points"), c(function () {
                function t(t) {
                  return new Ji(t.map(function (i, n) {
                    var o = [Math.round(e(i, n, t) / Xa) * Xa, Math.round(r(i, n, t) / Xa) * Xa];
                    return o.index = n, o.data = i, o
                  }), i)
                }
                var e = Ii,
                  r = Mi,
                  i = null;
                return t.polygons = function (e) {
                  return t(e).polygons()
                }, t.links = function (e) {
                  return t(e).links()
                }, t.triangles = function (e) {
                  return t(e).triangles()
                }, t.x = function (r) {
                  return arguments.length ? (e = "function" == typeof r ? r : ka(+r), t) : e
                }, t.y = function (e) {
                  return arguments.length ? (r = "function" == typeof e ? e : ka(+e), t) : r
                }, t.extent = function (e) {
                  return arguments.length ? (i = null == e ? null : [
                    [+e[0][0], +e[0][1]],
                    [+e[1][0], +e[1][1]]
                  ], t) : i && [
                    [i[0][0], i[0][1]],
                    [i[1][0], i[1][1]]
                  ]
                }, t.size = function (e) {
                  return arguments.length ? (i = null == e ? null : [
                    [0, 0],
                    [+e[0], +e[1]]
                  ], t) : i && [i[1][0] - i[0][0], i[1][1] - i[0][1]]
                }, t
              }().x(function (t) {
                return t.geometry.coordinates[0]
              }).y(function (t) {
                return t.geometry.coordinates[1]
              }).extent([
                [r[0], r[1]],
                [r[2], r[3]]
              ]).polygons(t.features).map(Qi))
            }, t.ellipse = $i, t.centerMean = en, t.centerMedian = function (t, e) {
              if (!L(e = e || {})) throw new Error("options is invalid");
              var r = e.counter || 10;
              if (!E(r)) throw new Error("counter must be a number");
              var i = e.weight,
                n = en(t, {
                  weight: e.weight
                }),
                o = c([]);
              return D(t, function (t) {
                o.features.push(he(t, {
                  weight: t.properties[i]
                }));
              }), o.properties = {
                tolerance: e.tolerance,
                medianCandidates: []
              }, rn(n.geometry.coordinates, [0, 0], o, r)
            }, t.standardDeviationalEllipse = function (t, e) {
              if (!L(e = e || {})) throw new Error("options is invalid");
              var r = e.steps || 64,
                i = e.weight,
                n = e.properties || {};
              if (!E(r)) throw new Error("steps must be a number");
              if (!L(n)) throw new Error("properties must be a number");
              var o = R(t).length,
                s = en(t, {
                  weight: i
                }),
                a = 0,
                u = 0,
                h = 0;
              D(t, function (t) {
                var e = t.properties[i] || 1,
                  r = nn(G(t), G(s));
                a += Math.pow(r.x, 2) * e, u += Math.pow(r.y, 2) * e, h += r.x * r.y * e;
              });
              var l = a - u,
                p = Math.sqrt(Math.pow(l, 2) + 4 * Math.pow(h, 2)),
                f = 2 * h,
                d = Math.atan((l + p) / f),
                g = 180 * d / Math.PI,
                _ = 0,
                y = 0,
                m = 0;
              D(t, function (t) {
                var e = t.properties[i] || 1,
                  r = nn(G(t), G(s));
                _ += Math.pow(r.x * Math.cos(d) - r.y * Math.sin(d), 2) * e, y += Math.pow(r.x * Math.sin(d) + r.y * Math.cos(d), 2) * e, m += e;
              });
              var v = Math.sqrt(2 * _ / m),
                x = Math.sqrt(2 * y / m),
                w = $i(s, v, x, {
                  units: "degrees",
                  angle: g,
                  steps: r,
                  properties: n
                }),
                b = Pt(t, c([w])),
                S = {
                  meanCenterCoordinates: G(s),
                  semiMajorAxis: v,
                  semiMinorAxis: x,
                  numberOfFeatures: o,
                  angle: g,
                  percentageWithinEllipse: 100 * R(b).length / o
                };
              return w.properties.standardDeviationalEllipse = S, w
            }, t.difference = function (t, r) {
              var i = H(t),
                n = H(r),
                o = t.properties || {};
              if (i = Nn(i), n = Nn(n), !i) return null;
              if (!n) return e(i, o);
              var s = new rh,
                a = s.read(i),
                u = s.read(n),
                c = of .difference(a, u);
              return c.isEmpty() ? null : e((new ih).write(c), o)
            }, t.buffer = function (t, e, r) {
              var i = (r = r || {}).units,
                n = r.steps || 64;
              if (!t) throw new Error("geojson is required");
              if ("object" != typeof r) throw new Error("options must be an object");
              if ("number" != typeof n) throw new Error("steps must be an number");
              if (void 0 === e) throw new Error("radius is required");
              if (n <= 0) throw new Error("steps must be greater than 0");
              n = n || 64, i = i || "kilometers";
              var o = [];
              switch (t.type) {
                case "GeometryCollection":
                  return O(t, function (t) {
                    var r = co(t, e, i);
                    r && o.push(r);
                  }), c(o);
                case "FeatureCollection":
                  return D(t, function (t) {
                    var r = co(t, e, i);
                    r && D(r, function (t) {
                      t && o.push(t);
                    });
                  }), c(o)
              }
              return co(t, e, i)
            }, t.union = fo, t.intersect = go, t.dissolve = function (t, e) {
              if (!L(e = e || {})) throw new Error("options is invalid");
              var r = e.propertyName;
              W(t, "Polygon", "dissolve");
              var i = Ft(t),
                n = i.features,
                o = [];
              n.forEach(function (t, e) {
                t.properties.origIndexPosition = e;
              });
              var s = je();
              for (var u in s.load(i), n) {
                var c = n[u],
                  h = !1;
                if (s.search(c).features.forEach(function (t) {
                    c = n[u];
                    var e = t.properties.origIndexPosition;
                    if (o.length > 0 && 0 !== e)
                      if (e > o[o.length - 1]) e -= o.length;
                      else {
                        var i = _o(e, o);
                        0 !== i && (e -= i);
                      } if (e !== +u) {
                      var l = n[e];
                      l && c && (void 0 !== r && l.properties[r] !== c.properties[r] || xi(c, l) && function (t, e) {
                        return Ye(a(R(c)), a(R(e))).features.length > 0
                      }(0, l) && (n[u] = fo(c, l), o.push(t.properties.origIndexPosition), o.sort(function (t, e) {
                        return t - e
                      }), s.remove(t), n.splice(e, 1), c.properties.origIndexPosition = u, s.remove(c, function (t, e) {
                        return t.properties.origIndexPosition === e.properties.origIndexPosition
                      }), h = !0));
                    }
                  }), h) {
                  if (!c) continue;
                  c.properties.origIndexPosition = u, s.insert(c), u--;
                }
              }
              return n.forEach(function (t) {
                delete t.properties.origIndexPosition, delete t.bbox;
              }), i
            }, t.hexGrid = yo, t.mask = function (t, e) {
              var r = o(e && e.geometry.coordinates || [
                  [
                    [180, 90],
                    [-180, 90],
                    [-180, -90],
                    [180, -90],
                    [180, 90]
                  ]
                ]),
                i = function (t) {
                  var e = [],
                    r = [];
                  return F(t, function (t) {
                    var i = t.geometry.coordinates,
                      n = i[0],
                      s = i.slice(1);
                    e.push(o([n])), s.forEach(function (t) {
                      r.push(o([t]));
                    });
                  }), [c(e), c(r)]
                }(t),
                n = i[0],
                s = i[1];
              return function (t, e, r) {
                var i = [];
                return i.push(t.geometry.coordinates[0]), F(e, function (t) {
                  i.push(t.geometry.coordinates[0]);
                }), F(r, function (t) {
                  i.push(t.geometry.coordinates[0]);
                }), o(i)
              }(r, n = mo(n), s = mo(s))
            }, t.squareGrid = xo, t.triangleGrid = wo, t.interpolate = function (t, e, r) {
              if ("object" != typeof (r = r || {})) throw new Error("options is invalid");
              var i = r.gridType,
                n = r.property,
                o = r.weight;
              if (!t) throw new Error("points is required");
              if (W(t, "Point", "input must contain Points"), !e) throw new Error("cellSize is required");
              if (void 0 !== o && "number" != typeof o) throw new Error("weight must be a number");
              n = n || "elevation", i = i || "square", o = o || 1;
              var s, a = q(t);
              switch (i) {
                case "point":
                case "points":
                  s = mr(a, e, r);
                  break;
                case "square":
                case "squares":
                  s = xo(a, e, r);
                  break;
                case "hex":
                case "hexes":
                  s = yo(a, e, r);
                  break;
                case "triangle":
                case "triangles":
                  s = wo(a, e, r);
                  break;
                default:
                  throw new Error("invalid gridType")
              }
              var u = [];
              return D(s, function (e) {
                var s = 0,
                  a = 0;
                D(t, function (t) {
                  var u, c = At("point" === i ? e : he(e), t, r);
                  if (void 0 !== n && (u = t.properties[n]), void 0 === u && (u = t.geometry.coordinates[2]), void 0 === u) throw new Error("zValue is missing");
                  0 === c && (s = u);
                  var h = 1 / Math.pow(c, o);
                  a += h, s += h * u;
                });
                var c = Ft(e);
                c.properties[n] = s / a, u.push(c);
              }), c(u)
            }, t.pointOnSurface = sr, t.polygonToLineString = Tr, t.lineStringToPolygon = Dr, t.inside = Mt, t.within = Pt, t.bezier = re, t.nearest = Me, t.pointOnLine = He, t.lineDistance = pr, t.radians2degrees = v, t.degrees2radians = x, t.distanceToDegrees = y, t.distanceToRadians = _, t.radiansToDistance = g, t.bearingToAngle = m, t.convertDistance = w, t.toMercator = $e, t.toWgs84 = tr, t.randomPosition = on, t.randomPoint = sn, t.randomPolygon = an, t.randomLineString = un, t.getCluster = hn, t.clusterEach = ln, t.clusterReduce = pn, t.createBins = fn, t.applyFilter = dn, t.propertiesContainsFilter = gn, t.filterProperties = _n, t.earthRadius = bo, t.factors = Eo, t.unitsFactors = Lo, t.areaFactors = So, t.feature = e, t.geometry = r, t.point = i, t.points = n, t.polygon = o, t.polygons = s, t.lineString = a, t.lineStrings = u, t.featureCollection = c, t.multiLineString = h, t.multiPoint = l, t.multiPolygon = p, t.geometryCollection = f, t.round = d, t.radiansToLength = g, t.lengthToRadians = _, t.lengthToDegrees = y, t.bearingToAzimuth = m, t.radiansToDegrees = v, t.degreesToRadians = x, t.convertLength = w, t.convertArea = b, t.isNumber = E, t.isObject = L, t.validateBBox = S, t.validateId = C, t.getCoord = j, t.getCoords = G, t.containsNumber = X, t.geojsonType = Z, t.featureOf = Y, t.collectionOf = W, t.getGeom = H, t.getGeomType = K, t.getType = J, t.coordEach = I, t.coordReduce = M, t.propEach = T, t.propReduce = P, t.featureEach = D, t.featureReduce = N, t.coordAll = R, t.geomEach = O, t.geomReduce = A, t.flattenEach = F, t.flattenReduce = k, t.segmentEach = B, t.segmentReduce = z, t.lineEach = V, t.lineReduce = U, Object.defineProperty(t, "__esModule", {
              value: !0
            });
          }(e);
        }),
        qo = t.unwrapExports(Uo);
  
      function jo(t) {
        for (var e = !0, r = 0, i = t.length; r < i; r++)
          if (!Go(t[r])) throw e = !1, new Error("请传入正确参数！");
        return e
      }
  
      function Go(t) {
        return "[object Array]" === Object.prototype.toString.call(t)
      }
  
      function Xo(t, e) {
        var r = qo.lineIntersect(t, e);
        return !(!r.features || !r.features.length)
      }
      var Zo = function () {};
      Zo.distance = function (t, e) {
        if (jo(arguments)) return 1e3 * qo.distance(qo.point(t), qo.point(e))
      }, Zo.ringArea = function (t) {
        if (jo(arguments)) {
          var e = qo.lineToPolygon(qo.lineString(t));
          return qo.area(e)
        }
      }, Zo.isClockwise = function (t) {
        if (jo(arguments)) {
          var e = qo.lineString(t);
          return qo.booleanClockwise(e)
        }
      }, Zo.distanceOfLine = function (t) {
        if (jo(arguments)) {
          if (Go(t)) {
            var e = qo.lineString(t);
            return 1e3 * qo.length(e)
          }
          throw new Error("请传入正确参数！")
        }
      }, Zo.ringRingClip = function (t, e) {
        if (jo(arguments)) {
          var r = qo.lineToPolygon(qo.lineString(t)),
            i = qo.lineToPolygon(qo.lineString(e)),
            n = qo.intersect(r, i);
          return n ? qo.area(n) : 0
        }
      }, Zo.doesRingRingIntersect = function (t, e) {
        if (jo(arguments)) return 0 !== this.ringRingClip(t, e)
      }, Zo.doesLineRingIntersect = function (t, e) {
        if (jo(arguments)) {
          var r = qo.lineString(t),
            i = qo.lineString(e);
          return Xo(r, i)
        }
      }, Zo.doesLineLineIntersect = function (t, e) {
        if (jo(arguments)) {
          var r = qo.lineString(t),
            i = qo.lineString(e);
          return Xo(r, i)
        }
      }, Zo.doesSegmentPolygonIntersect = function (t, e, r) {
        if (jo(arguments)) {
          var i = qo.lineString([t, e]),
            n = qo.polygonToLine(qo.polygon(r));
          return Xo(i, n)
        }
      }, Zo.doesSegmentRingIntersect = function (t, e, r) {
        if (jo(arguments)) {
          var i = qo.lineString([t, e]),
            n = qo.lineString(r);
          return Xo(i, n)
        }
      }, Zo.doesSegmentLineIntersect = function (t, e, r) {
        if (jo(arguments)) {
          var i = qo.lineString([t, e]),
            n = qo.lineString(r);
          return Xo(i, n)
        }
      }, Zo.doesSegmentsIntersect = function (t, e, r, i) {
        if (jo(arguments)) {
          var n = qo.lineString([t, e]),
            o = qo.lineString([r, i]);
          return Xo(n, o)
        }
      }, Zo.isPointInRing = function (t, e) {
        if (jo(arguments)) {
          var r = qo.point(t),
            i = qo.lineToPolygon(qo.lineString(e));
          return qo.booleanPointInPolygon(r, i)
        }
      }, Zo.isRingInRing = function (t, e) {
        if (jo(arguments)) {
          var r = qo.lineToPolygon(qo.lineString(t)),
            i = qo.lineToPolygon(qo.lineString(e));
          return qo.booleanWithin(r, i)
        }
      }, Zo.isPointInPolygon = function (t, e) {
        if (jo(arguments)) return qo.booleanPointInPolygon(qo.point(t), qo.polygon(e))
      }, Zo.makesureClockwise = function (t) {
        return this.makesureAntiClockwise(t).reverse()
      }, Zo.makesureAntiClockwise = function (t) {
        if (jo(arguments)) {
          var e = qo.lineToPolygon(qo.lineString(t)),
            r = qo.rewind(e);
          return qo.getCoords(r).flat()
        }
      }, Zo.closestOnSegment = function (t, e, r) {
        return this.closestOnLine(t, [e, r])
      }, Zo.closestOnLine = function (t, e) {
        if (jo(arguments)) return qo.nearestPointOnLine(qo.lineString(e), qo.point(t))
      }, Zo.distanceToSegment = function (t, e, r) {
        return this.distanceToLine(t, [e, r])
      }, Zo.distanceToLine = function (t, e) {
        if (jo(arguments)) {
          var r = qo.point(t),
            i = qo.lineString(e);
          return 1e3 * qo.pointToLineDistance(r, i)
        }
      }, Zo.isPointOnSegment = function (t, e, r, i) {
        return this.isPointOnLine(t, [e, r], i)
      }, Zo.isPointOnLine = function (t, e, r) {
        if (void 0 === r && (r = 0), jo([t, e])) {
          if (r > 0) {
            var i = qo.circle(t, r / 1e3);
            return this.doesLineRingIntersect(e, qo.getCoords(i).flat())
          }
          return qo.booleanPointOnLine(qo.point(t), qo.lineString(e))
        }
      }, Zo.isPointOnRing = function (t, e, r) {
        return void 0 === r && (r = 0), this.isPointOnLine(t, e, r)
      }, Zo.isPointOnPolygon = function (t, e, r) {
        if (void 0 === r && (r = 0), jo([t, e])) {
          if (r > 0) {
            var i = qo.circle(t, r / 1e3);
            return Xo(qo.polygonToLine(qo.polygon(e)), qo.lineString(qo.getCoords(i).flat()))
          }
          return qo.booleanPointOnLine(qo.point(t), qo.polygonToLine(qo.polygon(e)))
        }
      };
      var Yo = {
        version: t.version,
        supported: e,
        workerCount: Math.max(Math.floor(t.browser.hardwareConcurrency / 2), 1),
        setRTLTextPlugin: t.setRTLTextPlugin,
        Map: $i,
        Events: tn,
        NavigationControl: rn,
        GeolocateControl: Jn,
        LogoAttribution: Ji,
        PitchControl: Qn,
        ScaleControl: $n,
        FullscreenControl: io,
        MiniMapControl: ro,
        MercatorCoordinate: t.MercatorCoordinate,
        Popup: oo,
        Marker: un,
        Style: Xe,
        LngLat: t.LngLat,
        LngLatBounds: t.LngLatBounds,
        Point: t.Point,
        Evented: t.Evented,
        config: t.config,
        tokenTask: ao,
        ConvertTask: Kn,
        ServiceTask: Hn,
        AutoCompleteTask: uo,
        DistrictTask: co,
        PlaceSearchTask: ho,
        GeocodingTask: lo,
        DirectionsTask: po,
        CloudDataSearchTask: fo,
        ImageServiceTask: go,
        DrawPolylineHandler: vo,
        DrawPointHandler: Io,
        DrawPolygonHandler: Eo,
        DrawRectangleHandler: No,
        DrawCircleHandler: Fo,
        DynamicLayer: ko,
        EpgisDynamicLayer: Bo,
        Utils: Vo,
        GeometryUtil: Zo,
        vt: t.mvt,
        Protobuf: t.Protobuf,
        get accessToken() {
          return t.config.ACCESS_TOKEN
        },
        set accessToken(e) {
          t.config.ACCESS_TOKEN = e;
        }
      };
      return function () {
        var e = (new Xi).getBrowser().name;
        (new Date).getTime();
        "Edge" != e && "IE" != e || zo.call("object" == typeof window && window || "object" == typeof t.window && t.window || "object" == typeof global && global || {});
      }(), Yo
    });
  
    //
  
    return epgis;
  
  }));
  //# sourceMappingURL=epgis-js-1.4.2.1.min.js.map
  